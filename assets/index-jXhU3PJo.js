const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-BbbDBVgC.js","assets/index-gI_TkwFI.js"])))=>i.map(i=>d[i]);
var P0=Object.defineProperty;var y0=tr=>{throw TypeError(tr)};var I0=(tr,er,rr)=>er in tr?P0(tr,er,{enumerable:!0,configurable:!0,writable:!0,value:rr}):tr[er]=rr;var Ys=(tr,er,rr)=>I0(tr,typeof er!="symbol"?er+"":er,rr),o0=(tr,er,rr)=>er.has(tr)||y0("Cannot "+rr);var On=(tr,er,rr)=>(o0(tr,er,"read from private field"),rr?rr.call(tr):er.get(tr)),mo=(tr,er,rr)=>er.has(tr)?y0("Cannot add the same private member more than once"):er instanceof WeakSet?er.add(tr):er.set(tr,rr),Zs=(tr,er,rr,nr)=>(o0(tr,er,"write to private field"),nr?nr.call(tr,rr):er.set(tr,rr),rr),Bo=(tr,er,rr)=>(o0(tr,er,"access private method"),rr);var m0=(tr,er,rr,nr)=>({set _(ir){Zs(tr,er,ir,rr)},get _(){return On(tr,er,nr)}});function _mergeNamespaces(tr,er){for(var rr=0;rr<er.length;rr++){const nr=er[rr];if(typeof nr!="string"&&!Array.isArray(nr)){for(const ir in nr)if(ir!=="default"&&!(ir in tr)){const sr=Object.getOwnPropertyDescriptor(nr,ir);sr&&Object.defineProperty(tr,ir,sr.get?sr:{enumerable:!0,get:()=>nr[ir]})}}}return Object.freeze(Object.defineProperty(tr,Symbol.toStringTag,{value:"Module"}))}(function(){const er=document.createElement("link").relList;if(er&&er.supports&&er.supports("modulepreload"))return;for(const ir of document.querySelectorAll('link[rel="modulepreload"]'))nr(ir);new MutationObserver(ir=>{for(const sr of ir)if(sr.type==="childList")for(const or of sr.addedNodes)or.tagName==="LINK"&&or.rel==="modulepreload"&&nr(or)}).observe(document,{childList:!0,subtree:!0});function rr(ir){const sr={};return ir.integrity&&(sr.integrity=ir.integrity),ir.referrerPolicy&&(sr.referrerPolicy=ir.referrerPolicy),ir.crossOrigin==="use-credentials"?sr.credentials="include":ir.crossOrigin==="anonymous"?sr.credentials="omit":sr.credentials="same-origin",sr}function nr(ir){if(ir.ep)return;ir.ep=!0;const sr=rr(ir);fetch(ir.href,sr)}})();var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};function getDefaultExportFromCjs(tr){return tr&&tr.__esModule&&Object.prototype.hasOwnProperty.call(tr,"default")?tr.default:tr}function getAugmentedNamespace(tr){if(tr.__esModule)return tr;var er=tr.default;if(typeof er=="function"){var rr=function nr(){return this instanceof nr?Reflect.construct(er,arguments,this.constructor):er.apply(this,arguments)};rr.prototype=er.prototype}else rr={};return Object.defineProperty(rr,"__esModule",{value:!0}),Object.keys(tr).forEach(function(nr){var ir=Object.getOwnPropertyDescriptor(tr,nr);Object.defineProperty(rr,nr,ir.get?ir:{enumerable:!0,get:function(){return tr[nr]}})}),rr}var buffer$1={},base64Js={};base64Js.byteLength=byteLength$1;base64Js.toByteArray=toByteArray;base64Js.fromByteArray=fromByteArray;var lookup$2=[],revLookup=[],Arr=typeof Uint8Array<"u"?Uint8Array:Array,code="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var i$4=0,len=code.length;i$4<len;++i$4)lookup$2[i$4]=code[i$4],revLookup[code.charCodeAt(i$4)]=i$4;revLookup[45]=62;revLookup[95]=63;function getLens(tr){var er=tr.length;if(er%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var rr=tr.indexOf("=");rr===-1&&(rr=er);var nr=rr===er?0:4-rr%4;return[rr,nr]}function byteLength$1(tr){var er=getLens(tr),rr=er[0],nr=er[1];return(rr+nr)*3/4-nr}function _byteLength(tr,er,rr){return(er+rr)*3/4-rr}function toByteArray(tr){var er,rr=getLens(tr),nr=rr[0],ir=rr[1],sr=new Arr(_byteLength(tr,nr,ir)),or=0,ar=ir>0?nr-4:nr,cr;for(cr=0;cr<ar;cr+=4)er=revLookup[tr.charCodeAt(cr)]<<18|revLookup[tr.charCodeAt(cr+1)]<<12|revLookup[tr.charCodeAt(cr+2)]<<6|revLookup[tr.charCodeAt(cr+3)],sr[or++]=er>>16&255,sr[or++]=er>>8&255,sr[or++]=er&255;return ir===2&&(er=revLookup[tr.charCodeAt(cr)]<<2|revLookup[tr.charCodeAt(cr+1)]>>4,sr[or++]=er&255),ir===1&&(er=revLookup[tr.charCodeAt(cr)]<<10|revLookup[tr.charCodeAt(cr+1)]<<4|revLookup[tr.charCodeAt(cr+2)]>>2,sr[or++]=er>>8&255,sr[or++]=er&255),sr}function tripletToBase64(tr){return lookup$2[tr>>18&63]+lookup$2[tr>>12&63]+lookup$2[tr>>6&63]+lookup$2[tr&63]}function encodeChunk(tr,er,rr){for(var nr,ir=[],sr=er;sr<rr;sr+=3)nr=(tr[sr]<<16&16711680)+(tr[sr+1]<<8&65280)+(tr[sr+2]&255),ir.push(tripletToBase64(nr));return ir.join("")}function fromByteArray(tr){for(var er,rr=tr.length,nr=rr%3,ir=[],sr=16383,or=0,ar=rr-nr;or<ar;or+=sr)ir.push(encodeChunk(tr,or,or+sr>ar?ar:or+sr));return nr===1?(er=tr[rr-1],ir.push(lookup$2[er>>2]+lookup$2[er<<4&63]+"==")):nr===2&&(er=(tr[rr-2]<<8)+tr[rr-1],ir.push(lookup$2[er>>10]+lookup$2[er>>4&63]+lookup$2[er<<2&63]+"=")),ir.join("")}var ieee754={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */ieee754.read=function(tr,er,rr,nr,ir){var sr,or,ar=ir*8-nr-1,cr=(1<<ar)-1,lr=cr>>1,ur=-7,dr=rr?ir-1:0,yr=rr?-1:1,mr=tr[er+dr];for(dr+=yr,sr=mr&(1<<-ur)-1,mr>>=-ur,ur+=ar;ur>0;sr=sr*256+tr[er+dr],dr+=yr,ur-=8);for(or=sr&(1<<-ur)-1,sr>>=-ur,ur+=nr;ur>0;or=or*256+tr[er+dr],dr+=yr,ur-=8);if(sr===0)sr=1-lr;else{if(sr===cr)return or?NaN:(mr?-1:1)*(1/0);or=or+Math.pow(2,nr),sr=sr-lr}return(mr?-1:1)*or*Math.pow(2,sr-nr)};ieee754.write=function(tr,er,rr,nr,ir,sr){var or,ar,cr,lr=sr*8-ir-1,ur=(1<<lr)-1,dr=ur>>1,yr=ir===23?Math.pow(2,-24)-Math.pow(2,-77):0,mr=nr?0:sr-1,wr=nr?1:-1,xr=er<0||er===0&&1/er<0?1:0;for(er=Math.abs(er),isNaN(er)||er===1/0?(ar=isNaN(er)?1:0,or=ur):(or=Math.floor(Math.log(er)/Math.LN2),er*(cr=Math.pow(2,-or))<1&&(or--,cr*=2),or+dr>=1?er+=yr/cr:er+=yr*Math.pow(2,1-dr),er*cr>=2&&(or++,cr/=2),or+dr>=ur?(ar=0,or=ur):or+dr>=1?(ar=(er*cr-1)*Math.pow(2,ir),or=or+dr):(ar=er*Math.pow(2,dr-1)*Math.pow(2,ir),or=0));ir>=8;tr[rr+mr]=ar&255,mr+=wr,ar/=256,ir-=8);for(or=or<<ir|ar,lr+=ir;lr>0;tr[rr+mr]=or&255,mr+=wr,or/=256,lr-=8);tr[rr+mr-wr]|=xr*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(tr){const er=base64Js,rr=ieee754,nr=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;tr.Buffer=ar,tr.SlowBuffer=Ar,tr.INSPECT_MAX_BYTES=50;const ir=2147483647;tr.kMaxLength=ir,ar.TYPED_ARRAY_SUPPORT=sr(),!ar.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function sr(){try{const Xr=new Uint8Array(1),Lr={foo:function(){return 42}};return Object.setPrototypeOf(Lr,Uint8Array.prototype),Object.setPrototypeOf(Xr,Lr),Xr.foo()===42}catch{return!1}}Object.defineProperty(ar.prototype,"parent",{enumerable:!0,get:function(){if(ar.isBuffer(this))return this.buffer}}),Object.defineProperty(ar.prototype,"offset",{enumerable:!0,get:function(){if(ar.isBuffer(this))return this.byteOffset}});function or(Xr){if(Xr>ir)throw new RangeError('The value "'+Xr+'" is invalid for option "size"');const Lr=new Uint8Array(Xr);return Object.setPrototypeOf(Lr,ar.prototype),Lr}function ar(Xr,Lr,Fr){if(typeof Xr=="number"){if(typeof Lr=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return dr(Xr)}return cr(Xr,Lr,Fr)}ar.poolSize=8192;function cr(Xr,Lr,Fr){if(typeof Xr=="string")return yr(Xr,Lr);if(ArrayBuffer.isView(Xr))return wr(Xr);if(Xr==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof Xr);if(Kn(Xr,ArrayBuffer)||Xr&&Kn(Xr.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Kn(Xr,SharedArrayBuffer)||Xr&&Kn(Xr.buffer,SharedArrayBuffer)))return xr(Xr,Lr,Fr);if(typeof Xr=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const ln=Xr.valueOf&&Xr.valueOf();if(ln!=null&&ln!==Xr)return ar.from(ln,Lr,Fr);const mn=Or(Xr);if(mn)return mn;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof Xr[Symbol.toPrimitive]=="function")return ar.from(Xr[Symbol.toPrimitive]("string"),Lr,Fr);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof Xr)}ar.from=function(Xr,Lr,Fr){return cr(Xr,Lr,Fr)},Object.setPrototypeOf(ar.prototype,Uint8Array.prototype),Object.setPrototypeOf(ar,Uint8Array);function lr(Xr){if(typeof Xr!="number")throw new TypeError('"size" argument must be of type number');if(Xr<0)throw new RangeError('The value "'+Xr+'" is invalid for option "size"')}function ur(Xr,Lr,Fr){return lr(Xr),Xr<=0?or(Xr):Lr!==void 0?typeof Fr=="string"?or(Xr).fill(Lr,Fr):or(Xr).fill(Lr):or(Xr)}ar.alloc=function(Xr,Lr,Fr){return ur(Xr,Lr,Fr)};function dr(Xr){return lr(Xr),or(Xr<0?0:Tr(Xr)|0)}ar.allocUnsafe=function(Xr){return dr(Xr)},ar.allocUnsafeSlow=function(Xr){return dr(Xr)};function yr(Xr,Lr){if((typeof Lr!="string"||Lr==="")&&(Lr="utf8"),!ar.isEncoding(Lr))throw new TypeError("Unknown encoding: "+Lr);const Fr=Nr(Xr,Lr)|0;let ln=or(Fr);const mn=ln.write(Xr,Lr);return mn!==Fr&&(ln=ln.slice(0,mn)),ln}function mr(Xr){const Lr=Xr.length<0?0:Tr(Xr.length)|0,Fr=or(Lr);for(let ln=0;ln<Lr;ln+=1)Fr[ln]=Xr[ln]&255;return Fr}function wr(Xr){if(Kn(Xr,Uint8Array)){const Lr=new Uint8Array(Xr);return xr(Lr.buffer,Lr.byteOffset,Lr.byteLength)}return mr(Xr)}function xr(Xr,Lr,Fr){if(Lr<0||Xr.byteLength<Lr)throw new RangeError('"offset" is outside of buffer bounds');if(Xr.byteLength<Lr+(Fr||0))throw new RangeError('"length" is outside of buffer bounds');let ln;return Lr===void 0&&Fr===void 0?ln=new Uint8Array(Xr):Fr===void 0?ln=new Uint8Array(Xr,Lr):ln=new Uint8Array(Xr,Lr,Fr),Object.setPrototypeOf(ln,ar.prototype),ln}function Or(Xr){if(ar.isBuffer(Xr)){const Lr=Tr(Xr.length)|0,Fr=or(Lr);return Fr.length===0||Xr.copy(Fr,0,0,Lr),Fr}if(Xr.length!==void 0)return typeof Xr.length!="number"||eo(Xr.length)?or(0):mr(Xr);if(Xr.type==="Buffer"&&Array.isArray(Xr.data))return mr(Xr.data)}function Tr(Xr){if(Xr>=ir)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+ir.toString(16)+" bytes");return Xr|0}function Ar(Xr){return+Xr!=Xr&&(Xr=0),ar.alloc(+Xr)}ar.isBuffer=function(Lr){return Lr!=null&&Lr._isBuffer===!0&&Lr!==ar.prototype},ar.compare=function(Lr,Fr){if(Kn(Lr,Uint8Array)&&(Lr=ar.from(Lr,Lr.offset,Lr.byteLength)),Kn(Fr,Uint8Array)&&(Fr=ar.from(Fr,Fr.offset,Fr.byteLength)),!ar.isBuffer(Lr)||!ar.isBuffer(Fr))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(Lr===Fr)return 0;let ln=Lr.length,mn=Fr.length;for(let _n=0,An=Math.min(ln,mn);_n<An;++_n)if(Lr[_n]!==Fr[_n]){ln=Lr[_n],mn=Fr[_n];break}return ln<mn?-1:mn<ln?1:0},ar.isEncoding=function(Lr){switch(String(Lr).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},ar.concat=function(Lr,Fr){if(!Array.isArray(Lr))throw new TypeError('"list" argument must be an Array of Buffers');if(Lr.length===0)return ar.alloc(0);let ln;if(Fr===void 0)for(Fr=0,ln=0;ln<Lr.length;++ln)Fr+=Lr[ln].length;const mn=ar.allocUnsafe(Fr);let _n=0;for(ln=0;ln<Lr.length;++ln){let An=Lr[ln];if(Kn(An,Uint8Array))_n+An.length>mn.length?(ar.isBuffer(An)||(An=ar.from(An)),An.copy(mn,_n)):Uint8Array.prototype.set.call(mn,An,_n);else if(ar.isBuffer(An))An.copy(mn,_n);else throw new TypeError('"list" argument must be an Array of Buffers');_n+=An.length}return mn};function Nr(Xr,Lr){if(ar.isBuffer(Xr))return Xr.length;if(ArrayBuffer.isView(Xr)||Kn(Xr,ArrayBuffer))return Xr.byteLength;if(typeof Xr!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof Xr);const Fr=Xr.length,ln=arguments.length>2&&arguments[2]===!0;if(!ln&&Fr===0)return 0;let mn=!1;for(;;)switch(Lr){case"ascii":case"latin1":case"binary":return Fr;case"utf8":case"utf-8":return Pn(Xr).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Fr*2;case"hex":return Fr>>>1;case"base64":return zn(Xr).length;default:if(mn)return ln?-1:Pn(Xr).length;Lr=(""+Lr).toLowerCase(),mn=!0}}ar.byteLength=Nr;function Ur(Xr,Lr,Fr){let ln=!1;if((Lr===void 0||Lr<0)&&(Lr=0),Lr>this.length||((Fr===void 0||Fr>this.length)&&(Fr=this.length),Fr<=0)||(Fr>>>=0,Lr>>>=0,Fr<=Lr))return"";for(Xr||(Xr="utf8");;)switch(Xr){case"hex":return Er(this,Lr,Fr);case"utf8":case"utf-8":return fr(this,Lr,Fr);case"ascii":return _r(this,Lr,Fr);case"latin1":case"binary":return $r(this,Lr,Fr);case"base64":return gr(this,Lr,Fr);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return vr(this,Lr,Fr);default:if(ln)throw new TypeError("Unknown encoding: "+Xr);Xr=(Xr+"").toLowerCase(),ln=!0}}ar.prototype._isBuffer=!0;function Dr(Xr,Lr,Fr){const ln=Xr[Lr];Xr[Lr]=Xr[Fr],Xr[Fr]=ln}ar.prototype.swap16=function(){const Lr=this.length;if(Lr%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let Fr=0;Fr<Lr;Fr+=2)Dr(this,Fr,Fr+1);return this},ar.prototype.swap32=function(){const Lr=this.length;if(Lr%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let Fr=0;Fr<Lr;Fr+=4)Dr(this,Fr,Fr+3),Dr(this,Fr+1,Fr+2);return this},ar.prototype.swap64=function(){const Lr=this.length;if(Lr%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let Fr=0;Fr<Lr;Fr+=8)Dr(this,Fr,Fr+7),Dr(this,Fr+1,Fr+6),Dr(this,Fr+2,Fr+5),Dr(this,Fr+3,Fr+4);return this},ar.prototype.toString=function(){const Lr=this.length;return Lr===0?"":arguments.length===0?fr(this,0,Lr):Ur.apply(this,arguments)},ar.prototype.toLocaleString=ar.prototype.toString,ar.prototype.equals=function(Lr){if(!ar.isBuffer(Lr))throw new TypeError("Argument must be a Buffer");return this===Lr?!0:ar.compare(this,Lr)===0},ar.prototype.inspect=function(){let Lr="";const Fr=tr.INSPECT_MAX_BYTES;return Lr=this.toString("hex",0,Fr).replace(/(.{2})/g,"$1 ").trim(),this.length>Fr&&(Lr+=" ... "),"<Buffer "+Lr+">"},nr&&(ar.prototype[nr]=ar.prototype.inspect),ar.prototype.compare=function(Lr,Fr,ln,mn,_n){if(Kn(Lr,Uint8Array)&&(Lr=ar.from(Lr,Lr.offset,Lr.byteLength)),!ar.isBuffer(Lr))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof Lr);if(Fr===void 0&&(Fr=0),ln===void 0&&(ln=Lr?Lr.length:0),mn===void 0&&(mn=0),_n===void 0&&(_n=this.length),Fr<0||ln>Lr.length||mn<0||_n>this.length)throw new RangeError("out of range index");if(mn>=_n&&Fr>=ln)return 0;if(mn>=_n)return-1;if(Fr>=ln)return 1;if(Fr>>>=0,ln>>>=0,mn>>>=0,_n>>>=0,this===Lr)return 0;let An=_n-mn,Gn=ln-Fr;const Xs=Math.min(An,Gn),Jn=this.slice(mn,_n),no=Lr.slice(Fr,ln);for(let zs=0;zs<Xs;++zs)if(Jn[zs]!==no[zs]){An=Jn[zs],Gn=no[zs];break}return An<Gn?-1:Gn<An?1:0};function Hr(Xr,Lr,Fr,ln,mn){if(Xr.length===0)return-1;if(typeof Fr=="string"?(ln=Fr,Fr=0):Fr>2147483647?Fr=2147483647:Fr<-2147483648&&(Fr=-2147483648),Fr=+Fr,eo(Fr)&&(Fr=mn?0:Xr.length-1),Fr<0&&(Fr=Xr.length+Fr),Fr>=Xr.length){if(mn)return-1;Fr=Xr.length-1}else if(Fr<0)if(mn)Fr=0;else return-1;if(typeof Lr=="string"&&(Lr=ar.from(Lr,ln)),ar.isBuffer(Lr))return Lr.length===0?-1:zr(Xr,Lr,Fr,ln,mn);if(typeof Lr=="number")return Lr=Lr&255,typeof Uint8Array.prototype.indexOf=="function"?mn?Uint8Array.prototype.indexOf.call(Xr,Lr,Fr):Uint8Array.prototype.lastIndexOf.call(Xr,Lr,Fr):zr(Xr,[Lr],Fr,ln,mn);throw new TypeError("val must be string, number or Buffer")}function zr(Xr,Lr,Fr,ln,mn){let _n=1,An=Xr.length,Gn=Lr.length;if(ln!==void 0&&(ln=String(ln).toLowerCase(),ln==="ucs2"||ln==="ucs-2"||ln==="utf16le"||ln==="utf-16le")){if(Xr.length<2||Lr.length<2)return-1;_n=2,An/=2,Gn/=2,Fr/=2}function Xs(no,zs){return _n===1?no[zs]:no.readUInt16BE(zs*_n)}let Jn;if(mn){let no=-1;for(Jn=Fr;Jn<An;Jn++)if(Xs(Xr,Jn)===Xs(Lr,no===-1?0:Jn-no)){if(no===-1&&(no=Jn),Jn-no+1===Gn)return no*_n}else no!==-1&&(Jn-=Jn-no),no=-1}else for(Fr+Gn>An&&(Fr=An-Gn),Jn=Fr;Jn>=0;Jn--){let no=!0;for(let zs=0;zs<Gn;zs++)if(Xs(Xr,Jn+zs)!==Xs(Lr,zs)){no=!1;break}if(no)return Jn}return-1}ar.prototype.includes=function(Lr,Fr,ln){return this.indexOf(Lr,Fr,ln)!==-1},ar.prototype.indexOf=function(Lr,Fr,ln){return Hr(this,Lr,Fr,ln,!0)},ar.prototype.lastIndexOf=function(Lr,Fr,ln){return Hr(this,Lr,Fr,ln,!1)};function Cr(Xr,Lr,Fr,ln){Fr=Number(Fr)||0;const mn=Xr.length-Fr;ln?(ln=Number(ln),ln>mn&&(ln=mn)):ln=mn;const _n=Lr.length;ln>_n/2&&(ln=_n/2);let An;for(An=0;An<ln;++An){const Gn=parseInt(Lr.substr(An*2,2),16);if(eo(Gn))return An;Xr[Fr+An]=Gn}return An}function Mr(Xr,Lr,Fr,ln){return Zn(Pn(Lr,Xr.length-Fr),Xr,Fr,ln)}function Pr(Xr,Lr,Fr,ln){return Zn(Cn(Lr),Xr,Fr,ln)}function Sr(Xr,Lr,Fr,ln){return Zn(zn(Lr),Xr,Fr,ln)}function pr(Xr,Lr,Fr,ln){return Zn(Sn(Lr,Xr.length-Fr),Xr,Fr,ln)}ar.prototype.write=function(Lr,Fr,ln,mn){if(Fr===void 0)mn="utf8",ln=this.length,Fr=0;else if(ln===void 0&&typeof Fr=="string")mn=Fr,ln=this.length,Fr=0;else if(isFinite(Fr))Fr=Fr>>>0,isFinite(ln)?(ln=ln>>>0,mn===void 0&&(mn="utf8")):(mn=ln,ln=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const _n=this.length-Fr;if((ln===void 0||ln>_n)&&(ln=_n),Lr.length>0&&(ln<0||Fr<0)||Fr>this.length)throw new RangeError("Attempt to write outside buffer bounds");mn||(mn="utf8");let An=!1;for(;;)switch(mn){case"hex":return Cr(this,Lr,Fr,ln);case"utf8":case"utf-8":return Mr(this,Lr,Fr,ln);case"ascii":case"latin1":case"binary":return Pr(this,Lr,Fr,ln);case"base64":return Sr(this,Lr,Fr,ln);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return pr(this,Lr,Fr,ln);default:if(An)throw new TypeError("Unknown encoding: "+mn);mn=(""+mn).toLowerCase(),An=!0}},ar.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function gr(Xr,Lr,Fr){return Lr===0&&Fr===Xr.length?er.fromByteArray(Xr):er.fromByteArray(Xr.slice(Lr,Fr))}function fr(Xr,Lr,Fr){Fr=Math.min(Xr.length,Fr);const ln=[];let mn=Lr;for(;mn<Fr;){const _n=Xr[mn];let An=null,Gn=_n>239?4:_n>223?3:_n>191?2:1;if(mn+Gn<=Fr){let Xs,Jn,no,zs;switch(Gn){case 1:_n<128&&(An=_n);break;case 2:Xs=Xr[mn+1],(Xs&192)===128&&(zs=(_n&31)<<6|Xs&63,zs>127&&(An=zs));break;case 3:Xs=Xr[mn+1],Jn=Xr[mn+2],(Xs&192)===128&&(Jn&192)===128&&(zs=(_n&15)<<12|(Xs&63)<<6|Jn&63,zs>2047&&(zs<55296||zs>57343)&&(An=zs));break;case 4:Xs=Xr[mn+1],Jn=Xr[mn+2],no=Xr[mn+3],(Xs&192)===128&&(Jn&192)===128&&(no&192)===128&&(zs=(_n&15)<<18|(Xs&63)<<12|(Jn&63)<<6|no&63,zs>65535&&zs<1114112&&(An=zs))}}An===null?(An=65533,Gn=1):An>65535&&(An-=65536,ln.push(An>>>10&1023|55296),An=56320|An&1023),ln.push(An),mn+=Gn}return br(ln)}const hr=4096;function br(Xr){const Lr=Xr.length;if(Lr<=hr)return String.fromCharCode.apply(String,Xr);let Fr="",ln=0;for(;ln<Lr;)Fr+=String.fromCharCode.apply(String,Xr.slice(ln,ln+=hr));return Fr}function _r(Xr,Lr,Fr){let ln="";Fr=Math.min(Xr.length,Fr);for(let mn=Lr;mn<Fr;++mn)ln+=String.fromCharCode(Xr[mn]&127);return ln}function $r(Xr,Lr,Fr){let ln="";Fr=Math.min(Xr.length,Fr);for(let mn=Lr;mn<Fr;++mn)ln+=String.fromCharCode(Xr[mn]);return ln}function Er(Xr,Lr,Fr){const ln=Xr.length;(!Lr||Lr<0)&&(Lr=0),(!Fr||Fr<0||Fr>ln)&&(Fr=ln);let mn="";for(let _n=Lr;_n<Fr;++_n)mn+=vn[Xr[_n]];return mn}function vr(Xr,Lr,Fr){const ln=Xr.slice(Lr,Fr);let mn="";for(let _n=0;_n<ln.length-1;_n+=2)mn+=String.fromCharCode(ln[_n]+ln[_n+1]*256);return mn}ar.prototype.slice=function(Lr,Fr){const ln=this.length;Lr=~~Lr,Fr=Fr===void 0?ln:~~Fr,Lr<0?(Lr+=ln,Lr<0&&(Lr=0)):Lr>ln&&(Lr=ln),Fr<0?(Fr+=ln,Fr<0&&(Fr=0)):Fr>ln&&(Fr=ln),Fr<Lr&&(Fr=Lr);const mn=this.subarray(Lr,Fr);return Object.setPrototypeOf(mn,ar.prototype),mn};function Ir(Xr,Lr,Fr){if(Xr%1!==0||Xr<0)throw new RangeError("offset is not uint");if(Xr+Lr>Fr)throw new RangeError("Trying to access beyond buffer length")}ar.prototype.readUintLE=ar.prototype.readUIntLE=function(Lr,Fr,ln){Lr=Lr>>>0,Fr=Fr>>>0,ln||Ir(Lr,Fr,this.length);let mn=this[Lr],_n=1,An=0;for(;++An<Fr&&(_n*=256);)mn+=this[Lr+An]*_n;return mn},ar.prototype.readUintBE=ar.prototype.readUIntBE=function(Lr,Fr,ln){Lr=Lr>>>0,Fr=Fr>>>0,ln||Ir(Lr,Fr,this.length);let mn=this[Lr+--Fr],_n=1;for(;Fr>0&&(_n*=256);)mn+=this[Lr+--Fr]*_n;return mn},ar.prototype.readUint8=ar.prototype.readUInt8=function(Lr,Fr){return Lr=Lr>>>0,Fr||Ir(Lr,1,this.length),this[Lr]},ar.prototype.readUint16LE=ar.prototype.readUInt16LE=function(Lr,Fr){return Lr=Lr>>>0,Fr||Ir(Lr,2,this.length),this[Lr]|this[Lr+1]<<8},ar.prototype.readUint16BE=ar.prototype.readUInt16BE=function(Lr,Fr){return Lr=Lr>>>0,Fr||Ir(Lr,2,this.length),this[Lr]<<8|this[Lr+1]},ar.prototype.readUint32LE=ar.prototype.readUInt32LE=function(Lr,Fr){return Lr=Lr>>>0,Fr||Ir(Lr,4,this.length),(this[Lr]|this[Lr+1]<<8|this[Lr+2]<<16)+this[Lr+3]*16777216},ar.prototype.readUint32BE=ar.prototype.readUInt32BE=function(Lr,Fr){return Lr=Lr>>>0,Fr||Ir(Lr,4,this.length),this[Lr]*16777216+(this[Lr+1]<<16|this[Lr+2]<<8|this[Lr+3])},ar.prototype.readBigUInt64LE=xn(function(Lr){Lr=Lr>>>0,Qr(Lr,"offset");const Fr=this[Lr],ln=this[Lr+7];(Fr===void 0||ln===void 0)&&un(Lr,this.length-8);const mn=Fr+this[++Lr]*2**8+this[++Lr]*2**16+this[++Lr]*2**24,_n=this[++Lr]+this[++Lr]*2**8+this[++Lr]*2**16+ln*2**24;return BigInt(mn)+(BigInt(_n)<<BigInt(32))}),ar.prototype.readBigUInt64BE=xn(function(Lr){Lr=Lr>>>0,Qr(Lr,"offset");const Fr=this[Lr],ln=this[Lr+7];(Fr===void 0||ln===void 0)&&un(Lr,this.length-8);const mn=Fr*2**24+this[++Lr]*2**16+this[++Lr]*2**8+this[++Lr],_n=this[++Lr]*2**24+this[++Lr]*2**16+this[++Lr]*2**8+ln;return(BigInt(mn)<<BigInt(32))+BigInt(_n)}),ar.prototype.readIntLE=function(Lr,Fr,ln){Lr=Lr>>>0,Fr=Fr>>>0,ln||Ir(Lr,Fr,this.length);let mn=this[Lr],_n=1,An=0;for(;++An<Fr&&(_n*=256);)mn+=this[Lr+An]*_n;return _n*=128,mn>=_n&&(mn-=Math.pow(2,8*Fr)),mn},ar.prototype.readIntBE=function(Lr,Fr,ln){Lr=Lr>>>0,Fr=Fr>>>0,ln||Ir(Lr,Fr,this.length);let mn=Fr,_n=1,An=this[Lr+--mn];for(;mn>0&&(_n*=256);)An+=this[Lr+--mn]*_n;return _n*=128,An>=_n&&(An-=Math.pow(2,8*Fr)),An},ar.prototype.readInt8=function(Lr,Fr){return Lr=Lr>>>0,Fr||Ir(Lr,1,this.length),this[Lr]&128?(255-this[Lr]+1)*-1:this[Lr]},ar.prototype.readInt16LE=function(Lr,Fr){Lr=Lr>>>0,Fr||Ir(Lr,2,this.length);const ln=this[Lr]|this[Lr+1]<<8;return ln&32768?ln|4294901760:ln},ar.prototype.readInt16BE=function(Lr,Fr){Lr=Lr>>>0,Fr||Ir(Lr,2,this.length);const ln=this[Lr+1]|this[Lr]<<8;return ln&32768?ln|4294901760:ln},ar.prototype.readInt32LE=function(Lr,Fr){return Lr=Lr>>>0,Fr||Ir(Lr,4,this.length),this[Lr]|this[Lr+1]<<8|this[Lr+2]<<16|this[Lr+3]<<24},ar.prototype.readInt32BE=function(Lr,Fr){return Lr=Lr>>>0,Fr||Ir(Lr,4,this.length),this[Lr]<<24|this[Lr+1]<<16|this[Lr+2]<<8|this[Lr+3]},ar.prototype.readBigInt64LE=xn(function(Lr){Lr=Lr>>>0,Qr(Lr,"offset");const Fr=this[Lr],ln=this[Lr+7];(Fr===void 0||ln===void 0)&&un(Lr,this.length-8);const mn=this[Lr+4]+this[Lr+5]*2**8+this[Lr+6]*2**16+(ln<<24);return(BigInt(mn)<<BigInt(32))+BigInt(Fr+this[++Lr]*2**8+this[++Lr]*2**16+this[++Lr]*2**24)}),ar.prototype.readBigInt64BE=xn(function(Lr){Lr=Lr>>>0,Qr(Lr,"offset");const Fr=this[Lr],ln=this[Lr+7];(Fr===void 0||ln===void 0)&&un(Lr,this.length-8);const mn=(Fr<<24)+this[++Lr]*2**16+this[++Lr]*2**8+this[++Lr];return(BigInt(mn)<<BigInt(32))+BigInt(this[++Lr]*2**24+this[++Lr]*2**16+this[++Lr]*2**8+ln)}),ar.prototype.readFloatLE=function(Lr,Fr){return Lr=Lr>>>0,Fr||Ir(Lr,4,this.length),rr.read(this,Lr,!0,23,4)},ar.prototype.readFloatBE=function(Lr,Fr){return Lr=Lr>>>0,Fr||Ir(Lr,4,this.length),rr.read(this,Lr,!1,23,4)},ar.prototype.readDoubleLE=function(Lr,Fr){return Lr=Lr>>>0,Fr||Ir(Lr,8,this.length),rr.read(this,Lr,!0,52,8)},ar.prototype.readDoubleBE=function(Lr,Fr){return Lr=Lr>>>0,Fr||Ir(Lr,8,this.length),rr.read(this,Lr,!1,52,8)};function Rr(Xr,Lr,Fr,ln,mn,_n){if(!ar.isBuffer(Xr))throw new TypeError('"buffer" argument must be a Buffer instance');if(Lr>mn||Lr<_n)throw new RangeError('"value" argument is out of bounds');if(Fr+ln>Xr.length)throw new RangeError("Index out of range")}ar.prototype.writeUintLE=ar.prototype.writeUIntLE=function(Lr,Fr,ln,mn){if(Lr=+Lr,Fr=Fr>>>0,ln=ln>>>0,!mn){const Gn=Math.pow(2,8*ln)-1;Rr(this,Lr,Fr,ln,Gn,0)}let _n=1,An=0;for(this[Fr]=Lr&255;++An<ln&&(_n*=256);)this[Fr+An]=Lr/_n&255;return Fr+ln},ar.prototype.writeUintBE=ar.prototype.writeUIntBE=function(Lr,Fr,ln,mn){if(Lr=+Lr,Fr=Fr>>>0,ln=ln>>>0,!mn){const Gn=Math.pow(2,8*ln)-1;Rr(this,Lr,Fr,ln,Gn,0)}let _n=ln-1,An=1;for(this[Fr+_n]=Lr&255;--_n>=0&&(An*=256);)this[Fr+_n]=Lr/An&255;return Fr+ln},ar.prototype.writeUint8=ar.prototype.writeUInt8=function(Lr,Fr,ln){return Lr=+Lr,Fr=Fr>>>0,ln||Rr(this,Lr,Fr,1,255,0),this[Fr]=Lr&255,Fr+1},ar.prototype.writeUint16LE=ar.prototype.writeUInt16LE=function(Lr,Fr,ln){return Lr=+Lr,Fr=Fr>>>0,ln||Rr(this,Lr,Fr,2,65535,0),this[Fr]=Lr&255,this[Fr+1]=Lr>>>8,Fr+2},ar.prototype.writeUint16BE=ar.prototype.writeUInt16BE=function(Lr,Fr,ln){return Lr=+Lr,Fr=Fr>>>0,ln||Rr(this,Lr,Fr,2,65535,0),this[Fr]=Lr>>>8,this[Fr+1]=Lr&255,Fr+2},ar.prototype.writeUint32LE=ar.prototype.writeUInt32LE=function(Lr,Fr,ln){return Lr=+Lr,Fr=Fr>>>0,ln||Rr(this,Lr,Fr,4,4294967295,0),this[Fr+3]=Lr>>>24,this[Fr+2]=Lr>>>16,this[Fr+1]=Lr>>>8,this[Fr]=Lr&255,Fr+4},ar.prototype.writeUint32BE=ar.prototype.writeUInt32BE=function(Lr,Fr,ln){return Lr=+Lr,Fr=Fr>>>0,ln||Rr(this,Lr,Fr,4,4294967295,0),this[Fr]=Lr>>>24,this[Fr+1]=Lr>>>16,this[Fr+2]=Lr>>>8,this[Fr+3]=Lr&255,Fr+4};function Br(Xr,Lr,Fr,ln,mn){Yr(Lr,ln,mn,Xr,Fr,7);let _n=Number(Lr&BigInt(4294967295));Xr[Fr++]=_n,_n=_n>>8,Xr[Fr++]=_n,_n=_n>>8,Xr[Fr++]=_n,_n=_n>>8,Xr[Fr++]=_n;let An=Number(Lr>>BigInt(32)&BigInt(4294967295));return Xr[Fr++]=An,An=An>>8,Xr[Fr++]=An,An=An>>8,Xr[Fr++]=An,An=An>>8,Xr[Fr++]=An,Fr}function Jr(Xr,Lr,Fr,ln,mn){Yr(Lr,ln,mn,Xr,Fr,7);let _n=Number(Lr&BigInt(4294967295));Xr[Fr+7]=_n,_n=_n>>8,Xr[Fr+6]=_n,_n=_n>>8,Xr[Fr+5]=_n,_n=_n>>8,Xr[Fr+4]=_n;let An=Number(Lr>>BigInt(32)&BigInt(4294967295));return Xr[Fr+3]=An,An=An>>8,Xr[Fr+2]=An,An=An>>8,Xr[Fr+1]=An,An=An>>8,Xr[Fr]=An,Fr+8}ar.prototype.writeBigUInt64LE=xn(function(Lr,Fr=0){return Br(this,Lr,Fr,BigInt(0),BigInt("0xffffffffffffffff"))}),ar.prototype.writeBigUInt64BE=xn(function(Lr,Fr=0){return Jr(this,Lr,Fr,BigInt(0),BigInt("0xffffffffffffffff"))}),ar.prototype.writeIntLE=function(Lr,Fr,ln,mn){if(Lr=+Lr,Fr=Fr>>>0,!mn){const Xs=Math.pow(2,8*ln-1);Rr(this,Lr,Fr,ln,Xs-1,-Xs)}let _n=0,An=1,Gn=0;for(this[Fr]=Lr&255;++_n<ln&&(An*=256);)Lr<0&&Gn===0&&this[Fr+_n-1]!==0&&(Gn=1),this[Fr+_n]=(Lr/An>>0)-Gn&255;return Fr+ln},ar.prototype.writeIntBE=function(Lr,Fr,ln,mn){if(Lr=+Lr,Fr=Fr>>>0,!mn){const Xs=Math.pow(2,8*ln-1);Rr(this,Lr,Fr,ln,Xs-1,-Xs)}let _n=ln-1,An=1,Gn=0;for(this[Fr+_n]=Lr&255;--_n>=0&&(An*=256);)Lr<0&&Gn===0&&this[Fr+_n+1]!==0&&(Gn=1),this[Fr+_n]=(Lr/An>>0)-Gn&255;return Fr+ln},ar.prototype.writeInt8=function(Lr,Fr,ln){return Lr=+Lr,Fr=Fr>>>0,ln||Rr(this,Lr,Fr,1,127,-128),Lr<0&&(Lr=255+Lr+1),this[Fr]=Lr&255,Fr+1},ar.prototype.writeInt16LE=function(Lr,Fr,ln){return Lr=+Lr,Fr=Fr>>>0,ln||Rr(this,Lr,Fr,2,32767,-32768),this[Fr]=Lr&255,this[Fr+1]=Lr>>>8,Fr+2},ar.prototype.writeInt16BE=function(Lr,Fr,ln){return Lr=+Lr,Fr=Fr>>>0,ln||Rr(this,Lr,Fr,2,32767,-32768),this[Fr]=Lr>>>8,this[Fr+1]=Lr&255,Fr+2},ar.prototype.writeInt32LE=function(Lr,Fr,ln){return Lr=+Lr,Fr=Fr>>>0,ln||Rr(this,Lr,Fr,4,2147483647,-2147483648),this[Fr]=Lr&255,this[Fr+1]=Lr>>>8,this[Fr+2]=Lr>>>16,this[Fr+3]=Lr>>>24,Fr+4},ar.prototype.writeInt32BE=function(Lr,Fr,ln){return Lr=+Lr,Fr=Fr>>>0,ln||Rr(this,Lr,Fr,4,2147483647,-2147483648),Lr<0&&(Lr=4294967295+Lr+1),this[Fr]=Lr>>>24,this[Fr+1]=Lr>>>16,this[Fr+2]=Lr>>>8,this[Fr+3]=Lr&255,Fr+4},ar.prototype.writeBigInt64LE=xn(function(Lr,Fr=0){return Br(this,Lr,Fr,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),ar.prototype.writeBigInt64BE=xn(function(Lr,Fr=0){return Jr(this,Lr,Fr,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Wr(Xr,Lr,Fr,ln,mn,_n){if(Fr+ln>Xr.length)throw new RangeError("Index out of range");if(Fr<0)throw new RangeError("Index out of range")}function qr(Xr,Lr,Fr,ln,mn){return Lr=+Lr,Fr=Fr>>>0,mn||Wr(Xr,Lr,Fr,4),rr.write(Xr,Lr,Fr,ln,23,4),Fr+4}ar.prototype.writeFloatLE=function(Lr,Fr,ln){return qr(this,Lr,Fr,!0,ln)},ar.prototype.writeFloatBE=function(Lr,Fr,ln){return qr(this,Lr,Fr,!1,ln)};function an(Xr,Lr,Fr,ln,mn){return Lr=+Lr,Fr=Fr>>>0,mn||Wr(Xr,Lr,Fr,8),rr.write(Xr,Lr,Fr,ln,52,8),Fr+8}ar.prototype.writeDoubleLE=function(Lr,Fr,ln){return an(this,Lr,Fr,!0,ln)},ar.prototype.writeDoubleBE=function(Lr,Fr,ln){return an(this,Lr,Fr,!1,ln)},ar.prototype.copy=function(Lr,Fr,ln,mn){if(!ar.isBuffer(Lr))throw new TypeError("argument should be a Buffer");if(ln||(ln=0),!mn&&mn!==0&&(mn=this.length),Fr>=Lr.length&&(Fr=Lr.length),Fr||(Fr=0),mn>0&&mn<ln&&(mn=ln),mn===ln||Lr.length===0||this.length===0)return 0;if(Fr<0)throw new RangeError("targetStart out of bounds");if(ln<0||ln>=this.length)throw new RangeError("Index out of range");if(mn<0)throw new RangeError("sourceEnd out of bounds");mn>this.length&&(mn=this.length),Lr.length-Fr<mn-ln&&(mn=Lr.length-Fr+ln);const _n=mn-ln;return this===Lr&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(Fr,ln,mn):Uint8Array.prototype.set.call(Lr,this.subarray(ln,mn),Fr),_n},ar.prototype.fill=function(Lr,Fr,ln,mn){if(typeof Lr=="string"){if(typeof Fr=="string"?(mn=Fr,Fr=0,ln=this.length):typeof ln=="string"&&(mn=ln,ln=this.length),mn!==void 0&&typeof mn!="string")throw new TypeError("encoding must be a string");if(typeof mn=="string"&&!ar.isEncoding(mn))throw new TypeError("Unknown encoding: "+mn);if(Lr.length===1){const An=Lr.charCodeAt(0);(mn==="utf8"&&An<128||mn==="latin1")&&(Lr=An)}}else typeof Lr=="number"?Lr=Lr&255:typeof Lr=="boolean"&&(Lr=Number(Lr));if(Fr<0||this.length<Fr||this.length<ln)throw new RangeError("Out of range index");if(ln<=Fr)return this;Fr=Fr>>>0,ln=ln===void 0?this.length:ln>>>0,Lr||(Lr=0);let _n;if(typeof Lr=="number")for(_n=Fr;_n<ln;++_n)this[_n]=Lr;else{const An=ar.isBuffer(Lr)?Lr:ar.from(Lr,mn),Gn=An.length;if(Gn===0)throw new TypeError('The value "'+Lr+'" is invalid for argument "value"');for(_n=0;_n<ln-Fr;++_n)this[_n+Fr]=An[_n%Gn]}return this};const tn={};function cn(Xr,Lr,Fr){tn[Xr]=class extends Fr{constructor(){super(),Object.defineProperty(this,"message",{value:Lr.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${Xr}]`,this.stack,delete this.name}get code(){return Xr}set code(mn){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:mn,writable:!0})}toString(){return`${this.name} [${Xr}]: ${this.message}`}}}cn("ERR_BUFFER_OUT_OF_BOUNDS",function(Xr){return Xr?`${Xr} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),cn("ERR_INVALID_ARG_TYPE",function(Xr,Lr){return`The "${Xr}" argument must be of type number. Received type ${typeof Lr}`},TypeError),cn("ERR_OUT_OF_RANGE",function(Xr,Lr,Fr){let ln=`The value of "${Xr}" is out of range.`,mn=Fr;return Number.isInteger(Fr)&&Math.abs(Fr)>2**32?mn=dn(String(Fr)):typeof Fr=="bigint"&&(mn=String(Fr),(Fr>BigInt(2)**BigInt(32)||Fr<-(BigInt(2)**BigInt(32)))&&(mn=dn(mn)),mn+="n"),ln+=` It must be ${Lr}. Received ${mn}`,ln},RangeError);function dn(Xr){let Lr="",Fr=Xr.length;const ln=Xr[0]==="-"?1:0;for(;Fr>=ln+4;Fr-=3)Lr=`_${Xr.slice(Fr-3,Fr)}${Lr}`;return`${Xr.slice(0,Fr)}${Lr}`}function Zr(Xr,Lr,Fr){Qr(Lr,"offset"),(Xr[Lr]===void 0||Xr[Lr+Fr]===void 0)&&un(Lr,Xr.length-(Fr+1))}function Yr(Xr,Lr,Fr,ln,mn,_n){if(Xr>Fr||Xr<Lr){const An=typeof Lr=="bigint"?"n":"";let Gn;throw Lr===0||Lr===BigInt(0)?Gn=`>= 0${An} and < 2${An} ** ${(_n+1)*8}${An}`:Gn=`>= -(2${An} ** ${(_n+1)*8-1}${An}) and < 2 ** ${(_n+1)*8-1}${An}`,new tn.ERR_OUT_OF_RANGE("value",Gn,Xr)}Zr(ln,mn,_n)}function Qr(Xr,Lr){if(typeof Xr!="number")throw new tn.ERR_INVALID_ARG_TYPE(Lr,"number",Xr)}function un(Xr,Lr,Fr){throw Math.floor(Xr)!==Xr?(Qr(Xr,Fr),new tn.ERR_OUT_OF_RANGE("offset","an integer",Xr)):Lr<0?new tn.ERR_BUFFER_OUT_OF_BOUNDS:new tn.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${Lr}`,Xr)}const gn=/[^+/0-9A-Za-z-_]/g;function Rn(Xr){if(Xr=Xr.split("=")[0],Xr=Xr.trim().replace(gn,""),Xr.length<2)return"";for(;Xr.length%4!==0;)Xr=Xr+"=";return Xr}function Pn(Xr,Lr){Lr=Lr||1/0;let Fr;const ln=Xr.length;let mn=null;const _n=[];for(let An=0;An<ln;++An){if(Fr=Xr.charCodeAt(An),Fr>55295&&Fr<57344){if(!mn){if(Fr>56319){(Lr-=3)>-1&&_n.push(239,191,189);continue}else if(An+1===ln){(Lr-=3)>-1&&_n.push(239,191,189);continue}mn=Fr;continue}if(Fr<56320){(Lr-=3)>-1&&_n.push(239,191,189),mn=Fr;continue}Fr=(mn-55296<<10|Fr-56320)+65536}else mn&&(Lr-=3)>-1&&_n.push(239,191,189);if(mn=null,Fr<128){if((Lr-=1)<0)break;_n.push(Fr)}else if(Fr<2048){if((Lr-=2)<0)break;_n.push(Fr>>6|192,Fr&63|128)}else if(Fr<65536){if((Lr-=3)<0)break;_n.push(Fr>>12|224,Fr>>6&63|128,Fr&63|128)}else if(Fr<1114112){if((Lr-=4)<0)break;_n.push(Fr>>18|240,Fr>>12&63|128,Fr>>6&63|128,Fr&63|128)}else throw new Error("Invalid code point")}return _n}function Cn(Xr){const Lr=[];for(let Fr=0;Fr<Xr.length;++Fr)Lr.push(Xr.charCodeAt(Fr)&255);return Lr}function Sn(Xr,Lr){let Fr,ln,mn;const _n=[];for(let An=0;An<Xr.length&&!((Lr-=2)<0);++An)Fr=Xr.charCodeAt(An),ln=Fr>>8,mn=Fr%256,_n.push(mn),_n.push(ln);return _n}function zn(Xr){return er.toByteArray(Rn(Xr))}function Zn(Xr,Lr,Fr,ln){let mn;for(mn=0;mn<ln&&!(mn+Fr>=Lr.length||mn>=Xr.length);++mn)Lr[mn+Fr]=Xr[mn];return mn}function Kn(Xr,Lr){return Xr instanceof Lr||Xr!=null&&Xr.constructor!=null&&Xr.constructor.name!=null&&Xr.constructor.name===Lr.name}function eo(Xr){return Xr!==Xr}const vn=function(){const Xr="0123456789abcdef",Lr=new Array(256);for(let Fr=0;Fr<16;++Fr){const ln=Fr*16;for(let mn=0;mn<16;++mn)Lr[ln+mn]=Xr[Fr]+Xr[mn]}return Lr}();function xn(Xr){return typeof BigInt>"u"?Dn:Xr}function Dn(){throw new Error("BigInt not supported")}})(buffer$1);var browser$4={exports:{}},process$5=browser$4.exports={},cachedSetTimeout,cachedClearTimeout;function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?cachedSetTimeout=setTimeout:cachedSetTimeout=defaultSetTimout}catch{cachedSetTimeout=defaultSetTimout}try{typeof clearTimeout=="function"?cachedClearTimeout=clearTimeout:cachedClearTimeout=defaultClearTimeout}catch{cachedClearTimeout=defaultClearTimeout}})();function runTimeout(tr){if(cachedSetTimeout===setTimeout)return setTimeout(tr,0);if((cachedSetTimeout===defaultSetTimout||!cachedSetTimeout)&&setTimeout)return cachedSetTimeout=setTimeout,setTimeout(tr,0);try{return cachedSetTimeout(tr,0)}catch{try{return cachedSetTimeout.call(null,tr,0)}catch{return cachedSetTimeout.call(this,tr,0)}}}function runClearTimeout(tr){if(cachedClearTimeout===clearTimeout)return clearTimeout(tr);if((cachedClearTimeout===defaultClearTimeout||!cachedClearTimeout)&&clearTimeout)return cachedClearTimeout=clearTimeout,clearTimeout(tr);try{return cachedClearTimeout(tr)}catch{try{return cachedClearTimeout.call(null,tr)}catch{return cachedClearTimeout.call(this,tr)}}}var queue=[],draining=!1,currentQueue,queueIndex=-1;function cleanUpNextTick(){!draining||!currentQueue||(draining=!1,currentQueue.length?queue=currentQueue.concat(queue):queueIndex=-1,queue.length&&drainQueue())}function drainQueue(){if(!draining){var tr=runTimeout(cleanUpNextTick);draining=!0;for(var er=queue.length;er;){for(currentQueue=queue,queue=[];++queueIndex<er;)currentQueue&&currentQueue[queueIndex].run();queueIndex=-1,er=queue.length}currentQueue=null,draining=!1,runClearTimeout(tr)}}process$5.nextTick=function(tr){var er=new Array(arguments.length-1);if(arguments.length>1)for(var rr=1;rr<arguments.length;rr++)er[rr-1]=arguments[rr];queue.push(new Item(tr,er)),queue.length===1&&!draining&&runTimeout(drainQueue)};function Item(tr,er){this.fun=tr,this.array=er}Item.prototype.run=function(){this.fun.apply(null,this.array)};process$5.title="browser";process$5.browser=!0;process$5.env={};process$5.argv=[];process$5.version="";process$5.versions={};function noop$7(){}process$5.on=noop$7;process$5.addListener=noop$7;process$5.once=noop$7;process$5.off=noop$7;process$5.removeListener=noop$7;process$5.removeAllListeners=noop$7;process$5.emit=noop$7;process$5.prependListener=noop$7;process$5.prependOnceListener=noop$7;process$5.listeners=function(tr){return[]};process$5.binding=function(tr){throw new Error("process.binding is not supported")};process$5.cwd=function(){return"/"};process$5.chdir=function(tr){throw new Error("process.chdir is not supported")};process$5.umask=function(){return 0};var browserExports$2=browser$4.exports;const process$6=getDefaultExportFromCjs(browserExports$2);window.Buffer=buffer$1.Buffer;window.process=process$6;var jsxRuntime={exports:{}},reactJsxRuntime_production_min={},react={exports:{}},react_production_min={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l$3=Symbol.for("react.element"),n$4=Symbol.for("react.portal"),p$4=Symbol.for("react.fragment"),q$4=Symbol.for("react.strict_mode"),r$7=Symbol.for("react.profiler"),t$8=Symbol.for("react.provider"),u$2=Symbol.for("react.context"),v$3=Symbol.for("react.forward_ref"),w$2=Symbol.for("react.suspense"),x$3=Symbol.for("react.memo"),y$2=Symbol.for("react.lazy"),z$4=Symbol.iterator;function A$3(tr){return tr===null||typeof tr!="object"?null:(tr=z$4&&tr[z$4]||tr["@@iterator"],typeof tr=="function"?tr:null)}var B$3={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C$3=Object.assign,D$4={};function E$3(tr,er,rr){this.props=tr,this.context=er,this.refs=D$4,this.updater=rr||B$3}E$3.prototype.isReactComponent={};E$3.prototype.setState=function(tr,er){if(typeof tr!="object"&&typeof tr!="function"&&tr!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,tr,er,"setState")};E$3.prototype.forceUpdate=function(tr){this.updater.enqueueForceUpdate(this,tr,"forceUpdate")};function F$3(){}F$3.prototype=E$3.prototype;function G$3(tr,er,rr){this.props=tr,this.context=er,this.refs=D$4,this.updater=rr||B$3}var H$2=G$3.prototype=new F$3;H$2.constructor=G$3;C$3(H$2,E$3.prototype);H$2.isPureReactComponent=!0;var I$2=Array.isArray,J$1=Object.prototype.hasOwnProperty,K$6={current:null},L$3={key:!0,ref:!0,__self:!0,__source:!0};function M$3(tr,er,rr){var nr,ir={},sr=null,or=null;if(er!=null)for(nr in er.ref!==void 0&&(or=er.ref),er.key!==void 0&&(sr=""+er.key),er)J$1.call(er,nr)&&!L$3.hasOwnProperty(nr)&&(ir[nr]=er[nr]);var ar=arguments.length-2;if(ar===1)ir.children=rr;else if(1<ar){for(var cr=Array(ar),lr=0;lr<ar;lr++)cr[lr]=arguments[lr+2];ir.children=cr}if(tr&&tr.defaultProps)for(nr in ar=tr.defaultProps,ar)ir[nr]===void 0&&(ir[nr]=ar[nr]);return{$$typeof:l$3,type:tr,key:sr,ref:or,props:ir,_owner:K$6.current}}function N$4(tr,er){return{$$typeof:l$3,type:tr.type,key:er,ref:tr.ref,props:tr.props,_owner:tr._owner}}function O$3(tr){return typeof tr=="object"&&tr!==null&&tr.$$typeof===l$3}function escape$1(tr){var er={"=":"=0",":":"=2"};return"$"+tr.replace(/[=:]/g,function(rr){return er[rr]})}var P$3=/\/+/g;function Q$2(tr,er){return typeof tr=="object"&&tr!==null&&tr.key!=null?escape$1(""+tr.key):er.toString(36)}function R$2(tr,er,rr,nr,ir){var sr=typeof tr;(sr==="undefined"||sr==="boolean")&&(tr=null);var or=!1;if(tr===null)or=!0;else switch(sr){case"string":case"number":or=!0;break;case"object":switch(tr.$$typeof){case l$3:case n$4:or=!0}}if(or)return or=tr,ir=ir(or),tr=nr===""?"."+Q$2(or,0):nr,I$2(ir)?(rr="",tr!=null&&(rr=tr.replace(P$3,"$&/")+"/"),R$2(ir,er,rr,"",function(lr){return lr})):ir!=null&&(O$3(ir)&&(ir=N$4(ir,rr+(!ir.key||or&&or.key===ir.key?"":(""+ir.key).replace(P$3,"$&/")+"/")+tr)),er.push(ir)),1;if(or=0,nr=nr===""?".":nr+":",I$2(tr))for(var ar=0;ar<tr.length;ar++){sr=tr[ar];var cr=nr+Q$2(sr,ar);or+=R$2(sr,er,rr,cr,ir)}else if(cr=A$3(tr),typeof cr=="function")for(tr=cr.call(tr),ar=0;!(sr=tr.next()).done;)sr=sr.value,cr=nr+Q$2(sr,ar++),or+=R$2(sr,er,rr,cr,ir);else if(sr==="object")throw er=String(tr),Error("Objects are not valid as a React child (found: "+(er==="[object Object]"?"object with keys {"+Object.keys(tr).join(", ")+"}":er)+"). If you meant to render a collection of children, use an array instead.");return or}function S$3(tr,er,rr){if(tr==null)return tr;var nr=[],ir=0;return R$2(tr,nr,"","",function(sr){return er.call(rr,sr,ir++)}),nr}function T$4(tr){if(tr._status===-1){var er=tr._result;er=er(),er.then(function(rr){(tr._status===0||tr._status===-1)&&(tr._status=1,tr._result=rr)},function(rr){(tr._status===0||tr._status===-1)&&(tr._status=2,tr._result=rr)}),tr._status===-1&&(tr._status=0,tr._result=er)}if(tr._status===1)return tr._result.default;throw tr._result}var U$2={current:null},V$3={transition:null},W$8={ReactCurrentDispatcher:U$2,ReactCurrentBatchConfig:V$3,ReactCurrentOwner:K$6};function X$2(){throw Error("act(...) is not supported in production builds of React.")}react_production_min.Children={map:S$3,forEach:function(tr,er,rr){S$3(tr,function(){er.apply(this,arguments)},rr)},count:function(tr){var er=0;return S$3(tr,function(){er++}),er},toArray:function(tr){return S$3(tr,function(er){return er})||[]},only:function(tr){if(!O$3(tr))throw Error("React.Children.only expected to receive a single React element child.");return tr}};react_production_min.Component=E$3;react_production_min.Fragment=p$4;react_production_min.Profiler=r$7;react_production_min.PureComponent=G$3;react_production_min.StrictMode=q$4;react_production_min.Suspense=w$2;react_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=W$8;react_production_min.act=X$2;react_production_min.cloneElement=function(tr,er,rr){if(tr==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+tr+".");var nr=C$3({},tr.props),ir=tr.key,sr=tr.ref,or=tr._owner;if(er!=null){if(er.ref!==void 0&&(sr=er.ref,or=K$6.current),er.key!==void 0&&(ir=""+er.key),tr.type&&tr.type.defaultProps)var ar=tr.type.defaultProps;for(cr in er)J$1.call(er,cr)&&!L$3.hasOwnProperty(cr)&&(nr[cr]=er[cr]===void 0&&ar!==void 0?ar[cr]:er[cr])}var cr=arguments.length-2;if(cr===1)nr.children=rr;else if(1<cr){ar=Array(cr);for(var lr=0;lr<cr;lr++)ar[lr]=arguments[lr+2];nr.children=ar}return{$$typeof:l$3,type:tr.type,key:ir,ref:sr,props:nr,_owner:or}};react_production_min.createContext=function(tr){return tr={$$typeof:u$2,_currentValue:tr,_currentValue2:tr,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},tr.Provider={$$typeof:t$8,_context:tr},tr.Consumer=tr};react_production_min.createElement=M$3;react_production_min.createFactory=function(tr){var er=M$3.bind(null,tr);return er.type=tr,er};react_production_min.createRef=function(){return{current:null}};react_production_min.forwardRef=function(tr){return{$$typeof:v$3,render:tr}};react_production_min.isValidElement=O$3;react_production_min.lazy=function(tr){return{$$typeof:y$2,_payload:{_status:-1,_result:tr},_init:T$4}};react_production_min.memo=function(tr,er){return{$$typeof:x$3,type:tr,compare:er===void 0?null:er}};react_production_min.startTransition=function(tr){var er=V$3.transition;V$3.transition={};try{tr()}finally{V$3.transition=er}};react_production_min.unstable_act=X$2;react_production_min.useCallback=function(tr,er){return U$2.current.useCallback(tr,er)};react_production_min.useContext=function(tr){return U$2.current.useContext(tr)};react_production_min.useDebugValue=function(){};react_production_min.useDeferredValue=function(tr){return U$2.current.useDeferredValue(tr)};react_production_min.useEffect=function(tr,er){return U$2.current.useEffect(tr,er)};react_production_min.useId=function(){return U$2.current.useId()};react_production_min.useImperativeHandle=function(tr,er,rr){return U$2.current.useImperativeHandle(tr,er,rr)};react_production_min.useInsertionEffect=function(tr,er){return U$2.current.useInsertionEffect(tr,er)};react_production_min.useLayoutEffect=function(tr,er){return U$2.current.useLayoutEffect(tr,er)};react_production_min.useMemo=function(tr,er){return U$2.current.useMemo(tr,er)};react_production_min.useReducer=function(tr,er,rr){return U$2.current.useReducer(tr,er,rr)};react_production_min.useRef=function(tr){return U$2.current.useRef(tr)};react_production_min.useState=function(tr){return U$2.current.useState(tr)};react_production_min.useSyncExternalStore=function(tr,er,rr){return U$2.current.useSyncExternalStore(tr,er,rr)};react_production_min.useTransition=function(){return U$2.current.useTransition()};react_production_min.version="18.3.1";react.exports=react_production_min;var reactExports=react.exports;/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f$4=reactExports,k$2=Symbol.for("react.element"),l$2=Symbol.for("react.fragment"),m$3=Object.prototype.hasOwnProperty,n$3=f$4.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p$3={key:!0,ref:!0,__self:!0,__source:!0};function q$3(tr,er,rr){var nr,ir={},sr=null,or=null;rr!==void 0&&(sr=""+rr),er.key!==void 0&&(sr=""+er.key),er.ref!==void 0&&(or=er.ref);for(nr in er)m$3.call(er,nr)&&!p$3.hasOwnProperty(nr)&&(ir[nr]=er[nr]);if(tr&&tr.defaultProps)for(nr in er=tr.defaultProps,er)ir[nr]===void 0&&(ir[nr]=er[nr]);return{$$typeof:k$2,type:tr,key:sr,ref:or,props:ir,_owner:n$3.current}}reactJsxRuntime_production_min.Fragment=l$2;reactJsxRuntime_production_min.jsx=q$3;reactJsxRuntime_production_min.jsxs=q$3;jsxRuntime.exports=reactJsxRuntime_production_min;var jsxRuntimeExports=jsxRuntime.exports,client={},reactDom={exports:{}},reactDom_production_min={},scheduler={exports:{}},scheduler_production_min={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(tr){function er($r,Er){var vr=$r.length;$r.push(Er);e:for(;0<vr;){var Ir=vr-1>>>1,Rr=$r[Ir];if(0<ir(Rr,Er))$r[Ir]=Er,$r[vr]=Rr,vr=Ir;else break e}}function rr($r){return $r.length===0?null:$r[0]}function nr($r){if($r.length===0)return null;var Er=$r[0],vr=$r.pop();if(vr!==Er){$r[0]=vr;e:for(var Ir=0,Rr=$r.length,Br=Rr>>>1;Ir<Br;){var Jr=2*(Ir+1)-1,Wr=$r[Jr],qr=Jr+1,an=$r[qr];if(0>ir(Wr,vr))qr<Rr&&0>ir(an,Wr)?($r[Ir]=an,$r[qr]=vr,Ir=qr):($r[Ir]=Wr,$r[Jr]=vr,Ir=Jr);else if(qr<Rr&&0>ir(an,vr))$r[Ir]=an,$r[qr]=vr,Ir=qr;else break e}}return Er}function ir($r,Er){var vr=$r.sortIndex-Er.sortIndex;return vr!==0?vr:$r.id-Er.id}if(typeof performance=="object"&&typeof performance.now=="function"){var sr=performance;tr.unstable_now=function(){return sr.now()}}else{var or=Date,ar=or.now();tr.unstable_now=function(){return or.now()-ar}}var cr=[],lr=[],ur=1,dr=null,yr=3,mr=!1,wr=!1,xr=!1,Or=typeof setTimeout=="function"?setTimeout:null,Tr=typeof clearTimeout=="function"?clearTimeout:null,Ar=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function Nr($r){for(var Er=rr(lr);Er!==null;){if(Er.callback===null)nr(lr);else if(Er.startTime<=$r)nr(lr),Er.sortIndex=Er.expirationTime,er(cr,Er);else break;Er=rr(lr)}}function Ur($r){if(xr=!1,Nr($r),!wr)if(rr(cr)!==null)wr=!0,br(Dr);else{var Er=rr(lr);Er!==null&&_r(Ur,Er.startTime-$r)}}function Dr($r,Er){wr=!1,xr&&(xr=!1,Tr(Cr),Cr=-1),mr=!0;var vr=yr;try{for(Nr(Er),dr=rr(cr);dr!==null&&(!(dr.expirationTime>Er)||$r&&!Sr());){var Ir=dr.callback;if(typeof Ir=="function"){dr.callback=null,yr=dr.priorityLevel;var Rr=Ir(dr.expirationTime<=Er);Er=tr.unstable_now(),typeof Rr=="function"?dr.callback=Rr:dr===rr(cr)&&nr(cr),Nr(Er)}else nr(cr);dr=rr(cr)}if(dr!==null)var Br=!0;else{var Jr=rr(lr);Jr!==null&&_r(Ur,Jr.startTime-Er),Br=!1}return Br}finally{dr=null,yr=vr,mr=!1}}var Hr=!1,zr=null,Cr=-1,Mr=5,Pr=-1;function Sr(){return!(tr.unstable_now()-Pr<Mr)}function pr(){if(zr!==null){var $r=tr.unstable_now();Pr=$r;var Er=!0;try{Er=zr(!0,$r)}finally{Er?gr():(Hr=!1,zr=null)}}else Hr=!1}var gr;if(typeof Ar=="function")gr=function(){Ar(pr)};else if(typeof MessageChannel<"u"){var fr=new MessageChannel,hr=fr.port2;fr.port1.onmessage=pr,gr=function(){hr.postMessage(null)}}else gr=function(){Or(pr,0)};function br($r){zr=$r,Hr||(Hr=!0,gr())}function _r($r,Er){Cr=Or(function(){$r(tr.unstable_now())},Er)}tr.unstable_IdlePriority=5,tr.unstable_ImmediatePriority=1,tr.unstable_LowPriority=4,tr.unstable_NormalPriority=3,tr.unstable_Profiling=null,tr.unstable_UserBlockingPriority=2,tr.unstable_cancelCallback=function($r){$r.callback=null},tr.unstable_continueExecution=function(){wr||mr||(wr=!0,br(Dr))},tr.unstable_forceFrameRate=function($r){0>$r||125<$r?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Mr=0<$r?Math.floor(1e3/$r):5},tr.unstable_getCurrentPriorityLevel=function(){return yr},tr.unstable_getFirstCallbackNode=function(){return rr(cr)},tr.unstable_next=function($r){switch(yr){case 1:case 2:case 3:var Er=3;break;default:Er=yr}var vr=yr;yr=Er;try{return $r()}finally{yr=vr}},tr.unstable_pauseExecution=function(){},tr.unstable_requestPaint=function(){},tr.unstable_runWithPriority=function($r,Er){switch($r){case 1:case 2:case 3:case 4:case 5:break;default:$r=3}var vr=yr;yr=$r;try{return Er()}finally{yr=vr}},tr.unstable_scheduleCallback=function($r,Er,vr){var Ir=tr.unstable_now();switch(typeof vr=="object"&&vr!==null?(vr=vr.delay,vr=typeof vr=="number"&&0<vr?Ir+vr:Ir):vr=Ir,$r){case 1:var Rr=-1;break;case 2:Rr=250;break;case 5:Rr=1073741823;break;case 4:Rr=1e4;break;default:Rr=5e3}return Rr=vr+Rr,$r={id:ur++,callback:Er,priorityLevel:$r,startTime:vr,expirationTime:Rr,sortIndex:-1},vr>Ir?($r.sortIndex=vr,er(lr,$r),rr(cr)===null&&$r===rr(lr)&&(xr?(Tr(Cr),Cr=-1):xr=!0,_r(Ur,vr-Ir))):($r.sortIndex=Rr,er(cr,$r),wr||mr||(wr=!0,br(Dr))),$r},tr.unstable_shouldYield=Sr,tr.unstable_wrapCallback=function($r){var Er=yr;return function(){var vr=yr;yr=Er;try{return $r.apply(this,arguments)}finally{yr=vr}}}})(scheduler_production_min);scheduler.exports=scheduler_production_min;var schedulerExports=scheduler.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aa=reactExports,ca=schedulerExports;function p$2(tr){for(var er="https://reactjs.org/docs/error-decoder.html?invariant="+tr,rr=1;rr<arguments.length;rr++)er+="&args[]="+encodeURIComponent(arguments[rr]);return"Minified React error #"+tr+"; visit "+er+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var da=new Set,ea={};function fa(tr,er){ha(tr,er),ha(tr+"Capture",er)}function ha(tr,er){for(ea[tr]=er,tr=0;tr<er.length;tr++)da.add(er[tr])}var ia=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ja=Object.prototype.hasOwnProperty,ka=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,la={},ma={};function oa(tr){return ja.call(ma,tr)?!0:ja.call(la,tr)?!1:ka.test(tr)?ma[tr]=!0:(la[tr]=!0,!1)}function pa(tr,er,rr,nr){if(rr!==null&&rr.type===0)return!1;switch(typeof er){case"function":case"symbol":return!0;case"boolean":return nr?!1:rr!==null?!rr.acceptsBooleans:(tr=tr.toLowerCase().slice(0,5),tr!=="data-"&&tr!=="aria-");default:return!1}}function qa(tr,er,rr,nr){if(er===null||typeof er>"u"||pa(tr,er,rr,nr))return!0;if(nr)return!1;if(rr!==null)switch(rr.type){case 3:return!er;case 4:return er===!1;case 5:return isNaN(er);case 6:return isNaN(er)||1>er}return!1}function v$2(tr,er,rr,nr,ir,sr,or){this.acceptsBooleans=er===2||er===3||er===4,this.attributeName=nr,this.attributeNamespace=ir,this.mustUseProperty=rr,this.propertyName=tr,this.type=er,this.sanitizeURL=sr,this.removeEmptyString=or}var z$3={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(tr){z$3[tr]=new v$2(tr,0,!1,tr,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(tr){var er=tr[0];z$3[er]=new v$2(er,1,!1,tr[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(tr){z$3[tr]=new v$2(tr,2,!1,tr.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(tr){z$3[tr]=new v$2(tr,2,!1,tr,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(tr){z$3[tr]=new v$2(tr,3,!1,tr.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(tr){z$3[tr]=new v$2(tr,3,!0,tr,null,!1,!1)});["capture","download"].forEach(function(tr){z$3[tr]=new v$2(tr,4,!1,tr,null,!1,!1)});["cols","rows","size","span"].forEach(function(tr){z$3[tr]=new v$2(tr,6,!1,tr,null,!1,!1)});["rowSpan","start"].forEach(function(tr){z$3[tr]=new v$2(tr,5,!1,tr.toLowerCase(),null,!1,!1)});var ra=/[\-:]([a-z])/g;function sa(tr){return tr[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(tr){var er=tr.replace(ra,sa);z$3[er]=new v$2(er,1,!1,tr,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(tr){var er=tr.replace(ra,sa);z$3[er]=new v$2(er,1,!1,tr,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(tr){var er=tr.replace(ra,sa);z$3[er]=new v$2(er,1,!1,tr,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(tr){z$3[tr]=new v$2(tr,1,!1,tr.toLowerCase(),null,!1,!1)});z$3.xlinkHref=new v$2("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(tr){z$3[tr]=new v$2(tr,1,!1,tr.toLowerCase(),null,!0,!0)});function ta(tr,er,rr,nr){var ir=z$3.hasOwnProperty(er)?z$3[er]:null;(ir!==null?ir.type!==0:nr||!(2<er.length)||er[0]!=="o"&&er[0]!=="O"||er[1]!=="n"&&er[1]!=="N")&&(qa(er,rr,ir,nr)&&(rr=null),nr||ir===null?oa(er)&&(rr===null?tr.removeAttribute(er):tr.setAttribute(er,""+rr)):ir.mustUseProperty?tr[ir.propertyName]=rr===null?ir.type===3?!1:"":rr:(er=ir.attributeName,nr=ir.attributeNamespace,rr===null?tr.removeAttribute(er):(ir=ir.type,rr=ir===3||ir===4&&rr===!0?"":""+rr,nr?tr.setAttributeNS(nr,er,rr):tr.setAttribute(er,rr))))}var ua=aa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,va=Symbol.for("react.element"),wa=Symbol.for("react.portal"),ya=Symbol.for("react.fragment"),za=Symbol.for("react.strict_mode"),Aa=Symbol.for("react.profiler"),Ba=Symbol.for("react.provider"),Ca=Symbol.for("react.context"),Da=Symbol.for("react.forward_ref"),Ea=Symbol.for("react.suspense"),Fa=Symbol.for("react.suspense_list"),Ga=Symbol.for("react.memo"),Ha=Symbol.for("react.lazy"),Ia=Symbol.for("react.offscreen"),Ja=Symbol.iterator;function Ka(tr){return tr===null||typeof tr!="object"?null:(tr=Ja&&tr[Ja]||tr["@@iterator"],typeof tr=="function"?tr:null)}var A$2=Object.assign,La;function Ma(tr){if(La===void 0)try{throw Error()}catch(rr){var er=rr.stack.trim().match(/\n( *(at )?)/);La=er&&er[1]||""}return`
`+La+tr}var Na=!1;function Oa(tr,er){if(!tr||Na)return"";Na=!0;var rr=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(er)if(er=function(){throw Error()},Object.defineProperty(er.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(er,[])}catch(lr){var nr=lr}Reflect.construct(tr,[],er)}else{try{er.call()}catch(lr){nr=lr}tr.call(er.prototype)}else{try{throw Error()}catch(lr){nr=lr}tr()}}catch(lr){if(lr&&nr&&typeof lr.stack=="string"){for(var ir=lr.stack.split(`
`),sr=nr.stack.split(`
`),or=ir.length-1,ar=sr.length-1;1<=or&&0<=ar&&ir[or]!==sr[ar];)ar--;for(;1<=or&&0<=ar;or--,ar--)if(ir[or]!==sr[ar]){if(or!==1||ar!==1)do if(or--,ar--,0>ar||ir[or]!==sr[ar]){var cr=`
`+ir[or].replace(" at new "," at ");return tr.displayName&&cr.includes("<anonymous>")&&(cr=cr.replace("<anonymous>",tr.displayName)),cr}while(1<=or&&0<=ar);break}}}finally{Na=!1,Error.prepareStackTrace=rr}return(tr=tr?tr.displayName||tr.name:"")?Ma(tr):""}function Pa(tr){switch(tr.tag){case 5:return Ma(tr.type);case 16:return Ma("Lazy");case 13:return Ma("Suspense");case 19:return Ma("SuspenseList");case 0:case 2:case 15:return tr=Oa(tr.type,!1),tr;case 11:return tr=Oa(tr.type.render,!1),tr;case 1:return tr=Oa(tr.type,!0),tr;default:return""}}function Qa(tr){if(tr==null)return null;if(typeof tr=="function")return tr.displayName||tr.name||null;if(typeof tr=="string")return tr;switch(tr){case ya:return"Fragment";case wa:return"Portal";case Aa:return"Profiler";case za:return"StrictMode";case Ea:return"Suspense";case Fa:return"SuspenseList"}if(typeof tr=="object")switch(tr.$$typeof){case Ca:return(tr.displayName||"Context")+".Consumer";case Ba:return(tr._context.displayName||"Context")+".Provider";case Da:var er=tr.render;return tr=tr.displayName,tr||(tr=er.displayName||er.name||"",tr=tr!==""?"ForwardRef("+tr+")":"ForwardRef"),tr;case Ga:return er=tr.displayName||null,er!==null?er:Qa(tr.type)||"Memo";case Ha:er=tr._payload,tr=tr._init;try{return Qa(tr(er))}catch{}}return null}function Ra(tr){var er=tr.type;switch(tr.tag){case 24:return"Cache";case 9:return(er.displayName||"Context")+".Consumer";case 10:return(er._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return tr=er.render,tr=tr.displayName||tr.name||"",er.displayName||(tr!==""?"ForwardRef("+tr+")":"ForwardRef");case 7:return"Fragment";case 5:return er;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Qa(er);case 8:return er===za?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof er=="function")return er.displayName||er.name||null;if(typeof er=="string")return er}return null}function Sa(tr){switch(typeof tr){case"boolean":case"number":case"string":case"undefined":return tr;case"object":return tr;default:return""}}function Ta(tr){var er=tr.type;return(tr=tr.nodeName)&&tr.toLowerCase()==="input"&&(er==="checkbox"||er==="radio")}function Ua(tr){var er=Ta(tr)?"checked":"value",rr=Object.getOwnPropertyDescriptor(tr.constructor.prototype,er),nr=""+tr[er];if(!tr.hasOwnProperty(er)&&typeof rr<"u"&&typeof rr.get=="function"&&typeof rr.set=="function"){var ir=rr.get,sr=rr.set;return Object.defineProperty(tr,er,{configurable:!0,get:function(){return ir.call(this)},set:function(or){nr=""+or,sr.call(this,or)}}),Object.defineProperty(tr,er,{enumerable:rr.enumerable}),{getValue:function(){return nr},setValue:function(or){nr=""+or},stopTracking:function(){tr._valueTracker=null,delete tr[er]}}}}function Va(tr){tr._valueTracker||(tr._valueTracker=Ua(tr))}function Wa(tr){if(!tr)return!1;var er=tr._valueTracker;if(!er)return!0;var rr=er.getValue(),nr="";return tr&&(nr=Ta(tr)?tr.checked?"true":"false":tr.value),tr=nr,tr!==rr?(er.setValue(tr),!0):!1}function Xa(tr){if(tr=tr||(typeof document<"u"?document:void 0),typeof tr>"u")return null;try{return tr.activeElement||tr.body}catch{return tr.body}}function Ya(tr,er){var rr=er.checked;return A$2({},er,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:rr??tr._wrapperState.initialChecked})}function Za(tr,er){var rr=er.defaultValue==null?"":er.defaultValue,nr=er.checked!=null?er.checked:er.defaultChecked;rr=Sa(er.value!=null?er.value:rr),tr._wrapperState={initialChecked:nr,initialValue:rr,controlled:er.type==="checkbox"||er.type==="radio"?er.checked!=null:er.value!=null}}function ab(tr,er){er=er.checked,er!=null&&ta(tr,"checked",er,!1)}function bb(tr,er){ab(tr,er);var rr=Sa(er.value),nr=er.type;if(rr!=null)nr==="number"?(rr===0&&tr.value===""||tr.value!=rr)&&(tr.value=""+rr):tr.value!==""+rr&&(tr.value=""+rr);else if(nr==="submit"||nr==="reset"){tr.removeAttribute("value");return}er.hasOwnProperty("value")?cb(tr,er.type,rr):er.hasOwnProperty("defaultValue")&&cb(tr,er.type,Sa(er.defaultValue)),er.checked==null&&er.defaultChecked!=null&&(tr.defaultChecked=!!er.defaultChecked)}function db(tr,er,rr){if(er.hasOwnProperty("value")||er.hasOwnProperty("defaultValue")){var nr=er.type;if(!(nr!=="submit"&&nr!=="reset"||er.value!==void 0&&er.value!==null))return;er=""+tr._wrapperState.initialValue,rr||er===tr.value||(tr.value=er),tr.defaultValue=er}rr=tr.name,rr!==""&&(tr.name=""),tr.defaultChecked=!!tr._wrapperState.initialChecked,rr!==""&&(tr.name=rr)}function cb(tr,er,rr){(er!=="number"||Xa(tr.ownerDocument)!==tr)&&(rr==null?tr.defaultValue=""+tr._wrapperState.initialValue:tr.defaultValue!==""+rr&&(tr.defaultValue=""+rr))}var eb=Array.isArray;function fb(tr,er,rr,nr){if(tr=tr.options,er){er={};for(var ir=0;ir<rr.length;ir++)er["$"+rr[ir]]=!0;for(rr=0;rr<tr.length;rr++)ir=er.hasOwnProperty("$"+tr[rr].value),tr[rr].selected!==ir&&(tr[rr].selected=ir),ir&&nr&&(tr[rr].defaultSelected=!0)}else{for(rr=""+Sa(rr),er=null,ir=0;ir<tr.length;ir++){if(tr[ir].value===rr){tr[ir].selected=!0,nr&&(tr[ir].defaultSelected=!0);return}er!==null||tr[ir].disabled||(er=tr[ir])}er!==null&&(er.selected=!0)}}function gb(tr,er){if(er.dangerouslySetInnerHTML!=null)throw Error(p$2(91));return A$2({},er,{value:void 0,defaultValue:void 0,children:""+tr._wrapperState.initialValue})}function hb(tr,er){var rr=er.value;if(rr==null){if(rr=er.children,er=er.defaultValue,rr!=null){if(er!=null)throw Error(p$2(92));if(eb(rr)){if(1<rr.length)throw Error(p$2(93));rr=rr[0]}er=rr}er==null&&(er=""),rr=er}tr._wrapperState={initialValue:Sa(rr)}}function ib(tr,er){var rr=Sa(er.value),nr=Sa(er.defaultValue);rr!=null&&(rr=""+rr,rr!==tr.value&&(tr.value=rr),er.defaultValue==null&&tr.defaultValue!==rr&&(tr.defaultValue=rr)),nr!=null&&(tr.defaultValue=""+nr)}function jb(tr){var er=tr.textContent;er===tr._wrapperState.initialValue&&er!==""&&er!==null&&(tr.value=er)}function kb(tr){switch(tr){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lb(tr,er){return tr==null||tr==="http://www.w3.org/1999/xhtml"?kb(er):tr==="http://www.w3.org/2000/svg"&&er==="foreignObject"?"http://www.w3.org/1999/xhtml":tr}var mb,nb=function(tr){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(er,rr,nr,ir){MSApp.execUnsafeLocalFunction(function(){return tr(er,rr,nr,ir)})}:tr}(function(tr,er){if(tr.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in tr)tr.innerHTML=er;else{for(mb=mb||document.createElement("div"),mb.innerHTML="<svg>"+er.valueOf().toString()+"</svg>",er=mb.firstChild;tr.firstChild;)tr.removeChild(tr.firstChild);for(;er.firstChild;)tr.appendChild(er.firstChild)}});function ob(tr,er){if(er){var rr=tr.firstChild;if(rr&&rr===tr.lastChild&&rr.nodeType===3){rr.nodeValue=er;return}}tr.textContent=er}var pb={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},qb=["Webkit","ms","Moz","O"];Object.keys(pb).forEach(function(tr){qb.forEach(function(er){er=er+tr.charAt(0).toUpperCase()+tr.substring(1),pb[er]=pb[tr]})});function rb(tr,er,rr){return er==null||typeof er=="boolean"||er===""?"":rr||typeof er!="number"||er===0||pb.hasOwnProperty(tr)&&pb[tr]?(""+er).trim():er+"px"}function sb(tr,er){tr=tr.style;for(var rr in er)if(er.hasOwnProperty(rr)){var nr=rr.indexOf("--")===0,ir=rb(rr,er[rr],nr);rr==="float"&&(rr="cssFloat"),nr?tr.setProperty(rr,ir):tr[rr]=ir}}var tb=A$2({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ub(tr,er){if(er){if(tb[tr]&&(er.children!=null||er.dangerouslySetInnerHTML!=null))throw Error(p$2(137,tr));if(er.dangerouslySetInnerHTML!=null){if(er.children!=null)throw Error(p$2(60));if(typeof er.dangerouslySetInnerHTML!="object"||!("__html"in er.dangerouslySetInnerHTML))throw Error(p$2(61))}if(er.style!=null&&typeof er.style!="object")throw Error(p$2(62))}}function vb(tr,er){if(tr.indexOf("-")===-1)return typeof er.is=="string";switch(tr){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wb=null;function xb(tr){return tr=tr.target||tr.srcElement||window,tr.correspondingUseElement&&(tr=tr.correspondingUseElement),tr.nodeType===3?tr.parentNode:tr}var yb=null,zb=null,Ab=null;function Bb(tr){if(tr=Cb(tr)){if(typeof yb!="function")throw Error(p$2(280));var er=tr.stateNode;er&&(er=Db(er),yb(tr.stateNode,tr.type,er))}}function Eb(tr){zb?Ab?Ab.push(tr):Ab=[tr]:zb=tr}function Fb(){if(zb){var tr=zb,er=Ab;if(Ab=zb=null,Bb(tr),er)for(tr=0;tr<er.length;tr++)Bb(er[tr])}}function Gb(tr,er){return tr(er)}function Hb(){}var Ib=!1;function Jb(tr,er,rr){if(Ib)return tr(er,rr);Ib=!0;try{return Gb(tr,er,rr)}finally{Ib=!1,(zb!==null||Ab!==null)&&(Hb(),Fb())}}function Kb(tr,er){var rr=tr.stateNode;if(rr===null)return null;var nr=Db(rr);if(nr===null)return null;rr=nr[er];e:switch(er){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(nr=!nr.disabled)||(tr=tr.type,nr=!(tr==="button"||tr==="input"||tr==="select"||tr==="textarea")),tr=!nr;break e;default:tr=!1}if(tr)return null;if(rr&&typeof rr!="function")throw Error(p$2(231,er,typeof rr));return rr}var Lb=!1;if(ia)try{var Mb={};Object.defineProperty(Mb,"passive",{get:function(){Lb=!0}}),window.addEventListener("test",Mb,Mb),window.removeEventListener("test",Mb,Mb)}catch{Lb=!1}function Nb(tr,er,rr,nr,ir,sr,or,ar,cr){var lr=Array.prototype.slice.call(arguments,3);try{er.apply(rr,lr)}catch(ur){this.onError(ur)}}var Ob=!1,Pb=null,Qb=!1,Rb=null,Sb={onError:function(tr){Ob=!0,Pb=tr}};function Tb(tr,er,rr,nr,ir,sr,or,ar,cr){Ob=!1,Pb=null,Nb.apply(Sb,arguments)}function Ub(tr,er,rr,nr,ir,sr,or,ar,cr){if(Tb.apply(this,arguments),Ob){if(Ob){var lr=Pb;Ob=!1,Pb=null}else throw Error(p$2(198));Qb||(Qb=!0,Rb=lr)}}function Vb(tr){var er=tr,rr=tr;if(tr.alternate)for(;er.return;)er=er.return;else{tr=er;do er=tr,er.flags&4098&&(rr=er.return),tr=er.return;while(tr)}return er.tag===3?rr:null}function Wb(tr){if(tr.tag===13){var er=tr.memoizedState;if(er===null&&(tr=tr.alternate,tr!==null&&(er=tr.memoizedState)),er!==null)return er.dehydrated}return null}function Xb(tr){if(Vb(tr)!==tr)throw Error(p$2(188))}function Yb(tr){var er=tr.alternate;if(!er){if(er=Vb(tr),er===null)throw Error(p$2(188));return er!==tr?null:tr}for(var rr=tr,nr=er;;){var ir=rr.return;if(ir===null)break;var sr=ir.alternate;if(sr===null){if(nr=ir.return,nr!==null){rr=nr;continue}break}if(ir.child===sr.child){for(sr=ir.child;sr;){if(sr===rr)return Xb(ir),tr;if(sr===nr)return Xb(ir),er;sr=sr.sibling}throw Error(p$2(188))}if(rr.return!==nr.return)rr=ir,nr=sr;else{for(var or=!1,ar=ir.child;ar;){if(ar===rr){or=!0,rr=ir,nr=sr;break}if(ar===nr){or=!0,nr=ir,rr=sr;break}ar=ar.sibling}if(!or){for(ar=sr.child;ar;){if(ar===rr){or=!0,rr=sr,nr=ir;break}if(ar===nr){or=!0,nr=sr,rr=ir;break}ar=ar.sibling}if(!or)throw Error(p$2(189))}}if(rr.alternate!==nr)throw Error(p$2(190))}if(rr.tag!==3)throw Error(p$2(188));return rr.stateNode.current===rr?tr:er}function Zb(tr){return tr=Yb(tr),tr!==null?$b(tr):null}function $b(tr){if(tr.tag===5||tr.tag===6)return tr;for(tr=tr.child;tr!==null;){var er=$b(tr);if(er!==null)return er;tr=tr.sibling}return null}var ac=ca.unstable_scheduleCallback,bc=ca.unstable_cancelCallback,cc=ca.unstable_shouldYield,dc=ca.unstable_requestPaint,B$2=ca.unstable_now,ec$3=ca.unstable_getCurrentPriorityLevel,fc=ca.unstable_ImmediatePriority,gc=ca.unstable_UserBlockingPriority,hc=ca.unstable_NormalPriority,ic=ca.unstable_LowPriority,jc=ca.unstable_IdlePriority,kc=null,lc=null;function mc(tr){if(lc&&typeof lc.onCommitFiberRoot=="function")try{lc.onCommitFiberRoot(kc,tr,void 0,(tr.current.flags&128)===128)}catch{}}var oc=Math.clz32?Math.clz32:nc,pc=Math.log,qc=Math.LN2;function nc(tr){return tr>>>=0,tr===0?32:31-(pc(tr)/qc|0)|0}var rc=64,sc=4194304;function tc(tr){switch(tr&-tr){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return tr&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return tr&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return tr}}function uc(tr,er){var rr=tr.pendingLanes;if(rr===0)return 0;var nr=0,ir=tr.suspendedLanes,sr=tr.pingedLanes,or=rr&268435455;if(or!==0){var ar=or&~ir;ar!==0?nr=tc(ar):(sr&=or,sr!==0&&(nr=tc(sr)))}else or=rr&~ir,or!==0?nr=tc(or):sr!==0&&(nr=tc(sr));if(nr===0)return 0;if(er!==0&&er!==nr&&!(er&ir)&&(ir=nr&-nr,sr=er&-er,ir>=sr||ir===16&&(sr&4194240)!==0))return er;if(nr&4&&(nr|=rr&16),er=tr.entangledLanes,er!==0)for(tr=tr.entanglements,er&=nr;0<er;)rr=31-oc(er),ir=1<<rr,nr|=tr[rr],er&=~ir;return nr}function vc(tr,er){switch(tr){case 1:case 2:case 4:return er+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return er+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wc(tr,er){for(var rr=tr.suspendedLanes,nr=tr.pingedLanes,ir=tr.expirationTimes,sr=tr.pendingLanes;0<sr;){var or=31-oc(sr),ar=1<<or,cr=ir[or];cr===-1?(!(ar&rr)||ar&nr)&&(ir[or]=vc(ar,er)):cr<=er&&(tr.expiredLanes|=ar),sr&=~ar}}function xc(tr){return tr=tr.pendingLanes&-1073741825,tr!==0?tr:tr&1073741824?1073741824:0}function yc(){var tr=rc;return rc<<=1,!(rc&4194240)&&(rc=64),tr}function zc(tr){for(var er=[],rr=0;31>rr;rr++)er.push(tr);return er}function Ac(tr,er,rr){tr.pendingLanes|=er,er!==536870912&&(tr.suspendedLanes=0,tr.pingedLanes=0),tr=tr.eventTimes,er=31-oc(er),tr[er]=rr}function Bc(tr,er){var rr=tr.pendingLanes&~er;tr.pendingLanes=er,tr.suspendedLanes=0,tr.pingedLanes=0,tr.expiredLanes&=er,tr.mutableReadLanes&=er,tr.entangledLanes&=er,er=tr.entanglements;var nr=tr.eventTimes;for(tr=tr.expirationTimes;0<rr;){var ir=31-oc(rr),sr=1<<ir;er[ir]=0,nr[ir]=-1,tr[ir]=-1,rr&=~sr}}function Cc(tr,er){var rr=tr.entangledLanes|=er;for(tr=tr.entanglements;rr;){var nr=31-oc(rr),ir=1<<nr;ir&er|tr[nr]&er&&(tr[nr]|=er),rr&=~ir}}var C$2=0;function Dc(tr){return tr&=-tr,1<tr?4<tr?tr&268435455?16:536870912:4:1}var Ec,Fc,Gc,Hc,Ic,Jc=!1,Kc=[],Lc=null,Mc=null,Nc=null,Oc=new Map,Pc=new Map,Qc=[],Rc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Sc(tr,er){switch(tr){case"focusin":case"focusout":Lc=null;break;case"dragenter":case"dragleave":Mc=null;break;case"mouseover":case"mouseout":Nc=null;break;case"pointerover":case"pointerout":Oc.delete(er.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pc.delete(er.pointerId)}}function Tc(tr,er,rr,nr,ir,sr){return tr===null||tr.nativeEvent!==sr?(tr={blockedOn:er,domEventName:rr,eventSystemFlags:nr,nativeEvent:sr,targetContainers:[ir]},er!==null&&(er=Cb(er),er!==null&&Fc(er)),tr):(tr.eventSystemFlags|=nr,er=tr.targetContainers,ir!==null&&er.indexOf(ir)===-1&&er.push(ir),tr)}function Uc(tr,er,rr,nr,ir){switch(er){case"focusin":return Lc=Tc(Lc,tr,er,rr,nr,ir),!0;case"dragenter":return Mc=Tc(Mc,tr,er,rr,nr,ir),!0;case"mouseover":return Nc=Tc(Nc,tr,er,rr,nr,ir),!0;case"pointerover":var sr=ir.pointerId;return Oc.set(sr,Tc(Oc.get(sr)||null,tr,er,rr,nr,ir)),!0;case"gotpointercapture":return sr=ir.pointerId,Pc.set(sr,Tc(Pc.get(sr)||null,tr,er,rr,nr,ir)),!0}return!1}function Vc(tr){var er=Wc(tr.target);if(er!==null){var rr=Vb(er);if(rr!==null){if(er=rr.tag,er===13){if(er=Wb(rr),er!==null){tr.blockedOn=er,Ic(tr.priority,function(){Gc(rr)});return}}else if(er===3&&rr.stateNode.current.memoizedState.isDehydrated){tr.blockedOn=rr.tag===3?rr.stateNode.containerInfo:null;return}}}tr.blockedOn=null}function Xc(tr){if(tr.blockedOn!==null)return!1;for(var er=tr.targetContainers;0<er.length;){var rr=Yc(tr.domEventName,tr.eventSystemFlags,er[0],tr.nativeEvent);if(rr===null){rr=tr.nativeEvent;var nr=new rr.constructor(rr.type,rr);wb=nr,rr.target.dispatchEvent(nr),wb=null}else return er=Cb(rr),er!==null&&Fc(er),tr.blockedOn=rr,!1;er.shift()}return!0}function Zc(tr,er,rr){Xc(tr)&&rr.delete(er)}function $c(){Jc=!1,Lc!==null&&Xc(Lc)&&(Lc=null),Mc!==null&&Xc(Mc)&&(Mc=null),Nc!==null&&Xc(Nc)&&(Nc=null),Oc.forEach(Zc),Pc.forEach(Zc)}function ad(tr,er){tr.blockedOn===er&&(tr.blockedOn=null,Jc||(Jc=!0,ca.unstable_scheduleCallback(ca.unstable_NormalPriority,$c)))}function bd(tr){function er(ir){return ad(ir,tr)}if(0<Kc.length){ad(Kc[0],tr);for(var rr=1;rr<Kc.length;rr++){var nr=Kc[rr];nr.blockedOn===tr&&(nr.blockedOn=null)}}for(Lc!==null&&ad(Lc,tr),Mc!==null&&ad(Mc,tr),Nc!==null&&ad(Nc,tr),Oc.forEach(er),Pc.forEach(er),rr=0;rr<Qc.length;rr++)nr=Qc[rr],nr.blockedOn===tr&&(nr.blockedOn=null);for(;0<Qc.length&&(rr=Qc[0],rr.blockedOn===null);)Vc(rr),rr.blockedOn===null&&Qc.shift()}var cd=ua.ReactCurrentBatchConfig,dd=!0;function ed(tr,er,rr,nr){var ir=C$2,sr=cd.transition;cd.transition=null;try{C$2=1,fd(tr,er,rr,nr)}finally{C$2=ir,cd.transition=sr}}function gd(tr,er,rr,nr){var ir=C$2,sr=cd.transition;cd.transition=null;try{C$2=4,fd(tr,er,rr,nr)}finally{C$2=ir,cd.transition=sr}}function fd(tr,er,rr,nr){if(dd){var ir=Yc(tr,er,rr,nr);if(ir===null)hd(tr,er,nr,id$1,rr),Sc(tr,nr);else if(Uc(ir,tr,er,rr,nr))nr.stopPropagation();else if(Sc(tr,nr),er&4&&-1<Rc.indexOf(tr)){for(;ir!==null;){var sr=Cb(ir);if(sr!==null&&Ec(sr),sr=Yc(tr,er,rr,nr),sr===null&&hd(tr,er,nr,id$1,rr),sr===ir)break;ir=sr}ir!==null&&nr.stopPropagation()}else hd(tr,er,nr,null,rr)}}var id$1=null;function Yc(tr,er,rr,nr){if(id$1=null,tr=xb(nr),tr=Wc(tr),tr!==null)if(er=Vb(tr),er===null)tr=null;else if(rr=er.tag,rr===13){if(tr=Wb(er),tr!==null)return tr;tr=null}else if(rr===3){if(er.stateNode.current.memoizedState.isDehydrated)return er.tag===3?er.stateNode.containerInfo:null;tr=null}else er!==tr&&(tr=null);return id$1=tr,null}function jd(tr){switch(tr){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ec$3()){case fc:return 1;case gc:return 4;case hc:case ic:return 16;case jc:return 536870912;default:return 16}default:return 16}}var kd=null,ld=null,md=null;function nd(){if(md)return md;var tr,er=ld,rr=er.length,nr,ir="value"in kd?kd.value:kd.textContent,sr=ir.length;for(tr=0;tr<rr&&er[tr]===ir[tr];tr++);var or=rr-tr;for(nr=1;nr<=or&&er[rr-nr]===ir[sr-nr];nr++);return md=ir.slice(tr,1<nr?1-nr:void 0)}function od(tr){var er=tr.keyCode;return"charCode"in tr?(tr=tr.charCode,tr===0&&er===13&&(tr=13)):tr=er,tr===10&&(tr=13),32<=tr||tr===13?tr:0}function pd(){return!0}function qd(){return!1}function rd(tr){function er(rr,nr,ir,sr,or){this._reactName=rr,this._targetInst=ir,this.type=nr,this.nativeEvent=sr,this.target=or,this.currentTarget=null;for(var ar in tr)tr.hasOwnProperty(ar)&&(rr=tr[ar],this[ar]=rr?rr(sr):sr[ar]);return this.isDefaultPrevented=(sr.defaultPrevented!=null?sr.defaultPrevented:sr.returnValue===!1)?pd:qd,this.isPropagationStopped=qd,this}return A$2(er.prototype,{preventDefault:function(){this.defaultPrevented=!0;var rr=this.nativeEvent;rr&&(rr.preventDefault?rr.preventDefault():typeof rr.returnValue!="unknown"&&(rr.returnValue=!1),this.isDefaultPrevented=pd)},stopPropagation:function(){var rr=this.nativeEvent;rr&&(rr.stopPropagation?rr.stopPropagation():typeof rr.cancelBubble!="unknown"&&(rr.cancelBubble=!0),this.isPropagationStopped=pd)},persist:function(){},isPersistent:pd}),er}var sd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(tr){return tr.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},td=rd(sd),ud=A$2({},sd,{view:0,detail:0}),vd=rd(ud),wd,xd,yd,Ad=A$2({},ud,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zd,button:0,buttons:0,relatedTarget:function(tr){return tr.relatedTarget===void 0?tr.fromElement===tr.srcElement?tr.toElement:tr.fromElement:tr.relatedTarget},movementX:function(tr){return"movementX"in tr?tr.movementX:(tr!==yd&&(yd&&tr.type==="mousemove"?(wd=tr.screenX-yd.screenX,xd=tr.screenY-yd.screenY):xd=wd=0,yd=tr),wd)},movementY:function(tr){return"movementY"in tr?tr.movementY:xd}}),Bd=rd(Ad),Cd=A$2({},Ad,{dataTransfer:0}),Dd=rd(Cd),Ed=A$2({},ud,{relatedTarget:0}),Fd=rd(Ed),Gd=A$2({},sd,{animationName:0,elapsedTime:0,pseudoElement:0}),Hd=rd(Gd),Id$1=A$2({},sd,{clipboardData:function(tr){return"clipboardData"in tr?tr.clipboardData:window.clipboardData}}),Jd=rd(Id$1),Kd=A$2({},sd,{data:0}),Ld=rd(Kd),Md={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Nd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Od={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pd(tr){var er=this.nativeEvent;return er.getModifierState?er.getModifierState(tr):(tr=Od[tr])?!!er[tr]:!1}function zd(){return Pd}var Qd=A$2({},ud,{key:function(tr){if(tr.key){var er=Md[tr.key]||tr.key;if(er!=="Unidentified")return er}return tr.type==="keypress"?(tr=od(tr),tr===13?"Enter":String.fromCharCode(tr)):tr.type==="keydown"||tr.type==="keyup"?Nd[tr.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zd,charCode:function(tr){return tr.type==="keypress"?od(tr):0},keyCode:function(tr){return tr.type==="keydown"||tr.type==="keyup"?tr.keyCode:0},which:function(tr){return tr.type==="keypress"?od(tr):tr.type==="keydown"||tr.type==="keyup"?tr.keyCode:0}}),Rd=rd(Qd),Sd=A$2({},Ad,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Td=rd(Sd),Ud=A$2({},ud,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zd}),Vd=rd(Ud),Wd=A$2({},sd,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xd=rd(Wd),Yd=A$2({},Ad,{deltaX:function(tr){return"deltaX"in tr?tr.deltaX:"wheelDeltaX"in tr?-tr.wheelDeltaX:0},deltaY:function(tr){return"deltaY"in tr?tr.deltaY:"wheelDeltaY"in tr?-tr.wheelDeltaY:"wheelDelta"in tr?-tr.wheelDelta:0},deltaZ:0,deltaMode:0}),Zd=rd(Yd),$d=[9,13,27,32],ae$1=ia&&"CompositionEvent"in window,be$1=null;ia&&"documentMode"in document&&(be$1=document.documentMode);var ce$1=ia&&"TextEvent"in window&&!be$1,de$1=ia&&(!ae$1||be$1&&8<be$1&&11>=be$1),ee$1=" ",fe$2=!1;function ge$2(tr,er){switch(tr){case"keyup":return $d.indexOf(er.keyCode)!==-1;case"keydown":return er.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function he$1(tr){return tr=tr.detail,typeof tr=="object"&&"data"in tr?tr.data:null}var ie$1=!1;function je$1(tr,er){switch(tr){case"compositionend":return he$1(er);case"keypress":return er.which!==32?null:(fe$2=!0,ee$1);case"textInput":return tr=er.data,tr===ee$1&&fe$2?null:tr;default:return null}}function ke$1(tr,er){if(ie$1)return tr==="compositionend"||!ae$1&&ge$2(tr,er)?(tr=nd(),md=ld=kd=null,ie$1=!1,tr):null;switch(tr){case"paste":return null;case"keypress":if(!(er.ctrlKey||er.altKey||er.metaKey)||er.ctrlKey&&er.altKey){if(er.char&&1<er.char.length)return er.char;if(er.which)return String.fromCharCode(er.which)}return null;case"compositionend":return de$1&&er.locale!=="ko"?null:er.data;default:return null}}var le$1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function me$1(tr){var er=tr&&tr.nodeName&&tr.nodeName.toLowerCase();return er==="input"?!!le$1[tr.type]:er==="textarea"}function ne$1(tr,er,rr,nr){Eb(nr),er=oe$1(er,"onChange"),0<er.length&&(rr=new td("onChange","change",null,rr,nr),tr.push({event:rr,listeners:er}))}var pe$1=null,qe$1=null;function re$8(tr){se$1(tr,0)}function te$1(tr){var er=ue$1(tr);if(Wa(er))return tr}function ve$1(tr,er){if(tr==="change")return er}var we$1=!1;if(ia){var xe$1;if(ia){var ye$1="oninput"in document;if(!ye$1){var ze$1=document.createElement("div");ze$1.setAttribute("oninput","return;"),ye$1=typeof ze$1.oninput=="function"}xe$1=ye$1}else xe$1=!1;we$1=xe$1&&(!document.documentMode||9<document.documentMode)}function Ae$1(){pe$1&&(pe$1.detachEvent("onpropertychange",Be$1),qe$1=pe$1=null)}function Be$1(tr){if(tr.propertyName==="value"&&te$1(qe$1)){var er=[];ne$1(er,qe$1,tr,xb(tr)),Jb(re$8,er)}}function Ce$1(tr,er,rr){tr==="focusin"?(Ae$1(),pe$1=er,qe$1=rr,pe$1.attachEvent("onpropertychange",Be$1)):tr==="focusout"&&Ae$1()}function De$1(tr){if(tr==="selectionchange"||tr==="keyup"||tr==="keydown")return te$1(qe$1)}function Ee$1(tr,er){if(tr==="click")return te$1(er)}function Fe$1(tr,er){if(tr==="input"||tr==="change")return te$1(er)}function Ge$1(tr,er){return tr===er&&(tr!==0||1/tr===1/er)||tr!==tr&&er!==er}var He$1=typeof Object.is=="function"?Object.is:Ge$1;function Ie$1(tr,er){if(He$1(tr,er))return!0;if(typeof tr!="object"||tr===null||typeof er!="object"||er===null)return!1;var rr=Object.keys(tr),nr=Object.keys(er);if(rr.length!==nr.length)return!1;for(nr=0;nr<rr.length;nr++){var ir=rr[nr];if(!ja.call(er,ir)||!He$1(tr[ir],er[ir]))return!1}return!0}function Je$1(tr){for(;tr&&tr.firstChild;)tr=tr.firstChild;return tr}function Ke$1(tr,er){var rr=Je$1(tr);tr=0;for(var nr;rr;){if(rr.nodeType===3){if(nr=tr+rr.textContent.length,tr<=er&&nr>=er)return{node:rr,offset:er-tr};tr=nr}e:{for(;rr;){if(rr.nextSibling){rr=rr.nextSibling;break e}rr=rr.parentNode}rr=void 0}rr=Je$1(rr)}}function Le(tr,er){return tr&&er?tr===er?!0:tr&&tr.nodeType===3?!1:er&&er.nodeType===3?Le(tr,er.parentNode):"contains"in tr?tr.contains(er):tr.compareDocumentPosition?!!(tr.compareDocumentPosition(er)&16):!1:!1}function Me$1(){for(var tr=window,er=Xa();er instanceof tr.HTMLIFrameElement;){try{var rr=typeof er.contentWindow.location.href=="string"}catch{rr=!1}if(rr)tr=er.contentWindow;else break;er=Xa(tr.document)}return er}function Ne$1(tr){var er=tr&&tr.nodeName&&tr.nodeName.toLowerCase();return er&&(er==="input"&&(tr.type==="text"||tr.type==="search"||tr.type==="tel"||tr.type==="url"||tr.type==="password")||er==="textarea"||tr.contentEditable==="true")}function Oe$1(tr){var er=Me$1(),rr=tr.focusedElem,nr=tr.selectionRange;if(er!==rr&&rr&&rr.ownerDocument&&Le(rr.ownerDocument.documentElement,rr)){if(nr!==null&&Ne$1(rr)){if(er=nr.start,tr=nr.end,tr===void 0&&(tr=er),"selectionStart"in rr)rr.selectionStart=er,rr.selectionEnd=Math.min(tr,rr.value.length);else if(tr=(er=rr.ownerDocument||document)&&er.defaultView||window,tr.getSelection){tr=tr.getSelection();var ir=rr.textContent.length,sr=Math.min(nr.start,ir);nr=nr.end===void 0?sr:Math.min(nr.end,ir),!tr.extend&&sr>nr&&(ir=nr,nr=sr,sr=ir),ir=Ke$1(rr,sr);var or=Ke$1(rr,nr);ir&&or&&(tr.rangeCount!==1||tr.anchorNode!==ir.node||tr.anchorOffset!==ir.offset||tr.focusNode!==or.node||tr.focusOffset!==or.offset)&&(er=er.createRange(),er.setStart(ir.node,ir.offset),tr.removeAllRanges(),sr>nr?(tr.addRange(er),tr.extend(or.node,or.offset)):(er.setEnd(or.node,or.offset),tr.addRange(er)))}}for(er=[],tr=rr;tr=tr.parentNode;)tr.nodeType===1&&er.push({element:tr,left:tr.scrollLeft,top:tr.scrollTop});for(typeof rr.focus=="function"&&rr.focus(),rr=0;rr<er.length;rr++)tr=er[rr],tr.element.scrollLeft=tr.left,tr.element.scrollTop=tr.top}}var Pe$1=ia&&"documentMode"in document&&11>=document.documentMode,Qe$1=null,Re$1=null,Se$1=null,Te$1=!1;function Ue$1(tr,er,rr){var nr=rr.window===rr?rr.document:rr.nodeType===9?rr:rr.ownerDocument;Te$1||Qe$1==null||Qe$1!==Xa(nr)||(nr=Qe$1,"selectionStart"in nr&&Ne$1(nr)?nr={start:nr.selectionStart,end:nr.selectionEnd}:(nr=(nr.ownerDocument&&nr.ownerDocument.defaultView||window).getSelection(),nr={anchorNode:nr.anchorNode,anchorOffset:nr.anchorOffset,focusNode:nr.focusNode,focusOffset:nr.focusOffset}),Se$1&&Ie$1(Se$1,nr)||(Se$1=nr,nr=oe$1(Re$1,"onSelect"),0<nr.length&&(er=new td("onSelect","select",null,er,rr),tr.push({event:er,listeners:nr}),er.target=Qe$1)))}function Ve$1(tr,er){var rr={};return rr[tr.toLowerCase()]=er.toLowerCase(),rr["Webkit"+tr]="webkit"+er,rr["Moz"+tr]="moz"+er,rr}var We$1={animationend:Ve$1("Animation","AnimationEnd"),animationiteration:Ve$1("Animation","AnimationIteration"),animationstart:Ve$1("Animation","AnimationStart"),transitionend:Ve$1("Transition","TransitionEnd")},Xe$1={},Ye$1={};ia&&(Ye$1=document.createElement("div").style,"AnimationEvent"in window||(delete We$1.animationend.animation,delete We$1.animationiteration.animation,delete We$1.animationstart.animation),"TransitionEvent"in window||delete We$1.transitionend.transition);function Ze$1(tr){if(Xe$1[tr])return Xe$1[tr];if(!We$1[tr])return tr;var er=We$1[tr],rr;for(rr in er)if(er.hasOwnProperty(rr)&&rr in Ye$1)return Xe$1[tr]=er[rr];return tr}var $e$1=Ze$1("animationend"),af=Ze$1("animationiteration"),bf=Ze$1("animationstart"),cf=Ze$1("transitionend"),df=new Map,ef="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ff(tr,er){df.set(tr,er),fa(er,[tr])}for(var gf=0;gf<ef.length;gf++){var hf=ef[gf],jf=hf.toLowerCase(),kf=hf[0].toUpperCase()+hf.slice(1);ff(jf,"on"+kf)}ff($e$1,"onAnimationEnd");ff(af,"onAnimationIteration");ff(bf,"onAnimationStart");ff("dblclick","onDoubleClick");ff("focusin","onFocus");ff("focusout","onBlur");ff(cf,"onTransitionEnd");ha("onMouseEnter",["mouseout","mouseover"]);ha("onMouseLeave",["mouseout","mouseover"]);ha("onPointerEnter",["pointerout","pointerover"]);ha("onPointerLeave",["pointerout","pointerover"]);fa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));fa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));fa("onBeforeInput",["compositionend","keypress","textInput","paste"]);fa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var lf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mf=new Set("cancel close invalid load scroll toggle".split(" ").concat(lf));function nf(tr,er,rr){var nr=tr.type||"unknown-event";tr.currentTarget=rr,Ub(nr,er,void 0,tr),tr.currentTarget=null}function se$1(tr,er){er=(er&4)!==0;for(var rr=0;rr<tr.length;rr++){var nr=tr[rr],ir=nr.event;nr=nr.listeners;e:{var sr=void 0;if(er)for(var or=nr.length-1;0<=or;or--){var ar=nr[or],cr=ar.instance,lr=ar.currentTarget;if(ar=ar.listener,cr!==sr&&ir.isPropagationStopped())break e;nf(ir,ar,lr),sr=cr}else for(or=0;or<nr.length;or++){if(ar=nr[or],cr=ar.instance,lr=ar.currentTarget,ar=ar.listener,cr!==sr&&ir.isPropagationStopped())break e;nf(ir,ar,lr),sr=cr}}}if(Qb)throw tr=Rb,Qb=!1,Rb=null,tr}function D$3(tr,er){var rr=er[of];rr===void 0&&(rr=er[of]=new Set);var nr=tr+"__bubble";rr.has(nr)||(pf(er,tr,2,!1),rr.add(nr))}function qf(tr,er,rr){var nr=0;er&&(nr|=4),pf(rr,tr,nr,er)}var rf="_reactListening"+Math.random().toString(36).slice(2);function sf(tr){if(!tr[rf]){tr[rf]=!0,da.forEach(function(rr){rr!=="selectionchange"&&(mf.has(rr)||qf(rr,!1,tr),qf(rr,!0,tr))});var er=tr.nodeType===9?tr:tr.ownerDocument;er===null||er[rf]||(er[rf]=!0,qf("selectionchange",!1,er))}}function pf(tr,er,rr,nr){switch(jd(er)){case 1:var ir=ed;break;case 4:ir=gd;break;default:ir=fd}rr=ir.bind(null,er,rr,tr),ir=void 0,!Lb||er!=="touchstart"&&er!=="touchmove"&&er!=="wheel"||(ir=!0),nr?ir!==void 0?tr.addEventListener(er,rr,{capture:!0,passive:ir}):tr.addEventListener(er,rr,!0):ir!==void 0?tr.addEventListener(er,rr,{passive:ir}):tr.addEventListener(er,rr,!1)}function hd(tr,er,rr,nr,ir){var sr=nr;if(!(er&1)&&!(er&2)&&nr!==null)e:for(;;){if(nr===null)return;var or=nr.tag;if(or===3||or===4){var ar=nr.stateNode.containerInfo;if(ar===ir||ar.nodeType===8&&ar.parentNode===ir)break;if(or===4)for(or=nr.return;or!==null;){var cr=or.tag;if((cr===3||cr===4)&&(cr=or.stateNode.containerInfo,cr===ir||cr.nodeType===8&&cr.parentNode===ir))return;or=or.return}for(;ar!==null;){if(or=Wc(ar),or===null)return;if(cr=or.tag,cr===5||cr===6){nr=sr=or;continue e}ar=ar.parentNode}}nr=nr.return}Jb(function(){var lr=sr,ur=xb(rr),dr=[];e:{var yr=df.get(tr);if(yr!==void 0){var mr=td,wr=tr;switch(tr){case"keypress":if(od(rr)===0)break e;case"keydown":case"keyup":mr=Rd;break;case"focusin":wr="focus",mr=Fd;break;case"focusout":wr="blur",mr=Fd;break;case"beforeblur":case"afterblur":mr=Fd;break;case"click":if(rr.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":mr=Bd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":mr=Dd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":mr=Vd;break;case $e$1:case af:case bf:mr=Hd;break;case cf:mr=Xd;break;case"scroll":mr=vd;break;case"wheel":mr=Zd;break;case"copy":case"cut":case"paste":mr=Jd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":mr=Td}var xr=(er&4)!==0,Or=!xr&&tr==="scroll",Tr=xr?yr!==null?yr+"Capture":null:yr;xr=[];for(var Ar=lr,Nr;Ar!==null;){Nr=Ar;var Ur=Nr.stateNode;if(Nr.tag===5&&Ur!==null&&(Nr=Ur,Tr!==null&&(Ur=Kb(Ar,Tr),Ur!=null&&xr.push(tf(Ar,Ur,Nr)))),Or)break;Ar=Ar.return}0<xr.length&&(yr=new mr(yr,wr,null,rr,ur),dr.push({event:yr,listeners:xr}))}}if(!(er&7)){e:{if(yr=tr==="mouseover"||tr==="pointerover",mr=tr==="mouseout"||tr==="pointerout",yr&&rr!==wb&&(wr=rr.relatedTarget||rr.fromElement)&&(Wc(wr)||wr[uf]))break e;if((mr||yr)&&(yr=ur.window===ur?ur:(yr=ur.ownerDocument)?yr.defaultView||yr.parentWindow:window,mr?(wr=rr.relatedTarget||rr.toElement,mr=lr,wr=wr?Wc(wr):null,wr!==null&&(Or=Vb(wr),wr!==Or||wr.tag!==5&&wr.tag!==6)&&(wr=null)):(mr=null,wr=lr),mr!==wr)){if(xr=Bd,Ur="onMouseLeave",Tr="onMouseEnter",Ar="mouse",(tr==="pointerout"||tr==="pointerover")&&(xr=Td,Ur="onPointerLeave",Tr="onPointerEnter",Ar="pointer"),Or=mr==null?yr:ue$1(mr),Nr=wr==null?yr:ue$1(wr),yr=new xr(Ur,Ar+"leave",mr,rr,ur),yr.target=Or,yr.relatedTarget=Nr,Ur=null,Wc(ur)===lr&&(xr=new xr(Tr,Ar+"enter",wr,rr,ur),xr.target=Nr,xr.relatedTarget=Or,Ur=xr),Or=Ur,mr&&wr)t:{for(xr=mr,Tr=wr,Ar=0,Nr=xr;Nr;Nr=vf(Nr))Ar++;for(Nr=0,Ur=Tr;Ur;Ur=vf(Ur))Nr++;for(;0<Ar-Nr;)xr=vf(xr),Ar--;for(;0<Nr-Ar;)Tr=vf(Tr),Nr--;for(;Ar--;){if(xr===Tr||Tr!==null&&xr===Tr.alternate)break t;xr=vf(xr),Tr=vf(Tr)}xr=null}else xr=null;mr!==null&&wf(dr,yr,mr,xr,!1),wr!==null&&Or!==null&&wf(dr,Or,wr,xr,!0)}}e:{if(yr=lr?ue$1(lr):window,mr=yr.nodeName&&yr.nodeName.toLowerCase(),mr==="select"||mr==="input"&&yr.type==="file")var Dr=ve$1;else if(me$1(yr))if(we$1)Dr=Fe$1;else{Dr=De$1;var Hr=Ce$1}else(mr=yr.nodeName)&&mr.toLowerCase()==="input"&&(yr.type==="checkbox"||yr.type==="radio")&&(Dr=Ee$1);if(Dr&&(Dr=Dr(tr,lr))){ne$1(dr,Dr,rr,ur);break e}Hr&&Hr(tr,yr,lr),tr==="focusout"&&(Hr=yr._wrapperState)&&Hr.controlled&&yr.type==="number"&&cb(yr,"number",yr.value)}switch(Hr=lr?ue$1(lr):window,tr){case"focusin":(me$1(Hr)||Hr.contentEditable==="true")&&(Qe$1=Hr,Re$1=lr,Se$1=null);break;case"focusout":Se$1=Re$1=Qe$1=null;break;case"mousedown":Te$1=!0;break;case"contextmenu":case"mouseup":case"dragend":Te$1=!1,Ue$1(dr,rr,ur);break;case"selectionchange":if(Pe$1)break;case"keydown":case"keyup":Ue$1(dr,rr,ur)}var zr;if(ae$1)e:{switch(tr){case"compositionstart":var Cr="onCompositionStart";break e;case"compositionend":Cr="onCompositionEnd";break e;case"compositionupdate":Cr="onCompositionUpdate";break e}Cr=void 0}else ie$1?ge$2(tr,rr)&&(Cr="onCompositionEnd"):tr==="keydown"&&rr.keyCode===229&&(Cr="onCompositionStart");Cr&&(de$1&&rr.locale!=="ko"&&(ie$1||Cr!=="onCompositionStart"?Cr==="onCompositionEnd"&&ie$1&&(zr=nd()):(kd=ur,ld="value"in kd?kd.value:kd.textContent,ie$1=!0)),Hr=oe$1(lr,Cr),0<Hr.length&&(Cr=new Ld(Cr,tr,null,rr,ur),dr.push({event:Cr,listeners:Hr}),zr?Cr.data=zr:(zr=he$1(rr),zr!==null&&(Cr.data=zr)))),(zr=ce$1?je$1(tr,rr):ke$1(tr,rr))&&(lr=oe$1(lr,"onBeforeInput"),0<lr.length&&(ur=new Ld("onBeforeInput","beforeinput",null,rr,ur),dr.push({event:ur,listeners:lr}),ur.data=zr))}se$1(dr,er)})}function tf(tr,er,rr){return{instance:tr,listener:er,currentTarget:rr}}function oe$1(tr,er){for(var rr=er+"Capture",nr=[];tr!==null;){var ir=tr,sr=ir.stateNode;ir.tag===5&&sr!==null&&(ir=sr,sr=Kb(tr,rr),sr!=null&&nr.unshift(tf(tr,sr,ir)),sr=Kb(tr,er),sr!=null&&nr.push(tf(tr,sr,ir))),tr=tr.return}return nr}function vf(tr){if(tr===null)return null;do tr=tr.return;while(tr&&tr.tag!==5);return tr||null}function wf(tr,er,rr,nr,ir){for(var sr=er._reactName,or=[];rr!==null&&rr!==nr;){var ar=rr,cr=ar.alternate,lr=ar.stateNode;if(cr!==null&&cr===nr)break;ar.tag===5&&lr!==null&&(ar=lr,ir?(cr=Kb(rr,sr),cr!=null&&or.unshift(tf(rr,cr,ar))):ir||(cr=Kb(rr,sr),cr!=null&&or.push(tf(rr,cr,ar)))),rr=rr.return}or.length!==0&&tr.push({event:er,listeners:or})}var xf=/\r\n?/g,yf=/\u0000|\uFFFD/g;function zf(tr){return(typeof tr=="string"?tr:""+tr).replace(xf,`
`).replace(yf,"")}function Af(tr,er,rr){if(er=zf(er),zf(tr)!==er&&rr)throw Error(p$2(425))}function Bf(){}var Cf=null,Df=null;function Ef(tr,er){return tr==="textarea"||tr==="noscript"||typeof er.children=="string"||typeof er.children=="number"||typeof er.dangerouslySetInnerHTML=="object"&&er.dangerouslySetInnerHTML!==null&&er.dangerouslySetInnerHTML.__html!=null}var Ff=typeof setTimeout=="function"?setTimeout:void 0,Gf=typeof clearTimeout=="function"?clearTimeout:void 0,Hf=typeof Promise=="function"?Promise:void 0,Jf=typeof queueMicrotask=="function"?queueMicrotask:typeof Hf<"u"?function(tr){return Hf.resolve(null).then(tr).catch(If)}:Ff;function If(tr){setTimeout(function(){throw tr})}function Kf(tr,er){var rr=er,nr=0;do{var ir=rr.nextSibling;if(tr.removeChild(rr),ir&&ir.nodeType===8)if(rr=ir.data,rr==="/$"){if(nr===0){tr.removeChild(ir),bd(er);return}nr--}else rr!=="$"&&rr!=="$?"&&rr!=="$!"||nr++;rr=ir}while(rr);bd(er)}function Lf(tr){for(;tr!=null;tr=tr.nextSibling){var er=tr.nodeType;if(er===1||er===3)break;if(er===8){if(er=tr.data,er==="$"||er==="$!"||er==="$?")break;if(er==="/$")return null}}return tr}function Mf(tr){tr=tr.previousSibling;for(var er=0;tr;){if(tr.nodeType===8){var rr=tr.data;if(rr==="$"||rr==="$!"||rr==="$?"){if(er===0)return tr;er--}else rr==="/$"&&er++}tr=tr.previousSibling}return null}var Nf=Math.random().toString(36).slice(2),Of="__reactFiber$"+Nf,Pf="__reactProps$"+Nf,uf="__reactContainer$"+Nf,of="__reactEvents$"+Nf,Qf="__reactListeners$"+Nf,Rf="__reactHandles$"+Nf;function Wc(tr){var er=tr[Of];if(er)return er;for(var rr=tr.parentNode;rr;){if(er=rr[uf]||rr[Of]){if(rr=er.alternate,er.child!==null||rr!==null&&rr.child!==null)for(tr=Mf(tr);tr!==null;){if(rr=tr[Of])return rr;tr=Mf(tr)}return er}tr=rr,rr=tr.parentNode}return null}function Cb(tr){return tr=tr[Of]||tr[uf],!tr||tr.tag!==5&&tr.tag!==6&&tr.tag!==13&&tr.tag!==3?null:tr}function ue$1(tr){if(tr.tag===5||tr.tag===6)return tr.stateNode;throw Error(p$2(33))}function Db(tr){return tr[Pf]||null}var Sf=[],Tf=-1;function Uf(tr){return{current:tr}}function E$2(tr){0>Tf||(tr.current=Sf[Tf],Sf[Tf]=null,Tf--)}function G$2(tr,er){Tf++,Sf[Tf]=tr.current,tr.current=er}var Vf={},H$1=Uf(Vf),Wf=Uf(!1),Xf=Vf;function Yf(tr,er){var rr=tr.type.contextTypes;if(!rr)return Vf;var nr=tr.stateNode;if(nr&&nr.__reactInternalMemoizedUnmaskedChildContext===er)return nr.__reactInternalMemoizedMaskedChildContext;var ir={},sr;for(sr in rr)ir[sr]=er[sr];return nr&&(tr=tr.stateNode,tr.__reactInternalMemoizedUnmaskedChildContext=er,tr.__reactInternalMemoizedMaskedChildContext=ir),ir}function Zf(tr){return tr=tr.childContextTypes,tr!=null}function $f(){E$2(Wf),E$2(H$1)}function ag(tr,er,rr){if(H$1.current!==Vf)throw Error(p$2(168));G$2(H$1,er),G$2(Wf,rr)}function bg(tr,er,rr){var nr=tr.stateNode;if(er=er.childContextTypes,typeof nr.getChildContext!="function")return rr;nr=nr.getChildContext();for(var ir in nr)if(!(ir in er))throw Error(p$2(108,Ra(tr)||"Unknown",ir));return A$2({},rr,nr)}function cg(tr){return tr=(tr=tr.stateNode)&&tr.__reactInternalMemoizedMergedChildContext||Vf,Xf=H$1.current,G$2(H$1,tr),G$2(Wf,Wf.current),!0}function dg(tr,er,rr){var nr=tr.stateNode;if(!nr)throw Error(p$2(169));rr?(tr=bg(tr,er,Xf),nr.__reactInternalMemoizedMergedChildContext=tr,E$2(Wf),E$2(H$1),G$2(H$1,tr)):E$2(Wf),G$2(Wf,rr)}var eg=null,fg=!1,gg=!1;function hg(tr){eg===null?eg=[tr]:eg.push(tr)}function ig(tr){fg=!0,hg(tr)}function jg(){if(!gg&&eg!==null){gg=!0;var tr=0,er=C$2;try{var rr=eg;for(C$2=1;tr<rr.length;tr++){var nr=rr[tr];do nr=nr(!0);while(nr!==null)}eg=null,fg=!1}catch(ir){throw eg!==null&&(eg=eg.slice(tr+1)),ac(fc,jg),ir}finally{C$2=er,gg=!1}}return null}var kg=[],lg=0,mg=null,ng=0,og=[],pg=0,qg=null,rg=1,sg="";function tg(tr,er){kg[lg++]=ng,kg[lg++]=mg,mg=tr,ng=er}function ug(tr,er,rr){og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,qg=tr;var nr=rg;tr=sg;var ir=32-oc(nr)-1;nr&=~(1<<ir),rr+=1;var sr=32-oc(er)+ir;if(30<sr){var or=ir-ir%5;sr=(nr&(1<<or)-1).toString(32),nr>>=or,ir-=or,rg=1<<32-oc(er)+ir|rr<<ir|nr,sg=sr+tr}else rg=1<<sr|rr<<ir|nr,sg=tr}function vg(tr){tr.return!==null&&(tg(tr,1),ug(tr,1,0))}function wg(tr){for(;tr===mg;)mg=kg[--lg],kg[lg]=null,ng=kg[--lg],kg[lg]=null;for(;tr===qg;)qg=og[--pg],og[pg]=null,sg=og[--pg],og[pg]=null,rg=og[--pg],og[pg]=null}var xg=null,yg=null,I$1=!1,zg=null;function Ag(tr,er){var rr=Bg(5,null,null,0);rr.elementType="DELETED",rr.stateNode=er,rr.return=tr,er=tr.deletions,er===null?(tr.deletions=[rr],tr.flags|=16):er.push(rr)}function Cg(tr,er){switch(tr.tag){case 5:var rr=tr.type;return er=er.nodeType!==1||rr.toLowerCase()!==er.nodeName.toLowerCase()?null:er,er!==null?(tr.stateNode=er,xg=tr,yg=Lf(er.firstChild),!0):!1;case 6:return er=tr.pendingProps===""||er.nodeType!==3?null:er,er!==null?(tr.stateNode=er,xg=tr,yg=null,!0):!1;case 13:return er=er.nodeType!==8?null:er,er!==null?(rr=qg!==null?{id:rg,overflow:sg}:null,tr.memoizedState={dehydrated:er,treeContext:rr,retryLane:1073741824},rr=Bg(18,null,null,0),rr.stateNode=er,rr.return=tr,tr.child=rr,xg=tr,yg=null,!0):!1;default:return!1}}function Dg(tr){return(tr.mode&1)!==0&&(tr.flags&128)===0}function Eg(tr){if(I$1){var er=yg;if(er){var rr=er;if(!Cg(tr,er)){if(Dg(tr))throw Error(p$2(418));er=Lf(rr.nextSibling);var nr=xg;er&&Cg(tr,er)?Ag(nr,rr):(tr.flags=tr.flags&-4097|2,I$1=!1,xg=tr)}}else{if(Dg(tr))throw Error(p$2(418));tr.flags=tr.flags&-4097|2,I$1=!1,xg=tr}}}function Fg(tr){for(tr=tr.return;tr!==null&&tr.tag!==5&&tr.tag!==3&&tr.tag!==13;)tr=tr.return;xg=tr}function Gg(tr){if(tr!==xg)return!1;if(!I$1)return Fg(tr),I$1=!0,!1;var er;if((er=tr.tag!==3)&&!(er=tr.tag!==5)&&(er=tr.type,er=er!=="head"&&er!=="body"&&!Ef(tr.type,tr.memoizedProps)),er&&(er=yg)){if(Dg(tr))throw Hg(),Error(p$2(418));for(;er;)Ag(tr,er),er=Lf(er.nextSibling)}if(Fg(tr),tr.tag===13){if(tr=tr.memoizedState,tr=tr!==null?tr.dehydrated:null,!tr)throw Error(p$2(317));e:{for(tr=tr.nextSibling,er=0;tr;){if(tr.nodeType===8){var rr=tr.data;if(rr==="/$"){if(er===0){yg=Lf(tr.nextSibling);break e}er--}else rr!=="$"&&rr!=="$!"&&rr!=="$?"||er++}tr=tr.nextSibling}yg=null}}else yg=xg?Lf(tr.stateNode.nextSibling):null;return!0}function Hg(){for(var tr=yg;tr;)tr=Lf(tr.nextSibling)}function Ig(){yg=xg=null,I$1=!1}function Jg(tr){zg===null?zg=[tr]:zg.push(tr)}var Kg=ua.ReactCurrentBatchConfig;function Lg(tr,er,rr){if(tr=rr.ref,tr!==null&&typeof tr!="function"&&typeof tr!="object"){if(rr._owner){if(rr=rr._owner,rr){if(rr.tag!==1)throw Error(p$2(309));var nr=rr.stateNode}if(!nr)throw Error(p$2(147,tr));var ir=nr,sr=""+tr;return er!==null&&er.ref!==null&&typeof er.ref=="function"&&er.ref._stringRef===sr?er.ref:(er=function(or){var ar=ir.refs;or===null?delete ar[sr]:ar[sr]=or},er._stringRef=sr,er)}if(typeof tr!="string")throw Error(p$2(284));if(!rr._owner)throw Error(p$2(290,tr))}return tr}function Mg(tr,er){throw tr=Object.prototype.toString.call(er),Error(p$2(31,tr==="[object Object]"?"object with keys {"+Object.keys(er).join(", ")+"}":tr))}function Ng(tr){var er=tr._init;return er(tr._payload)}function Og(tr){function er(Tr,Ar){if(tr){var Nr=Tr.deletions;Nr===null?(Tr.deletions=[Ar],Tr.flags|=16):Nr.push(Ar)}}function rr(Tr,Ar){if(!tr)return null;for(;Ar!==null;)er(Tr,Ar),Ar=Ar.sibling;return null}function nr(Tr,Ar){for(Tr=new Map;Ar!==null;)Ar.key!==null?Tr.set(Ar.key,Ar):Tr.set(Ar.index,Ar),Ar=Ar.sibling;return Tr}function ir(Tr,Ar){return Tr=Pg(Tr,Ar),Tr.index=0,Tr.sibling=null,Tr}function sr(Tr,Ar,Nr){return Tr.index=Nr,tr?(Nr=Tr.alternate,Nr!==null?(Nr=Nr.index,Nr<Ar?(Tr.flags|=2,Ar):Nr):(Tr.flags|=2,Ar)):(Tr.flags|=1048576,Ar)}function or(Tr){return tr&&Tr.alternate===null&&(Tr.flags|=2),Tr}function ar(Tr,Ar,Nr,Ur){return Ar===null||Ar.tag!==6?(Ar=Qg(Nr,Tr.mode,Ur),Ar.return=Tr,Ar):(Ar=ir(Ar,Nr),Ar.return=Tr,Ar)}function cr(Tr,Ar,Nr,Ur){var Dr=Nr.type;return Dr===ya?ur(Tr,Ar,Nr.props.children,Ur,Nr.key):Ar!==null&&(Ar.elementType===Dr||typeof Dr=="object"&&Dr!==null&&Dr.$$typeof===Ha&&Ng(Dr)===Ar.type)?(Ur=ir(Ar,Nr.props),Ur.ref=Lg(Tr,Ar,Nr),Ur.return=Tr,Ur):(Ur=Rg(Nr.type,Nr.key,Nr.props,null,Tr.mode,Ur),Ur.ref=Lg(Tr,Ar,Nr),Ur.return=Tr,Ur)}function lr(Tr,Ar,Nr,Ur){return Ar===null||Ar.tag!==4||Ar.stateNode.containerInfo!==Nr.containerInfo||Ar.stateNode.implementation!==Nr.implementation?(Ar=Sg(Nr,Tr.mode,Ur),Ar.return=Tr,Ar):(Ar=ir(Ar,Nr.children||[]),Ar.return=Tr,Ar)}function ur(Tr,Ar,Nr,Ur,Dr){return Ar===null||Ar.tag!==7?(Ar=Tg(Nr,Tr.mode,Ur,Dr),Ar.return=Tr,Ar):(Ar=ir(Ar,Nr),Ar.return=Tr,Ar)}function dr(Tr,Ar,Nr){if(typeof Ar=="string"&&Ar!==""||typeof Ar=="number")return Ar=Qg(""+Ar,Tr.mode,Nr),Ar.return=Tr,Ar;if(typeof Ar=="object"&&Ar!==null){switch(Ar.$$typeof){case va:return Nr=Rg(Ar.type,Ar.key,Ar.props,null,Tr.mode,Nr),Nr.ref=Lg(Tr,null,Ar),Nr.return=Tr,Nr;case wa:return Ar=Sg(Ar,Tr.mode,Nr),Ar.return=Tr,Ar;case Ha:var Ur=Ar._init;return dr(Tr,Ur(Ar._payload),Nr)}if(eb(Ar)||Ka(Ar))return Ar=Tg(Ar,Tr.mode,Nr,null),Ar.return=Tr,Ar;Mg(Tr,Ar)}return null}function yr(Tr,Ar,Nr,Ur){var Dr=Ar!==null?Ar.key:null;if(typeof Nr=="string"&&Nr!==""||typeof Nr=="number")return Dr!==null?null:ar(Tr,Ar,""+Nr,Ur);if(typeof Nr=="object"&&Nr!==null){switch(Nr.$$typeof){case va:return Nr.key===Dr?cr(Tr,Ar,Nr,Ur):null;case wa:return Nr.key===Dr?lr(Tr,Ar,Nr,Ur):null;case Ha:return Dr=Nr._init,yr(Tr,Ar,Dr(Nr._payload),Ur)}if(eb(Nr)||Ka(Nr))return Dr!==null?null:ur(Tr,Ar,Nr,Ur,null);Mg(Tr,Nr)}return null}function mr(Tr,Ar,Nr,Ur,Dr){if(typeof Ur=="string"&&Ur!==""||typeof Ur=="number")return Tr=Tr.get(Nr)||null,ar(Ar,Tr,""+Ur,Dr);if(typeof Ur=="object"&&Ur!==null){switch(Ur.$$typeof){case va:return Tr=Tr.get(Ur.key===null?Nr:Ur.key)||null,cr(Ar,Tr,Ur,Dr);case wa:return Tr=Tr.get(Ur.key===null?Nr:Ur.key)||null,lr(Ar,Tr,Ur,Dr);case Ha:var Hr=Ur._init;return mr(Tr,Ar,Nr,Hr(Ur._payload),Dr)}if(eb(Ur)||Ka(Ur))return Tr=Tr.get(Nr)||null,ur(Ar,Tr,Ur,Dr,null);Mg(Ar,Ur)}return null}function wr(Tr,Ar,Nr,Ur){for(var Dr=null,Hr=null,zr=Ar,Cr=Ar=0,Mr=null;zr!==null&&Cr<Nr.length;Cr++){zr.index>Cr?(Mr=zr,zr=null):Mr=zr.sibling;var Pr=yr(Tr,zr,Nr[Cr],Ur);if(Pr===null){zr===null&&(zr=Mr);break}tr&&zr&&Pr.alternate===null&&er(Tr,zr),Ar=sr(Pr,Ar,Cr),Hr===null?Dr=Pr:Hr.sibling=Pr,Hr=Pr,zr=Mr}if(Cr===Nr.length)return rr(Tr,zr),I$1&&tg(Tr,Cr),Dr;if(zr===null){for(;Cr<Nr.length;Cr++)zr=dr(Tr,Nr[Cr],Ur),zr!==null&&(Ar=sr(zr,Ar,Cr),Hr===null?Dr=zr:Hr.sibling=zr,Hr=zr);return I$1&&tg(Tr,Cr),Dr}for(zr=nr(Tr,zr);Cr<Nr.length;Cr++)Mr=mr(zr,Tr,Cr,Nr[Cr],Ur),Mr!==null&&(tr&&Mr.alternate!==null&&zr.delete(Mr.key===null?Cr:Mr.key),Ar=sr(Mr,Ar,Cr),Hr===null?Dr=Mr:Hr.sibling=Mr,Hr=Mr);return tr&&zr.forEach(function(Sr){return er(Tr,Sr)}),I$1&&tg(Tr,Cr),Dr}function xr(Tr,Ar,Nr,Ur){var Dr=Ka(Nr);if(typeof Dr!="function")throw Error(p$2(150));if(Nr=Dr.call(Nr),Nr==null)throw Error(p$2(151));for(var Hr=Dr=null,zr=Ar,Cr=Ar=0,Mr=null,Pr=Nr.next();zr!==null&&!Pr.done;Cr++,Pr=Nr.next()){zr.index>Cr?(Mr=zr,zr=null):Mr=zr.sibling;var Sr=yr(Tr,zr,Pr.value,Ur);if(Sr===null){zr===null&&(zr=Mr);break}tr&&zr&&Sr.alternate===null&&er(Tr,zr),Ar=sr(Sr,Ar,Cr),Hr===null?Dr=Sr:Hr.sibling=Sr,Hr=Sr,zr=Mr}if(Pr.done)return rr(Tr,zr),I$1&&tg(Tr,Cr),Dr;if(zr===null){for(;!Pr.done;Cr++,Pr=Nr.next())Pr=dr(Tr,Pr.value,Ur),Pr!==null&&(Ar=sr(Pr,Ar,Cr),Hr===null?Dr=Pr:Hr.sibling=Pr,Hr=Pr);return I$1&&tg(Tr,Cr),Dr}for(zr=nr(Tr,zr);!Pr.done;Cr++,Pr=Nr.next())Pr=mr(zr,Tr,Cr,Pr.value,Ur),Pr!==null&&(tr&&Pr.alternate!==null&&zr.delete(Pr.key===null?Cr:Pr.key),Ar=sr(Pr,Ar,Cr),Hr===null?Dr=Pr:Hr.sibling=Pr,Hr=Pr);return tr&&zr.forEach(function(pr){return er(Tr,pr)}),I$1&&tg(Tr,Cr),Dr}function Or(Tr,Ar,Nr,Ur){if(typeof Nr=="object"&&Nr!==null&&Nr.type===ya&&Nr.key===null&&(Nr=Nr.props.children),typeof Nr=="object"&&Nr!==null){switch(Nr.$$typeof){case va:e:{for(var Dr=Nr.key,Hr=Ar;Hr!==null;){if(Hr.key===Dr){if(Dr=Nr.type,Dr===ya){if(Hr.tag===7){rr(Tr,Hr.sibling),Ar=ir(Hr,Nr.props.children),Ar.return=Tr,Tr=Ar;break e}}else if(Hr.elementType===Dr||typeof Dr=="object"&&Dr!==null&&Dr.$$typeof===Ha&&Ng(Dr)===Hr.type){rr(Tr,Hr.sibling),Ar=ir(Hr,Nr.props),Ar.ref=Lg(Tr,Hr,Nr),Ar.return=Tr,Tr=Ar;break e}rr(Tr,Hr);break}else er(Tr,Hr);Hr=Hr.sibling}Nr.type===ya?(Ar=Tg(Nr.props.children,Tr.mode,Ur,Nr.key),Ar.return=Tr,Tr=Ar):(Ur=Rg(Nr.type,Nr.key,Nr.props,null,Tr.mode,Ur),Ur.ref=Lg(Tr,Ar,Nr),Ur.return=Tr,Tr=Ur)}return or(Tr);case wa:e:{for(Hr=Nr.key;Ar!==null;){if(Ar.key===Hr)if(Ar.tag===4&&Ar.stateNode.containerInfo===Nr.containerInfo&&Ar.stateNode.implementation===Nr.implementation){rr(Tr,Ar.sibling),Ar=ir(Ar,Nr.children||[]),Ar.return=Tr,Tr=Ar;break e}else{rr(Tr,Ar);break}else er(Tr,Ar);Ar=Ar.sibling}Ar=Sg(Nr,Tr.mode,Ur),Ar.return=Tr,Tr=Ar}return or(Tr);case Ha:return Hr=Nr._init,Or(Tr,Ar,Hr(Nr._payload),Ur)}if(eb(Nr))return wr(Tr,Ar,Nr,Ur);if(Ka(Nr))return xr(Tr,Ar,Nr,Ur);Mg(Tr,Nr)}return typeof Nr=="string"&&Nr!==""||typeof Nr=="number"?(Nr=""+Nr,Ar!==null&&Ar.tag===6?(rr(Tr,Ar.sibling),Ar=ir(Ar,Nr),Ar.return=Tr,Tr=Ar):(rr(Tr,Ar),Ar=Qg(Nr,Tr.mode,Ur),Ar.return=Tr,Tr=Ar),or(Tr)):rr(Tr,Ar)}return Or}var Ug=Og(!0),Vg=Og(!1),Wg=Uf(null),Xg=null,Yg=null,Zg=null;function $g(){Zg=Yg=Xg=null}function ah(tr){var er=Wg.current;E$2(Wg),tr._currentValue=er}function bh(tr,er,rr){for(;tr!==null;){var nr=tr.alternate;if((tr.childLanes&er)!==er?(tr.childLanes|=er,nr!==null&&(nr.childLanes|=er)):nr!==null&&(nr.childLanes&er)!==er&&(nr.childLanes|=er),tr===rr)break;tr=tr.return}}function ch$1(tr,er){Xg=tr,Zg=Yg=null,tr=tr.dependencies,tr!==null&&tr.firstContext!==null&&(tr.lanes&er&&(dh=!0),tr.firstContext=null)}function eh(tr){var er=tr._currentValue;if(Zg!==tr)if(tr={context:tr,memoizedValue:er,next:null},Yg===null){if(Xg===null)throw Error(p$2(308));Yg=tr,Xg.dependencies={lanes:0,firstContext:tr}}else Yg=Yg.next=tr;return er}var fh=null;function gh(tr){fh===null?fh=[tr]:fh.push(tr)}function hh(tr,er,rr,nr){var ir=er.interleaved;return ir===null?(rr.next=rr,gh(er)):(rr.next=ir.next,ir.next=rr),er.interleaved=rr,ih(tr,nr)}function ih(tr,er){tr.lanes|=er;var rr=tr.alternate;for(rr!==null&&(rr.lanes|=er),rr=tr,tr=tr.return;tr!==null;)tr.childLanes|=er,rr=tr.alternate,rr!==null&&(rr.childLanes|=er),rr=tr,tr=tr.return;return rr.tag===3?rr.stateNode:null}var jh=!1;function kh(tr){tr.updateQueue={baseState:tr.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function lh(tr,er){tr=tr.updateQueue,er.updateQueue===tr&&(er.updateQueue={baseState:tr.baseState,firstBaseUpdate:tr.firstBaseUpdate,lastBaseUpdate:tr.lastBaseUpdate,shared:tr.shared,effects:tr.effects})}function mh(tr,er){return{eventTime:tr,lane:er,tag:0,payload:null,callback:null,next:null}}function nh(tr,er,rr){var nr=tr.updateQueue;if(nr===null)return null;if(nr=nr.shared,K$5&2){var ir=nr.pending;return ir===null?er.next=er:(er.next=ir.next,ir.next=er),nr.pending=er,ih(tr,rr)}return ir=nr.interleaved,ir===null?(er.next=er,gh(nr)):(er.next=ir.next,ir.next=er),nr.interleaved=er,ih(tr,rr)}function oh(tr,er,rr){if(er=er.updateQueue,er!==null&&(er=er.shared,(rr&4194240)!==0)){var nr=er.lanes;nr&=tr.pendingLanes,rr|=nr,er.lanes=rr,Cc(tr,rr)}}function ph(tr,er){var rr=tr.updateQueue,nr=tr.alternate;if(nr!==null&&(nr=nr.updateQueue,rr===nr)){var ir=null,sr=null;if(rr=rr.firstBaseUpdate,rr!==null){do{var or={eventTime:rr.eventTime,lane:rr.lane,tag:rr.tag,payload:rr.payload,callback:rr.callback,next:null};sr===null?ir=sr=or:sr=sr.next=or,rr=rr.next}while(rr!==null);sr===null?ir=sr=er:sr=sr.next=er}else ir=sr=er;rr={baseState:nr.baseState,firstBaseUpdate:ir,lastBaseUpdate:sr,shared:nr.shared,effects:nr.effects},tr.updateQueue=rr;return}tr=rr.lastBaseUpdate,tr===null?rr.firstBaseUpdate=er:tr.next=er,rr.lastBaseUpdate=er}function qh(tr,er,rr,nr){var ir=tr.updateQueue;jh=!1;var sr=ir.firstBaseUpdate,or=ir.lastBaseUpdate,ar=ir.shared.pending;if(ar!==null){ir.shared.pending=null;var cr=ar,lr=cr.next;cr.next=null,or===null?sr=lr:or.next=lr,or=cr;var ur=tr.alternate;ur!==null&&(ur=ur.updateQueue,ar=ur.lastBaseUpdate,ar!==or&&(ar===null?ur.firstBaseUpdate=lr:ar.next=lr,ur.lastBaseUpdate=cr))}if(sr!==null){var dr=ir.baseState;or=0,ur=lr=cr=null,ar=sr;do{var yr=ar.lane,mr=ar.eventTime;if((nr&yr)===yr){ur!==null&&(ur=ur.next={eventTime:mr,lane:0,tag:ar.tag,payload:ar.payload,callback:ar.callback,next:null});e:{var wr=tr,xr=ar;switch(yr=er,mr=rr,xr.tag){case 1:if(wr=xr.payload,typeof wr=="function"){dr=wr.call(mr,dr,yr);break e}dr=wr;break e;case 3:wr.flags=wr.flags&-65537|128;case 0:if(wr=xr.payload,yr=typeof wr=="function"?wr.call(mr,dr,yr):wr,yr==null)break e;dr=A$2({},dr,yr);break e;case 2:jh=!0}}ar.callback!==null&&ar.lane!==0&&(tr.flags|=64,yr=ir.effects,yr===null?ir.effects=[ar]:yr.push(ar))}else mr={eventTime:mr,lane:yr,tag:ar.tag,payload:ar.payload,callback:ar.callback,next:null},ur===null?(lr=ur=mr,cr=dr):ur=ur.next=mr,or|=yr;if(ar=ar.next,ar===null){if(ar=ir.shared.pending,ar===null)break;yr=ar,ar=yr.next,yr.next=null,ir.lastBaseUpdate=yr,ir.shared.pending=null}}while(!0);if(ur===null&&(cr=dr),ir.baseState=cr,ir.firstBaseUpdate=lr,ir.lastBaseUpdate=ur,er=ir.shared.interleaved,er!==null){ir=er;do or|=ir.lane,ir=ir.next;while(ir!==er)}else sr===null&&(ir.shared.lanes=0);rh$1|=or,tr.lanes=or,tr.memoizedState=dr}}function sh$1(tr,er,rr){if(tr=er.effects,er.effects=null,tr!==null)for(er=0;er<tr.length;er++){var nr=tr[er],ir=nr.callback;if(ir!==null){if(nr.callback=null,nr=rr,typeof ir!="function")throw Error(p$2(191,ir));ir.call(nr)}}}var th={},uh=Uf(th),vh=Uf(th),wh=Uf(th);function xh(tr){if(tr===th)throw Error(p$2(174));return tr}function yh(tr,er){switch(G$2(wh,er),G$2(vh,tr),G$2(uh,th),tr=er.nodeType,tr){case 9:case 11:er=(er=er.documentElement)?er.namespaceURI:lb(null,"");break;default:tr=tr===8?er.parentNode:er,er=tr.namespaceURI||null,tr=tr.tagName,er=lb(er,tr)}E$2(uh),G$2(uh,er)}function zh(){E$2(uh),E$2(vh),E$2(wh)}function Ah(tr){xh(wh.current);var er=xh(uh.current),rr=lb(er,tr.type);er!==rr&&(G$2(vh,tr),G$2(uh,rr))}function Bh(tr){vh.current===tr&&(E$2(uh),E$2(vh))}var L$2=Uf(0);function Ch$1(tr){for(var er=tr;er!==null;){if(er.tag===13){var rr=er.memoizedState;if(rr!==null&&(rr=rr.dehydrated,rr===null||rr.data==="$?"||rr.data==="$!"))return er}else if(er.tag===19&&er.memoizedProps.revealOrder!==void 0){if(er.flags&128)return er}else if(er.child!==null){er.child.return=er,er=er.child;continue}if(er===tr)break;for(;er.sibling===null;){if(er.return===null||er.return===tr)return null;er=er.return}er.sibling.return=er.return,er=er.sibling}return null}var Dh=[];function Eh(){for(var tr=0;tr<Dh.length;tr++)Dh[tr]._workInProgressVersionPrimary=null;Dh.length=0}var Fh=ua.ReactCurrentDispatcher,Gh=ua.ReactCurrentBatchConfig,Hh=0,M$2=null,N$3=null,O$2=null,Ih=!1,Jh=!1,Kh$1=0,Lh=0;function P$2(){throw Error(p$2(321))}function Mh(tr,er){if(er===null)return!1;for(var rr=0;rr<er.length&&rr<tr.length;rr++)if(!He$1(tr[rr],er[rr]))return!1;return!0}function Nh(tr,er,rr,nr,ir,sr){if(Hh=sr,M$2=er,er.memoizedState=null,er.updateQueue=null,er.lanes=0,Fh.current=tr===null||tr.memoizedState===null?Oh:Ph,tr=rr(nr,ir),Jh){sr=0;do{if(Jh=!1,Kh$1=0,25<=sr)throw Error(p$2(301));sr+=1,O$2=N$3=null,er.updateQueue=null,Fh.current=Qh,tr=rr(nr,ir)}while(Jh)}if(Fh.current=Rh,er=N$3!==null&&N$3.next!==null,Hh=0,O$2=N$3=M$2=null,Ih=!1,er)throw Error(p$2(300));return tr}function Sh(){var tr=Kh$1!==0;return Kh$1=0,tr}function Th(){var tr={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return O$2===null?M$2.memoizedState=O$2=tr:O$2=O$2.next=tr,O$2}function Uh(){if(N$3===null){var tr=M$2.alternate;tr=tr!==null?tr.memoizedState:null}else tr=N$3.next;var er=O$2===null?M$2.memoizedState:O$2.next;if(er!==null)O$2=er,N$3=tr;else{if(tr===null)throw Error(p$2(310));N$3=tr,tr={memoizedState:N$3.memoizedState,baseState:N$3.baseState,baseQueue:N$3.baseQueue,queue:N$3.queue,next:null},O$2===null?M$2.memoizedState=O$2=tr:O$2=O$2.next=tr}return O$2}function Vh(tr,er){return typeof er=="function"?er(tr):er}function Wh(tr){var er=Uh(),rr=er.queue;if(rr===null)throw Error(p$2(311));rr.lastRenderedReducer=tr;var nr=N$3,ir=nr.baseQueue,sr=rr.pending;if(sr!==null){if(ir!==null){var or=ir.next;ir.next=sr.next,sr.next=or}nr.baseQueue=ir=sr,rr.pending=null}if(ir!==null){sr=ir.next,nr=nr.baseState;var ar=or=null,cr=null,lr=sr;do{var ur=lr.lane;if((Hh&ur)===ur)cr!==null&&(cr=cr.next={lane:0,action:lr.action,hasEagerState:lr.hasEagerState,eagerState:lr.eagerState,next:null}),nr=lr.hasEagerState?lr.eagerState:tr(nr,lr.action);else{var dr={lane:ur,action:lr.action,hasEagerState:lr.hasEagerState,eagerState:lr.eagerState,next:null};cr===null?(ar=cr=dr,or=nr):cr=cr.next=dr,M$2.lanes|=ur,rh$1|=ur}lr=lr.next}while(lr!==null&&lr!==sr);cr===null?or=nr:cr.next=ar,He$1(nr,er.memoizedState)||(dh=!0),er.memoizedState=nr,er.baseState=or,er.baseQueue=cr,rr.lastRenderedState=nr}if(tr=rr.interleaved,tr!==null){ir=tr;do sr=ir.lane,M$2.lanes|=sr,rh$1|=sr,ir=ir.next;while(ir!==tr)}else ir===null&&(rr.lanes=0);return[er.memoizedState,rr.dispatch]}function Xh(tr){var er=Uh(),rr=er.queue;if(rr===null)throw Error(p$2(311));rr.lastRenderedReducer=tr;var nr=rr.dispatch,ir=rr.pending,sr=er.memoizedState;if(ir!==null){rr.pending=null;var or=ir=ir.next;do sr=tr(sr,or.action),or=or.next;while(or!==ir);He$1(sr,er.memoizedState)||(dh=!0),er.memoizedState=sr,er.baseQueue===null&&(er.baseState=sr),rr.lastRenderedState=sr}return[sr,nr]}function Yh(){}function Zh(tr,er){var rr=M$2,nr=Uh(),ir=er(),sr=!He$1(nr.memoizedState,ir);if(sr&&(nr.memoizedState=ir,dh=!0),nr=nr.queue,$h(ai.bind(null,rr,nr,tr),[tr]),nr.getSnapshot!==er||sr||O$2!==null&&O$2.memoizedState.tag&1){if(rr.flags|=2048,bi(9,ci.bind(null,rr,nr,ir,er),void 0,null),Q$1===null)throw Error(p$2(349));Hh&30||di(rr,er,ir)}return ir}function di(tr,er,rr){tr.flags|=16384,tr={getSnapshot:er,value:rr},er=M$2.updateQueue,er===null?(er={lastEffect:null,stores:null},M$2.updateQueue=er,er.stores=[tr]):(rr=er.stores,rr===null?er.stores=[tr]:rr.push(tr))}function ci(tr,er,rr,nr){er.value=rr,er.getSnapshot=nr,ei(er)&&fi(tr)}function ai(tr,er,rr){return rr(function(){ei(er)&&fi(tr)})}function ei(tr){var er=tr.getSnapshot;tr=tr.value;try{var rr=er();return!He$1(tr,rr)}catch{return!0}}function fi(tr){var er=ih(tr,1);er!==null&&gi(er,tr,1,-1)}function hi(tr){var er=Th();return typeof tr=="function"&&(tr=tr()),er.memoizedState=er.baseState=tr,tr={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Vh,lastRenderedState:tr},er.queue=tr,tr=tr.dispatch=ii.bind(null,M$2,tr),[er.memoizedState,tr]}function bi(tr,er,rr,nr){return tr={tag:tr,create:er,destroy:rr,deps:nr,next:null},er=M$2.updateQueue,er===null?(er={lastEffect:null,stores:null},M$2.updateQueue=er,er.lastEffect=tr.next=tr):(rr=er.lastEffect,rr===null?er.lastEffect=tr.next=tr:(nr=rr.next,rr.next=tr,tr.next=nr,er.lastEffect=tr)),tr}function ji(){return Uh().memoizedState}function ki(tr,er,rr,nr){var ir=Th();M$2.flags|=tr,ir.memoizedState=bi(1|er,rr,void 0,nr===void 0?null:nr)}function li(tr,er,rr,nr){var ir=Uh();nr=nr===void 0?null:nr;var sr=void 0;if(N$3!==null){var or=N$3.memoizedState;if(sr=or.destroy,nr!==null&&Mh(nr,or.deps)){ir.memoizedState=bi(er,rr,sr,nr);return}}M$2.flags|=tr,ir.memoizedState=bi(1|er,rr,sr,nr)}function mi(tr,er){return ki(8390656,8,tr,er)}function $h(tr,er){return li(2048,8,tr,er)}function ni(tr,er){return li(4,2,tr,er)}function oi(tr,er){return li(4,4,tr,er)}function pi(tr,er){if(typeof er=="function")return tr=tr(),er(tr),function(){er(null)};if(er!=null)return tr=tr(),er.current=tr,function(){er.current=null}}function qi(tr,er,rr){return rr=rr!=null?rr.concat([tr]):null,li(4,4,pi.bind(null,er,tr),rr)}function ri(){}function si(tr,er){var rr=Uh();er=er===void 0?null:er;var nr=rr.memoizedState;return nr!==null&&er!==null&&Mh(er,nr[1])?nr[0]:(rr.memoizedState=[tr,er],tr)}function ti(tr,er){var rr=Uh();er=er===void 0?null:er;var nr=rr.memoizedState;return nr!==null&&er!==null&&Mh(er,nr[1])?nr[0]:(tr=tr(),rr.memoizedState=[tr,er],tr)}function ui(tr,er,rr){return Hh&21?(He$1(rr,er)||(rr=yc(),M$2.lanes|=rr,rh$1|=rr,tr.baseState=!0),er):(tr.baseState&&(tr.baseState=!1,dh=!0),tr.memoizedState=rr)}function vi(tr,er){var rr=C$2;C$2=rr!==0&&4>rr?rr:4,tr(!0);var nr=Gh.transition;Gh.transition={};try{tr(!1),er()}finally{C$2=rr,Gh.transition=nr}}function wi(){return Uh().memoizedState}function xi(tr,er,rr){var nr=yi(tr);if(rr={lane:nr,action:rr,hasEagerState:!1,eagerState:null,next:null},zi(tr))Ai(er,rr);else if(rr=hh(tr,er,rr,nr),rr!==null){var ir=R$1();gi(rr,tr,nr,ir),Bi(rr,er,nr)}}function ii(tr,er,rr){var nr=yi(tr),ir={lane:nr,action:rr,hasEagerState:!1,eagerState:null,next:null};if(zi(tr))Ai(er,ir);else{var sr=tr.alternate;if(tr.lanes===0&&(sr===null||sr.lanes===0)&&(sr=er.lastRenderedReducer,sr!==null))try{var or=er.lastRenderedState,ar=sr(or,rr);if(ir.hasEagerState=!0,ir.eagerState=ar,He$1(ar,or)){var cr=er.interleaved;cr===null?(ir.next=ir,gh(er)):(ir.next=cr.next,cr.next=ir),er.interleaved=ir;return}}catch{}finally{}rr=hh(tr,er,ir,nr),rr!==null&&(ir=R$1(),gi(rr,tr,nr,ir),Bi(rr,er,nr))}}function zi(tr){var er=tr.alternate;return tr===M$2||er!==null&&er===M$2}function Ai(tr,er){Jh=Ih=!0;var rr=tr.pending;rr===null?er.next=er:(er.next=rr.next,rr.next=er),tr.pending=er}function Bi(tr,er,rr){if(rr&4194240){var nr=er.lanes;nr&=tr.pendingLanes,rr|=nr,er.lanes=rr,Cc(tr,rr)}}var Rh={readContext:eh,useCallback:P$2,useContext:P$2,useEffect:P$2,useImperativeHandle:P$2,useInsertionEffect:P$2,useLayoutEffect:P$2,useMemo:P$2,useReducer:P$2,useRef:P$2,useState:P$2,useDebugValue:P$2,useDeferredValue:P$2,useTransition:P$2,useMutableSource:P$2,useSyncExternalStore:P$2,useId:P$2,unstable_isNewReconciler:!1},Oh={readContext:eh,useCallback:function(tr,er){return Th().memoizedState=[tr,er===void 0?null:er],tr},useContext:eh,useEffect:mi,useImperativeHandle:function(tr,er,rr){return rr=rr!=null?rr.concat([tr]):null,ki(4194308,4,pi.bind(null,er,tr),rr)},useLayoutEffect:function(tr,er){return ki(4194308,4,tr,er)},useInsertionEffect:function(tr,er){return ki(4,2,tr,er)},useMemo:function(tr,er){var rr=Th();return er=er===void 0?null:er,tr=tr(),rr.memoizedState=[tr,er],tr},useReducer:function(tr,er,rr){var nr=Th();return er=rr!==void 0?rr(er):er,nr.memoizedState=nr.baseState=er,tr={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:tr,lastRenderedState:er},nr.queue=tr,tr=tr.dispatch=xi.bind(null,M$2,tr),[nr.memoizedState,tr]},useRef:function(tr){var er=Th();return tr={current:tr},er.memoizedState=tr},useState:hi,useDebugValue:ri,useDeferredValue:function(tr){return Th().memoizedState=tr},useTransition:function(){var tr=hi(!1),er=tr[0];return tr=vi.bind(null,tr[1]),Th().memoizedState=tr,[er,tr]},useMutableSource:function(){},useSyncExternalStore:function(tr,er,rr){var nr=M$2,ir=Th();if(I$1){if(rr===void 0)throw Error(p$2(407));rr=rr()}else{if(rr=er(),Q$1===null)throw Error(p$2(349));Hh&30||di(nr,er,rr)}ir.memoizedState=rr;var sr={value:rr,getSnapshot:er};return ir.queue=sr,mi(ai.bind(null,nr,sr,tr),[tr]),nr.flags|=2048,bi(9,ci.bind(null,nr,sr,rr,er),void 0,null),rr},useId:function(){var tr=Th(),er=Q$1.identifierPrefix;if(I$1){var rr=sg,nr=rg;rr=(nr&~(1<<32-oc(nr)-1)).toString(32)+rr,er=":"+er+"R"+rr,rr=Kh$1++,0<rr&&(er+="H"+rr.toString(32)),er+=":"}else rr=Lh++,er=":"+er+"r"+rr.toString(32)+":";return tr.memoizedState=er},unstable_isNewReconciler:!1},Ph={readContext:eh,useCallback:si,useContext:eh,useEffect:$h,useImperativeHandle:qi,useInsertionEffect:ni,useLayoutEffect:oi,useMemo:ti,useReducer:Wh,useRef:ji,useState:function(){return Wh(Vh)},useDebugValue:ri,useDeferredValue:function(tr){var er=Uh();return ui(er,N$3.memoizedState,tr)},useTransition:function(){var tr=Wh(Vh)[0],er=Uh().memoizedState;return[tr,er]},useMutableSource:Yh,useSyncExternalStore:Zh,useId:wi,unstable_isNewReconciler:!1},Qh={readContext:eh,useCallback:si,useContext:eh,useEffect:$h,useImperativeHandle:qi,useInsertionEffect:ni,useLayoutEffect:oi,useMemo:ti,useReducer:Xh,useRef:ji,useState:function(){return Xh(Vh)},useDebugValue:ri,useDeferredValue:function(tr){var er=Uh();return N$3===null?er.memoizedState=tr:ui(er,N$3.memoizedState,tr)},useTransition:function(){var tr=Xh(Vh)[0],er=Uh().memoizedState;return[tr,er]},useMutableSource:Yh,useSyncExternalStore:Zh,useId:wi,unstable_isNewReconciler:!1};function Ci(tr,er){if(tr&&tr.defaultProps){er=A$2({},er),tr=tr.defaultProps;for(var rr in tr)er[rr]===void 0&&(er[rr]=tr[rr]);return er}return er}function Di(tr,er,rr,nr){er=tr.memoizedState,rr=rr(nr,er),rr=rr==null?er:A$2({},er,rr),tr.memoizedState=rr,tr.lanes===0&&(tr.updateQueue.baseState=rr)}var Ei={isMounted:function(tr){return(tr=tr._reactInternals)?Vb(tr)===tr:!1},enqueueSetState:function(tr,er,rr){tr=tr._reactInternals;var nr=R$1(),ir=yi(tr),sr=mh(nr,ir);sr.payload=er,rr!=null&&(sr.callback=rr),er=nh(tr,sr,ir),er!==null&&(gi(er,tr,ir,nr),oh(er,tr,ir))},enqueueReplaceState:function(tr,er,rr){tr=tr._reactInternals;var nr=R$1(),ir=yi(tr),sr=mh(nr,ir);sr.tag=1,sr.payload=er,rr!=null&&(sr.callback=rr),er=nh(tr,sr,ir),er!==null&&(gi(er,tr,ir,nr),oh(er,tr,ir))},enqueueForceUpdate:function(tr,er){tr=tr._reactInternals;var rr=R$1(),nr=yi(tr),ir=mh(rr,nr);ir.tag=2,er!=null&&(ir.callback=er),er=nh(tr,ir,nr),er!==null&&(gi(er,tr,nr,rr),oh(er,tr,nr))}};function Fi(tr,er,rr,nr,ir,sr,or){return tr=tr.stateNode,typeof tr.shouldComponentUpdate=="function"?tr.shouldComponentUpdate(nr,sr,or):er.prototype&&er.prototype.isPureReactComponent?!Ie$1(rr,nr)||!Ie$1(ir,sr):!0}function Gi(tr,er,rr){var nr=!1,ir=Vf,sr=er.contextType;return typeof sr=="object"&&sr!==null?sr=eh(sr):(ir=Zf(er)?Xf:H$1.current,nr=er.contextTypes,sr=(nr=nr!=null)?Yf(tr,ir):Vf),er=new er(rr,sr),tr.memoizedState=er.state!==null&&er.state!==void 0?er.state:null,er.updater=Ei,tr.stateNode=er,er._reactInternals=tr,nr&&(tr=tr.stateNode,tr.__reactInternalMemoizedUnmaskedChildContext=ir,tr.__reactInternalMemoizedMaskedChildContext=sr),er}function Hi(tr,er,rr,nr){tr=er.state,typeof er.componentWillReceiveProps=="function"&&er.componentWillReceiveProps(rr,nr),typeof er.UNSAFE_componentWillReceiveProps=="function"&&er.UNSAFE_componentWillReceiveProps(rr,nr),er.state!==tr&&Ei.enqueueReplaceState(er,er.state,null)}function Ii(tr,er,rr,nr){var ir=tr.stateNode;ir.props=rr,ir.state=tr.memoizedState,ir.refs={},kh(tr);var sr=er.contextType;typeof sr=="object"&&sr!==null?ir.context=eh(sr):(sr=Zf(er)?Xf:H$1.current,ir.context=Yf(tr,sr)),ir.state=tr.memoizedState,sr=er.getDerivedStateFromProps,typeof sr=="function"&&(Di(tr,er,sr,rr),ir.state=tr.memoizedState),typeof er.getDerivedStateFromProps=="function"||typeof ir.getSnapshotBeforeUpdate=="function"||typeof ir.UNSAFE_componentWillMount!="function"&&typeof ir.componentWillMount!="function"||(er=ir.state,typeof ir.componentWillMount=="function"&&ir.componentWillMount(),typeof ir.UNSAFE_componentWillMount=="function"&&ir.UNSAFE_componentWillMount(),er!==ir.state&&Ei.enqueueReplaceState(ir,ir.state,null),qh(tr,rr,ir,nr),ir.state=tr.memoizedState),typeof ir.componentDidMount=="function"&&(tr.flags|=4194308)}function Ji(tr,er){try{var rr="",nr=er;do rr+=Pa(nr),nr=nr.return;while(nr);var ir=rr}catch(sr){ir=`
Error generating stack: `+sr.message+`
`+sr.stack}return{value:tr,source:er,stack:ir,digest:null}}function Ki(tr,er,rr){return{value:tr,source:null,stack:rr??null,digest:er??null}}function Li(tr,er){try{console.error(er.value)}catch(rr){setTimeout(function(){throw rr})}}var Mi=typeof WeakMap=="function"?WeakMap:Map;function Ni(tr,er,rr){rr=mh(-1,rr),rr.tag=3,rr.payload={element:null};var nr=er.value;return rr.callback=function(){Oi||(Oi=!0,Pi$1=nr),Li(tr,er)},rr}function Qi(tr,er,rr){rr=mh(-1,rr),rr.tag=3;var nr=tr.type.getDerivedStateFromError;if(typeof nr=="function"){var ir=er.value;rr.payload=function(){return nr(ir)},rr.callback=function(){Li(tr,er)}}var sr=tr.stateNode;return sr!==null&&typeof sr.componentDidCatch=="function"&&(rr.callback=function(){Li(tr,er),typeof nr!="function"&&(Ri===null?Ri=new Set([this]):Ri.add(this));var or=er.stack;this.componentDidCatch(er.value,{componentStack:or!==null?or:""})}),rr}function Si$1(tr,er,rr){var nr=tr.pingCache;if(nr===null){nr=tr.pingCache=new Mi;var ir=new Set;nr.set(er,ir)}else ir=nr.get(er),ir===void 0&&(ir=new Set,nr.set(er,ir));ir.has(rr)||(ir.add(rr),tr=Ti.bind(null,tr,er,rr),er.then(tr,tr))}function Ui(tr){do{var er;if((er=tr.tag===13)&&(er=tr.memoizedState,er=er!==null?er.dehydrated!==null:!0),er)return tr;tr=tr.return}while(tr!==null);return null}function Vi(tr,er,rr,nr,ir){return tr.mode&1?(tr.flags|=65536,tr.lanes=ir,tr):(tr===er?tr.flags|=65536:(tr.flags|=128,rr.flags|=131072,rr.flags&=-52805,rr.tag===1&&(rr.alternate===null?rr.tag=17:(er=mh(-1,1),er.tag=2,nh(rr,er,1))),rr.lanes|=1),tr)}var Wi=ua.ReactCurrentOwner,dh=!1;function Xi(tr,er,rr,nr){er.child=tr===null?Vg(er,null,rr,nr):Ug(er,tr.child,rr,nr)}function Yi(tr,er,rr,nr,ir){rr=rr.render;var sr=er.ref;return ch$1(er,ir),nr=Nh(tr,er,rr,nr,sr,ir),rr=Sh(),tr!==null&&!dh?(er.updateQueue=tr.updateQueue,er.flags&=-2053,tr.lanes&=~ir,Zi(tr,er,ir)):(I$1&&rr&&vg(er),er.flags|=1,Xi(tr,er,nr,ir),er.child)}function $i(tr,er,rr,nr,ir){if(tr===null){var sr=rr.type;return typeof sr=="function"&&!aj(sr)&&sr.defaultProps===void 0&&rr.compare===null&&rr.defaultProps===void 0?(er.tag=15,er.type=sr,bj(tr,er,sr,nr,ir)):(tr=Rg(rr.type,null,nr,er,er.mode,ir),tr.ref=er.ref,tr.return=er,er.child=tr)}if(sr=tr.child,!(tr.lanes&ir)){var or=sr.memoizedProps;if(rr=rr.compare,rr=rr!==null?rr:Ie$1,rr(or,nr)&&tr.ref===er.ref)return Zi(tr,er,ir)}return er.flags|=1,tr=Pg(sr,nr),tr.ref=er.ref,tr.return=er,er.child=tr}function bj(tr,er,rr,nr,ir){if(tr!==null){var sr=tr.memoizedProps;if(Ie$1(sr,nr)&&tr.ref===er.ref)if(dh=!1,er.pendingProps=nr=sr,(tr.lanes&ir)!==0)tr.flags&131072&&(dh=!0);else return er.lanes=tr.lanes,Zi(tr,er,ir)}return cj(tr,er,rr,nr,ir)}function dj(tr,er,rr){var nr=er.pendingProps,ir=nr.children,sr=tr!==null?tr.memoizedState:null;if(nr.mode==="hidden")if(!(er.mode&1))er.memoizedState={baseLanes:0,cachePool:null,transitions:null},G$2(ej,fj),fj|=rr;else{if(!(rr&1073741824))return tr=sr!==null?sr.baseLanes|rr:rr,er.lanes=er.childLanes=1073741824,er.memoizedState={baseLanes:tr,cachePool:null,transitions:null},er.updateQueue=null,G$2(ej,fj),fj|=tr,null;er.memoizedState={baseLanes:0,cachePool:null,transitions:null},nr=sr!==null?sr.baseLanes:rr,G$2(ej,fj),fj|=nr}else sr!==null?(nr=sr.baseLanes|rr,er.memoizedState=null):nr=rr,G$2(ej,fj),fj|=nr;return Xi(tr,er,ir,rr),er.child}function gj(tr,er){var rr=er.ref;(tr===null&&rr!==null||tr!==null&&tr.ref!==rr)&&(er.flags|=512,er.flags|=2097152)}function cj(tr,er,rr,nr,ir){var sr=Zf(rr)?Xf:H$1.current;return sr=Yf(er,sr),ch$1(er,ir),rr=Nh(tr,er,rr,nr,sr,ir),nr=Sh(),tr!==null&&!dh?(er.updateQueue=tr.updateQueue,er.flags&=-2053,tr.lanes&=~ir,Zi(tr,er,ir)):(I$1&&nr&&vg(er),er.flags|=1,Xi(tr,er,rr,ir),er.child)}function hj(tr,er,rr,nr,ir){if(Zf(rr)){var sr=!0;cg(er)}else sr=!1;if(ch$1(er,ir),er.stateNode===null)ij(tr,er),Gi(er,rr,nr),Ii(er,rr,nr,ir),nr=!0;else if(tr===null){var or=er.stateNode,ar=er.memoizedProps;or.props=ar;var cr=or.context,lr=rr.contextType;typeof lr=="object"&&lr!==null?lr=eh(lr):(lr=Zf(rr)?Xf:H$1.current,lr=Yf(er,lr));var ur=rr.getDerivedStateFromProps,dr=typeof ur=="function"||typeof or.getSnapshotBeforeUpdate=="function";dr||typeof or.UNSAFE_componentWillReceiveProps!="function"&&typeof or.componentWillReceiveProps!="function"||(ar!==nr||cr!==lr)&&Hi(er,or,nr,lr),jh=!1;var yr=er.memoizedState;or.state=yr,qh(er,nr,or,ir),cr=er.memoizedState,ar!==nr||yr!==cr||Wf.current||jh?(typeof ur=="function"&&(Di(er,rr,ur,nr),cr=er.memoizedState),(ar=jh||Fi(er,rr,ar,nr,yr,cr,lr))?(dr||typeof or.UNSAFE_componentWillMount!="function"&&typeof or.componentWillMount!="function"||(typeof or.componentWillMount=="function"&&or.componentWillMount(),typeof or.UNSAFE_componentWillMount=="function"&&or.UNSAFE_componentWillMount()),typeof or.componentDidMount=="function"&&(er.flags|=4194308)):(typeof or.componentDidMount=="function"&&(er.flags|=4194308),er.memoizedProps=nr,er.memoizedState=cr),or.props=nr,or.state=cr,or.context=lr,nr=ar):(typeof or.componentDidMount=="function"&&(er.flags|=4194308),nr=!1)}else{or=er.stateNode,lh(tr,er),ar=er.memoizedProps,lr=er.type===er.elementType?ar:Ci(er.type,ar),or.props=lr,dr=er.pendingProps,yr=or.context,cr=rr.contextType,typeof cr=="object"&&cr!==null?cr=eh(cr):(cr=Zf(rr)?Xf:H$1.current,cr=Yf(er,cr));var mr=rr.getDerivedStateFromProps;(ur=typeof mr=="function"||typeof or.getSnapshotBeforeUpdate=="function")||typeof or.UNSAFE_componentWillReceiveProps!="function"&&typeof or.componentWillReceiveProps!="function"||(ar!==dr||yr!==cr)&&Hi(er,or,nr,cr),jh=!1,yr=er.memoizedState,or.state=yr,qh(er,nr,or,ir);var wr=er.memoizedState;ar!==dr||yr!==wr||Wf.current||jh?(typeof mr=="function"&&(Di(er,rr,mr,nr),wr=er.memoizedState),(lr=jh||Fi(er,rr,lr,nr,yr,wr,cr)||!1)?(ur||typeof or.UNSAFE_componentWillUpdate!="function"&&typeof or.componentWillUpdate!="function"||(typeof or.componentWillUpdate=="function"&&or.componentWillUpdate(nr,wr,cr),typeof or.UNSAFE_componentWillUpdate=="function"&&or.UNSAFE_componentWillUpdate(nr,wr,cr)),typeof or.componentDidUpdate=="function"&&(er.flags|=4),typeof or.getSnapshotBeforeUpdate=="function"&&(er.flags|=1024)):(typeof or.componentDidUpdate!="function"||ar===tr.memoizedProps&&yr===tr.memoizedState||(er.flags|=4),typeof or.getSnapshotBeforeUpdate!="function"||ar===tr.memoizedProps&&yr===tr.memoizedState||(er.flags|=1024),er.memoizedProps=nr,er.memoizedState=wr),or.props=nr,or.state=wr,or.context=cr,nr=lr):(typeof or.componentDidUpdate!="function"||ar===tr.memoizedProps&&yr===tr.memoizedState||(er.flags|=4),typeof or.getSnapshotBeforeUpdate!="function"||ar===tr.memoizedProps&&yr===tr.memoizedState||(er.flags|=1024),nr=!1)}return jj(tr,er,rr,nr,sr,ir)}function jj(tr,er,rr,nr,ir,sr){gj(tr,er);var or=(er.flags&128)!==0;if(!nr&&!or)return ir&&dg(er,rr,!1),Zi(tr,er,sr);nr=er.stateNode,Wi.current=er;var ar=or&&typeof rr.getDerivedStateFromError!="function"?null:nr.render();return er.flags|=1,tr!==null&&or?(er.child=Ug(er,tr.child,null,sr),er.child=Ug(er,null,ar,sr)):Xi(tr,er,ar,sr),er.memoizedState=nr.state,ir&&dg(er,rr,!0),er.child}function kj(tr){var er=tr.stateNode;er.pendingContext?ag(tr,er.pendingContext,er.pendingContext!==er.context):er.context&&ag(tr,er.context,!1),yh(tr,er.containerInfo)}function lj(tr,er,rr,nr,ir){return Ig(),Jg(ir),er.flags|=256,Xi(tr,er,rr,nr),er.child}var mj={dehydrated:null,treeContext:null,retryLane:0};function nj(tr){return{baseLanes:tr,cachePool:null,transitions:null}}function oj(tr,er,rr){var nr=er.pendingProps,ir=L$2.current,sr=!1,or=(er.flags&128)!==0,ar;if((ar=or)||(ar=tr!==null&&tr.memoizedState===null?!1:(ir&2)!==0),ar?(sr=!0,er.flags&=-129):(tr===null||tr.memoizedState!==null)&&(ir|=1),G$2(L$2,ir&1),tr===null)return Eg(er),tr=er.memoizedState,tr!==null&&(tr=tr.dehydrated,tr!==null)?(er.mode&1?tr.data==="$!"?er.lanes=8:er.lanes=1073741824:er.lanes=1,null):(or=nr.children,tr=nr.fallback,sr?(nr=er.mode,sr=er.child,or={mode:"hidden",children:or},!(nr&1)&&sr!==null?(sr.childLanes=0,sr.pendingProps=or):sr=pj(or,nr,0,null),tr=Tg(tr,nr,rr,null),sr.return=er,tr.return=er,sr.sibling=tr,er.child=sr,er.child.memoizedState=nj(rr),er.memoizedState=mj,tr):qj(er,or));if(ir=tr.memoizedState,ir!==null&&(ar=ir.dehydrated,ar!==null))return rj(tr,er,or,nr,ar,ir,rr);if(sr){sr=nr.fallback,or=er.mode,ir=tr.child,ar=ir.sibling;var cr={mode:"hidden",children:nr.children};return!(or&1)&&er.child!==ir?(nr=er.child,nr.childLanes=0,nr.pendingProps=cr,er.deletions=null):(nr=Pg(ir,cr),nr.subtreeFlags=ir.subtreeFlags&14680064),ar!==null?sr=Pg(ar,sr):(sr=Tg(sr,or,rr,null),sr.flags|=2),sr.return=er,nr.return=er,nr.sibling=sr,er.child=nr,nr=sr,sr=er.child,or=tr.child.memoizedState,or=or===null?nj(rr):{baseLanes:or.baseLanes|rr,cachePool:null,transitions:or.transitions},sr.memoizedState=or,sr.childLanes=tr.childLanes&~rr,er.memoizedState=mj,nr}return sr=tr.child,tr=sr.sibling,nr=Pg(sr,{mode:"visible",children:nr.children}),!(er.mode&1)&&(nr.lanes=rr),nr.return=er,nr.sibling=null,tr!==null&&(rr=er.deletions,rr===null?(er.deletions=[tr],er.flags|=16):rr.push(tr)),er.child=nr,er.memoizedState=null,nr}function qj(tr,er){return er=pj({mode:"visible",children:er},tr.mode,0,null),er.return=tr,tr.child=er}function sj(tr,er,rr,nr){return nr!==null&&Jg(nr),Ug(er,tr.child,null,rr),tr=qj(er,er.pendingProps.children),tr.flags|=2,er.memoizedState=null,tr}function rj(tr,er,rr,nr,ir,sr,or){if(rr)return er.flags&256?(er.flags&=-257,nr=Ki(Error(p$2(422))),sj(tr,er,or,nr)):er.memoizedState!==null?(er.child=tr.child,er.flags|=128,null):(sr=nr.fallback,ir=er.mode,nr=pj({mode:"visible",children:nr.children},ir,0,null),sr=Tg(sr,ir,or,null),sr.flags|=2,nr.return=er,sr.return=er,nr.sibling=sr,er.child=nr,er.mode&1&&Ug(er,tr.child,null,or),er.child.memoizedState=nj(or),er.memoizedState=mj,sr);if(!(er.mode&1))return sj(tr,er,or,null);if(ir.data==="$!"){if(nr=ir.nextSibling&&ir.nextSibling.dataset,nr)var ar=nr.dgst;return nr=ar,sr=Error(p$2(419)),nr=Ki(sr,nr,void 0),sj(tr,er,or,nr)}if(ar=(or&tr.childLanes)!==0,dh||ar){if(nr=Q$1,nr!==null){switch(or&-or){case 4:ir=2;break;case 16:ir=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:ir=32;break;case 536870912:ir=268435456;break;default:ir=0}ir=ir&(nr.suspendedLanes|or)?0:ir,ir!==0&&ir!==sr.retryLane&&(sr.retryLane=ir,ih(tr,ir),gi(nr,tr,ir,-1))}return tj(),nr=Ki(Error(p$2(421))),sj(tr,er,or,nr)}return ir.data==="$?"?(er.flags|=128,er.child=tr.child,er=uj.bind(null,tr),ir._reactRetry=er,null):(tr=sr.treeContext,yg=Lf(ir.nextSibling),xg=er,I$1=!0,zg=null,tr!==null&&(og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,rg=tr.id,sg=tr.overflow,qg=er),er=qj(er,nr.children),er.flags|=4096,er)}function vj(tr,er,rr){tr.lanes|=er;var nr=tr.alternate;nr!==null&&(nr.lanes|=er),bh(tr.return,er,rr)}function wj(tr,er,rr,nr,ir){var sr=tr.memoizedState;sr===null?tr.memoizedState={isBackwards:er,rendering:null,renderingStartTime:0,last:nr,tail:rr,tailMode:ir}:(sr.isBackwards=er,sr.rendering=null,sr.renderingStartTime=0,sr.last=nr,sr.tail=rr,sr.tailMode=ir)}function xj(tr,er,rr){var nr=er.pendingProps,ir=nr.revealOrder,sr=nr.tail;if(Xi(tr,er,nr.children,rr),nr=L$2.current,nr&2)nr=nr&1|2,er.flags|=128;else{if(tr!==null&&tr.flags&128)e:for(tr=er.child;tr!==null;){if(tr.tag===13)tr.memoizedState!==null&&vj(tr,rr,er);else if(tr.tag===19)vj(tr,rr,er);else if(tr.child!==null){tr.child.return=tr,tr=tr.child;continue}if(tr===er)break e;for(;tr.sibling===null;){if(tr.return===null||tr.return===er)break e;tr=tr.return}tr.sibling.return=tr.return,tr=tr.sibling}nr&=1}if(G$2(L$2,nr),!(er.mode&1))er.memoizedState=null;else switch(ir){case"forwards":for(rr=er.child,ir=null;rr!==null;)tr=rr.alternate,tr!==null&&Ch$1(tr)===null&&(ir=rr),rr=rr.sibling;rr=ir,rr===null?(ir=er.child,er.child=null):(ir=rr.sibling,rr.sibling=null),wj(er,!1,ir,rr,sr);break;case"backwards":for(rr=null,ir=er.child,er.child=null;ir!==null;){if(tr=ir.alternate,tr!==null&&Ch$1(tr)===null){er.child=ir;break}tr=ir.sibling,ir.sibling=rr,rr=ir,ir=tr}wj(er,!0,rr,null,sr);break;case"together":wj(er,!1,null,null,void 0);break;default:er.memoizedState=null}return er.child}function ij(tr,er){!(er.mode&1)&&tr!==null&&(tr.alternate=null,er.alternate=null,er.flags|=2)}function Zi(tr,er,rr){if(tr!==null&&(er.dependencies=tr.dependencies),rh$1|=er.lanes,!(rr&er.childLanes))return null;if(tr!==null&&er.child!==tr.child)throw Error(p$2(153));if(er.child!==null){for(tr=er.child,rr=Pg(tr,tr.pendingProps),er.child=rr,rr.return=er;tr.sibling!==null;)tr=tr.sibling,rr=rr.sibling=Pg(tr,tr.pendingProps),rr.return=er;rr.sibling=null}return er.child}function yj(tr,er,rr){switch(er.tag){case 3:kj(er),Ig();break;case 5:Ah(er);break;case 1:Zf(er.type)&&cg(er);break;case 4:yh(er,er.stateNode.containerInfo);break;case 10:var nr=er.type._context,ir=er.memoizedProps.value;G$2(Wg,nr._currentValue),nr._currentValue=ir;break;case 13:if(nr=er.memoizedState,nr!==null)return nr.dehydrated!==null?(G$2(L$2,L$2.current&1),er.flags|=128,null):rr&er.child.childLanes?oj(tr,er,rr):(G$2(L$2,L$2.current&1),tr=Zi(tr,er,rr),tr!==null?tr.sibling:null);G$2(L$2,L$2.current&1);break;case 19:if(nr=(rr&er.childLanes)!==0,tr.flags&128){if(nr)return xj(tr,er,rr);er.flags|=128}if(ir=er.memoizedState,ir!==null&&(ir.rendering=null,ir.tail=null,ir.lastEffect=null),G$2(L$2,L$2.current),nr)break;return null;case 22:case 23:return er.lanes=0,dj(tr,er,rr)}return Zi(tr,er,rr)}var zj,Aj,Bj,Cj;zj=function(tr,er){for(var rr=er.child;rr!==null;){if(rr.tag===5||rr.tag===6)tr.appendChild(rr.stateNode);else if(rr.tag!==4&&rr.child!==null){rr.child.return=rr,rr=rr.child;continue}if(rr===er)break;for(;rr.sibling===null;){if(rr.return===null||rr.return===er)return;rr=rr.return}rr.sibling.return=rr.return,rr=rr.sibling}};Aj=function(){};Bj=function(tr,er,rr,nr){var ir=tr.memoizedProps;if(ir!==nr){tr=er.stateNode,xh(uh.current);var sr=null;switch(rr){case"input":ir=Ya(tr,ir),nr=Ya(tr,nr),sr=[];break;case"select":ir=A$2({},ir,{value:void 0}),nr=A$2({},nr,{value:void 0}),sr=[];break;case"textarea":ir=gb(tr,ir),nr=gb(tr,nr),sr=[];break;default:typeof ir.onClick!="function"&&typeof nr.onClick=="function"&&(tr.onclick=Bf)}ub(rr,nr);var or;rr=null;for(lr in ir)if(!nr.hasOwnProperty(lr)&&ir.hasOwnProperty(lr)&&ir[lr]!=null)if(lr==="style"){var ar=ir[lr];for(or in ar)ar.hasOwnProperty(or)&&(rr||(rr={}),rr[or]="")}else lr!=="dangerouslySetInnerHTML"&&lr!=="children"&&lr!=="suppressContentEditableWarning"&&lr!=="suppressHydrationWarning"&&lr!=="autoFocus"&&(ea.hasOwnProperty(lr)?sr||(sr=[]):(sr=sr||[]).push(lr,null));for(lr in nr){var cr=nr[lr];if(ar=ir!=null?ir[lr]:void 0,nr.hasOwnProperty(lr)&&cr!==ar&&(cr!=null||ar!=null))if(lr==="style")if(ar){for(or in ar)!ar.hasOwnProperty(or)||cr&&cr.hasOwnProperty(or)||(rr||(rr={}),rr[or]="");for(or in cr)cr.hasOwnProperty(or)&&ar[or]!==cr[or]&&(rr||(rr={}),rr[or]=cr[or])}else rr||(sr||(sr=[]),sr.push(lr,rr)),rr=cr;else lr==="dangerouslySetInnerHTML"?(cr=cr?cr.__html:void 0,ar=ar?ar.__html:void 0,cr!=null&&ar!==cr&&(sr=sr||[]).push(lr,cr)):lr==="children"?typeof cr!="string"&&typeof cr!="number"||(sr=sr||[]).push(lr,""+cr):lr!=="suppressContentEditableWarning"&&lr!=="suppressHydrationWarning"&&(ea.hasOwnProperty(lr)?(cr!=null&&lr==="onScroll"&&D$3("scroll",tr),sr||ar===cr||(sr=[])):(sr=sr||[]).push(lr,cr))}rr&&(sr=sr||[]).push("style",rr);var lr=sr;(er.updateQueue=lr)&&(er.flags|=4)}};Cj=function(tr,er,rr,nr){rr!==nr&&(er.flags|=4)};function Dj(tr,er){if(!I$1)switch(tr.tailMode){case"hidden":er=tr.tail;for(var rr=null;er!==null;)er.alternate!==null&&(rr=er),er=er.sibling;rr===null?tr.tail=null:rr.sibling=null;break;case"collapsed":rr=tr.tail;for(var nr=null;rr!==null;)rr.alternate!==null&&(nr=rr),rr=rr.sibling;nr===null?er||tr.tail===null?tr.tail=null:tr.tail.sibling=null:nr.sibling=null}}function S$2(tr){var er=tr.alternate!==null&&tr.alternate.child===tr.child,rr=0,nr=0;if(er)for(var ir=tr.child;ir!==null;)rr|=ir.lanes|ir.childLanes,nr|=ir.subtreeFlags&14680064,nr|=ir.flags&14680064,ir.return=tr,ir=ir.sibling;else for(ir=tr.child;ir!==null;)rr|=ir.lanes|ir.childLanes,nr|=ir.subtreeFlags,nr|=ir.flags,ir.return=tr,ir=ir.sibling;return tr.subtreeFlags|=nr,tr.childLanes=rr,er}function Ej(tr,er,rr){var nr=er.pendingProps;switch(wg(er),er.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return S$2(er),null;case 1:return Zf(er.type)&&$f(),S$2(er),null;case 3:return nr=er.stateNode,zh(),E$2(Wf),E$2(H$1),Eh(),nr.pendingContext&&(nr.context=nr.pendingContext,nr.pendingContext=null),(tr===null||tr.child===null)&&(Gg(er)?er.flags|=4:tr===null||tr.memoizedState.isDehydrated&&!(er.flags&256)||(er.flags|=1024,zg!==null&&(Fj(zg),zg=null))),Aj(tr,er),S$2(er),null;case 5:Bh(er);var ir=xh(wh.current);if(rr=er.type,tr!==null&&er.stateNode!=null)Bj(tr,er,rr,nr,ir),tr.ref!==er.ref&&(er.flags|=512,er.flags|=2097152);else{if(!nr){if(er.stateNode===null)throw Error(p$2(166));return S$2(er),null}if(tr=xh(uh.current),Gg(er)){nr=er.stateNode,rr=er.type;var sr=er.memoizedProps;switch(nr[Of]=er,nr[Pf]=sr,tr=(er.mode&1)!==0,rr){case"dialog":D$3("cancel",nr),D$3("close",nr);break;case"iframe":case"object":case"embed":D$3("load",nr);break;case"video":case"audio":for(ir=0;ir<lf.length;ir++)D$3(lf[ir],nr);break;case"source":D$3("error",nr);break;case"img":case"image":case"link":D$3("error",nr),D$3("load",nr);break;case"details":D$3("toggle",nr);break;case"input":Za(nr,sr),D$3("invalid",nr);break;case"select":nr._wrapperState={wasMultiple:!!sr.multiple},D$3("invalid",nr);break;case"textarea":hb(nr,sr),D$3("invalid",nr)}ub(rr,sr),ir=null;for(var or in sr)if(sr.hasOwnProperty(or)){var ar=sr[or];or==="children"?typeof ar=="string"?nr.textContent!==ar&&(sr.suppressHydrationWarning!==!0&&Af(nr.textContent,ar,tr),ir=["children",ar]):typeof ar=="number"&&nr.textContent!==""+ar&&(sr.suppressHydrationWarning!==!0&&Af(nr.textContent,ar,tr),ir=["children",""+ar]):ea.hasOwnProperty(or)&&ar!=null&&or==="onScroll"&&D$3("scroll",nr)}switch(rr){case"input":Va(nr),db(nr,sr,!0);break;case"textarea":Va(nr),jb(nr);break;case"select":case"option":break;default:typeof sr.onClick=="function"&&(nr.onclick=Bf)}nr=ir,er.updateQueue=nr,nr!==null&&(er.flags|=4)}else{or=ir.nodeType===9?ir:ir.ownerDocument,tr==="http://www.w3.org/1999/xhtml"&&(tr=kb(rr)),tr==="http://www.w3.org/1999/xhtml"?rr==="script"?(tr=or.createElement("div"),tr.innerHTML="<script><\/script>",tr=tr.removeChild(tr.firstChild)):typeof nr.is=="string"?tr=or.createElement(rr,{is:nr.is}):(tr=or.createElement(rr),rr==="select"&&(or=tr,nr.multiple?or.multiple=!0:nr.size&&(or.size=nr.size))):tr=or.createElementNS(tr,rr),tr[Of]=er,tr[Pf]=nr,zj(tr,er,!1,!1),er.stateNode=tr;e:{switch(or=vb(rr,nr),rr){case"dialog":D$3("cancel",tr),D$3("close",tr),ir=nr;break;case"iframe":case"object":case"embed":D$3("load",tr),ir=nr;break;case"video":case"audio":for(ir=0;ir<lf.length;ir++)D$3(lf[ir],tr);ir=nr;break;case"source":D$3("error",tr),ir=nr;break;case"img":case"image":case"link":D$3("error",tr),D$3("load",tr),ir=nr;break;case"details":D$3("toggle",tr),ir=nr;break;case"input":Za(tr,nr),ir=Ya(tr,nr),D$3("invalid",tr);break;case"option":ir=nr;break;case"select":tr._wrapperState={wasMultiple:!!nr.multiple},ir=A$2({},nr,{value:void 0}),D$3("invalid",tr);break;case"textarea":hb(tr,nr),ir=gb(tr,nr),D$3("invalid",tr);break;default:ir=nr}ub(rr,ir),ar=ir;for(sr in ar)if(ar.hasOwnProperty(sr)){var cr=ar[sr];sr==="style"?sb(tr,cr):sr==="dangerouslySetInnerHTML"?(cr=cr?cr.__html:void 0,cr!=null&&nb(tr,cr)):sr==="children"?typeof cr=="string"?(rr!=="textarea"||cr!=="")&&ob(tr,cr):typeof cr=="number"&&ob(tr,""+cr):sr!=="suppressContentEditableWarning"&&sr!=="suppressHydrationWarning"&&sr!=="autoFocus"&&(ea.hasOwnProperty(sr)?cr!=null&&sr==="onScroll"&&D$3("scroll",tr):cr!=null&&ta(tr,sr,cr,or))}switch(rr){case"input":Va(tr),db(tr,nr,!1);break;case"textarea":Va(tr),jb(tr);break;case"option":nr.value!=null&&tr.setAttribute("value",""+Sa(nr.value));break;case"select":tr.multiple=!!nr.multiple,sr=nr.value,sr!=null?fb(tr,!!nr.multiple,sr,!1):nr.defaultValue!=null&&fb(tr,!!nr.multiple,nr.defaultValue,!0);break;default:typeof ir.onClick=="function"&&(tr.onclick=Bf)}switch(rr){case"button":case"input":case"select":case"textarea":nr=!!nr.autoFocus;break e;case"img":nr=!0;break e;default:nr=!1}}nr&&(er.flags|=4)}er.ref!==null&&(er.flags|=512,er.flags|=2097152)}return S$2(er),null;case 6:if(tr&&er.stateNode!=null)Cj(tr,er,tr.memoizedProps,nr);else{if(typeof nr!="string"&&er.stateNode===null)throw Error(p$2(166));if(rr=xh(wh.current),xh(uh.current),Gg(er)){if(nr=er.stateNode,rr=er.memoizedProps,nr[Of]=er,(sr=nr.nodeValue!==rr)&&(tr=xg,tr!==null))switch(tr.tag){case 3:Af(nr.nodeValue,rr,(tr.mode&1)!==0);break;case 5:tr.memoizedProps.suppressHydrationWarning!==!0&&Af(nr.nodeValue,rr,(tr.mode&1)!==0)}sr&&(er.flags|=4)}else nr=(rr.nodeType===9?rr:rr.ownerDocument).createTextNode(nr),nr[Of]=er,er.stateNode=nr}return S$2(er),null;case 13:if(E$2(L$2),nr=er.memoizedState,tr===null||tr.memoizedState!==null&&tr.memoizedState.dehydrated!==null){if(I$1&&yg!==null&&er.mode&1&&!(er.flags&128))Hg(),Ig(),er.flags|=98560,sr=!1;else if(sr=Gg(er),nr!==null&&nr.dehydrated!==null){if(tr===null){if(!sr)throw Error(p$2(318));if(sr=er.memoizedState,sr=sr!==null?sr.dehydrated:null,!sr)throw Error(p$2(317));sr[Of]=er}else Ig(),!(er.flags&128)&&(er.memoizedState=null),er.flags|=4;S$2(er),sr=!1}else zg!==null&&(Fj(zg),zg=null),sr=!0;if(!sr)return er.flags&65536?er:null}return er.flags&128?(er.lanes=rr,er):(nr=nr!==null,nr!==(tr!==null&&tr.memoizedState!==null)&&nr&&(er.child.flags|=8192,er.mode&1&&(tr===null||L$2.current&1?T$3===0&&(T$3=3):tj())),er.updateQueue!==null&&(er.flags|=4),S$2(er),null);case 4:return zh(),Aj(tr,er),tr===null&&sf(er.stateNode.containerInfo),S$2(er),null;case 10:return ah(er.type._context),S$2(er),null;case 17:return Zf(er.type)&&$f(),S$2(er),null;case 19:if(E$2(L$2),sr=er.memoizedState,sr===null)return S$2(er),null;if(nr=(er.flags&128)!==0,or=sr.rendering,or===null)if(nr)Dj(sr,!1);else{if(T$3!==0||tr!==null&&tr.flags&128)for(tr=er.child;tr!==null;){if(or=Ch$1(tr),or!==null){for(er.flags|=128,Dj(sr,!1),nr=or.updateQueue,nr!==null&&(er.updateQueue=nr,er.flags|=4),er.subtreeFlags=0,nr=rr,rr=er.child;rr!==null;)sr=rr,tr=nr,sr.flags&=14680066,or=sr.alternate,or===null?(sr.childLanes=0,sr.lanes=tr,sr.child=null,sr.subtreeFlags=0,sr.memoizedProps=null,sr.memoizedState=null,sr.updateQueue=null,sr.dependencies=null,sr.stateNode=null):(sr.childLanes=or.childLanes,sr.lanes=or.lanes,sr.child=or.child,sr.subtreeFlags=0,sr.deletions=null,sr.memoizedProps=or.memoizedProps,sr.memoizedState=or.memoizedState,sr.updateQueue=or.updateQueue,sr.type=or.type,tr=or.dependencies,sr.dependencies=tr===null?null:{lanes:tr.lanes,firstContext:tr.firstContext}),rr=rr.sibling;return G$2(L$2,L$2.current&1|2),er.child}tr=tr.sibling}sr.tail!==null&&B$2()>Gj&&(er.flags|=128,nr=!0,Dj(sr,!1),er.lanes=4194304)}else{if(!nr)if(tr=Ch$1(or),tr!==null){if(er.flags|=128,nr=!0,rr=tr.updateQueue,rr!==null&&(er.updateQueue=rr,er.flags|=4),Dj(sr,!0),sr.tail===null&&sr.tailMode==="hidden"&&!or.alternate&&!I$1)return S$2(er),null}else 2*B$2()-sr.renderingStartTime>Gj&&rr!==1073741824&&(er.flags|=128,nr=!0,Dj(sr,!1),er.lanes=4194304);sr.isBackwards?(or.sibling=er.child,er.child=or):(rr=sr.last,rr!==null?rr.sibling=or:er.child=or,sr.last=or)}return sr.tail!==null?(er=sr.tail,sr.rendering=er,sr.tail=er.sibling,sr.renderingStartTime=B$2(),er.sibling=null,rr=L$2.current,G$2(L$2,nr?rr&1|2:rr&1),er):(S$2(er),null);case 22:case 23:return Hj(),nr=er.memoizedState!==null,tr!==null&&tr.memoizedState!==null!==nr&&(er.flags|=8192),nr&&er.mode&1?fj&1073741824&&(S$2(er),er.subtreeFlags&6&&(er.flags|=8192)):S$2(er),null;case 24:return null;case 25:return null}throw Error(p$2(156,er.tag))}function Ij(tr,er){switch(wg(er),er.tag){case 1:return Zf(er.type)&&$f(),tr=er.flags,tr&65536?(er.flags=tr&-65537|128,er):null;case 3:return zh(),E$2(Wf),E$2(H$1),Eh(),tr=er.flags,tr&65536&&!(tr&128)?(er.flags=tr&-65537|128,er):null;case 5:return Bh(er),null;case 13:if(E$2(L$2),tr=er.memoizedState,tr!==null&&tr.dehydrated!==null){if(er.alternate===null)throw Error(p$2(340));Ig()}return tr=er.flags,tr&65536?(er.flags=tr&-65537|128,er):null;case 19:return E$2(L$2),null;case 4:return zh(),null;case 10:return ah(er.type._context),null;case 22:case 23:return Hj(),null;case 24:return null;default:return null}}var Jj=!1,U$1=!1,Kj=typeof WeakSet=="function"?WeakSet:Set,V$2=null;function Lj(tr,er){var rr=tr.ref;if(rr!==null)if(typeof rr=="function")try{rr(null)}catch(nr){W$7(tr,er,nr)}else rr.current=null}function Mj(tr,er,rr){try{rr()}catch(nr){W$7(tr,er,nr)}}var Nj=!1;function Oj(tr,er){if(Cf=dd,tr=Me$1(),Ne$1(tr)){if("selectionStart"in tr)var rr={start:tr.selectionStart,end:tr.selectionEnd};else e:{rr=(rr=tr.ownerDocument)&&rr.defaultView||window;var nr=rr.getSelection&&rr.getSelection();if(nr&&nr.rangeCount!==0){rr=nr.anchorNode;var ir=nr.anchorOffset,sr=nr.focusNode;nr=nr.focusOffset;try{rr.nodeType,sr.nodeType}catch{rr=null;break e}var or=0,ar=-1,cr=-1,lr=0,ur=0,dr=tr,yr=null;t:for(;;){for(var mr;dr!==rr||ir!==0&&dr.nodeType!==3||(ar=or+ir),dr!==sr||nr!==0&&dr.nodeType!==3||(cr=or+nr),dr.nodeType===3&&(or+=dr.nodeValue.length),(mr=dr.firstChild)!==null;)yr=dr,dr=mr;for(;;){if(dr===tr)break t;if(yr===rr&&++lr===ir&&(ar=or),yr===sr&&++ur===nr&&(cr=or),(mr=dr.nextSibling)!==null)break;dr=yr,yr=dr.parentNode}dr=mr}rr=ar===-1||cr===-1?null:{start:ar,end:cr}}else rr=null}rr=rr||{start:0,end:0}}else rr=null;for(Df={focusedElem:tr,selectionRange:rr},dd=!1,V$2=er;V$2!==null;)if(er=V$2,tr=er.child,(er.subtreeFlags&1028)!==0&&tr!==null)tr.return=er,V$2=tr;else for(;V$2!==null;){er=V$2;try{var wr=er.alternate;if(er.flags&1024)switch(er.tag){case 0:case 11:case 15:break;case 1:if(wr!==null){var xr=wr.memoizedProps,Or=wr.memoizedState,Tr=er.stateNode,Ar=Tr.getSnapshotBeforeUpdate(er.elementType===er.type?xr:Ci(er.type,xr),Or);Tr.__reactInternalSnapshotBeforeUpdate=Ar}break;case 3:var Nr=er.stateNode.containerInfo;Nr.nodeType===1?Nr.textContent="":Nr.nodeType===9&&Nr.documentElement&&Nr.removeChild(Nr.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(p$2(163))}}catch(Ur){W$7(er,er.return,Ur)}if(tr=er.sibling,tr!==null){tr.return=er.return,V$2=tr;break}V$2=er.return}return wr=Nj,Nj=!1,wr}function Pj(tr,er,rr){var nr=er.updateQueue;if(nr=nr!==null?nr.lastEffect:null,nr!==null){var ir=nr=nr.next;do{if((ir.tag&tr)===tr){var sr=ir.destroy;ir.destroy=void 0,sr!==void 0&&Mj(er,rr,sr)}ir=ir.next}while(ir!==nr)}}function Qj(tr,er){if(er=er.updateQueue,er=er!==null?er.lastEffect:null,er!==null){var rr=er=er.next;do{if((rr.tag&tr)===tr){var nr=rr.create;rr.destroy=nr()}rr=rr.next}while(rr!==er)}}function Rj(tr){var er=tr.ref;if(er!==null){var rr=tr.stateNode;switch(tr.tag){case 5:tr=rr;break;default:tr=rr}typeof er=="function"?er(tr):er.current=tr}}function Sj(tr){var er=tr.alternate;er!==null&&(tr.alternate=null,Sj(er)),tr.child=null,tr.deletions=null,tr.sibling=null,tr.tag===5&&(er=tr.stateNode,er!==null&&(delete er[Of],delete er[Pf],delete er[of],delete er[Qf],delete er[Rf])),tr.stateNode=null,tr.return=null,tr.dependencies=null,tr.memoizedProps=null,tr.memoizedState=null,tr.pendingProps=null,tr.stateNode=null,tr.updateQueue=null}function Tj(tr){return tr.tag===5||tr.tag===3||tr.tag===4}function Uj(tr){e:for(;;){for(;tr.sibling===null;){if(tr.return===null||Tj(tr.return))return null;tr=tr.return}for(tr.sibling.return=tr.return,tr=tr.sibling;tr.tag!==5&&tr.tag!==6&&tr.tag!==18;){if(tr.flags&2||tr.child===null||tr.tag===4)continue e;tr.child.return=tr,tr=tr.child}if(!(tr.flags&2))return tr.stateNode}}function Vj(tr,er,rr){var nr=tr.tag;if(nr===5||nr===6)tr=tr.stateNode,er?rr.nodeType===8?rr.parentNode.insertBefore(tr,er):rr.insertBefore(tr,er):(rr.nodeType===8?(er=rr.parentNode,er.insertBefore(tr,rr)):(er=rr,er.appendChild(tr)),rr=rr._reactRootContainer,rr!=null||er.onclick!==null||(er.onclick=Bf));else if(nr!==4&&(tr=tr.child,tr!==null))for(Vj(tr,er,rr),tr=tr.sibling;tr!==null;)Vj(tr,er,rr),tr=tr.sibling}function Wj(tr,er,rr){var nr=tr.tag;if(nr===5||nr===6)tr=tr.stateNode,er?rr.insertBefore(tr,er):rr.appendChild(tr);else if(nr!==4&&(tr=tr.child,tr!==null))for(Wj(tr,er,rr),tr=tr.sibling;tr!==null;)Wj(tr,er,rr),tr=tr.sibling}var X$1=null,Xj=!1;function Yj(tr,er,rr){for(rr=rr.child;rr!==null;)Zj(tr,er,rr),rr=rr.sibling}function Zj(tr,er,rr){if(lc&&typeof lc.onCommitFiberUnmount=="function")try{lc.onCommitFiberUnmount(kc,rr)}catch{}switch(rr.tag){case 5:U$1||Lj(rr,er);case 6:var nr=X$1,ir=Xj;X$1=null,Yj(tr,er,rr),X$1=nr,Xj=ir,X$1!==null&&(Xj?(tr=X$1,rr=rr.stateNode,tr.nodeType===8?tr.parentNode.removeChild(rr):tr.removeChild(rr)):X$1.removeChild(rr.stateNode));break;case 18:X$1!==null&&(Xj?(tr=X$1,rr=rr.stateNode,tr.nodeType===8?Kf(tr.parentNode,rr):tr.nodeType===1&&Kf(tr,rr),bd(tr)):Kf(X$1,rr.stateNode));break;case 4:nr=X$1,ir=Xj,X$1=rr.stateNode.containerInfo,Xj=!0,Yj(tr,er,rr),X$1=nr,Xj=ir;break;case 0:case 11:case 14:case 15:if(!U$1&&(nr=rr.updateQueue,nr!==null&&(nr=nr.lastEffect,nr!==null))){ir=nr=nr.next;do{var sr=ir,or=sr.destroy;sr=sr.tag,or!==void 0&&(sr&2||sr&4)&&Mj(rr,er,or),ir=ir.next}while(ir!==nr)}Yj(tr,er,rr);break;case 1:if(!U$1&&(Lj(rr,er),nr=rr.stateNode,typeof nr.componentWillUnmount=="function"))try{nr.props=rr.memoizedProps,nr.state=rr.memoizedState,nr.componentWillUnmount()}catch(ar){W$7(rr,er,ar)}Yj(tr,er,rr);break;case 21:Yj(tr,er,rr);break;case 22:rr.mode&1?(U$1=(nr=U$1)||rr.memoizedState!==null,Yj(tr,er,rr),U$1=nr):Yj(tr,er,rr);break;default:Yj(tr,er,rr)}}function ak(tr){var er=tr.updateQueue;if(er!==null){tr.updateQueue=null;var rr=tr.stateNode;rr===null&&(rr=tr.stateNode=new Kj),er.forEach(function(nr){var ir=bk.bind(null,tr,nr);rr.has(nr)||(rr.add(nr),nr.then(ir,ir))})}}function ck(tr,er){var rr=er.deletions;if(rr!==null)for(var nr=0;nr<rr.length;nr++){var ir=rr[nr];try{var sr=tr,or=er,ar=or;e:for(;ar!==null;){switch(ar.tag){case 5:X$1=ar.stateNode,Xj=!1;break e;case 3:X$1=ar.stateNode.containerInfo,Xj=!0;break e;case 4:X$1=ar.stateNode.containerInfo,Xj=!0;break e}ar=ar.return}if(X$1===null)throw Error(p$2(160));Zj(sr,or,ir),X$1=null,Xj=!1;var cr=ir.alternate;cr!==null&&(cr.return=null),ir.return=null}catch(lr){W$7(ir,er,lr)}}if(er.subtreeFlags&12854)for(er=er.child;er!==null;)dk(er,tr),er=er.sibling}function dk(tr,er){var rr=tr.alternate,nr=tr.flags;switch(tr.tag){case 0:case 11:case 14:case 15:if(ck(er,tr),ek(tr),nr&4){try{Pj(3,tr,tr.return),Qj(3,tr)}catch(xr){W$7(tr,tr.return,xr)}try{Pj(5,tr,tr.return)}catch(xr){W$7(tr,tr.return,xr)}}break;case 1:ck(er,tr),ek(tr),nr&512&&rr!==null&&Lj(rr,rr.return);break;case 5:if(ck(er,tr),ek(tr),nr&512&&rr!==null&&Lj(rr,rr.return),tr.flags&32){var ir=tr.stateNode;try{ob(ir,"")}catch(xr){W$7(tr,tr.return,xr)}}if(nr&4&&(ir=tr.stateNode,ir!=null)){var sr=tr.memoizedProps,or=rr!==null?rr.memoizedProps:sr,ar=tr.type,cr=tr.updateQueue;if(tr.updateQueue=null,cr!==null)try{ar==="input"&&sr.type==="radio"&&sr.name!=null&&ab(ir,sr),vb(ar,or);var lr=vb(ar,sr);for(or=0;or<cr.length;or+=2){var ur=cr[or],dr=cr[or+1];ur==="style"?sb(ir,dr):ur==="dangerouslySetInnerHTML"?nb(ir,dr):ur==="children"?ob(ir,dr):ta(ir,ur,dr,lr)}switch(ar){case"input":bb(ir,sr);break;case"textarea":ib(ir,sr);break;case"select":var yr=ir._wrapperState.wasMultiple;ir._wrapperState.wasMultiple=!!sr.multiple;var mr=sr.value;mr!=null?fb(ir,!!sr.multiple,mr,!1):yr!==!!sr.multiple&&(sr.defaultValue!=null?fb(ir,!!sr.multiple,sr.defaultValue,!0):fb(ir,!!sr.multiple,sr.multiple?[]:"",!1))}ir[Pf]=sr}catch(xr){W$7(tr,tr.return,xr)}}break;case 6:if(ck(er,tr),ek(tr),nr&4){if(tr.stateNode===null)throw Error(p$2(162));ir=tr.stateNode,sr=tr.memoizedProps;try{ir.nodeValue=sr}catch(xr){W$7(tr,tr.return,xr)}}break;case 3:if(ck(er,tr),ek(tr),nr&4&&rr!==null&&rr.memoizedState.isDehydrated)try{bd(er.containerInfo)}catch(xr){W$7(tr,tr.return,xr)}break;case 4:ck(er,tr),ek(tr);break;case 13:ck(er,tr),ek(tr),ir=tr.child,ir.flags&8192&&(sr=ir.memoizedState!==null,ir.stateNode.isHidden=sr,!sr||ir.alternate!==null&&ir.alternate.memoizedState!==null||(fk=B$2())),nr&4&&ak(tr);break;case 22:if(ur=rr!==null&&rr.memoizedState!==null,tr.mode&1?(U$1=(lr=U$1)||ur,ck(er,tr),U$1=lr):ck(er,tr),ek(tr),nr&8192){if(lr=tr.memoizedState!==null,(tr.stateNode.isHidden=lr)&&!ur&&tr.mode&1)for(V$2=tr,ur=tr.child;ur!==null;){for(dr=V$2=ur;V$2!==null;){switch(yr=V$2,mr=yr.child,yr.tag){case 0:case 11:case 14:case 15:Pj(4,yr,yr.return);break;case 1:Lj(yr,yr.return);var wr=yr.stateNode;if(typeof wr.componentWillUnmount=="function"){nr=yr,rr=yr.return;try{er=nr,wr.props=er.memoizedProps,wr.state=er.memoizedState,wr.componentWillUnmount()}catch(xr){W$7(nr,rr,xr)}}break;case 5:Lj(yr,yr.return);break;case 22:if(yr.memoizedState!==null){gk(dr);continue}}mr!==null?(mr.return=yr,V$2=mr):gk(dr)}ur=ur.sibling}e:for(ur=null,dr=tr;;){if(dr.tag===5){if(ur===null){ur=dr;try{ir=dr.stateNode,lr?(sr=ir.style,typeof sr.setProperty=="function"?sr.setProperty("display","none","important"):sr.display="none"):(ar=dr.stateNode,cr=dr.memoizedProps.style,or=cr!=null&&cr.hasOwnProperty("display")?cr.display:null,ar.style.display=rb("display",or))}catch(xr){W$7(tr,tr.return,xr)}}}else if(dr.tag===6){if(ur===null)try{dr.stateNode.nodeValue=lr?"":dr.memoizedProps}catch(xr){W$7(tr,tr.return,xr)}}else if((dr.tag!==22&&dr.tag!==23||dr.memoizedState===null||dr===tr)&&dr.child!==null){dr.child.return=dr,dr=dr.child;continue}if(dr===tr)break e;for(;dr.sibling===null;){if(dr.return===null||dr.return===tr)break e;ur===dr&&(ur=null),dr=dr.return}ur===dr&&(ur=null),dr.sibling.return=dr.return,dr=dr.sibling}}break;case 19:ck(er,tr),ek(tr),nr&4&&ak(tr);break;case 21:break;default:ck(er,tr),ek(tr)}}function ek(tr){var er=tr.flags;if(er&2){try{e:{for(var rr=tr.return;rr!==null;){if(Tj(rr)){var nr=rr;break e}rr=rr.return}throw Error(p$2(160))}switch(nr.tag){case 5:var ir=nr.stateNode;nr.flags&32&&(ob(ir,""),nr.flags&=-33);var sr=Uj(tr);Wj(tr,sr,ir);break;case 3:case 4:var or=nr.stateNode.containerInfo,ar=Uj(tr);Vj(tr,ar,or);break;default:throw Error(p$2(161))}}catch(cr){W$7(tr,tr.return,cr)}tr.flags&=-3}er&4096&&(tr.flags&=-4097)}function hk(tr,er,rr){V$2=tr,ik(tr)}function ik(tr,er,rr){for(var nr=(tr.mode&1)!==0;V$2!==null;){var ir=V$2,sr=ir.child;if(ir.tag===22&&nr){var or=ir.memoizedState!==null||Jj;if(!or){var ar=ir.alternate,cr=ar!==null&&ar.memoizedState!==null||U$1;ar=Jj;var lr=U$1;if(Jj=or,(U$1=cr)&&!lr)for(V$2=ir;V$2!==null;)or=V$2,cr=or.child,or.tag===22&&or.memoizedState!==null?jk(ir):cr!==null?(cr.return=or,V$2=cr):jk(ir);for(;sr!==null;)V$2=sr,ik(sr),sr=sr.sibling;V$2=ir,Jj=ar,U$1=lr}kk(tr)}else ir.subtreeFlags&8772&&sr!==null?(sr.return=ir,V$2=sr):kk(tr)}}function kk(tr){for(;V$2!==null;){var er=V$2;if(er.flags&8772){var rr=er.alternate;try{if(er.flags&8772)switch(er.tag){case 0:case 11:case 15:U$1||Qj(5,er);break;case 1:var nr=er.stateNode;if(er.flags&4&&!U$1)if(rr===null)nr.componentDidMount();else{var ir=er.elementType===er.type?rr.memoizedProps:Ci(er.type,rr.memoizedProps);nr.componentDidUpdate(ir,rr.memoizedState,nr.__reactInternalSnapshotBeforeUpdate)}var sr=er.updateQueue;sr!==null&&sh$1(er,sr,nr);break;case 3:var or=er.updateQueue;if(or!==null){if(rr=null,er.child!==null)switch(er.child.tag){case 5:rr=er.child.stateNode;break;case 1:rr=er.child.stateNode}sh$1(er,or,rr)}break;case 5:var ar=er.stateNode;if(rr===null&&er.flags&4){rr=ar;var cr=er.memoizedProps;switch(er.type){case"button":case"input":case"select":case"textarea":cr.autoFocus&&rr.focus();break;case"img":cr.src&&(rr.src=cr.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(er.memoizedState===null){var lr=er.alternate;if(lr!==null){var ur=lr.memoizedState;if(ur!==null){var dr=ur.dehydrated;dr!==null&&bd(dr)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(p$2(163))}U$1||er.flags&512&&Rj(er)}catch(yr){W$7(er,er.return,yr)}}if(er===tr){V$2=null;break}if(rr=er.sibling,rr!==null){rr.return=er.return,V$2=rr;break}V$2=er.return}}function gk(tr){for(;V$2!==null;){var er=V$2;if(er===tr){V$2=null;break}var rr=er.sibling;if(rr!==null){rr.return=er.return,V$2=rr;break}V$2=er.return}}function jk(tr){for(;V$2!==null;){var er=V$2;try{switch(er.tag){case 0:case 11:case 15:var rr=er.return;try{Qj(4,er)}catch(cr){W$7(er,rr,cr)}break;case 1:var nr=er.stateNode;if(typeof nr.componentDidMount=="function"){var ir=er.return;try{nr.componentDidMount()}catch(cr){W$7(er,ir,cr)}}var sr=er.return;try{Rj(er)}catch(cr){W$7(er,sr,cr)}break;case 5:var or=er.return;try{Rj(er)}catch(cr){W$7(er,or,cr)}}}catch(cr){W$7(er,er.return,cr)}if(er===tr){V$2=null;break}var ar=er.sibling;if(ar!==null){ar.return=er.return,V$2=ar;break}V$2=er.return}}var lk=Math.ceil,mk=ua.ReactCurrentDispatcher,nk=ua.ReactCurrentOwner,ok=ua.ReactCurrentBatchConfig,K$5=0,Q$1=null,Y$1=null,Z$1=0,fj=0,ej=Uf(0),T$3=0,pk=null,rh$1=0,qk=0,rk=0,sk=null,tk=null,fk=0,Gj=1/0,uk=null,Oi=!1,Pi$1=null,Ri=null,vk=!1,wk=null,xk=0,yk=0,zk=null,Ak=-1,Bk=0;function R$1(){return K$5&6?B$2():Ak!==-1?Ak:Ak=B$2()}function yi(tr){return tr.mode&1?K$5&2&&Z$1!==0?Z$1&-Z$1:Kg.transition!==null?(Bk===0&&(Bk=yc()),Bk):(tr=C$2,tr!==0||(tr=window.event,tr=tr===void 0?16:jd(tr.type)),tr):1}function gi(tr,er,rr,nr){if(50<yk)throw yk=0,zk=null,Error(p$2(185));Ac(tr,rr,nr),(!(K$5&2)||tr!==Q$1)&&(tr===Q$1&&(!(K$5&2)&&(qk|=rr),T$3===4&&Ck(tr,Z$1)),Dk(tr,nr),rr===1&&K$5===0&&!(er.mode&1)&&(Gj=B$2()+500,fg&&jg()))}function Dk(tr,er){var rr=tr.callbackNode;wc(tr,er);var nr=uc(tr,tr===Q$1?Z$1:0);if(nr===0)rr!==null&&bc(rr),tr.callbackNode=null,tr.callbackPriority=0;else if(er=nr&-nr,tr.callbackPriority!==er){if(rr!=null&&bc(rr),er===1)tr.tag===0?ig(Ek.bind(null,tr)):hg(Ek.bind(null,tr)),Jf(function(){!(K$5&6)&&jg()}),rr=null;else{switch(Dc(nr)){case 1:rr=fc;break;case 4:rr=gc;break;case 16:rr=hc;break;case 536870912:rr=jc;break;default:rr=hc}rr=Fk(rr,Gk.bind(null,tr))}tr.callbackPriority=er,tr.callbackNode=rr}}function Gk(tr,er){if(Ak=-1,Bk=0,K$5&6)throw Error(p$2(327));var rr=tr.callbackNode;if(Hk()&&tr.callbackNode!==rr)return null;var nr=uc(tr,tr===Q$1?Z$1:0);if(nr===0)return null;if(nr&30||nr&tr.expiredLanes||er)er=Ik(tr,nr);else{er=nr;var ir=K$5;K$5|=2;var sr=Jk();(Q$1!==tr||Z$1!==er)&&(uk=null,Gj=B$2()+500,Kk(tr,er));do try{Lk();break}catch(ar){Mk(tr,ar)}while(!0);$g(),mk.current=sr,K$5=ir,Y$1!==null?er=0:(Q$1=null,Z$1=0,er=T$3)}if(er!==0){if(er===2&&(ir=xc(tr),ir!==0&&(nr=ir,er=Nk(tr,ir))),er===1)throw rr=pk,Kk(tr,0),Ck(tr,nr),Dk(tr,B$2()),rr;if(er===6)Ck(tr,nr);else{if(ir=tr.current.alternate,!(nr&30)&&!Ok(ir)&&(er=Ik(tr,nr),er===2&&(sr=xc(tr),sr!==0&&(nr=sr,er=Nk(tr,sr))),er===1))throw rr=pk,Kk(tr,0),Ck(tr,nr),Dk(tr,B$2()),rr;switch(tr.finishedWork=ir,tr.finishedLanes=nr,er){case 0:case 1:throw Error(p$2(345));case 2:Pk(tr,tk,uk);break;case 3:if(Ck(tr,nr),(nr&130023424)===nr&&(er=fk+500-B$2(),10<er)){if(uc(tr,0)!==0)break;if(ir=tr.suspendedLanes,(ir&nr)!==nr){R$1(),tr.pingedLanes|=tr.suspendedLanes&ir;break}tr.timeoutHandle=Ff(Pk.bind(null,tr,tk,uk),er);break}Pk(tr,tk,uk);break;case 4:if(Ck(tr,nr),(nr&4194240)===nr)break;for(er=tr.eventTimes,ir=-1;0<nr;){var or=31-oc(nr);sr=1<<or,or=er[or],or>ir&&(ir=or),nr&=~sr}if(nr=ir,nr=B$2()-nr,nr=(120>nr?120:480>nr?480:1080>nr?1080:1920>nr?1920:3e3>nr?3e3:4320>nr?4320:1960*lk(nr/1960))-nr,10<nr){tr.timeoutHandle=Ff(Pk.bind(null,tr,tk,uk),nr);break}Pk(tr,tk,uk);break;case 5:Pk(tr,tk,uk);break;default:throw Error(p$2(329))}}}return Dk(tr,B$2()),tr.callbackNode===rr?Gk.bind(null,tr):null}function Nk(tr,er){var rr=sk;return tr.current.memoizedState.isDehydrated&&(Kk(tr,er).flags|=256),tr=Ik(tr,er),tr!==2&&(er=tk,tk=rr,er!==null&&Fj(er)),tr}function Fj(tr){tk===null?tk=tr:tk.push.apply(tk,tr)}function Ok(tr){for(var er=tr;;){if(er.flags&16384){var rr=er.updateQueue;if(rr!==null&&(rr=rr.stores,rr!==null))for(var nr=0;nr<rr.length;nr++){var ir=rr[nr],sr=ir.getSnapshot;ir=ir.value;try{if(!He$1(sr(),ir))return!1}catch{return!1}}}if(rr=er.child,er.subtreeFlags&16384&&rr!==null)rr.return=er,er=rr;else{if(er===tr)break;for(;er.sibling===null;){if(er.return===null||er.return===tr)return!0;er=er.return}er.sibling.return=er.return,er=er.sibling}}return!0}function Ck(tr,er){for(er&=~rk,er&=~qk,tr.suspendedLanes|=er,tr.pingedLanes&=~er,tr=tr.expirationTimes;0<er;){var rr=31-oc(er),nr=1<<rr;tr[rr]=-1,er&=~nr}}function Ek(tr){if(K$5&6)throw Error(p$2(327));Hk();var er=uc(tr,0);if(!(er&1))return Dk(tr,B$2()),null;var rr=Ik(tr,er);if(tr.tag!==0&&rr===2){var nr=xc(tr);nr!==0&&(er=nr,rr=Nk(tr,nr))}if(rr===1)throw rr=pk,Kk(tr,0),Ck(tr,er),Dk(tr,B$2()),rr;if(rr===6)throw Error(p$2(345));return tr.finishedWork=tr.current.alternate,tr.finishedLanes=er,Pk(tr,tk,uk),Dk(tr,B$2()),null}function Qk(tr,er){var rr=K$5;K$5|=1;try{return tr(er)}finally{K$5=rr,K$5===0&&(Gj=B$2()+500,fg&&jg())}}function Rk(tr){wk!==null&&wk.tag===0&&!(K$5&6)&&Hk();var er=K$5;K$5|=1;var rr=ok.transition,nr=C$2;try{if(ok.transition=null,C$2=1,tr)return tr()}finally{C$2=nr,ok.transition=rr,K$5=er,!(K$5&6)&&jg()}}function Hj(){fj=ej.current,E$2(ej)}function Kk(tr,er){tr.finishedWork=null,tr.finishedLanes=0;var rr=tr.timeoutHandle;if(rr!==-1&&(tr.timeoutHandle=-1,Gf(rr)),Y$1!==null)for(rr=Y$1.return;rr!==null;){var nr=rr;switch(wg(nr),nr.tag){case 1:nr=nr.type.childContextTypes,nr!=null&&$f();break;case 3:zh(),E$2(Wf),E$2(H$1),Eh();break;case 5:Bh(nr);break;case 4:zh();break;case 13:E$2(L$2);break;case 19:E$2(L$2);break;case 10:ah(nr.type._context);break;case 22:case 23:Hj()}rr=rr.return}if(Q$1=tr,Y$1=tr=Pg(tr.current,null),Z$1=fj=er,T$3=0,pk=null,rk=qk=rh$1=0,tk=sk=null,fh!==null){for(er=0;er<fh.length;er++)if(rr=fh[er],nr=rr.interleaved,nr!==null){rr.interleaved=null;var ir=nr.next,sr=rr.pending;if(sr!==null){var or=sr.next;sr.next=ir,nr.next=or}rr.pending=nr}fh=null}return tr}function Mk(tr,er){do{var rr=Y$1;try{if($g(),Fh.current=Rh,Ih){for(var nr=M$2.memoizedState;nr!==null;){var ir=nr.queue;ir!==null&&(ir.pending=null),nr=nr.next}Ih=!1}if(Hh=0,O$2=N$3=M$2=null,Jh=!1,Kh$1=0,nk.current=null,rr===null||rr.return===null){T$3=1,pk=er,Y$1=null;break}e:{var sr=tr,or=rr.return,ar=rr,cr=er;if(er=Z$1,ar.flags|=32768,cr!==null&&typeof cr=="object"&&typeof cr.then=="function"){var lr=cr,ur=ar,dr=ur.tag;if(!(ur.mode&1)&&(dr===0||dr===11||dr===15)){var yr=ur.alternate;yr?(ur.updateQueue=yr.updateQueue,ur.memoizedState=yr.memoizedState,ur.lanes=yr.lanes):(ur.updateQueue=null,ur.memoizedState=null)}var mr=Ui(or);if(mr!==null){mr.flags&=-257,Vi(mr,or,ar,sr,er),mr.mode&1&&Si$1(sr,lr,er),er=mr,cr=lr;var wr=er.updateQueue;if(wr===null){var xr=new Set;xr.add(cr),er.updateQueue=xr}else wr.add(cr);break e}else{if(!(er&1)){Si$1(sr,lr,er),tj();break e}cr=Error(p$2(426))}}else if(I$1&&ar.mode&1){var Or=Ui(or);if(Or!==null){!(Or.flags&65536)&&(Or.flags|=256),Vi(Or,or,ar,sr,er),Jg(Ji(cr,ar));break e}}sr=cr=Ji(cr,ar),T$3!==4&&(T$3=2),sk===null?sk=[sr]:sk.push(sr),sr=or;do{switch(sr.tag){case 3:sr.flags|=65536,er&=-er,sr.lanes|=er;var Tr=Ni(sr,cr,er);ph(sr,Tr);break e;case 1:ar=cr;var Ar=sr.type,Nr=sr.stateNode;if(!(sr.flags&128)&&(typeof Ar.getDerivedStateFromError=="function"||Nr!==null&&typeof Nr.componentDidCatch=="function"&&(Ri===null||!Ri.has(Nr)))){sr.flags|=65536,er&=-er,sr.lanes|=er;var Ur=Qi(sr,ar,er);ph(sr,Ur);break e}}sr=sr.return}while(sr!==null)}Sk(rr)}catch(Dr){er=Dr,Y$1===rr&&rr!==null&&(Y$1=rr=rr.return);continue}break}while(!0)}function Jk(){var tr=mk.current;return mk.current=Rh,tr===null?Rh:tr}function tj(){(T$3===0||T$3===3||T$3===2)&&(T$3=4),Q$1===null||!(rh$1&268435455)&&!(qk&268435455)||Ck(Q$1,Z$1)}function Ik(tr,er){var rr=K$5;K$5|=2;var nr=Jk();(Q$1!==tr||Z$1!==er)&&(uk=null,Kk(tr,er));do try{Tk();break}catch(ir){Mk(tr,ir)}while(!0);if($g(),K$5=rr,mk.current=nr,Y$1!==null)throw Error(p$2(261));return Q$1=null,Z$1=0,T$3}function Tk(){for(;Y$1!==null;)Uk(Y$1)}function Lk(){for(;Y$1!==null&&!cc();)Uk(Y$1)}function Uk(tr){var er=Vk(tr.alternate,tr,fj);tr.memoizedProps=tr.pendingProps,er===null?Sk(tr):Y$1=er,nk.current=null}function Sk(tr){var er=tr;do{var rr=er.alternate;if(tr=er.return,er.flags&32768){if(rr=Ij(rr,er),rr!==null){rr.flags&=32767,Y$1=rr;return}if(tr!==null)tr.flags|=32768,tr.subtreeFlags=0,tr.deletions=null;else{T$3=6,Y$1=null;return}}else if(rr=Ej(rr,er,fj),rr!==null){Y$1=rr;return}if(er=er.sibling,er!==null){Y$1=er;return}Y$1=er=tr}while(er!==null);T$3===0&&(T$3=5)}function Pk(tr,er,rr){var nr=C$2,ir=ok.transition;try{ok.transition=null,C$2=1,Wk(tr,er,rr,nr)}finally{ok.transition=ir,C$2=nr}return null}function Wk(tr,er,rr,nr){do Hk();while(wk!==null);if(K$5&6)throw Error(p$2(327));rr=tr.finishedWork;var ir=tr.finishedLanes;if(rr===null)return null;if(tr.finishedWork=null,tr.finishedLanes=0,rr===tr.current)throw Error(p$2(177));tr.callbackNode=null,tr.callbackPriority=0;var sr=rr.lanes|rr.childLanes;if(Bc(tr,sr),tr===Q$1&&(Y$1=Q$1=null,Z$1=0),!(rr.subtreeFlags&2064)&&!(rr.flags&2064)||vk||(vk=!0,Fk(hc,function(){return Hk(),null})),sr=(rr.flags&15990)!==0,rr.subtreeFlags&15990||sr){sr=ok.transition,ok.transition=null;var or=C$2;C$2=1;var ar=K$5;K$5|=4,nk.current=null,Oj(tr,rr),dk(rr,tr),Oe$1(Df),dd=!!Cf,Df=Cf=null,tr.current=rr,hk(rr),dc(),K$5=ar,C$2=or,ok.transition=sr}else tr.current=rr;if(vk&&(vk=!1,wk=tr,xk=ir),sr=tr.pendingLanes,sr===0&&(Ri=null),mc(rr.stateNode),Dk(tr,B$2()),er!==null)for(nr=tr.onRecoverableError,rr=0;rr<er.length;rr++)ir=er[rr],nr(ir.value,{componentStack:ir.stack,digest:ir.digest});if(Oi)throw Oi=!1,tr=Pi$1,Pi$1=null,tr;return xk&1&&tr.tag!==0&&Hk(),sr=tr.pendingLanes,sr&1?tr===zk?yk++:(yk=0,zk=tr):yk=0,jg(),null}function Hk(){if(wk!==null){var tr=Dc(xk),er=ok.transition,rr=C$2;try{if(ok.transition=null,C$2=16>tr?16:tr,wk===null)var nr=!1;else{if(tr=wk,wk=null,xk=0,K$5&6)throw Error(p$2(331));var ir=K$5;for(K$5|=4,V$2=tr.current;V$2!==null;){var sr=V$2,or=sr.child;if(V$2.flags&16){var ar=sr.deletions;if(ar!==null){for(var cr=0;cr<ar.length;cr++){var lr=ar[cr];for(V$2=lr;V$2!==null;){var ur=V$2;switch(ur.tag){case 0:case 11:case 15:Pj(8,ur,sr)}var dr=ur.child;if(dr!==null)dr.return=ur,V$2=dr;else for(;V$2!==null;){ur=V$2;var yr=ur.sibling,mr=ur.return;if(Sj(ur),ur===lr){V$2=null;break}if(yr!==null){yr.return=mr,V$2=yr;break}V$2=mr}}}var wr=sr.alternate;if(wr!==null){var xr=wr.child;if(xr!==null){wr.child=null;do{var Or=xr.sibling;xr.sibling=null,xr=Or}while(xr!==null)}}V$2=sr}}if(sr.subtreeFlags&2064&&or!==null)or.return=sr,V$2=or;else e:for(;V$2!==null;){if(sr=V$2,sr.flags&2048)switch(sr.tag){case 0:case 11:case 15:Pj(9,sr,sr.return)}var Tr=sr.sibling;if(Tr!==null){Tr.return=sr.return,V$2=Tr;break e}V$2=sr.return}}var Ar=tr.current;for(V$2=Ar;V$2!==null;){or=V$2;var Nr=or.child;if(or.subtreeFlags&2064&&Nr!==null)Nr.return=or,V$2=Nr;else e:for(or=Ar;V$2!==null;){if(ar=V$2,ar.flags&2048)try{switch(ar.tag){case 0:case 11:case 15:Qj(9,ar)}}catch(Dr){W$7(ar,ar.return,Dr)}if(ar===or){V$2=null;break e}var Ur=ar.sibling;if(Ur!==null){Ur.return=ar.return,V$2=Ur;break e}V$2=ar.return}}if(K$5=ir,jg(),lc&&typeof lc.onPostCommitFiberRoot=="function")try{lc.onPostCommitFiberRoot(kc,tr)}catch{}nr=!0}return nr}finally{C$2=rr,ok.transition=er}}return!1}function Xk(tr,er,rr){er=Ji(rr,er),er=Ni(tr,er,1),tr=nh(tr,er,1),er=R$1(),tr!==null&&(Ac(tr,1,er),Dk(tr,er))}function W$7(tr,er,rr){if(tr.tag===3)Xk(tr,tr,rr);else for(;er!==null;){if(er.tag===3){Xk(er,tr,rr);break}else if(er.tag===1){var nr=er.stateNode;if(typeof er.type.getDerivedStateFromError=="function"||typeof nr.componentDidCatch=="function"&&(Ri===null||!Ri.has(nr))){tr=Ji(rr,tr),tr=Qi(er,tr,1),er=nh(er,tr,1),tr=R$1(),er!==null&&(Ac(er,1,tr),Dk(er,tr));break}}er=er.return}}function Ti(tr,er,rr){var nr=tr.pingCache;nr!==null&&nr.delete(er),er=R$1(),tr.pingedLanes|=tr.suspendedLanes&rr,Q$1===tr&&(Z$1&rr)===rr&&(T$3===4||T$3===3&&(Z$1&130023424)===Z$1&&500>B$2()-fk?Kk(tr,0):rk|=rr),Dk(tr,er)}function Yk(tr,er){er===0&&(tr.mode&1?(er=sc,sc<<=1,!(sc&130023424)&&(sc=4194304)):er=1);var rr=R$1();tr=ih(tr,er),tr!==null&&(Ac(tr,er,rr),Dk(tr,rr))}function uj(tr){var er=tr.memoizedState,rr=0;er!==null&&(rr=er.retryLane),Yk(tr,rr)}function bk(tr,er){var rr=0;switch(tr.tag){case 13:var nr=tr.stateNode,ir=tr.memoizedState;ir!==null&&(rr=ir.retryLane);break;case 19:nr=tr.stateNode;break;default:throw Error(p$2(314))}nr!==null&&nr.delete(er),Yk(tr,rr)}var Vk;Vk=function(tr,er,rr){if(tr!==null)if(tr.memoizedProps!==er.pendingProps||Wf.current)dh=!0;else{if(!(tr.lanes&rr)&&!(er.flags&128))return dh=!1,yj(tr,er,rr);dh=!!(tr.flags&131072)}else dh=!1,I$1&&er.flags&1048576&&ug(er,ng,er.index);switch(er.lanes=0,er.tag){case 2:var nr=er.type;ij(tr,er),tr=er.pendingProps;var ir=Yf(er,H$1.current);ch$1(er,rr),ir=Nh(null,er,nr,tr,ir,rr);var sr=Sh();return er.flags|=1,typeof ir=="object"&&ir!==null&&typeof ir.render=="function"&&ir.$$typeof===void 0?(er.tag=1,er.memoizedState=null,er.updateQueue=null,Zf(nr)?(sr=!0,cg(er)):sr=!1,er.memoizedState=ir.state!==null&&ir.state!==void 0?ir.state:null,kh(er),ir.updater=Ei,er.stateNode=ir,ir._reactInternals=er,Ii(er,nr,tr,rr),er=jj(null,er,nr,!0,sr,rr)):(er.tag=0,I$1&&sr&&vg(er),Xi(null,er,ir,rr),er=er.child),er;case 16:nr=er.elementType;e:{switch(ij(tr,er),tr=er.pendingProps,ir=nr._init,nr=ir(nr._payload),er.type=nr,ir=er.tag=Zk(nr),tr=Ci(nr,tr),ir){case 0:er=cj(null,er,nr,tr,rr);break e;case 1:er=hj(null,er,nr,tr,rr);break e;case 11:er=Yi(null,er,nr,tr,rr);break e;case 14:er=$i(null,er,nr,Ci(nr.type,tr),rr);break e}throw Error(p$2(306,nr,""))}return er;case 0:return nr=er.type,ir=er.pendingProps,ir=er.elementType===nr?ir:Ci(nr,ir),cj(tr,er,nr,ir,rr);case 1:return nr=er.type,ir=er.pendingProps,ir=er.elementType===nr?ir:Ci(nr,ir),hj(tr,er,nr,ir,rr);case 3:e:{if(kj(er),tr===null)throw Error(p$2(387));nr=er.pendingProps,sr=er.memoizedState,ir=sr.element,lh(tr,er),qh(er,nr,null,rr);var or=er.memoizedState;if(nr=or.element,sr.isDehydrated)if(sr={element:nr,isDehydrated:!1,cache:or.cache,pendingSuspenseBoundaries:or.pendingSuspenseBoundaries,transitions:or.transitions},er.updateQueue.baseState=sr,er.memoizedState=sr,er.flags&256){ir=Ji(Error(p$2(423)),er),er=lj(tr,er,nr,rr,ir);break e}else if(nr!==ir){ir=Ji(Error(p$2(424)),er),er=lj(tr,er,nr,rr,ir);break e}else for(yg=Lf(er.stateNode.containerInfo.firstChild),xg=er,I$1=!0,zg=null,rr=Vg(er,null,nr,rr),er.child=rr;rr;)rr.flags=rr.flags&-3|4096,rr=rr.sibling;else{if(Ig(),nr===ir){er=Zi(tr,er,rr);break e}Xi(tr,er,nr,rr)}er=er.child}return er;case 5:return Ah(er),tr===null&&Eg(er),nr=er.type,ir=er.pendingProps,sr=tr!==null?tr.memoizedProps:null,or=ir.children,Ef(nr,ir)?or=null:sr!==null&&Ef(nr,sr)&&(er.flags|=32),gj(tr,er),Xi(tr,er,or,rr),er.child;case 6:return tr===null&&Eg(er),null;case 13:return oj(tr,er,rr);case 4:return yh(er,er.stateNode.containerInfo),nr=er.pendingProps,tr===null?er.child=Ug(er,null,nr,rr):Xi(tr,er,nr,rr),er.child;case 11:return nr=er.type,ir=er.pendingProps,ir=er.elementType===nr?ir:Ci(nr,ir),Yi(tr,er,nr,ir,rr);case 7:return Xi(tr,er,er.pendingProps,rr),er.child;case 8:return Xi(tr,er,er.pendingProps.children,rr),er.child;case 12:return Xi(tr,er,er.pendingProps.children,rr),er.child;case 10:e:{if(nr=er.type._context,ir=er.pendingProps,sr=er.memoizedProps,or=ir.value,G$2(Wg,nr._currentValue),nr._currentValue=or,sr!==null)if(He$1(sr.value,or)){if(sr.children===ir.children&&!Wf.current){er=Zi(tr,er,rr);break e}}else for(sr=er.child,sr!==null&&(sr.return=er);sr!==null;){var ar=sr.dependencies;if(ar!==null){or=sr.child;for(var cr=ar.firstContext;cr!==null;){if(cr.context===nr){if(sr.tag===1){cr=mh(-1,rr&-rr),cr.tag=2;var lr=sr.updateQueue;if(lr!==null){lr=lr.shared;var ur=lr.pending;ur===null?cr.next=cr:(cr.next=ur.next,ur.next=cr),lr.pending=cr}}sr.lanes|=rr,cr=sr.alternate,cr!==null&&(cr.lanes|=rr),bh(sr.return,rr,er),ar.lanes|=rr;break}cr=cr.next}}else if(sr.tag===10)or=sr.type===er.type?null:sr.child;else if(sr.tag===18){if(or=sr.return,or===null)throw Error(p$2(341));or.lanes|=rr,ar=or.alternate,ar!==null&&(ar.lanes|=rr),bh(or,rr,er),or=sr.sibling}else or=sr.child;if(or!==null)or.return=sr;else for(or=sr;or!==null;){if(or===er){or=null;break}if(sr=or.sibling,sr!==null){sr.return=or.return,or=sr;break}or=or.return}sr=or}Xi(tr,er,ir.children,rr),er=er.child}return er;case 9:return ir=er.type,nr=er.pendingProps.children,ch$1(er,rr),ir=eh(ir),nr=nr(ir),er.flags|=1,Xi(tr,er,nr,rr),er.child;case 14:return nr=er.type,ir=Ci(nr,er.pendingProps),ir=Ci(nr.type,ir),$i(tr,er,nr,ir,rr);case 15:return bj(tr,er,er.type,er.pendingProps,rr);case 17:return nr=er.type,ir=er.pendingProps,ir=er.elementType===nr?ir:Ci(nr,ir),ij(tr,er),er.tag=1,Zf(nr)?(tr=!0,cg(er)):tr=!1,ch$1(er,rr),Gi(er,nr,ir),Ii(er,nr,ir,rr),jj(null,er,nr,!0,tr,rr);case 19:return xj(tr,er,rr);case 22:return dj(tr,er,rr)}throw Error(p$2(156,er.tag))};function Fk(tr,er){return ac(tr,er)}function $k(tr,er,rr,nr){this.tag=tr,this.key=rr,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=er,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=nr,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bg(tr,er,rr,nr){return new $k(tr,er,rr,nr)}function aj(tr){return tr=tr.prototype,!(!tr||!tr.isReactComponent)}function Zk(tr){if(typeof tr=="function")return aj(tr)?1:0;if(tr!=null){if(tr=tr.$$typeof,tr===Da)return 11;if(tr===Ga)return 14}return 2}function Pg(tr,er){var rr=tr.alternate;return rr===null?(rr=Bg(tr.tag,er,tr.key,tr.mode),rr.elementType=tr.elementType,rr.type=tr.type,rr.stateNode=tr.stateNode,rr.alternate=tr,tr.alternate=rr):(rr.pendingProps=er,rr.type=tr.type,rr.flags=0,rr.subtreeFlags=0,rr.deletions=null),rr.flags=tr.flags&14680064,rr.childLanes=tr.childLanes,rr.lanes=tr.lanes,rr.child=tr.child,rr.memoizedProps=tr.memoizedProps,rr.memoizedState=tr.memoizedState,rr.updateQueue=tr.updateQueue,er=tr.dependencies,rr.dependencies=er===null?null:{lanes:er.lanes,firstContext:er.firstContext},rr.sibling=tr.sibling,rr.index=tr.index,rr.ref=tr.ref,rr}function Rg(tr,er,rr,nr,ir,sr){var or=2;if(nr=tr,typeof tr=="function")aj(tr)&&(or=1);else if(typeof tr=="string")or=5;else e:switch(tr){case ya:return Tg(rr.children,ir,sr,er);case za:or=8,ir|=8;break;case Aa:return tr=Bg(12,rr,er,ir|2),tr.elementType=Aa,tr.lanes=sr,tr;case Ea:return tr=Bg(13,rr,er,ir),tr.elementType=Ea,tr.lanes=sr,tr;case Fa:return tr=Bg(19,rr,er,ir),tr.elementType=Fa,tr.lanes=sr,tr;case Ia:return pj(rr,ir,sr,er);default:if(typeof tr=="object"&&tr!==null)switch(tr.$$typeof){case Ba:or=10;break e;case Ca:or=9;break e;case Da:or=11;break e;case Ga:or=14;break e;case Ha:or=16,nr=null;break e}throw Error(p$2(130,tr==null?tr:typeof tr,""))}return er=Bg(or,rr,er,ir),er.elementType=tr,er.type=nr,er.lanes=sr,er}function Tg(tr,er,rr,nr){return tr=Bg(7,tr,nr,er),tr.lanes=rr,tr}function pj(tr,er,rr,nr){return tr=Bg(22,tr,nr,er),tr.elementType=Ia,tr.lanes=rr,tr.stateNode={isHidden:!1},tr}function Qg(tr,er,rr){return tr=Bg(6,tr,null,er),tr.lanes=rr,tr}function Sg(tr,er,rr){return er=Bg(4,tr.children!==null?tr.children:[],tr.key,er),er.lanes=rr,er.stateNode={containerInfo:tr.containerInfo,pendingChildren:null,implementation:tr.implementation},er}function al(tr,er,rr,nr,ir){this.tag=er,this.containerInfo=tr,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=zc(0),this.expirationTimes=zc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zc(0),this.identifierPrefix=nr,this.onRecoverableError=ir,this.mutableSourceEagerHydrationData=null}function bl(tr,er,rr,nr,ir,sr,or,ar,cr){return tr=new al(tr,er,rr,ar,cr),er===1?(er=1,sr===!0&&(er|=8)):er=0,sr=Bg(3,null,null,er),tr.current=sr,sr.stateNode=tr,sr.memoizedState={element:nr,isDehydrated:rr,cache:null,transitions:null,pendingSuspenseBoundaries:null},kh(sr),tr}function cl(tr,er,rr){var nr=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:wa,key:nr==null?null:""+nr,children:tr,containerInfo:er,implementation:rr}}function dl(tr){if(!tr)return Vf;tr=tr._reactInternals;e:{if(Vb(tr)!==tr||tr.tag!==1)throw Error(p$2(170));var er=tr;do{switch(er.tag){case 3:er=er.stateNode.context;break e;case 1:if(Zf(er.type)){er=er.stateNode.__reactInternalMemoizedMergedChildContext;break e}}er=er.return}while(er!==null);throw Error(p$2(171))}if(tr.tag===1){var rr=tr.type;if(Zf(rr))return bg(tr,rr,er)}return er}function el(tr,er,rr,nr,ir,sr,or,ar,cr){return tr=bl(rr,nr,!0,tr,ir,sr,or,ar,cr),tr.context=dl(null),rr=tr.current,nr=R$1(),ir=yi(rr),sr=mh(nr,ir),sr.callback=er??null,nh(rr,sr,ir),tr.current.lanes=ir,Ac(tr,ir,nr),Dk(tr,nr),tr}function fl(tr,er,rr,nr){var ir=er.current,sr=R$1(),or=yi(ir);return rr=dl(rr),er.context===null?er.context=rr:er.pendingContext=rr,er=mh(sr,or),er.payload={element:tr},nr=nr===void 0?null:nr,nr!==null&&(er.callback=nr),tr=nh(ir,er,or),tr!==null&&(gi(tr,ir,or,sr),oh(tr,ir,or)),or}function gl(tr){if(tr=tr.current,!tr.child)return null;switch(tr.child.tag){case 5:return tr.child.stateNode;default:return tr.child.stateNode}}function hl(tr,er){if(tr=tr.memoizedState,tr!==null&&tr.dehydrated!==null){var rr=tr.retryLane;tr.retryLane=rr!==0&&rr<er?rr:er}}function il(tr,er){hl(tr,er),(tr=tr.alternate)&&hl(tr,er)}function jl(){return null}var kl=typeof reportError=="function"?reportError:function(tr){console.error(tr)};function ll(tr){this._internalRoot=tr}ml.prototype.render=ll.prototype.render=function(tr){var er=this._internalRoot;if(er===null)throw Error(p$2(409));fl(tr,er,null,null)};ml.prototype.unmount=ll.prototype.unmount=function(){var tr=this._internalRoot;if(tr!==null){this._internalRoot=null;var er=tr.containerInfo;Rk(function(){fl(null,tr,null,null)}),er[uf]=null}};function ml(tr){this._internalRoot=tr}ml.prototype.unstable_scheduleHydration=function(tr){if(tr){var er=Hc();tr={blockedOn:null,target:tr,priority:er};for(var rr=0;rr<Qc.length&&er!==0&&er<Qc[rr].priority;rr++);Qc.splice(rr,0,tr),rr===0&&Vc(tr)}};function nl(tr){return!(!tr||tr.nodeType!==1&&tr.nodeType!==9&&tr.nodeType!==11)}function ol(tr){return!(!tr||tr.nodeType!==1&&tr.nodeType!==9&&tr.nodeType!==11&&(tr.nodeType!==8||tr.nodeValue!==" react-mount-point-unstable "))}function pl(){}function ql(tr,er,rr,nr,ir){if(ir){if(typeof nr=="function"){var sr=nr;nr=function(){var lr=gl(or);sr.call(lr)}}var or=el(er,nr,tr,0,null,!1,!1,"",pl);return tr._reactRootContainer=or,tr[uf]=or.current,sf(tr.nodeType===8?tr.parentNode:tr),Rk(),or}for(;ir=tr.lastChild;)tr.removeChild(ir);if(typeof nr=="function"){var ar=nr;nr=function(){var lr=gl(cr);ar.call(lr)}}var cr=bl(tr,0,!1,null,null,!1,!1,"",pl);return tr._reactRootContainer=cr,tr[uf]=cr.current,sf(tr.nodeType===8?tr.parentNode:tr),Rk(function(){fl(er,cr,rr,nr)}),cr}function rl(tr,er,rr,nr,ir){var sr=rr._reactRootContainer;if(sr){var or=sr;if(typeof ir=="function"){var ar=ir;ir=function(){var cr=gl(or);ar.call(cr)}}fl(er,or,tr,ir)}else or=ql(rr,er,tr,ir,nr);return gl(or)}Ec=function(tr){switch(tr.tag){case 3:var er=tr.stateNode;if(er.current.memoizedState.isDehydrated){var rr=tc(er.pendingLanes);rr!==0&&(Cc(er,rr|1),Dk(er,B$2()),!(K$5&6)&&(Gj=B$2()+500,jg()))}break;case 13:Rk(function(){var nr=ih(tr,1);if(nr!==null){var ir=R$1();gi(nr,tr,1,ir)}}),il(tr,1)}};Fc=function(tr){if(tr.tag===13){var er=ih(tr,134217728);if(er!==null){var rr=R$1();gi(er,tr,134217728,rr)}il(tr,134217728)}};Gc=function(tr){if(tr.tag===13){var er=yi(tr),rr=ih(tr,er);if(rr!==null){var nr=R$1();gi(rr,tr,er,nr)}il(tr,er)}};Hc=function(){return C$2};Ic=function(tr,er){var rr=C$2;try{return C$2=tr,er()}finally{C$2=rr}};yb=function(tr,er,rr){switch(er){case"input":if(bb(tr,rr),er=rr.name,rr.type==="radio"&&er!=null){for(rr=tr;rr.parentNode;)rr=rr.parentNode;for(rr=rr.querySelectorAll("input[name="+JSON.stringify(""+er)+'][type="radio"]'),er=0;er<rr.length;er++){var nr=rr[er];if(nr!==tr&&nr.form===tr.form){var ir=Db(nr);if(!ir)throw Error(p$2(90));Wa(nr),bb(nr,ir)}}}break;case"textarea":ib(tr,rr);break;case"select":er=rr.value,er!=null&&fb(tr,!!rr.multiple,er,!1)}};Gb=Qk;Hb=Rk;var sl={usingClientEntryPoint:!1,Events:[Cb,ue$1,Db,Eb,Fb,Qk]},tl={findFiberByHostInstance:Wc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ul={bundleType:tl.bundleType,version:tl.version,rendererPackageName:tl.rendererPackageName,rendererConfig:tl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ua.ReactCurrentDispatcher,findHostInstanceByFiber:function(tr){return tr=Zb(tr),tr===null?null:tr.stateNode},findFiberByHostInstance:tl.findFiberByHostInstance||jl,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var vl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!vl.isDisabled&&vl.supportsFiber)try{kc=vl.inject(ul),lc=vl}catch{}}reactDom_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sl;reactDom_production_min.createPortal=function(tr,er){var rr=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!nl(er))throw Error(p$2(200));return cl(tr,er,null,rr)};reactDom_production_min.createRoot=function(tr,er){if(!nl(tr))throw Error(p$2(299));var rr=!1,nr="",ir=kl;return er!=null&&(er.unstable_strictMode===!0&&(rr=!0),er.identifierPrefix!==void 0&&(nr=er.identifierPrefix),er.onRecoverableError!==void 0&&(ir=er.onRecoverableError)),er=bl(tr,1,!1,null,null,rr,!1,nr,ir),tr[uf]=er.current,sf(tr.nodeType===8?tr.parentNode:tr),new ll(er)};reactDom_production_min.findDOMNode=function(tr){if(tr==null)return null;if(tr.nodeType===1)return tr;var er=tr._reactInternals;if(er===void 0)throw typeof tr.render=="function"?Error(p$2(188)):(tr=Object.keys(tr).join(","),Error(p$2(268,tr)));return tr=Zb(er),tr=tr===null?null:tr.stateNode,tr};reactDom_production_min.flushSync=function(tr){return Rk(tr)};reactDom_production_min.hydrate=function(tr,er,rr){if(!ol(er))throw Error(p$2(200));return rl(null,tr,er,!0,rr)};reactDom_production_min.hydrateRoot=function(tr,er,rr){if(!nl(tr))throw Error(p$2(405));var nr=rr!=null&&rr.hydratedSources||null,ir=!1,sr="",or=kl;if(rr!=null&&(rr.unstable_strictMode===!0&&(ir=!0),rr.identifierPrefix!==void 0&&(sr=rr.identifierPrefix),rr.onRecoverableError!==void 0&&(or=rr.onRecoverableError)),er=el(er,null,tr,1,rr??null,ir,!1,sr,or),tr[uf]=er.current,sf(tr),nr)for(tr=0;tr<nr.length;tr++)rr=nr[tr],ir=rr._getVersion,ir=ir(rr._source),er.mutableSourceEagerHydrationData==null?er.mutableSourceEagerHydrationData=[rr,ir]:er.mutableSourceEagerHydrationData.push(rr,ir);return new ml(er)};reactDom_production_min.render=function(tr,er,rr){if(!ol(er))throw Error(p$2(200));return rl(null,tr,er,!1,rr)};reactDom_production_min.unmountComponentAtNode=function(tr){if(!ol(tr))throw Error(p$2(40));return tr._reactRootContainer?(Rk(function(){rl(null,null,tr,!1,function(){tr._reactRootContainer=null,tr[uf]=null})}),!0):!1};reactDom_production_min.unstable_batchedUpdates=Qk;reactDom_production_min.unstable_renderSubtreeIntoContainer=function(tr,er,rr,nr){if(!ol(rr))throw Error(p$2(200));if(tr==null||tr._reactInternals===void 0)throw Error(p$2(38));return rl(tr,er,rr,!1,nr)};reactDom_production_min.version="18.3.1-next-f1338f8080-20240426";function checkDCE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(checkDCE)}catch(tr){console.error(tr)}}checkDCE(),reactDom.exports=reactDom_production_min;var reactDomExports=reactDom.exports,createRoot,m$2=reactDomExports;createRoot=client.createRoot=m$2.createRoot,client.hydrateRoot=m$2.hydrateRoot;const SidebarLink=({icon:tr,label:er,isActive:rr,onClick:nr})=>jsxRuntimeExports.jsxs("a",{className:`sidebar-link ${rr?"is-active":""}`,onClick:nr,children:[jsxRuntimeExports.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:tr}),er]}),Sidebar=({activeSection:tr,setActiveSection:er})=>{const rr=[{icon:jsxRuntimeExports.jsx("path",{d:"M9.135 20.773v-3.057c0-.78.637-1.414 1.423-1.414h2.875c.377 0 .74.15 1.006.414.267.265.417.625.417 1v3.057c-.002.325.126.637.356.867.23.23.544.36.87.36h1.962a3.46 3.46 0 002.443-1 3.41 3.41 0 001.013-2.422V9.867c0-.735-.328-1.431-.895-1.902l-6.671-5.29a3.097 3.097 0 00-3.949.072L3.467 7.965A2.474 2.474 0 002.5 9.867v8.702C2.5 20.464 4.047 22 5.956 22h1.916c.68 0 1.231-.544 1.236-1.218l.027-.009z"}),label:"Discover",key:"discover"},{icon:jsxRuntimeExports.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.835 12.007l.002.354c.012 1.404.096 2.657.242 3.451 0 .015.16.802.261 1.064.16.38.447.701.809.905a2 2 0 00.91.219c.249-.012.66-.137.954-.242l.244-.094c1.617-.642 4.707-2.74 5.891-4.024l.087-.09.39-.42c.245-.322.375-.715.375-1.138 0-.379-.116-.758-.347-1.064-.07-.099-.18-.226-.28-.334l-.379-.397c-1.305-1.321-4.129-3.175-5.593-3.79 0-.013-.91-.393-1.343-.407h-.057c-.665 0-1.286.379-1.603.991-.087.168-.17.496-.233.784l-.114.544c-.13.874-.216 2.216-.216 3.688zm-6.332-1.525C3.673 10.482 3 11.162 3 12a1.51 1.51 0 001.503 1.518l3.7-.328c.65 0 1.179-.532 1.179-1.19 0-.658-.528-1.191-1.18-1.191l-3.699-.327z"}),label:"Trending",key:"trending"},{icon:jsxRuntimeExports.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12.1535 16.64L14.995 13.77C15.2822 13.47 15.2822 13 14.9851 12.71C14.698 12.42 14.2327 12.42 13.9455 12.71L12.3713 14.31V9.49C12.3713 9.07 12.0446 8.74 11.6386 8.74C11.2327 8.74 10.896 9.07 10.896 9.49V14.31L9.32178 12.71C9.03465 12.42 8.56931 12.42 8.28218 12.71C7.99505 13 7.99505 13.47 8.28218 13.77L11.1139 16.64C11.1832 16.71 11.2624 16.76 11.3515 16.8C11.4406 16.84 11.5396 16.86 11.6386 16.86C11.7376 16.86 11.8267 16.84 11.9158 16.8C12.005 16.76 12.0842 16.71 12.1535 16.64ZM19.3282 9.02561C19.5609 9.02292 19.8143 9.02 20.0446 9.02C20.302 9.02 20.5 9.22 20.5 9.47V17.51C20.5 19.99 18.5 22 16.0446 22H8.17327C5.58911 22 3.5 19.89 3.5 17.29V6.51C3.5 4.03 5.4901 2 7.96535 2H13.2525C13.5 2 13.7079 2.21 13.7079 2.46V5.68C13.7079 7.51 15.1931 9.01 17.0149 9.02C17.4333 9.02 17.8077 9.02318 18.1346 9.02595C18.3878 9.02809 18.6125 9.03 18.8069 9.03C18.9479 9.03 19.1306 9.02789 19.3282 9.02561ZM19.6045 7.5661C18.7916 7.5691 17.8322 7.5661 17.1421 7.5591C16.047 7.5591 15.145 6.6481 15.145 5.5421V2.9061C15.145 2.4751 15.6629 2.2611 15.9579 2.5721C16.7203 3.37199 17.8873 4.5978 18.8738 5.63395C19.2735 6.05379 19.6436 6.44249 19.945 6.7591C20.2342 7.0621 20.0223 7.5651 19.6045 7.5661Z"}),label:"Pantheon",key:"playlist"}];return jsxRuntimeExports.jsxs("div",{className:"sidebar",children:[jsxRuntimeExports.jsx("span",{className:"logo",children:"S"}),jsxRuntimeExports.jsx("a",{className:"logo-expand",href:"#",children:" fanstar"}),jsxRuntimeExports.jsx("div",{className:"divider"}),jsxRuntimeExports.jsxs("div",{className:"side-wrapper",children:[jsxRuntimeExports.jsx("div",{className:"side-menu",children:rr.map(nr=>jsxRuntimeExports.jsx(SidebarLink,{icon:nr.icon,label:nr.label,isActive:tr===nr.key,onClick:()=>er(nr.key)},nr.key))}),jsxRuntimeExports.jsx("div",{className:"divider"}),jsxRuntimeExports.jsx("div",{id:"map-container",children:jsxRuntimeExports.jsx("div",{id:"controls",style:{display:"flex",alignItems:"center"},children:jsxRuntimeExports.jsxs("div",{className:"sport-icons",id:"sport-icons-menu",style:{display:"flex",flexDirection:"column"},children:[jsxRuntimeExports.jsxs("div",{className:"sport-icon",title:"Baseball","data-objectid":"7",style:{display:"flex",alignItems:"center"},children:[jsxRuntimeExports.jsx("i",{className:"fas fa-baseball",style:{marginRight:"8px"}}),jsxRuntimeExports.jsx("span",{children:"Baseball"})]}),jsxRuntimeExports.jsxs("div",{className:"sport-icon",title:"Basketball","data-objectid":"1",style:{display:"flex",alignItems:"center"},children:[jsxRuntimeExports.jsx("i",{className:"fas fa-basketball",style:{marginRight:"8px"}}),jsxRuntimeExports.jsx("span",{children:"Basketball"})]}),jsxRuntimeExports.jsxs("div",{className:"sport-icon",title:"Soccer","data-objectid":"6",style:{display:"flex",alignItems:"center"},children:[jsxRuntimeExports.jsx("i",{className:"fa-solid fa-futbol",style:{marginRight:"8px"}}),jsxRuntimeExports.jsx("span",{children:"Soccer"})]}),jsxRuntimeExports.jsxs("div",{className:"sport-icon",title:"Softball","data-objectid":"26",style:{display:"flex",alignItems:"center"},children:[jsxRuntimeExports.jsx("i",{className:"fa-solid fa-baseball-bat-ball",style:{marginRight:"8px"}}),jsxRuntimeExports.jsx("span",{children:"Softball"})]}),jsxRuntimeExports.jsxs("div",{className:"sport-icon",title:"Tennis","data-objectid":"11",style:{display:"flex",alignItems:"center"},children:[jsxRuntimeExports.jsx("i",{className:"fa-solid fa-table-tennis-paddle-ball",style:{marginRight:"8px"}}),jsxRuntimeExports.jsx("span",{children:"Tennis"})]}),jsxRuntimeExports.jsxs("div",{className:"sport-icon",title:"Volleyball","data-objectid":"28",style:{display:"flex",alignItems:"center"},children:[jsxRuntimeExports.jsx("i",{className:"fas fa-volleyball",style:{marginRight:"8px"}}),jsxRuntimeExports.jsx("span",{children:"Volleyball"})]})]})})}),jsxRuntimeExports.jsx("div",{className:"divider"})]})]})},Video=({video:tr,onClick:er})=>jsxRuntimeExports.jsxs("div",{className:"video anim",onClick:()=>er(tr),children:[jsxRuntimeExports.jsx("div",{className:"video-time",children:tr.time}),jsxRuntimeExports.jsxs("div",{className:"video-wrapper",children:[jsxRuntimeExports.jsx("video",{muted:!0,children:jsxRuntimeExports.jsx("source",{src:tr.src,type:"video/mp4"})}),jsxRuntimeExports.jsxs("div",{className:"author-img__wrapper video-author",children:[jsxRuntimeExports.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:jsxRuntimeExports.jsx("path",{d:"M20 6L9 17l-5-5"})}),jsxRuntimeExports.jsx("img",{className:"author-img",src:tr.authorImg,alt:tr.by})]})]}),jsxRuntimeExports.jsx("div",{className:"video-by",children:tr.by}),jsxRuntimeExports.jsx("div",{className:"video-name",children:tr.name}),jsxRuntimeExports.jsxs("div",{className:"video-view",children:[tr.views," Fans ",jsxRuntimeExports.jsx("span",{className:"seperate video-seperate"}),tr.date]})]}),videoData=[{time:"new",src:"https://player.vimeo.com/external/436573422.sd.mp4?s=b39a124b4e0ed90b0e6fcf8d4b1677fb91a678d5&profile_id=165&oauth2_token_id=57447761",authorImg:"https://images.pexels.com/photos/3748221/pexels-photo-3748221.jpeg?auto=compress&cs=tinysrgb&dpr=2&w=500",by:"Liverbool Red",name:"Michael Robertson",views:"68K",date:"3.1M MCAP"},{time:"recent",src:"https://player.vimeo.com/external/436573810.sd.mp4?s=f45d5c4e7d07a01eae37ff39b5e4323e792e1e5b&profile_id=164&oauth2_token_id=57447761",authorImg:"https://images.pexels.com/photos/2381069/pexels-photo-2381069.jpeg?auto=compress&cs=tinysrgb&dpr=2&w=500",by:"Chelzea Blues",name:"Dylan Martinez",views:"95K",date:"4.5M MCAP"},{time:"new",src:"https://player.vimeo.com/external/436574388.sd.mp4?s=2b212e5bd5f946e71d724e9e7089b2d6e9f0e4d5&profile_id=164&oauth2_token_id=57447761",authorImg:"https://images.pexels.com/photos/1501934/pexels-photo-1501934.jpeg?auto=compress&cs=tinysrgb&dpr=2&w=500",by:"Leed Gunners",name:"Ethan Wright",views:"82K",date:"3.9M MCAP"},{time:"popular",src:"https://player.vimeo.com/external/436574986.sd.mp4?s=bc12c8d4e1f70f1e1ab3dc39d2f5d4a6a0de6235&profile_id=139&oauth2_token_id=57447761",authorImg:"https://images.pexels.com/photos/220453/pexels-photo-220453.jpeg?auto=compress&cs=tinysrgb&dpr=2&w=500",by:"Tottenhamer",name:"Harry Lawson",views:"105K",date:"5.2M MCAP"},{time:"new",src:"https://player.vimeo.com/external/436575348.sd.mp4?s=d9a0e0f25f5ddfd9c4e6e07edffac9818f8d72b7&profile_id=139&oauth2_token_id=57447761",authorImg:"https://images.pexels.com/photos/936110/pexels-photo-936110.jpeg?auto=compress&cs=tinysrgb&dpr=2&w=500",by:"Red United",name:"Joshua Clarke",views:"120K",date:"6.4M MCAP"},{time:"trending",src:"https://player.vimeo.com/external/436575911.sd.mp4?s=14853d2f0e9252274d925fa4a7f631ee68b56a98&profile_id=165&oauth2_token_id=57447761",authorImg:"https://images.pexels.com/photos/414612/pexels-photo-414612.jpeg?auto=compress&cs=tinysrgb&dpr=2&w=500",by:"Toffees",name:"Samuel Evans",views:"79K",date:"3.7M MCAP"},{time:"popular",src:"https://player.vimeo.com/external/436576432.sd.mp4?s=3c948b879d8cb89b3ef6633c7f29a6c40d8c26a1&profile_id=164&oauth2_token_id=57447761",authorImg:"https://images.pexels.com/photos/1222271/pexels-photo-1222271.jpeg?auto=compress&cs=tinysrgb&dpr=2&w=500",by:"Borrusia Wortmund",name:"Oliver Taylor",views:"88K",date:"4.2M MCAP"},{time:"trending",src:"https://player.vimeo.com/external/436576987.sd.mp4?s=d746cfc4c3e2c37ed4c9b1d4a16c5a0c78c19c07&profile_id=165&oauth2_token_id=57447761",authorImg:"https://images.pexels.com/photos/1043474/pexels-photo-1043474.jpeg?auto=compress&cs=tinysrgb&dpr=2&w=500",by:"Borrusia Wortmund",name:"Luke Harris",views:"73K",date:"3.5M MCAP"},{time:"recent",src:"https://player.vimeo.com/external/436577498.sd.mp4?s=5072c5345b6c9f66e5d1b627adf8e5fa12a5de58&profile_id=165&oauth2_token_id=57447761",authorImg:"https://images.pexels.com/photos/3153201/pexels-photo-3153201.jpeg?auto=compress&cs=tinysrgb&dpr=2&w=500",by:"Ham United",name:"James Mason",views:"66K",date:"3.2M MCAP"},{time:"new",src:"https://player.vimeo.com/external/436577944.sd.mp4?s=12099f24e8f6e01ab98810cf6a5d4c5b5f10208b&profile_id=164&oauth2_token_id=57447761",authorImg:"https://images.pexels.com/photos/2399204/pexels-photo-2399204.jpeg?auto=compress&cs=tinysrgb&dpr=2&w=500",by:"Leeds United",name:"William Brown",views:"78K",date:"3.6M MCAP"},{time:"trending",src:"https://player.vimeo.com/external/436578612.sd.mp4?s=a27a7ef77f1a9c891bbed4cc179c4ef1e6c0bb4d&profile_id=139&oauth2_token_id=57447761",authorImg:"https://images.pexels.com/photos/1404693/pexels-photo-1404693.jpeg?auto=compress&cs=tinysrgb&dpr=2&w=500",by:"Southamphon",name:"Charlie Edwards",views:"97K",date:"4.8M MCAP"},{time:"popular",src:"https://player.vimeo.com/external/436579074.sd.mp4?s=d5ae9f0f34d8dd43c5fd8a4b7bba6e961f1f680e&profile_id=164&oauth2_token_id=57447761",authorImg:"https://images.pexels.com/photos/834863/pexels-photo-834863.jpeg?auto=compress&cs=tinysrgb&dpr=2&w=500",by:"Newcastle Stars",name:"Henry Walker",views:"115K",date:"5.9M MCAP"}],MainContainer=({setSelectedVideo:tr})=>jsxRuntimeExports.jsxs("div",{className:"main-container",children:[jsxRuntimeExports.jsx("div",{className:"main-header anim",style:{"--delay":"0s"},children:"Discover"}),jsxRuntimeExports.jsxs("div",{className:"main-blogs",children:[jsxRuntimeExports.jsxs("div",{className:"main-blog anim",style:{"--delay":".1s"},children:[jsxRuntimeExports.jsx("div",{className:"main-blog__title",children:"Follow your Athletes"}),jsxRuntimeExports.jsx("div",{className:"main-blog__time",children:"7 min"})]}),jsxRuntimeExports.jsx("div",{className:"main-blog anim",style:{"--delay":".2s"},children:jsxRuntimeExports.jsx("div",{className:"main-blog__title",children:"Tips You Need to Know"})})]}),jsxRuntimeExports.jsx("div",{className:"small-header anim",style:{"--delay":".3s"},children:"Most Popular"}),jsxRuntimeExports.jsx("div",{className:"videos",children:videoData.map((er,rr)=>jsxRuntimeExports.jsx(Video,{video:er,onClick:tr},rr))})]}),Player=({selectedVideo:tr})=>tr?jsxRuntimeExports.jsxs("div",{className:"video-stream",children:[jsxRuntimeExports.jsxs("div",{className:"video-p-wrapper anim",style:{"--delay":".2s"},children:[jsxRuntimeExports.jsxs("div",{className:"author-img__wrapper video-author video-p",children:[jsxRuntimeExports.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:jsxRuntimeExports.jsx("path",{d:"M20 6L9 17l-5-5"})}),jsxRuntimeExports.jsx("img",{className:"author-img",src:tr.authorImg,alt:tr.by})]}),jsxRuntimeExports.jsxs("div",{className:"video-p-detail",children:[jsxRuntimeExports.jsx("div",{className:"video-p-name",children:tr.name}),jsxRuntimeExports.jsx("div",{className:"video-p-sub",children:"1,980,893 members"})]}),jsxRuntimeExports.jsx("div",{className:"button-wrapper",children:jsxRuntimeExports.jsxs("button",{className:"like red",children:[jsxRuntimeExports.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:jsxRuntimeExports.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M15.85 2.5c.63 0 1.26.09 1.86.29 3.69 1.2 5.02 5.25 3.91 8.79a12.728 12.728 0 01-3.01 4.81 38.456 38.456 0 01-6.33 4.96l-.25.15-.26-.16a38.093 38.093 0 01-6.37-4.96 12.933 12.933 0 01-3.01-4.8c-1.13-3.54.2-7.59 3.93-8.81.29-.1.59-.17.89-.21h.12c.28-.04.56-.06.84-.06h.11c.63.02 1.24.13 1.83.33h.06c.04.02.07.04.09.06.22.07.43.15.63.26l.38.17c.092.05.195.125.284.19.056.04.107.077.146.1l.05.03c.085.05.175.102.25.16a6.263 6.263 0 013.85-1.3zm2.66 7.2c.41-.01.76-.34.79-.76v-.12a3.3 3.3 0 00-2.11-3.16.8.8 0 00-1.01.5c-.14.42.08.88.5 1.03.64.24 1.07.87 1.07 1.57v.03a.86.86 0 00.19.62c.14.17.35.27.57.29z"})}),"Join Club"]})})]}),jsxRuntimeExports.jsx("div",{className:"video-p-title anim",style:{"--delay":".2s"},children:tr.title}),jsxRuntimeExports.jsxs("div",{className:"player anim",style:{"--delay":".1s"},children:[jsxRuntimeExports.jsxs("div",{className:"player-info",children:[jsxRuntimeExports.jsxs("h2",{className:"player-name",children:[jsxRuntimeExports.jsx("span",{className:"player-team",children:"West Ham United"}),"Mark Noble"]}),jsxRuntimeExports.jsxs("dl",{className:"player-stats",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("dt",{className:"player-stat",children:"Matches"}),jsxRuntimeExports.jsx("dd",{className:"player-stat-number",children:"550"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("dt",{className:"player-stat",children:"Goals"}),jsxRuntimeExports.jsx("dd",{className:"player-stat-number",children:"62"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("dt",{className:"player-stat",children:"Assists"}),jsxRuntimeExports.jsx("dd",{className:"player-stat-number",children:"58"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("dt",{className:"player-stat",children:"AVG Rating"}),jsxRuntimeExports.jsx("dd",{className:"player-stat-number",children:"6,7"})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"player-image",children:[jsxRuntimeExports.jsx("img",{src:"https://assets.codepen.io/285131/noble.png",alt:"Mark Noble"}),jsxRuntimeExports.jsx("span",{className:"captain-badge",children:"C"})]})]}),jsxRuntimeExports.jsx("div",{className:"stats-section anim",style:{"--delay":".3s"},children:jsxRuntimeExports.jsx("div",{className:"stats-container",children:jsxRuntimeExports.jsx("div",{className:"stats-wrapper",children:jsxRuntimeExports.jsxs("div",{className:"stats-columns",children:[jsxRuntimeExports.jsx("div",{className:"stats-column",children:jsxRuntimeExports.jsxs("div",{className:"stats-card",children:[jsxRuntimeExports.jsxs("div",{className:"stats-content",children:[jsxRuntimeExports.jsx("h4",{className:"stats-title",children:"Members"}),jsxRuntimeExports.jsx("h3",{className:"stats-number",children:"3,682"}),jsxRuntimeExports.jsx("p",{className:"stats-percentage stats-increase",children:" 57.1%"})]}),jsxRuntimeExports.jsx("div",{className:"stats-chart",children:jsxRuntimeExports.jsx("canvas",{id:"chart1",height:"70"})})]})}),jsxRuntimeExports.jsx("div",{className:"stats-column",children:jsxRuntimeExports.jsxs("div",{className:"stats-card",children:[jsxRuntimeExports.jsxs("div",{className:"stats-content",children:[jsxRuntimeExports.jsx("h4",{className:"stats-title",children:"M.CAP"}),jsxRuntimeExports.jsx("h3",{className:"stats-number",children:"11,427"}),jsxRuntimeExports.jsx("p",{className:"stats-percentage stats-decrease",children:" 42.8%"})]}),jsxRuntimeExports.jsx("div",{className:"stats-chart",children:jsxRuntimeExports.jsx("canvas",{id:"chart2",height:"70"})})]})}),jsxRuntimeExports.jsx("div",{className:"stats-column",children:jsxRuntimeExports.jsxs("div",{className:"stats-card",children:[jsxRuntimeExports.jsxs("div",{className:"stats-content",children:[jsxRuntimeExports.jsx("h4",{className:"stats-title",children:"Comments"}),jsxRuntimeExports.jsx("h3",{className:"stats-number",children:"8,028"}),jsxRuntimeExports.jsx("p",{className:"stats-percentage stats-increase",children:" 8.2%"})]}),jsxRuntimeExports.jsx("div",{className:"stats-chart",children:jsxRuntimeExports.jsx("canvas",{id:"chart3",height:"70"})})]})})]})})})})]}):null,version$5="6.13.2";function checkType(tr,er,rr){const nr=er.split("|").map(sr=>sr.trim());for(let sr=0;sr<nr.length;sr++)switch(er){case"any":return;case"bigint":case"boolean":case"number":case"string":if(typeof tr===er)return}const ir=new Error(`invalid value for type ${er}`);throw ir.code="INVALID_ARGUMENT",ir.argument=`value.${rr}`,ir.value=tr,ir}async function resolveProperties(tr){const er=Object.keys(tr);return(await Promise.all(er.map(nr=>Promise.resolve(tr[nr])))).reduce((nr,ir,sr)=>(nr[er[sr]]=ir,nr),{})}function defineProperties(tr,er,rr){for(let nr in er){let ir=er[nr];const sr=rr?rr[nr]:null;sr&&checkType(ir,sr,nr),Object.defineProperty(tr,nr,{enumerable:!0,value:ir,writable:!1})}}function stringify$3(tr){if(tr==null)return"null";if(Array.isArray(tr))return"[ "+tr.map(stringify$3).join(", ")+" ]";if(tr instanceof Uint8Array){const er="0123456789abcdef";let rr="0x";for(let nr=0;nr<tr.length;nr++)rr+=er[tr[nr]>>4],rr+=er[tr[nr]&15];return rr}if(typeof tr=="object"&&typeof tr.toJSON=="function")return stringify$3(tr.toJSON());switch(typeof tr){case"boolean":case"symbol":return tr.toString();case"bigint":return BigInt(tr).toString();case"number":return tr.toString();case"string":return JSON.stringify(tr);case"object":{const er=Object.keys(tr);return er.sort(),"{ "+er.map(rr=>`${stringify$3(rr)}: ${stringify$3(tr[rr])}`).join(", ")+" }"}}return"[ COULD NOT SERIALIZE ]"}function isError$2(tr,er){return tr&&tr.code===er}function makeError(tr,er,rr){let nr=tr;{const sr=[];if(rr){if("message"in rr||"code"in rr||"name"in rr)throw new Error(`value will overwrite populated values: ${stringify$3(rr)}`);for(const or in rr){if(or==="shortMessage")continue;const ar=rr[or];sr.push(or+"="+stringify$3(ar))}}sr.push(`code=${er}`),sr.push(`version=${version$5}`),sr.length&&(tr+=" ("+sr.join(", ")+")")}let ir;switch(er){case"INVALID_ARGUMENT":ir=new TypeError(tr);break;case"NUMERIC_FAULT":case"BUFFER_OVERRUN":ir=new RangeError(tr);break;default:ir=new Error(tr)}return defineProperties(ir,{code:er}),rr&&Object.assign(ir,rr),ir.shortMessage==null&&defineProperties(ir,{shortMessage:nr}),ir}function assert$r(tr,er,rr,nr){if(!tr)throw makeError(er,rr,nr)}function assertArgument(tr,er,rr,nr){assert$r(tr,er,"INVALID_ARGUMENT",{argument:rr,value:nr})}function assertArgumentCount(tr,er,rr){rr==null&&(rr=""),rr&&(rr=": "+rr),assert$r(tr>=er,"missing arguemnt"+rr,"MISSING_ARGUMENT",{count:tr,expectedCount:er}),assert$r(tr<=er,"too many arguments"+rr,"UNEXPECTED_ARGUMENT",{count:tr,expectedCount:er})}const _normalizeForms=["NFD","NFC","NFKD","NFKC"].reduce((tr,er)=>{try{if("test".normalize(er)!=="test")throw new Error("bad");if(er==="NFD"&&"".normalize("NFD")!=="e")throw new Error("broken");tr.push(er)}catch{}return tr},[]);function assertNormalize(tr){assert$r(_normalizeForms.indexOf(tr)>=0,"platform missing String.prototype.normalize","UNSUPPORTED_OPERATION",{operation:"String.prototype.normalize",info:{form:tr}})}function assertPrivate(tr,er,rr){if(rr==null&&(rr=""),tr!==er){let nr=rr,ir="new";rr&&(nr+=".",ir+=" "+rr),assert$r(!1,`private constructor; use ${nr}from* methods`,"UNSUPPORTED_OPERATION",{operation:ir})}}function _getBytes(tr,er,rr){if(tr instanceof Uint8Array)return rr?new Uint8Array(tr):tr;if(typeof tr=="string"&&tr.match(/^0x(?:[0-9a-f][0-9a-f])*$/i)){const nr=new Uint8Array((tr.length-2)/2);let ir=2;for(let sr=0;sr<nr.length;sr++)nr[sr]=parseInt(tr.substring(ir,ir+2),16),ir+=2;return nr}assertArgument(!1,"invalid BytesLike value",er||"value",tr)}function getBytes(tr,er){return _getBytes(tr,er,!1)}function getBytesCopy(tr,er){return _getBytes(tr,er,!0)}function isHexString$6(tr,er){return!(typeof tr!="string"||!tr.match(/^0x[0-9A-Fa-f]*$/)||typeof er=="number"&&tr.length!==2+2*er||er===!0&&tr.length%2!==0)}function isBytesLike(tr){return isHexString$6(tr,!0)||tr instanceof Uint8Array}const HexCharacters="0123456789abcdef";function hexlify(tr){const er=getBytes(tr);let rr="0x";for(let nr=0;nr<er.length;nr++){const ir=er[nr];rr+=HexCharacters[(ir&240)>>4]+HexCharacters[ir&15]}return rr}function concat$2(tr){return"0x"+tr.map(er=>hexlify(er).substring(2)).join("")}function dataLength(tr){return isHexString$6(tr,!0)?(tr.length-2)/2:getBytes(tr).length}function dataSlice(tr,er,rr){const nr=getBytes(tr);return rr!=null&&rr>nr.length&&assert$r(!1,"cannot slice beyond data bounds","BUFFER_OVERRUN",{buffer:nr,length:nr.length,offset:rr}),hexlify(nr.slice(er??0,rr??nr.length))}function zeroPad(tr,er,rr){const nr=getBytes(tr);assert$r(er>=nr.length,"padding exceeds data length","BUFFER_OVERRUN",{buffer:new Uint8Array(nr),length:er,offset:er+1});const ir=new Uint8Array(er);return ir.fill(0),rr?ir.set(nr,er-nr.length):ir.set(nr,0),hexlify(ir)}function zeroPadValue(tr,er){return zeroPad(tr,er,!0)}function zeroPadBytes(tr,er){return zeroPad(tr,er,!1)}const BN_0$6=BigInt(0),BN_1$3=BigInt(1),maxValue=9007199254740991;function fromTwos(tr,er){const rr=getUint(tr,"value"),nr=BigInt(getNumber(er,"width"));if(assert$r(rr>>nr===BN_0$6,"overflow","NUMERIC_FAULT",{operation:"fromTwos",fault:"overflow",value:tr}),rr>>nr-BN_1$3){const ir=(BN_1$3<<nr)-BN_1$3;return-((~rr&ir)+BN_1$3)}return rr}function toTwos(tr,er){let rr=getBigInt(tr,"value");const nr=BigInt(getNumber(er,"width")),ir=BN_1$3<<nr-BN_1$3;if(rr<BN_0$6){rr=-rr,assert$r(rr<=ir,"too low","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:tr});const sr=(BN_1$3<<nr)-BN_1$3;return(~rr&sr)+BN_1$3}else assert$r(rr<ir,"too high","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:tr});return rr}function mask$1(tr,er){const rr=getUint(tr,"value"),nr=BigInt(getNumber(er,"bits"));return rr&(BN_1$3<<nr)-BN_1$3}function getBigInt(tr,er){switch(typeof tr){case"bigint":return tr;case"number":return assertArgument(Number.isInteger(tr),"underflow",er||"value",tr),assertArgument(tr>=-maxValue&&tr<=maxValue,"overflow",er||"value",tr),BigInt(tr);case"string":try{if(tr==="")throw new Error("empty string");return tr[0]==="-"&&tr[1]!=="-"?-BigInt(tr.substring(1)):BigInt(tr)}catch(rr){assertArgument(!1,`invalid BigNumberish string: ${rr.message}`,er||"value",tr)}}assertArgument(!1,"invalid BigNumberish value",er||"value",tr)}function getUint(tr,er){const rr=getBigInt(tr,er);return assert$r(rr>=BN_0$6,"unsigned value cannot be negative","NUMERIC_FAULT",{fault:"overflow",operation:"getUint",value:tr}),rr}const Nibbles$1="0123456789abcdef";function toBigInt(tr){if(tr instanceof Uint8Array){let er="0x0";for(const rr of tr)er+=Nibbles$1[rr>>4],er+=Nibbles$1[rr&15];return BigInt(er)}return getBigInt(tr)}function getNumber(tr,er){switch(typeof tr){case"bigint":return assertArgument(tr>=-maxValue&&tr<=maxValue,"overflow",er||"value",tr),Number(tr);case"number":return assertArgument(Number.isInteger(tr),"underflow",er||"value",tr),assertArgument(tr>=-maxValue&&tr<=maxValue,"overflow",er||"value",tr),tr;case"string":try{if(tr==="")throw new Error("empty string");return getNumber(BigInt(tr),er)}catch(rr){assertArgument(!1,`invalid numeric string: ${rr.message}`,er||"value",tr)}}assertArgument(!1,"invalid numeric value",er||"value",tr)}function toNumber(tr){return getNumber(toBigInt(tr))}function toBeHex(tr,er){let nr=getUint(tr,"value").toString(16);if(er==null)nr.length%2&&(nr="0"+nr);else{const ir=getNumber(er,"width");for(assert$r(ir*2>=nr.length,`value exceeds width (${ir} bytes)`,"NUMERIC_FAULT",{operation:"toBeHex",fault:"overflow",value:tr});nr.length<ir*2;)nr="0"+nr}return"0x"+nr}function toBeArray(tr){const er=getUint(tr,"value");if(er===BN_0$6)return new Uint8Array([]);let rr=er.toString(16);rr.length%2&&(rr="0"+rr);const nr=new Uint8Array(rr.length/2);for(let ir=0;ir<nr.length;ir++){const sr=ir*2;nr[ir]=parseInt(rr.substring(sr,sr+2),16)}return nr}function toQuantity(tr){let er=hexlify(isBytesLike(tr)?tr:toBeArray(tr)).substring(2);for(;er.startsWith("0");)er=er.substring(1);return er===""&&(er="0"),"0x"+er}const Alphabet="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";let Lookup=null;function getAlpha(tr){if(Lookup==null){Lookup={};for(let rr=0;rr<Alphabet.length;rr++)Lookup[Alphabet[rr]]=BigInt(rr)}const er=Lookup[tr];return assertArgument(er!=null,"invalid base58 value","letter",tr),er}const BN_0$5=BigInt(0),BN_58=BigInt(58);function encodeBase58(tr){const er=getBytes(tr);let rr=toBigInt(er),nr="";for(;rr;)nr=Alphabet[Number(rr%BN_58)]+nr,rr/=BN_58;for(let ir=0;ir<er.length&&!er[ir];ir++)nr=Alphabet[0]+nr;return nr}function decodeBase58(tr){let er=BN_0$5;for(let rr=0;rr<tr.length;rr++)er*=BN_58,er+=getAlpha(tr[rr]);return er}function errorFunc(tr,er,rr,nr,ir){assertArgument(!1,`invalid codepoint at offset ${er}; ${tr}`,"bytes",rr)}function ignoreFunc(tr,er,rr,nr,ir){if(tr==="BAD_PREFIX"||tr==="UNEXPECTED_CONTINUE"){let sr=0;for(let or=er+1;or<rr.length&&rr[or]>>6===2;or++)sr++;return sr}return tr==="OVERRUN"?rr.length-er-1:0}function replaceFunc(tr,er,rr,nr,ir){return tr==="OVERLONG"?(assertArgument(typeof ir=="number","invalid bad code point for replacement","badCodepoint",ir),nr.push(ir),0):(nr.push(65533),ignoreFunc(tr,er,rr))}const Utf8ErrorFuncs=Object.freeze({error:errorFunc,ignore:ignoreFunc,replace:replaceFunc});function getUtf8CodePoints(tr,er){er==null&&(er=Utf8ErrorFuncs.error);const rr=getBytes(tr,"bytes"),nr=[];let ir=0;for(;ir<rr.length;){const sr=rr[ir++];if(!(sr>>7)){nr.push(sr);continue}let or=null,ar=null;if((sr&224)===192)or=1,ar=127;else if((sr&240)===224)or=2,ar=2047;else if((sr&248)===240)or=3,ar=65535;else{(sr&192)===128?ir+=er("UNEXPECTED_CONTINUE",ir-1,rr,nr):ir+=er("BAD_PREFIX",ir-1,rr,nr);continue}if(ir-1+or>=rr.length){ir+=er("OVERRUN",ir-1,rr,nr);continue}let cr=sr&(1<<8-or-1)-1;for(let lr=0;lr<or;lr++){let ur=rr[ir];if((ur&192)!=128){ir+=er("MISSING_CONTINUE",ir,rr,nr),cr=null;break}cr=cr<<6|ur&63,ir++}if(cr!==null){if(cr>1114111){ir+=er("OUT_OF_RANGE",ir-1-or,rr,nr,cr);continue}if(cr>=55296&&cr<=57343){ir+=er("UTF16_SURROGATE",ir-1-or,rr,nr,cr);continue}if(cr<=ar){ir+=er("OVERLONG",ir-1-or,rr,nr,cr);continue}nr.push(cr)}}return nr}function toUtf8Bytes(tr,er){assertArgument(typeof tr=="string","invalid string value","str",tr),er!=null&&(assertNormalize(er),tr=tr.normalize(er));let rr=[];for(let nr=0;nr<tr.length;nr++){const ir=tr.charCodeAt(nr);if(ir<128)rr.push(ir);else if(ir<2048)rr.push(ir>>6|192),rr.push(ir&63|128);else if((ir&64512)==55296){nr++;const sr=tr.charCodeAt(nr);assertArgument(nr<tr.length&&(sr&64512)===56320,"invalid surrogate pair","str",tr);const or=65536+((ir&1023)<<10)+(sr&1023);rr.push(or>>18|240),rr.push(or>>12&63|128),rr.push(or>>6&63|128),rr.push(or&63|128)}else rr.push(ir>>12|224),rr.push(ir>>6&63|128),rr.push(ir&63|128)}return new Uint8Array(rr)}function _toUtf8String(tr){return tr.map(er=>er<=65535?String.fromCharCode(er):(er-=65536,String.fromCharCode((er>>10&1023)+55296,(er&1023)+56320))).join("")}function toUtf8String(tr,er){return _toUtf8String(getUtf8CodePoints(tr,er))}function hexlifyByte(tr){let er=tr.toString(16);for(;er.length<2;)er="0"+er;return"0x"+er}function unarrayifyInteger(tr,er,rr){let nr=0;for(let ir=0;ir<rr;ir++)nr=nr*256+tr[er+ir];return nr}function _decodeChildren(tr,er,rr,nr){const ir=[];for(;rr<er+1+nr;){const sr=_decode$2(tr,rr);ir.push(sr.result),rr+=sr.consumed,assert$r(rr<=er+1+nr,"child data too short","BUFFER_OVERRUN",{buffer:tr,length:nr,offset:er})}return{consumed:1+nr,result:ir}}function _decode$2(tr,er){assert$r(tr.length!==0,"data too short","BUFFER_OVERRUN",{buffer:tr,length:0,offset:1});const rr=nr=>{assert$r(nr<=tr.length,"data short segment too short","BUFFER_OVERRUN",{buffer:tr,length:tr.length,offset:nr})};if(tr[er]>=248){const nr=tr[er]-247;rr(er+1+nr);const ir=unarrayifyInteger(tr,er+1,nr);return rr(er+1+nr+ir),_decodeChildren(tr,er,er+1+nr,nr+ir)}else if(tr[er]>=192){const nr=tr[er]-192;return rr(er+1+nr),_decodeChildren(tr,er,er+1,nr)}else if(tr[er]>=184){const nr=tr[er]-183;rr(er+1+nr);const ir=unarrayifyInteger(tr,er+1,nr);rr(er+1+nr+ir);const sr=hexlify(tr.slice(er+1+nr,er+1+nr+ir));return{consumed:1+nr+ir,result:sr}}else if(tr[er]>=128){const nr=tr[er]-128;rr(er+1+nr);const ir=hexlify(tr.slice(er+1,er+1+nr));return{consumed:1+nr,result:ir}}return{consumed:1,result:hexlifyByte(tr[er])}}function decodeRlp(tr){const er=getBytes(tr,"data"),rr=_decode$2(er,0);return assertArgument(rr.consumed===er.length,"unexpected junk after rlp payload","data",tr),rr.result}function arrayifyInteger(tr){const er=[];for(;tr;)er.unshift(tr&255),tr>>=8;return er}function _encode(tr){if(Array.isArray(tr)){let nr=[];if(tr.forEach(function(sr){nr=nr.concat(_encode(sr))}),nr.length<=55)return nr.unshift(192+nr.length),nr;const ir=arrayifyInteger(nr.length);return ir.unshift(247+ir.length),ir.concat(nr)}const er=Array.prototype.slice.call(getBytes(tr,"object"));if(er.length===1&&er[0]<=127)return er;if(er.length<=55)return er.unshift(128+er.length),er;const rr=arrayifyInteger(er.length);return rr.unshift(183+rr.length),rr.concat(er)}const nibbles="0123456789abcdef";function encodeRlp(tr){let er="0x";for(const rr of _encode(tr))er+=nibbles[rr>>4],er+=nibbles[rr&15];return er}function uuidV4(tr){const er=getBytes(tr,"randomBytes");er[6]=er[6]&15|64,er[8]=er[8]&63|128;const rr=hexlify(er);return[rr.substring(2,10),rr.substring(10,14),rr.substring(14,18),rr.substring(18,22),rr.substring(22,34)].join("-")}const WordSize=32,Padding=new Uint8Array(WordSize),passProperties=["then"],_guard$4={},resultNames=new WeakMap;function getNames(tr){return resultNames.get(tr)}function setNames(tr,er){resultNames.set(tr,er)}function throwError(tr,er){const rr=new Error(`deferred error during ABI decoding triggered accessing ${tr}`);throw rr.error=er,rr}function toObject$1(tr,er,rr){return tr.indexOf(null)>=0?er.map((nr,ir)=>nr instanceof Result?toObject$1(getNames(nr),nr,rr):nr):tr.reduce((nr,ir,sr)=>{let or=er.getValue(ir);return ir in nr||(rr&&or instanceof Result&&(or=toObject$1(getNames(or),or,rr)),nr[ir]=or),nr},{})}var vu;const bu=class bu extends Array{constructor(...rr){const nr=rr[0];let ir=rr[1],sr=(rr[2]||[]).slice(),or=!0;nr!==_guard$4&&(ir=rr,sr=[],or=!1);super(ir.length);mo(this,vu);ir.forEach((lr,ur)=>{this[ur]=lr});const ar=sr.reduce((lr,ur)=>(typeof ur=="string"&&lr.set(ur,(lr.get(ur)||0)+1),lr),new Map);if(setNames(this,Object.freeze(ir.map((lr,ur)=>{const dr=sr[ur];return dr!=null&&ar.get(dr)===1?dr:null}))),Zs(this,vu,[]),On(this,vu)==null&&On(this,vu),!or)return;Object.freeze(this);const cr=new Proxy(this,{get:(lr,ur,dr)=>{if(typeof ur=="string"){if(ur.match(/^[0-9]+$/)){const mr=getNumber(ur,"%index");if(mr<0||mr>=this.length)throw new RangeError("out of result range");const wr=lr[mr];return wr instanceof Error&&throwError(`index ${mr}`,wr),wr}if(passProperties.indexOf(ur)>=0)return Reflect.get(lr,ur,dr);const yr=lr[ur];if(yr instanceof Function)return function(...mr){return yr.apply(this===dr?lr:this,mr)};if(!(ur in lr))return lr.getValue.apply(this===dr?lr:this,[ur])}return Reflect.get(lr,ur,dr)}});return setNames(cr,getNames(this)),cr}toArray(rr){const nr=[];return this.forEach((ir,sr)=>{ir instanceof Error&&throwError(`index ${sr}`,ir),rr&&ir instanceof bu&&(ir=ir.toArray(rr)),nr.push(ir)}),nr}toObject(rr){const nr=getNames(this);return nr.reduce((ir,sr,or)=>(assert$r(sr!=null,`value at index ${or} unnamed`,"UNSUPPORTED_OPERATION",{operation:"toObject()"}),toObject$1(nr,this,rr)),{})}slice(rr,nr){rr==null&&(rr=0),rr<0&&(rr+=this.length,rr<0&&(rr=0)),nr==null&&(nr=this.length),nr<0&&(nr+=this.length,nr<0&&(nr=0)),nr>this.length&&(nr=this.length);const ir=getNames(this),sr=[],or=[];for(let ar=rr;ar<nr;ar++)sr.push(this[ar]),or.push(ir[ar]);return new bu(_guard$4,sr,or)}filter(rr,nr){const ir=getNames(this),sr=[],or=[];for(let ar=0;ar<this.length;ar++){const cr=this[ar];cr instanceof Error&&throwError(`index ${ar}`,cr),rr.call(nr,cr,ar,this)&&(sr.push(cr),or.push(ir[ar]))}return new bu(_guard$4,sr,or)}map(rr,nr){const ir=[];for(let sr=0;sr<this.length;sr++){const or=this[sr];or instanceof Error&&throwError(`index ${sr}`,or),ir.push(rr.call(nr,or,sr,this))}return ir}getValue(rr){const nr=getNames(this).indexOf(rr);if(nr===-1)return;const ir=this[nr];return ir instanceof Error&&throwError(`property ${JSON.stringify(rr)}`,ir.error),ir}static fromItems(rr,nr){return new bu(_guard$4,rr,nr)}};vu=new WeakMap;let Result=bu;function getValue(tr){let er=toBeArray(tr);return assert$r(er.length<=WordSize,"value out-of-bounds","BUFFER_OVERRUN",{buffer:er,length:WordSize,offset:er.length}),er.length!==WordSize&&(er=getBytesCopy(concat$2([Padding.slice(er.length%WordSize),er]))),er}class Coder{constructor(er,rr,nr,ir){Ys(this,"name");Ys(this,"type");Ys(this,"localName");Ys(this,"dynamic");defineProperties(this,{name:er,type:rr,localName:nr,dynamic:ir},{name:"string",type:"string",localName:"string",dynamic:"boolean"})}_throwError(er,rr){assertArgument(!1,er,this.localName,rr)}}var Ll,su,wu,Xu,b0;let Writer$2=(b0=class{constructor(){mo(this,wu);mo(this,Ll);mo(this,su);Zs(this,Ll,[]),Zs(this,su,0)}get data(){return concat$2(On(this,Ll))}get length(){return On(this,su)}appendWriter(er){return Bo(this,wu,Xu).call(this,getBytesCopy(er.data))}writeBytes(er){let rr=getBytesCopy(er);const nr=rr.length%WordSize;return nr&&(rr=getBytesCopy(concat$2([rr,Padding.slice(nr)]))),Bo(this,wu,Xu).call(this,rr)}writeValue(er){return Bo(this,wu,Xu).call(this,getValue(er))}writeUpdatableValue(){const er=On(this,Ll).length;return On(this,Ll).push(Padding),Zs(this,su,On(this,su)+WordSize),rr=>{On(this,Ll)[er]=getValue(rr)}}},Ll=new WeakMap,su=new WeakMap,wu=new WeakSet,Xu=function(er){return On(this,Ll).push(er),Zs(this,su,On(this,su)+er.length),er.length},b0);var Qo,ga,ou,au,Gl,hu,a0,v0,_u;let Reader$2=(_u=class{constructor(er,rr,nr){mo(this,hu);Ys(this,"allowLoose");mo(this,Qo);mo(this,ga);mo(this,ou);mo(this,au);mo(this,Gl);defineProperties(this,{allowLoose:!!rr}),Zs(this,Qo,getBytesCopy(er)),Zs(this,ou,0),Zs(this,au,null),Zs(this,Gl,nr??1024),Zs(this,ga,0)}get data(){return hexlify(On(this,Qo))}get dataLength(){return On(this,Qo).length}get consumed(){return On(this,ga)}get bytes(){return new Uint8Array(On(this,Qo))}subReader(er){const rr=new _u(On(this,Qo).slice(On(this,ga)+er),this.allowLoose,On(this,Gl));return Zs(rr,au,this),rr}readBytes(er,rr){let nr=Bo(this,hu,v0).call(this,0,er,!!rr);return Bo(this,hu,a0).call(this,er),Zs(this,ga,On(this,ga)+nr.length),nr.slice(0,er)}readValue(){return toBigInt(this.readBytes(WordSize))}readIndex(){return toNumber(this.readBytes(WordSize))}},Qo=new WeakMap,ga=new WeakMap,ou=new WeakMap,au=new WeakMap,Gl=new WeakMap,hu=new WeakSet,a0=function(er){var rr;if(On(this,au))return Bo(rr=On(this,au),hu,a0).call(rr,er);Zs(this,ou,On(this,ou)+er),assert$r(On(this,Gl)<1||On(this,ou)<=On(this,Gl)*this.dataLength,`compressed ABI data exceeds inflation ratio of ${On(this,Gl)} ( see: https://github.com/ethers-io/ethers.js/issues/4537 )`,"BUFFER_OVERRUN",{buffer:getBytesCopy(On(this,Qo)),offset:On(this,ga),length:er,info:{bytesRead:On(this,ou),dataLength:this.dataLength}})},v0=function(er,rr,nr){let ir=Math.ceil(rr/WordSize)*WordSize;return On(this,ga)+ir>On(this,Qo).length&&(this.allowLoose&&nr&&On(this,ga)+rr<=On(this,Qo).length?ir=rr:assert$r(!1,"data out-of-bounds","BUFFER_OVERRUN",{buffer:getBytesCopy(On(this,Qo)),length:On(this,Qo).length,offset:On(this,ga)+ir})),On(this,Qo).slice(On(this,ga),On(this,ga)+ir)},_u);function number$6(tr){if(!Number.isSafeInteger(tr)||tr<0)throw new Error(`Wrong positive integer: ${tr}`)}function bytes$7(tr,...er){if(!(tr instanceof Uint8Array))throw new Error("Expected Uint8Array");if(er.length>0&&!er.includes(tr.length))throw new Error(`Expected Uint8Array of length ${er}, not of length=${tr.length}`)}function hash$7(tr){if(typeof tr!="function"||typeof tr.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");number$6(tr.outputLen),number$6(tr.blockLen)}function exists$3(tr,er=!0){if(tr.destroyed)throw new Error("Hash instance has been destroyed");if(er&&tr.finished)throw new Error("Hash#digest() has already been called")}function output$3(tr,er){bytes$7(tr);const rr=er.outputLen;if(tr.length<rr)throw new Error(`digestInto() expects output buffer of length at least ${rr}`)}const crypto$7=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const u8a$3=tr=>tr instanceof Uint8Array,u32$2=tr=>new Uint32Array(tr.buffer,tr.byteOffset,Math.floor(tr.byteLength/4)),createView$2=tr=>new DataView(tr.buffer,tr.byteOffset,tr.byteLength),rotr$2=(tr,er)=>tr<<32-er|tr>>>er,isLE$2=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!isLE$2)throw new Error("Non little-endian hardware is not supported");const nextTick$2=async()=>{};async function asyncLoop$1(tr,er,rr){let nr=Date.now();for(let ir=0;ir<tr;ir++){rr(ir);const sr=Date.now()-nr;sr>=0&&sr<er||(await nextTick$2(),nr+=sr)}}function utf8ToBytes$7(tr){if(typeof tr!="string")throw new Error(`utf8ToBytes expected string, got ${typeof tr}`);return new Uint8Array(new TextEncoder().encode(tr))}function toBytes$7(tr){if(typeof tr=="string"&&(tr=utf8ToBytes$7(tr)),!u8a$3(tr))throw new Error(`expected Uint8Array, got ${typeof tr}`);return tr}function concatBytes$a(...tr){const er=new Uint8Array(tr.reduce((nr,ir)=>nr+ir.length,0));let rr=0;return tr.forEach(nr=>{if(!u8a$3(nr))throw new Error("Uint8Array expected");er.set(nr,rr),rr+=nr.length}),er}let Hash$9=class{clone(){return this._cloneInto()}};const toStr$6={}.toString;function checkOpts$1(tr,er){if(er!==void 0&&toStr$6.call(er)!=="[object Object]")throw new Error("Options should be object or undefined");return Object.assign(tr,er)}function wrapConstructor$2(tr){const er=nr=>tr().update(toBytes$7(nr)).digest(),rr=tr();return er.outputLen=rr.outputLen,er.blockLen=rr.blockLen,er.create=()=>tr(),er}function randomBytes$5(tr=32){if(crypto$7&&typeof crypto$7.getRandomValues=="function")return crypto$7.getRandomValues(new Uint8Array(tr));throw new Error("crypto.getRandomValues must be defined")}let HMAC$2=class extends Hash$9{constructor(er,rr){super(),this.finished=!1,this.destroyed=!1,hash$7(er);const nr=toBytes$7(rr);if(this.iHash=er.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const ir=this.blockLen,sr=new Uint8Array(ir);sr.set(nr.length>ir?er.create().update(nr).digest():nr);for(let or=0;or<sr.length;or++)sr[or]^=54;this.iHash.update(sr),this.oHash=er.create();for(let or=0;or<sr.length;or++)sr[or]^=106;this.oHash.update(sr),sr.fill(0)}update(er){return exists$3(this),this.iHash.update(er),this}digestInto(er){exists$3(this),bytes$7(er,this.outputLen),this.finished=!0,this.iHash.digestInto(er),this.oHash.update(er),this.oHash.digestInto(er),this.destroy()}digest(){const er=new Uint8Array(this.oHash.outputLen);return this.digestInto(er),er}_cloneInto(er){er||(er=Object.create(Object.getPrototypeOf(this),{}));const{oHash:rr,iHash:nr,finished:ir,destroyed:sr,blockLen:or,outputLen:ar}=this;return er=er,er.finished=ir,er.destroyed=sr,er.blockLen=or,er.outputLen=ar,er.oHash=rr._cloneInto(er.oHash),er.iHash=nr._cloneInto(er.iHash),er}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const hmac$3=(tr,er,rr)=>new HMAC$2(tr,er).update(rr).digest();hmac$3.create=(tr,er)=>new HMAC$2(tr,er);function pbkdf2Init(tr,er,rr,nr){hash$7(tr);const ir=checkOpts$1({dkLen:32,asyncTick:10},nr),{c:sr,dkLen:or,asyncTick:ar}=ir;if(number$6(sr),number$6(or),number$6(ar),sr<1)throw new Error("PBKDF2: iterations (c) should be >= 1");const cr=toBytes$7(er),lr=toBytes$7(rr),ur=new Uint8Array(or),dr=hmac$3.create(tr,cr),yr=dr._cloneInto().update(lr);return{c:sr,dkLen:or,asyncTick:ar,DK:ur,PRF:dr,PRFSalt:yr}}function pbkdf2Output(tr,er,rr,nr,ir){return tr.destroy(),er.destroy(),nr&&nr.destroy(),ir.fill(0),rr}function pbkdf2$1(tr,er,rr,nr){const{c:ir,dkLen:sr,DK:or,PRF:ar,PRFSalt:cr}=pbkdf2Init(tr,er,rr,nr);let lr;const ur=new Uint8Array(4),dr=createView$2(ur),yr=new Uint8Array(ar.outputLen);for(let mr=1,wr=0;wr<sr;mr++,wr+=ar.outputLen){const xr=or.subarray(wr,wr+ar.outputLen);dr.setInt32(0,mr,!1),(lr=cr._cloneInto(lr)).update(ur).digestInto(yr),xr.set(yr.subarray(0,xr.length));for(let Or=1;Or<ir;Or++){ar._cloneInto(lr).update(yr).digestInto(yr);for(let Tr=0;Tr<xr.length;Tr++)xr[Tr]^=yr[Tr]}}return pbkdf2Output(ar,cr,or,lr,yr)}function setBigUint64$2(tr,er,rr,nr){if(typeof tr.setBigUint64=="function")return tr.setBigUint64(er,rr,nr);const ir=BigInt(32),sr=BigInt(4294967295),or=Number(rr>>ir&sr),ar=Number(rr&sr),cr=nr?4:0,lr=nr?0:4;tr.setUint32(er+cr,or,nr),tr.setUint32(er+lr,ar,nr)}let SHA2$1=class extends Hash$9{constructor(er,rr,nr,ir){super(),this.blockLen=er,this.outputLen=rr,this.padOffset=nr,this.isLE=ir,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(er),this.view=createView$2(this.buffer)}update(er){exists$3(this);const{view:rr,buffer:nr,blockLen:ir}=this;er=toBytes$7(er);const sr=er.length;for(let or=0;or<sr;){const ar=Math.min(ir-this.pos,sr-or);if(ar===ir){const cr=createView$2(er);for(;ir<=sr-or;or+=ir)this.process(cr,or);continue}nr.set(er.subarray(or,or+ar),this.pos),this.pos+=ar,or+=ar,this.pos===ir&&(this.process(rr,0),this.pos=0)}return this.length+=er.length,this.roundClean(),this}digestInto(er){exists$3(this),output$3(er,this),this.finished=!0;const{buffer:rr,view:nr,blockLen:ir,isLE:sr}=this;let{pos:or}=this;rr[or++]=128,this.buffer.subarray(or).fill(0),this.padOffset>ir-or&&(this.process(nr,0),or=0);for(let dr=or;dr<ir;dr++)rr[dr]=0;setBigUint64$2(nr,ir-8,BigInt(this.length*8),sr),this.process(nr,0);const ar=createView$2(er),cr=this.outputLen;if(cr%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const lr=cr/4,ur=this.get();if(lr>ur.length)throw new Error("_sha2: outputLen bigger than state");for(let dr=0;dr<lr;dr++)ar.setUint32(4*dr,ur[dr],sr)}digest(){const{buffer:er,outputLen:rr}=this;this.digestInto(er);const nr=er.slice(0,rr);return this.destroy(),nr}_cloneInto(er){er||(er=new this.constructor),er.set(...this.get());const{blockLen:rr,buffer:nr,length:ir,finished:sr,destroyed:or,pos:ar}=this;return er.length=ir,er.pos=ar,er.finished=sr,er.destroyed=or,ir%rr&&er.buffer.set(nr),er}};const Chi$2=(tr,er,rr)=>tr&er^~tr&rr,Maj$2=(tr,er,rr)=>tr&er^tr&rr^er&rr,SHA256_K$2=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),IV$1=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),SHA256_W$2=new Uint32Array(64);let SHA256$4=class extends SHA2$1{constructor(){super(64,32,8,!1),this.A=IV$1[0]|0,this.B=IV$1[1]|0,this.C=IV$1[2]|0,this.D=IV$1[3]|0,this.E=IV$1[4]|0,this.F=IV$1[5]|0,this.G=IV$1[6]|0,this.H=IV$1[7]|0}get(){const{A:er,B:rr,C:nr,D:ir,E:sr,F:or,G:ar,H:cr}=this;return[er,rr,nr,ir,sr,or,ar,cr]}set(er,rr,nr,ir,sr,or,ar,cr){this.A=er|0,this.B=rr|0,this.C=nr|0,this.D=ir|0,this.E=sr|0,this.F=or|0,this.G=ar|0,this.H=cr|0}process(er,rr){for(let dr=0;dr<16;dr++,rr+=4)SHA256_W$2[dr]=er.getUint32(rr,!1);for(let dr=16;dr<64;dr++){const yr=SHA256_W$2[dr-15],mr=SHA256_W$2[dr-2],wr=rotr$2(yr,7)^rotr$2(yr,18)^yr>>>3,xr=rotr$2(mr,17)^rotr$2(mr,19)^mr>>>10;SHA256_W$2[dr]=xr+SHA256_W$2[dr-7]+wr+SHA256_W$2[dr-16]|0}let{A:nr,B:ir,C:sr,D:or,E:ar,F:cr,G:lr,H:ur}=this;for(let dr=0;dr<64;dr++){const yr=rotr$2(ar,6)^rotr$2(ar,11)^rotr$2(ar,25),mr=ur+yr+Chi$2(ar,cr,lr)+SHA256_K$2[dr]+SHA256_W$2[dr]|0,xr=(rotr$2(nr,2)^rotr$2(nr,13)^rotr$2(nr,22))+Maj$2(nr,ir,sr)|0;ur=lr,lr=cr,cr=ar,ar=or+mr|0,or=sr,sr=ir,ir=nr,nr=mr+xr|0}nr=nr+this.A|0,ir=ir+this.B|0,sr=sr+this.C|0,or=or+this.D|0,ar=ar+this.E|0,cr=cr+this.F|0,lr=lr+this.G|0,ur=ur+this.H|0,this.set(nr,ir,sr,or,ar,cr,lr,ur)}roundClean(){SHA256_W$2.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}};const sha256$4=wrapConstructor$2(()=>new SHA256$4),U32_MASK64$2=BigInt(2**32-1),_32n$2=BigInt(32);function fromBig$2(tr,er=!1){return er?{h:Number(tr&U32_MASK64$2),l:Number(tr>>_32n$2&U32_MASK64$2)}:{h:Number(tr>>_32n$2&U32_MASK64$2)|0,l:Number(tr&U32_MASK64$2)|0}}function split$2(tr,er=!1){let rr=new Uint32Array(tr.length),nr=new Uint32Array(tr.length);for(let ir=0;ir<tr.length;ir++){const{h:sr,l:or}=fromBig$2(tr[ir],er);[rr[ir],nr[ir]]=[sr,or]}return[rr,nr]}const toBig$1=(tr,er)=>BigInt(tr>>>0)<<_32n$2|BigInt(er>>>0),shrSH$1=(tr,er,rr)=>tr>>>rr,shrSL$1=(tr,er,rr)=>tr<<32-rr|er>>>rr,rotrSH$1=(tr,er,rr)=>tr>>>rr|er<<32-rr,rotrSL$1=(tr,er,rr)=>tr<<32-rr|er>>>rr,rotrBH$1=(tr,er,rr)=>tr<<64-rr|er>>>rr-32,rotrBL$1=(tr,er,rr)=>tr>>>rr-32|er<<64-rr,rotr32H$1=(tr,er)=>er,rotr32L$1=(tr,er)=>tr,rotlSH$2=(tr,er,rr)=>tr<<rr|er>>>32-rr,rotlSL$2=(tr,er,rr)=>er<<rr|tr>>>32-rr,rotlBH$2=(tr,er,rr)=>er<<rr-32|tr>>>64-rr,rotlBL$2=(tr,er,rr)=>tr<<rr-32|er>>>64-rr;function add$1(tr,er,rr,nr){const ir=(er>>>0)+(nr>>>0);return{h:tr+rr+(ir/2**32|0)|0,l:ir|0}}const add3L$1=(tr,er,rr)=>(tr>>>0)+(er>>>0)+(rr>>>0),add3H$1=(tr,er,rr,nr)=>er+rr+nr+(tr/2**32|0)|0,add4L$1=(tr,er,rr,nr)=>(tr>>>0)+(er>>>0)+(rr>>>0)+(nr>>>0),add4H$1=(tr,er,rr,nr,ir)=>er+rr+nr+ir+(tr/2**32|0)|0,add5L$1=(tr,er,rr,nr,ir)=>(tr>>>0)+(er>>>0)+(rr>>>0)+(nr>>>0)+(ir>>>0),add5H$1=(tr,er,rr,nr,ir,sr)=>er+rr+nr+ir+sr+(tr/2**32|0)|0,u64$1={fromBig:fromBig$2,split:split$2,toBig:toBig$1,shrSH:shrSH$1,shrSL:shrSL$1,rotrSH:rotrSH$1,rotrSL:rotrSL$1,rotrBH:rotrBH$1,rotrBL:rotrBL$1,rotr32H:rotr32H$1,rotr32L:rotr32L$1,rotlSH:rotlSH$2,rotlSL:rotlSL$2,rotlBH:rotlBH$2,rotlBL:rotlBL$2,add:add$1,add3L:add3L$1,add3H:add3H$1,add4L:add4L$1,add4H:add4H$1,add5H:add5H$1,add5L:add5L$1},[SHA512_Kh,SHA512_Kl]=u64$1.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(tr=>BigInt(tr))),SHA512_W_H=new Uint32Array(80),SHA512_W_L=new Uint32Array(80);let SHA512$3=class extends SHA2$1{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:er,Al:rr,Bh:nr,Bl:ir,Ch:sr,Cl:or,Dh:ar,Dl:cr,Eh:lr,El:ur,Fh:dr,Fl:yr,Gh:mr,Gl:wr,Hh:xr,Hl:Or}=this;return[er,rr,nr,ir,sr,or,ar,cr,lr,ur,dr,yr,mr,wr,xr,Or]}set(er,rr,nr,ir,sr,or,ar,cr,lr,ur,dr,yr,mr,wr,xr,Or){this.Ah=er|0,this.Al=rr|0,this.Bh=nr|0,this.Bl=ir|0,this.Ch=sr|0,this.Cl=or|0,this.Dh=ar|0,this.Dl=cr|0,this.Eh=lr|0,this.El=ur|0,this.Fh=dr|0,this.Fl=yr|0,this.Gh=mr|0,this.Gl=wr|0,this.Hh=xr|0,this.Hl=Or|0}process(er,rr){for(let Nr=0;Nr<16;Nr++,rr+=4)SHA512_W_H[Nr]=er.getUint32(rr),SHA512_W_L[Nr]=er.getUint32(rr+=4);for(let Nr=16;Nr<80;Nr++){const Ur=SHA512_W_H[Nr-15]|0,Dr=SHA512_W_L[Nr-15]|0,Hr=u64$1.rotrSH(Ur,Dr,1)^u64$1.rotrSH(Ur,Dr,8)^u64$1.shrSH(Ur,Dr,7),zr=u64$1.rotrSL(Ur,Dr,1)^u64$1.rotrSL(Ur,Dr,8)^u64$1.shrSL(Ur,Dr,7),Cr=SHA512_W_H[Nr-2]|0,Mr=SHA512_W_L[Nr-2]|0,Pr=u64$1.rotrSH(Cr,Mr,19)^u64$1.rotrBH(Cr,Mr,61)^u64$1.shrSH(Cr,Mr,6),Sr=u64$1.rotrSL(Cr,Mr,19)^u64$1.rotrBL(Cr,Mr,61)^u64$1.shrSL(Cr,Mr,6),pr=u64$1.add4L(zr,Sr,SHA512_W_L[Nr-7],SHA512_W_L[Nr-16]),gr=u64$1.add4H(pr,Hr,Pr,SHA512_W_H[Nr-7],SHA512_W_H[Nr-16]);SHA512_W_H[Nr]=gr|0,SHA512_W_L[Nr]=pr|0}let{Ah:nr,Al:ir,Bh:sr,Bl:or,Ch:ar,Cl:cr,Dh:lr,Dl:ur,Eh:dr,El:yr,Fh:mr,Fl:wr,Gh:xr,Gl:Or,Hh:Tr,Hl:Ar}=this;for(let Nr=0;Nr<80;Nr++){const Ur=u64$1.rotrSH(dr,yr,14)^u64$1.rotrSH(dr,yr,18)^u64$1.rotrBH(dr,yr,41),Dr=u64$1.rotrSL(dr,yr,14)^u64$1.rotrSL(dr,yr,18)^u64$1.rotrBL(dr,yr,41),Hr=dr&mr^~dr&xr,zr=yr&wr^~yr&Or,Cr=u64$1.add5L(Ar,Dr,zr,SHA512_Kl[Nr],SHA512_W_L[Nr]),Mr=u64$1.add5H(Cr,Tr,Ur,Hr,SHA512_Kh[Nr],SHA512_W_H[Nr]),Pr=Cr|0,Sr=u64$1.rotrSH(nr,ir,28)^u64$1.rotrBH(nr,ir,34)^u64$1.rotrBH(nr,ir,39),pr=u64$1.rotrSL(nr,ir,28)^u64$1.rotrBL(nr,ir,34)^u64$1.rotrBL(nr,ir,39),gr=nr&sr^nr&ar^sr&ar,fr=ir&or^ir&cr^or&cr;Tr=xr|0,Ar=Or|0,xr=mr|0,Or=wr|0,mr=dr|0,wr=yr|0,{h:dr,l:yr}=u64$1.add(lr|0,ur|0,Mr|0,Pr|0),lr=ar|0,ur=cr|0,ar=sr|0,cr=or|0,sr=nr|0,or=ir|0;const hr=u64$1.add3L(Pr,pr,fr);nr=u64$1.add3H(hr,Mr,Sr,gr),ir=hr|0}({h:nr,l:ir}=u64$1.add(this.Ah|0,this.Al|0,nr|0,ir|0)),{h:sr,l:or}=u64$1.add(this.Bh|0,this.Bl|0,sr|0,or|0),{h:ar,l:cr}=u64$1.add(this.Ch|0,this.Cl|0,ar|0,cr|0),{h:lr,l:ur}=u64$1.add(this.Dh|0,this.Dl|0,lr|0,ur|0),{h:dr,l:yr}=u64$1.add(this.Eh|0,this.El|0,dr|0,yr|0),{h:mr,l:wr}=u64$1.add(this.Fh|0,this.Fl|0,mr|0,wr|0),{h:xr,l:Or}=u64$1.add(this.Gh|0,this.Gl|0,xr|0,Or|0),{h:Tr,l:Ar}=u64$1.add(this.Hh|0,this.Hl|0,Tr|0,Ar|0),this.set(nr,ir,sr,or,ar,cr,lr,ur,dr,yr,mr,wr,xr,Or,Tr,Ar)}roundClean(){SHA512_W_H.fill(0),SHA512_W_L.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};const sha512$2=wrapConstructor$2(()=>new SHA512$3);function getGlobal(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof globalThis<"u")return globalThis;throw new Error("unable to locate global object")}const anyGlobal=getGlobal(),crypto$6=anyGlobal.crypto||anyGlobal.msCrypto;function createHash(tr){switch(tr){case"sha256":return sha256$4.create();case"sha512":return sha512$2.create()}assertArgument(!1,"invalid hashing algorithm name","algorithm",tr)}function createHmac(tr,er){const rr={sha256:sha256$4,sha512:sha512$2}[tr];return assertArgument(rr!=null,"invalid hmac algorithm","algorithm",tr),hmac$3.create(rr,er)}function pbkdf2Sync(tr,er,rr,nr,ir){const sr={sha256:sha256$4,sha512:sha512$2}[ir];return assertArgument(sr!=null,"invalid pbkdf2 algorithm","algorithm",ir),pbkdf2$1(sr,tr,er,{c:rr,dkLen:nr})}function randomBytes$4(tr){assert$r(crypto$6!=null,"platform does not support secure random numbers","UNSUPPORTED_OPERATION",{operation:"randomBytes"}),assertArgument(Number.isInteger(tr)&&tr>0&&tr<=1024,"invalid length","length",tr);const er=new Uint8Array(tr);return crypto$6.getRandomValues(er),er}let locked$4=!1;const _computeHmac=function(tr,er,rr){return createHmac(tr,er).update(rr).digest()};let __computeHmac=_computeHmac;function computeHmac(tr,er,rr){const nr=getBytes(er,"key"),ir=getBytes(rr,"data");return hexlify(__computeHmac(tr,nr,ir))}computeHmac._=_computeHmac;computeHmac.lock=function(){locked$4=!0};computeHmac.register=function(tr){if(locked$4)throw new Error("computeHmac is locked");__computeHmac=tr};Object.freeze(computeHmac);const[SHA3_PI$2,SHA3_ROTL$2,_SHA3_IOTA$2]=[[],[],[]],_0n$g=BigInt(0),_1n$i=BigInt(1),_2n$d=BigInt(2),_7n$2=BigInt(7),_256n$2=BigInt(256),_0x71n$2=BigInt(113);for(let tr=0,er=_1n$i,rr=1,nr=0;tr<24;tr++){[rr,nr]=[nr,(2*rr+3*nr)%5],SHA3_PI$2.push(2*(5*nr+rr)),SHA3_ROTL$2.push((tr+1)*(tr+2)/2%64);let ir=_0n$g;for(let sr=0;sr<7;sr++)er=(er<<_1n$i^(er>>_7n$2)*_0x71n$2)%_256n$2,er&_2n$d&&(ir^=_1n$i<<(_1n$i<<BigInt(sr))-_1n$i);_SHA3_IOTA$2.push(ir)}const[SHA3_IOTA_H$2,SHA3_IOTA_L$2]=split$2(_SHA3_IOTA$2,!0),rotlH$2=(tr,er,rr)=>rr>32?rotlBH$2(tr,er,rr):rotlSH$2(tr,er,rr),rotlL$2=(tr,er,rr)=>rr>32?rotlBL$2(tr,er,rr):rotlSL$2(tr,er,rr);function keccakP$2(tr,er=24){const rr=new Uint32Array(10);for(let nr=24-er;nr<24;nr++){for(let or=0;or<10;or++)rr[or]=tr[or]^tr[or+10]^tr[or+20]^tr[or+30]^tr[or+40];for(let or=0;or<10;or+=2){const ar=(or+8)%10,cr=(or+2)%10,lr=rr[cr],ur=rr[cr+1],dr=rotlH$2(lr,ur,1)^rr[ar],yr=rotlL$2(lr,ur,1)^rr[ar+1];for(let mr=0;mr<50;mr+=10)tr[or+mr]^=dr,tr[or+mr+1]^=yr}let ir=tr[2],sr=tr[3];for(let or=0;or<24;or++){const ar=SHA3_ROTL$2[or],cr=rotlH$2(ir,sr,ar),lr=rotlL$2(ir,sr,ar),ur=SHA3_PI$2[or];ir=tr[ur],sr=tr[ur+1],tr[ur]=cr,tr[ur+1]=lr}for(let or=0;or<50;or+=10){for(let ar=0;ar<10;ar++)rr[ar]=tr[or+ar];for(let ar=0;ar<10;ar++)tr[or+ar]^=~rr[(ar+2)%10]&rr[(ar+4)%10]}tr[0]^=SHA3_IOTA_H$2[nr],tr[1]^=SHA3_IOTA_L$2[nr]}rr.fill(0)}let Keccak$3=class w0 extends Hash$9{constructor(er,rr,nr,ir=!1,sr=24){if(super(),this.blockLen=er,this.suffix=rr,this.outputLen=nr,this.enableXOF=ir,this.rounds=sr,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,number$6(nr),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=u32$2(this.state)}keccak(){keccakP$2(this.state32,this.rounds),this.posOut=0,this.pos=0}update(er){exists$3(this);const{blockLen:rr,state:nr}=this;er=toBytes$7(er);const ir=er.length;for(let sr=0;sr<ir;){const or=Math.min(rr-this.pos,ir-sr);for(let ar=0;ar<or;ar++)nr[this.pos++]^=er[sr++];this.pos===rr&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:er,suffix:rr,pos:nr,blockLen:ir}=this;er[nr]^=rr,rr&128&&nr===ir-1&&this.keccak(),er[ir-1]^=128,this.keccak()}writeInto(er){exists$3(this,!1),bytes$7(er),this.finish();const rr=this.state,{blockLen:nr}=this;for(let ir=0,sr=er.length;ir<sr;){this.posOut>=nr&&this.keccak();const or=Math.min(nr-this.posOut,sr-ir);er.set(rr.subarray(this.posOut,this.posOut+or),ir),this.posOut+=or,ir+=or}return er}xofInto(er){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(er)}xof(er){return number$6(er),this.xofInto(new Uint8Array(er))}digestInto(er){if(output$3(er,this),this.finished)throw new Error("digest() was already called");return this.writeInto(er),this.destroy(),er}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(er){const{blockLen:rr,suffix:nr,outputLen:ir,rounds:sr,enableXOF:or}=this;return er||(er=new w0(rr,nr,ir,or,sr)),er.state32.set(this.state32),er.pos=this.pos,er.posOut=this.posOut,er.finished=this.finished,er.rounds=sr,er.suffix=nr,er.outputLen=ir,er.enableXOF=or,er.destroyed=this.destroyed,er}};const gen$2=(tr,er,rr)=>wrapConstructor$2(()=>new Keccak$3(er,tr,rr)),keccak_256$2=gen$2(1,136,256/8);let locked$3=!1;const _keccak256=function(tr){return keccak_256$2(tr)};let __keccak256=_keccak256;function keccak256$4(tr){const er=getBytes(tr,"data");return hexlify(__keccak256(er))}keccak256$4._=_keccak256;keccak256$4.lock=function(){locked$3=!0};keccak256$4.register=function(tr){if(locked$3)throw new TypeError("keccak256 is locked");__keccak256=tr};Object.freeze(keccak256$4);const Rho=new Uint8Array([7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8]),Id=Uint8Array.from({length:16},(tr,er)=>er),Pi=Id.map(tr=>(9*tr+5)%16);let idxL=[Id],idxR=[Pi];for(let tr=0;tr<4;tr++)for(let er of[idxL,idxR])er.push(er[tr].map(rr=>Rho[rr]));const shifts=[[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8],[12,13,11,15,6,9,9,7,12,15,11,13,7,8,7,7],[13,15,14,11,7,7,6,8,13,14,13,12,5,5,6,9],[14,11,12,14,8,6,5,5,15,12,15,14,9,9,8,6],[15,12,13,13,9,5,8,6,14,11,12,11,8,6,5,5]].map(tr=>new Uint8Array(tr)),shiftsL=idxL.map((tr,er)=>tr.map(rr=>shifts[er][rr])),shiftsR=idxR.map((tr,er)=>tr.map(rr=>shifts[er][rr])),Kl=new Uint32Array([0,1518500249,1859775393,2400959708,2840853838]),Kr=new Uint32Array([1352829926,1548603684,1836072691,2053994217,0]),rotl$2=(tr,er)=>tr<<er|tr>>>32-er;function f$3(tr,er,rr,nr){return tr===0?er^rr^nr:tr===1?er&rr|~er&nr:tr===2?(er|~rr)^nr:tr===3?er&nr|rr&~nr:er^(rr|~nr)}const BUF=new Uint32Array(16);let RIPEMD160$1=class extends SHA2$1{constructor(){super(64,20,8,!0),this.h0=1732584193,this.h1=-271733879,this.h2=-1732584194,this.h3=271733878,this.h4=-1009589776}get(){const{h0:er,h1:rr,h2:nr,h3:ir,h4:sr}=this;return[er,rr,nr,ir,sr]}set(er,rr,nr,ir,sr){this.h0=er|0,this.h1=rr|0,this.h2=nr|0,this.h3=ir|0,this.h4=sr|0}process(er,rr){for(let mr=0;mr<16;mr++,rr+=4)BUF[mr]=er.getUint32(rr,!0);let nr=this.h0|0,ir=nr,sr=this.h1|0,or=sr,ar=this.h2|0,cr=ar,lr=this.h3|0,ur=lr,dr=this.h4|0,yr=dr;for(let mr=0;mr<5;mr++){const wr=4-mr,xr=Kl[mr],Or=Kr[mr],Tr=idxL[mr],Ar=idxR[mr],Nr=shiftsL[mr],Ur=shiftsR[mr];for(let Dr=0;Dr<16;Dr++){const Hr=rotl$2(nr+f$3(mr,sr,ar,lr)+BUF[Tr[Dr]]+xr,Nr[Dr])+dr|0;nr=dr,dr=lr,lr=rotl$2(ar,10)|0,ar=sr,sr=Hr}for(let Dr=0;Dr<16;Dr++){const Hr=rotl$2(ir+f$3(wr,or,cr,ur)+BUF[Ar[Dr]]+Or,Ur[Dr])+yr|0;ir=yr,yr=ur,ur=rotl$2(cr,10)|0,cr=or,or=Hr}}this.set(this.h1+ar+ur|0,this.h2+lr+yr|0,this.h3+dr+ir|0,this.h4+nr+or|0,this.h0+sr+cr|0)}roundClean(){BUF.fill(0)}destroy(){this.destroyed=!0,this.buffer.fill(0),this.set(0,0,0,0,0)}};const ripemd160$1=wrapConstructor$2(()=>new RIPEMD160$1);let locked$2=!1;const _ripemd160=function(tr){return ripemd160$1(tr)};let __ripemd160=_ripemd160;function ripemd160(tr){const er=getBytes(tr,"data");return hexlify(__ripemd160(er))}ripemd160._=_ripemd160;ripemd160.lock=function(){locked$2=!0};ripemd160.register=function(tr){if(locked$2)throw new TypeError("ripemd160 is locked");__ripemd160=tr};Object.freeze(ripemd160);let locked$1=!1;const _pbkdf2=function(tr,er,rr,nr,ir){return pbkdf2Sync(tr,er,rr,nr,ir)};let __pbkdf2=_pbkdf2;function pbkdf2(tr,er,rr,nr,ir){const sr=getBytes(tr,"password"),or=getBytes(er,"salt");return hexlify(__pbkdf2(sr,or,rr,nr,ir))}pbkdf2._=_pbkdf2;pbkdf2.lock=function(){locked$1=!0};pbkdf2.register=function(tr){if(locked$1)throw new Error("pbkdf2 is locked");__pbkdf2=tr};Object.freeze(pbkdf2);let locked=!1;const _randomBytes=function(tr){return new Uint8Array(randomBytes$4(tr))};let __randomBytes=_randomBytes;function randomBytes$3(tr){return __randomBytes(tr)}randomBytes$3._=_randomBytes;randomBytes$3.lock=function(){locked=!0};randomBytes$3.register=function(tr){if(locked)throw new Error("randomBytes is locked");__randomBytes=tr};Object.freeze(randomBytes$3);const rotl$1=(tr,er)=>tr<<er|tr>>>32-er;function XorAndSalsa(tr,er,rr,nr,ir,sr){let or=tr[er++]^rr[nr++],ar=tr[er++]^rr[nr++],cr=tr[er++]^rr[nr++],lr=tr[er++]^rr[nr++],ur=tr[er++]^rr[nr++],dr=tr[er++]^rr[nr++],yr=tr[er++]^rr[nr++],mr=tr[er++]^rr[nr++],wr=tr[er++]^rr[nr++],xr=tr[er++]^rr[nr++],Or=tr[er++]^rr[nr++],Tr=tr[er++]^rr[nr++],Ar=tr[er++]^rr[nr++],Nr=tr[er++]^rr[nr++],Ur=tr[er++]^rr[nr++],Dr=tr[er++]^rr[nr++],Hr=or,zr=ar,Cr=cr,Mr=lr,Pr=ur,Sr=dr,pr=yr,gr=mr,fr=wr,hr=xr,br=Or,_r=Tr,$r=Ar,Er=Nr,vr=Ur,Ir=Dr;for(let Rr=0;Rr<8;Rr+=2)Pr^=rotl$1(Hr+$r|0,7),fr^=rotl$1(Pr+Hr|0,9),$r^=rotl$1(fr+Pr|0,13),Hr^=rotl$1($r+fr|0,18),hr^=rotl$1(Sr+zr|0,7),Er^=rotl$1(hr+Sr|0,9),zr^=rotl$1(Er+hr|0,13),Sr^=rotl$1(zr+Er|0,18),vr^=rotl$1(br+pr|0,7),Cr^=rotl$1(vr+br|0,9),pr^=rotl$1(Cr+vr|0,13),br^=rotl$1(pr+Cr|0,18),Mr^=rotl$1(Ir+_r|0,7),gr^=rotl$1(Mr+Ir|0,9),_r^=rotl$1(gr+Mr|0,13),Ir^=rotl$1(_r+gr|0,18),zr^=rotl$1(Hr+Mr|0,7),Cr^=rotl$1(zr+Hr|0,9),Mr^=rotl$1(Cr+zr|0,13),Hr^=rotl$1(Mr+Cr|0,18),pr^=rotl$1(Sr+Pr|0,7),gr^=rotl$1(pr+Sr|0,9),Pr^=rotl$1(gr+pr|0,13),Sr^=rotl$1(Pr+gr|0,18),_r^=rotl$1(br+hr|0,7),fr^=rotl$1(_r+br|0,9),hr^=rotl$1(fr+_r|0,13),br^=rotl$1(hr+fr|0,18),$r^=rotl$1(Ir+vr|0,7),Er^=rotl$1($r+Ir|0,9),vr^=rotl$1(Er+$r|0,13),Ir^=rotl$1(vr+Er|0,18);ir[sr++]=or+Hr|0,ir[sr++]=ar+zr|0,ir[sr++]=cr+Cr|0,ir[sr++]=lr+Mr|0,ir[sr++]=ur+Pr|0,ir[sr++]=dr+Sr|0,ir[sr++]=yr+pr|0,ir[sr++]=mr+gr|0,ir[sr++]=wr+fr|0,ir[sr++]=xr+hr|0,ir[sr++]=Or+br|0,ir[sr++]=Tr+_r|0,ir[sr++]=Ar+$r|0,ir[sr++]=Nr+Er|0,ir[sr++]=Ur+vr|0,ir[sr++]=Dr+Ir|0}function BlockMix(tr,er,rr,nr,ir){let sr=nr+0,or=nr+16*ir;for(let ar=0;ar<16;ar++)rr[or+ar]=tr[er+(2*ir-1)*16+ar];for(let ar=0;ar<ir;ar++,sr+=16,er+=16)XorAndSalsa(rr,or,tr,er,rr,sr),ar>0&&(or+=16),XorAndSalsa(rr,sr,tr,er+=16,rr,or)}function scryptInit(tr,er,rr){const nr=checkOpts$1({dkLen:32,asyncTick:10,maxmem:1073742848},rr),{N:ir,r:sr,p:or,dkLen:ar,asyncTick:cr,maxmem:lr,onProgress:ur}=nr;if(number$6(ir),number$6(sr),number$6(or),number$6(ar),number$6(cr),number$6(lr),ur!==void 0&&typeof ur!="function")throw new Error("progressCb should be function");const dr=128*sr,yr=dr/4;if(ir<=1||ir&ir-1||ir>=2**(dr/8)||ir>2**32)throw new Error("Scrypt: N must be larger than 1, a power of 2, less than 2^(128 * r / 8) and less than 2^32");if(or<0||or>(2**32-1)*32/dr)throw new Error("Scrypt: p must be a positive integer less than or equal to ((2^32 - 1) * 32) / (128 * r)");if(ar<0||ar>(2**32-1)*32)throw new Error("Scrypt: dkLen should be positive integer less than or equal to (2^32 - 1) * 32");const mr=dr*(ir+or);if(mr>lr)throw new Error(`Scrypt: parameters too large, ${mr} (128 * r * (N + p)) > ${lr} (maxmem)`);const wr=pbkdf2$1(sha256$4,tr,er,{c:1,dkLen:dr*or}),xr=u32$2(wr),Or=u32$2(new Uint8Array(dr*ir)),Tr=u32$2(new Uint8Array(dr));let Ar=()=>{};if(ur){const Nr=2*ir*or,Ur=Math.max(Math.floor(Nr/1e4),1);let Dr=0;Ar=()=>{Dr++,ur&&(!(Dr%Ur)||Dr===Nr)&&ur(Dr/Nr)}}return{N:ir,r:sr,p:or,dkLen:ar,blockSize32:yr,V:Or,B32:xr,B:wr,tmp:Tr,blockMixCb:Ar,asyncTick:cr}}function scryptOutput(tr,er,rr,nr,ir){const sr=pbkdf2$1(sha256$4,tr,rr,{c:1,dkLen:er});return rr.fill(0),nr.fill(0),ir.fill(0),sr}function scrypt$1(tr,er,rr){const{N:nr,r:ir,p:sr,dkLen:or,blockSize32:ar,V:cr,B32:lr,B:ur,tmp:dr,blockMixCb:yr}=scryptInit(tr,er,rr);for(let mr=0;mr<sr;mr++){const wr=ar*mr;for(let xr=0;xr<ar;xr++)cr[xr]=lr[wr+xr];for(let xr=0,Or=0;xr<nr-1;xr++)BlockMix(cr,Or,cr,Or+=ar,ir),yr();BlockMix(cr,(nr-1)*ar,lr,wr,ir),yr();for(let xr=0;xr<nr;xr++){const Or=lr[wr+ar-16]%nr;for(let Tr=0;Tr<ar;Tr++)dr[Tr]=lr[wr+Tr]^cr[Or*ar+Tr];BlockMix(dr,0,lr,wr,ir),yr()}}return scryptOutput(tr,or,ur,cr,dr)}async function scryptAsync(tr,er,rr){const{N:nr,r:ir,p:sr,dkLen:or,blockSize32:ar,V:cr,B32:lr,B:ur,tmp:dr,blockMixCb:yr,asyncTick:mr}=scryptInit(tr,er,rr);for(let wr=0;wr<sr;wr++){const xr=ar*wr;for(let Tr=0;Tr<ar;Tr++)cr[Tr]=lr[xr+Tr];let Or=0;await asyncLoop$1(nr-1,mr,()=>{BlockMix(cr,Or,cr,Or+=ar,ir),yr()}),BlockMix(cr,(nr-1)*ar,lr,xr,ir),yr(),await asyncLoop$1(nr,mr,()=>{const Tr=lr[xr+ar-16]%nr;for(let Ar=0;Ar<ar;Ar++)dr[Ar]=lr[xr+Ar]^cr[Tr*ar+Ar];BlockMix(dr,0,lr,xr,ir),yr()})}return scryptOutput(tr,or,ur,cr,dr)}let lockedSync=!1,lockedAsync=!1;const _scryptAsync=async function(tr,er,rr,nr,ir,sr,or){return await scryptAsync(tr,er,{N:rr,r:nr,p:ir,dkLen:sr,onProgress:or})},_scryptSync=function(tr,er,rr,nr,ir,sr){return scrypt$1(tr,er,{N:rr,r:nr,p:ir,dkLen:sr})};let __scryptAsync=_scryptAsync,__scryptSync=_scryptSync;async function scrypt(tr,er,rr,nr,ir,sr,or){const ar=getBytes(tr,"passwd"),cr=getBytes(er,"salt");return hexlify(await __scryptAsync(ar,cr,rr,nr,ir,sr,or))}scrypt._=_scryptAsync;scrypt.lock=function(){lockedAsync=!0};scrypt.register=function(tr){if(lockedAsync)throw new Error("scrypt is locked");__scryptAsync=tr};Object.freeze(scrypt);function scryptSync(tr,er,rr,nr,ir,sr){const or=getBytes(tr,"passwd"),ar=getBytes(er,"salt");return hexlify(__scryptSync(or,ar,rr,nr,ir,sr))}scryptSync._=_scryptSync;scryptSync.lock=function(){lockedSync=!0};scryptSync.register=function(tr){if(lockedSync)throw new Error("scryptSync is locked");__scryptSync=tr};Object.freeze(scryptSync);const _sha256=function(tr){return createHash("sha256").update(tr).digest()};let __sha256=_sha256,locked256=!1;function sha256$3(tr){const er=getBytes(tr,"data");return hexlify(__sha256(er))}sha256$3._=_sha256;sha256$3.lock=function(){locked256=!0};sha256$3.register=function(tr){if(locked256)throw new Error("sha256 is locked");__sha256=tr};Object.freeze(sha256$3);Object.freeze(sha256$3);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const _0n$f=BigInt(0),_1n$h=BigInt(1),_2n$c=BigInt(2),u8a$2=tr=>tr instanceof Uint8Array,hexes$5=Array.from({length:256},(tr,er)=>er.toString(16).padStart(2,"0"));function bytesToHex$9(tr){if(!u8a$2(tr))throw new Error("Uint8Array expected");let er="";for(let rr=0;rr<tr.length;rr++)er+=hexes$5[tr[rr]];return er}function numberToHexUnpadded$3(tr){const er=tr.toString(16);return er.length&1?`0${er}`:er}function hexToNumber$6(tr){if(typeof tr!="string")throw new Error("hex string expected, got "+typeof tr);return BigInt(tr===""?"0":`0x${tr}`)}function hexToBytes$a(tr){if(typeof tr!="string")throw new Error("hex string expected, got "+typeof tr);const er=tr.length;if(er%2)throw new Error("padded hex string expected, got unpadded hex of length "+er);const rr=new Uint8Array(er/2);for(let nr=0;nr<rr.length;nr++){const ir=nr*2,sr=tr.slice(ir,ir+2),or=Number.parseInt(sr,16);if(Number.isNaN(or)||or<0)throw new Error("Invalid byte sequence");rr[nr]=or}return rr}function bytesToNumberBE$2(tr){return hexToNumber$6(bytesToHex$9(tr))}function bytesToNumberLE$2(tr){if(!u8a$2(tr))throw new Error("Uint8Array expected");return hexToNumber$6(bytesToHex$9(Uint8Array.from(tr).reverse()))}function numberToBytesBE$2(tr,er){return hexToBytes$a(tr.toString(16).padStart(er*2,"0"))}function numberToBytesLE$2(tr,er){return numberToBytesBE$2(tr,er).reverse()}function numberToVarBytesBE$2(tr){return hexToBytes$a(numberToHexUnpadded$3(tr))}function ensureBytes$3(tr,er,rr){let nr;if(typeof er=="string")try{nr=hexToBytes$a(er)}catch(sr){throw new Error(`${tr} must be valid hex string, got "${er}". Cause: ${sr}`)}else if(u8a$2(er))nr=Uint8Array.from(er);else throw new Error(`${tr} must be hex string or Uint8Array`);const ir=nr.length;if(typeof rr=="number"&&ir!==rr)throw new Error(`${tr} expected ${rr} bytes, got ${ir}`);return nr}function concatBytes$9(...tr){const er=new Uint8Array(tr.reduce((nr,ir)=>nr+ir.length,0));let rr=0;return tr.forEach(nr=>{if(!u8a$2(nr))throw new Error("Uint8Array expected");er.set(nr,rr),rr+=nr.length}),er}function equalBytes$2(tr,er){if(tr.length!==er.length)return!1;for(let rr=0;rr<tr.length;rr++)if(tr[rr]!==er[rr])return!1;return!0}function utf8ToBytes$6(tr){if(typeof tr!="string")throw new Error(`utf8ToBytes expected string, got ${typeof tr}`);return new Uint8Array(new TextEncoder().encode(tr))}function bitLen$2(tr){let er;for(er=0;tr>_0n$f;tr>>=_1n$h,er+=1);return er}function bitGet$2(tr,er){return tr>>BigInt(er)&_1n$h}const bitSet$2=(tr,er,rr)=>tr|(rr?_1n$h:_0n$f)<<BigInt(er),bitMask$2=tr=>(_2n$c<<BigInt(tr-1))-_1n$h,u8n$2=tr=>new Uint8Array(tr),u8fr$2=tr=>Uint8Array.from(tr);function createHmacDrbg$2(tr,er,rr){if(typeof tr!="number"||tr<2)throw new Error("hashLen must be a number");if(typeof er!="number"||er<2)throw new Error("qByteLen must be a number");if(typeof rr!="function")throw new Error("hmacFn must be a function");let nr=u8n$2(tr),ir=u8n$2(tr),sr=0;const or=()=>{nr.fill(1),ir.fill(0),sr=0},ar=(...dr)=>rr(ir,nr,...dr),cr=(dr=u8n$2())=>{ir=ar(u8fr$2([0]),dr),nr=ar(),dr.length!==0&&(ir=ar(u8fr$2([1]),dr),nr=ar())},lr=()=>{if(sr++>=1e3)throw new Error("drbg: tried 1000 values");let dr=0;const yr=[];for(;dr<er;){nr=ar();const mr=nr.slice();yr.push(mr),dr+=nr.length}return concatBytes$9(...yr)};return(dr,yr)=>{or(),cr(dr);let mr;for(;!(mr=yr(lr()));)cr();return or(),mr}}const validatorFns$2={bigint:tr=>typeof tr=="bigint",function:tr=>typeof tr=="function",boolean:tr=>typeof tr=="boolean",string:tr=>typeof tr=="string",stringOrUint8Array:tr=>typeof tr=="string"||tr instanceof Uint8Array,isSafeInteger:tr=>Number.isSafeInteger(tr),array:tr=>Array.isArray(tr),field:(tr,er)=>er.Fp.isValid(tr),hash:tr=>typeof tr=="function"&&Number.isSafeInteger(tr.outputLen)};function validateObject$5(tr,er,rr={}){const nr=(ir,sr,or)=>{const ar=validatorFns$2[sr];if(typeof ar!="function")throw new Error(`Invalid validator "${sr}", expected function`);const cr=tr[ir];if(!(or&&cr===void 0)&&!ar(cr,tr))throw new Error(`Invalid param ${String(ir)}=${cr} (${typeof cr}), expected ${sr}`)};for(const[ir,sr]of Object.entries(er))nr(ir,sr,!1);for(const[ir,sr]of Object.entries(rr))nr(ir,sr,!0);return tr}const ut$3=Object.freeze(Object.defineProperty({__proto__:null,bitGet:bitGet$2,bitLen:bitLen$2,bitMask:bitMask$2,bitSet:bitSet$2,bytesToHex:bytesToHex$9,bytesToNumberBE:bytesToNumberBE$2,bytesToNumberLE:bytesToNumberLE$2,concatBytes:concatBytes$9,createHmacDrbg:createHmacDrbg$2,ensureBytes:ensureBytes$3,equalBytes:equalBytes$2,hexToBytes:hexToBytes$a,hexToNumber:hexToNumber$6,numberToBytesBE:numberToBytesBE$2,numberToBytesLE:numberToBytesLE$2,numberToHexUnpadded:numberToHexUnpadded$3,numberToVarBytesBE:numberToVarBytesBE$2,utf8ToBytes:utf8ToBytes$6,validateObject:validateObject$5},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const _0n$e=BigInt(0),_1n$g=BigInt(1),_2n$b=BigInt(2),_3n$6=BigInt(3),_4n$3=BigInt(4),_5n$2=BigInt(5),_8n$3=BigInt(8);BigInt(9);BigInt(16);function mod$3(tr,er){const rr=tr%er;return rr>=_0n$e?rr:er+rr}function pow$2(tr,er,rr){if(rr<=_0n$e||er<_0n$e)throw new Error("Expected power/modulo > 0");if(rr===_1n$g)return _0n$e;let nr=_1n$g;for(;er>_0n$e;)er&_1n$g&&(nr=nr*tr%rr),tr=tr*tr%rr,er>>=_1n$g;return nr}function pow2$3(tr,er,rr){let nr=tr;for(;er-- >_0n$e;)nr*=nr,nr%=rr;return nr}function invert$3(tr,er){if(tr===_0n$e||er<=_0n$e)throw new Error(`invert: expected positive integers, got n=${tr} mod=${er}`);let rr=mod$3(tr,er),nr=er,ir=_0n$e,sr=_1n$g;for(;rr!==_0n$e;){const ar=nr/rr,cr=nr%rr,lr=ir-sr*ar;nr=rr,rr=cr,ir=sr,sr=lr}if(nr!==_1n$g)throw new Error("invert: does not exist");return mod$3(ir,er)}function tonelliShanks$2(tr){const er=(tr-_1n$g)/_2n$b;let rr,nr,ir;for(rr=tr-_1n$g,nr=0;rr%_2n$b===_0n$e;rr/=_2n$b,nr++);for(ir=_2n$b;ir<tr&&pow$2(ir,er,tr)!==tr-_1n$g;ir++);if(nr===1){const or=(tr+_1n$g)/_4n$3;return function(cr,lr){const ur=cr.pow(lr,or);if(!cr.eql(cr.sqr(ur),lr))throw new Error("Cannot find square root");return ur}}const sr=(rr+_1n$g)/_2n$b;return function(ar,cr){if(ar.pow(cr,er)===ar.neg(ar.ONE))throw new Error("Cannot find square root");let lr=nr,ur=ar.pow(ar.mul(ar.ONE,ir),rr),dr=ar.pow(cr,sr),yr=ar.pow(cr,rr);for(;!ar.eql(yr,ar.ONE);){if(ar.eql(yr,ar.ZERO))return ar.ZERO;let mr=1;for(let xr=ar.sqr(yr);mr<lr&&!ar.eql(xr,ar.ONE);mr++)xr=ar.sqr(xr);const wr=ar.pow(ur,_1n$g<<BigInt(lr-mr-1));ur=ar.sqr(wr),dr=ar.mul(dr,wr),yr=ar.mul(yr,ur),lr=mr}return dr}}function FpSqrt$2(tr){if(tr%_4n$3===_3n$6){const er=(tr+_1n$g)/_4n$3;return function(nr,ir){const sr=nr.pow(ir,er);if(!nr.eql(nr.sqr(sr),ir))throw new Error("Cannot find square root");return sr}}if(tr%_8n$3===_5n$2){const er=(tr-_5n$2)/_8n$3;return function(nr,ir){const sr=nr.mul(ir,_2n$b),or=nr.pow(sr,er),ar=nr.mul(ir,or),cr=nr.mul(nr.mul(ar,_2n$b),or),lr=nr.mul(ar,nr.sub(cr,nr.ONE));if(!nr.eql(nr.sqr(lr),ir))throw new Error("Cannot find square root");return lr}}return tonelliShanks$2(tr)}const FIELD_FIELDS$2=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function validateField$2(tr){const er={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},rr=FIELD_FIELDS$2.reduce((nr,ir)=>(nr[ir]="function",nr),er);return validateObject$5(tr,rr)}function FpPow$2(tr,er,rr){if(rr<_0n$e)throw new Error("Expected power > 0");if(rr===_0n$e)return tr.ONE;if(rr===_1n$g)return er;let nr=tr.ONE,ir=er;for(;rr>_0n$e;)rr&_1n$g&&(nr=tr.mul(nr,ir)),ir=tr.sqr(ir),rr>>=_1n$g;return nr}function FpInvertBatch$2(tr,er){const rr=new Array(er.length),nr=er.reduce((sr,or,ar)=>tr.is0(or)?sr:(rr[ar]=sr,tr.mul(sr,or)),tr.ONE),ir=tr.inv(nr);return er.reduceRight((sr,or,ar)=>tr.is0(or)?sr:(rr[ar]=tr.mul(sr,rr[ar]),tr.mul(sr,or)),ir),rr}function nLength$2(tr,er){const rr=er!==void 0?er:tr.toString(2).length,nr=Math.ceil(rr/8);return{nBitLength:rr,nByteLength:nr}}function Field$2(tr,er,rr=!1,nr={}){if(tr<=_0n$e)throw new Error(`Expected Field ORDER > 0, got ${tr}`);const{nBitLength:ir,nByteLength:sr}=nLength$2(tr,er);if(sr>2048)throw new Error("Field lengths over 2048 bytes are not supported");const or=FpSqrt$2(tr),ar=Object.freeze({ORDER:tr,BITS:ir,BYTES:sr,MASK:bitMask$2(ir),ZERO:_0n$e,ONE:_1n$g,create:cr=>mod$3(cr,tr),isValid:cr=>{if(typeof cr!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof cr}`);return _0n$e<=cr&&cr<tr},is0:cr=>cr===_0n$e,isOdd:cr=>(cr&_1n$g)===_1n$g,neg:cr=>mod$3(-cr,tr),eql:(cr,lr)=>cr===lr,sqr:cr=>mod$3(cr*cr,tr),add:(cr,lr)=>mod$3(cr+lr,tr),sub:(cr,lr)=>mod$3(cr-lr,tr),mul:(cr,lr)=>mod$3(cr*lr,tr),pow:(cr,lr)=>FpPow$2(ar,cr,lr),div:(cr,lr)=>mod$3(cr*invert$3(lr,tr),tr),sqrN:cr=>cr*cr,addN:(cr,lr)=>cr+lr,subN:(cr,lr)=>cr-lr,mulN:(cr,lr)=>cr*lr,inv:cr=>invert$3(cr,tr),sqrt:nr.sqrt||(cr=>or(ar,cr)),invertBatch:cr=>FpInvertBatch$2(ar,cr),cmov:(cr,lr,ur)=>ur?lr:cr,toBytes:cr=>rr?numberToBytesLE$2(cr,sr):numberToBytesBE$2(cr,sr),fromBytes:cr=>{if(cr.length!==sr)throw new Error(`Fp.fromBytes: expected ${sr}, got ${cr.length}`);return rr?bytesToNumberLE$2(cr):bytesToNumberBE$2(cr)}});return Object.freeze(ar)}function getFieldBytesLength$2(tr){if(typeof tr!="bigint")throw new Error("field order must be bigint");const er=tr.toString(2).length;return Math.ceil(er/8)}function getMinHashLength$2(tr){const er=getFieldBytesLength$2(tr);return er+Math.ceil(er/2)}function mapHashToField$2(tr,er,rr=!1){const nr=tr.length,ir=getFieldBytesLength$2(er),sr=getMinHashLength$2(er);if(nr<16||nr<sr||nr>1024)throw new Error(`expected ${sr}-1024 bytes of input, got ${nr}`);const or=rr?bytesToNumberBE$2(tr):bytesToNumberLE$2(tr),ar=mod$3(or,er-_1n$g)+_1n$g;return rr?numberToBytesLE$2(ar,ir):numberToBytesBE$2(ar,ir)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const _0n$d=BigInt(0),_1n$f=BigInt(1);function wNAF$2(tr,er){const rr=(ir,sr)=>{const or=sr.negate();return ir?or:sr},nr=ir=>{const sr=Math.ceil(er/ir)+1,or=2**(ir-1);return{windows:sr,windowSize:or}};return{constTimeNegate:rr,unsafeLadder(ir,sr){let or=tr.ZERO,ar=ir;for(;sr>_0n$d;)sr&_1n$f&&(or=or.add(ar)),ar=ar.double(),sr>>=_1n$f;return or},precomputeWindow(ir,sr){const{windows:or,windowSize:ar}=nr(sr),cr=[];let lr=ir,ur=lr;for(let dr=0;dr<or;dr++){ur=lr,cr.push(ur);for(let yr=1;yr<ar;yr++)ur=ur.add(lr),cr.push(ur);lr=ur.double()}return cr},wNAF(ir,sr,or){const{windows:ar,windowSize:cr}=nr(ir);let lr=tr.ZERO,ur=tr.BASE;const dr=BigInt(2**ir-1),yr=2**ir,mr=BigInt(ir);for(let wr=0;wr<ar;wr++){const xr=wr*cr;let Or=Number(or&dr);or>>=mr,Or>cr&&(Or-=yr,or+=_1n$f);const Tr=xr,Ar=xr+Math.abs(Or)-1,Nr=wr%2!==0,Ur=Or<0;Or===0?ur=ur.add(rr(Nr,sr[Tr])):lr=lr.add(rr(Ur,sr[Ar]))}return{p:lr,f:ur}},wNAFCached(ir,sr,or,ar){const cr=ir._WINDOW_SIZE||1;let lr=sr.get(ir);return lr||(lr=this.precomputeWindow(ir,cr),cr!==1&&sr.set(ir,ar(lr))),this.wNAF(cr,lr,or)}}}function validateBasic$2(tr){return validateField$2(tr.Fp),validateObject$5(tr,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...nLength$2(tr.n,tr.nBitLength),...tr,p:tr.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function validatePointOpts$2(tr){const er=validateBasic$2(tr);validateObject$5(er,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:rr,Fp:nr,a:ir}=er;if(rr){if(!nr.eql(ir,nr.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof rr!="object"||typeof rr.beta!="bigint"||typeof rr.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...er})}const{bytesToNumberBE:b2n$2,hexToBytes:h2b$2}=ut$3,DER$2={Err:class extends Error{constructor(er=""){super(er)}},_parseInt(tr){const{Err:er}=DER$2;if(tr.length<2||tr[0]!==2)throw new er("Invalid signature integer tag");const rr=tr[1],nr=tr.subarray(2,rr+2);if(!rr||nr.length!==rr)throw new er("Invalid signature integer: wrong length");if(nr[0]&128)throw new er("Invalid signature integer: negative");if(nr[0]===0&&!(nr[1]&128))throw new er("Invalid signature integer: unnecessary leading zero");return{d:b2n$2(nr),l:tr.subarray(rr+2)}},toSig(tr){const{Err:er}=DER$2,rr=typeof tr=="string"?h2b$2(tr):tr;if(!(rr instanceof Uint8Array))throw new Error("ui8a expected");let nr=rr.length;if(nr<2||rr[0]!=48)throw new er("Invalid signature tag");if(rr[1]!==nr-2)throw new er("Invalid signature: incorrect length");const{d:ir,l:sr}=DER$2._parseInt(rr.subarray(2)),{d:or,l:ar}=DER$2._parseInt(sr);if(ar.length)throw new er("Invalid signature: left bytes after parsing");return{r:ir,s:or}},hexFromSig(tr){const er=lr=>Number.parseInt(lr[0],16)&8?"00"+lr:lr,rr=lr=>{const ur=lr.toString(16);return ur.length&1?`0${ur}`:ur},nr=er(rr(tr.s)),ir=er(rr(tr.r)),sr=nr.length/2,or=ir.length/2,ar=rr(sr),cr=rr(or);return`30${rr(or+sr+4)}02${cr}${ir}02${ar}${nr}`}},_0n$c=BigInt(0),_1n$e=BigInt(1);BigInt(2);const _3n$5=BigInt(3);BigInt(4);function weierstrassPoints$2(tr){const er=validatePointOpts$2(tr),{Fp:rr}=er,nr=er.toBytes||((wr,xr,Or)=>{const Tr=xr.toAffine();return concatBytes$9(Uint8Array.from([4]),rr.toBytes(Tr.x),rr.toBytes(Tr.y))}),ir=er.fromBytes||(wr=>{const xr=wr.subarray(1),Or=rr.fromBytes(xr.subarray(0,rr.BYTES)),Tr=rr.fromBytes(xr.subarray(rr.BYTES,2*rr.BYTES));return{x:Or,y:Tr}});function sr(wr){const{a:xr,b:Or}=er,Tr=rr.sqr(wr),Ar=rr.mul(Tr,wr);return rr.add(rr.add(Ar,rr.mul(wr,xr)),Or)}if(!rr.eql(rr.sqr(er.Gy),sr(er.Gx)))throw new Error("bad generator point: equation left != right");function or(wr){return typeof wr=="bigint"&&_0n$c<wr&&wr<er.n}function ar(wr){if(!or(wr))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function cr(wr){const{allowedPrivateKeyLengths:xr,nByteLength:Or,wrapPrivateKey:Tr,n:Ar}=er;if(xr&&typeof wr!="bigint"){if(wr instanceof Uint8Array&&(wr=bytesToHex$9(wr)),typeof wr!="string"||!xr.includes(wr.length))throw new Error("Invalid key");wr=wr.padStart(Or*2,"0")}let Nr;try{Nr=typeof wr=="bigint"?wr:bytesToNumberBE$2(ensureBytes$3("private key",wr,Or))}catch{throw new Error(`private key must be ${Or} bytes, hex or bigint, not ${typeof wr}`)}return Tr&&(Nr=mod$3(Nr,Ar)),ar(Nr),Nr}const lr=new Map;function ur(wr){if(!(wr instanceof dr))throw new Error("ProjectivePoint expected")}class dr{constructor(xr,Or,Tr){if(this.px=xr,this.py=Or,this.pz=Tr,xr==null||!rr.isValid(xr))throw new Error("x required");if(Or==null||!rr.isValid(Or))throw new Error("y required");if(Tr==null||!rr.isValid(Tr))throw new Error("z required")}static fromAffine(xr){const{x:Or,y:Tr}=xr||{};if(!xr||!rr.isValid(Or)||!rr.isValid(Tr))throw new Error("invalid affine point");if(xr instanceof dr)throw new Error("projective point not allowed");const Ar=Nr=>rr.eql(Nr,rr.ZERO);return Ar(Or)&&Ar(Tr)?dr.ZERO:new dr(Or,Tr,rr.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(xr){const Or=rr.invertBatch(xr.map(Tr=>Tr.pz));return xr.map((Tr,Ar)=>Tr.toAffine(Or[Ar])).map(dr.fromAffine)}static fromHex(xr){const Or=dr.fromAffine(ir(ensureBytes$3("pointHex",xr)));return Or.assertValidity(),Or}static fromPrivateKey(xr){return dr.BASE.multiply(cr(xr))}_setWindowSize(xr){this._WINDOW_SIZE=xr,lr.delete(this)}assertValidity(){if(this.is0()){if(er.allowInfinityPoint&&!rr.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:xr,y:Or}=this.toAffine();if(!rr.isValid(xr)||!rr.isValid(Or))throw new Error("bad point: x or y not FE");const Tr=rr.sqr(Or),Ar=sr(xr);if(!rr.eql(Tr,Ar))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:xr}=this.toAffine();if(rr.isOdd)return!rr.isOdd(xr);throw new Error("Field doesn't support isOdd")}equals(xr){ur(xr);const{px:Or,py:Tr,pz:Ar}=this,{px:Nr,py:Ur,pz:Dr}=xr,Hr=rr.eql(rr.mul(Or,Dr),rr.mul(Nr,Ar)),zr=rr.eql(rr.mul(Tr,Dr),rr.mul(Ur,Ar));return Hr&&zr}negate(){return new dr(this.px,rr.neg(this.py),this.pz)}double(){const{a:xr,b:Or}=er,Tr=rr.mul(Or,_3n$5),{px:Ar,py:Nr,pz:Ur}=this;let Dr=rr.ZERO,Hr=rr.ZERO,zr=rr.ZERO,Cr=rr.mul(Ar,Ar),Mr=rr.mul(Nr,Nr),Pr=rr.mul(Ur,Ur),Sr=rr.mul(Ar,Nr);return Sr=rr.add(Sr,Sr),zr=rr.mul(Ar,Ur),zr=rr.add(zr,zr),Dr=rr.mul(xr,zr),Hr=rr.mul(Tr,Pr),Hr=rr.add(Dr,Hr),Dr=rr.sub(Mr,Hr),Hr=rr.add(Mr,Hr),Hr=rr.mul(Dr,Hr),Dr=rr.mul(Sr,Dr),zr=rr.mul(Tr,zr),Pr=rr.mul(xr,Pr),Sr=rr.sub(Cr,Pr),Sr=rr.mul(xr,Sr),Sr=rr.add(Sr,zr),zr=rr.add(Cr,Cr),Cr=rr.add(zr,Cr),Cr=rr.add(Cr,Pr),Cr=rr.mul(Cr,Sr),Hr=rr.add(Hr,Cr),Pr=rr.mul(Nr,Ur),Pr=rr.add(Pr,Pr),Cr=rr.mul(Pr,Sr),Dr=rr.sub(Dr,Cr),zr=rr.mul(Pr,Mr),zr=rr.add(zr,zr),zr=rr.add(zr,zr),new dr(Dr,Hr,zr)}add(xr){ur(xr);const{px:Or,py:Tr,pz:Ar}=this,{px:Nr,py:Ur,pz:Dr}=xr;let Hr=rr.ZERO,zr=rr.ZERO,Cr=rr.ZERO;const Mr=er.a,Pr=rr.mul(er.b,_3n$5);let Sr=rr.mul(Or,Nr),pr=rr.mul(Tr,Ur),gr=rr.mul(Ar,Dr),fr=rr.add(Or,Tr),hr=rr.add(Nr,Ur);fr=rr.mul(fr,hr),hr=rr.add(Sr,pr),fr=rr.sub(fr,hr),hr=rr.add(Or,Ar);let br=rr.add(Nr,Dr);return hr=rr.mul(hr,br),br=rr.add(Sr,gr),hr=rr.sub(hr,br),br=rr.add(Tr,Ar),Hr=rr.add(Ur,Dr),br=rr.mul(br,Hr),Hr=rr.add(pr,gr),br=rr.sub(br,Hr),Cr=rr.mul(Mr,hr),Hr=rr.mul(Pr,gr),Cr=rr.add(Hr,Cr),Hr=rr.sub(pr,Cr),Cr=rr.add(pr,Cr),zr=rr.mul(Hr,Cr),pr=rr.add(Sr,Sr),pr=rr.add(pr,Sr),gr=rr.mul(Mr,gr),hr=rr.mul(Pr,hr),pr=rr.add(pr,gr),gr=rr.sub(Sr,gr),gr=rr.mul(Mr,gr),hr=rr.add(hr,gr),Sr=rr.mul(pr,hr),zr=rr.add(zr,Sr),Sr=rr.mul(br,hr),Hr=rr.mul(fr,Hr),Hr=rr.sub(Hr,Sr),Sr=rr.mul(fr,pr),Cr=rr.mul(br,Cr),Cr=rr.add(Cr,Sr),new dr(Hr,zr,Cr)}subtract(xr){return this.add(xr.negate())}is0(){return this.equals(dr.ZERO)}wNAF(xr){return mr.wNAFCached(this,lr,xr,Or=>{const Tr=rr.invertBatch(Or.map(Ar=>Ar.pz));return Or.map((Ar,Nr)=>Ar.toAffine(Tr[Nr])).map(dr.fromAffine)})}multiplyUnsafe(xr){const Or=dr.ZERO;if(xr===_0n$c)return Or;if(ar(xr),xr===_1n$e)return this;const{endo:Tr}=er;if(!Tr)return mr.unsafeLadder(this,xr);let{k1neg:Ar,k1:Nr,k2neg:Ur,k2:Dr}=Tr.splitScalar(xr),Hr=Or,zr=Or,Cr=this;for(;Nr>_0n$c||Dr>_0n$c;)Nr&_1n$e&&(Hr=Hr.add(Cr)),Dr&_1n$e&&(zr=zr.add(Cr)),Cr=Cr.double(),Nr>>=_1n$e,Dr>>=_1n$e;return Ar&&(Hr=Hr.negate()),Ur&&(zr=zr.negate()),zr=new dr(rr.mul(zr.px,Tr.beta),zr.py,zr.pz),Hr.add(zr)}multiply(xr){ar(xr);let Or=xr,Tr,Ar;const{endo:Nr}=er;if(Nr){const{k1neg:Ur,k1:Dr,k2neg:Hr,k2:zr}=Nr.splitScalar(Or);let{p:Cr,f:Mr}=this.wNAF(Dr),{p:Pr,f:Sr}=this.wNAF(zr);Cr=mr.constTimeNegate(Ur,Cr),Pr=mr.constTimeNegate(Hr,Pr),Pr=new dr(rr.mul(Pr.px,Nr.beta),Pr.py,Pr.pz),Tr=Cr.add(Pr),Ar=Mr.add(Sr)}else{const{p:Ur,f:Dr}=this.wNAF(Or);Tr=Ur,Ar=Dr}return dr.normalizeZ([Tr,Ar])[0]}multiplyAndAddUnsafe(xr,Or,Tr){const Ar=dr.BASE,Nr=(Dr,Hr)=>Hr===_0n$c||Hr===_1n$e||!Dr.equals(Ar)?Dr.multiplyUnsafe(Hr):Dr.multiply(Hr),Ur=Nr(this,Or).add(Nr(xr,Tr));return Ur.is0()?void 0:Ur}toAffine(xr){const{px:Or,py:Tr,pz:Ar}=this,Nr=this.is0();xr==null&&(xr=Nr?rr.ONE:rr.inv(Ar));const Ur=rr.mul(Or,xr),Dr=rr.mul(Tr,xr),Hr=rr.mul(Ar,xr);if(Nr)return{x:rr.ZERO,y:rr.ZERO};if(!rr.eql(Hr,rr.ONE))throw new Error("invZ was invalid");return{x:Ur,y:Dr}}isTorsionFree(){const{h:xr,isTorsionFree:Or}=er;if(xr===_1n$e)return!0;if(Or)return Or(dr,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:xr,clearCofactor:Or}=er;return xr===_1n$e?this:Or?Or(dr,this):this.multiplyUnsafe(er.h)}toRawBytes(xr=!0){return this.assertValidity(),nr(dr,this,xr)}toHex(xr=!0){return bytesToHex$9(this.toRawBytes(xr))}}dr.BASE=new dr(er.Gx,er.Gy,rr.ONE),dr.ZERO=new dr(rr.ZERO,rr.ONE,rr.ZERO);const yr=er.nBitLength,mr=wNAF$2(dr,er.endo?Math.ceil(yr/2):yr);return{CURVE:er,ProjectivePoint:dr,normPrivateKeyToScalar:cr,weierstrassEquation:sr,isWithinCurveOrder:or}}function validateOpts$2(tr){const er=validateBasic$2(tr);return validateObject$5(er,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...er})}function weierstrass$3(tr){const er=validateOpts$2(tr),{Fp:rr,n:nr}=er,ir=rr.BYTES+1,sr=2*rr.BYTES+1;function or(hr){return _0n$c<hr&&hr<rr.ORDER}function ar(hr){return mod$3(hr,nr)}function cr(hr){return invert$3(hr,nr)}const{ProjectivePoint:lr,normPrivateKeyToScalar:ur,weierstrassEquation:dr,isWithinCurveOrder:yr}=weierstrassPoints$2({...er,toBytes(hr,br,_r){const $r=br.toAffine(),Er=rr.toBytes($r.x),vr=concatBytes$9;return _r?vr(Uint8Array.from([br.hasEvenY()?2:3]),Er):vr(Uint8Array.from([4]),Er,rr.toBytes($r.y))},fromBytes(hr){const br=hr.length,_r=hr[0],$r=hr.subarray(1);if(br===ir&&(_r===2||_r===3)){const Er=bytesToNumberBE$2($r);if(!or(Er))throw new Error("Point is not on curve");const vr=dr(Er);let Ir=rr.sqrt(vr);const Rr=(Ir&_1n$e)===_1n$e;return(_r&1)===1!==Rr&&(Ir=rr.neg(Ir)),{x:Er,y:Ir}}else if(br===sr&&_r===4){const Er=rr.fromBytes($r.subarray(0,rr.BYTES)),vr=rr.fromBytes($r.subarray(rr.BYTES,2*rr.BYTES));return{x:Er,y:vr}}else throw new Error(`Point of length ${br} was invalid. Expected ${ir} compressed bytes or ${sr} uncompressed bytes`)}}),mr=hr=>bytesToHex$9(numberToBytesBE$2(hr,er.nByteLength));function wr(hr){const br=nr>>_1n$e;return hr>br}function xr(hr){return wr(hr)?ar(-hr):hr}const Or=(hr,br,_r)=>bytesToNumberBE$2(hr.slice(br,_r));class Tr{constructor(br,_r,$r){this.r=br,this.s=_r,this.recovery=$r,this.assertValidity()}static fromCompact(br){const _r=er.nByteLength;return br=ensureBytes$3("compactSignature",br,_r*2),new Tr(Or(br,0,_r),Or(br,_r,2*_r))}static fromDER(br){const{r:_r,s:$r}=DER$2.toSig(ensureBytes$3("DER",br));return new Tr(_r,$r)}assertValidity(){if(!yr(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!yr(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(br){return new Tr(this.r,this.s,br)}recoverPublicKey(br){const{r:_r,s:$r,recovery:Er}=this,vr=zr(ensureBytes$3("msgHash",br));if(Er==null||![0,1,2,3].includes(Er))throw new Error("recovery id invalid");const Ir=Er===2||Er===3?_r+er.n:_r;if(Ir>=rr.ORDER)throw new Error("recovery id 2 or 3 invalid");const Rr=Er&1?"03":"02",Br=lr.fromHex(Rr+mr(Ir)),Jr=cr(Ir),Wr=ar(-vr*Jr),qr=ar($r*Jr),an=lr.BASE.multiplyAndAddUnsafe(Br,Wr,qr);if(!an)throw new Error("point at infinify");return an.assertValidity(),an}hasHighS(){return wr(this.s)}normalizeS(){return this.hasHighS()?new Tr(this.r,ar(-this.s),this.recovery):this}toDERRawBytes(){return hexToBytes$a(this.toDERHex())}toDERHex(){return DER$2.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return hexToBytes$a(this.toCompactHex())}toCompactHex(){return mr(this.r)+mr(this.s)}}const Ar={isValidPrivateKey(hr){try{return ur(hr),!0}catch{return!1}},normPrivateKeyToScalar:ur,randomPrivateKey:()=>{const hr=getMinHashLength$2(er.n);return mapHashToField$2(er.randomBytes(hr),er.n)},precompute(hr=8,br=lr.BASE){return br._setWindowSize(hr),br.multiply(BigInt(3)),br}};function Nr(hr,br=!0){return lr.fromPrivateKey(hr).toRawBytes(br)}function Ur(hr){const br=hr instanceof Uint8Array,_r=typeof hr=="string",$r=(br||_r)&&hr.length;return br?$r===ir||$r===sr:_r?$r===2*ir||$r===2*sr:hr instanceof lr}function Dr(hr,br,_r=!0){if(Ur(hr))throw new Error("first arg must be private key");if(!Ur(br))throw new Error("second arg must be public key");return lr.fromHex(br).multiply(ur(hr)).toRawBytes(_r)}const Hr=er.bits2int||function(hr){const br=bytesToNumberBE$2(hr),_r=hr.length*8-er.nBitLength;return _r>0?br>>BigInt(_r):br},zr=er.bits2int_modN||function(hr){return ar(Hr(hr))},Cr=bitMask$2(er.nBitLength);function Mr(hr){if(typeof hr!="bigint")throw new Error("bigint expected");if(!(_0n$c<=hr&&hr<Cr))throw new Error(`bigint expected < 2^${er.nBitLength}`);return numberToBytesBE$2(hr,er.nByteLength)}function Pr(hr,br,_r=Sr){if(["recovered","canonical"].some(cn=>cn in _r))throw new Error("sign() legacy options not supported");const{hash:$r,randomBytes:Er}=er;let{lowS:vr,prehash:Ir,extraEntropy:Rr}=_r;vr==null&&(vr=!0),hr=ensureBytes$3("msgHash",hr),Ir&&(hr=ensureBytes$3("prehashed msgHash",$r(hr)));const Br=zr(hr),Jr=ur(br),Wr=[Mr(Jr),Mr(Br)];if(Rr!=null){const cn=Rr===!0?Er(rr.BYTES):Rr;Wr.push(ensureBytes$3("extraEntropy",cn))}const qr=concatBytes$9(...Wr),an=Br;function tn(cn){const dn=Hr(cn);if(!yr(dn))return;const Zr=cr(dn),Yr=lr.BASE.multiply(dn).toAffine(),Qr=ar(Yr.x);if(Qr===_0n$c)return;const un=ar(Zr*ar(an+Qr*Jr));if(un===_0n$c)return;let gn=(Yr.x===Qr?0:2)|Number(Yr.y&_1n$e),Rn=un;return vr&&wr(un)&&(Rn=xr(un),gn^=1),new Tr(Qr,Rn,gn)}return{seed:qr,k2sig:tn}}const Sr={lowS:er.lowS,prehash:!1},pr={lowS:er.lowS,prehash:!1};function gr(hr,br,_r=Sr){const{seed:$r,k2sig:Er}=Pr(hr,br,_r),vr=er;return createHmacDrbg$2(vr.hash.outputLen,vr.nByteLength,vr.hmac)($r,Er)}lr.BASE._setWindowSize(8);function fr(hr,br,_r,$r=pr){var Yr;const Er=hr;if(br=ensureBytes$3("msgHash",br),_r=ensureBytes$3("publicKey",_r),"strict"in $r)throw new Error("options.strict was renamed to lowS");const{lowS:vr,prehash:Ir}=$r;let Rr,Br;try{if(typeof Er=="string"||Er instanceof Uint8Array)try{Rr=Tr.fromDER(Er)}catch(Qr){if(!(Qr instanceof DER$2.Err))throw Qr;Rr=Tr.fromCompact(Er)}else if(typeof Er=="object"&&typeof Er.r=="bigint"&&typeof Er.s=="bigint"){const{r:Qr,s:un}=Er;Rr=new Tr(Qr,un)}else throw new Error("PARSE");Br=lr.fromHex(_r)}catch(Qr){if(Qr.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(vr&&Rr.hasHighS())return!1;Ir&&(br=er.hash(br));const{r:Jr,s:Wr}=Rr,qr=zr(br),an=cr(Wr),tn=ar(qr*an),cn=ar(Jr*an),dn=(Yr=lr.BASE.multiplyAndAddUnsafe(Br,tn,cn))==null?void 0:Yr.toAffine();return dn?ar(dn.x)===Jr:!1}return{CURVE:er,getPublicKey:Nr,getSharedSecret:Dr,sign:gr,verify:fr,ProjectivePoint:lr,Signature:Tr,utils:Ar}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function getHash$2(tr){return{hash:tr,hmac:(er,...rr)=>hmac$3(tr,er,concatBytes$a(...rr)),randomBytes:randomBytes$5}}function createCurve$2(tr,er){const rr=nr=>weierstrass$3({...tr,...getHash$2(nr)});return Object.freeze({...rr(er),create:rr})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const secp256k1P$2=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),secp256k1N$2=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),_1n$d=BigInt(1),_2n$a=BigInt(2),divNearest$3=(tr,er)=>(tr+er/_2n$a)/er;function sqrtMod$3(tr){const er=secp256k1P$2,rr=BigInt(3),nr=BigInt(6),ir=BigInt(11),sr=BigInt(22),or=BigInt(23),ar=BigInt(44),cr=BigInt(88),lr=tr*tr*tr%er,ur=lr*lr*tr%er,dr=pow2$3(ur,rr,er)*ur%er,yr=pow2$3(dr,rr,er)*ur%er,mr=pow2$3(yr,_2n$a,er)*lr%er,wr=pow2$3(mr,ir,er)*mr%er,xr=pow2$3(wr,sr,er)*wr%er,Or=pow2$3(xr,ar,er)*xr%er,Tr=pow2$3(Or,cr,er)*Or%er,Ar=pow2$3(Tr,ar,er)*xr%er,Nr=pow2$3(Ar,rr,er)*ur%er,Ur=pow2$3(Nr,or,er)*wr%er,Dr=pow2$3(Ur,nr,er)*lr%er,Hr=pow2$3(Dr,_2n$a,er);if(!Fp$2.eql(Fp$2.sqr(Hr),tr))throw new Error("Cannot find square root");return Hr}const Fp$2=Field$2(secp256k1P$2,void 0,void 0,{sqrt:sqrtMod$3}),secp256k1$6=createCurve$2({a:BigInt(0),b:BigInt(7),Fp:Fp$2,n:secp256k1N$2,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:tr=>{const er=secp256k1N$2,rr=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),nr=-_1n$d*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),ir=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),sr=rr,or=BigInt("0x100000000000000000000000000000000"),ar=divNearest$3(sr*tr,er),cr=divNearest$3(-nr*tr,er);let lr=mod$3(tr-ar*rr-cr*ir,er),ur=mod$3(-ar*nr-cr*sr,er);const dr=lr>or,yr=ur>or;if(dr&&(lr=er-lr),yr&&(ur=er-ur),lr>or||ur>or)throw new Error("splitScalar: Endomorphism failed, k="+tr);return{k1neg:dr,k1:lr,k2neg:yr,k2:ur}}}},sha256$4);BigInt(0);secp256k1$6.ProjectivePoint;const ZeroAddress="0x0000000000000000000000000000000000000000",ZeroHash="0x0000000000000000000000000000000000000000000000000000000000000000",MessagePrefix=`Ethereum Signed Message:
`,BN_0$4=BigInt(0),BN_1$2=BigInt(1),BN_2$1=BigInt(2),BN_27$1=BigInt(27),BN_28$1=BigInt(28),BN_35$1=BigInt(35),_guard$3={};function toUint256(tr){return zeroPadValue(toBeArray(tr),32)}var Eu,xu,$u,cu,na;let Signature$6=(na=class{constructor(er,rr,nr,ir){mo(this,Eu);mo(this,xu);mo(this,$u);mo(this,cu);assertPrivate(er,_guard$3,"Signature"),Zs(this,Eu,rr),Zs(this,xu,nr),Zs(this,$u,ir),Zs(this,cu,null)}get r(){return On(this,Eu)}set r(er){assertArgument(dataLength(er)===32,"invalid r","value",er),Zs(this,Eu,hexlify(er))}get s(){return On(this,xu)}set s(er){assertArgument(dataLength(er)===32,"invalid s","value",er);const rr=hexlify(er);assertArgument(parseInt(rr.substring(0,3))<8,"non-canonical s","value",rr),Zs(this,xu,rr)}get v(){return On(this,$u)}set v(er){const rr=getNumber(er,"value");assertArgument(rr===27||rr===28,"invalid v","v",er),Zs(this,$u,rr)}get networkV(){return On(this,cu)}get legacyChainId(){const er=this.networkV;return er==null?null:na.getChainId(er)}get yParity(){return this.v===27?0:1}get yParityAndS(){const er=getBytes(this.s);return this.yParity&&(er[0]|=128),hexlify(er)}get compactSerialized(){return concat$2([this.r,this.yParityAndS])}get serialized(){return concat$2([this.r,this.s,this.yParity?"0x1c":"0x1b"])}[Symbol.for("nodejs.util.inspect.custom")](){return`Signature { r: "${this.r}", s: "${this.s}", yParity: ${this.yParity}, networkV: ${this.networkV} }`}clone(){const er=new na(_guard$3,this.r,this.s,this.v);return this.networkV&&Zs(er,cu,this.networkV),er}toJSON(){const er=this.networkV;return{_type:"signature",networkV:er!=null?er.toString():null,r:this.r,s:this.s,v:this.v}}static getChainId(er){const rr=getBigInt(er,"v");return rr==BN_27$1||rr==BN_28$1?BN_0$4:(assertArgument(rr>=BN_35$1,"invalid EIP-155 v","v",er),(rr-BN_35$1)/BN_2$1)}static getChainIdV(er,rr){return getBigInt(er)*BN_2$1+BigInt(35+rr-27)}static getNormalizedV(er){const rr=getBigInt(er);return rr===BN_0$4||rr===BN_27$1?27:rr===BN_1$2||rr===BN_28$1?28:(assertArgument(rr>=BN_35$1,"invalid v","v",er),rr&BN_1$2?27:28)}static from(er){function rr(lr,ur){assertArgument(lr,ur,"signature",er)}if(er==null)return new na(_guard$3,ZeroHash,ZeroHash,27);if(typeof er=="string"){const lr=getBytes(er,"signature");if(lr.length===64){const ur=hexlify(lr.slice(0,32)),dr=lr.slice(32,64),yr=dr[0]&128?28:27;return dr[0]&=127,new na(_guard$3,ur,hexlify(dr),yr)}if(lr.length===65){const ur=hexlify(lr.slice(0,32)),dr=lr.slice(32,64);rr((dr[0]&128)===0,"non-canonical s");const yr=na.getNormalizedV(lr[64]);return new na(_guard$3,ur,hexlify(dr),yr)}rr(!1,"invalid raw signature length")}if(er instanceof na)return er.clone();const nr=er.r;rr(nr!=null,"missing r");const ir=toUint256(nr),sr=function(lr,ur){if(lr!=null)return toUint256(lr);if(ur!=null){rr(isHexString$6(ur,32),"invalid yParityAndS");const dr=getBytes(ur);return dr[0]&=127,hexlify(dr)}rr(!1,"missing s")}(er.s,er.yParityAndS);rr((getBytes(sr)[0]&128)==0,"non-canonical s");const{networkV:or,v:ar}=function(lr,ur,dr){if(lr!=null){const yr=getBigInt(lr);return{networkV:yr>=BN_35$1?yr:void 0,v:na.getNormalizedV(yr)}}if(ur!=null)return rr(isHexString$6(ur,32),"invalid yParityAndS"),{v:getBytes(ur)[0]&128?28:27};if(dr!=null){switch(getNumber(dr,"sig.yParity")){case 0:return{v:27};case 1:return{v:28}}rr(!1,"invalid yParity")}rr(!1,"missing v")}(er.v,er.yParityAndS,er.yParity),cr=new na(_guard$3,ir,sr,ar);return or&&Zs(cr,cu,or),rr(er.yParity==null||getNumber(er.yParity,"sig.yParity")===cr.yParity,"yParity mismatch"),rr(er.yParityAndS==null||er.yParityAndS===cr.yParityAndS,"yParityAndS mismatch"),cr}},Eu=new WeakMap,xu=new WeakMap,$u=new WeakMap,cu=new WeakMap,na);var Ml;const ru=class ru{constructor(er){mo(this,Ml);assertArgument(dataLength(er)===32,"invalid private key","privateKey","[REDACTED]"),Zs(this,Ml,hexlify(er))}get privateKey(){return On(this,Ml)}get publicKey(){return ru.computePublicKey(On(this,Ml))}get compressedPublicKey(){return ru.computePublicKey(On(this,Ml),!0)}sign(er){assertArgument(dataLength(er)===32,"invalid digest length","digest",er);const rr=secp256k1$6.sign(getBytesCopy(er),getBytesCopy(On(this,Ml)),{lowS:!0});return Signature$6.from({r:toBeHex(rr.r,32),s:toBeHex(rr.s,32),v:rr.recovery?28:27})}computeSharedSecret(er){const rr=ru.computePublicKey(er);return hexlify(secp256k1$6.getSharedSecret(getBytesCopy(On(this,Ml)),getBytes(rr),!1))}static computePublicKey(er,rr){let nr=getBytes(er,"key");if(nr.length===32){const sr=secp256k1$6.getPublicKey(nr,!!rr);return hexlify(sr)}if(nr.length===64){const sr=new Uint8Array(65);sr[0]=4,sr.set(nr,1),nr=sr}const ir=secp256k1$6.ProjectivePoint.fromHex(nr);return hexlify(ir.toRawBytes(rr))}static recoverPublicKey(er,rr){assertArgument(dataLength(er)===32,"invalid digest length","digest",er);const nr=Signature$6.from(rr);let ir=secp256k1$6.Signature.fromCompact(getBytesCopy(concat$2([nr.r,nr.s])));ir=ir.addRecoveryBit(nr.yParity);const sr=ir.recoverPublicKey(getBytesCopy(er));return assertArgument(sr!=null,"invalid signautre for digest","signature",rr),"0x"+sr.toHex(!1)}static addPoints(er,rr,nr){const ir=secp256k1$6.ProjectivePoint.fromHex(ru.computePublicKey(er).substring(2)),sr=secp256k1$6.ProjectivePoint.fromHex(ru.computePublicKey(rr).substring(2));return"0x"+ir.add(sr).toHex(!!nr)}};Ml=new WeakMap;let SigningKey=ru;const BN_0$3=BigInt(0),BN_36=BigInt(36);function getChecksumAddress(tr){tr=tr.toLowerCase();const er=tr.substring(2).split(""),rr=new Uint8Array(40);for(let ir=0;ir<40;ir++)rr[ir]=er[ir].charCodeAt(0);const nr=getBytes(keccak256$4(rr));for(let ir=0;ir<40;ir+=2)nr[ir>>1]>>4>=8&&(er[ir]=er[ir].toUpperCase()),(nr[ir>>1]&15)>=8&&(er[ir+1]=er[ir+1].toUpperCase());return"0x"+er.join("")}const ibanLookup={};for(let tr=0;tr<10;tr++)ibanLookup[String(tr)]=String(tr);for(let tr=0;tr<26;tr++)ibanLookup[String.fromCharCode(65+tr)]=String(10+tr);const safeDigits=15;function ibanChecksum(tr){tr=tr.toUpperCase(),tr=tr.substring(4)+tr.substring(0,2)+"00";let er=tr.split("").map(nr=>ibanLookup[nr]).join("");for(;er.length>=safeDigits;){let nr=er.substring(0,safeDigits);er=parseInt(nr,10)%97+er.substring(nr.length)}let rr=String(98-parseInt(er,10)%97);for(;rr.length<2;)rr="0"+rr;return rr}const Base36=function(){const tr={};for(let er=0;er<36;er++){const rr="0123456789abcdefghijklmnopqrstuvwxyz"[er];tr[rr]=BigInt(er)}return tr}();function fromBase36(tr){tr=tr.toLowerCase();let er=BN_0$3;for(let rr=0;rr<tr.length;rr++)er=er*BN_36+Base36[tr[rr]];return er}function getAddress$1(tr){if(assertArgument(typeof tr=="string","invalid address","address",tr),tr.match(/^(0x)?[0-9a-fA-F]{40}$/)){tr.startsWith("0x")||(tr="0x"+tr);const er=getChecksumAddress(tr);return assertArgument(!tr.match(/([A-F].*[a-f])|([a-f].*[A-F])/)||er===tr,"bad address checksum","address",tr),er}if(tr.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){assertArgument(tr.substring(2,4)===ibanChecksum(tr),"bad icap checksum","address",tr);let er=fromBase36(tr.substring(4)).toString(16);for(;er.length<40;)er="0"+er;return getChecksumAddress("0x"+er)}assertArgument(!1,"invalid address","address",tr)}function isAddressable(tr){return tr&&typeof tr.getAddress=="function"}async function checkAddress(tr,er){const rr=await er;return(rr==null||rr==="0x0000000000000000000000000000000000000000")&&(assert$r(typeof tr!="string","unconfigured name","UNCONFIGURED_NAME",{value:tr}),assertArgument(!1,"invalid AddressLike value; did not resolve to a value address","target",tr)),getAddress$1(rr)}function resolveAddress(tr,er){if(typeof tr=="string")return tr.match(/^0x[0-9a-f]{40}$/i)?getAddress$1(tr):(assert$r(er!=null,"ENS resolution requires a provider","UNSUPPORTED_OPERATION",{operation:"resolveName"}),checkAddress(tr,er.resolveName(tr)));if(isAddressable(tr))return checkAddress(tr,tr.getAddress());if(tr&&typeof tr.then=="function")return checkAddress(tr,tr);assertArgument(!1,"unsupported addressable value","target",tr)}const _gaurd={};function n$2(tr,er){let rr=!1;return er<0&&(rr=!0,er*=-1),new Typed(_gaurd,`${rr?"":"u"}int${er}`,tr,{signed:rr,width:er})}function b$2(tr,er){return new Typed(_gaurd,`bytes${er||""}`,tr,{size:er})}const _typedSymbol=Symbol.for("_ethers_typed");var lu;const Ol=class Ol{constructor(er,rr,nr,ir){Ys(this,"type");Ys(this,"value");mo(this,lu);Ys(this,"_typedSymbol");ir==null&&(ir=null),assertPrivate(_gaurd,er,"Typed"),defineProperties(this,{_typedSymbol,type:rr,value:nr}),Zs(this,lu,ir),this.format()}format(){if(this.type==="array")throw new Error("");if(this.type==="dynamicArray")throw new Error("");return this.type==="tuple"?`tuple(${this.value.map(er=>er.format()).join(",")})`:this.type}defaultValue(){return 0}minValue(){return 0}maxValue(){return 0}isBigInt(){return!!this.type.match(/^u?int[0-9]+$/)}isData(){return this.type.startsWith("bytes")}isString(){return this.type==="string"}get tupleName(){if(this.type!=="tuple")throw TypeError("not a tuple");return On(this,lu)}get arrayLength(){if(this.type!=="array")throw TypeError("not an array");return On(this,lu)===!0?-1:On(this,lu)===!1?this.value.length:null}static from(er,rr){return new Ol(_gaurd,er,rr)}static uint8(er){return n$2(er,8)}static uint16(er){return n$2(er,16)}static uint24(er){return n$2(er,24)}static uint32(er){return n$2(er,32)}static uint40(er){return n$2(er,40)}static uint48(er){return n$2(er,48)}static uint56(er){return n$2(er,56)}static uint64(er){return n$2(er,64)}static uint72(er){return n$2(er,72)}static uint80(er){return n$2(er,80)}static uint88(er){return n$2(er,88)}static uint96(er){return n$2(er,96)}static uint104(er){return n$2(er,104)}static uint112(er){return n$2(er,112)}static uint120(er){return n$2(er,120)}static uint128(er){return n$2(er,128)}static uint136(er){return n$2(er,136)}static uint144(er){return n$2(er,144)}static uint152(er){return n$2(er,152)}static uint160(er){return n$2(er,160)}static uint168(er){return n$2(er,168)}static uint176(er){return n$2(er,176)}static uint184(er){return n$2(er,184)}static uint192(er){return n$2(er,192)}static uint200(er){return n$2(er,200)}static uint208(er){return n$2(er,208)}static uint216(er){return n$2(er,216)}static uint224(er){return n$2(er,224)}static uint232(er){return n$2(er,232)}static uint240(er){return n$2(er,240)}static uint248(er){return n$2(er,248)}static uint256(er){return n$2(er,256)}static uint(er){return n$2(er,256)}static int8(er){return n$2(er,-8)}static int16(er){return n$2(er,-16)}static int24(er){return n$2(er,-24)}static int32(er){return n$2(er,-32)}static int40(er){return n$2(er,-40)}static int48(er){return n$2(er,-48)}static int56(er){return n$2(er,-56)}static int64(er){return n$2(er,-64)}static int72(er){return n$2(er,-72)}static int80(er){return n$2(er,-80)}static int88(er){return n$2(er,-88)}static int96(er){return n$2(er,-96)}static int104(er){return n$2(er,-104)}static int112(er){return n$2(er,-112)}static int120(er){return n$2(er,-120)}static int128(er){return n$2(er,-128)}static int136(er){return n$2(er,-136)}static int144(er){return n$2(er,-144)}static int152(er){return n$2(er,-152)}static int160(er){return n$2(er,-160)}static int168(er){return n$2(er,-168)}static int176(er){return n$2(er,-176)}static int184(er){return n$2(er,-184)}static int192(er){return n$2(er,-192)}static int200(er){return n$2(er,-200)}static int208(er){return n$2(er,-208)}static int216(er){return n$2(er,-216)}static int224(er){return n$2(er,-224)}static int232(er){return n$2(er,-232)}static int240(er){return n$2(er,-240)}static int248(er){return n$2(er,-248)}static int256(er){return n$2(er,-256)}static int(er){return n$2(er,-256)}static bytes1(er){return b$2(er,1)}static bytes2(er){return b$2(er,2)}static bytes3(er){return b$2(er,3)}static bytes4(er){return b$2(er,4)}static bytes5(er){return b$2(er,5)}static bytes6(er){return b$2(er,6)}static bytes7(er){return b$2(er,7)}static bytes8(er){return b$2(er,8)}static bytes9(er){return b$2(er,9)}static bytes10(er){return b$2(er,10)}static bytes11(er){return b$2(er,11)}static bytes12(er){return b$2(er,12)}static bytes13(er){return b$2(er,13)}static bytes14(er){return b$2(er,14)}static bytes15(er){return b$2(er,15)}static bytes16(er){return b$2(er,16)}static bytes17(er){return b$2(er,17)}static bytes18(er){return b$2(er,18)}static bytes19(er){return b$2(er,19)}static bytes20(er){return b$2(er,20)}static bytes21(er){return b$2(er,21)}static bytes22(er){return b$2(er,22)}static bytes23(er){return b$2(er,23)}static bytes24(er){return b$2(er,24)}static bytes25(er){return b$2(er,25)}static bytes26(er){return b$2(er,26)}static bytes27(er){return b$2(er,27)}static bytes28(er){return b$2(er,28)}static bytes29(er){return b$2(er,29)}static bytes30(er){return b$2(er,30)}static bytes31(er){return b$2(er,31)}static bytes32(er){return b$2(er,32)}static address(er){return new Ol(_gaurd,"address",er)}static bool(er){return new Ol(_gaurd,"bool",!!er)}static bytes(er){return new Ol(_gaurd,"bytes",er)}static string(er){return new Ol(_gaurd,"string",er)}static array(er,rr){throw new Error("not implemented yet")}static tuple(er,rr){throw new Error("not implemented yet")}static overrides(er){return new Ol(_gaurd,"overrides",Object.assign({},er))}static isTyped(er){return er&&typeof er=="object"&&"_typedSymbol"in er&&er._typedSymbol===_typedSymbol}static dereference(er,rr){if(Ol.isTyped(er)){if(er.type!==rr)throw new Error(`invalid type: expecetd ${rr}, got ${er.type}`);return er.value}return er}};lu=new WeakMap;let Typed=Ol;class AddressCoder extends Coder{constructor(er){super("address","address",er,!1)}defaultValue(){return"0x0000000000000000000000000000000000000000"}encode(er,rr){let nr=Typed.dereference(rr,"string");try{nr=getAddress$1(nr)}catch(ir){return this._throwError(ir.message,rr)}return er.writeValue(nr)}decode(er){return getAddress$1(toBeHex(er.readValue(),20))}}class AnonymousCoder extends Coder{constructor(rr){super(rr.name,rr.type,"_",rr.dynamic);Ys(this,"coder");this.coder=rr}defaultValue(){return this.coder.defaultValue()}encode(rr,nr){return this.coder.encode(rr,nr)}decode(rr){return this.coder.decode(rr)}}function pack(tr,er,rr){let nr=[];if(Array.isArray(rr))nr=rr;else if(rr&&typeof rr=="object"){let cr={};nr=er.map(lr=>{const ur=lr.localName;return assert$r(ur,"cannot encode object for signature with missing names","INVALID_ARGUMENT",{argument:"values",info:{coder:lr},value:rr}),assert$r(!cr[ur],"cannot encode object for signature with duplicate names","INVALID_ARGUMENT",{argument:"values",info:{coder:lr},value:rr}),cr[ur]=!0,rr[ur]})}else assertArgument(!1,"invalid tuple value","tuple",rr);assertArgument(er.length===nr.length,"types/value length mismatch","tuple",rr);let ir=new Writer$2,sr=new Writer$2,or=[];er.forEach((cr,lr)=>{let ur=nr[lr];if(cr.dynamic){let dr=sr.length;cr.encode(sr,ur);let yr=ir.writeUpdatableValue();or.push(mr=>{yr(mr+dr)})}else cr.encode(ir,ur)}),or.forEach(cr=>{cr(ir.length)});let ar=tr.appendWriter(ir);return ar+=tr.appendWriter(sr),ar}function unpack(tr,er){let rr=[],nr=[],ir=tr.subReader(0);return er.forEach(sr=>{let or=null;if(sr.dynamic){let ar=tr.readIndex(),cr=ir.subReader(ar);try{or=sr.decode(cr)}catch(lr){if(isError$2(lr,"BUFFER_OVERRUN"))throw lr;or=lr,or.baseType=sr.name,or.name=sr.localName,or.type=sr.type}}else try{or=sr.decode(tr)}catch(ar){if(isError$2(ar,"BUFFER_OVERRUN"))throw ar;or=ar,or.baseType=sr.name,or.name=sr.localName,or.type=sr.type}if(or==null)throw new Error("investigate");rr.push(or),nr.push(sr.localName||null)}),Result.fromItems(rr,nr)}class ArrayCoder extends Coder{constructor(rr,nr,ir){const sr=rr.type+"["+(nr>=0?nr:"")+"]",or=nr===-1||rr.dynamic;super("array",sr,ir,or);Ys(this,"coder");Ys(this,"length");defineProperties(this,{coder:rr,length:nr})}defaultValue(){const rr=this.coder.defaultValue(),nr=[];for(let ir=0;ir<this.length;ir++)nr.push(rr);return nr}encode(rr,nr){const ir=Typed.dereference(nr,"array");Array.isArray(ir)||this._throwError("expected array value",ir);let sr=this.length;sr===-1&&(sr=ir.length,rr.writeValue(ir.length)),assertArgumentCount(ir.length,sr,"coder array"+(this.localName?" "+this.localName:""));let or=[];for(let ar=0;ar<ir.length;ar++)or.push(this.coder);return pack(rr,or,ir)}decode(rr){let nr=this.length;nr===-1&&(nr=rr.readIndex(),assert$r(nr*WordSize<=rr.dataLength,"insufficient data length","BUFFER_OVERRUN",{buffer:rr.bytes,offset:nr*WordSize,length:rr.dataLength}));let ir=[];for(let sr=0;sr<nr;sr++)ir.push(new AnonymousCoder(this.coder));return unpack(rr,ir)}}class BooleanCoder extends Coder{constructor(er){super("bool","bool",er,!1)}defaultValue(){return!1}encode(er,rr){const nr=Typed.dereference(rr,"bool");return er.writeValue(nr?1:0)}decode(er){return!!er.readValue()}}class DynamicBytesCoder extends Coder{constructor(er,rr){super(er,er,rr,!0)}defaultValue(){return"0x"}encode(er,rr){rr=getBytesCopy(rr);let nr=er.writeValue(rr.length);return nr+=er.writeBytes(rr),nr}decode(er){return er.readBytes(er.readIndex(),!0)}}class BytesCoder extends DynamicBytesCoder{constructor(er){super("bytes",er)}decode(er){return hexlify(super.decode(er))}}class FixedBytesCoder extends Coder{constructor(rr,nr){let ir="bytes"+String(rr);super(ir,ir,nr,!1);Ys(this,"size");defineProperties(this,{size:rr},{size:"number"})}defaultValue(){return"0x0000000000000000000000000000000000000000000000000000000000000000".substring(0,2+this.size*2)}encode(rr,nr){let ir=getBytesCopy(Typed.dereference(nr,this.type));return ir.length!==this.size&&this._throwError("incorrect data length",nr),rr.writeBytes(ir)}decode(rr){return hexlify(rr.readBytes(this.size))}}const Empty=new Uint8Array([]);class NullCoder extends Coder{constructor(er){super("null","",er,!1)}defaultValue(){return null}encode(er,rr){return rr!=null&&this._throwError("not null",rr),er.writeBytes(Empty)}decode(er){return er.readBytes(0),null}}const BN_0$2=BigInt(0),BN_1$1=BigInt(1),BN_MAX_UINT256$1=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");class NumberCoder extends Coder{constructor(rr,nr,ir){const sr=(nr?"int":"uint")+rr*8;super(sr,sr,ir,!1);Ys(this,"size");Ys(this,"signed");defineProperties(this,{size:rr,signed:nr},{size:"number",signed:"boolean"})}defaultValue(){return 0}encode(rr,nr){let ir=getBigInt(Typed.dereference(nr,this.type)),sr=mask$1(BN_MAX_UINT256$1,WordSize*8);if(this.signed){let or=mask$1(sr,this.size*8-1);(ir>or||ir<-(or+BN_1$1))&&this._throwError("value out-of-bounds",nr),ir=toTwos(ir,8*WordSize)}else(ir<BN_0$2||ir>mask$1(sr,this.size*8))&&this._throwError("value out-of-bounds",nr);return rr.writeValue(ir)}decode(rr){let nr=mask$1(rr.readValue(),this.size*8);return this.signed&&(nr=fromTwos(nr,this.size*8)),nr}}class StringCoder extends DynamicBytesCoder{constructor(er){super("string",er)}defaultValue(){return""}encode(er,rr){return super.encode(er,toUtf8Bytes(Typed.dereference(rr,"string")))}decode(er){return toUtf8String(super.decode(er))}}class TupleCoder extends Coder{constructor(rr,nr){let ir=!1;const sr=[];rr.forEach(ar=>{ar.dynamic&&(ir=!0),sr.push(ar.type)});const or="tuple("+sr.join(",")+")";super("tuple",or,nr,ir);Ys(this,"coders");defineProperties(this,{coders:Object.freeze(rr.slice())})}defaultValue(){const rr=[];this.coders.forEach(ir=>{rr.push(ir.defaultValue())});const nr=this.coders.reduce((ir,sr)=>{const or=sr.localName;return or&&(ir[or]||(ir[or]=0),ir[or]++),ir},{});return this.coders.forEach((ir,sr)=>{let or=ir.localName;!or||nr[or]!==1||(or==="length"&&(or="_length"),rr[or]==null&&(rr[or]=rr[sr]))}),Object.freeze(rr)}encode(rr,nr){const ir=Typed.dereference(nr,"tuple");return pack(rr,this.coders,ir)}decode(rr){return unpack(rr,this.coders)}}function id(tr){return keccak256$4(toUtf8Bytes(tr))}function accessSetify(tr,er){return{address:getAddress$1(tr),storageKeys:er.map((rr,nr)=>(assertArgument(isHexString$6(rr,32),"invalid slot",`storageKeys[${nr}]`,rr),rr.toLowerCase()))}}function accessListify(tr){if(Array.isArray(tr))return tr.map((rr,nr)=>Array.isArray(rr)?(assertArgument(rr.length===2,"invalid slot set",`value[${nr}]`,rr),accessSetify(rr[0],rr[1])):(assertArgument(rr!=null&&typeof rr=="object","invalid address-slot set","value",tr),accessSetify(rr.address,rr.storageKeys)));assertArgument(tr!=null&&typeof tr=="object","invalid access list","value",tr);const er=Object.keys(tr).map(rr=>{const nr=tr[rr].reduce((ir,sr)=>(ir[sr]=!0,ir),{});return accessSetify(rr,Object.keys(nr).sort())});return er.sort((rr,nr)=>rr.address.localeCompare(nr.address)),er}function computeAddress(tr){let er;return typeof tr=="string"?er=SigningKey.computePublicKey(tr,!1):er=tr.publicKey,getAddress$1(keccak256$4("0x"+er.substring(4)).substring(26))}function recoverAddress$1(tr,er){return computeAddress(SigningKey.recoverPublicKey(tr,er))}const BN_0$1=BigInt(0),BN_2=BigInt(2),BN_27=BigInt(27),BN_28=BigInt(28),BN_35=BigInt(35),BN_MAX_UINT=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),BLOB_SIZE=4096*32;function getVersionedHash(tr,er){let rr=tr.toString(16);for(;rr.length<2;)rr="0"+rr;return rr+=sha256$3(er).substring(4),"0x"+rr}function handleAddress(tr){return tr==="0x"?null:getAddress$1(tr)}function handleAccessList(tr,er){try{return accessListify(tr)}catch(rr){assertArgument(!1,rr.message,er,tr)}}function handleNumber(tr,er){return tr==="0x"?0:getNumber(tr,er)}function handleUint(tr,er){if(tr==="0x")return BN_0$1;const rr=getBigInt(tr,er);return assertArgument(rr<=BN_MAX_UINT,"value exceeds uint size",er,rr),rr}function formatNumber(tr,er){const rr=getBigInt(tr,"value"),nr=toBeArray(rr);return assertArgument(nr.length<=32,"value too large",`tx.${er}`,rr),nr}function formatAccessList(tr){return accessListify(tr).map(er=>[er.address,er.storageKeys])}function formatHashes(tr,er){assertArgument(Array.isArray(tr),`invalid ${er}`,"value",tr);for(let rr=0;rr<tr.length;rr++)assertArgument(isHexString$6(tr[rr],32),"invalid ${ param } hash",`value[${rr}]`,tr[rr]);return tr}function _parseLegacy(tr){const er=decodeRlp(tr);assertArgument(Array.isArray(er)&&(er.length===9||er.length===6),"invalid field count for legacy transaction","data",tr);const rr={type:0,nonce:handleNumber(er[0],"nonce"),gasPrice:handleUint(er[1],"gasPrice"),gasLimit:handleUint(er[2],"gasLimit"),to:handleAddress(er[3]),value:handleUint(er[4],"value"),data:hexlify(er[5]),chainId:BN_0$1};if(er.length===6)return rr;const nr=handleUint(er[6],"v"),ir=handleUint(er[7],"r"),sr=handleUint(er[8],"s");if(ir===BN_0$1&&sr===BN_0$1)rr.chainId=nr;else{let or=(nr-BN_35)/BN_2;or<BN_0$1&&(or=BN_0$1),rr.chainId=or,assertArgument(or!==BN_0$1||nr===BN_27||nr===BN_28,"non-canonical legacy v","v",er[6]),rr.signature=Signature$6.from({r:zeroPadValue(er[7],32),s:zeroPadValue(er[8],32),v:nr})}return rr}function _serializeLegacy(tr,er){const rr=[formatNumber(tr.nonce,"nonce"),formatNumber(tr.gasPrice||0,"gasPrice"),formatNumber(tr.gasLimit,"gasLimit"),tr.to||"0x",formatNumber(tr.value,"value"),tr.data];let nr=BN_0$1;if(tr.chainId!=BN_0$1)nr=getBigInt(tr.chainId,"tx.chainId"),assertArgument(!er||er.networkV==null||er.legacyChainId===nr,"tx.chainId/sig.v mismatch","sig",er);else if(tr.signature){const sr=tr.signature.legacyChainId;sr!=null&&(nr=sr)}if(!er)return nr!==BN_0$1&&(rr.push(toBeArray(nr)),rr.push("0x"),rr.push("0x")),encodeRlp(rr);let ir=BigInt(27+er.yParity);return nr!==BN_0$1?ir=Signature$6.getChainIdV(nr,er.v):BigInt(er.v)!==ir&&assertArgument(!1,"tx.chainId/sig.v mismatch","sig",er),rr.push(toBeArray(ir)),rr.push(toBeArray(er.r)),rr.push(toBeArray(er.s)),encodeRlp(rr)}function _parseEipSignature(tr,er){let rr;try{if(rr=handleNumber(er[0],"yParity"),rr!==0&&rr!==1)throw new Error("bad yParity")}catch{assertArgument(!1,"invalid yParity","yParity",er[0])}const nr=zeroPadValue(er[1],32),ir=zeroPadValue(er[2],32),sr=Signature$6.from({r:nr,s:ir,yParity:rr});tr.signature=sr}function _parseEip1559(tr){const er=decodeRlp(getBytes(tr).slice(1));assertArgument(Array.isArray(er)&&(er.length===9||er.length===12),"invalid field count for transaction type: 2","data",hexlify(tr));const rr={type:2,chainId:handleUint(er[0],"chainId"),nonce:handleNumber(er[1],"nonce"),maxPriorityFeePerGas:handleUint(er[2],"maxPriorityFeePerGas"),maxFeePerGas:handleUint(er[3],"maxFeePerGas"),gasPrice:null,gasLimit:handleUint(er[4],"gasLimit"),to:handleAddress(er[5]),value:handleUint(er[6],"value"),data:hexlify(er[7]),accessList:handleAccessList(er[8],"accessList")};return er.length===9||_parseEipSignature(rr,er.slice(9)),rr}function _serializeEip1559(tr,er){const rr=[formatNumber(tr.chainId,"chainId"),formatNumber(tr.nonce,"nonce"),formatNumber(tr.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),formatNumber(tr.maxFeePerGas||0,"maxFeePerGas"),formatNumber(tr.gasLimit,"gasLimit"),tr.to||"0x",formatNumber(tr.value,"value"),tr.data,formatAccessList(tr.accessList||[])];return er&&(rr.push(formatNumber(er.yParity,"yParity")),rr.push(toBeArray(er.r)),rr.push(toBeArray(er.s))),concat$2(["0x02",encodeRlp(rr)])}function _parseEip2930(tr){const er=decodeRlp(getBytes(tr).slice(1));assertArgument(Array.isArray(er)&&(er.length===8||er.length===11),"invalid field count for transaction type: 1","data",hexlify(tr));const rr={type:1,chainId:handleUint(er[0],"chainId"),nonce:handleNumber(er[1],"nonce"),gasPrice:handleUint(er[2],"gasPrice"),gasLimit:handleUint(er[3],"gasLimit"),to:handleAddress(er[4]),value:handleUint(er[5],"value"),data:hexlify(er[6]),accessList:handleAccessList(er[7],"accessList")};return er.length===8||_parseEipSignature(rr,er.slice(8)),rr}function _serializeEip2930(tr,er){const rr=[formatNumber(tr.chainId,"chainId"),formatNumber(tr.nonce,"nonce"),formatNumber(tr.gasPrice||0,"gasPrice"),formatNumber(tr.gasLimit,"gasLimit"),tr.to||"0x",formatNumber(tr.value,"value"),tr.data,formatAccessList(tr.accessList||[])];return er&&(rr.push(formatNumber(er.yParity,"recoveryParam")),rr.push(toBeArray(er.r)),rr.push(toBeArray(er.s))),concat$2(["0x01",encodeRlp(rr)])}function _parseEip4844(tr){let er=decodeRlp(getBytes(tr).slice(1)),rr="3",nr=null;if(er.length===4&&Array.isArray(er[0])){rr="3 (network format)";const sr=er[1],or=er[2],ar=er[3];assertArgument(Array.isArray(sr),"invalid network format: blobs not an array","fields[1]",sr),assertArgument(Array.isArray(or),"invalid network format: commitments not an array","fields[2]",or),assertArgument(Array.isArray(ar),"invalid network format: proofs not an array","fields[3]",ar),assertArgument(sr.length===or.length,"invalid network format: blobs/commitments length mismatch","fields",er),assertArgument(sr.length===ar.length,"invalid network format: blobs/proofs length mismatch","fields",er),nr=[];for(let cr=0;cr<er[1].length;cr++)nr.push({data:sr[cr],commitment:or[cr],proof:ar[cr]});er=er[0]}assertArgument(Array.isArray(er)&&(er.length===11||er.length===14),`invalid field count for transaction type: ${rr}`,"data",hexlify(tr));const ir={type:3,chainId:handleUint(er[0],"chainId"),nonce:handleNumber(er[1],"nonce"),maxPriorityFeePerGas:handleUint(er[2],"maxPriorityFeePerGas"),maxFeePerGas:handleUint(er[3],"maxFeePerGas"),gasPrice:null,gasLimit:handleUint(er[4],"gasLimit"),to:handleAddress(er[5]),value:handleUint(er[6],"value"),data:hexlify(er[7]),accessList:handleAccessList(er[8],"accessList"),maxFeePerBlobGas:handleUint(er[9],"maxFeePerBlobGas"),blobVersionedHashes:er[10]};nr&&(ir.blobs=nr),assertArgument(ir.to!=null,`invalid address for transaction type: ${rr}`,"data",tr),assertArgument(Array.isArray(ir.blobVersionedHashes),"invalid blobVersionedHashes: must be an array","data",tr);for(let sr=0;sr<ir.blobVersionedHashes.length;sr++)assertArgument(isHexString$6(ir.blobVersionedHashes[sr],32),`invalid blobVersionedHash at index ${sr}: must be length 32`,"data",tr);return er.length===11||_parseEipSignature(ir,er.slice(11)),ir}function _serializeEip4844(tr,er,rr){const nr=[formatNumber(tr.chainId,"chainId"),formatNumber(tr.nonce,"nonce"),formatNumber(tr.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),formatNumber(tr.maxFeePerGas||0,"maxFeePerGas"),formatNumber(tr.gasLimit,"gasLimit"),tr.to||ZeroAddress,formatNumber(tr.value,"value"),tr.data,formatAccessList(tr.accessList||[]),formatNumber(tr.maxFeePerBlobGas||0,"maxFeePerBlobGas"),formatHashes(tr.blobVersionedHashes||[],"blobVersionedHashes")];return er&&(nr.push(formatNumber(er.yParity,"yParity")),nr.push(toBeArray(er.r)),nr.push(toBeArray(er.s)),rr)?concat$2(["0x03",encodeRlp([nr,rr.map(ir=>ir.data),rr.map(ir=>ir.commitment),rr.map(ir=>ir.proof)])]):concat$2(["0x03",encodeRlp(nr)])}var $l,Su,Au,Ru,Tu,Pu,Iu,Nu,Cu,Ou,Bu,ku,uu,zl,Dl,Jl,Lu,Qu;const Bl=class Bl{constructor(){mo(this,Lu);mo(this,$l);mo(this,Su);mo(this,Au);mo(this,Ru);mo(this,Tu);mo(this,Pu);mo(this,Iu);mo(this,Nu);mo(this,Cu);mo(this,Ou);mo(this,Bu);mo(this,ku);mo(this,uu);mo(this,zl);mo(this,Dl);mo(this,Jl);Zs(this,$l,null),Zs(this,Su,null),Zs(this,Ru,0),Zs(this,Tu,BN_0$1),Zs(this,Pu,null),Zs(this,Iu,null),Zs(this,Nu,null),Zs(this,Au,"0x"),Zs(this,Cu,BN_0$1),Zs(this,Ou,BN_0$1),Zs(this,Bu,null),Zs(this,ku,null),Zs(this,uu,null),Zs(this,zl,null),Zs(this,Jl,null),Zs(this,Dl,null)}get type(){return On(this,$l)}set type(er){switch(er){case null:Zs(this,$l,null);break;case 0:case"legacy":Zs(this,$l,0);break;case 1:case"berlin":case"eip-2930":Zs(this,$l,1);break;case 2:case"london":case"eip-1559":Zs(this,$l,2);break;case 3:case"cancun":case"eip-4844":Zs(this,$l,3);break;default:assertArgument(!1,"unsupported transaction type","type",er)}}get typeName(){switch(this.type){case 0:return"legacy";case 1:return"eip-2930";case 2:return"eip-1559";case 3:return"eip-4844"}return null}get to(){const er=On(this,Su);return er==null&&this.type===3?ZeroAddress:er}set to(er){Zs(this,Su,er==null?null:getAddress$1(er))}get nonce(){return On(this,Ru)}set nonce(er){Zs(this,Ru,getNumber(er,"value"))}get gasLimit(){return On(this,Tu)}set gasLimit(er){Zs(this,Tu,getBigInt(er))}get gasPrice(){const er=On(this,Pu);return er==null&&(this.type===0||this.type===1)?BN_0$1:er}set gasPrice(er){Zs(this,Pu,er==null?null:getBigInt(er,"gasPrice"))}get maxPriorityFeePerGas(){const er=On(this,Iu);return er??(this.type===2||this.type===3?BN_0$1:null)}set maxPriorityFeePerGas(er){Zs(this,Iu,er==null?null:getBigInt(er,"maxPriorityFeePerGas"))}get maxFeePerGas(){const er=On(this,Nu);return er??(this.type===2||this.type===3?BN_0$1:null)}set maxFeePerGas(er){Zs(this,Nu,er==null?null:getBigInt(er,"maxFeePerGas"))}get data(){return On(this,Au)}set data(er){Zs(this,Au,hexlify(er))}get value(){return On(this,Cu)}set value(er){Zs(this,Cu,getBigInt(er,"value"))}get chainId(){return On(this,Ou)}set chainId(er){Zs(this,Ou,getBigInt(er))}get signature(){return On(this,Bu)||null}set signature(er){Zs(this,Bu,er==null?null:Signature$6.from(er))}get accessList(){const er=On(this,ku)||null;return er??(this.type===1||this.type===2||this.type===3?[]:null)}set accessList(er){Zs(this,ku,er==null?null:accessListify(er))}get maxFeePerBlobGas(){const er=On(this,uu);return er==null&&this.type===3?BN_0$1:er}set maxFeePerBlobGas(er){Zs(this,uu,er==null?null:getBigInt(er,"maxFeePerBlobGas"))}get blobVersionedHashes(){let er=On(this,zl);return er==null&&this.type===3?[]:er}set blobVersionedHashes(er){if(er!=null){assertArgument(Array.isArray(er),"blobVersionedHashes must be an Array","value",er),er=er.slice();for(let rr=0;rr<er.length;rr++)assertArgument(isHexString$6(er[rr],32),"invalid blobVersionedHash",`value[${rr}]`,er[rr])}Zs(this,zl,er)}get blobs(){return On(this,Jl)==null?null:On(this,Jl).map(er=>Object.assign({},er))}set blobs(er){if(er==null){Zs(this,Jl,null);return}const rr=[],nr=[];for(let ir=0;ir<er.length;ir++){const sr=er[ir];if(isBytesLike(sr)){assert$r(On(this,Dl),"adding a raw blob requires a KZG library","UNSUPPORTED_OPERATION",{operation:"set blobs()"});let or=getBytes(sr);if(assertArgument(or.length<=BLOB_SIZE,"blob is too large",`blobs[${ir}]`,sr),or.length!==BLOB_SIZE){const lr=new Uint8Array(BLOB_SIZE);lr.set(or),or=lr}const ar=On(this,Dl).blobToKzgCommitment(or),cr=hexlify(On(this,Dl).computeBlobKzgProof(or,ar));rr.push({data:hexlify(or),commitment:hexlify(ar),proof:cr}),nr.push(getVersionedHash(1,ar))}else{const or=hexlify(sr.commitment);rr.push({data:hexlify(sr.data),commitment:or,proof:hexlify(sr.proof)}),nr.push(getVersionedHash(1,or))}}Zs(this,Jl,rr),Zs(this,zl,nr)}get kzg(){return On(this,Dl)}set kzg(er){Zs(this,Dl,er)}get hash(){return this.signature==null?null:keccak256$4(Bo(this,Lu,Qu).call(this,!0,!1))}get unsignedHash(){return keccak256$4(this.unsignedSerialized)}get from(){return this.signature==null?null:recoverAddress$1(this.unsignedHash,this.signature)}get fromPublicKey(){return this.signature==null?null:SigningKey.recoverPublicKey(this.unsignedHash,this.signature)}isSigned(){return this.signature!=null}get serialized(){return Bo(this,Lu,Qu).call(this,!0,!0)}get unsignedSerialized(){return Bo(this,Lu,Qu).call(this,!1,!1)}inferType(){const er=this.inferTypes();return er.indexOf(2)>=0?2:er.pop()}inferTypes(){const er=this.gasPrice!=null,rr=this.maxFeePerGas!=null||this.maxPriorityFeePerGas!=null,nr=this.accessList!=null,ir=On(this,uu)!=null||On(this,zl);this.maxFeePerGas!=null&&this.maxPriorityFeePerGas!=null&&assert$r(this.maxFeePerGas>=this.maxPriorityFeePerGas,"priorityFee cannot be more than maxFee","BAD_DATA",{value:this}),assert$r(!rr||this.type!==0&&this.type!==1,"transaction type cannot have maxFeePerGas or maxPriorityFeePerGas","BAD_DATA",{value:this}),assert$r(this.type!==0||!nr,"legacy transaction cannot have accessList","BAD_DATA",{value:this});const sr=[];return this.type!=null?sr.push(this.type):rr?sr.push(2):er?(sr.push(1),nr||sr.push(0)):nr?(sr.push(1),sr.push(2)):(ir&&this.to||(sr.push(0),sr.push(1),sr.push(2)),sr.push(3)),sr.sort(),sr}isLegacy(){return this.type===0}isBerlin(){return this.type===1}isLondon(){return this.type===2}isCancun(){return this.type===3}clone(){return Bl.from(this)}toJSON(){const er=rr=>rr==null?null:rr.toString();return{type:this.type,to:this.to,data:this.data,nonce:this.nonce,gasLimit:er(this.gasLimit),gasPrice:er(this.gasPrice),maxPriorityFeePerGas:er(this.maxPriorityFeePerGas),maxFeePerGas:er(this.maxFeePerGas),value:er(this.value),chainId:er(this.chainId),sig:this.signature?this.signature.toJSON():null,accessList:this.accessList}}static from(er){if(er==null)return new Bl;if(typeof er=="string"){const nr=getBytes(er);if(nr[0]>=127)return Bl.from(_parseLegacy(nr));switch(nr[0]){case 1:return Bl.from(_parseEip2930(nr));case 2:return Bl.from(_parseEip1559(nr));case 3:return Bl.from(_parseEip4844(nr))}assert$r(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:"from"})}const rr=new Bl;return er.type!=null&&(rr.type=er.type),er.to!=null&&(rr.to=er.to),er.nonce!=null&&(rr.nonce=er.nonce),er.gasLimit!=null&&(rr.gasLimit=er.gasLimit),er.gasPrice!=null&&(rr.gasPrice=er.gasPrice),er.maxPriorityFeePerGas!=null&&(rr.maxPriorityFeePerGas=er.maxPriorityFeePerGas),er.maxFeePerGas!=null&&(rr.maxFeePerGas=er.maxFeePerGas),er.maxFeePerBlobGas!=null&&(rr.maxFeePerBlobGas=er.maxFeePerBlobGas),er.data!=null&&(rr.data=er.data),er.value!=null&&(rr.value=er.value),er.chainId!=null&&(rr.chainId=er.chainId),er.signature!=null&&(rr.signature=Signature$6.from(er.signature)),er.accessList!=null&&(rr.accessList=er.accessList),er.blobVersionedHashes!=null&&(rr.blobVersionedHashes=er.blobVersionedHashes),er.kzg!=null&&(rr.kzg=er.kzg),er.blobs!=null&&(rr.blobs=er.blobs),er.hash!=null&&(assertArgument(rr.isSigned(),"unsigned transaction cannot define '.hash'","tx",er),assertArgument(rr.hash===er.hash,"hash mismatch","tx",er)),er.from!=null&&(assertArgument(rr.isSigned(),"unsigned transaction cannot define '.from'","tx",er),assertArgument(rr.from.toLowerCase()===(er.from||"").toLowerCase(),"from mismatch","tx",er)),rr}};$l=new WeakMap,Su=new WeakMap,Au=new WeakMap,Ru=new WeakMap,Tu=new WeakMap,Pu=new WeakMap,Iu=new WeakMap,Nu=new WeakMap,Cu=new WeakMap,Ou=new WeakMap,Bu=new WeakMap,ku=new WeakMap,uu=new WeakMap,zl=new WeakMap,Dl=new WeakMap,Jl=new WeakMap,Lu=new WeakSet,Qu=function(er,rr){assert$r(!er||this.signature!=null,"cannot serialize unsigned transaction; maybe you meant .unsignedSerialized","UNSUPPORTED_OPERATION",{operation:".serialized"});const nr=er?this.signature:null;switch(this.inferType()){case 0:return _serializeLegacy(this,nr);case 1:return _serializeEip2930(this,nr);case 2:return _serializeEip1559(this,nr);case 3:return _serializeEip4844(this,nr,rr?this.blobs:null)}assert$r(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:".serialized"})};let Transaction=Bl;function hashMessage$1(tr){return typeof tr=="string"&&(tr=toUtf8Bytes(tr)),keccak256$4(concat$2([toUtf8Bytes(MessagePrefix),toUtf8Bytes(String(tr.length)),tr]))}const padding=new Uint8Array(32);padding.fill(0);const BN__1=BigInt(-1),BN_0=BigInt(0),BN_1=BigInt(1),BN_MAX_UINT256=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function hexPadRight(tr){const er=getBytes(tr),rr=er.length%32;return rr?concat$2([er,padding.slice(rr)]):hexlify(er)}const hexTrue=toBeHex(BN_1,32),hexFalse=toBeHex(BN_0,32),domainFieldTypes={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"},domainFieldNames=["name","version","chainId","verifyingContract","salt"];function checkString(tr){return function(er){return assertArgument(typeof er=="string",`invalid domain value for ${JSON.stringify(tr)}`,`domain.${tr}`,er),er}}const domainChecks={name:checkString("name"),version:checkString("version"),chainId:function(tr){const er=getBigInt(tr,"domain.chainId");return assertArgument(er>=0,"invalid chain ID","domain.chainId",tr),Number.isSafeInteger(er)?Number(er):toQuantity(er)},verifyingContract:function(tr){try{return getAddress$1(tr).toLowerCase()}catch{}assertArgument(!1,'invalid domain value "verifyingContract"',"domain.verifyingContract",tr)},salt:function(tr){const er=getBytes(tr,"domain.salt");return assertArgument(er.length===32,'invalid domain value "salt"',"domain.salt",tr),hexlify(er)}};function getBaseEncoder(tr){{const er=tr.match(/^(u?)int(\d+)$/);if(er){const rr=er[1]==="",nr=parseInt(er[2]);assertArgument(nr%8===0&&nr!==0&&nr<=256&&er[2]===String(nr),"invalid numeric width","type",tr);const ir=mask$1(BN_MAX_UINT256,rr?nr-1:nr),sr=rr?(ir+BN_1)*BN__1:BN_0;return function(or){const ar=getBigInt(or,"value");return assertArgument(ar>=sr&&ar<=ir,`value out-of-bounds for ${tr}`,"value",ar),toBeHex(rr?toTwos(ar,256):ar,32)}}}{const er=tr.match(/^bytes(\d+)$/);if(er){const rr=parseInt(er[1]);return assertArgument(rr!==0&&rr<=32&&er[1]===String(rr),"invalid bytes width","type",tr),function(nr){const ir=getBytes(nr);return assertArgument(ir.length===rr,`invalid length for ${tr}`,"value",nr),hexPadRight(nr)}}}switch(tr){case"address":return function(er){return zeroPadValue(getAddress$1(er),32)};case"bool":return function(er){return er?hexTrue:hexFalse};case"bytes":return function(er){return keccak256$4(er)};case"string":return function(er){return id(er)}}return null}function encodeType(tr,er){return`${tr}(${er.map(({name:rr,type:nr})=>nr+" "+rr).join(",")})`}function splitArray(tr){const er=tr.match(/^([^\x5b]*)((\x5b\d*\x5d)*)(\x5b(\d*)\x5d)$/);return er?{base:er[1],index:er[2]+er[4],array:{base:er[1],prefix:er[1]+er[2],count:er[5]?parseInt(er[5]):-1}}:{base:tr}}var Ku,Ul,Mu,n0,_0;const _a=class _a{constructor(er){mo(this,n0);Ys(this,"primaryType");mo(this,Ku);mo(this,Ul);mo(this,Mu);Zs(this,Ul,new Map),Zs(this,Mu,new Map);const rr=new Map,nr=new Map,ir=new Map,sr={};Object.keys(er).forEach(cr=>{sr[cr]=er[cr].map(({name:lr,type:ur})=>{let{base:dr,index:yr}=splitArray(ur);return dr==="int"&&!er.int&&(dr="int256"),dr==="uint"&&!er.uint&&(dr="uint256"),{name:lr,type:dr+(yr||"")}}),rr.set(cr,new Set),nr.set(cr,[]),ir.set(cr,new Set)}),Zs(this,Ku,JSON.stringify(sr));for(const cr in sr){const lr=new Set;for(const ur of sr[cr]){assertArgument(!lr.has(ur.name),`duplicate variable name ${JSON.stringify(ur.name)} in ${JSON.stringify(cr)}`,"types",er),lr.add(ur.name);const dr=splitArray(ur.type).base;assertArgument(dr!==cr,`circular type reference to ${JSON.stringify(dr)}`,"types",er),!getBaseEncoder(dr)&&(assertArgument(nr.has(dr),`unknown type ${JSON.stringify(dr)}`,"types",er),nr.get(dr).push(cr),rr.get(cr).add(dr))}}const or=Array.from(nr.keys()).filter(cr=>nr.get(cr).length===0);assertArgument(or.length!==0,"missing primary type","types",er),assertArgument(or.length===1,`ambiguous primary types or unused types: ${or.map(cr=>JSON.stringify(cr)).join(", ")}`,"types",er),defineProperties(this,{primaryType:or[0]});function ar(cr,lr){assertArgument(!lr.has(cr),`circular type reference to ${JSON.stringify(cr)}`,"types",er),lr.add(cr);for(const ur of rr.get(cr))if(nr.has(ur)){ar(ur,lr);for(const dr of lr)ir.get(dr).add(ur)}lr.delete(cr)}ar(this.primaryType,new Set);for(const[cr,lr]of ir){const ur=Array.from(lr);ur.sort(),On(this,Ul).set(cr,encodeType(cr,sr[cr])+ur.map(dr=>encodeType(dr,sr[dr])).join(""))}}get types(){return JSON.parse(On(this,Ku))}getEncoder(er){let rr=On(this,Mu).get(er);return rr||(rr=Bo(this,n0,_0).call(this,er),On(this,Mu).set(er,rr)),rr}encodeType(er){const rr=On(this,Ul).get(er);return assertArgument(rr,`unknown type: ${JSON.stringify(er)}`,"name",er),rr}encodeData(er,rr){return this.getEncoder(er)(rr)}hashStruct(er,rr){return keccak256$4(this.encodeData(er,rr))}encode(er){return this.encodeData(this.primaryType,er)}hash(er){return this.hashStruct(this.primaryType,er)}_visit(er,rr,nr){if(getBaseEncoder(er))return nr(er,rr);const ir=splitArray(er).array;if(ir)return assertArgument(ir.count===-1||ir.count===rr.length,`array length mismatch; expected length ${ir.count}`,"value",rr),rr.map(or=>this._visit(ir.prefix,or,nr));const sr=this.types[er];if(sr)return sr.reduce((or,{name:ar,type:cr})=>(or[ar]=this._visit(cr,rr[ar],nr),or),{});assertArgument(!1,`unknown type: ${er}`,"type",er)}visit(er,rr){return this._visit(this.primaryType,er,rr)}static from(er){return new _a(er)}static getPrimaryType(er){return _a.from(er).primaryType}static hashStruct(er,rr,nr){return _a.from(rr).hashStruct(er,nr)}static hashDomain(er){const rr=[];for(const nr in er){if(er[nr]==null)continue;const ir=domainFieldTypes[nr];assertArgument(ir,`invalid typed-data domain key: ${JSON.stringify(nr)}`,"domain",er),rr.push({name:nr,type:ir})}return rr.sort((nr,ir)=>domainFieldNames.indexOf(nr.name)-domainFieldNames.indexOf(ir.name)),_a.hashStruct("EIP712Domain",{EIP712Domain:rr},er)}static encode(er,rr,nr){return concat$2(["0x1901",_a.hashDomain(er),_a.from(rr).hash(nr)])}static hash(er,rr,nr){return keccak256$4(_a.encode(er,rr,nr))}static async resolveNames(er,rr,nr,ir){er=Object.assign({},er);for(const ar in er)er[ar]==null&&delete er[ar];const sr={};er.verifyingContract&&!isHexString$6(er.verifyingContract,20)&&(sr[er.verifyingContract]="0x");const or=_a.from(rr);or.visit(nr,(ar,cr)=>(ar==="address"&&!isHexString$6(cr,20)&&(sr[cr]="0x"),cr));for(const ar in sr)sr[ar]=await ir(ar);return er.verifyingContract&&sr[er.verifyingContract]&&(er.verifyingContract=sr[er.verifyingContract]),nr=or.visit(nr,(ar,cr)=>ar==="address"&&sr[cr]?sr[cr]:cr),{domain:er,value:nr}}static getPayload(er,rr,nr){_a.hashDomain(er);const ir={},sr=[];domainFieldNames.forEach(cr=>{const lr=er[cr];lr!=null&&(ir[cr]=domainChecks[cr](lr),sr.push({name:cr,type:domainFieldTypes[cr]}))});const or=_a.from(rr);rr=or.types;const ar=Object.assign({},rr);return assertArgument(ar.EIP712Domain==null,"types must not contain EIP712Domain type","types.EIP712Domain",rr),ar.EIP712Domain=sr,or.encode(nr),{types:ar,domain:ir,primaryType:or.primaryType,message:or.visit(nr,(cr,lr)=>{if(cr.match(/^bytes(\d*)/))return hexlify(getBytes(lr));if(cr.match(/^u?int/))return getBigInt(lr).toString();switch(cr){case"address":return lr.toLowerCase();case"bool":return!!lr;case"string":return assertArgument(typeof lr=="string","invalid string","value",lr),lr}assertArgument(!1,"unsupported type","type",cr)})}}};Ku=new WeakMap,Ul=new WeakMap,Mu=new WeakMap,n0=new WeakSet,_0=function(er){{const ir=getBaseEncoder(er);if(ir)return ir}const rr=splitArray(er).array;if(rr){const ir=rr.prefix,sr=this.getEncoder(ir);return or=>{assertArgument(rr.count===-1||rr.count===or.length,`array length mismatch; expected length ${rr.count}`,"value",or);let ar=or.map(sr);return On(this,Ul).has(ir)&&(ar=ar.map(keccak256$4)),keccak256$4(concat$2(ar))}}const nr=this.types[er];if(nr){const ir=id(On(this,Ul).get(er));return sr=>{const or=nr.map(({name:ar,type:cr})=>{const lr=this.getEncoder(cr)(sr[ar]);return On(this,Ul).has(cr)?keccak256$4(lr):lr});return or.unshift(ir),concat$2(or)}}assertArgument(!1,`unknown type: ${er}`,"type",er)};let TypedDataEncoder=_a;function setify(tr){const er=new Set;return tr.forEach(rr=>er.add(rr)),Object.freeze(er)}const _kwVisibDeploy="external public payable override",KwVisibDeploy=setify(_kwVisibDeploy.split(" ")),_kwVisib="constant external internal payable private public pure view override",KwVisib=setify(_kwVisib.split(" ")),_kwTypes="constructor error event fallback function receive struct",KwTypes=setify(_kwTypes.split(" ")),_kwModifiers="calldata memory storage payable indexed",KwModifiers=setify(_kwModifiers.split(" ")),_kwOther="tuple returns",_keywords=[_kwTypes,_kwModifiers,_kwOther,_kwVisib].join(" "),Keywords=setify(_keywords.split(" ")),SimpleTokens={"(":"OPEN_PAREN",")":"CLOSE_PAREN","[":"OPEN_BRACKET","]":"CLOSE_BRACKET",",":"COMMA","@":"AT"},regexWhitespacePrefix=new RegExp("^(\\s*)"),regexNumberPrefix=new RegExp("^([0-9]+)"),regexIdPrefix=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)"),regexId=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)$"),regexType=new RegExp("^(address|bool|bytes([0-9]*)|string|u?int([0-9]*))$");var Zo,wl,Wu,c0;const i0=class i0{constructor(er){mo(this,Wu);mo(this,Zo);mo(this,wl);Zs(this,Zo,0),Zs(this,wl,er.slice())}get offset(){return On(this,Zo)}get length(){return On(this,wl).length-On(this,Zo)}clone(){return new i0(On(this,wl))}reset(){Zs(this,Zo,0)}popKeyword(er){const rr=this.peek();if(rr.type!=="KEYWORD"||!er.has(rr.text))throw new Error(`expected keyword ${rr.text}`);return this.pop().text}popType(er){if(this.peek().type!==er){const rr=this.peek();throw new Error(`expected ${er}; got ${rr.type} ${JSON.stringify(rr.text)}`)}return this.pop().text}popParen(){const er=this.peek();if(er.type!=="OPEN_PAREN")throw new Error("bad start");const rr=Bo(this,Wu,c0).call(this,On(this,Zo)+1,er.match+1);return Zs(this,Zo,er.match+1),rr}popParams(){const er=this.peek();if(er.type!=="OPEN_PAREN")throw new Error("bad start");const rr=[];for(;On(this,Zo)<er.match-1;){const nr=this.peek().linkNext;rr.push(Bo(this,Wu,c0).call(this,On(this,Zo)+1,nr)),Zs(this,Zo,nr)}return Zs(this,Zo,er.match+1),rr}peek(){if(On(this,Zo)>=On(this,wl).length)throw new Error("out-of-bounds");return On(this,wl)[On(this,Zo)]}peekKeyword(er){const rr=this.peekType("KEYWORD");return rr!=null&&er.has(rr)?rr:null}peekType(er){if(this.length===0)return null;const rr=this.peek();return rr.type===er?rr.text:null}pop(){const er=this.peek();return m0(this,Zo)._++,er}toString(){const er=[];for(let rr=On(this,Zo);rr<On(this,wl).length;rr++){const nr=On(this,wl)[rr];er.push(`${nr.type}:${nr.text}`)}return`<TokenString ${er.join(" ")}>`}};Zo=new WeakMap,wl=new WeakMap,Wu=new WeakSet,c0=function(er=0,rr=0){return new i0(On(this,wl).slice(er,rr).map(nr=>Object.freeze(Object.assign({},nr,{match:nr.match-er,linkBack:nr.linkBack-er,linkNext:nr.linkNext-er}))))};let TokenString=i0;function lex(tr){const er=[],rr=or=>{const ar=sr<tr.length?JSON.stringify(tr[sr]):"$EOI";throw new Error(`invalid token ${ar} at ${sr}: ${or}`)};let nr=[],ir=[],sr=0;for(;sr<tr.length;){let or=tr.substring(sr),ar=or.match(regexWhitespacePrefix);ar&&(sr+=ar[1].length,or=tr.substring(sr));const cr={depth:nr.length,linkBack:-1,linkNext:-1,match:-1,type:"",text:"",offset:sr,value:-1};er.push(cr);let lr=SimpleTokens[or[0]]||"";if(lr){if(cr.type=lr,cr.text=or[0],sr++,lr==="OPEN_PAREN")nr.push(er.length-1),ir.push(er.length-1);else if(lr=="CLOSE_PAREN")nr.length===0&&rr("no matching open bracket"),cr.match=nr.pop(),er[cr.match].match=er.length-1,cr.depth--,cr.linkBack=ir.pop(),er[cr.linkBack].linkNext=er.length-1;else if(lr==="COMMA")cr.linkBack=ir.pop(),er[cr.linkBack].linkNext=er.length-1,ir.push(er.length-1);else if(lr==="OPEN_BRACKET")cr.type="BRACKET";else if(lr==="CLOSE_BRACKET"){let ur=er.pop().text;if(er.length>0&&er[er.length-1].type==="NUMBER"){const dr=er.pop().text;ur=dr+ur,er[er.length-1].value=getNumber(dr)}if(er.length===0||er[er.length-1].type!=="BRACKET")throw new Error("missing opening bracket");er[er.length-1].text+=ur}continue}if(ar=or.match(regexIdPrefix),ar){if(cr.text=ar[1],sr+=cr.text.length,Keywords.has(cr.text)){cr.type="KEYWORD";continue}if(cr.text.match(regexType)){cr.type="TYPE";continue}cr.type="ID";continue}if(ar=or.match(regexNumberPrefix),ar){cr.text=ar[1],cr.type="NUMBER",sr+=cr.text.length;continue}throw new Error(`unexpected token ${JSON.stringify(or[0])} at position ${sr}`)}return new TokenString(er.map(or=>Object.freeze(or)))}function allowSingle(tr,er){let rr=[];for(const nr in er.keys())tr.has(nr)&&rr.push(nr);if(rr.length>1)throw new Error(`conflicting types: ${rr.join(", ")}`)}function consumeName(tr,er){if(er.peekKeyword(KwTypes)){const rr=er.pop().text;if(rr!==tr)throw new Error(`expected ${tr}, got ${rr}`)}return er.popType("ID")}function consumeKeywords(tr,er){const rr=new Set;for(;;){const nr=tr.peekType("KEYWORD");if(nr==null||er&&!er.has(nr))break;if(tr.pop(),rr.has(nr))throw new Error(`duplicate keywords: ${JSON.stringify(nr)}`);rr.add(nr)}return Object.freeze(rr)}function consumeMutability(tr){let er=consumeKeywords(tr,KwVisib);return allowSingle(er,setify("constant payable nonpayable".split(" "))),allowSingle(er,setify("pure view payable nonpayable".split(" "))),er.has("view")?"view":er.has("pure")?"pure":er.has("payable")?"payable":er.has("nonpayable")?"nonpayable":er.has("constant")?"view":"nonpayable"}function consumeParams(tr,er){return tr.popParams().map(rr=>ParamType.from(rr,er))}function consumeGas(tr){if(tr.peekType("AT")){if(tr.pop(),tr.peekType("NUMBER"))return getBigInt(tr.pop().text);throw new Error("invalid gas")}return null}function consumeEoi(tr){if(tr.length)throw new Error(`unexpected tokens at offset ${tr.offset}: ${tr.toString()}`)}const regexArrayType=new RegExp(/^(.*)\[([0-9]*)\]$/);function verifyBasicType(tr){const er=tr.match(regexType);if(assertArgument(er,"invalid type","type",tr),tr==="uint")return"uint256";if(tr==="int")return"int256";if(er[2]){const rr=parseInt(er[2]);assertArgument(rr!==0&&rr<=32,"invalid bytes length","type",tr)}else if(er[3]){const rr=parseInt(er[3]);assertArgument(rr!==0&&rr<=256&&rr%8===0,"invalid numeric width","type",tr)}return tr}const _guard$2={},internal$1=Symbol.for("_ethers_internal"),ParamTypeInternal="_ParamTypeInternal",ErrorFragmentInternal="_ErrorInternal",EventFragmentInternal="_EventInternal",ConstructorFragmentInternal="_ConstructorInternal",FallbackFragmentInternal="_FallbackInternal",FunctionFragmentInternal="_FunctionInternal",StructFragmentInternal="_StructInternal";var Du,_f;const xa=class xa{constructor(er,rr,nr,ir,sr,or,ar,cr){mo(this,Du);Ys(this,"name");Ys(this,"type");Ys(this,"baseType");Ys(this,"indexed");Ys(this,"components");Ys(this,"arrayLength");Ys(this,"arrayChildren");if(assertPrivate(er,_guard$2,"ParamType"),Object.defineProperty(this,internal$1,{value:ParamTypeInternal}),or&&(or=Object.freeze(or.slice())),ir==="array"){if(ar==null||cr==null)throw new Error("")}else if(ar!=null||cr!=null)throw new Error("");if(ir==="tuple"){if(or==null)throw new Error("")}else if(or!=null)throw new Error("");defineProperties(this,{name:rr,type:nr,baseType:ir,indexed:sr,components:or,arrayLength:ar,arrayChildren:cr})}format(er){if(er==null&&(er="sighash"),er==="json"){const nr=this.name||"";if(this.isArray()){const sr=JSON.parse(this.arrayChildren.format("json"));return sr.name=nr,sr.type+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`,JSON.stringify(sr)}const ir={type:this.baseType==="tuple"?"tuple":this.type,name:nr};return typeof this.indexed=="boolean"&&(ir.indexed=this.indexed),this.isTuple()&&(ir.components=this.components.map(sr=>JSON.parse(sr.format(er)))),JSON.stringify(ir)}let rr="";return this.isArray()?(rr+=this.arrayChildren.format(er),rr+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`):this.isTuple()?rr+="("+this.components.map(nr=>nr.format(er)).join(er==="full"?", ":",")+")":rr+=this.type,er!=="sighash"&&(this.indexed===!0&&(rr+=" indexed"),er==="full"&&this.name&&(rr+=" "+this.name)),rr}isArray(){return this.baseType==="array"}isTuple(){return this.baseType==="tuple"}isIndexable(){return this.indexed!=null}walk(er,rr){if(this.isArray()){if(!Array.isArray(er))throw new Error("invalid array value");if(this.arrayLength!==-1&&er.length!==this.arrayLength)throw new Error("array is wrong length");const nr=this;return er.map(ir=>nr.arrayChildren.walk(ir,rr))}if(this.isTuple()){if(!Array.isArray(er))throw new Error("invalid tuple value");if(er.length!==this.components.length)throw new Error("array is wrong length");const nr=this;return er.map((ir,sr)=>nr.components[sr].walk(ir,rr))}return rr(this.type,er)}async walkAsync(er,rr){const nr=[],ir=[er];return Bo(this,Du,_f).call(this,nr,er,rr,sr=>{ir[0]=sr}),nr.length&&await Promise.all(nr),ir[0]}static from(er,rr){if(xa.isParamType(er))return er;if(typeof er=="string")try{return xa.from(lex(er),rr)}catch{assertArgument(!1,"invalid param type","obj",er)}else if(er instanceof TokenString){let ar="",cr="",lr=null;consumeKeywords(er,setify(["tuple"])).has("tuple")||er.peekType("OPEN_PAREN")?(cr="tuple",lr=er.popParams().map(xr=>xa.from(xr)),ar=`tuple(${lr.map(xr=>xr.format()).join(",")})`):(ar=verifyBasicType(er.popType("TYPE")),cr=ar);let ur=null,dr=null;for(;er.length&&er.peekType("BRACKET");){const xr=er.pop();ur=new xa(_guard$2,"",ar,cr,null,lr,dr,ur),dr=xr.value,ar+=xr.text,cr="array",lr=null}let yr=null;if(consumeKeywords(er,KwModifiers).has("indexed")){if(!rr)throw new Error("");yr=!0}const wr=er.peekType("ID")?er.pop().text:"";if(er.length)throw new Error("leftover tokens");return new xa(_guard$2,wr,ar,cr,yr,lr,dr,ur)}const nr=er.name;assertArgument(!nr||typeof nr=="string"&&nr.match(regexId),"invalid name","obj.name",nr);let ir=er.indexed;ir!=null&&(assertArgument(rr,"parameter cannot be indexed","obj.indexed",er.indexed),ir=!!ir);let sr=er.type,or=sr.match(regexArrayType);if(or){const ar=parseInt(or[2]||"-1"),cr=xa.from({type:or[1],components:er.components});return new xa(_guard$2,nr||"",sr,"array",ir,null,ar,cr)}if(sr==="tuple"||sr.startsWith("tuple(")||sr.startsWith("(")){const ar=er.components!=null?er.components.map(lr=>xa.from(lr)):null;return new xa(_guard$2,nr||"",sr,"tuple",ir,ar,null,null)}return sr=verifyBasicType(er.type),new xa(_guard$2,nr||"",sr,sr,ir,null,null,null)}static isParamType(er){return er&&er[internal$1]===ParamTypeInternal}};Du=new WeakSet,_f=function(er,rr,nr,ir){if(this.isArray()){if(!Array.isArray(rr))throw new Error("invalid array value");if(this.arrayLength!==-1&&rr.length!==this.arrayLength)throw new Error("array is wrong length");const or=this.arrayChildren,ar=rr.slice();ar.forEach((cr,lr)=>{var ur;Bo(ur=or,Du,_f).call(ur,er,cr,nr,dr=>{ar[lr]=dr})}),ir(ar);return}if(this.isTuple()){const or=this.components;let ar;if(Array.isArray(rr))ar=rr.slice();else{if(rr==null||typeof rr!="object")throw new Error("invalid tuple value");ar=or.map(cr=>{if(!cr.name)throw new Error("cannot use object value with unnamed components");if(!(cr.name in rr))throw new Error(`missing value for component ${cr.name}`);return rr[cr.name]})}if(ar.length!==this.components.length)throw new Error("array is wrong length");ar.forEach((cr,lr)=>{var ur;Bo(ur=or[lr],Du,_f).call(ur,er,cr,nr,dr=>{ar[lr]=dr})}),ir(ar);return}const sr=nr(this.type,rr);sr.then?er.push(async function(){ir(await sr)}()):ir(sr)};let ParamType=xa;class Fragment{constructor(er,rr,nr){Ys(this,"type");Ys(this,"inputs");assertPrivate(er,_guard$2,"Fragment"),nr=Object.freeze(nr.slice()),defineProperties(this,{type:rr,inputs:nr})}static from(er){if(typeof er=="string"){try{Fragment.from(JSON.parse(er))}catch{}return Fragment.from(lex(er))}if(er instanceof TokenString)switch(er.peekKeyword(KwTypes)){case"constructor":return ConstructorFragment.from(er);case"error":return ErrorFragment.from(er);case"event":return EventFragment.from(er);case"fallback":case"receive":return FallbackFragment.from(er);case"function":return FunctionFragment.from(er);case"struct":return StructFragment.from(er)}else if(typeof er=="object"){switch(er.type){case"constructor":return ConstructorFragment.from(er);case"error":return ErrorFragment.from(er);case"event":return EventFragment.from(er);case"fallback":case"receive":return FallbackFragment.from(er);case"function":return FunctionFragment.from(er);case"struct":return StructFragment.from(er)}assert$r(!1,`unsupported type: ${er.type}`,"UNSUPPORTED_OPERATION",{operation:"Fragment.from"})}assertArgument(!1,"unsupported frgament object","obj",er)}static isConstructor(er){return ConstructorFragment.isFragment(er)}static isError(er){return ErrorFragment.isFragment(er)}static isEvent(er){return EventFragment.isFragment(er)}static isFunction(er){return FunctionFragment.isFragment(er)}static isStruct(er){return StructFragment.isFragment(er)}}class NamedFragment extends Fragment{constructor(rr,nr,ir,sr){super(rr,nr,sr);Ys(this,"name");assertArgument(typeof ir=="string"&&ir.match(regexId),"invalid identifier","name",ir),sr=Object.freeze(sr.slice()),defineProperties(this,{name:ir})}}function joinParams(tr,er){return"("+er.map(rr=>rr.format(tr)).join(tr==="full"?", ":",")+")"}class ErrorFragment extends NamedFragment{constructor(er,rr,nr){super(er,"error",rr,nr),Object.defineProperty(this,internal$1,{value:ErrorFragmentInternal})}get selector(){return id(this.format("sighash")).substring(0,10)}format(er){if(er==null&&(er="sighash"),er==="json")return JSON.stringify({type:"error",name:this.name,inputs:this.inputs.map(nr=>JSON.parse(nr.format(er)))});const rr=[];return er!=="sighash"&&rr.push("error"),rr.push(this.name+joinParams(er,this.inputs)),rr.join(" ")}static from(er){if(ErrorFragment.isFragment(er))return er;if(typeof er=="string")return ErrorFragment.from(lex(er));if(er instanceof TokenString){const rr=consumeName("error",er),nr=consumeParams(er);return consumeEoi(er),new ErrorFragment(_guard$2,rr,nr)}return new ErrorFragment(_guard$2,er.name,er.inputs?er.inputs.map(ParamType.from):[])}static isFragment(er){return er&&er[internal$1]===ErrorFragmentInternal}}class EventFragment extends NamedFragment{constructor(rr,nr,ir,sr){super(rr,"event",nr,ir);Ys(this,"anonymous");Object.defineProperty(this,internal$1,{value:EventFragmentInternal}),defineProperties(this,{anonymous:sr})}get topicHash(){return id(this.format("sighash"))}format(rr){if(rr==null&&(rr="sighash"),rr==="json")return JSON.stringify({type:"event",anonymous:this.anonymous,name:this.name,inputs:this.inputs.map(ir=>JSON.parse(ir.format(rr)))});const nr=[];return rr!=="sighash"&&nr.push("event"),nr.push(this.name+joinParams(rr,this.inputs)),rr!=="sighash"&&this.anonymous&&nr.push("anonymous"),nr.join(" ")}static getTopicHash(rr,nr){return nr=(nr||[]).map(sr=>ParamType.from(sr)),new EventFragment(_guard$2,rr,nr,!1).topicHash}static from(rr){if(EventFragment.isFragment(rr))return rr;if(typeof rr=="string")try{return EventFragment.from(lex(rr))}catch{assertArgument(!1,"invalid event fragment","obj",rr)}else if(rr instanceof TokenString){const nr=consumeName("event",rr),ir=consumeParams(rr,!0),sr=!!consumeKeywords(rr,setify(["anonymous"])).has("anonymous");return consumeEoi(rr),new EventFragment(_guard$2,nr,ir,sr)}return new EventFragment(_guard$2,rr.name,rr.inputs?rr.inputs.map(nr=>ParamType.from(nr,!0)):[],!!rr.anonymous)}static isFragment(rr){return rr&&rr[internal$1]===EventFragmentInternal}}class ConstructorFragment extends Fragment{constructor(rr,nr,ir,sr,or){super(rr,nr,ir);Ys(this,"payable");Ys(this,"gas");Object.defineProperty(this,internal$1,{value:ConstructorFragmentInternal}),defineProperties(this,{payable:sr,gas:or})}format(rr){if(assert$r(rr!=null&&rr!=="sighash","cannot format a constructor for sighash","UNSUPPORTED_OPERATION",{operation:"format(sighash)"}),rr==="json")return JSON.stringify({type:"constructor",stateMutability:this.payable?"payable":"undefined",payable:this.payable,gas:this.gas!=null?this.gas:void 0,inputs:this.inputs.map(ir=>JSON.parse(ir.format(rr)))});const nr=[`constructor${joinParams(rr,this.inputs)}`];return this.payable&&nr.push("payable"),this.gas!=null&&nr.push(`@${this.gas.toString()}`),nr.join(" ")}static from(rr){if(ConstructorFragment.isFragment(rr))return rr;if(typeof rr=="string")try{return ConstructorFragment.from(lex(rr))}catch{assertArgument(!1,"invalid constuctor fragment","obj",rr)}else if(rr instanceof TokenString){consumeKeywords(rr,setify(["constructor"]));const nr=consumeParams(rr),ir=!!consumeKeywords(rr,KwVisibDeploy).has("payable"),sr=consumeGas(rr);return consumeEoi(rr),new ConstructorFragment(_guard$2,"constructor",nr,ir,sr)}return new ConstructorFragment(_guard$2,"constructor",rr.inputs?rr.inputs.map(ParamType.from):[],!!rr.payable,rr.gas!=null?rr.gas:null)}static isFragment(rr){return rr&&rr[internal$1]===ConstructorFragmentInternal}}class FallbackFragment extends Fragment{constructor(rr,nr,ir){super(rr,"fallback",nr);Ys(this,"payable");Object.defineProperty(this,internal$1,{value:FallbackFragmentInternal}),defineProperties(this,{payable:ir})}format(rr){const nr=this.inputs.length===0?"receive":"fallback";if(rr==="json"){const ir=this.payable?"payable":"nonpayable";return JSON.stringify({type:nr,stateMutability:ir})}return`${nr}()${this.payable?" payable":""}`}static from(rr){if(FallbackFragment.isFragment(rr))return rr;if(typeof rr=="string")try{return FallbackFragment.from(lex(rr))}catch{assertArgument(!1,"invalid fallback fragment","obj",rr)}else if(rr instanceof TokenString){const nr=rr.toString(),ir=rr.peekKeyword(setify(["fallback","receive"]));if(assertArgument(ir,"type must be fallback or receive","obj",nr),rr.popKeyword(setify(["fallback","receive"]))==="receive"){const cr=consumeParams(rr);return assertArgument(cr.length===0,"receive cannot have arguments","obj.inputs",cr),consumeKeywords(rr,setify(["payable"])),consumeEoi(rr),new FallbackFragment(_guard$2,[],!0)}let or=consumeParams(rr);or.length?assertArgument(or.length===1&&or[0].type==="bytes","invalid fallback inputs","obj.inputs",or.map(cr=>cr.format("minimal")).join(", ")):or=[ParamType.from("bytes")];const ar=consumeMutability(rr);if(assertArgument(ar==="nonpayable"||ar==="payable","fallback cannot be constants","obj.stateMutability",ar),consumeKeywords(rr,setify(["returns"])).has("returns")){const cr=consumeParams(rr);assertArgument(cr.length===1&&cr[0].type==="bytes","invalid fallback outputs","obj.outputs",cr.map(lr=>lr.format("minimal")).join(", "))}return consumeEoi(rr),new FallbackFragment(_guard$2,or,ar==="payable")}if(rr.type==="receive")return new FallbackFragment(_guard$2,[],!0);if(rr.type==="fallback"){const nr=[ParamType.from("bytes")],ir=rr.stateMutability==="payable";return new FallbackFragment(_guard$2,nr,ir)}assertArgument(!1,"invalid fallback description","obj",rr)}static isFragment(rr){return rr&&rr[internal$1]===FallbackFragmentInternal}}class FunctionFragment extends NamedFragment{constructor(rr,nr,ir,sr,or,ar){super(rr,"function",nr,sr);Ys(this,"constant");Ys(this,"outputs");Ys(this,"stateMutability");Ys(this,"payable");Ys(this,"gas");Object.defineProperty(this,internal$1,{value:FunctionFragmentInternal}),or=Object.freeze(or.slice()),defineProperties(this,{constant:ir==="view"||ir==="pure",gas:ar,outputs:or,payable:ir==="payable",stateMutability:ir})}get selector(){return id(this.format("sighash")).substring(0,10)}format(rr){if(rr==null&&(rr="sighash"),rr==="json")return JSON.stringify({type:"function",name:this.name,constant:this.constant,stateMutability:this.stateMutability!=="nonpayable"?this.stateMutability:void 0,payable:this.payable,gas:this.gas!=null?this.gas:void 0,inputs:this.inputs.map(ir=>JSON.parse(ir.format(rr))),outputs:this.outputs.map(ir=>JSON.parse(ir.format(rr)))});const nr=[];return rr!=="sighash"&&nr.push("function"),nr.push(this.name+joinParams(rr,this.inputs)),rr!=="sighash"&&(this.stateMutability!=="nonpayable"&&nr.push(this.stateMutability),this.outputs&&this.outputs.length&&(nr.push("returns"),nr.push(joinParams(rr,this.outputs))),this.gas!=null&&nr.push(`@${this.gas.toString()}`)),nr.join(" ")}static getSelector(rr,nr){return nr=(nr||[]).map(sr=>ParamType.from(sr)),new FunctionFragment(_guard$2,rr,"view",nr,[],null).selector}static from(rr){if(FunctionFragment.isFragment(rr))return rr;if(typeof rr=="string")try{return FunctionFragment.from(lex(rr))}catch{assertArgument(!1,"invalid function fragment","obj",rr)}else if(rr instanceof TokenString){const ir=consumeName("function",rr),sr=consumeParams(rr),or=consumeMutability(rr);let ar=[];consumeKeywords(rr,setify(["returns"])).has("returns")&&(ar=consumeParams(rr));const cr=consumeGas(rr);return consumeEoi(rr),new FunctionFragment(_guard$2,ir,or,sr,ar,cr)}let nr=rr.stateMutability;return nr==null&&(nr="payable",typeof rr.constant=="boolean"?(nr="view",rr.constant||(nr="payable",typeof rr.payable=="boolean"&&!rr.payable&&(nr="nonpayable"))):typeof rr.payable=="boolean"&&!rr.payable&&(nr="nonpayable")),new FunctionFragment(_guard$2,rr.name,nr,rr.inputs?rr.inputs.map(ParamType.from):[],rr.outputs?rr.outputs.map(ParamType.from):[],rr.gas!=null?rr.gas:null)}static isFragment(rr){return rr&&rr[internal$1]===FunctionFragmentInternal}}class StructFragment extends NamedFragment{constructor(er,rr,nr){super(er,"struct",rr,nr),Object.defineProperty(this,internal$1,{value:StructFragmentInternal})}format(){throw new Error("@TODO")}static from(er){if(typeof er=="string")try{return StructFragment.from(lex(er))}catch{assertArgument(!1,"invalid struct fragment","obj",er)}else if(er instanceof TokenString){const rr=consumeName("struct",er),nr=consumeParams(er);return consumeEoi(er),new StructFragment(_guard$2,rr,nr)}return new StructFragment(_guard$2,er.name,er.inputs?er.inputs.map(ParamType.from):[])}static isFragment(er){return er&&er[internal$1]===StructFragmentInternal}}const PanicReasons$1=new Map;PanicReasons$1.set(0,"GENERIC_PANIC");PanicReasons$1.set(1,"ASSERT_FALSE");PanicReasons$1.set(17,"OVERFLOW");PanicReasons$1.set(18,"DIVIDE_BY_ZERO");PanicReasons$1.set(33,"ENUM_RANGE_ERROR");PanicReasons$1.set(34,"BAD_STORAGE_DATA");PanicReasons$1.set(49,"STACK_UNDERFLOW");PanicReasons$1.set(50,"ARRAY_RANGE_ERROR");PanicReasons$1.set(65,"OUT_OF_MEMORY");PanicReasons$1.set(81,"UNINITIALIZED_FUNCTION_CALL");const paramTypeBytes=new RegExp(/^bytes([0-9]*)$/),paramTypeNumber=new RegExp(/^(u?int)([0-9]*)$/);let defaultCoder=null,defaultMaxInflation=1024;function getBuiltinCallException(tr,er,rr,nr){let ir="missing revert data",sr=null;const or=null;let ar=null;if(rr){ir="execution reverted";const lr=getBytes(rr);if(rr=hexlify(rr),lr.length===0)ir+=" (no data present; likely require(false) occurred",sr="require(false)";else if(lr.length%32!==4)ir+=" (could not decode reason; invalid data length)";else if(hexlify(lr.slice(0,4))==="0x08c379a0")try{sr=nr.decode(["string"],lr.slice(4))[0],ar={signature:"Error(string)",name:"Error",args:[sr]},ir+=`: ${JSON.stringify(sr)}`}catch{ir+=" (could not decode reason; invalid string data)"}else if(hexlify(lr.slice(0,4))==="0x4e487b71")try{const ur=Number(nr.decode(["uint256"],lr.slice(4))[0]);ar={signature:"Panic(uint256)",name:"Panic",args:[ur]},sr=`Panic due to ${PanicReasons$1.get(ur)||"UNKNOWN"}(${ur})`,ir+=`: ${sr}`}catch{ir+=" (could not decode panic code)"}else ir+=" (unknown custom error)"}const cr={to:er.to?getAddress$1(er.to):null,data:er.data||"0x"};return er.from&&(cr.from=getAddress$1(er.from)),makeError(ir,"CALL_EXCEPTION",{action:tr,data:rr,reason:sr,transaction:cr,invocation:or,revert:ar})}var Yl,yu;const s0=class s0{constructor(){mo(this,Yl)}getDefaultValue(er){const rr=er.map(ir=>Bo(this,Yl,yu).call(this,ParamType.from(ir)));return new TupleCoder(rr,"_").defaultValue()}encode(er,rr){assertArgumentCount(rr.length,er.length,"types/values length mismatch");const nr=er.map(or=>Bo(this,Yl,yu).call(this,ParamType.from(or))),ir=new TupleCoder(nr,"_"),sr=new Writer$2;return ir.encode(sr,rr),sr.data}decode(er,rr,nr){const ir=er.map(or=>Bo(this,Yl,yu).call(this,ParamType.from(or)));return new TupleCoder(ir,"_").decode(new Reader$2(rr,nr,defaultMaxInflation))}static _setDefaultMaxInflation(er){assertArgument(typeof er=="number"&&Number.isInteger(er),"invalid defaultMaxInflation factor","value",er),defaultMaxInflation=er}static defaultAbiCoder(){return defaultCoder==null&&(defaultCoder=new s0),defaultCoder}static getBuiltinCallException(er,rr,nr){return getBuiltinCallException(er,rr,nr,s0.defaultAbiCoder())}};Yl=new WeakSet,yu=function(er){if(er.isArray())return new ArrayCoder(Bo(this,Yl,yu).call(this,er.arrayChildren),er.arrayLength,er.name);if(er.isTuple())return new TupleCoder(er.components.map(nr=>Bo(this,Yl,yu).call(this,nr)),er.name);switch(er.baseType){case"address":return new AddressCoder(er.name);case"bool":return new BooleanCoder(er.name);case"string":return new StringCoder(er.name);case"bytes":return new BytesCoder(er.name);case"":return new NullCoder(er.name)}let rr=er.type.match(paramTypeNumber);if(rr){let nr=parseInt(rr[2]||"256");return assertArgument(nr!==0&&nr<=256&&nr%8===0,"invalid "+rr[1]+" bit length","param",er),new NumberCoder(nr/8,rr[1]==="int",er.name)}if(rr=er.type.match(paramTypeBytes),rr){let nr=parseInt(rr[1]);return assertArgument(nr!==0&&nr<=32,"invalid bytes length","param",er),new FixedBytesCoder(nr,er.name)}assertArgument(!1,"invalid type","type",er.type)};let AbiCoder=s0;class LogDescription{constructor(er,rr,nr){Ys(this,"fragment");Ys(this,"name");Ys(this,"signature");Ys(this,"topic");Ys(this,"args");const ir=er.name,sr=er.format();defineProperties(this,{fragment:er,name:ir,signature:sr,topic:rr,args:nr})}}class TransactionDescription{constructor(er,rr,nr,ir){Ys(this,"fragment");Ys(this,"name");Ys(this,"args");Ys(this,"signature");Ys(this,"selector");Ys(this,"value");const sr=er.name,or=er.format();defineProperties(this,{fragment:er,name:sr,args:nr,signature:or,selector:rr,value:ir})}}class ErrorDescription{constructor(er,rr,nr){Ys(this,"fragment");Ys(this,"name");Ys(this,"args");Ys(this,"signature");Ys(this,"selector");const ir=er.name,sr=er.format();defineProperties(this,{fragment:er,name:ir,args:nr,signature:sr,selector:rr})}}class Indexed{constructor(er){Ys(this,"hash");Ys(this,"_isIndexed");defineProperties(this,{hash:er,_isIndexed:!0})}static isIndexed(er){return!!(er&&er._isIndexed)}}const PanicReasons={0:"generic panic",1:"assert(false)",17:"arithmetic overflow",18:"division or modulo by zero",33:"enum overflow",34:"invalid encoded storage byte array accessed",49:"out-of-bounds array access; popping on an empty array",50:"out-of-bounds access of an array or bytesN",65:"out of memory",81:"uninitialized function"},BuiltinErrors={"0x08c379a0":{signature:"Error(string)",name:"Error",inputs:["string"],reason:tr=>`reverted with reason string ${JSON.stringify(tr)}`},"0x4e487b71":{signature:"Panic(uint256)",name:"Panic",inputs:["uint256"],reason:tr=>{let er="unknown panic code";return tr>=0&&tr<=255&&PanicReasons[tr.toString()]&&(er=PanicReasons[tr.toString()]),`reverted with panic code 0x${tr.toString(16)} (${er})`}}};var Sl,Al,Rl,Xo,Tl,_d,_h;const nu=class nu{constructor(er){mo(this,Tl);Ys(this,"fragments");Ys(this,"deploy");Ys(this,"fallback");Ys(this,"receive");mo(this,Sl);mo(this,Al);mo(this,Rl);mo(this,Xo);let rr=[];typeof er=="string"?rr=JSON.parse(er):rr=er,Zs(this,Rl,new Map),Zs(this,Sl,new Map),Zs(this,Al,new Map);const nr=[];for(const or of rr)try{nr.push(Fragment.from(or))}catch(ar){console.log(`[Warning] Invalid Fragment ${JSON.stringify(or)}:`,ar.message)}defineProperties(this,{fragments:Object.freeze(nr)});let ir=null,sr=!1;Zs(this,Xo,this.getAbiCoder()),this.fragments.forEach((or,ar)=>{let cr;switch(or.type){case"constructor":if(this.deploy){console.log("duplicate definition - constructor");return}defineProperties(this,{deploy:or});return;case"fallback":or.inputs.length===0?sr=!0:(assertArgument(!ir||or.payable!==ir.payable,"conflicting fallback fragments",`fragments[${ar}]`,or),ir=or,sr=ir.payable);return;case"function":cr=On(this,Rl);break;case"event":cr=On(this,Al);break;case"error":cr=On(this,Sl);break;default:return}const lr=or.format();cr.has(lr)||cr.set(lr,or)}),this.deploy||defineProperties(this,{deploy:ConstructorFragment.from("constructor()")}),defineProperties(this,{fallback:ir,receive:sr})}format(er){const rr=er?"minimal":"full";return this.fragments.map(ir=>ir.format(rr))}formatJson(){const er=this.fragments.map(rr=>rr.format("json"));return JSON.stringify(er.map(rr=>JSON.parse(rr)))}getAbiCoder(){return AbiCoder.defaultAbiCoder()}getFunctionName(er){const rr=Bo(this,Tl,_d).call(this,er,null,!1);return assertArgument(rr,"no matching function","key",er),rr.name}hasFunction(er){return!!Bo(this,Tl,_d).call(this,er,null,!1)}getFunction(er,rr){return Bo(this,Tl,_d).call(this,er,rr||null,!0)}forEachFunction(er){const rr=Array.from(On(this,Rl).keys());rr.sort((nr,ir)=>nr.localeCompare(ir));for(let nr=0;nr<rr.length;nr++){const ir=rr[nr];er(On(this,Rl).get(ir),nr)}}getEventName(er){const rr=Bo(this,Tl,_h).call(this,er,null,!1);return assertArgument(rr,"no matching event","key",er),rr.name}hasEvent(er){return!!Bo(this,Tl,_h).call(this,er,null,!1)}getEvent(er,rr){return Bo(this,Tl,_h).call(this,er,rr||null,!0)}forEachEvent(er){const rr=Array.from(On(this,Al).keys());rr.sort((nr,ir)=>nr.localeCompare(ir));for(let nr=0;nr<rr.length;nr++){const ir=rr[nr];er(On(this,Al).get(ir),nr)}}getError(er,rr){if(isHexString$6(er)){const ir=er.toLowerCase();if(BuiltinErrors[ir])return ErrorFragment.from(BuiltinErrors[ir].signature);for(const sr of On(this,Sl).values())if(ir===sr.selector)return sr;return null}if(er.indexOf("(")===-1){const ir=[];for(const[sr,or]of On(this,Sl))sr.split("(")[0]===er&&ir.push(or);if(ir.length===0)return er==="Error"?ErrorFragment.from("error Error(string)"):er==="Panic"?ErrorFragment.from("error Panic(uint256)"):null;if(ir.length>1){const sr=ir.map(or=>JSON.stringify(or.format())).join(", ");assertArgument(!1,`ambiguous error description (i.e. ${sr})`,"name",er)}return ir[0]}if(er=ErrorFragment.from(er).format(),er==="Error(string)")return ErrorFragment.from("error Error(string)");if(er==="Panic(uint256)")return ErrorFragment.from("error Panic(uint256)");const nr=On(this,Sl).get(er);return nr||null}forEachError(er){const rr=Array.from(On(this,Sl).keys());rr.sort((nr,ir)=>nr.localeCompare(ir));for(let nr=0;nr<rr.length;nr++){const ir=rr[nr];er(On(this,Sl).get(ir),nr)}}_decodeParams(er,rr){return On(this,Xo).decode(er,rr)}_encodeParams(er,rr){return On(this,Xo).encode(er,rr)}encodeDeploy(er){return this._encodeParams(this.deploy.inputs,er||[])}decodeErrorResult(er,rr){if(typeof er=="string"){const nr=this.getError(er);assertArgument(nr,"unknown error","fragment",er),er=nr}return assertArgument(dataSlice(rr,0,4)===er.selector,`data signature does not match error ${er.name}.`,"data",rr),this._decodeParams(er.inputs,dataSlice(rr,4))}encodeErrorResult(er,rr){if(typeof er=="string"){const nr=this.getError(er);assertArgument(nr,"unknown error","fragment",er),er=nr}return concat$2([er.selector,this._encodeParams(er.inputs,rr||[])])}decodeFunctionData(er,rr){if(typeof er=="string"){const nr=this.getFunction(er);assertArgument(nr,"unknown function","fragment",er),er=nr}return assertArgument(dataSlice(rr,0,4)===er.selector,`data signature does not match function ${er.name}.`,"data",rr),this._decodeParams(er.inputs,dataSlice(rr,4))}encodeFunctionData(er,rr){if(typeof er=="string"){const nr=this.getFunction(er);assertArgument(nr,"unknown function","fragment",er),er=nr}return concat$2([er.selector,this._encodeParams(er.inputs,rr||[])])}decodeFunctionResult(er,rr){if(typeof er=="string"){const sr=this.getFunction(er);assertArgument(sr,"unknown function","fragment",er),er=sr}let nr="invalid length for result data";const ir=getBytesCopy(rr);if(ir.length%32===0)try{return On(this,Xo).decode(er.outputs,ir)}catch{nr="could not decode result data"}assert$r(!1,nr,"BAD_DATA",{value:hexlify(ir),info:{method:er.name,signature:er.format()}})}makeError(er,rr){const nr=getBytes(er,"data"),ir=AbiCoder.getBuiltinCallException("call",rr,nr);if(ir.message.startsWith("execution reverted (unknown custom error)")){const ar=hexlify(nr.slice(0,4)),cr=this.getError(ar);if(cr)try{const lr=On(this,Xo).decode(cr.inputs,nr.slice(4));ir.revert={name:cr.name,signature:cr.format(),args:lr},ir.reason=ir.revert.signature,ir.message=`execution reverted: ${ir.reason}`}catch{ir.message="execution reverted (coult not decode custom error)"}}const or=this.parseTransaction(rr);return or&&(ir.invocation={method:or.name,signature:or.signature,args:or.args}),ir}encodeFunctionResult(er,rr){if(typeof er=="string"){const nr=this.getFunction(er);assertArgument(nr,"unknown function","fragment",er),er=nr}return hexlify(On(this,Xo).encode(er.outputs,rr||[]))}encodeFilterTopics(er,rr){if(typeof er=="string"){const sr=this.getEvent(er);assertArgument(sr,"unknown event","eventFragment",er),er=sr}assert$r(rr.length<=er.inputs.length,`too many arguments for ${er.format()}`,"UNEXPECTED_ARGUMENT",{count:rr.length,expectedCount:er.inputs.length});const nr=[];er.anonymous||nr.push(er.topicHash);const ir=(sr,or)=>sr.type==="string"?id(or):sr.type==="bytes"?keccak256$4(hexlify(or)):(sr.type==="bool"&&typeof or=="boolean"?or=or?"0x01":"0x00":sr.type.match(/^u?int/)?or=toBeHex(or):sr.type.match(/^bytes/)?or=zeroPadBytes(or,32):sr.type==="address"&&On(this,Xo).encode(["address"],[or]),zeroPadValue(hexlify(or),32));for(rr.forEach((sr,or)=>{const ar=er.inputs[or];if(!ar.indexed){assertArgument(sr==null,"cannot filter non-indexed parameters; must be null","contract."+ar.name,sr);return}sr==null?nr.push(null):ar.baseType==="array"||ar.baseType==="tuple"?assertArgument(!1,"filtering with tuples or arrays not supported","contract."+ar.name,sr):Array.isArray(sr)?nr.push(sr.map(cr=>ir(ar,cr))):nr.push(ir(ar,sr))});nr.length&&nr[nr.length-1]===null;)nr.pop();return nr}encodeEventLog(er,rr){if(typeof er=="string"){const or=this.getEvent(er);assertArgument(or,"unknown event","eventFragment",er),er=or}const nr=[],ir=[],sr=[];return er.anonymous||nr.push(er.topicHash),assertArgument(rr.length===er.inputs.length,"event arguments/values mismatch","values",rr),er.inputs.forEach((or,ar)=>{const cr=rr[ar];if(or.indexed)if(or.type==="string")nr.push(id(cr));else if(or.type==="bytes")nr.push(keccak256$4(cr));else{if(or.baseType==="tuple"||or.baseType==="array")throw new Error("not implemented");nr.push(On(this,Xo).encode([or.type],[cr]))}else ir.push(or),sr.push(cr)}),{data:On(this,Xo).encode(ir,sr),topics:nr}}decodeEventLog(er,rr,nr){if(typeof er=="string"){const mr=this.getEvent(er);assertArgument(mr,"unknown event","eventFragment",er),er=mr}if(nr!=null&&!er.anonymous){const mr=er.topicHash;assertArgument(isHexString$6(nr[0],32)&&nr[0].toLowerCase()===mr,"fragment/topic mismatch","topics[0]",nr[0]),nr=nr.slice(1)}const ir=[],sr=[],or=[];er.inputs.forEach((mr,wr)=>{mr.indexed?mr.type==="string"||mr.type==="bytes"||mr.baseType==="tuple"||mr.baseType==="array"?(ir.push(ParamType.from({type:"bytes32",name:mr.name})),or.push(!0)):(ir.push(mr),or.push(!1)):(sr.push(mr),or.push(!1))});const ar=nr!=null?On(this,Xo).decode(ir,concat$2(nr)):null,cr=On(this,Xo).decode(sr,rr,!0),lr=[],ur=[];let dr=0,yr=0;return er.inputs.forEach((mr,wr)=>{let xr=null;if(mr.indexed)if(ar==null)xr=new Indexed(null);else if(or[wr])xr=new Indexed(ar[yr++]);else try{xr=ar[yr++]}catch(Or){xr=Or}else try{xr=cr[dr++]}catch(Or){xr=Or}lr.push(xr),ur.push(mr.name||null)}),Result.fromItems(lr,ur)}parseTransaction(er){const rr=getBytes(er.data,"tx.data"),nr=getBigInt(er.value!=null?er.value:0,"tx.value"),ir=this.getFunction(hexlify(rr.slice(0,4)));if(!ir)return null;const sr=On(this,Xo).decode(ir.inputs,rr.slice(4));return new TransactionDescription(ir,ir.selector,sr,nr)}parseCallResult(er){throw new Error("@TODO")}parseLog(er){const rr=this.getEvent(er.topics[0]);return!rr||rr.anonymous?null:new LogDescription(rr,rr.topicHash,this.decodeEventLog(rr,er.data,er.topics))}parseError(er){const rr=hexlify(er),nr=this.getError(dataSlice(rr,0,4));if(!nr)return null;const ir=On(this,Xo).decode(nr.inputs,dataSlice(rr,4));return new ErrorDescription(nr,nr.selector,ir)}static from(er){return er instanceof nu?er:typeof er=="string"?new nu(JSON.parse(er)):typeof er.formatJson=="function"?new nu(er.formatJson()):typeof er.format=="function"?new nu(er.format("json")):new nu(er)}};Sl=new WeakMap,Al=new WeakMap,Rl=new WeakMap,Xo=new WeakMap,Tl=new WeakSet,_d=function(er,rr,nr){if(isHexString$6(er)){const sr=er.toLowerCase();for(const or of On(this,Rl).values())if(sr===or.selector)return or;return null}if(er.indexOf("(")===-1){const sr=[];for(const[or,ar]of On(this,Rl))or.split("(")[0]===er&&sr.push(ar);if(rr){const or=rr.length>0?rr[rr.length-1]:null;let ar=rr.length,cr=!0;Typed.isTyped(or)&&or.type==="overrides"&&(cr=!1,ar--);for(let lr=sr.length-1;lr>=0;lr--){const ur=sr[lr].inputs.length;ur!==ar&&(!cr||ur!==ar-1)&&sr.splice(lr,1)}for(let lr=sr.length-1;lr>=0;lr--){const ur=sr[lr].inputs;for(let dr=0;dr<rr.length;dr++)if(Typed.isTyped(rr[dr])){if(dr>=ur.length){if(rr[dr].type==="overrides")continue;sr.splice(lr,1);break}if(rr[dr].type!==ur[dr].baseType){sr.splice(lr,1);break}}}}if(sr.length===1&&rr&&rr.length!==sr[0].inputs.length){const or=rr[rr.length-1];(or==null||Array.isArray(or)||typeof or!="object")&&sr.splice(0,1)}if(sr.length===0)return null;if(sr.length>1&&nr){const or=sr.map(ar=>JSON.stringify(ar.format())).join(", ");assertArgument(!1,`ambiguous function description (i.e. matches ${or})`,"key",er)}return sr[0]}const ir=On(this,Rl).get(FunctionFragment.from(er).format());return ir||null},_h=function(er,rr,nr){if(isHexString$6(er)){const sr=er.toLowerCase();for(const or of On(this,Al).values())if(sr===or.topicHash)return or;return null}if(er.indexOf("(")===-1){const sr=[];for(const[or,ar]of On(this,Al))or.split("(")[0]===er&&sr.push(ar);if(rr){for(let or=sr.length-1;or>=0;or--)sr[or].inputs.length<rr.length&&sr.splice(or,1);for(let or=sr.length-1;or>=0;or--){const ar=sr[or].inputs;for(let cr=0;cr<rr.length;cr++)if(Typed.isTyped(rr[cr])&&rr[cr].type!==ar[cr].baseType){sr.splice(or,1);break}}}if(sr.length===0)return null;if(sr.length>1&&nr){const or=sr.map(ar=>JSON.stringify(ar.format())).join(", ");assertArgument(!1,`ambiguous event description (i.e. matches ${or})`,"key",er)}return sr[0]}const ir=On(this,Al).get(EventFragment.from(er).format());return ir||null};let Interface=nu;BigInt(0);function copyRequest(tr){const er={};tr.to&&(er.to=tr.to),tr.from&&(er.from=tr.from),tr.data&&(er.data=hexlify(tr.data));const rr="chainId,gasLimit,gasPrice,maxFeePerBlobGas,maxFeePerGas,maxPriorityFeePerGas,value".split(/,/);for(const ir of rr)!(ir in tr)||tr[ir]==null||(er[ir]=getBigInt(tr[ir],`request.${ir}`));const nr="type,nonce".split(/,/);for(const ir of nr)!(ir in tr)||tr[ir]==null||(er[ir]=getNumber(tr[ir],`request.${ir}`));return tr.accessList&&(er.accessList=accessListify(tr.accessList)),"blockTag"in tr&&(er.blockTag=tr.blockTag),"enableCcipRead"in tr&&(er.enableCcipRead=!!tr.enableCcipRead),"customData"in tr&&(er.customData=tr.customData),"blobVersionedHashes"in tr&&tr.blobVersionedHashes&&(er.blobVersionedHashes=tr.blobVersionedHashes.slice()),"kzg"in tr&&(er.kzg=tr.kzg),"blobs"in tr&&tr.blobs&&(er.blobs=tr.blobs.map(ir=>isBytesLike(ir)?hexlify(ir):Object.assign({},ir))),er}function checkProvider(tr,er){if(tr.provider)return tr.provider;assert$r(!1,"missing provider","UNSUPPORTED_OPERATION",{operation:er})}async function populate(tr,er){let rr=copyRequest(er);if(rr.to!=null&&(rr.to=resolveAddress(rr.to,tr)),rr.from!=null){const nr=rr.from;rr.from=Promise.all([tr.getAddress(),resolveAddress(nr,tr)]).then(([ir,sr])=>(assertArgument(ir.toLowerCase()===sr.toLowerCase(),"transaction from mismatch","tx.from",sr),ir))}else rr.from=tr.getAddress();return await resolveProperties(rr)}class AbstractSigner{constructor(er){Ys(this,"provider");defineProperties(this,{provider:er||null})}async getNonce(er){return checkProvider(this,"getTransactionCount").getTransactionCount(await this.getAddress(),er)}async populateCall(er){return await populate(this,er)}async populateTransaction(er){const rr=checkProvider(this,"populateTransaction"),nr=await populate(this,er);nr.nonce==null&&(nr.nonce=await this.getNonce("pending")),nr.gasLimit==null&&(nr.gasLimit=await this.estimateGas(nr));const ir=await this.provider.getNetwork();if(nr.chainId!=null){const or=getBigInt(nr.chainId);assertArgument(or===ir.chainId,"transaction chainId mismatch","tx.chainId",er.chainId)}else nr.chainId=ir.chainId;const sr=nr.maxFeePerGas!=null||nr.maxPriorityFeePerGas!=null;if(nr.gasPrice!=null&&(nr.type===2||sr)?assertArgument(!1,"eip-1559 transaction do not support gasPrice","tx",er):(nr.type===0||nr.type===1)&&sr&&assertArgument(!1,"pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas","tx",er),(nr.type===2||nr.type==null)&&nr.maxFeePerGas!=null&&nr.maxPriorityFeePerGas!=null)nr.type=2;else if(nr.type===0||nr.type===1){const or=await rr.getFeeData();assert$r(or.gasPrice!=null,"network does not support gasPrice","UNSUPPORTED_OPERATION",{operation:"getGasPrice"}),nr.gasPrice==null&&(nr.gasPrice=or.gasPrice)}else{const or=await rr.getFeeData();if(nr.type==null)if(or.maxFeePerGas!=null&&or.maxPriorityFeePerGas!=null)if(nr.type=2,nr.gasPrice!=null){const ar=nr.gasPrice;delete nr.gasPrice,nr.maxFeePerGas=ar,nr.maxPriorityFeePerGas=ar}else nr.maxFeePerGas==null&&(nr.maxFeePerGas=or.maxFeePerGas),nr.maxPriorityFeePerGas==null&&(nr.maxPriorityFeePerGas=or.maxPriorityFeePerGas);else or.gasPrice!=null?(assert$r(!sr,"network does not support EIP-1559","UNSUPPORTED_OPERATION",{operation:"populateTransaction"}),nr.gasPrice==null&&(nr.gasPrice=or.gasPrice),nr.type=0):assert$r(!1,"failed to get consistent fee data","UNSUPPORTED_OPERATION",{operation:"signer.getFeeData"});else(nr.type===2||nr.type===3)&&(nr.maxFeePerGas==null&&(nr.maxFeePerGas=or.maxFeePerGas),nr.maxPriorityFeePerGas==null&&(nr.maxPriorityFeePerGas=or.maxPriorityFeePerGas))}return await resolveProperties(nr)}async estimateGas(er){return checkProvider(this,"estimateGas").estimateGas(await this.populateCall(er))}async call(er){return checkProvider(this,"call").call(await this.populateCall(er))}async resolveName(er){return await checkProvider(this,"resolveName").resolveName(er)}async sendTransaction(er){const rr=checkProvider(this,"sendTransaction"),nr=await this.populateTransaction(er);delete nr.from;const ir=Transaction.from(nr);return await rr.broadcastTransaction(await this.signTransaction(ir))}}var Uu,e0;const h0=class h0 extends AbstractSigner{constructor(rr,nr){super(nr);mo(this,Uu);Ys(this,"address");defineProperties(this,{address:rr})}async getAddress(){return this.address}connect(rr){return new h0(this.address,rr)}async signTransaction(rr){Bo(this,Uu,e0).call(this,"transactions","signTransaction")}async signMessage(rr){Bo(this,Uu,e0).call(this,"messages","signMessage")}async signTypedData(rr,nr,ir){Bo(this,Uu,e0).call(this,"typed-data","signTypedData")}};Uu=new WeakSet,e0=function(rr,nr){assert$r(!1,`VoidSigner cannot sign ${rr}`,"UNSUPPORTED_OPERATION",{operation:nr})};let VoidSigner=h0;var Fu;const p0=class p0 extends AbstractSigner{constructor(rr,nr){super(nr);Ys(this,"address");mo(this,Fu);assertArgument(rr&&typeof rr.sign=="function","invalid private key","privateKey","[ REDACTED ]"),Zs(this,Fu,rr);const ir=computeAddress(this.signingKey.publicKey);defineProperties(this,{address:ir})}get signingKey(){return On(this,Fu)}get privateKey(){return this.signingKey.privateKey}async getAddress(){return this.address}connect(rr){return new p0(On(this,Fu),rr)}async signTransaction(rr){rr=copyRequest(rr);const{to:nr,from:ir}=await resolveProperties({to:rr.to?resolveAddress(rr.to,this.provider):void 0,from:rr.from?resolveAddress(rr.from,this.provider):void 0});nr!=null&&(rr.to=nr),ir!=null&&(rr.from=ir),rr.from!=null&&(assertArgument(getAddress$1(rr.from)===this.address,"transaction from address mismatch","tx.from",rr.from),delete rr.from);const sr=Transaction.from(rr);return sr.signature=this.signingKey.sign(sr.unsignedHash),sr.serialized}async signMessage(rr){return this.signMessageSync(rr)}signMessageSync(rr){return this.signingKey.sign(hashMessage$1(rr)).serialized}async signTypedData(rr,nr,ir){const sr=await TypedDataEncoder.resolveNames(rr,nr,ir,async or=>{assert$r(this.provider!=null,"cannot resolve ENS names without a provider","UNSUPPORTED_OPERATION",{operation:"resolveName",info:{name:or}});const ar=await this.provider.resolveName(or);return assert$r(ar!=null,"unconfigured ENS name","UNCONFIGURED_NAME",{value:or}),ar});return this.signingKey.sign(TypedDataEncoder.hash(sr.domain,nr,sr.value)).serialized}};Fu=new WeakMap;let BaseWallet=p0;const subsChrs=" !#$%&'()*+,-./<=>?@[]^_`{|}~",Word=/^[a-z]*$/i;function unfold(tr,er){let rr=97;return tr.reduce((nr,ir)=>(ir===er?rr++:ir.match(Word)?nr.push(String.fromCharCode(rr)+ir):(rr=97,nr.push(ir)),nr),[])}function decode$5(tr,er){for(let ir=subsChrs.length-1;ir>=0;ir--)tr=tr.split(subsChrs[ir]).join(er.substring(2*ir,2*ir+2));const rr=[],nr=tr.replace(/(:|([0-9])|([A-Z][a-z]*))/g,(ir,sr,or,ar)=>{if(or)for(let cr=parseInt(or);cr>=0;cr--)rr.push(";");else rr.push(sr.toLowerCase());return""});if(nr)throw new Error(`leftovers: ${JSON.stringify(nr)}`);return unfold(unfold(rr,";"),":")}function decodeOwl(tr){return assertArgument(tr[0]==="0","unsupported auwl data","data",tr),decode$5(tr.substring(1+2*subsChrs.length),tr.substring(1,1+2*subsChrs.length))}class Wordlist{constructor(er){Ys(this,"locale");defineProperties(this,{locale:er})}split(er){return er.toLowerCase().split(/\s+/g)}join(er){return er.join(" ")}}var ju,qu,fu,Gu,l0;class WordlistOwl extends Wordlist{constructor(rr,nr,ir){super(rr);mo(this,Gu);mo(this,ju);mo(this,qu);mo(this,fu);Zs(this,ju,nr),Zs(this,qu,ir),Zs(this,fu,null)}get _data(){return On(this,ju)}_decodeWords(){return decodeOwl(On(this,ju))}getWord(rr){const nr=Bo(this,Gu,l0).call(this);return assertArgument(rr>=0&&rr<nr.length,`invalid word index: ${rr}`,"index",rr),nr[rr]}getWordIndex(rr){return Bo(this,Gu,l0).call(this).indexOf(rr)}}ju=new WeakMap,qu=new WeakMap,fu=new WeakMap,Gu=new WeakSet,l0=function(){if(On(this,fu)==null){const rr=this._decodeWords();if(id(rr.join(`
`)+`
`)!==On(this,qu))throw new Error(`BIP39 Wordlist for ${this.locale} FAILED`);Zs(this,fu,rr)}return On(this,fu)};const words="0erleonalorenseinceregesticitStanvetearctssi#ch2Athck&tneLl0And#Il.yLeOutO=S|S%b/ra@SurdU'0Ce[Cid|CountCu'Hie=IdOu,-Qui*Ro[TT]T%T*[Tu$0AptDD-tD*[Ju,M.UltV<)Vi)0Rob-0FairF%dRaid0A(EEntRee0Ead0MRRp%tS!_rmBumCoholErtI&LLeyLowMo,O}PhaReadySoT Ways0A>urAz(gOngOuntU'd0Aly,Ch%Ci|G G!GryIm$K!Noun)Nu$O` Sw T&naTiqueXietyY1ArtOlogyPe?P!Pro=Ril1ChCt-EaEnaGueMMedM%MyOundR<+Re,Ri=RowTTefa@Ti,Tw%k0KPe@SaultSetSi,SumeThma0H!>OmTa{T&dT.udeTra@0Ct]D.Gu,NtTh%ToTumn0Era+OcadoOid0AkeA*AyEsomeFulKw?d0Is:ByChel%C#D+GL<)Lc#y~MbooN<aNn RRelyRga(R*lSeS-SketTt!3A^AnAutyCau'ComeEfF%eG(Ha=H(dLie=LowLtN^Nef./TrayTt Twe&Y#d3Cyc!DKeNdOlogyRdR`Tt _{AdeAmeAnketA,EakE[IndOodO[omOu'UeUrUsh_rdAtDyIlMbNeNusOkO,Rd R(gRrowSsTtomUn)XY_{etA(AndA[A=EadEezeI{Id+IefIghtIngIskOccoliOk&OnzeOomO` OwnUsh2Bb!DdyD+tFf$oIldLbLkL!tNd!Nk Rd&Rg R,SS(e[SyTt Y Zz:Bba+B(B!CtusGeKe~LmM aMpNN$N)lNdyNn#NoeNvasNy#Pab!P.$Pta(RRb#RdRgoRpetRryRtSeShS(o/!Su$TT$ogT^Teg%yTt!UghtU'Ut]Ve3Il(gL yM|NsusNturyRe$Rta(_irAlkAmp]An+AosApt Ar+A'AtEapE{Ee'EfErryE,I{&IefIldIm}yOi)Oo'R#-U{!UnkUrn0G?Nnam#Rc!Tiz&TyVil_imApArifyAwAyE<ErkEv I{I|IffImbIn-IpO{OgO'O`OudOwnUbUmpU, Ut^_^A,C#utDeFfeeIlInL!@L%LumnMb(eMeMf%tM-Mm#Mp<yNc tNdu@NfirmNg*[N}@Nsid NtrolNv()OkOlPp PyR$ReRnR*@/Tt#U^UntryUp!Ur'Us(V Yo>_{Ad!AftAmA}AshAt AwlAzyEamEd.EekEwI{etImeIspIt-OpO[Ou^OwdUci$UelUi'Umb!Un^UshYY,$2BeLtu*PPbo?dRiousRr|Rta(R=Sh]/omTe3C!:DMa+MpN)Ng R(gShUght WnY3AlBa>BrisCadeCemb CideCl(eC%a>C*a'ErF&'F(eFyG*eLayLiv M<dMi'Ni$Nti,NyP?tP&dPos.P`PutyRi=ScribeS tSignSkSpair/royTailTe@VelopVi)Vo>3AgramAlAm#dAryCeE'lEtFf G.$Gn.yLemmaNn NosaurRe@RtSag*eScov Sea'ShSmi[S%d Splay/<)V tVideV%)Zzy5Ct%Cum|G~Lph(Ma(Na>NkeyN%OrSeUb!Ve_ftAg#AmaA,-AwEamE[IftIllInkIpI=OpUmY2CkMbNeR(g/T^Ty1Arf1Nam-:G G!RlyRnR`Sily/Sy1HoOlogyOnomy0GeItUca>1F%t0G1GhtTh 2BowD E@r-Eg<tEm|Eph<tEvat%I>Se0B?kBodyBra)Er+Ot]PloyPow Pty0Ab!A@DD![D%'EmyErgyF%)Ga+G(eH<)JoyLi,OughR-hRollSu*T Ti*TryVelope1Isode0U$Uip0AA'OdeOs]R%Upt0CapeSayS&)Ta>0Ern$H-s1Id&)IlOkeOl=1A@Amp!Ce[Ch<+C.eCludeCu'Ecu>Erci'Hau,Hib.I!I,ItOt-P<dPe@Pi*Pla(Po'P*[T&dTra0EEbrow:Br-CeCultyDeIntI`~L'MeMilyMousNNcyNtasyRmSh]TT$Th TigueUltV%.e3Atu*Bru?yD $EEdElMa!N)/iv$T^V W3B Ct]EldGu*LeLmLt N$NdNeNg NishReRmR,Sc$ShTT}[X_gAmeAshAtAv%EeIghtIpOatO{O%Ow UidUshY_mCusGIlLd~owOdOtR)Re,R+tRkRtu}RumRw?dSsil/ UndX_gi!AmeEqu|EshI&dIn+OgOntO,OwnOz&U.2ElNNnyRna)RyTu*:D+tInLaxy~ yMePRa+Rba+Rd&Rl-Rm|SSpTeTh U+Ze3N $NiusN*Nt!Nu(e/u*2O,0AntFtGg!Ng RaffeRlVe_dAn)A*A[IdeImp'ObeOomOryO=OwUe_tDde[LdOdO'RillaSpelSsipV nWn_bA)A(AntApeA[Av.yEatE&IdIefItOc yOupOwUnt_rdE[IdeIltIt?N3M:B.IrLfMm M, NdPpyRb%RdRshR=,TVeWkZ?d3AdAl`ArtAvyD+hogIght~oLmetLpNRo3Dd&Gh~NtPRe/%y5BbyCkeyLdLeLiday~owMeNeyOdPeRnRr%R'Sp.$/TelUrV 5BGeM<Mb!M%Nd*dNgryNtRd!RryRtSb<d3Brid:1EOn0EaEntifyLe2N%e4LLeg$L}[0A+Ita>M&'Mu}Pa@Po'Pro=Pul'0ChCludeComeC*a'DexD-a>Do%Du,ryF<tFl-tF%mHa!H .Iti$Je@JuryMa>N Noc|PutQuiryS<eSe@SideSpi*/$lTa@T e,ToVe,V.eVol=3On0L<dOla>Sue0Em1Ory:CketGu?RZz3AlousAns~yWel9BInKeUr}yY5D+I)MpNg!Ni%Nk/:Ng?oo3EnEpT^upY3CkDD}yNdNgdomSsTT^&TeTt&Wi4EeIfeO{Ow:BBelB%Dd DyKeMpNgua+PtopR+T T(UghUndryVaWWnWsu.Y Zy3Ad AfArnA=Ctu*FtGG$G&dIsu*M#NdNg`NsOp?dSs#Tt Vel3ArB tyBr?yC&'FeFtGhtKeMbM.NkOnQuid/Tt!VeZ?d5AdAnB, C$CkG-NelyNgOpTt yUdUn+VeY$5CkyGga+Mb N?N^Xury3R-s:Ch(eDG-G}tIdIlInJ%KeMm$NNa+Nda>NgoNs]Nu$P!Rb!R^Rg(R(eRketRria+SkSs/ T^T i$ThTrixTt XimumZe3AdowAnAsu*AtCh<-D$DiaLodyLtMb M%yNt]NuRcyR+R.RryShSsa+T$Thod3Dd!DnightLk~]M-NdNimumN%Nu>Rac!Rr%S ySs/akeXXedXtu*5Bi!DelDifyMM|N.%NkeyN, N`OnR$ReRn(gSqu.oTh T]T%Unta(U'VeVie5ChFf(LeLtiplySc!SeumShroomS-/Tu$3Self/ yTh:I=MePk(Rrow/yT]Tu*3ArCkEdGati=G!@I` PhewR=/TTw%kUtr$V WsXt3CeGht5B!I'M(eeOd!Rm$R`SeTab!TeTh(gTi)VelW5C!?Mb R'T:K0EyJe@Li+Scu*S =Ta(Vious0CurE<Tob 0Or1FF Fi)T&2L1Ay0DI=Ymp-0It0CeEI#L(eLy1EnEraIn]Po'T]1An+B.Ch?dD D(?yG<I|Ig($Ph<0Tr-h0H 0Tdo%T TputTside0AlEnEr0NN 0Yg&0/ 0O}:CtDd!GeIrLa)LmNdaNelN-N` P RadeR|RkRrotRtySsT^ThTi|TrolTt nU'VeYm|3A)AnutArAs<tL-<NN$tyNcilOp!Pp Rfe@Rm.Rs#T2O}OtoRa'Ys-$0AnoCn-Ctu*E)GGe#~LotNkO} Pe/olT^Zza_)A}tA,-A>AyEa'Ed+U{UgUn+2EmEtIntL?LeLi)NdNyOlPul?Rt]S.]Ssib!/TatoTt yV tyWd W _@i)Ai'Ed-tEf Epa*Es|EttyEv|I)IdeIm?yIntI%.yIs#Iva>IzeOb!mO)[Odu)Of.OgramOje@Omo>OofOp tyOsp O>@OudOvide2Bl-Dd(g~LpL'Mpk(N^PilPpyR^a'R.yRpo'R'ShTZz!3Ramid:99Al.yAntumArt E,]I{ItIzO>:Bb.Cco#CeCkD?DioIlInI'~yMpN^NdomN+PidReTeTh V&WZ%3AdyAlAs#BelBuildC$lCei=CipeC%dCyc!Du)F!@F%mFu'G]G*tGul?Je@LaxLea'LiefLyMa(Memb M(dMo=Nd NewNtOp&PairPeatPla)P%tQui*ScueSemb!Si,Sour)Sp#'SultTi*T*atTurnUn]Ve$ViewW?d2Y`m0BBb#CeChDeD+F!GhtGidNgOtPp!SkTu$V$V 5AdA,BotBu,CketM<)OfOkieOmSeTa>UghUndU>Y$5Bb DeGLeNNwayR$:DDd!D}[FeIlLadLm#L#LtLu>MeMp!NdTisfyToshiU)Usa+VeY1A!AnA*Att E}HemeHoolI&)I[%sOrp]OutRapRe&RiptRub1AAr^As#AtC#dC*tCt]Cur.yEdEkGm|Le@~M(?Ni%N'Nt&)RiesRvi)Ss]Tt!TupV&_dowAftAllowA*EdEllEriffIeldIftI}IpIv O{OeOotOpOrtOuld O=RimpRugUff!Y0Bl(gCkDeE+GhtGnL|Lk~yLv Mil?Mp!N)NgR&/ Tua>XZe1A>Et^IIllInIrtUll0AbAmEepEnd I)IdeIghtImOg<OtOwUsh0AllArtI!OkeOo`0A{AkeApIffOw0ApCc Ci$CkDaFtL?Ldi LidLut]L=Me#eNgOnRryRtUlUndUpUr)U`0A)A*Ati$AwnEakEci$EedEllEndH eI)Id IkeInIr.L.OilOns%O#OrtOtRayReadR(gY0Ua*UeezeUir*l_b!AdiumAffA+AirsAmpAndArtA>AyEakEelEmEpE*oI{IllIngO{Oma^O}OolOryO=Ra>gyReetRikeR#gRugg!Ud|UffUmb!Y!0Bje@Bm.BwayC)[ChDd&Ff G?G+,ItMm NNnyN'tP PplyP*meReRfa)R+Rpri'RroundR=ySpe@/a(1AllowAmpApArmE?EetIftImIngIt^Ord1MbolMptomRup/em:B!Ck!GIlL|LkNkPeR+tSk/eTtooXi3A^Am~NN<tNnisNtRm/Xt_nkAtEmeEnE%yE*EyIngIsOughtReeRi=RowUmbUnd 0CketDeG LtMb MeNyPRedSsueT!5A,BaccoDayDdl EGe` I!tK&MatoM%rowNeNgueNightOlO`PP-Pp!R^RnadoRtoi'SsT$Uri,W?dW WnY_{AdeAff-Ag-A(Ansf ApAshA=lAyEatEeEndI$IbeI{Igg ImIpOphyOub!U{UeUlyUmpetU,U`Y2BeIt]Mb!NaN}lRkeyRnRt!1El=EntyI)InI,O1PeP-$:5Ly5B*lla0Ab!Awa*C!Cov D DoFairFoldHappyIf%mIqueItIv 'KnownLo{TilUsu$Veil1Da>GradeHoldOnP Set1B<Ge0A+EEdEfulE![U$0Il.y:C<tCuumGueLidL!yL=NNishP%Rious/Ult3H-!L=tNd%Ntu*NueRbRifyRs]RyS'lT <3Ab!Br<tCiousCt%yDeoEw~a+Nta+Ol(Rtu$RusSaS.Su$T$Vid5C$I)IdLc<oLumeTeYa+:GeG#ItLk~LnutNtRfa*RmRri%ShSp/eT VeY3Al`Ap#ArA'lA` BDd(gEk&dIrdLcome/T_!AtEatEelEnE*IpIsp 0DeD`FeLd~NNdowNeNgNkNn Nt ReSdomSeShT}[5LfM<Nd OdOlRdRkRldRryR`_pE{E,!I,I>Ong::Rd3Ar~ow9UUngU`:3BraRo9NeO",checksum$2="0x3c8acc1e7b08d8e76f9fda015ef48dc8c710a73cb7e0f77b2c18a9b5a7adde60";let wordlist=null;class LangEn extends WordlistOwl{constructor(){super("en",words,checksum$2)}static wordlist(){return wordlist==null&&(wordlist=new LangEn),wordlist}}function getUpperMask(tr){return(1<<tr)-1<<8-tr&255}function getLowerMask(tr){return(1<<tr)-1&255}function mnemonicToEntropy(tr,er){assertNormalize("NFKD"),er==null&&(er=LangEn.wordlist());const rr=er.split(tr);assertArgument(rr.length%3===0&&rr.length>=12&&rr.length<=24,"invalid mnemonic length","mnemonic","[ REDACTED ]");const nr=new Uint8Array(Math.ceil(11*rr.length/8));let ir=0;for(let lr=0;lr<rr.length;lr++){let ur=er.getWordIndex(rr[lr].normalize("NFKD"));assertArgument(ur>=0,`invalid mnemonic word at index ${lr}`,"mnemonic","[ REDACTED ]");for(let dr=0;dr<11;dr++)ur&1<<10-dr&&(nr[ir>>3]|=1<<7-ir%8),ir++}const sr=32*rr.length/3,or=rr.length/3,ar=getUpperMask(or),cr=getBytes(sha256$3(nr.slice(0,sr/8)))[0]&ar;return assertArgument(cr===(nr[nr.length-1]&ar),"invalid mnemonic checksum","mnemonic","[ REDACTED ]"),hexlify(nr.slice(0,sr/8))}function entropyToMnemonic(tr,er){assertArgument(tr.length%4===0&&tr.length>=16&&tr.length<=32,"invalid entropy size","entropy","[ REDACTED ]"),er==null&&(er=LangEn.wordlist());const rr=[0];let nr=11;for(let or=0;or<tr.length;or++)nr>8?(rr[rr.length-1]<<=8,rr[rr.length-1]|=tr[or],nr-=8):(rr[rr.length-1]<<=nr,rr[rr.length-1]|=tr[or]>>8-nr,rr.push(tr[or]&getLowerMask(8-nr)),nr+=3);const ir=tr.length/4,sr=parseInt(sha256$3(tr).substring(2,4),16)&getUpperMask(ir);return rr[rr.length-1]<<=ir,rr[rr.length-1]|=sr>>8-ir,er.join(rr.map(or=>er.getWord(or)))}const _guard$1={};class Mnemonic{constructor(er,rr,nr,ir,sr){Ys(this,"phrase");Ys(this,"password");Ys(this,"wordlist");Ys(this,"entropy");ir==null&&(ir=""),sr==null&&(sr=LangEn.wordlist()),assertPrivate(er,_guard$1,"Mnemonic"),defineProperties(this,{phrase:nr,password:ir,wordlist:sr,entropy:rr})}computeSeed(){const er=toUtf8Bytes("mnemonic"+this.password,"NFKD");return pbkdf2(toUtf8Bytes(this.phrase,"NFKD"),er,2048,64,"sha512")}static fromPhrase(er,rr,nr){const ir=mnemonicToEntropy(er,nr);return er=entropyToMnemonic(getBytes(ir),nr),new Mnemonic(_guard$1,ir,er,rr,nr)}static fromEntropy(er,rr,nr){const ir=getBytes(er,"entropy"),sr=entropyToMnemonic(ir,nr);return new Mnemonic(_guard$1,hexlify(ir),sr,rr,nr)}static entropyToPhrase(er,rr){const nr=getBytes(er,"entropy");return entropyToMnemonic(nr,rr)}static phraseToEntropy(er,rr){return mnemonicToEntropy(er,rr)}static isValidMnemonic(er,rr){try{return mnemonicToEntropy(er,rr),!0}catch{}return!1}}/*! MIT License. Copyright 2015-2022 Richard Moore <me@ricmoo.com>. See LICENSE.txt. */var __classPrivateFieldGet$4=function(tr,er,rr,nr){if(rr==="a"&&!nr)throw new TypeError("Private accessor was defined without a getter");if(typeof er=="function"?tr!==er||!nr:!er.has(tr))throw new TypeError("Cannot read private member from an object whose class did not declare it");return rr==="m"?nr:rr==="a"?nr.call(tr):nr?nr.value:er.get(tr)},__classPrivateFieldSet$4=function(tr,er,rr,nr,ir){if(nr==="m")throw new TypeError("Private method is not writable");if(nr==="a"&&!ir)throw new TypeError("Private accessor was defined without a setter");if(typeof er=="function"?tr!==er||!ir:!er.has(tr))throw new TypeError("Cannot write private member to an object whose class did not declare it");return nr==="a"?ir.call(tr,rr):ir?ir.value=rr:er.set(tr,rr),rr},_AES_key,_AES_Kd,_AES_Ke;const numberOfRounds={16:10,24:12,32:14},rcon=[1,2,4,8,16,32,64,128,27,54,108,216,171,77,154,47,94,188,99,198,151,53,106,212,179,125,250,239,197,145],S$1=[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22],Si=[82,9,106,213,48,54,165,56,191,64,163,158,129,243,215,251,124,227,57,130,155,47,255,135,52,142,67,68,196,222,233,203,84,123,148,50,166,194,35,61,238,76,149,11,66,250,195,78,8,46,161,102,40,217,36,178,118,91,162,73,109,139,209,37,114,248,246,100,134,104,152,22,212,164,92,204,93,101,182,146,108,112,72,80,253,237,185,218,94,21,70,87,167,141,157,132,144,216,171,0,140,188,211,10,247,228,88,5,184,179,69,6,208,44,30,143,202,63,15,2,193,175,189,3,1,19,138,107,58,145,17,65,79,103,220,234,151,242,207,206,240,180,230,115,150,172,116,34,231,173,53,133,226,249,55,232,28,117,223,110,71,241,26,113,29,41,197,137,111,183,98,14,170,24,190,27,252,86,62,75,198,210,121,32,154,219,192,254,120,205,90,244,31,221,168,51,136,7,199,49,177,18,16,89,39,128,236,95,96,81,127,169,25,181,74,13,45,229,122,159,147,201,156,239,160,224,59,77,174,42,245,176,200,235,187,60,131,83,153,97,23,43,4,126,186,119,214,38,225,105,20,99,85,33,12,125],T1=[3328402341,4168907908,4000806809,4135287693,4294111757,3597364157,3731845041,2445657428,1613770832,33620227,3462883241,1445669757,3892248089,3050821474,1303096294,3967186586,2412431941,528646813,2311702848,4202528135,4026202645,2992200171,2387036105,4226871307,1101901292,3017069671,1604494077,1169141738,597466303,1403299063,3832705686,2613100635,1974974402,3791519004,1033081774,1277568618,1815492186,2118074177,4126668546,2211236943,1748251740,1369810420,3521504564,4193382664,3799085459,2883115123,1647391059,706024767,134480908,2512897874,1176707941,2646852446,806885416,932615841,168101135,798661301,235341577,605164086,461406363,3756188221,3454790438,1311188841,2142417613,3933566367,302582043,495158174,1479289972,874125870,907746093,3698224818,3025820398,1537253627,2756858614,1983593293,3084310113,2108928974,1378429307,3722699582,1580150641,327451799,2790478837,3117535592,0,3253595436,1075847264,3825007647,2041688520,3059440621,3563743934,2378943302,1740553945,1916352843,2487896798,2555137236,2958579944,2244988746,3151024235,3320835882,1336584933,3992714006,2252555205,2588757463,1714631509,293963156,2319795663,3925473552,67240454,4269768577,2689618160,2017213508,631218106,1269344483,2723238387,1571005438,2151694528,93294474,1066570413,563977660,1882732616,4059428100,1673313503,2008463041,2950355573,1109467491,537923632,3858759450,4260623118,3218264685,2177748300,403442708,638784309,3287084079,3193921505,899127202,2286175436,773265209,2479146071,1437050866,4236148354,2050833735,3362022572,3126681063,840505643,3866325909,3227541664,427917720,2655997905,2749160575,1143087718,1412049534,999329963,193497219,2353415882,3354324521,1807268051,672404540,2816401017,3160301282,369822493,2916866934,3688947771,1681011286,1949973070,336202270,2454276571,201721354,1210328172,3093060836,2680341085,3184776046,1135389935,3294782118,965841320,831886756,3554993207,4068047243,3588745010,2345191491,1849112409,3664604599,26054028,2983581028,2622377682,1235855840,3630984372,2891339514,4092916743,3488279077,3395642799,4101667470,1202630377,268961816,1874508501,4034427016,1243948399,1546530418,941366308,1470539505,1941222599,2546386513,3421038627,2715671932,3899946140,1042226977,2521517021,1639824860,227249030,260737669,3765465232,2084453954,1907733956,3429263018,2420656344,100860677,4160157185,470683154,3261161891,1781871967,2924959737,1773779408,394692241,2579611992,974986535,664706745,3655459128,3958962195,731420851,571543859,3530123707,2849626480,126783113,865375399,765172662,1008606754,361203602,3387549984,2278477385,2857719295,1344809080,2782912378,59542671,1503764984,160008576,437062935,1707065306,3622233649,2218934982,3496503480,2185314755,697932208,1512910199,504303377,2075177163,2824099068,1841019862,739644986],T2=[2781242211,2230877308,2582542199,2381740923,234877682,3184946027,2984144751,1418839493,1348481072,50462977,2848876391,2102799147,434634494,1656084439,3863849899,2599188086,1167051466,2636087938,1082771913,2281340285,368048890,3954334041,3381544775,201060592,3963727277,1739838676,4250903202,3930435503,3206782108,4149453988,2531553906,1536934080,3262494647,484572669,2923271059,1783375398,1517041206,1098792767,49674231,1334037708,1550332980,4098991525,886171109,150598129,2481090929,1940642008,1398944049,1059722517,201851908,1385547719,1699095331,1587397571,674240536,2704774806,252314885,3039795866,151914247,908333586,2602270848,1038082786,651029483,1766729511,3447698098,2682942837,454166793,2652734339,1951935532,775166490,758520603,3000790638,4004797018,4217086112,4137964114,1299594043,1639438038,3464344499,2068982057,1054729187,1901997871,2534638724,4121318227,1757008337,0,750906861,1614815264,535035132,3363418545,3988151131,3201591914,1183697867,3647454910,1265776953,3734260298,3566750796,3903871064,1250283471,1807470800,717615087,3847203498,384695291,3313910595,3617213773,1432761139,2484176261,3481945413,283769337,100925954,2180939647,4037038160,1148730428,3123027871,3813386408,4087501137,4267549603,3229630528,2315620239,2906624658,3156319645,1215313976,82966005,3747855548,3245848246,1974459098,1665278241,807407632,451280895,251524083,1841287890,1283575245,337120268,891687699,801369324,3787349855,2721421207,3431482436,959321879,1469301956,4065699751,2197585534,1199193405,2898814052,3887750493,724703513,2514908019,2696962144,2551808385,3516813135,2141445340,1715741218,2119445034,2872807568,2198571144,3398190662,700968686,3547052216,1009259540,2041044702,3803995742,487983883,1991105499,1004265696,1449407026,1316239930,504629770,3683797321,168560134,1816667172,3837287516,1570751170,1857934291,4014189740,2797888098,2822345105,2754712981,936633572,2347923833,852879335,1133234376,1500395319,3084545389,2348912013,1689376213,3533459022,3762923945,3034082412,4205598294,133428468,634383082,2949277029,2398386810,3913789102,403703816,3580869306,2297460856,1867130149,1918643758,607656988,4049053350,3346248884,1368901318,600565992,2090982877,2632479860,557719327,3717614411,3697393085,2249034635,2232388234,2430627952,1115438654,3295786421,2865522278,3633334344,84280067,33027830,303828494,2747425121,1600795957,4188952407,3496589753,2434238086,1486471617,658119965,3106381470,953803233,334231800,3005978776,857870609,3151128937,1890179545,2298973838,2805175444,3056442267,574365214,2450884487,550103529,1233637070,4289353045,2018519080,2057691103,2399374476,4166623649,2148108681,387583245,3664101311,836232934,3330556482,3100665960,3280093505,2955516313,2002398509,287182607,3413881008,4238890068,3597515707,975967766],T3=[1671808611,2089089148,2006576759,2072901243,4061003762,1807603307,1873927791,3310653893,810573872,16974337,1739181671,729634347,4263110654,3613570519,2883997099,1989864566,3393556426,2191335298,3376449993,2106063485,4195741690,1508618841,1204391495,4027317232,2917941677,3563566036,2734514082,2951366063,2629772188,2767672228,1922491506,3227229120,3082974647,4246528509,2477669779,644500518,911895606,1061256767,4144166391,3427763148,878471220,2784252325,3845444069,4043897329,1905517169,3631459288,827548209,356461077,67897348,3344078279,593839651,3277757891,405286936,2527147926,84871685,2595565466,118033927,305538066,2157648768,3795705826,3945188843,661212711,2999812018,1973414517,152769033,2208177539,745822252,439235610,455947803,1857215598,1525593178,2700827552,1391895634,994932283,3596728278,3016654259,695947817,3812548067,795958831,2224493444,1408607827,3513301457,0,3979133421,543178784,4229948412,2982705585,1542305371,1790891114,3410398667,3201918910,961245753,1256100938,1289001036,1491644504,3477767631,3496721360,4012557807,2867154858,4212583931,1137018435,1305975373,861234739,2241073541,1171229253,4178635257,33948674,2139225727,1357946960,1011120188,2679776671,2833468328,1374921297,2751356323,1086357568,2408187279,2460827538,2646352285,944271416,4110742005,3168756668,3066132406,3665145818,560153121,271589392,4279952895,4077846003,3530407890,3444343245,202643468,322250259,3962553324,1608629855,2543990167,1154254916,389623319,3294073796,2817676711,2122513534,1028094525,1689045092,1575467613,422261273,1939203699,1621147744,2174228865,1339137615,3699352540,577127458,712922154,2427141008,2290289544,1187679302,3995715566,3100863416,339486740,3732514782,1591917662,186455563,3681988059,3762019296,844522546,978220090,169743370,1239126601,101321734,611076132,1558493276,3260915650,3547250131,2901361580,1655096418,2443721105,2510565781,3828863972,2039214713,3878868455,3359869896,928607799,1840765549,2374762893,3580146133,1322425422,2850048425,1823791212,1459268694,4094161908,3928346602,1706019429,2056189050,2934523822,135794696,3134549946,2022240376,628050469,779246638,472135708,2800834470,3032970164,3327236038,3894660072,3715932637,1956440180,522272287,1272813131,3185336765,2340818315,2323976074,1888542832,1044544574,3049550261,1722469478,1222152264,50660867,4127324150,236067854,1638122081,895445557,1475980887,3117443513,2257655686,3243809217,489110045,2662934430,3778599393,4162055160,2561878936,288563729,1773916777,3648039385,2391345038,2493985684,2612407707,505560094,2274497927,3911240169,3460925390,1442818645,678973480,3749357023,2358182796,2717407649,2306869641,219617805,3218761151,3862026214,1120306242,1756942440,1103331905,2578459033,762796589,252780047,2966125488,1425844308,3151392187,372911126],T4=[1667474886,2088535288,2004326894,2071694838,4075949567,1802223062,1869591006,3318043793,808472672,16843522,1734846926,724270422,4278065639,3621216949,2880169549,1987484396,3402253711,2189597983,3385409673,2105378810,4210693615,1499065266,1195886990,4042263547,2913856577,3570689971,2728590687,2947541573,2627518243,2762274643,1920112356,3233831835,3082273397,4261223649,2475929149,640051788,909531756,1061110142,4160160501,3435941763,875846760,2779116625,3857003729,4059105529,1903268834,3638064043,825316194,353713962,67374088,3351728789,589522246,3284360861,404236336,2526454071,84217610,2593830191,117901582,303183396,2155911963,3806477791,3958056653,656894286,2998062463,1970642922,151591698,2206440989,741110872,437923380,454765878,1852748508,1515908788,2694904667,1381168804,993742198,3604373943,3014905469,690584402,3823320797,791638366,2223281939,1398011302,3520161977,0,3991743681,538992704,4244381667,2981218425,1532751286,1785380564,3419096717,3200178535,960056178,1246420628,1280103576,1482221744,3486468741,3503319995,4025428677,2863326543,4227536621,1128514950,1296947098,859002214,2240123921,1162203018,4193849577,33687044,2139062782,1347481760,1010582648,2678045221,2829640523,1364325282,2745433693,1077985408,2408548869,2459086143,2644360225,943212656,4126475505,3166494563,3065430391,3671750063,555836226,269496352,4294908645,4092792573,3537006015,3452783745,202118168,320025894,3974901699,1600119230,2543297077,1145359496,387397934,3301201811,2812801621,2122220284,1027426170,1684319432,1566435258,421079858,1936954854,1616945344,2172753945,1330631070,3705438115,572679748,707427924,2425400123,2290647819,1179044492,4008585671,3099120491,336870440,3739122087,1583276732,185277718,3688593069,3772791771,842159716,976899700,168435220,1229577106,101059084,606366792,1549591736,3267517855,3553849021,2897014595,1650632388,2442242105,2509612081,3840161747,2038008818,3890688725,3368567691,926374254,1835907034,2374863873,3587531953,1313788572,2846482505,1819063512,1448540844,4109633523,3941213647,1701162954,2054852340,2930698567,134748176,3132806511,2021165296,623210314,774795868,471606328,2795958615,3031746419,3334885783,3907527627,3722280097,1953799400,522133822,1263263126,3183336545,2341176845,2324333839,1886425312,1044267644,3048588401,1718004428,1212733584,50529542,4143317495,235803164,1633788866,892690282,1465383342,3115962473,2256965911,3250673817,488449850,2661202215,3789633753,4177007595,2560144171,286339874,1768537042,3654906025,2391705863,2492770099,2610673197,505291324,2273808917,3924369609,3469625735,1431699370,673740880,3755965093,2358021891,2711746649,2307489801,218961690,3217021541,3873845719,1111672452,1751693520,1094828930,2576986153,757954394,252645662,2964376443,1414855848,3149649517,370555436],T5=[1374988112,2118214995,437757123,975658646,1001089995,530400753,2902087851,1273168787,540080725,2910219766,2295101073,4110568485,1340463100,3307916247,641025152,3043140495,3736164937,632953703,1172967064,1576976609,3274667266,2169303058,2370213795,1809054150,59727847,361929877,3211623147,2505202138,3569255213,1484005843,1239443753,2395588676,1975683434,4102977912,2572697195,666464733,3202437046,4035489047,3374361702,2110667444,1675577880,3843699074,2538681184,1649639237,2976151520,3144396420,4269907996,4178062228,1883793496,2403728665,2497604743,1383856311,2876494627,1917518562,3810496343,1716890410,3001755655,800440835,2261089178,3543599269,807962610,599762354,33778362,3977675356,2328828971,2809771154,4077384432,1315562145,1708848333,101039829,3509871135,3299278474,875451293,2733856160,92987698,2767645557,193195065,1080094634,1584504582,3178106961,1042385657,2531067453,3711829422,1306967366,2438237621,1908694277,67556463,1615861247,429456164,3602770327,2302690252,1742315127,2968011453,126454664,3877198648,2043211483,2709260871,2084704233,4169408201,0,159417987,841739592,504459436,1817866830,4245618683,260388950,1034867998,908933415,168810852,1750902305,2606453969,607530554,202008497,2472011535,3035535058,463180190,2160117071,1641816226,1517767529,470948374,3801332234,3231722213,1008918595,303765277,235474187,4069246893,766945465,337553864,1475418501,2943682380,4003061179,2743034109,4144047775,1551037884,1147550661,1543208500,2336434550,3408119516,3069049960,3102011747,3610369226,1113818384,328671808,2227573024,2236228733,3535486456,2935566865,3341394285,496906059,3702665459,226906860,2009195472,733156972,2842737049,294930682,1206477858,2835123396,2700099354,1451044056,573804783,2269728455,3644379585,2362090238,2564033334,2801107407,2776292904,3669462566,1068351396,742039012,1350078989,1784663195,1417561698,4136440770,2430122216,775550814,2193862645,2673705150,1775276924,1876241833,3475313331,3366754619,270040487,3902563182,3678124923,3441850377,1851332852,3969562369,2203032232,3868552805,2868897406,566021896,4011190502,3135740889,1248802510,3936291284,699432150,832877231,708780849,3332740144,899835584,1951317047,4236429990,3767586992,866637845,4043610186,1106041591,2144161806,395441711,1984812685,1139781709,3433712980,3835036895,2664543715,1282050075,3240894392,1181045119,2640243204,25965917,4203181171,4211818798,3009879386,2463879762,3910161971,1842759443,2597806476,933301370,1509430414,3943906441,3467192302,3076639029,3776767469,2051518780,2631065433,1441952575,404016761,1942435775,1408749034,1610459739,3745345300,2017778566,3400528769,3110650942,941896748,3265478751,371049330,3168937228,675039627,4279080257,967311729,135050206,3635733660,1683407248,2076935265,3576870512,1215061108,3501741890],T6=[1347548327,1400783205,3273267108,2520393566,3409685355,4045380933,2880240216,2471224067,1428173050,4138563181,2441661558,636813900,4233094615,3620022987,2149987652,2411029155,1239331162,1730525723,2554718734,3781033664,46346101,310463728,2743944855,3328955385,3875770207,2501218972,3955191162,3667219033,768917123,3545789473,692707433,1150208456,1786102409,2029293177,1805211710,3710368113,3065962831,401639597,1724457132,3028143674,409198410,2196052529,1620529459,1164071807,3769721975,2226875310,486441376,2499348523,1483753576,428819965,2274680428,3075636216,598438867,3799141122,1474502543,711349675,129166120,53458370,2592523643,2782082824,4063242375,2988687269,3120694122,1559041666,730517276,2460449204,4042459122,2706270690,3446004468,3573941694,533804130,2328143614,2637442643,2695033685,839224033,1973745387,957055980,2856345839,106852767,1371368976,4181598602,1033297158,2933734917,1179510461,3046200461,91341917,1862534868,4284502037,605657339,2547432937,3431546947,2003294622,3182487618,2282195339,954669403,3682191598,1201765386,3917234703,3388507166,0,2198438022,1211247597,2887651696,1315723890,4227665663,1443857720,507358933,657861945,1678381017,560487590,3516619604,975451694,2970356327,261314535,3535072918,2652609425,1333838021,2724322336,1767536459,370938394,182621114,3854606378,1128014560,487725847,185469197,2918353863,3106780840,3356761769,2237133081,1286567175,3152976349,4255350624,2683765030,3160175349,3309594171,878443390,1988838185,3704300486,1756818940,1673061617,3403100636,272786309,1075025698,545572369,2105887268,4174560061,296679730,1841768865,1260232239,4091327024,3960309330,3497509347,1814803222,2578018489,4195456072,575138148,3299409036,446754879,3629546796,4011996048,3347532110,3252238545,4270639778,915985419,3483825537,681933534,651868046,2755636671,3828103837,223377554,2607439820,1649704518,3270937875,3901806776,1580087799,4118987695,3198115200,2087309459,2842678573,3016697106,1003007129,2802849917,1860738147,2077965243,164439672,4100872472,32283319,2827177882,1709610350,2125135846,136428751,3874428392,3652904859,3460984630,3572145929,3593056380,2939266226,824852259,818324884,3224740454,930369212,2801566410,2967507152,355706840,1257309336,4148292826,243256656,790073846,2373340630,1296297904,1422699085,3756299780,3818836405,457992840,3099667487,2135319889,77422314,1560382517,1945798516,788204353,1521706781,1385356242,870912086,325965383,2358957921,2050466060,2388260884,2313884476,4006521127,901210569,3990953189,1014646705,1503449823,1062597235,2031621326,3212035895,3931371469,1533017514,350174575,2256028891,2177544179,1052338372,741876788,1606591296,1914052035,213705253,2334669897,1107234197,1899603969,3725069491,2631447780,2422494913,1635502980,1893020342,1950903388,1120974935],T7=[2807058932,1699970625,2764249623,1586903591,1808481195,1173430173,1487645946,59984867,4199882800,1844882806,1989249228,1277555970,3623636965,3419915562,1149249077,2744104290,1514790577,459744698,244860394,3235995134,1963115311,4027744588,2544078150,4190530515,1608975247,2627016082,2062270317,1507497298,2200818878,567498868,1764313568,3359936201,2305455554,2037970062,1047239e3,1910319033,1337376481,2904027272,2892417312,984907214,1243112415,830661914,861968209,2135253587,2011214180,2927934315,2686254721,731183368,1750626376,4246310725,1820824798,4172763771,3542330227,48394827,2404901663,2871682645,671593195,3254988725,2073724613,145085239,2280796200,2779915199,1790575107,2187128086,472615631,3029510009,4075877127,3802222185,4107101658,3201631749,1646252340,4270507174,1402811438,1436590835,3778151818,3950355702,3963161475,4020912224,2667994737,273792366,2331590177,104699613,95345982,3175501286,2377486676,1560637892,3564045318,369057872,4213447064,3919042237,1137477952,2658625497,1119727848,2340947849,1530455833,4007360968,172466556,266959938,516552836,0,2256734592,3980931627,1890328081,1917742170,4294704398,945164165,3575528878,958871085,3647212047,2787207260,1423022939,775562294,1739656202,3876557655,2530391278,2443058075,3310321856,547512796,1265195639,437656594,3121275539,719700128,3762502690,387781147,218828297,3350065803,2830708150,2848461854,428169201,122466165,3720081049,1627235199,648017665,4122762354,1002783846,2117360635,695634755,3336358691,4234721005,4049844452,3704280881,2232435299,574624663,287343814,612205898,1039717051,840019705,2708326185,793451934,821288114,1391201670,3822090177,376187827,3113855344,1224348052,1679968233,2361698556,1058709744,752375421,2431590963,1321699145,3519142200,2734591178,188127444,2177869557,3727205754,2384911031,3215212461,2648976442,2450346104,3432737375,1180849278,331544205,3102249176,4150144569,2952102595,2159976285,2474404304,766078933,313773861,2570832044,2108100632,1668212892,3145456443,2013908262,418672217,3070356634,2594734927,1852171925,3867060991,3473416636,3907448597,2614737639,919489135,164948639,2094410160,2997825956,590424639,2486224549,1723872674,3157750862,3399941250,3501252752,3625268135,2555048196,3673637356,1343127501,4130281361,3599595085,2957853679,1297403050,81781910,3051593425,2283490410,532201772,1367295589,3926170974,895287692,1953757831,1093597963,492483431,3528626907,1446242576,1192455638,1636604631,209336225,344873464,1015671571,669961897,3375740769,3857572124,2973530695,3747192018,1933530610,3464042516,935293895,3454686199,2858115069,1863638845,3683022916,4085369519,3292445032,875313188,1080017571,3279033885,621591778,1233856572,2504130317,24197544,3017672716,3835484340,3247465558,2220981195,3060847922,1551124588,1463996600],T8=[4104605777,1097159550,396673818,660510266,2875968315,2638606623,4200115116,3808662347,821712160,1986918061,3430322568,38544885,3856137295,718002117,893681702,1654886325,2975484382,3122358053,3926825029,4274053469,796197571,1290801793,1184342925,3556361835,2405426947,2459735317,1836772287,1381620373,3196267988,1948373848,3764988233,3385345166,3263785589,2390325492,1480485785,3111247143,3780097726,2293045232,548169417,3459953789,3746175075,439452389,1362321559,1400849762,1685577905,1806599355,2174754046,137073913,1214797936,1174215055,3731654548,2079897426,1943217067,1258480242,529487843,1437280870,3945269170,3049390895,3313212038,923313619,679998e3,3215307299,57326082,377642221,3474729866,2041877159,133361907,1776460110,3673476453,96392454,878845905,2801699524,777231668,4082475170,2330014213,4142626212,2213296395,1626319424,1906247262,1846563261,562755902,3708173718,1040559837,3871163981,1418573201,3294430577,114585348,1343618912,2566595609,3186202582,1078185097,3651041127,3896688048,2307622919,425408743,3371096953,2081048481,1108339068,2216610296,0,2156299017,736970802,292596766,1517440620,251657213,2235061775,2933202493,758720310,265905162,1554391400,1532285339,908999204,174567692,1474760595,4002861748,2610011675,3234156416,3693126241,2001430874,303699484,2478443234,2687165888,585122620,454499602,151849742,2345119218,3064510765,514443284,4044981591,1963412655,2581445614,2137062819,19308535,1928707164,1715193156,4219352155,1126790795,600235211,3992742070,3841024952,836553431,1669664834,2535604243,3323011204,1243905413,3141400786,4180808110,698445255,2653899549,2989552604,2253581325,3252932727,3004591147,1891211689,2487810577,3915653703,4237083816,4030667424,2100090966,865136418,1229899655,953270745,3399679628,3557504664,4118925222,2061379749,3079546586,2915017791,983426092,2022837584,1607244650,2118541908,2366882550,3635996816,972512814,3283088770,1568718495,3499326569,3576539503,621982671,2895723464,410887952,2623762152,1002142683,645401037,1494807662,2595684844,1335535747,2507040230,4293295786,3167684641,367585007,3885750714,1865862730,2668221674,2960971305,2763173681,1059270954,2777952454,2724642869,1320957812,2194319100,2429595872,2815956275,77089521,3973773121,3444575871,2448830231,1305906550,4021308739,2857194700,2516901860,3518358430,1787304780,740276417,1699839814,1592394909,2352307457,2272556026,188821243,1729977011,3687994002,274084841,3594982253,3613494426,2701949495,4162096729,322734571,2837966542,1640576439,484830689,1202797690,3537852828,4067639125,349075736,3342319475,4157467219,4255800159,1030690015,1155237496,2951971274,1757691577,607398968,2738905026,499347990,3794078908,1011452712,227885567,2818666809,213114376,3034881240,1455525988,3414450555,850817237,1817998408,3092726480],U1=[0,235474187,470948374,303765277,941896748,908933415,607530554,708780849,1883793496,2118214995,1817866830,1649639237,1215061108,1181045119,1417561698,1517767529,3767586992,4003061179,4236429990,4069246893,3635733660,3602770327,3299278474,3400528769,2430122216,2664543715,2362090238,2193862645,2835123396,2801107407,3035535058,3135740889,3678124923,3576870512,3341394285,3374361702,3810496343,3977675356,4279080257,4043610186,2876494627,2776292904,3076639029,3110650942,2472011535,2640243204,2403728665,2169303058,1001089995,899835584,666464733,699432150,59727847,226906860,530400753,294930682,1273168787,1172967064,1475418501,1509430414,1942435775,2110667444,1876241833,1641816226,2910219766,2743034109,2976151520,3211623147,2505202138,2606453969,2302690252,2269728455,3711829422,3543599269,3240894392,3475313331,3843699074,3943906441,4178062228,4144047775,1306967366,1139781709,1374988112,1610459739,1975683434,2076935265,1775276924,1742315127,1034867998,866637845,566021896,800440835,92987698,193195065,429456164,395441711,1984812685,2017778566,1784663195,1683407248,1315562145,1080094634,1383856311,1551037884,101039829,135050206,437757123,337553864,1042385657,807962610,573804783,742039012,2531067453,2564033334,2328828971,2227573024,2935566865,2700099354,3001755655,3168937228,3868552805,3902563182,4203181171,4102977912,3736164937,3501741890,3265478751,3433712980,1106041591,1340463100,1576976609,1408749034,2043211483,2009195472,1708848333,1809054150,832877231,1068351396,766945465,599762354,159417987,126454664,361929877,463180190,2709260871,2943682380,3178106961,3009879386,2572697195,2538681184,2236228733,2336434550,3509871135,3745345300,3441850377,3274667266,3910161971,3877198648,4110568485,4211818798,2597806476,2497604743,2261089178,2295101073,2733856160,2902087851,3202437046,2968011453,3936291284,3835036895,4136440770,4169408201,3535486456,3702665459,3467192302,3231722213,2051518780,1951317047,1716890410,1750902305,1113818384,1282050075,1584504582,1350078989,168810852,67556463,371049330,404016761,841739592,1008918595,775550814,540080725,3969562369,3801332234,4035489047,4269907996,3569255213,3669462566,3366754619,3332740144,2631065433,2463879762,2160117071,2395588676,2767645557,2868897406,3102011747,3069049960,202008497,33778362,270040487,504459436,875451293,975658646,675039627,641025152,2084704233,1917518562,1615861247,1851332852,1147550661,1248802510,1484005843,1451044056,933301370,967311729,733156972,632953703,260388950,25965917,328671808,496906059,1206477858,1239443753,1543208500,1441952575,2144161806,1908694277,1675577880,1842759443,3610369226,3644379585,3408119516,3307916247,4011190502,3776767469,4077384432,4245618683,2809771154,2842737049,3144396420,3043140495,2673705150,2438237621,2203032232,2370213795],U2=[0,185469197,370938394,487725847,741876788,657861945,975451694,824852259,1483753576,1400783205,1315723890,1164071807,1950903388,2135319889,1649704518,1767536459,2967507152,3152976349,2801566410,2918353863,2631447780,2547432937,2328143614,2177544179,3901806776,3818836405,4270639778,4118987695,3299409036,3483825537,3535072918,3652904859,2077965243,1893020342,1841768865,1724457132,1474502543,1559041666,1107234197,1257309336,598438867,681933534,901210569,1052338372,261314535,77422314,428819965,310463728,3409685355,3224740454,3710368113,3593056380,3875770207,3960309330,4045380933,4195456072,2471224067,2554718734,2237133081,2388260884,3212035895,3028143674,2842678573,2724322336,4138563181,4255350624,3769721975,3955191162,3667219033,3516619604,3431546947,3347532110,2933734917,2782082824,3099667487,3016697106,2196052529,2313884476,2499348523,2683765030,1179510461,1296297904,1347548327,1533017514,1786102409,1635502980,2087309459,2003294622,507358933,355706840,136428751,53458370,839224033,957055980,605657339,790073846,2373340630,2256028891,2607439820,2422494913,2706270690,2856345839,3075636216,3160175349,3573941694,3725069491,3273267108,3356761769,4181598602,4063242375,4011996048,3828103837,1033297158,915985419,730517276,545572369,296679730,446754879,129166120,213705253,1709610350,1860738147,1945798516,2029293177,1239331162,1120974935,1606591296,1422699085,4148292826,4233094615,3781033664,3931371469,3682191598,3497509347,3446004468,3328955385,2939266226,2755636671,3106780840,2988687269,2198438022,2282195339,2501218972,2652609425,1201765386,1286567175,1371368976,1521706781,1805211710,1620529459,2105887268,1988838185,533804130,350174575,164439672,46346101,870912086,954669403,636813900,788204353,2358957921,2274680428,2592523643,2441661558,2695033685,2880240216,3065962831,3182487618,3572145929,3756299780,3270937875,3388507166,4174560061,4091327024,4006521127,3854606378,1014646705,930369212,711349675,560487590,272786309,457992840,106852767,223377554,1678381017,1862534868,1914052035,2031621326,1211247597,1128014560,1580087799,1428173050,32283319,182621114,401639597,486441376,768917123,651868046,1003007129,818324884,1503449823,1385356242,1333838021,1150208456,1973745387,2125135846,1673061617,1756818940,2970356327,3120694122,2802849917,2887651696,2637442643,2520393566,2334669897,2149987652,3917234703,3799141122,4284502037,4100872472,3309594171,3460984630,3545789473,3629546796,2050466060,1899603969,1814803222,1730525723,1443857720,1560382517,1075025698,1260232239,575138148,692707433,878443390,1062597235,243256656,91341917,409198410,325965383,3403100636,3252238545,3704300486,3620022987,3874428392,3990953189,4042459122,4227665663,2460449204,2578018489,2226875310,2411029155,3198115200,3046200461,2827177882,2743944855],U3=[0,218828297,437656594,387781147,875313188,958871085,775562294,590424639,1750626376,1699970625,1917742170,2135253587,1551124588,1367295589,1180849278,1265195639,3501252752,3720081049,3399941250,3350065803,3835484340,3919042237,4270507174,4085369519,3102249176,3051593425,2734591178,2952102595,2361698556,2177869557,2530391278,2614737639,3145456443,3060847922,2708326185,2892417312,2404901663,2187128086,2504130317,2555048196,3542330227,3727205754,3375740769,3292445032,3876557655,3926170974,4246310725,4027744588,1808481195,1723872674,1910319033,2094410160,1608975247,1391201670,1173430173,1224348052,59984867,244860394,428169201,344873464,935293895,984907214,766078933,547512796,1844882806,1627235199,2011214180,2062270317,1507497298,1423022939,1137477952,1321699145,95345982,145085239,532201772,313773861,830661914,1015671571,731183368,648017665,3175501286,2957853679,2807058932,2858115069,2305455554,2220981195,2474404304,2658625497,3575528878,3625268135,3473416636,3254988725,3778151818,3963161475,4213447064,4130281361,3599595085,3683022916,3432737375,3247465558,3802222185,4020912224,4172763771,4122762354,3201631749,3017672716,2764249623,2848461854,2331590177,2280796200,2431590963,2648976442,104699613,188127444,472615631,287343814,840019705,1058709744,671593195,621591778,1852171925,1668212892,1953757831,2037970062,1514790577,1463996600,1080017571,1297403050,3673637356,3623636965,3235995134,3454686199,4007360968,3822090177,4107101658,4190530515,2997825956,3215212461,2830708150,2779915199,2256734592,2340947849,2627016082,2443058075,172466556,122466165,273792366,492483431,1047239e3,861968209,612205898,695634755,1646252340,1863638845,2013908262,1963115311,1446242576,1530455833,1277555970,1093597963,1636604631,1820824798,2073724613,1989249228,1436590835,1487645946,1337376481,1119727848,164948639,81781910,331544205,516552836,1039717051,821288114,669961897,719700128,2973530695,3157750862,2871682645,2787207260,2232435299,2283490410,2667994737,2450346104,3647212047,3564045318,3279033885,3464042516,3980931627,3762502690,4150144569,4199882800,3070356634,3121275539,2904027272,2686254721,2200818878,2384911031,2570832044,2486224549,3747192018,3528626907,3310321856,3359936201,3950355702,3867060991,4049844452,4234721005,1739656202,1790575107,2108100632,1890328081,1402811438,1586903591,1233856572,1149249077,266959938,48394827,369057872,418672217,1002783846,919489135,567498868,752375421,209336225,24197544,376187827,459744698,945164165,895287692,574624663,793451934,1679968233,1764313568,2117360635,1933530610,1343127501,1560637892,1243112415,1192455638,3704280881,3519142200,3336358691,3419915562,3907448597,3857572124,4075877127,4294704398,3029510009,3113855344,2927934315,2744104290,2159976285,2377486676,2594734927,2544078150],U4=[0,151849742,303699484,454499602,607398968,758720310,908999204,1059270954,1214797936,1097159550,1517440620,1400849762,1817998408,1699839814,2118541908,2001430874,2429595872,2581445614,2194319100,2345119218,3034881240,3186202582,2801699524,2951971274,3635996816,3518358430,3399679628,3283088770,4237083816,4118925222,4002861748,3885750714,1002142683,850817237,698445255,548169417,529487843,377642221,227885567,77089521,1943217067,2061379749,1640576439,1757691577,1474760595,1592394909,1174215055,1290801793,2875968315,2724642869,3111247143,2960971305,2405426947,2253581325,2638606623,2487810577,3808662347,3926825029,4044981591,4162096729,3342319475,3459953789,3576539503,3693126241,1986918061,2137062819,1685577905,1836772287,1381620373,1532285339,1078185097,1229899655,1040559837,923313619,740276417,621982671,439452389,322734571,137073913,19308535,3871163981,4021308739,4104605777,4255800159,3263785589,3414450555,3499326569,3651041127,2933202493,2815956275,3167684641,3049390895,2330014213,2213296395,2566595609,2448830231,1305906550,1155237496,1607244650,1455525988,1776460110,1626319424,2079897426,1928707164,96392454,213114376,396673818,514443284,562755902,679998e3,865136418,983426092,3708173718,3557504664,3474729866,3323011204,4180808110,4030667424,3945269170,3794078908,2507040230,2623762152,2272556026,2390325492,2975484382,3092726480,2738905026,2857194700,3973773121,3856137295,4274053469,4157467219,3371096953,3252932727,3673476453,3556361835,2763173681,2915017791,3064510765,3215307299,2156299017,2307622919,2459735317,2610011675,2081048481,1963412655,1846563261,1729977011,1480485785,1362321559,1243905413,1126790795,878845905,1030690015,645401037,796197571,274084841,425408743,38544885,188821243,3613494426,3731654548,3313212038,3430322568,4082475170,4200115116,3780097726,3896688048,2668221674,2516901860,2366882550,2216610296,3141400786,2989552604,2837966542,2687165888,1202797690,1320957812,1437280870,1554391400,1669664834,1787304780,1906247262,2022837584,265905162,114585348,499347990,349075736,736970802,585122620,972512814,821712160,2595684844,2478443234,2293045232,2174754046,3196267988,3079546586,2895723464,2777952454,3537852828,3687994002,3234156416,3385345166,4142626212,4293295786,3841024952,3992742070,174567692,57326082,410887952,292596766,777231668,660510266,1011452712,893681702,1108339068,1258480242,1343618912,1494807662,1715193156,1865862730,1948373848,2100090966,2701949495,2818666809,3004591147,3122358053,2235061775,2352307457,2535604243,2653899549,3915653703,3764988233,4219352155,4067639125,3444575871,3294430577,3746175075,3594982253,836553431,953270745,600235211,718002117,367585007,484830689,133361907,251657213,2041877159,1891211689,1806599355,1654886325,1568718495,1418573201,1335535747,1184342925];function convertToInt32(tr){const er=[];for(let rr=0;rr<tr.length;rr+=4)er.push(tr[rr]<<24|tr[rr+1]<<16|tr[rr+2]<<8|tr[rr+3]);return er}class AES{get key(){return __classPrivateFieldGet$4(this,_AES_key,"f").slice()}constructor(er){if(_AES_key.set(this,void 0),_AES_Kd.set(this,void 0),_AES_Ke.set(this,void 0),!(this instanceof AES))throw Error("AES must be instanitated with `new`");__classPrivateFieldSet$4(this,_AES_key,new Uint8Array(er),"f");const rr=numberOfRounds[this.key.length];if(rr==null)throw new TypeError("invalid key size (must be 16, 24 or 32 bytes)");__classPrivateFieldSet$4(this,_AES_Ke,[],"f"),__classPrivateFieldSet$4(this,_AES_Kd,[],"f");for(let ur=0;ur<=rr;ur++)__classPrivateFieldGet$4(this,_AES_Ke,"f").push([0,0,0,0]),__classPrivateFieldGet$4(this,_AES_Kd,"f").push([0,0,0,0]);const nr=(rr+1)*4,ir=this.key.length/4,sr=convertToInt32(this.key);let or;for(let ur=0;ur<ir;ur++)or=ur>>2,__classPrivateFieldGet$4(this,_AES_Ke,"f")[or][ur%4]=sr[ur],__classPrivateFieldGet$4(this,_AES_Kd,"f")[rr-or][ur%4]=sr[ur];let ar=0,cr=ir,lr;for(;cr<nr;){if(lr=sr[ir-1],sr[0]^=S$1[lr>>16&255]<<24^S$1[lr>>8&255]<<16^S$1[lr&255]<<8^S$1[lr>>24&255]^rcon[ar]<<24,ar+=1,ir!=8)for(let mr=1;mr<ir;mr++)sr[mr]^=sr[mr-1];else{for(let mr=1;mr<ir/2;mr++)sr[mr]^=sr[mr-1];lr=sr[ir/2-1],sr[ir/2]^=S$1[lr&255]^S$1[lr>>8&255]<<8^S$1[lr>>16&255]<<16^S$1[lr>>24&255]<<24;for(let mr=ir/2+1;mr<ir;mr++)sr[mr]^=sr[mr-1]}let ur=0,dr,yr;for(;ur<ir&&cr<nr;)dr=cr>>2,yr=cr%4,__classPrivateFieldGet$4(this,_AES_Ke,"f")[dr][yr]=sr[ur],__classPrivateFieldGet$4(this,_AES_Kd,"f")[rr-dr][yr]=sr[ur++],cr++}for(let ur=1;ur<rr;ur++)for(let dr=0;dr<4;dr++)lr=__classPrivateFieldGet$4(this,_AES_Kd,"f")[ur][dr],__classPrivateFieldGet$4(this,_AES_Kd,"f")[ur][dr]=U1[lr>>24&255]^U2[lr>>16&255]^U3[lr>>8&255]^U4[lr&255]}encrypt(er){if(er.length!=16)throw new TypeError("invalid plaintext size (must be 16 bytes)");const rr=__classPrivateFieldGet$4(this,_AES_Ke,"f").length-1,nr=[0,0,0,0];let ir=convertToInt32(er);for(let ar=0;ar<4;ar++)ir[ar]^=__classPrivateFieldGet$4(this,_AES_Ke,"f")[0][ar];for(let ar=1;ar<rr;ar++){for(let cr=0;cr<4;cr++)nr[cr]=T1[ir[cr]>>24&255]^T2[ir[(cr+1)%4]>>16&255]^T3[ir[(cr+2)%4]>>8&255]^T4[ir[(cr+3)%4]&255]^__classPrivateFieldGet$4(this,_AES_Ke,"f")[ar][cr];ir=nr.slice()}const sr=new Uint8Array(16);let or=0;for(let ar=0;ar<4;ar++)or=__classPrivateFieldGet$4(this,_AES_Ke,"f")[rr][ar],sr[4*ar]=(S$1[ir[ar]>>24&255]^or>>24)&255,sr[4*ar+1]=(S$1[ir[(ar+1)%4]>>16&255]^or>>16)&255,sr[4*ar+2]=(S$1[ir[(ar+2)%4]>>8&255]^or>>8)&255,sr[4*ar+3]=(S$1[ir[(ar+3)%4]&255]^or)&255;return sr}decrypt(er){if(er.length!=16)throw new TypeError("invalid ciphertext size (must be 16 bytes)");const rr=__classPrivateFieldGet$4(this,_AES_Kd,"f").length-1,nr=[0,0,0,0];let ir=convertToInt32(er);for(let ar=0;ar<4;ar++)ir[ar]^=__classPrivateFieldGet$4(this,_AES_Kd,"f")[0][ar];for(let ar=1;ar<rr;ar++){for(let cr=0;cr<4;cr++)nr[cr]=T5[ir[cr]>>24&255]^T6[ir[(cr+3)%4]>>16&255]^T7[ir[(cr+2)%4]>>8&255]^T8[ir[(cr+1)%4]&255]^__classPrivateFieldGet$4(this,_AES_Kd,"f")[ar][cr];ir=nr.slice()}const sr=new Uint8Array(16);let or=0;for(let ar=0;ar<4;ar++)or=__classPrivateFieldGet$4(this,_AES_Kd,"f")[rr][ar],sr[4*ar]=(Si[ir[ar]>>24&255]^or>>24)&255,sr[4*ar+1]=(Si[ir[(ar+3)%4]>>16&255]^or>>16)&255,sr[4*ar+2]=(Si[ir[(ar+2)%4]>>8&255]^or>>8)&255,sr[4*ar+3]=(Si[ir[(ar+1)%4]&255]^or)&255;return sr}}_AES_key=new WeakMap,_AES_Kd=new WeakMap,_AES_Ke=new WeakMap;class ModeOfOperation{constructor(er,rr,nr){if(nr&&!(this instanceof nr))throw new Error(`${er} must be instantiated with "new"`);Object.defineProperties(this,{aes:{enumerable:!0,value:new AES(rr)},name:{enumerable:!0,value:er}})}}var __classPrivateFieldSet$3=function(tr,er,rr,nr,ir){if(nr==="m")throw new TypeError("Private method is not writable");if(nr==="a"&&!ir)throw new TypeError("Private accessor was defined without a setter");if(typeof er=="function"?tr!==er||!ir:!er.has(tr))throw new TypeError("Cannot write private member to an object whose class did not declare it");return nr==="a"?ir.call(tr,rr):ir?ir.value=rr:er.set(tr,rr),rr},__classPrivateFieldGet$3=function(tr,er,rr,nr){if(rr==="a"&&!nr)throw new TypeError("Private accessor was defined without a getter");if(typeof er=="function"?tr!==er||!nr:!er.has(tr))throw new TypeError("Cannot read private member from an object whose class did not declare it");return rr==="m"?nr:rr==="a"?nr.call(tr):nr?nr.value:er.get(tr)},_CBC_iv,_CBC_lastBlock;class CBC extends ModeOfOperation{constructor(er,rr){if(super("ECC",er,CBC),_CBC_iv.set(this,void 0),_CBC_lastBlock.set(this,void 0),rr){if(rr.length%16)throw new TypeError("invalid iv size (must be 16 bytes)");__classPrivateFieldSet$3(this,_CBC_iv,new Uint8Array(rr),"f")}else __classPrivateFieldSet$3(this,_CBC_iv,new Uint8Array(16),"f");__classPrivateFieldSet$3(this,_CBC_lastBlock,this.iv,"f")}get iv(){return new Uint8Array(__classPrivateFieldGet$3(this,_CBC_iv,"f"))}encrypt(er){if(er.length%16)throw new TypeError("invalid plaintext size (must be multiple of 16 bytes)");const rr=new Uint8Array(er.length);for(let nr=0;nr<er.length;nr+=16){for(let ir=0;ir<16;ir++)__classPrivateFieldGet$3(this,_CBC_lastBlock,"f")[ir]^=er[nr+ir];__classPrivateFieldSet$3(this,_CBC_lastBlock,this.aes.encrypt(__classPrivateFieldGet$3(this,_CBC_lastBlock,"f")),"f"),rr.set(__classPrivateFieldGet$3(this,_CBC_lastBlock,"f"),nr)}return rr}decrypt(er){if(er.length%16)throw new TypeError("invalid ciphertext size (must be multiple of 16 bytes)");const rr=new Uint8Array(er.length);for(let nr=0;nr<er.length;nr+=16){const ir=this.aes.decrypt(er.subarray(nr,nr+16));for(let sr=0;sr<16;sr++)rr[nr+sr]=ir[sr]^__classPrivateFieldGet$3(this,_CBC_lastBlock,"f")[sr],__classPrivateFieldGet$3(this,_CBC_lastBlock,"f")[sr]=er[nr+sr]}return rr}}_CBC_iv=new WeakMap,_CBC_lastBlock=new WeakMap;var __classPrivateFieldSet$2=function(tr,er,rr,nr,ir){if(nr==="m")throw new TypeError("Private method is not writable");if(nr==="a"&&!ir)throw new TypeError("Private accessor was defined without a setter");if(typeof er=="function"?tr!==er||!ir:!er.has(tr))throw new TypeError("Cannot write private member to an object whose class did not declare it");return nr==="a"?ir.call(tr,rr):ir?ir.value=rr:er.set(tr,rr),rr},__classPrivateFieldGet$2=function(tr,er,rr,nr){if(rr==="a"&&!nr)throw new TypeError("Private accessor was defined without a getter");if(typeof er=="function"?tr!==er||!nr:!er.has(tr))throw new TypeError("Cannot read private member from an object whose class did not declare it");return rr==="m"?nr:rr==="a"?nr.call(tr):nr?nr.value:er.get(tr)},_CTR_remaining,_CTR_remainingIndex,_CTR_counter;class CTR extends ModeOfOperation{constructor(er,rr){super("CTR",er,CTR),_CTR_remaining.set(this,void 0),_CTR_remainingIndex.set(this,void 0),_CTR_counter.set(this,void 0),__classPrivateFieldSet$2(this,_CTR_counter,new Uint8Array(16),"f"),__classPrivateFieldGet$2(this,_CTR_counter,"f").fill(0),__classPrivateFieldSet$2(this,_CTR_remaining,__classPrivateFieldGet$2(this,_CTR_counter,"f"),"f"),__classPrivateFieldSet$2(this,_CTR_remainingIndex,16,"f"),rr==null&&(rr=1),typeof rr=="number"?this.setCounterValue(rr):this.setCounterBytes(rr)}get counter(){return new Uint8Array(__classPrivateFieldGet$2(this,_CTR_counter,"f"))}setCounterValue(er){if(!Number.isInteger(er)||er<0||er>Number.MAX_SAFE_INTEGER)throw new TypeError("invalid counter initial integer value");for(let rr=15;rr>=0;--rr)__classPrivateFieldGet$2(this,_CTR_counter,"f")[rr]=er%256,er=Math.floor(er/256)}setCounterBytes(er){if(er.length!==16)throw new TypeError("invalid counter initial Uint8Array value length");__classPrivateFieldGet$2(this,_CTR_counter,"f").set(er)}increment(){for(let er=15;er>=0;er--)if(__classPrivateFieldGet$2(this,_CTR_counter,"f")[er]===255)__classPrivateFieldGet$2(this,_CTR_counter,"f")[er]=0;else{__classPrivateFieldGet$2(this,_CTR_counter,"f")[er]++;break}}encrypt(er){var rr,nr;const ir=new Uint8Array(er);for(let sr=0;sr<ir.length;sr++)__classPrivateFieldGet$2(this,_CTR_remainingIndex,"f")===16&&(__classPrivateFieldSet$2(this,_CTR_remaining,this.aes.encrypt(__classPrivateFieldGet$2(this,_CTR_counter,"f")),"f"),__classPrivateFieldSet$2(this,_CTR_remainingIndex,0,"f"),this.increment()),ir[sr]^=__classPrivateFieldGet$2(this,_CTR_remaining,"f")[__classPrivateFieldSet$2(this,_CTR_remainingIndex,(nr=__classPrivateFieldGet$2(this,_CTR_remainingIndex,"f"),rr=nr++,nr),"f"),rr];return ir}decrypt(er){return this.encrypt(er)}}_CTR_remaining=new WeakMap,_CTR_remainingIndex=new WeakMap,_CTR_counter=new WeakMap;function pkcs7Strip(tr){if(tr.length<16)throw new TypeError("PKCS#7 invalid length");const er=tr[tr.length-1];if(er>16)throw new TypeError("PKCS#7 padding byte out of range");const rr=tr.length-er;for(let nr=0;nr<er;nr++)if(tr[rr+nr]!==er)throw new TypeError("PKCS#7 invalid padding byte");return new Uint8Array(tr.subarray(0,rr))}function looseArrayify(tr){return typeof tr=="string"&&!tr.startsWith("0x")&&(tr="0x"+tr),getBytesCopy(tr)}function zpad$1(tr,er){for(tr=String(tr);tr.length<er;)tr="0"+tr;return tr}function getPassword(tr){return typeof tr=="string"?toUtf8Bytes(tr,"NFKC"):getBytesCopy(tr)}function spelunk(tr,er){const rr=er.match(/^([a-z0-9$_.-]*)(:([a-z]+))?(!)?$/i);assertArgument(rr!=null,"invalid path","path",er);const nr=rr[1],ir=rr[3],sr=rr[4]==="!";let or=tr;for(const ar of nr.toLowerCase().split(".")){if(Array.isArray(or)){if(!ar.match(/^[0-9]+$/))break;or=or[parseInt(ar)]}else if(typeof or=="object"){let cr=null;for(const lr in or)if(lr.toLowerCase()===ar){cr=or[lr];break}or=cr}else or=null;if(or==null)break}if(assertArgument(!sr||or!=null,"missing required value","path",nr),ir&&or!=null){if(ir==="int"){if(typeof or=="string"&&or.match(/^-?[0-9]+$/))return parseInt(or);if(Number.isSafeInteger(or))return or}if(ir==="number"&&typeof or=="string"&&or.match(/^-?[0-9.]*$/))return parseFloat(or);if(ir==="data"&&typeof or=="string")return looseArrayify(or);if(ir==="array"&&Array.isArray(or)||ir===typeof or)return or;assertArgument(!1,`wrong type found for ${ir} `,"path",nr)}return or}const defaultPath$1="m/44'/60'/0'/0/0";function isKeystoreJson(tr){try{const er=JSON.parse(tr);if((er.version!=null?parseInt(er.version):0)===3)return!0}catch{}return!1}function decrypt$3(tr,er,rr){if(spelunk(tr,"crypto.cipher:string")==="aes-128-ctr"){const ir=spelunk(tr,"crypto.cipherparams.iv:data!"),sr=new CTR(er,ir);return hexlify(sr.decrypt(rr))}assert$r(!1,"unsupported cipher","UNSUPPORTED_OPERATION",{operation:"decrypt"})}function getAccount(tr,er){const rr=getBytes(er),nr=spelunk(tr,"crypto.ciphertext:data!"),ir=hexlify(keccak256$4(concat$2([rr.slice(16,32),nr]))).substring(2);assertArgument(ir===spelunk(tr,"crypto.mac:string!").toLowerCase(),"incorrect password","password","[ REDACTED ]");const sr=decrypt$3(tr,rr.slice(0,16),nr),or=computeAddress(sr);if(tr.address){let lr=tr.address.toLowerCase();lr.startsWith("0x")||(lr="0x"+lr),assertArgument(getAddress$1(lr)===or,"keystore address/privateKey mismatch","address",tr.address)}const ar={address:or,privateKey:sr};if(spelunk(tr,"x-ethers.version:string")==="0.1"){const lr=rr.slice(32,64),ur=spelunk(tr,"x-ethers.mnemonicCiphertext:data!"),dr=spelunk(tr,"x-ethers.mnemonicCounter:data!"),yr=new CTR(lr,dr);ar.mnemonic={path:spelunk(tr,"x-ethers.path:string")||defaultPath$1,locale:spelunk(tr,"x-ethers.locale:string")||"en",entropy:hexlify(getBytes(yr.decrypt(ur)))}}return ar}function getDecryptKdfParams(tr){const er=spelunk(tr,"crypto.kdf:string");if(er&&typeof er=="string"){if(er.toLowerCase()==="scrypt"){const rr=spelunk(tr,"crypto.kdfparams.salt:data!"),nr=spelunk(tr,"crypto.kdfparams.n:int!"),ir=spelunk(tr,"crypto.kdfparams.r:int!"),sr=spelunk(tr,"crypto.kdfparams.p:int!");assertArgument(nr>0&&(nr&nr-1)===0,"invalid kdf.N","kdf.N",nr),assertArgument(ir>0&&sr>0,"invalid kdf","kdf",er);const or=spelunk(tr,"crypto.kdfparams.dklen:int!");return assertArgument(or===32,"invalid kdf.dklen","kdf.dflen",or),{name:"scrypt",salt:rr,N:nr,r:ir,p:sr,dkLen:64}}else if(er.toLowerCase()==="pbkdf2"){const rr=spelunk(tr,"crypto.kdfparams.salt:data!"),nr=spelunk(tr,"crypto.kdfparams.prf:string!"),ir=nr.split("-").pop();assertArgument(ir==="sha256"||ir==="sha512","invalid kdf.pdf","kdf.pdf",nr);const sr=spelunk(tr,"crypto.kdfparams.c:int!"),or=spelunk(tr,"crypto.kdfparams.dklen:int!");return assertArgument(or===32,"invalid kdf.dklen","kdf.dklen",or),{name:"pbkdf2",salt:rr,count:sr,dkLen:or,algorithm:ir}}}assertArgument(!1,"unsupported key-derivation function","kdf",er)}function decryptKeystoreJsonSync(tr,er){const rr=JSON.parse(tr),nr=getPassword(er),ir=getDecryptKdfParams(rr);if(ir.name==="pbkdf2"){const{salt:dr,count:yr,dkLen:mr,algorithm:wr}=ir,xr=pbkdf2(nr,dr,yr,mr,wr);return getAccount(rr,xr)}assert$r(ir.name==="scrypt","cannot be reached","UNKNOWN_ERROR",{params:ir});const{salt:sr,N:or,r:ar,p:cr,dkLen:lr}=ir,ur=scryptSync(nr,sr,or,ar,cr,lr);return getAccount(rr,ur)}function stall$1(tr){return new Promise(er=>{setTimeout(()=>{er()},tr)})}async function decryptKeystoreJson(tr,er,rr){const nr=JSON.parse(tr),ir=getPassword(er),sr=getDecryptKdfParams(nr);if(sr.name==="pbkdf2"){rr&&(rr(0),await stall$1(0));const{salt:yr,count:mr,dkLen:wr,algorithm:xr}=sr,Or=pbkdf2(ir,yr,mr,wr,xr);return rr&&(rr(1),await stall$1(0)),getAccount(nr,Or)}assert$r(sr.name==="scrypt","cannot be reached","UNKNOWN_ERROR",{params:sr});const{salt:or,N:ar,r:cr,p:lr,dkLen:ur}=sr,dr=await scrypt(ir,or,ar,cr,lr,ur,rr);return getAccount(nr,dr)}function getEncryptKdfParams(tr){const er=tr.salt!=null?getBytes(tr.salt,"options.salt"):randomBytes$3(32);let rr=1<<17,nr=8,ir=1;return tr.scrypt&&(tr.scrypt.N&&(rr=tr.scrypt.N),tr.scrypt.r&&(nr=tr.scrypt.r),tr.scrypt.p&&(ir=tr.scrypt.p)),assertArgument(typeof rr=="number"&&rr>0&&Number.isSafeInteger(rr)&&(BigInt(rr)&BigInt(rr-1))===BigInt(0),"invalid scrypt N parameter","options.N",rr),assertArgument(typeof nr=="number"&&nr>0&&Number.isSafeInteger(nr),"invalid scrypt r parameter","options.r",nr),assertArgument(typeof ir=="number"&&ir>0&&Number.isSafeInteger(ir),"invalid scrypt p parameter","options.p",ir),{name:"scrypt",dkLen:32,salt:er,N:rr,r:nr,p:ir}}function _encryptKeystore(tr,er,rr,nr){const ir=getBytes(rr.privateKey,"privateKey"),sr=nr.iv!=null?getBytes(nr.iv,"options.iv"):randomBytes$3(16);assertArgument(sr.length===16,"invalid options.iv length","options.iv",nr.iv);const or=nr.uuid!=null?getBytes(nr.uuid,"options.uuid"):randomBytes$3(16);assertArgument(or.length===16,"invalid options.uuid length","options.uuid",nr.iv);const ar=tr.slice(0,16),cr=tr.slice(16,32),lr=new CTR(ar,sr),ur=getBytes(lr.encrypt(ir)),dr=keccak256$4(concat$2([cr,ur])),yr={address:rr.address.substring(2).toLowerCase(),id:uuidV4(or),version:3,Crypto:{cipher:"aes-128-ctr",cipherparams:{iv:hexlify(sr).substring(2)},ciphertext:hexlify(ur).substring(2),kdf:"scrypt",kdfparams:{salt:hexlify(er.salt).substring(2),n:er.N,dklen:32,p:er.p,r:er.r},mac:dr.substring(2)}};if(rr.mnemonic){const mr=nr.client!=null?nr.client:`ethers/${version$5}`,wr=rr.mnemonic.path||defaultPath$1,xr=rr.mnemonic.locale||"en",Or=tr.slice(32,64),Tr=getBytes(rr.mnemonic.entropy,"account.mnemonic.entropy"),Ar=randomBytes$3(16),Nr=new CTR(Or,Ar),Ur=getBytes(Nr.encrypt(Tr)),Dr=new Date,zr="UTC--"+(Dr.getUTCFullYear()+"-"+zpad$1(Dr.getUTCMonth()+1,2)+"-"+zpad$1(Dr.getUTCDate(),2)+"T"+zpad$1(Dr.getUTCHours(),2)+"-"+zpad$1(Dr.getUTCMinutes(),2)+"-"+zpad$1(Dr.getUTCSeconds(),2)+".0Z")+"--"+yr.address;yr["x-ethers"]={client:mr,gethFilename:zr,path:wr,locale:xr,mnemonicCounter:hexlify(Ar).substring(2),mnemonicCiphertext:hexlify(Ur).substring(2),version:"0.1"}}return JSON.stringify(yr)}function encryptKeystoreJsonSync(tr,er,rr){rr==null&&(rr={});const nr=getPassword(er),ir=getEncryptKdfParams(rr),sr=scryptSync(nr,ir.salt,ir.N,ir.r,ir.p,64);return _encryptKeystore(getBytes(sr),ir,tr,rr)}async function encryptKeystoreJson(tr,er,rr){rr==null&&(rr={});const nr=getPassword(er),ir=getEncryptKdfParams(rr),sr=await scrypt(nr,ir.salt,ir.N,ir.r,ir.p,64,rr.progressCallback);return _encryptKeystore(getBytes(sr),ir,tr,rr)}const defaultPath="m/44'/60'/0'/0/0",MasterSecret=new Uint8Array([66,105,116,99,111,105,110,32,115,101,101,100]),HardenedBit=2147483648,N$2=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),Nibbles="0123456789abcdef";function zpad(tr,er){let rr="";for(;tr;)rr=Nibbles[tr%16]+rr,tr=Math.trunc(tr/16);for(;rr.length<er*2;)rr="0"+rr;return"0x"+rr}function encodeBase58Check(tr){const er=getBytes(tr),rr=dataSlice(sha256$3(sha256$3(er)),0,4),nr=concat$2([er,rr]);return encodeBase58(nr)}const _guard={};function ser_I(tr,er,rr,nr){const ir=new Uint8Array(37);tr&HardenedBit?(assert$r(nr!=null,"cannot derive child of neutered node","UNSUPPORTED_OPERATION",{operation:"deriveChild"}),ir.set(getBytes(nr),1)):ir.set(getBytes(rr));for(let or=24;or>=0;or-=8)ir[33+(or>>3)]=tr>>24-or&255;const sr=getBytes(computeHmac("sha512",er,ir));return{IL:sr.slice(0,32),IR:sr.slice(32)}}function derivePath(tr,er){const rr=er.split("/");assertArgument(rr.length>0,"invalid path","path",er),rr[0]==="m"&&(assertArgument(tr.depth===0,`cannot derive root path (i.e. path starting with "m/") for a node at non-zero depth ${tr.depth}`,"path",er),rr.shift());let nr=tr;for(let ir=0;ir<rr.length;ir++){const sr=rr[ir];if(sr.match(/^[0-9]+'$/)){const or=parseInt(sr.substring(0,sr.length-1));assertArgument(or<HardenedBit,"invalid path index",`path[${ir}]`,sr),nr=nr.deriveChild(HardenedBit+or)}else if(sr.match(/^[0-9]+$/)){const or=parseInt(sr);assertArgument(or<HardenedBit,"invalid path index",`path[${ir}]`,sr),nr=nr.deriveChild(or)}else assertArgument(!1,"invalid path component",`path[${ir}]`,sr)}return nr}var zu,u0,du,Vu;const yl=class yl extends BaseWallet{constructor(rr,nr,ir,sr,or,ar,cr,lr,ur){super(nr,ur);mo(this,zu);Ys(this,"publicKey");Ys(this,"fingerprint");Ys(this,"parentFingerprint");Ys(this,"mnemonic");Ys(this,"chainCode");Ys(this,"path");Ys(this,"index");Ys(this,"depth");assertPrivate(rr,_guard,"HDNodeWallet"),defineProperties(this,{publicKey:nr.compressedPublicKey});const dr=dataSlice(ripemd160(sha256$3(this.publicKey)),0,4);defineProperties(this,{parentFingerprint:ir,fingerprint:dr,chainCode:sr,path:or,index:ar,depth:cr}),defineProperties(this,{mnemonic:lr})}connect(rr){return new yl(_guard,this.signingKey,this.parentFingerprint,this.chainCode,this.path,this.index,this.depth,this.mnemonic,rr)}async encrypt(rr,nr){return await encryptKeystoreJson(Bo(this,zu,u0).call(this),rr,{progressCallback:nr})}encryptSync(rr){return encryptKeystoreJsonSync(Bo(this,zu,u0).call(this),rr)}get extendedKey(){return assert$r(this.depth<256,"Depth too deep","UNSUPPORTED_OPERATION",{operation:"extendedKey"}),encodeBase58Check(concat$2(["0x0488ADE4",zpad(this.depth,1),this.parentFingerprint,zpad(this.index,4),this.chainCode,concat$2(["0x00",this.privateKey])]))}hasPath(){return this.path!=null}neuter(){return new HDNodeVoidWallet(_guard,this.address,this.publicKey,this.parentFingerprint,this.chainCode,this.path,this.index,this.depth,this.provider)}deriveChild(rr){const nr=getNumber(rr,"index");assertArgument(nr<=4294967295,"invalid index","index",nr);let ir=this.path;ir&&(ir+="/"+(nr&~HardenedBit),nr&HardenedBit&&(ir+="'"));const{IR:sr,IL:or}=ser_I(nr,this.chainCode,this.publicKey,this.privateKey),ar=new SigningKey(toBeHex((toBigInt(or)+BigInt(this.privateKey))%N$2,32));return new yl(_guard,ar,this.fingerprint,hexlify(sr),ir,nr,this.depth+1,this.mnemonic,this.provider)}derivePath(rr){return derivePath(this,rr)}static fromExtendedKey(rr){const nr=toBeArray(decodeBase58(rr));assertArgument(nr.length===82||encodeBase58Check(nr.slice(0,78))===rr,"invalid extended key","extendedKey","[ REDACTED ]");const ir=nr[4],sr=hexlify(nr.slice(5,9)),or=parseInt(hexlify(nr.slice(9,13)).substring(2),16),ar=hexlify(nr.slice(13,45)),cr=nr.slice(45,78);switch(hexlify(nr.slice(0,4))){case"0x0488b21e":case"0x043587cf":{const lr=hexlify(cr);return new HDNodeVoidWallet(_guard,computeAddress(lr),lr,sr,ar,null,or,ir,null)}case"0x0488ade4":case"0x04358394 ":if(cr[0]!==0)break;return new yl(_guard,new SigningKey(cr.slice(1)),sr,ar,null,or,ir,null,null)}assertArgument(!1,"invalid extended key prefix","extendedKey","[ REDACTED ]")}static createRandom(rr,nr,ir){var or;rr==null&&(rr=""),nr==null&&(nr=defaultPath),ir==null&&(ir=LangEn.wordlist());const sr=Mnemonic.fromEntropy(randomBytes$3(16),rr,ir);return Bo(or=yl,du,Vu).call(or,sr.computeSeed(),sr).derivePath(nr)}static fromMnemonic(rr,nr){var ir;return nr||(nr=defaultPath),Bo(ir=yl,du,Vu).call(ir,rr.computeSeed(),rr).derivePath(nr)}static fromPhrase(rr,nr,ir,sr){var ar;nr==null&&(nr=""),ir==null&&(ir=defaultPath),sr==null&&(sr=LangEn.wordlist());const or=Mnemonic.fromPhrase(rr,nr,sr);return Bo(ar=yl,du,Vu).call(ar,or.computeSeed(),or).derivePath(ir)}static fromSeed(rr){var nr;return Bo(nr=yl,du,Vu).call(nr,rr,null)}};zu=new WeakSet,u0=function(){const rr={address:this.address,privateKey:this.privateKey},nr=this.mnemonic;return this.path&&nr&&nr.wordlist.locale==="en"&&nr.password===""&&(rr.mnemonic={path:this.path,locale:"en",entropy:nr.entropy}),rr},du=new WeakSet,Vu=function(rr,nr){assertArgument(isBytesLike(rr),"invalid seed","seed","[REDACTED]");const ir=getBytes(rr,"seed");assertArgument(ir.length>=16&&ir.length<=64,"invalid seed","seed","[REDACTED]");const sr=getBytes(computeHmac("sha512",MasterSecret,ir)),or=new SigningKey(hexlify(sr.slice(0,32)));return new yl(_guard,or,"0x00000000",hexlify(sr.slice(32)),"m",0,0,nr,null)},mo(yl,du);let HDNodeWallet=yl;class HDNodeVoidWallet extends VoidSigner{constructor(rr,nr,ir,sr,or,ar,cr,lr,ur){super(nr,ur);Ys(this,"publicKey");Ys(this,"fingerprint");Ys(this,"parentFingerprint");Ys(this,"chainCode");Ys(this,"path");Ys(this,"index");Ys(this,"depth");assertPrivate(rr,_guard,"HDNodeVoidWallet"),defineProperties(this,{publicKey:ir});const dr=dataSlice(ripemd160(sha256$3(ir)),0,4);defineProperties(this,{publicKey:ir,fingerprint:dr,parentFingerprint:sr,chainCode:or,path:ar,index:cr,depth:lr})}connect(rr){return new HDNodeVoidWallet(_guard,this.address,this.publicKey,this.parentFingerprint,this.chainCode,this.path,this.index,this.depth,rr)}get extendedKey(){return assert$r(this.depth<256,"Depth too deep","UNSUPPORTED_OPERATION",{operation:"extendedKey"}),encodeBase58Check(concat$2(["0x0488B21E",zpad(this.depth,1),this.parentFingerprint,zpad(this.index,4),this.chainCode,this.publicKey]))}hasPath(){return this.path!=null}deriveChild(rr){const nr=getNumber(rr,"index");assertArgument(nr<=4294967295,"invalid index","index",nr);let ir=this.path;ir&&(ir+="/"+(nr&~HardenedBit),nr&HardenedBit&&(ir+="'"));const{IR:sr,IL:or}=ser_I(nr,this.chainCode,this.publicKey,null),ar=SigningKey.addPoints(or,this.publicKey,!0),cr=computeAddress(ar);return new HDNodeVoidWallet(_guard,cr,ar,this.fingerprint,hexlify(sr),ir,nr,this.depth+1,this.provider)}derivePath(rr){return derivePath(this,rr)}}function isCrowdsaleJson(tr){try{if(JSON.parse(tr).encseed)return!0}catch{}return!1}function decryptCrowdsaleJson(tr,er){const rr=JSON.parse(tr),nr=getPassword(er),ir=getAddress$1(spelunk(rr,"ethaddr:string!")),sr=looseArrayify(spelunk(rr,"encseed:string!"));assertArgument(sr&&sr.length%16===0,"invalid encseed","json",tr);const or=getBytes(pbkdf2(nr,nr,2e3,32,"sha256")).slice(0,16),ar=sr.slice(0,16),cr=sr.slice(16),lr=new CBC(or,ar),ur=pkcs7Strip(getBytes(lr.decrypt(cr)));let dr="";for(let yr=0;yr<ur.length;yr++)dr+=String.fromCharCode(ur[yr]);return{address:ir,privateKey:id(dr)}}function stall(tr){return new Promise(er=>{setTimeout(()=>{er()},tr)})}var Ju,f0;const iu=class iu extends BaseWallet{constructor(er,rr){typeof er=="string"&&!er.startsWith("0x")&&(er="0x"+er);let nr=typeof er=="string"?new SigningKey(er):er;super(nr,rr)}connect(er){return new iu(this.signingKey,er)}async encrypt(er,rr){const nr={address:this.address,privateKey:this.privateKey};return await encryptKeystoreJson(nr,er,{progressCallback:rr})}encryptSync(er){const rr={address:this.address,privateKey:this.privateKey};return encryptKeystoreJsonSync(rr,er)}static async fromEncryptedJson(er,rr,nr){var sr;let ir=null;return isKeystoreJson(er)?ir=await decryptKeystoreJson(er,rr,nr):isCrowdsaleJson(er)&&(nr&&(nr(0),await stall(0)),ir=decryptCrowdsaleJson(er,rr),nr&&(nr(1),await stall(0))),Bo(sr=iu,Ju,f0).call(sr,ir)}static fromEncryptedJsonSync(er,rr){var ir;let nr=null;return isKeystoreJson(er)?nr=decryptKeystoreJsonSync(er,rr):isCrowdsaleJson(er)?nr=decryptCrowdsaleJson(er,rr):assertArgument(!1,"invalid JSON wallet","json","[ REDACTED ]"),Bo(ir=iu,Ju,f0).call(ir,nr)}static createRandom(er){const rr=HDNodeWallet.createRandom();return er?rr.connect(er):rr}static fromPhrase(er,rr){const nr=HDNodeWallet.fromPhrase(er);return rr?nr.connect(rr):nr}};Ju=new WeakSet,f0=function(er){if(assertArgument(er,"invalid JSON wallet","json","[ REDACTED ]"),"mnemonic"in er&&er.mnemonic&&er.mnemonic.locale==="en"){const nr=Mnemonic.fromEntropy(er.mnemonic.entropy),ir=HDNodeWallet.fromMnemonic(nr,er.mnemonic.path);if(ir.address===er.address&&ir.privateKey===er.privateKey)return ir;console.log("WARNING: JSON mismatch address/privateKey != mnemonic; fallback onto private key")}const rr=new iu(er.privateKey);return assertArgument(rr.address===er.address,"address/privateKey mismatch","json","[ REDACTED ]"),rr},mo(iu,Ju);let Wallet=iu;var __awaiter=function(tr,er,rr,nr){function ir(sr){return sr instanceof rr?sr:new rr(function(or){or(sr)})}return new(rr||(rr=Promise))(function(sr,or){function ar(ur){try{lr(nr.next(ur))}catch(dr){or(dr)}}function cr(ur){try{lr(nr.throw(ur))}catch(dr){or(dr)}}function lr(ur){ur.done?sr(ur.value):ir(ur.value).then(ar,cr)}lr((nr=nr.apply(tr,er||[])).next())})},__rest$1=function(tr,er){var rr={};for(var nr in tr)Object.prototype.hasOwnProperty.call(tr,nr)&&er.indexOf(nr)<0&&(rr[nr]=tr[nr]);if(tr!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ir=0,nr=Object.getOwnPropertySymbols(tr);ir<nr.length;ir++)er.indexOf(nr[ir])<0&&Object.prototype.propertyIsEnumerable.call(tr,nr[ir])&&(rr[nr[ir]]=tr[nr[ir]]);return rr};const b64$1=new Array(64),s64$1=new Array(123);for(let tr=0;tr<64;)s64$1[b64$1[tr]=tr<26?tr+65:tr<52?tr+71:tr<62?tr-4:tr-59|43]=tr++;function b64Encode(tr,er,rr){let nr=null;const ir=[];let sr=0,or=0,ar;for(;er<rr;){const cr=tr[er++];switch(or){case 0:ir[sr++]=b64$1[cr>>2],ar=(cr&3)<<4,or=1;break;case 1:ir[sr++]=b64$1[ar|cr>>4],ar=(cr&15)<<2,or=2;break;case 2:ir[sr++]=b64$1[ar|cr>>6],ir[sr++]=b64$1[cr&63],or=0;break}sr>8191&&((nr||(nr=[])).push(String.fromCharCode.apply(String,ir)),sr=0)}return or&&(ir[sr++]=b64$1[ar],ir[sr++]=61,or===1&&(ir[sr++]=61)),nr?(sr&&nr.push(String.fromCharCode.apply(String,ir.slice(0,sr))),nr.join("")):String.fromCharCode.apply(String,ir.slice(0,sr))}const invalidEncoding="invalid encoding";function b64Decode(tr){const er=[];let rr=0,nr=0,ir;for(let sr=0;sr<tr.length;){let or=tr.charCodeAt(sr++);if(or===61&&nr>1)break;if((or=s64$1[or])===void 0)throw Error(invalidEncoding);switch(nr){case 0:ir=or,nr=1;break;case 1:er[rr++]=ir<<2|(or&48)>>4,ir=or,nr=2;break;case 2:er[rr++]=(ir&15)<<4|(or&60)>>2,ir=or,nr=3;break;case 3:er[rr++]=(ir&3)<<6|or,nr=0;break}}if(nr===1)throw Error(invalidEncoding);return new Uint8Array(er)}function replacer(tr,er){return er&&er.constructor===Uint8Array?b64Encode(er,0,er.length):er}function fetchReq(tr,er){const rr=er||{},{pathPrefix:nr}=rr,ir=__rest$1(rr,["pathPrefix"]),sr=nr?`${nr}${tr}`:tr;return fetch(sr,ir).then(or=>or.json().then(ar=>{if(!or.ok)throw ar;return ar}))}function fetchStreamingRequest(tr,er,rr){return __awaiter(this,void 0,void 0,function*(){const nr=rr||{},{pathPrefix:ir}=nr,sr=__rest$1(nr,["pathPrefix"]),or=ir?`${ir}${tr}`:tr,ar=yield fetch(or,sr);if(!ar.ok){const cr=yield ar.json(),lr=cr.error&&cr.error.message?cr.error.message:"";throw new Error(lr)}if(!ar.body)throw new Error("response doesnt have a body");yield ar.body.pipeThrough(new TextDecoderStream).pipeThrough(getNewLineDelimitedJSONDecodingStream()).pipeTo(getNotifyEntityArrivalSink(cr=>{er&&er(cr)}))})}function getNewLineDelimitedJSONDecodingStream(){return new TransformStream({start(tr){tr.buf="",tr.pos=0},transform(tr,er){for(er.buf===void 0&&(er.buf=""),er.pos===void 0&&(er.pos=0),er.buf+=tr;er.pos<er.buf.length;)if(er.buf[er.pos]===`
`){const rr=er.buf.substring(0,er.pos),nr=JSON.parse(rr);er.enqueue(nr.result),er.buf=er.buf.substring(er.pos+1),er.pos=0}else++er.pos}})}function getNotifyEntityArrivalSink(tr){return new WritableStream({write(er){tr(er)}})}function isPlainObject$2(tr){const er=Object.prototype.toString.call(tr).slice(8,-1)==="Object";if(!(tr!==null&&er)||!er)return!1;const nr=Object.getPrototypeOf(tr);return typeof nr=="object"&&nr.constructor===Object.prototype.constructor}function isPrimitive(tr){return["string","number","boolean"].some(er=>typeof tr===er)}function isZeroValuePrimitive(tr){return tr===!1||tr===0||tr===""}function flattenRequestPayload(tr,er=""){return Object.keys(tr).reduce((rr,nr)=>{const ir=tr[nr],sr=er?[er,nr].join("."):nr,or=Array.isArray(ir)&&ir.every(lr=>isPrimitive(lr))&&ir.length>0,ar=isPrimitive(ir)&&!isZeroValuePrimitive(ir);let cr={};return isPlainObject$2(ir)?cr=flattenRequestPayload(ir,sr):(ar||or)&&(cr={[sr]:ir}),Object.assign(Object.assign({},rr),cr)},{})}function renderURLSearchParams(tr,er=[]){const rr=flattenRequestPayload(tr),nr=Object.keys(rr).reduce((ir,sr)=>{const or=rr[sr];return er.find(ar=>ar===sr)?ir:Array.isArray(or)?[...ir,...or.map(ar=>[sr,ar.toString()])]:ir=[...ir,[sr,or.toString()]]},[]);return new URLSearchParams(nr).toString()}const r$6=Object.freeze(Object.defineProperty({__proto__:null,b64Decode,b64Encode,fetchReq,fetchStreamingRequest,renderURLSearchParams,replacer},Symbol.toStringTag,{value:"Module"}));var SortDirection$2;(function(tr){tr.SORT_DIRECTION_UNSPECIFIED="SORT_DIRECTION_UNSPECIFIED",tr.SORT_DIRECTION_ASCENDING="SORT_DIRECTION_ASCENDING",tr.SORT_DIRECTION_DESCENDING="SORT_DIRECTION_DESCENDING"})(SortDirection$2||(SortDirection$2={}));class MessageApi{static Publish(er,rr){return fetchReq("/message/v1/publish",Object.assign(Object.assign({},rr),{method:"POST",body:JSON.stringify(er,replacer)}))}static Subscribe(er,rr,nr){return fetchStreamingRequest("/message/v1/subscribe",rr,Object.assign(Object.assign({},nr),{method:"POST",body:JSON.stringify(er,replacer)}))}static SubscribeAll(er,rr,nr){return fetchStreamingRequest("/message/v1/subscribe-all",rr,Object.assign(Object.assign({},nr),{method:"POST",body:JSON.stringify(er,replacer)}))}static Query(er,rr){return fetchReq("/message/v1/query",Object.assign(Object.assign({},rr),{method:"POST",body:JSON.stringify(er,replacer)}))}static BatchQuery(er,rr){return fetchReq("/message/v1/batch-query",Object.assign(Object.assign({},rr),{method:"POST",body:JSON.stringify(er,replacer)}))}}const d$2=Object.freeze(Object.defineProperty({__proto__:null,MessageApi,get SortDirection(){return SortDirection$2}},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2009 The Closure Library Authors
 * Copyright 2020 Daniel Wirtz / The long.js Authors.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * SPDX-License-Identifier: Apache-2.0
 */var wasm$1=null;try{wasm$1=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function Long(tr,er,rr){this.low=tr|0,this.high=er|0,this.unsigned=!!rr}Long.prototype.__isLong__;Object.defineProperty(Long.prototype,"__isLong__",{value:!0});function isLong(tr){return(tr&&tr.__isLong__)===!0}function ctz32(tr){var er=Math.clz32(tr&-tr);return tr?31-er:er}Long.isLong=isLong;var INT_CACHE={},UINT_CACHE={};function fromInt(tr,er){var rr,nr,ir;return er?(tr>>>=0,(ir=0<=tr&&tr<256)&&(nr=UINT_CACHE[tr],nr)?nr:(rr=fromBits(tr,0,!0),ir&&(UINT_CACHE[tr]=rr),rr)):(tr|=0,(ir=-128<=tr&&tr<128)&&(nr=INT_CACHE[tr],nr)?nr:(rr=fromBits(tr,tr<0?-1:0,!1),ir&&(INT_CACHE[tr]=rr),rr))}Long.fromInt=fromInt;function fromNumber(tr,er){if(isNaN(tr))return er?UZERO:ZERO;if(er){if(tr<0)return UZERO;if(tr>=TWO_PWR_64_DBL)return MAX_UNSIGNED_VALUE}else{if(tr<=-TWO_PWR_63_DBL)return MIN_VALUE;if(tr+1>=TWO_PWR_63_DBL)return MAX_VALUE}return tr<0?fromNumber(-tr,er).neg():fromBits(tr%TWO_PWR_32_DBL|0,tr/TWO_PWR_32_DBL|0,er)}Long.fromNumber=fromNumber;function fromBits(tr,er,rr){return new Long(tr,er,rr)}Long.fromBits=fromBits;var pow_dbl=Math.pow;function fromString(tr,er,rr){if(tr.length===0)throw Error("empty string");if(typeof er=="number"?(rr=er,er=!1):er=!!er,tr==="NaN"||tr==="Infinity"||tr==="+Infinity"||tr==="-Infinity")return er?UZERO:ZERO;if(rr=rr||10,rr<2||36<rr)throw RangeError("radix");var nr;if((nr=tr.indexOf("-"))>0)throw Error("interior hyphen");if(nr===0)return fromString(tr.substring(1),er,rr).neg();for(var ir=fromNumber(pow_dbl(rr,8)),sr=ZERO,or=0;or<tr.length;or+=8){var ar=Math.min(8,tr.length-or),cr=parseInt(tr.substring(or,or+ar),rr);if(ar<8){var lr=fromNumber(pow_dbl(rr,ar));sr=sr.mul(lr).add(fromNumber(cr))}else sr=sr.mul(ir),sr=sr.add(fromNumber(cr))}return sr.unsigned=er,sr}Long.fromString=fromString;function fromValue(tr,er){return typeof tr=="number"?fromNumber(tr,er):typeof tr=="string"?fromString(tr,er):fromBits(tr.low,tr.high,typeof er=="boolean"?er:tr.unsigned)}Long.fromValue=fromValue;var TWO_PWR_16_DBL=65536,TWO_PWR_24_DBL=1<<24,TWO_PWR_32_DBL=TWO_PWR_16_DBL*TWO_PWR_16_DBL,TWO_PWR_64_DBL=TWO_PWR_32_DBL*TWO_PWR_32_DBL,TWO_PWR_63_DBL=TWO_PWR_64_DBL/2,TWO_PWR_24=fromInt(TWO_PWR_24_DBL),ZERO=fromInt(0);Long.ZERO=ZERO;var UZERO=fromInt(0,!0);Long.UZERO=UZERO;var ONE=fromInt(1);Long.ONE=ONE;var UONE=fromInt(1,!0);Long.UONE=UONE;var NEG_ONE=fromInt(-1);Long.NEG_ONE=NEG_ONE;var MAX_VALUE=fromBits(-1,2147483647,!1);Long.MAX_VALUE=MAX_VALUE;var MAX_UNSIGNED_VALUE=fromBits(-1,-1,!0);Long.MAX_UNSIGNED_VALUE=MAX_UNSIGNED_VALUE;var MIN_VALUE=fromBits(0,-2147483648,!1);Long.MIN_VALUE=MIN_VALUE;var LongPrototype=Long.prototype;LongPrototype.toInt=function(){return this.unsigned?this.low>>>0:this.low};LongPrototype.toNumber=function(){return this.unsigned?(this.high>>>0)*TWO_PWR_32_DBL+(this.low>>>0):this.high*TWO_PWR_32_DBL+(this.low>>>0)};LongPrototype.toString=function(er){if(er=er||10,er<2||36<er)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(MIN_VALUE)){var rr=fromNumber(er),nr=this.div(rr),ir=nr.mul(rr).sub(this);return nr.toString(er)+ir.toInt().toString(er)}else return"-"+this.neg().toString(er);for(var sr=fromNumber(pow_dbl(er,6),this.unsigned),or=this,ar="";;){var cr=or.div(sr),lr=or.sub(cr.mul(sr)).toInt()>>>0,ur=lr.toString(er);if(or=cr,or.isZero())return ur+ar;for(;ur.length<6;)ur="0"+ur;ar=""+ur+ar}};LongPrototype.getHighBits=function(){return this.high};LongPrototype.getHighBitsUnsigned=function(){return this.high>>>0};LongPrototype.getLowBits=function(){return this.low};LongPrototype.getLowBitsUnsigned=function(){return this.low>>>0};LongPrototype.getNumBitsAbs=function(){if(this.isNegative())return this.eq(MIN_VALUE)?64:this.neg().getNumBitsAbs();for(var er=this.high!=0?this.high:this.low,rr=31;rr>0&&!(er&1<<rr);rr--);return this.high!=0?rr+33:rr+1};LongPrototype.isZero=function(){return this.high===0&&this.low===0};LongPrototype.eqz=LongPrototype.isZero;LongPrototype.isNegative=function(){return!this.unsigned&&this.high<0};LongPrototype.isPositive=function(){return this.unsigned||this.high>=0};LongPrototype.isOdd=function(){return(this.low&1)===1};LongPrototype.isEven=function(){return(this.low&1)===0};LongPrototype.equals=function(er){return isLong(er)||(er=fromValue(er)),this.unsigned!==er.unsigned&&this.high>>>31===1&&er.high>>>31===1?!1:this.high===er.high&&this.low===er.low};LongPrototype.eq=LongPrototype.equals;LongPrototype.notEquals=function(er){return!this.eq(er)};LongPrototype.neq=LongPrototype.notEquals;LongPrototype.ne=LongPrototype.notEquals;LongPrototype.lessThan=function(er){return this.comp(er)<0};LongPrototype.lt=LongPrototype.lessThan;LongPrototype.lessThanOrEqual=function(er){return this.comp(er)<=0};LongPrototype.lte=LongPrototype.lessThanOrEqual;LongPrototype.le=LongPrototype.lessThanOrEqual;LongPrototype.greaterThan=function(er){return this.comp(er)>0};LongPrototype.gt=LongPrototype.greaterThan;LongPrototype.greaterThanOrEqual=function(er){return this.comp(er)>=0};LongPrototype.gte=LongPrototype.greaterThanOrEqual;LongPrototype.ge=LongPrototype.greaterThanOrEqual;LongPrototype.compare=function(er){if(isLong(er)||(er=fromValue(er)),this.eq(er))return 0;var rr=this.isNegative(),nr=er.isNegative();return rr&&!nr?-1:!rr&&nr?1:this.unsigned?er.high>>>0>this.high>>>0||er.high===this.high&&er.low>>>0>this.low>>>0?-1:1:this.sub(er).isNegative()?-1:1};LongPrototype.comp=LongPrototype.compare;LongPrototype.negate=function(){return!this.unsigned&&this.eq(MIN_VALUE)?MIN_VALUE:this.not().add(ONE)};LongPrototype.neg=LongPrototype.negate;LongPrototype.add=function(er){isLong(er)||(er=fromValue(er));var rr=this.high>>>16,nr=this.high&65535,ir=this.low>>>16,sr=this.low&65535,or=er.high>>>16,ar=er.high&65535,cr=er.low>>>16,lr=er.low&65535,ur=0,dr=0,yr=0,mr=0;return mr+=sr+lr,yr+=mr>>>16,mr&=65535,yr+=ir+cr,dr+=yr>>>16,yr&=65535,dr+=nr+ar,ur+=dr>>>16,dr&=65535,ur+=rr+or,ur&=65535,fromBits(yr<<16|mr,ur<<16|dr,this.unsigned)};LongPrototype.subtract=function(er){return isLong(er)||(er=fromValue(er)),this.add(er.neg())};LongPrototype.sub=LongPrototype.subtract;LongPrototype.multiply=function(er){if(this.isZero())return this;if(isLong(er)||(er=fromValue(er)),wasm$1){var rr=wasm$1.mul(this.low,this.high,er.low,er.high);return fromBits(rr,wasm$1.get_high(),this.unsigned)}if(er.isZero())return this.unsigned?UZERO:ZERO;if(this.eq(MIN_VALUE))return er.isOdd()?MIN_VALUE:ZERO;if(er.eq(MIN_VALUE))return this.isOdd()?MIN_VALUE:ZERO;if(this.isNegative())return er.isNegative()?this.neg().mul(er.neg()):this.neg().mul(er).neg();if(er.isNegative())return this.mul(er.neg()).neg();if(this.lt(TWO_PWR_24)&&er.lt(TWO_PWR_24))return fromNumber(this.toNumber()*er.toNumber(),this.unsigned);var nr=this.high>>>16,ir=this.high&65535,sr=this.low>>>16,or=this.low&65535,ar=er.high>>>16,cr=er.high&65535,lr=er.low>>>16,ur=er.low&65535,dr=0,yr=0,mr=0,wr=0;return wr+=or*ur,mr+=wr>>>16,wr&=65535,mr+=sr*ur,yr+=mr>>>16,mr&=65535,mr+=or*lr,yr+=mr>>>16,mr&=65535,yr+=ir*ur,dr+=yr>>>16,yr&=65535,yr+=sr*lr,dr+=yr>>>16,yr&=65535,yr+=or*cr,dr+=yr>>>16,yr&=65535,dr+=nr*ur+ir*lr+sr*cr+or*ar,dr&=65535,fromBits(mr<<16|wr,dr<<16|yr,this.unsigned)};LongPrototype.mul=LongPrototype.multiply;LongPrototype.divide=function(er){if(isLong(er)||(er=fromValue(er)),er.isZero())throw Error("division by zero");if(wasm$1){if(!this.unsigned&&this.high===-2147483648&&er.low===-1&&er.high===-1)return this;var rr=(this.unsigned?wasm$1.div_u:wasm$1.div_s)(this.low,this.high,er.low,er.high);return fromBits(rr,wasm$1.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?UZERO:ZERO;var nr,ir,sr;if(this.unsigned){if(er.unsigned||(er=er.toUnsigned()),er.gt(this))return UZERO;if(er.gt(this.shru(1)))return UONE;sr=UZERO}else{if(this.eq(MIN_VALUE)){if(er.eq(ONE)||er.eq(NEG_ONE))return MIN_VALUE;if(er.eq(MIN_VALUE))return ONE;var or=this.shr(1);return nr=or.div(er).shl(1),nr.eq(ZERO)?er.isNegative()?ONE:NEG_ONE:(ir=this.sub(er.mul(nr)),sr=nr.add(ir.div(er)),sr)}else if(er.eq(MIN_VALUE))return this.unsigned?UZERO:ZERO;if(this.isNegative())return er.isNegative()?this.neg().div(er.neg()):this.neg().div(er).neg();if(er.isNegative())return this.div(er.neg()).neg();sr=ZERO}for(ir=this;ir.gte(er);){nr=Math.max(1,Math.floor(ir.toNumber()/er.toNumber()));for(var ar=Math.ceil(Math.log(nr)/Math.LN2),cr=ar<=48?1:pow_dbl(2,ar-48),lr=fromNumber(nr),ur=lr.mul(er);ur.isNegative()||ur.gt(ir);)nr-=cr,lr=fromNumber(nr,this.unsigned),ur=lr.mul(er);lr.isZero()&&(lr=ONE),sr=sr.add(lr),ir=ir.sub(ur)}return sr};LongPrototype.div=LongPrototype.divide;LongPrototype.modulo=function(er){if(isLong(er)||(er=fromValue(er)),wasm$1){var rr=(this.unsigned?wasm$1.rem_u:wasm$1.rem_s)(this.low,this.high,er.low,er.high);return fromBits(rr,wasm$1.get_high(),this.unsigned)}return this.sub(this.div(er).mul(er))};LongPrototype.mod=LongPrototype.modulo;LongPrototype.rem=LongPrototype.modulo;LongPrototype.not=function(){return fromBits(~this.low,~this.high,this.unsigned)};LongPrototype.countLeadingZeros=function(){return this.high?Math.clz32(this.high):Math.clz32(this.low)+32};LongPrototype.clz=LongPrototype.countLeadingZeros;LongPrototype.countTrailingZeros=function(){return this.low?ctz32(this.low):ctz32(this.high)+32};LongPrototype.ctz=LongPrototype.countTrailingZeros;LongPrototype.and=function(er){return isLong(er)||(er=fromValue(er)),fromBits(this.low&er.low,this.high&er.high,this.unsigned)};LongPrototype.or=function(er){return isLong(er)||(er=fromValue(er)),fromBits(this.low|er.low,this.high|er.high,this.unsigned)};LongPrototype.xor=function(er){return isLong(er)||(er=fromValue(er)),fromBits(this.low^er.low,this.high^er.high,this.unsigned)};LongPrototype.shiftLeft=function(er){return isLong(er)&&(er=er.toInt()),(er&=63)===0?this:er<32?fromBits(this.low<<er,this.high<<er|this.low>>>32-er,this.unsigned):fromBits(0,this.low<<er-32,this.unsigned)};LongPrototype.shl=LongPrototype.shiftLeft;LongPrototype.shiftRight=function(er){return isLong(er)&&(er=er.toInt()),(er&=63)===0?this:er<32?fromBits(this.low>>>er|this.high<<32-er,this.high>>er,this.unsigned):fromBits(this.high>>er-32,this.high>=0?0:-1,this.unsigned)};LongPrototype.shr=LongPrototype.shiftRight;LongPrototype.shiftRightUnsigned=function(er){return isLong(er)&&(er=er.toInt()),(er&=63)===0?this:er<32?fromBits(this.low>>>er|this.high<<32-er,this.high>>>er,this.unsigned):er===32?fromBits(this.high,0,this.unsigned):fromBits(this.high>>>er-32,0,this.unsigned)};LongPrototype.shru=LongPrototype.shiftRightUnsigned;LongPrototype.shr_u=LongPrototype.shiftRightUnsigned;LongPrototype.rotateLeft=function(er){var rr;return isLong(er)&&(er=er.toInt()),(er&=63)===0?this:er===32?fromBits(this.high,this.low,this.unsigned):er<32?(rr=32-er,fromBits(this.low<<er|this.high>>>rr,this.high<<er|this.low>>>rr,this.unsigned)):(er-=32,rr=32-er,fromBits(this.high<<er|this.low>>>rr,this.low<<er|this.high>>>rr,this.unsigned))};LongPrototype.rotl=LongPrototype.rotateLeft;LongPrototype.rotateRight=function(er){var rr;return isLong(er)&&(er=er.toInt()),(er&=63)===0?this:er===32?fromBits(this.high,this.low,this.unsigned):er<32?(rr=32-er,fromBits(this.high<<rr|this.low>>>er,this.low<<rr|this.high>>>er,this.unsigned)):(er-=32,rr=32-er,fromBits(this.low<<rr|this.high>>>er,this.high<<rr|this.low>>>er,this.unsigned))};LongPrototype.rotr=LongPrototype.rotateRight;LongPrototype.toSigned=function(){return this.unsigned?fromBits(this.low,this.high,!1):this};LongPrototype.toUnsigned=function(){return this.unsigned?this:fromBits(this.low,this.high,!0)};LongPrototype.toBytes=function(er){return er?this.toBytesLE():this.toBytesBE()};LongPrototype.toBytesLE=function(){var er=this.high,rr=this.low;return[rr&255,rr>>>8&255,rr>>>16&255,rr>>>24,er&255,er>>>8&255,er>>>16&255,er>>>24]};LongPrototype.toBytesBE=function(){var er=this.high,rr=this.low;return[er>>>24,er>>>16&255,er>>>8&255,er&255,rr>>>24,rr>>>16&255,rr>>>8&255,rr&255]};Long.fromBytes=function(er,rr,nr){return nr?Long.fromBytesLE(er,rr):Long.fromBytesBE(er,rr)};Long.fromBytesLE=function(er,rr){return new Long(er[0]|er[1]<<8|er[2]<<16|er[3]<<24,er[4]|er[5]<<8|er[6]<<16|er[7]<<24,rr)};Long.fromBytesBE=function(er,rr){return new Long(er[4]<<24|er[5]<<16|er[6]<<8|er[7],er[0]<<24|er[1]<<16|er[2]<<8|er[3],rr)};var indexMinimal={},minimal$1={},aspromise=asPromise;function asPromise(tr,er){for(var rr=new Array(arguments.length-1),nr=0,ir=2,sr=!0;ir<arguments.length;)rr[nr++]=arguments[ir++];return new Promise(function(ar,cr){rr[nr]=function(ur){if(sr)if(sr=!1,ur)cr(ur);else{for(var dr=new Array(arguments.length-1),yr=0;yr<dr.length;)dr[yr++]=arguments[yr];ar.apply(null,dr)}};try{tr.apply(er||null,rr)}catch(lr){sr&&(sr=!1,cr(lr))}})}var base64$5={};(function(tr){var er=tr;er.length=function(ar){var cr=ar.length;if(!cr)return 0;for(var lr=0;--cr%4>1&&ar.charAt(cr)==="=";)++lr;return Math.ceil(ar.length*3)/4-lr};for(var rr=new Array(64),nr=new Array(123),ir=0;ir<64;)nr[rr[ir]=ir<26?ir+65:ir<52?ir+71:ir<62?ir-4:ir-59|43]=ir++;er.encode=function(ar,cr,lr){for(var ur=null,dr=[],yr=0,mr=0,wr;cr<lr;){var xr=ar[cr++];switch(mr){case 0:dr[yr++]=rr[xr>>2],wr=(xr&3)<<4,mr=1;break;case 1:dr[yr++]=rr[wr|xr>>4],wr=(xr&15)<<2,mr=2;break;case 2:dr[yr++]=rr[wr|xr>>6],dr[yr++]=rr[xr&63],mr=0;break}yr>8191&&((ur||(ur=[])).push(String.fromCharCode.apply(String,dr)),yr=0)}return mr&&(dr[yr++]=rr[wr],dr[yr++]=61,mr===1&&(dr[yr++]=61)),ur?(yr&&ur.push(String.fromCharCode.apply(String,dr.slice(0,yr))),ur.join("")):String.fromCharCode.apply(String,dr.slice(0,yr))};var sr="invalid encoding";er.decode=function(ar,cr,lr){for(var ur=lr,dr=0,yr,mr=0;mr<ar.length;){var wr=ar.charCodeAt(mr++);if(wr===61&&dr>1)break;if((wr=nr[wr])===void 0)throw Error(sr);switch(dr){case 0:yr=wr,dr=1;break;case 1:cr[lr++]=yr<<2|(wr&48)>>4,yr=wr,dr=2;break;case 2:cr[lr++]=(yr&15)<<4|(wr&60)>>2,yr=wr,dr=3;break;case 3:cr[lr++]=(yr&3)<<6|wr,dr=0;break}}if(dr===1)throw Error(sr);return lr-ur},er.test=function(ar){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(ar)}})(base64$5);var eventemitter=EventEmitter$2;function EventEmitter$2(){this._listeners={}}EventEmitter$2.prototype.on=function(er,rr,nr){return(this._listeners[er]||(this._listeners[er]=[])).push({fn:rr,ctx:nr||this}),this};EventEmitter$2.prototype.off=function(er,rr){if(er===void 0)this._listeners={};else if(rr===void 0)this._listeners[er]=[];else for(var nr=this._listeners[er],ir=0;ir<nr.length;)nr[ir].fn===rr?nr.splice(ir,1):++ir;return this};EventEmitter$2.prototype.emit=function(er){var rr=this._listeners[er];if(rr){for(var nr=[],ir=1;ir<arguments.length;)nr.push(arguments[ir++]);for(ir=0;ir<rr.length;)rr[ir].fn.apply(rr[ir++].ctx,nr)}return this};var float=factory(factory);function factory(tr){return typeof Float32Array<"u"?function(){var er=new Float32Array([-0]),rr=new Uint8Array(er.buffer),nr=rr[3]===128;function ir(cr,lr,ur){er[0]=cr,lr[ur]=rr[0],lr[ur+1]=rr[1],lr[ur+2]=rr[2],lr[ur+3]=rr[3]}function sr(cr,lr,ur){er[0]=cr,lr[ur]=rr[3],lr[ur+1]=rr[2],lr[ur+2]=rr[1],lr[ur+3]=rr[0]}tr.writeFloatLE=nr?ir:sr,tr.writeFloatBE=nr?sr:ir;function or(cr,lr){return rr[0]=cr[lr],rr[1]=cr[lr+1],rr[2]=cr[lr+2],rr[3]=cr[lr+3],er[0]}function ar(cr,lr){return rr[3]=cr[lr],rr[2]=cr[lr+1],rr[1]=cr[lr+2],rr[0]=cr[lr+3],er[0]}tr.readFloatLE=nr?or:ar,tr.readFloatBE=nr?ar:or}():function(){function er(nr,ir,sr,or){var ar=ir<0?1:0;if(ar&&(ir=-ir),ir===0)nr(1/ir>0?0:2147483648,sr,or);else if(isNaN(ir))nr(2143289344,sr,or);else if(ir>34028234663852886e22)nr((ar<<31|2139095040)>>>0,sr,or);else if(ir<11754943508222875e-54)nr((ar<<31|Math.round(ir/1401298464324817e-60))>>>0,sr,or);else{var cr=Math.floor(Math.log(ir)/Math.LN2),lr=Math.round(ir*Math.pow(2,-cr)*8388608)&8388607;nr((ar<<31|cr+127<<23|lr)>>>0,sr,or)}}tr.writeFloatLE=er.bind(null,writeUintLE),tr.writeFloatBE=er.bind(null,writeUintBE);function rr(nr,ir,sr){var or=nr(ir,sr),ar=(or>>31)*2+1,cr=or>>>23&255,lr=or&8388607;return cr===255?lr?NaN:ar*(1/0):cr===0?ar*1401298464324817e-60*lr:ar*Math.pow(2,cr-150)*(lr+8388608)}tr.readFloatLE=rr.bind(null,readUintLE),tr.readFloatBE=rr.bind(null,readUintBE)}(),typeof Float64Array<"u"?function(){var er=new Float64Array([-0]),rr=new Uint8Array(er.buffer),nr=rr[7]===128;function ir(cr,lr,ur){er[0]=cr,lr[ur]=rr[0],lr[ur+1]=rr[1],lr[ur+2]=rr[2],lr[ur+3]=rr[3],lr[ur+4]=rr[4],lr[ur+5]=rr[5],lr[ur+6]=rr[6],lr[ur+7]=rr[7]}function sr(cr,lr,ur){er[0]=cr,lr[ur]=rr[7],lr[ur+1]=rr[6],lr[ur+2]=rr[5],lr[ur+3]=rr[4],lr[ur+4]=rr[3],lr[ur+5]=rr[2],lr[ur+6]=rr[1],lr[ur+7]=rr[0]}tr.writeDoubleLE=nr?ir:sr,tr.writeDoubleBE=nr?sr:ir;function or(cr,lr){return rr[0]=cr[lr],rr[1]=cr[lr+1],rr[2]=cr[lr+2],rr[3]=cr[lr+3],rr[4]=cr[lr+4],rr[5]=cr[lr+5],rr[6]=cr[lr+6],rr[7]=cr[lr+7],er[0]}function ar(cr,lr){return rr[7]=cr[lr],rr[6]=cr[lr+1],rr[5]=cr[lr+2],rr[4]=cr[lr+3],rr[3]=cr[lr+4],rr[2]=cr[lr+5],rr[1]=cr[lr+6],rr[0]=cr[lr+7],er[0]}tr.readDoubleLE=nr?or:ar,tr.readDoubleBE=nr?ar:or}():function(){function er(nr,ir,sr,or,ar,cr){var lr=or<0?1:0;if(lr&&(or=-or),or===0)nr(0,ar,cr+ir),nr(1/or>0?0:2147483648,ar,cr+sr);else if(isNaN(or))nr(0,ar,cr+ir),nr(2146959360,ar,cr+sr);else if(or>17976931348623157e292)nr(0,ar,cr+ir),nr((lr<<31|2146435072)>>>0,ar,cr+sr);else{var ur;if(or<22250738585072014e-324)ur=or/5e-324,nr(ur>>>0,ar,cr+ir),nr((lr<<31|ur/4294967296)>>>0,ar,cr+sr);else{var dr=Math.floor(Math.log(or)/Math.LN2);dr===1024&&(dr=1023),ur=or*Math.pow(2,-dr),nr(ur*4503599627370496>>>0,ar,cr+ir),nr((lr<<31|dr+1023<<20|ur*1048576&1048575)>>>0,ar,cr+sr)}}}tr.writeDoubleLE=er.bind(null,writeUintLE,0,4),tr.writeDoubleBE=er.bind(null,writeUintBE,4,0);function rr(nr,ir,sr,or,ar){var cr=nr(or,ar+ir),lr=nr(or,ar+sr),ur=(lr>>31)*2+1,dr=lr>>>20&2047,yr=4294967296*(lr&1048575)+cr;return dr===2047?yr?NaN:ur*(1/0):dr===0?ur*5e-324*yr:ur*Math.pow(2,dr-1075)*(yr+4503599627370496)}tr.readDoubleLE=rr.bind(null,readUintLE,0,4),tr.readDoubleBE=rr.bind(null,readUintBE,4,0)}(),tr}function writeUintLE(tr,er,rr){er[rr]=tr&255,er[rr+1]=tr>>>8&255,er[rr+2]=tr>>>16&255,er[rr+3]=tr>>>24}function writeUintBE(tr,er,rr){er[rr]=tr>>>24,er[rr+1]=tr>>>16&255,er[rr+2]=tr>>>8&255,er[rr+3]=tr&255}function readUintLE(tr,er){return(tr[er]|tr[er+1]<<8|tr[er+2]<<16|tr[er+3]<<24)>>>0}function readUintBE(tr,er){return(tr[er]<<24|tr[er+1]<<16|tr[er+2]<<8|tr[er+3])>>>0}var inquire_1=inquire;function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(tr){}return null}var utf8$2={};(function(tr){var er=tr;er.length=function(nr){for(var ir=0,sr=0,or=0;or<nr.length;++or)sr=nr.charCodeAt(or),sr<128?ir+=1:sr<2048?ir+=2:(sr&64512)===55296&&(nr.charCodeAt(or+1)&64512)===56320?(++or,ir+=4):ir+=3;return ir},er.read=function(nr,ir,sr){var or=sr-ir;if(or<1)return"";for(var ar=null,cr=[],lr=0,ur;ir<sr;)ur=nr[ir++],ur<128?cr[lr++]=ur:ur>191&&ur<224?cr[lr++]=(ur&31)<<6|nr[ir++]&63:ur>239&&ur<365?(ur=((ur&7)<<18|(nr[ir++]&63)<<12|(nr[ir++]&63)<<6|nr[ir++]&63)-65536,cr[lr++]=55296+(ur>>10),cr[lr++]=56320+(ur&1023)):cr[lr++]=(ur&15)<<12|(nr[ir++]&63)<<6|nr[ir++]&63,lr>8191&&((ar||(ar=[])).push(String.fromCharCode.apply(String,cr)),lr=0);return ar?(lr&&ar.push(String.fromCharCode.apply(String,cr.slice(0,lr))),ar.join("")):String.fromCharCode.apply(String,cr.slice(0,lr))},er.write=function(nr,ir,sr){for(var or=sr,ar,cr,lr=0;lr<nr.length;++lr)ar=nr.charCodeAt(lr),ar<128?ir[sr++]=ar:ar<2048?(ir[sr++]=ar>>6|192,ir[sr++]=ar&63|128):(ar&64512)===55296&&((cr=nr.charCodeAt(lr+1))&64512)===56320?(ar=65536+((ar&1023)<<10)+(cr&1023),++lr,ir[sr++]=ar>>18|240,ir[sr++]=ar>>12&63|128,ir[sr++]=ar>>6&63|128,ir[sr++]=ar&63|128):(ir[sr++]=ar>>12|224,ir[sr++]=ar>>6&63|128,ir[sr++]=ar&63|128);return sr-or}})(utf8$2);var pool_1=pool;function pool(tr,er,rr){var nr=rr||8192,ir=nr>>>1,sr=null,or=nr;return function(cr){if(cr<1||cr>ir)return tr(cr);or+cr>nr&&(sr=tr(nr),or=0);var lr=er.call(sr,or,or+=cr);return or&7&&(or=(or|7)+1),lr}}var longbits,hasRequiredLongbits;function requireLongbits(){if(hasRequiredLongbits)return longbits;hasRequiredLongbits=1,longbits=er;var tr=requireMinimal();function er(sr,or){this.lo=sr>>>0,this.hi=or>>>0}var rr=er.zero=new er(0,0);rr.toNumber=function(){return 0},rr.zzEncode=rr.zzDecode=function(){return this},rr.length=function(){return 1};var nr=er.zeroHash="\0\0\0\0\0\0\0\0";er.fromNumber=function(or){if(or===0)return rr;var ar=or<0;ar&&(or=-or);var cr=or>>>0,lr=(or-cr)/4294967296>>>0;return ar&&(lr=~lr>>>0,cr=~cr>>>0,++cr>4294967295&&(cr=0,++lr>4294967295&&(lr=0))),new er(cr,lr)},er.from=function(or){if(typeof or=="number")return er.fromNumber(or);if(tr.isString(or))if(tr.Long)or=tr.Long.fromString(or);else return er.fromNumber(parseInt(or,10));return or.low||or.high?new er(or.low>>>0,or.high>>>0):rr},er.prototype.toNumber=function(or){if(!or&&this.hi>>>31){var ar=~this.lo+1>>>0,cr=~this.hi>>>0;return ar||(cr=cr+1>>>0),-(ar+cr*4294967296)}return this.lo+this.hi*4294967296},er.prototype.toLong=function(or){return tr.Long?new tr.Long(this.lo|0,this.hi|0,!!or):{low:this.lo|0,high:this.hi|0,unsigned:!!or}};var ir=String.prototype.charCodeAt;return er.fromHash=function(or){return or===nr?rr:new er((ir.call(or,0)|ir.call(or,1)<<8|ir.call(or,2)<<16|ir.call(or,3)<<24)>>>0,(ir.call(or,4)|ir.call(or,5)<<8|ir.call(or,6)<<16|ir.call(or,7)<<24)>>>0)},er.prototype.toHash=function(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},er.prototype.zzEncode=function(){var or=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^or)>>>0,this.lo=(this.lo<<1^or)>>>0,this},er.prototype.zzDecode=function(){var or=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^or)>>>0,this.hi=(this.hi>>>1^or)>>>0,this},er.prototype.length=function(){var or=this.lo,ar=(this.lo>>>28|this.hi<<4)>>>0,cr=this.hi>>>24;return cr===0?ar===0?or<16384?or<128?1:2:or<2097152?3:4:ar<16384?ar<128?5:6:ar<2097152?7:8:cr<128?9:10},longbits}var hasRequiredMinimal;function requireMinimal(){return hasRequiredMinimal||(hasRequiredMinimal=1,function(tr){var er=tr;er.asPromise=aspromise,er.base64=base64$5,er.EventEmitter=eventemitter,er.float=float,er.inquire=inquire_1,er.utf8=utf8$2,er.pool=pool_1,er.LongBits=requireLongbits(),er.isNode=!!(typeof globalThis<"u"&&globalThis&&globalThis.process&&globalThis.process.versions&&globalThis.process.versions.node),er.global=er.isNode&&globalThis||typeof window<"u"&&window||typeof self<"u"&&self||commonjsGlobal,er.emptyArray=Object.freeze?Object.freeze([]):[],er.emptyObject=Object.freeze?Object.freeze({}):{},er.isInteger=Number.isInteger||function(sr){return typeof sr=="number"&&isFinite(sr)&&Math.floor(sr)===sr},er.isString=function(sr){return typeof sr=="string"||sr instanceof String},er.isObject=function(sr){return sr&&typeof sr=="object"},er.isset=er.isSet=function(sr,or){var ar=sr[or];return ar!=null&&sr.hasOwnProperty(or)?typeof ar!="object"||(Array.isArray(ar)?ar.length:Object.keys(ar).length)>0:!1},er.Buffer=function(){try{var ir=er.inquire("buffer").Buffer;return ir.prototype.utf8Write?ir:null}catch{return null}}(),er._Buffer_from=null,er._Buffer_allocUnsafe=null,er.newBuffer=function(sr){return typeof sr=="number"?er.Buffer?er._Buffer_allocUnsafe(sr):new er.Array(sr):er.Buffer?er._Buffer_from(sr):typeof Uint8Array>"u"?sr:new Uint8Array(sr)},er.Array=typeof Uint8Array<"u"?Uint8Array:Array,er.Long=er.global.dcodeIO&&er.global.dcodeIO.Long||er.global.Long||er.inquire("long"),er.key2Re=/^true|false|0|1$/,er.key32Re=/^-?(?:0|[1-9][0-9]*)$/,er.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,er.longToHash=function(sr){return sr?er.LongBits.from(sr).toHash():er.LongBits.zeroHash},er.longFromHash=function(sr,or){var ar=er.LongBits.fromHash(sr);return er.Long?er.Long.fromBits(ar.lo,ar.hi,or):ar.toNumber(!!or)};function rr(ir,sr,or){for(var ar=Object.keys(sr),cr=0;cr<ar.length;++cr)(ir[ar[cr]]===void 0||!or)&&(ir[ar[cr]]=sr[ar[cr]]);return ir}er.merge=rr,er.lcFirst=function(sr){return sr.charAt(0).toLowerCase()+sr.substring(1)};function nr(ir){function sr(or,ar){if(!(this instanceof sr))return new sr(or,ar);Object.defineProperty(this,"message",{get:function(){return or}}),Error.captureStackTrace?Error.captureStackTrace(this,sr):Object.defineProperty(this,"stack",{value:new Error().stack||""}),ar&&rr(this,ar)}return sr.prototype=Object.create(Error.prototype,{constructor:{value:sr,writable:!0,enumerable:!1,configurable:!0},name:{get:function(){return ir},set:void 0,enumerable:!1,configurable:!0},toString:{value:function(){return this.name+": "+this.message},writable:!0,enumerable:!1,configurable:!0}}),sr}er.newError=nr,er.ProtocolError=nr("ProtocolError"),er.oneOfGetter=function(sr){for(var or={},ar=0;ar<sr.length;++ar)or[sr[ar]]=1;return function(){for(var cr=Object.keys(this),lr=cr.length-1;lr>-1;--lr)if(or[cr[lr]]===1&&this[cr[lr]]!==void 0&&this[cr[lr]]!==null)return cr[lr]}},er.oneOfSetter=function(sr){return function(or){for(var ar=0;ar<sr.length;++ar)sr[ar]!==or&&delete this[sr[ar]]}},er.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},er._configure=function(){var ir=er.Buffer;if(!ir){er._Buffer_from=er._Buffer_allocUnsafe=null;return}er._Buffer_from=ir.from!==Uint8Array.from&&ir.from||function(or,ar){return new ir(or,ar)},er._Buffer_allocUnsafe=ir.allocUnsafe||function(or){return new ir(or)}}}(minimal$1)),minimal$1}var writer=Writer$1,util$d=requireMinimal(),BufferWriter$1,LongBits$1=util$d.LongBits,base64$4=util$d.base64,utf8$1=util$d.utf8;function Op(tr,er,rr){this.fn=tr,this.len=er,this.next=void 0,this.val=rr}function noop$6(){}function State(tr){this.head=tr.head,this.tail=tr.tail,this.len=tr.len,this.next=tr.states}function Writer$1(){this.len=0,this.head=new Op(noop$6,0,0),this.tail=this.head,this.states=null}var create$2=function tr(){return util$d.Buffer?function(){return(Writer$1.create=function(){return new BufferWriter$1})()}:function(){return new Writer$1}};Writer$1.create=create$2();Writer$1.alloc=function tr(er){return new util$d.Array(er)};util$d.Array!==Array&&(Writer$1.alloc=util$d.pool(Writer$1.alloc,util$d.Array.prototype.subarray));Writer$1.prototype._push=function tr(er,rr,nr){return this.tail=this.tail.next=new Op(er,rr,nr),this.len+=rr,this};function writeByte(tr,er,rr){er[rr]=tr&255}function writeVarint32(tr,er,rr){for(;tr>127;)er[rr++]=tr&127|128,tr>>>=7;er[rr]=tr}function VarintOp(tr,er){this.len=tr,this.next=void 0,this.val=er}VarintOp.prototype=Object.create(Op.prototype);VarintOp.prototype.fn=writeVarint32;Writer$1.prototype.uint32=function tr(er){return this.len+=(this.tail=this.tail.next=new VarintOp((er=er>>>0)<128?1:er<16384?2:er<2097152?3:er<268435456?4:5,er)).len,this};Writer$1.prototype.int32=function tr(er){return er<0?this._push(writeVarint64,10,LongBits$1.fromNumber(er)):this.uint32(er)};Writer$1.prototype.sint32=function tr(er){return this.uint32((er<<1^er>>31)>>>0)};function writeVarint64(tr,er,rr){for(;tr.hi;)er[rr++]=tr.lo&127|128,tr.lo=(tr.lo>>>7|tr.hi<<25)>>>0,tr.hi>>>=7;for(;tr.lo>127;)er[rr++]=tr.lo&127|128,tr.lo=tr.lo>>>7;er[rr++]=tr.lo}Writer$1.prototype.uint64=function tr(er){var rr=LongBits$1.from(er);return this._push(writeVarint64,rr.length(),rr)};Writer$1.prototype.int64=Writer$1.prototype.uint64;Writer$1.prototype.sint64=function tr(er){var rr=LongBits$1.from(er).zzEncode();return this._push(writeVarint64,rr.length(),rr)};Writer$1.prototype.bool=function tr(er){return this._push(writeByte,1,er?1:0)};function writeFixed32(tr,er,rr){er[rr]=tr&255,er[rr+1]=tr>>>8&255,er[rr+2]=tr>>>16&255,er[rr+3]=tr>>>24}Writer$1.prototype.fixed32=function tr(er){return this._push(writeFixed32,4,er>>>0)};Writer$1.prototype.sfixed32=Writer$1.prototype.fixed32;Writer$1.prototype.fixed64=function tr(er){var rr=LongBits$1.from(er);return this._push(writeFixed32,4,rr.lo)._push(writeFixed32,4,rr.hi)};Writer$1.prototype.sfixed64=Writer$1.prototype.fixed64;Writer$1.prototype.float=function tr(er){return this._push(util$d.float.writeFloatLE,4,er)};Writer$1.prototype.double=function tr(er){return this._push(util$d.float.writeDoubleLE,8,er)};var writeBytes=util$d.Array.prototype.set?function tr(er,rr,nr){rr.set(er,nr)}:function tr(er,rr,nr){for(var ir=0;ir<er.length;++ir)rr[nr+ir]=er[ir]};Writer$1.prototype.bytes=function tr(er){var rr=er.length>>>0;if(!rr)return this._push(writeByte,1,0);if(util$d.isString(er)){var nr=Writer$1.alloc(rr=base64$4.length(er));base64$4.decode(er,nr,0),er=nr}return this.uint32(rr)._push(writeBytes,rr,er)};Writer$1.prototype.string=function tr(er){var rr=utf8$1.length(er);return rr?this.uint32(rr)._push(utf8$1.write,rr,er):this._push(writeByte,1,0)};Writer$1.prototype.fork=function tr(){return this.states=new State(this),this.head=this.tail=new Op(noop$6,0,0),this.len=0,this};Writer$1.prototype.reset=function tr(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new Op(noop$6,0,0),this.len=0),this};Writer$1.prototype.ldelim=function tr(){var er=this.head,rr=this.tail,nr=this.len;return this.reset().uint32(nr),nr&&(this.tail.next=er.next,this.tail=rr,this.len+=nr),this};Writer$1.prototype.finish=function tr(){for(var er=this.head.next,rr=this.constructor.alloc(this.len),nr=0;er;)er.fn(er.val,rr,nr),nr+=er.len,er=er.next;return rr};Writer$1._configure=function(tr){BufferWriter$1=tr,Writer$1.create=create$2(),BufferWriter$1._configure()};var writer_buffer=BufferWriter,Writer=writer;(BufferWriter.prototype=Object.create(Writer.prototype)).constructor=BufferWriter;var util$c=requireMinimal();function BufferWriter(){Writer.call(this)}BufferWriter._configure=function(){BufferWriter.alloc=util$c._Buffer_allocUnsafe,BufferWriter.writeBytesBuffer=util$c.Buffer&&util$c.Buffer.prototype instanceof Uint8Array&&util$c.Buffer.prototype.set.name==="set"?function(er,rr,nr){rr.set(er,nr)}:function(er,rr,nr){if(er.copy)er.copy(rr,nr,0,er.length);else for(var ir=0;ir<er.length;)rr[nr++]=er[ir++]}};BufferWriter.prototype.bytes=function tr(er){util$c.isString(er)&&(er=util$c._Buffer_from(er,"base64"));var rr=er.length>>>0;return this.uint32(rr),rr&&this._push(BufferWriter.writeBytesBuffer,rr,er),this};function writeStringBuffer(tr,er,rr){tr.length<40?util$c.utf8.write(tr,er,rr):er.utf8Write?er.utf8Write(tr,rr):er.write(tr,rr)}BufferWriter.prototype.string=function tr(er){var rr=util$c.Buffer.byteLength(er);return this.uint32(rr),rr&&this._push(writeStringBuffer,rr,er),this};BufferWriter._configure();var reader=Reader$1,util$b=requireMinimal(),BufferReader$1,LongBits=util$b.LongBits,utf8=util$b.utf8;function indexOutOfRange(tr,er){return RangeError("index out of range: "+tr.pos+" + "+(er||1)+" > "+tr.len)}function Reader$1(tr){this.buf=tr,this.pos=0,this.len=tr.length}var create_array=typeof Uint8Array<"u"?function tr(er){if(er instanceof Uint8Array||Array.isArray(er))return new Reader$1(er);throw Error("illegal buffer")}:function tr(er){if(Array.isArray(er))return new Reader$1(er);throw Error("illegal buffer")},create$1=function tr(){return util$b.Buffer?function(rr){return(Reader$1.create=function(ir){return util$b.Buffer.isBuffer(ir)?new BufferReader$1(ir):create_array(ir)})(rr)}:create_array};Reader$1.create=create$1();Reader$1.prototype._slice=util$b.Array.prototype.subarray||util$b.Array.prototype.slice;Reader$1.prototype.uint32=function tr(){var er=4294967295;return function(){if(er=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(er=(er|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(er=(er|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(er=(er|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(er=(er|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return er;if((this.pos+=5)>this.len)throw this.pos=this.len,indexOutOfRange(this,10);return er}}();Reader$1.prototype.int32=function tr(){return this.uint32()|0};Reader$1.prototype.sint32=function tr(){var er=this.uint32();return er>>>1^-(er&1)|0};function readLongVarint(){var tr=new LongBits(0,0),er=0;if(this.len-this.pos>4){for(;er<4;++er)if(tr.lo=(tr.lo|(this.buf[this.pos]&127)<<er*7)>>>0,this.buf[this.pos++]<128)return tr;if(tr.lo=(tr.lo|(this.buf[this.pos]&127)<<28)>>>0,tr.hi=(tr.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return tr;er=0}else{for(;er<3;++er){if(this.pos>=this.len)throw indexOutOfRange(this);if(tr.lo=(tr.lo|(this.buf[this.pos]&127)<<er*7)>>>0,this.buf[this.pos++]<128)return tr}return tr.lo=(tr.lo|(this.buf[this.pos++]&127)<<er*7)>>>0,tr}if(this.len-this.pos>4){for(;er<5;++er)if(tr.hi=(tr.hi|(this.buf[this.pos]&127)<<er*7+3)>>>0,this.buf[this.pos++]<128)return tr}else for(;er<5;++er){if(this.pos>=this.len)throw indexOutOfRange(this);if(tr.hi=(tr.hi|(this.buf[this.pos]&127)<<er*7+3)>>>0,this.buf[this.pos++]<128)return tr}throw Error("invalid varint encoding")}Reader$1.prototype.bool=function tr(){return this.uint32()!==0};function readFixed32_end(tr,er){return(tr[er-4]|tr[er-3]<<8|tr[er-2]<<16|tr[er-1]<<24)>>>0}Reader$1.prototype.fixed32=function tr(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return readFixed32_end(this.buf,this.pos+=4)};Reader$1.prototype.sfixed32=function tr(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return readFixed32_end(this.buf,this.pos+=4)|0};function readFixed64(){if(this.pos+8>this.len)throw indexOutOfRange(this,8);return new LongBits(readFixed32_end(this.buf,this.pos+=4),readFixed32_end(this.buf,this.pos+=4))}Reader$1.prototype.float=function tr(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);var er=util$b.float.readFloatLE(this.buf,this.pos);return this.pos+=4,er};Reader$1.prototype.double=function tr(){if(this.pos+8>this.len)throw indexOutOfRange(this,4);var er=util$b.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,er};Reader$1.prototype.bytes=function tr(){var er=this.uint32(),rr=this.pos,nr=this.pos+er;if(nr>this.len)throw indexOutOfRange(this,er);if(this.pos+=er,Array.isArray(this.buf))return this.buf.slice(rr,nr);if(rr===nr){var ir=util$b.Buffer;return ir?ir.alloc(0):new this.buf.constructor(0)}return this._slice.call(this.buf,rr,nr)};Reader$1.prototype.string=function tr(){var er=this.bytes();return utf8.read(er,0,er.length)};Reader$1.prototype.skip=function tr(er){if(typeof er=="number"){if(this.pos+er>this.len)throw indexOutOfRange(this,er);this.pos+=er}else do if(this.pos>=this.len)throw indexOutOfRange(this);while(this.buf[this.pos++]&128);return this};Reader$1.prototype.skipType=function(tr){switch(tr){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(tr=this.uint32()&7)!==4;)this.skipType(tr);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+tr+" at offset "+this.pos)}return this};Reader$1._configure=function(tr){BufferReader$1=tr,Reader$1.create=create$1(),BufferReader$1._configure();var er=util$b.Long?"toLong":"toNumber";util$b.merge(Reader$1.prototype,{int64:function(){return readLongVarint.call(this)[er](!1)},uint64:function(){return readLongVarint.call(this)[er](!0)},sint64:function(){return readLongVarint.call(this).zzDecode()[er](!1)},fixed64:function(){return readFixed64.call(this)[er](!0)},sfixed64:function(){return readFixed64.call(this)[er](!1)}})};var reader_buffer=BufferReader,Reader=reader;(BufferReader.prototype=Object.create(Reader.prototype)).constructor=BufferReader;var util$a=requireMinimal();function BufferReader(tr){Reader.call(this,tr)}BufferReader._configure=function(){util$a.Buffer&&(BufferReader.prototype._slice=util$a.Buffer.prototype.slice)};BufferReader.prototype.string=function tr(){var er=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+er,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+er,this.len))};BufferReader._configure();var rpc={},service=Service,util$9=requireMinimal();(Service.prototype=Object.create(util$9.EventEmitter.prototype)).constructor=Service;function Service(tr,er,rr){if(typeof tr!="function")throw TypeError("rpcImpl must be a function");util$9.EventEmitter.call(this),this.rpcImpl=tr,this.requestDelimited=!!er,this.responseDelimited=!!rr}Service.prototype.rpcCall=function tr(er,rr,nr,ir,sr){if(!ir)throw TypeError("request must be specified");var or=this;if(!sr)return util$9.asPromise(tr,or,er,rr,nr,ir);if(!or.rpcImpl){setTimeout(function(){sr(Error("already ended"))},0);return}try{return or.rpcImpl(er,rr[or.requestDelimited?"encodeDelimited":"encode"](ir).finish(),function(cr,lr){if(cr)return or.emit("error",cr,er),sr(cr);if(lr===null){or.end(!0);return}if(!(lr instanceof nr))try{lr=nr[or.responseDelimited?"decodeDelimited":"decode"](lr)}catch(ur){return or.emit("error",ur,er),sr(ur)}return or.emit("data",lr,er),sr(null,lr)})}catch(ar){or.emit("error",ar,er),setTimeout(function(){sr(ar)},0);return}};Service.prototype.end=function tr(er){return this.rpcImpl&&(er||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this};(function(tr){var er=tr;er.Service=service})(rpc);var roots={};(function(tr){var er=tr;er.build="minimal",er.Writer=writer,er.BufferWriter=writer_buffer,er.Reader=reader,er.BufferReader=reader_buffer,er.util=requireMinimal(),er.rpc=rpc,er.roots=roots,er.configure=rr;function rr(){er.util._configure(),er.Writer._configure(er.BufferWriter),er.Reader._configure(er.BufferReader)}rr()})(indexMinimal);var minimal=indexMinimal;const _m0=getDefaultExportFromCjs(minimal);function createBaseSignature(){return{ecdsaCompact:void 0,walletEcdsaCompact:void 0}}const Signature$5={encode(tr,er=_m0.Writer.create()){return tr.ecdsaCompact!==void 0&&Signature_ECDSACompact.encode(tr.ecdsaCompact,er.uint32(10).fork()).ldelim(),tr.walletEcdsaCompact!==void 0&&Signature_WalletECDSACompact.encode(tr.walletEcdsaCompact,er.uint32(18).fork()).ldelim(),er},decode(tr,er){const rr=tr instanceof _m0.Reader?tr:new _m0.Reader(tr);let nr=er===void 0?rr.len:rr.pos+er;const ir=createBaseSignature();for(;rr.pos<nr;){const sr=rr.uint32();switch(sr>>>3){case 1:ir.ecdsaCompact=Signature_ECDSACompact.decode(rr,rr.uint32());break;case 2:ir.walletEcdsaCompact=Signature_WalletECDSACompact.decode(rr,rr.uint32());break;default:rr.skipType(sr&7);break}}return ir},fromJSON(tr){return{ecdsaCompact:isSet$b(tr.ecdsaCompact)?Signature_ECDSACompact.fromJSON(tr.ecdsaCompact):void 0,walletEcdsaCompact:isSet$b(tr.walletEcdsaCompact)?Signature_WalletECDSACompact.fromJSON(tr.walletEcdsaCompact):void 0}},toJSON(tr){const er={};return tr.ecdsaCompact!==void 0&&(er.ecdsaCompact=tr.ecdsaCompact?Signature_ECDSACompact.toJSON(tr.ecdsaCompact):void 0),tr.walletEcdsaCompact!==void 0&&(er.walletEcdsaCompact=tr.walletEcdsaCompact?Signature_WalletECDSACompact.toJSON(tr.walletEcdsaCompact):void 0),er},fromPartial(tr){const er=createBaseSignature();return er.ecdsaCompact=tr.ecdsaCompact!==void 0&&tr.ecdsaCompact!==null?Signature_ECDSACompact.fromPartial(tr.ecdsaCompact):void 0,er.walletEcdsaCompact=tr.walletEcdsaCompact!==void 0&&tr.walletEcdsaCompact!==null?Signature_WalletECDSACompact.fromPartial(tr.walletEcdsaCompact):void 0,er}};function createBaseSignature_ECDSACompact(){return{bytes:new Uint8Array,recovery:0}}const Signature_ECDSACompact={encode(tr,er=_m0.Writer.create()){return tr.bytes.length!==0&&er.uint32(10).bytes(tr.bytes),tr.recovery!==0&&er.uint32(16).uint32(tr.recovery),er},decode(tr,er){const rr=tr instanceof _m0.Reader?tr:new _m0.Reader(tr);let nr=er===void 0?rr.len:rr.pos+er;const ir=createBaseSignature_ECDSACompact();for(;rr.pos<nr;){const sr=rr.uint32();switch(sr>>>3){case 1:ir.bytes=rr.bytes();break;case 2:ir.recovery=rr.uint32();break;default:rr.skipType(sr&7);break}}return ir},fromJSON(tr){return{bytes:isSet$b(tr.bytes)?bytesFromBase64$8(tr.bytes):new Uint8Array,recovery:isSet$b(tr.recovery)?Number(tr.recovery):0}},toJSON(tr){const er={};return tr.bytes!==void 0&&(er.bytes=base64FromBytes$8(tr.bytes!==void 0?tr.bytes:new Uint8Array)),tr.recovery!==void 0&&(er.recovery=Math.round(tr.recovery)),er},fromPartial(tr){var er,rr;const nr=createBaseSignature_ECDSACompact();return nr.bytes=(er=tr.bytes)!==null&&er!==void 0?er:new Uint8Array,nr.recovery=(rr=tr.recovery)!==null&&rr!==void 0?rr:0,nr}};function createBaseSignature_WalletECDSACompact(){return{bytes:new Uint8Array,recovery:0}}const Signature_WalletECDSACompact={encode(tr,er=_m0.Writer.create()){return tr.bytes.length!==0&&er.uint32(10).bytes(tr.bytes),tr.recovery!==0&&er.uint32(16).uint32(tr.recovery),er},decode(tr,er){const rr=tr instanceof _m0.Reader?tr:new _m0.Reader(tr);let nr=er===void 0?rr.len:rr.pos+er;const ir=createBaseSignature_WalletECDSACompact();for(;rr.pos<nr;){const sr=rr.uint32();switch(sr>>>3){case 1:ir.bytes=rr.bytes();break;case 2:ir.recovery=rr.uint32();break;default:rr.skipType(sr&7);break}}return ir},fromJSON(tr){return{bytes:isSet$b(tr.bytes)?bytesFromBase64$8(tr.bytes):new Uint8Array,recovery:isSet$b(tr.recovery)?Number(tr.recovery):0}},toJSON(tr){const er={};return tr.bytes!==void 0&&(er.bytes=base64FromBytes$8(tr.bytes!==void 0?tr.bytes:new Uint8Array)),tr.recovery!==void 0&&(er.recovery=Math.round(tr.recovery)),er},fromPartial(tr){var er,rr;const nr=createBaseSignature_WalletECDSACompact();return nr.bytes=(er=tr.bytes)!==null&&er!==void 0?er:new Uint8Array,nr.recovery=(rr=tr.recovery)!==null&&rr!==void 0?rr:0,nr}};var globalThis$y=(()=>{if(typeof globalThis$y<"u")return globalThis$y;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof globalThis$y<"u")return globalThis$y;throw"Unable to locate global object"})();function bytesFromBase64$8(tr){if(globalThis$y.Buffer)return Uint8Array.from(globalThis$y.Buffer.from(tr,"base64"));{const er=globalThis$y.atob(tr),rr=new Uint8Array(er.length);for(let nr=0;nr<er.length;++nr)rr[nr]=er.charCodeAt(nr);return rr}}function base64FromBytes$8(tr){if(globalThis$y.Buffer)return globalThis$y.Buffer.from(tr).toString("base64");{const er=[];return tr.forEach(rr=>{er.push(String.fromCharCode(rr))}),globalThis$y.btoa(er.join(""))}}_m0.util.Long!==Long&&(_m0.util.Long=Long,_m0.configure());function isSet$b(tr){return tr!=null}function createBaseUnsignedPublicKey(){return{createdNs:Long.UZERO,secp256k1Uncompressed:void 0}}const UnsignedPublicKey={encode(tr,er=_m0.Writer.create()){return tr.createdNs.isZero()||er.uint32(8).uint64(tr.createdNs),tr.secp256k1Uncompressed!==void 0&&UnsignedPublicKey_Secp256k1Uncompressed.encode(tr.secp256k1Uncompressed,er.uint32(26).fork()).ldelim(),er},decode(tr,er){const rr=tr instanceof _m0.Reader?tr:new _m0.Reader(tr);let nr=er===void 0?rr.len:rr.pos+er;const ir=createBaseUnsignedPublicKey();for(;rr.pos<nr;){const sr=rr.uint32();switch(sr>>>3){case 1:ir.createdNs=rr.uint64();break;case 3:ir.secp256k1Uncompressed=UnsignedPublicKey_Secp256k1Uncompressed.decode(rr,rr.uint32());break;default:rr.skipType(sr&7);break}}return ir},fromJSON(tr){return{createdNs:isSet$a(tr.createdNs)?Long.fromValue(tr.createdNs):Long.UZERO,secp256k1Uncompressed:isSet$a(tr.secp256k1Uncompressed)?UnsignedPublicKey_Secp256k1Uncompressed.fromJSON(tr.secp256k1Uncompressed):void 0}},toJSON(tr){const er={};return tr.createdNs!==void 0&&(er.createdNs=(tr.createdNs||Long.UZERO).toString()),tr.secp256k1Uncompressed!==void 0&&(er.secp256k1Uncompressed=tr.secp256k1Uncompressed?UnsignedPublicKey_Secp256k1Uncompressed.toJSON(tr.secp256k1Uncompressed):void 0),er},fromPartial(tr){const er=createBaseUnsignedPublicKey();return er.createdNs=tr.createdNs!==void 0&&tr.createdNs!==null?Long.fromValue(tr.createdNs):Long.UZERO,er.secp256k1Uncompressed=tr.secp256k1Uncompressed!==void 0&&tr.secp256k1Uncompressed!==null?UnsignedPublicKey_Secp256k1Uncompressed.fromPartial(tr.secp256k1Uncompressed):void 0,er}};function createBaseUnsignedPublicKey_Secp256k1Uncompressed(){return{bytes:new Uint8Array}}const UnsignedPublicKey_Secp256k1Uncompressed={encode(tr,er=_m0.Writer.create()){return tr.bytes.length!==0&&er.uint32(10).bytes(tr.bytes),er},decode(tr,er){const rr=tr instanceof _m0.Reader?tr:new _m0.Reader(tr);let nr=er===void 0?rr.len:rr.pos+er;const ir=createBaseUnsignedPublicKey_Secp256k1Uncompressed();for(;rr.pos<nr;){const sr=rr.uint32();switch(sr>>>3){case 1:ir.bytes=rr.bytes();break;default:rr.skipType(sr&7);break}}return ir},fromJSON(tr){return{bytes:isSet$a(tr.bytes)?bytesFromBase64$7(tr.bytes):new Uint8Array}},toJSON(tr){const er={};return tr.bytes!==void 0&&(er.bytes=base64FromBytes$7(tr.bytes!==void 0?tr.bytes:new Uint8Array)),er},fromPartial(tr){var er;const rr=createBaseUnsignedPublicKey_Secp256k1Uncompressed();return rr.bytes=(er=tr.bytes)!==null&&er!==void 0?er:new Uint8Array,rr}};function createBaseSignedPublicKey(){return{keyBytes:new Uint8Array,signature:void 0}}const SignedPublicKey={encode(tr,er=_m0.Writer.create()){return tr.keyBytes.length!==0&&er.uint32(10).bytes(tr.keyBytes),tr.signature!==void 0&&Signature$5.encode(tr.signature,er.uint32(18).fork()).ldelim(),er},decode(tr,er){const rr=tr instanceof _m0.Reader?tr:new _m0.Reader(tr);let nr=er===void 0?rr.len:rr.pos+er;const ir=createBaseSignedPublicKey();for(;rr.pos<nr;){const sr=rr.uint32();switch(sr>>>3){case 1:ir.keyBytes=rr.bytes();break;case 2:ir.signature=Signature$5.decode(rr,rr.uint32());break;default:rr.skipType(sr&7);break}}return ir},fromJSON(tr){return{keyBytes:isSet$a(tr.keyBytes)?bytesFromBase64$7(tr.keyBytes):new Uint8Array,signature:isSet$a(tr.signature)?Signature$5.fromJSON(tr.signature):void 0}},toJSON(tr){const er={};return tr.keyBytes!==void 0&&(er.keyBytes=base64FromBytes$7(tr.keyBytes!==void 0?tr.keyBytes:new Uint8Array)),tr.signature!==void 0&&(er.signature=tr.signature?Signature$5.toJSON(tr.signature):void 0),er},fromPartial(tr){var er;const rr=createBaseSignedPublicKey();return rr.keyBytes=(er=tr.keyBytes)!==null&&er!==void 0?er:new Uint8Array,rr.signature=tr.signature!==void 0&&tr.signature!==null?Signature$5.fromPartial(tr.signature):void 0,rr}};function createBaseSignedPublicKeyBundle(){return{identityKey:void 0,preKey:void 0}}const SignedPublicKeyBundle={encode(tr,er=_m0.Writer.create()){return tr.identityKey!==void 0&&SignedPublicKey.encode(tr.identityKey,er.uint32(10).fork()).ldelim(),tr.preKey!==void 0&&SignedPublicKey.encode(tr.preKey,er.uint32(18).fork()).ldelim(),er},decode(tr,er){const rr=tr instanceof _m0.Reader?tr:new _m0.Reader(tr);let nr=er===void 0?rr.len:rr.pos+er;const ir=createBaseSignedPublicKeyBundle();for(;rr.pos<nr;){const sr=rr.uint32();switch(sr>>>3){case 1:ir.identityKey=SignedPublicKey.decode(rr,rr.uint32());break;case 2:ir.preKey=SignedPublicKey.decode(rr,rr.uint32());break;default:rr.skipType(sr&7);break}}return ir},fromJSON(tr){return{identityKey:isSet$a(tr.identityKey)?SignedPublicKey.fromJSON(tr.identityKey):void 0,preKey:isSet$a(tr.preKey)?SignedPublicKey.fromJSON(tr.preKey):void 0}},toJSON(tr){const er={};return tr.identityKey!==void 0&&(er.identityKey=tr.identityKey?SignedPublicKey.toJSON(tr.identityKey):void 0),tr.preKey!==void 0&&(er.preKey=tr.preKey?SignedPublicKey.toJSON(tr.preKey):void 0),er},fromPartial(tr){const er=createBaseSignedPublicKeyBundle();return er.identityKey=tr.identityKey!==void 0&&tr.identityKey!==null?SignedPublicKey.fromPartial(tr.identityKey):void 0,er.preKey=tr.preKey!==void 0&&tr.preKey!==null?SignedPublicKey.fromPartial(tr.preKey):void 0,er}};function createBasePublicKey(){return{timestamp:Long.UZERO,signature:void 0,secp256k1Uncompressed:void 0}}const PublicKey={encode(tr,er=_m0.Writer.create()){return tr.timestamp.isZero()||er.uint32(8).uint64(tr.timestamp),tr.signature!==void 0&&Signature$5.encode(tr.signature,er.uint32(18).fork()).ldelim(),tr.secp256k1Uncompressed!==void 0&&PublicKey_Secp256k1Uncompressed.encode(tr.secp256k1Uncompressed,er.uint32(26).fork()).ldelim(),er},decode(tr,er){const rr=tr instanceof _m0.Reader?tr:new _m0.Reader(tr);let nr=er===void 0?rr.len:rr.pos+er;const ir=createBasePublicKey();for(;rr.pos<nr;){const sr=rr.uint32();switch(sr>>>3){case 1:ir.timestamp=rr.uint64();break;case 2:ir.signature=Signature$5.decode(rr,rr.uint32());break;case 3:ir.secp256k1Uncompressed=PublicKey_Secp256k1Uncompressed.decode(rr,rr.uint32());break;default:rr.skipType(sr&7);break}}return ir},fromJSON(tr){return{timestamp:isSet$a(tr.timestamp)?Long.fromValue(tr.timestamp):Long.UZERO,signature:isSet$a(tr.signature)?Signature$5.fromJSON(tr.signature):void 0,secp256k1Uncompressed:isSet$a(tr.secp256k1Uncompressed)?PublicKey_Secp256k1Uncompressed.fromJSON(tr.secp256k1Uncompressed):void 0}},toJSON(tr){const er={};return tr.timestamp!==void 0&&(er.timestamp=(tr.timestamp||Long.UZERO).toString()),tr.signature!==void 0&&(er.signature=tr.signature?Signature$5.toJSON(tr.signature):void 0),tr.secp256k1Uncompressed!==void 0&&(er.secp256k1Uncompressed=tr.secp256k1Uncompressed?PublicKey_Secp256k1Uncompressed.toJSON(tr.secp256k1Uncompressed):void 0),er},fromPartial(tr){const er=createBasePublicKey();return er.timestamp=tr.timestamp!==void 0&&tr.timestamp!==null?Long.fromValue(tr.timestamp):Long.UZERO,er.signature=tr.signature!==void 0&&tr.signature!==null?Signature$5.fromPartial(tr.signature):void 0,er.secp256k1Uncompressed=tr.secp256k1Uncompressed!==void 0&&tr.secp256k1Uncompressed!==null?PublicKey_Secp256k1Uncompressed.fromPartial(tr.secp256k1Uncompressed):void 0,er}};function createBasePublicKey_Secp256k1Uncompressed(){return{bytes:new Uint8Array}}const PublicKey_Secp256k1Uncompressed={encode(tr,er=_m0.Writer.create()){return tr.bytes.length!==0&&er.uint32(10).bytes(tr.bytes),er},decode(tr,er){const rr=tr instanceof _m0.Reader?tr:new _m0.Reader(tr);let nr=er===void 0?rr.len:rr.pos+er;const ir=createBasePublicKey_Secp256k1Uncompressed();for(;rr.pos<nr;){const sr=rr.uint32();switch(sr>>>3){case 1:ir.bytes=rr.bytes();break;default:rr.skipType(sr&7);break}}return ir},fromJSON(tr){return{bytes:isSet$a(tr.bytes)?bytesFromBase64$7(tr.bytes):new Uint8Array}},toJSON(tr){const er={};return tr.bytes!==void 0&&(er.bytes=base64FromBytes$7(tr.bytes!==void 0?tr.bytes:new Uint8Array)),er},fromPartial(tr){var er;const rr=createBasePublicKey_Secp256k1Uncompressed();return rr.bytes=(er=tr.bytes)!==null&&er!==void 0?er:new Uint8Array,rr}};function createBasePublicKeyBundle(){return{identityKey:void 0,preKey:void 0}}const PublicKeyBundle={encode(tr,er=_m0.Writer.create()){return tr.identityKey!==void 0&&PublicKey.encode(tr.identityKey,er.uint32(10).fork()).ldelim(),tr.preKey!==void 0&&PublicKey.encode(tr.preKey,er.uint32(18).fork()).ldelim(),er},decode(tr,er){const rr=tr instanceof _m0.Reader?tr:new _m0.Reader(tr);let nr=er===void 0?rr.len:rr.pos+er;const ir=createBasePublicKeyBundle();for(;rr.pos<nr;){const sr=rr.uint32();switch(sr>>>3){case 1:ir.identityKey=PublicKey.decode(rr,rr.uint32());break;case 2:ir.preKey=PublicKey.decode(rr,rr.uint32());break;default:rr.skipType(sr&7);break}}return ir},fromJSON(tr){return{identityKey:isSet$a(tr.identityKey)?PublicKey.fromJSON(tr.identityKey):void 0,preKey:isSet$a(tr.preKey)?PublicKey.fromJSON(tr.preKey):void 0}},toJSON(tr){const er={};return tr.identityKey!==void 0&&(er.identityKey=tr.identityKey?PublicKey.toJSON(tr.identityKey):void 0),tr.preKey!==void 0&&(er.preKey=tr.preKey?PublicKey.toJSON(tr.preKey):void 0),er},fromPartial(tr){const er=createBasePublicKeyBundle();return er.identityKey=tr.identityKey!==void 0&&tr.identityKey!==null?PublicKey.fromPartial(tr.identityKey):void 0,er.preKey=tr.preKey!==void 0&&tr.preKey!==null?PublicKey.fromPartial(tr.preKey):void 0,er}};var globalThis$x=(()=>{if(typeof globalThis$x<"u")return globalThis$x;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof globalThis$x<"u")return globalThis$x;throw"Unable to locate global object"})();function bytesFromBase64$7(tr){if(globalThis$x.Buffer)return Uint8Array.from(globalThis$x.Buffer.from(tr,"base64"));{const er=globalThis$x.atob(tr),rr=new Uint8Array(er.length);for(let nr=0;nr<er.length;++nr)rr[nr]=er.charCodeAt(nr);return rr}}function base64FromBytes$7(tr){if(globalThis$x.Buffer)return globalThis$x.Buffer.from(tr).toString("base64");{const er=[];return tr.forEach(rr=>{er.push(String.fromCharCode(rr))}),globalThis$x.btoa(er.join(""))}}_m0.util.Long!==Long&&(_m0.util.Long=Long,_m0.configure());function isSet$a(tr){return tr!=null}function createBaseToken(){return{identityKey:void 0,authDataBytes:new Uint8Array,authDataSignature:void 0}}const Token={encode(tr,er=_m0.Writer.create()){return tr.identityKey!==void 0&&PublicKey.encode(tr.identityKey,er.uint32(10).fork()).ldelim(),tr.authDataBytes.length!==0&&er.uint32(18).bytes(tr.authDataBytes),tr.authDataSignature!==void 0&&Signature$5.encode(tr.authDataSignature,er.uint32(26).fork()).ldelim(),er},decode(tr,er){const rr=tr instanceof _m0.Reader?tr:new _m0.Reader(tr);let nr=er===void 0?rr.len:rr.pos+er;const ir=createBaseToken();for(;rr.pos<nr;){const sr=rr.uint32();switch(sr>>>3){case 1:ir.identityKey=PublicKey.decode(rr,rr.uint32());break;case 2:ir.authDataBytes=rr.bytes();break;case 3:ir.authDataSignature=Signature$5.decode(rr,rr.uint32());break;default:rr.skipType(sr&7);break}}return ir},fromJSON(tr){return{identityKey:isSet$9(tr.identityKey)?PublicKey.fromJSON(tr.identityKey):void 0,authDataBytes:isSet$9(tr.authDataBytes)?bytesFromBase64$6(tr.authDataBytes):new Uint8Array,authDataSignature:isSet$9(tr.authDataSignature)?Signature$5.fromJSON(tr.authDataSignature):void 0}},toJSON(tr){const er={};return tr.identityKey!==void 0&&(er.identityKey=tr.identityKey?PublicKey.toJSON(tr.identityKey):void 0),tr.authDataBytes!==void 0&&(er.authDataBytes=base64FromBytes$6(tr.authDataBytes!==void 0?tr.authDataBytes:new Uint8Array)),tr.authDataSignature!==void 0&&(er.authDataSignature=tr.authDataSignature?Signature$5.toJSON(tr.authDataSignature):void 0),er},fromPartial(tr){var er;const rr=createBaseToken();return rr.identityKey=tr.identityKey!==void 0&&tr.identityKey!==null?PublicKey.fromPartial(tr.identityKey):void 0,rr.authDataBytes=(er=tr.authDataBytes)!==null&&er!==void 0?er:new Uint8Array,rr.authDataSignature=tr.authDataSignature!==void 0&&tr.authDataSignature!==null?Signature$5.fromPartial(tr.authDataSignature):void 0,rr}};function createBaseAuthData(){return{walletAddr:"",createdNs:Long.UZERO}}const AuthData={encode(tr,er=_m0.Writer.create()){return tr.walletAddr!==""&&er.uint32(10).string(tr.walletAddr),tr.createdNs.isZero()||er.uint32(16).uint64(tr.createdNs),er},decode(tr,er){const rr=tr instanceof _m0.Reader?tr:new _m0.Reader(tr);let nr=er===void 0?rr.len:rr.pos+er;const ir=createBaseAuthData();for(;rr.pos<nr;){const sr=rr.uint32();switch(sr>>>3){case 1:ir.walletAddr=rr.string();break;case 2:ir.createdNs=rr.uint64();break;default:rr.skipType(sr&7);break}}return ir},fromJSON(tr){return{walletAddr:isSet$9(tr.walletAddr)?String(tr.walletAddr):"",createdNs:isSet$9(tr.createdNs)?Long.fromValue(tr.createdNs):Long.UZERO}},toJSON(tr){const er={};return tr.walletAddr!==void 0&&(er.walletAddr=tr.walletAddr),tr.createdNs!==void 0&&(er.createdNs=(tr.createdNs||Long.UZERO).toString()),er},fromPartial(tr){var er;const rr=createBaseAuthData();return rr.walletAddr=(er=tr.walletAddr)!==null&&er!==void 0?er:"",rr.createdNs=tr.createdNs!==void 0&&tr.createdNs!==null?Long.fromValue(tr.createdNs):Long.UZERO,rr}};var globalThis$w=(()=>{if(typeof globalThis$w<"u")return globalThis$w;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof globalThis$w<"u")return globalThis$w;throw"Unable to locate global object"})();function bytesFromBase64$6(tr){if(globalThis$w.Buffer)return Uint8Array.from(globalThis$w.Buffer.from(tr,"base64"));{const er=globalThis$w.atob(tr),rr=new Uint8Array(er.length);for(let nr=0;nr<er.length;++nr)rr[nr]=er.charCodeAt(nr);return rr}}function base64FromBytes$6(tr){if(globalThis$w.Buffer)return globalThis$w.Buffer.from(tr).toString("base64");{const er=[];return tr.forEach(rr=>{er.push(String.fromCharCode(rr))}),globalThis$w.btoa(er.join(""))}}_m0.util.Long!==Long&&(_m0.util.Long=Long,_m0.configure());function isSet$9(tr){return tr!=null}function createBaseCiphertext(){return{aes256GcmHkdfSha256:void 0}}const Ciphertext={encode(tr,er=_m0.Writer.create()){return tr.aes256GcmHkdfSha256!==void 0&&Ciphertext_Aes256gcmHkdfsha256.encode(tr.aes256GcmHkdfSha256,er.uint32(10).fork()).ldelim(),er},decode(tr,er){const rr=tr instanceof _m0.Reader?tr:new _m0.Reader(tr);let nr=er===void 0?rr.len:rr.pos+er;const ir=createBaseCiphertext();for(;rr.pos<nr;){const sr=rr.uint32();switch(sr>>>3){case 1:ir.aes256GcmHkdfSha256=Ciphertext_Aes256gcmHkdfsha256.decode(rr,rr.uint32());break;default:rr.skipType(sr&7);break}}return ir},fromJSON(tr){return{aes256GcmHkdfSha256:isSet$8(tr.aes256GcmHkdfSha256)?Ciphertext_Aes256gcmHkdfsha256.fromJSON(tr.aes256GcmHkdfSha256):void 0}},toJSON(tr){const er={};return tr.aes256GcmHkdfSha256!==void 0&&(er.aes256GcmHkdfSha256=tr.aes256GcmHkdfSha256?Ciphertext_Aes256gcmHkdfsha256.toJSON(tr.aes256GcmHkdfSha256):void 0),er},fromPartial(tr){const er=createBaseCiphertext();return er.aes256GcmHkdfSha256=tr.aes256GcmHkdfSha256!==void 0&&tr.aes256GcmHkdfSha256!==null?Ciphertext_Aes256gcmHkdfsha256.fromPartial(tr.aes256GcmHkdfSha256):void 0,er}};function createBaseCiphertext_Aes256gcmHkdfsha256(){return{hkdfSalt:new Uint8Array,gcmNonce:new Uint8Array,payload:new Uint8Array}}const Ciphertext_Aes256gcmHkdfsha256={encode(tr,er=_m0.Writer.create()){return tr.hkdfSalt.length!==0&&er.uint32(10).bytes(tr.hkdfSalt),tr.gcmNonce.length!==0&&er.uint32(18).bytes(tr.gcmNonce),tr.payload.length!==0&&er.uint32(26).bytes(tr.payload),er},decode(tr,er){const rr=tr instanceof _m0.Reader?tr:new _m0.Reader(tr);let nr=er===void 0?rr.len:rr.pos+er;const ir=createBaseCiphertext_Aes256gcmHkdfsha256();for(;rr.pos<nr;){const sr=rr.uint32();switch(sr>>>3){case 1:ir.hkdfSalt=rr.bytes();break;case 2:ir.gcmNonce=rr.bytes();break;case 3:ir.payload=rr.bytes();break;default:rr.skipType(sr&7);break}}return ir},fromJSON(tr){return{hkdfSalt:isSet$8(tr.hkdfSalt)?bytesFromBase64$5(tr.hkdfSalt):new Uint8Array,gcmNonce:isSet$8(tr.gcmNonce)?bytesFromBase64$5(tr.gcmNonce):new Uint8Array,payload:isSet$8(tr.payload)?bytesFromBase64$5(tr.payload):new Uint8Array}},toJSON(tr){const er={};return tr.hkdfSalt!==void 0&&(er.hkdfSalt=base64FromBytes$5(tr.hkdfSalt!==void 0?tr.hkdfSalt:new Uint8Array)),tr.gcmNonce!==void 0&&(er.gcmNonce=base64FromBytes$5(tr.gcmNonce!==void 0?tr.gcmNonce:new Uint8Array)),tr.payload!==void 0&&(er.payload=base64FromBytes$5(tr.payload!==void 0?tr.payload:new Uint8Array)),er},fromPartial(tr){var er,rr,nr;const ir=createBaseCiphertext_Aes256gcmHkdfsha256();return ir.hkdfSalt=(er=tr.hkdfSalt)!==null&&er!==void 0?er:new Uint8Array,ir.gcmNonce=(rr=tr.gcmNonce)!==null&&rr!==void 0?rr:new Uint8Array,ir.payload=(nr=tr.payload)!==null&&nr!==void 0?nr:new Uint8Array,ir}};function createBaseSignedEciesCiphertext(){return{eciesBytes:new Uint8Array,signature:void 0}}const SignedEciesCiphertext={encode(tr,er=_m0.Writer.create()){return tr.eciesBytes.length!==0&&er.uint32(10).bytes(tr.eciesBytes),tr.signature!==void 0&&Signature$5.encode(tr.signature,er.uint32(18).fork()).ldelim(),er},decode(tr,er){const rr=tr instanceof _m0.Reader?tr:new _m0.Reader(tr);let nr=er===void 0?rr.len:rr.pos+er;const ir=createBaseSignedEciesCiphertext();for(;rr.pos<nr;){const sr=rr.uint32();switch(sr>>>3){case 1:ir.eciesBytes=rr.bytes();break;case 2:ir.signature=Signature$5.decode(rr,rr.uint32());break;default:rr.skipType(sr&7);break}}return ir},fromJSON(tr){return{eciesBytes:isSet$8(tr.eciesBytes)?bytesFromBase64$5(tr.eciesBytes):new Uint8Array,signature:isSet$8(tr.signature)?Signature$5.fromJSON(tr.signature):void 0}},toJSON(tr){const er={};return tr.eciesBytes!==void 0&&(er.eciesBytes=base64FromBytes$5(tr.eciesBytes!==void 0?tr.eciesBytes:new Uint8Array)),tr.signature!==void 0&&(er.signature=tr.signature?Signature$5.toJSON(tr.signature):void 0),er},fromPartial(tr){var er;const rr=createBaseSignedEciesCiphertext();return rr.eciesBytes=(er=tr.eciesBytes)!==null&&er!==void 0?er:new Uint8Array,rr.signature=tr.signature!==void 0&&tr.signature!==null?Signature$5.fromPartial(tr.signature):void 0,rr}};function createBaseSignedEciesCiphertext_Ecies(){return{ephemeralPublicKey:new Uint8Array,iv:new Uint8Array,mac:new Uint8Array,ciphertext:new Uint8Array}}const SignedEciesCiphertext_Ecies={encode(tr,er=_m0.Writer.create()){return tr.ephemeralPublicKey.length!==0&&er.uint32(10).bytes(tr.ephemeralPublicKey),tr.iv.length!==0&&er.uint32(18).bytes(tr.iv),tr.mac.length!==0&&er.uint32(26).bytes(tr.mac),tr.ciphertext.length!==0&&er.uint32(34).bytes(tr.ciphertext),er},decode(tr,er){const rr=tr instanceof _m0.Reader?tr:new _m0.Reader(tr);let nr=er===void 0?rr.len:rr.pos+er;const ir=createBaseSignedEciesCiphertext_Ecies();for(;rr.pos<nr;){const sr=rr.uint32();switch(sr>>>3){case 1:ir.ephemeralPublicKey=rr.bytes();break;case 2:ir.iv=rr.bytes();break;case 3:ir.mac=rr.bytes();break;case 4:ir.ciphertext=rr.bytes();break;default:rr.skipType(sr&7);break}}return ir},fromJSON(tr){return{ephemeralPublicKey:isSet$8(tr.ephemeralPublicKey)?bytesFromBase64$5(tr.ephemeralPublicKey):new Uint8Array,iv:isSet$8(tr.iv)?bytesFromBase64$5(tr.iv):new Uint8Array,mac:isSet$8(tr.mac)?bytesFromBase64$5(tr.mac):new Uint8Array,ciphertext:isSet$8(tr.ciphertext)?bytesFromBase64$5(tr.ciphertext):new Uint8Array}},toJSON(tr){const er={};return tr.ephemeralPublicKey!==void 0&&(er.ephemeralPublicKey=base64FromBytes$5(tr.ephemeralPublicKey!==void 0?tr.ephemeralPublicKey:new Uint8Array)),tr.iv!==void 0&&(er.iv=base64FromBytes$5(tr.iv!==void 0?tr.iv:new Uint8Array)),tr.mac!==void 0&&(er.mac=base64FromBytes$5(tr.mac!==void 0?tr.mac:new Uint8Array)),tr.ciphertext!==void 0&&(er.ciphertext=base64FromBytes$5(tr.ciphertext!==void 0?tr.ciphertext:new Uint8Array)),er},fromPartial(tr){var er,rr,nr,ir;const sr=createBaseSignedEciesCiphertext_Ecies();return sr.ephemeralPublicKey=(er=tr.ephemeralPublicKey)!==null&&er!==void 0?er:new Uint8Array,sr.iv=(rr=tr.iv)!==null&&rr!==void 0?rr:new Uint8Array,sr.mac=(nr=tr.mac)!==null&&nr!==void 0?nr:new Uint8Array,sr.ciphertext=(ir=tr.ciphertext)!==null&&ir!==void 0?ir:new Uint8Array,sr}};var globalThis$v=(()=>{if(typeof globalThis$v<"u")return globalThis$v;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof globalThis$v<"u")return globalThis$v;throw"Unable to locate global object"})();function bytesFromBase64$5(tr){if(globalThis$v.Buffer)return Uint8Array.from(globalThis$v.Buffer.from(tr,"base64"));{const er=globalThis$v.atob(tr),rr=new Uint8Array(er.length);for(let nr=0;nr<er.length;++nr)rr[nr]=er.charCodeAt(nr);return rr}}function base64FromBytes$5(tr){if(globalThis$v.Buffer)return globalThis$v.Buffer.from(tr).toString("base64");{const er=[];return tr.forEach(rr=>{er.push(String.fromCharCode(rr))}),globalThis$v.btoa(er.join(""))}}_m0.util.Long!==Long&&(_m0.util.Long=Long,_m0.configure());function isSet$8(tr){return tr!=null}var ConsentProofPayloadVersion$1;(function(tr){tr[tr.CONSENT_PROOF_PAYLOAD_VERSION_UNSPECIFIED=0]="CONSENT_PROOF_PAYLOAD_VERSION_UNSPECIFIED",tr[tr.CONSENT_PROOF_PAYLOAD_VERSION_1=1]="CONSENT_PROOF_PAYLOAD_VERSION_1",tr[tr.UNRECOGNIZED=-1]="UNRECOGNIZED"})(ConsentProofPayloadVersion$1||(ConsentProofPayloadVersion$1={}));function consentProofPayloadVersionFromJSON(tr){switch(tr){case 0:case"CONSENT_PROOF_PAYLOAD_VERSION_UNSPECIFIED":return ConsentProofPayloadVersion$1.CONSENT_PROOF_PAYLOAD_VERSION_UNSPECIFIED;case 1:case"CONSENT_PROOF_PAYLOAD_VERSION_1":return ConsentProofPayloadVersion$1.CONSENT_PROOF_PAYLOAD_VERSION_1;case-1:case"UNRECOGNIZED":default:return ConsentProofPayloadVersion$1.UNRECOGNIZED}}function consentProofPayloadVersionToJSON(tr){switch(tr){case ConsentProofPayloadVersion$1.CONSENT_PROOF_PAYLOAD_VERSION_UNSPECIFIED:return"CONSENT_PROOF_PAYLOAD_VERSION_UNSPECIFIED";case ConsentProofPayloadVersion$1.CONSENT_PROOF_PAYLOAD_VERSION_1:return"CONSENT_PROOF_PAYLOAD_VERSION_1";case ConsentProofPayloadVersion$1.UNRECOGNIZED:default:return"UNRECOGNIZED"}}function createBaseInvitationV1(){return{topic:"",context:void 0,aes256GcmHkdfSha256:void 0,consentProof:void 0}}const InvitationV1={encode(tr,er=_m0.Writer.create()){return tr.topic!==""&&er.uint32(10).string(tr.topic),tr.context!==void 0&&InvitationV1_Context.encode(tr.context,er.uint32(18).fork()).ldelim(),tr.aes256GcmHkdfSha256!==void 0&&InvitationV1_Aes256gcmHkdfsha256.encode(tr.aes256GcmHkdfSha256,er.uint32(26).fork()).ldelim(),tr.consentProof!==void 0&&ConsentProofPayload.encode(tr.consentProof,er.uint32(34).fork()).ldelim(),er},decode(tr,er){const rr=tr instanceof _m0.Reader?tr:new _m0.Reader(tr);let nr=er===void 0?rr.len:rr.pos+er;const ir=createBaseInvitationV1();for(;rr.pos<nr;){const sr=rr.uint32();switch(sr>>>3){case 1:ir.topic=rr.string();break;case 2:ir.context=InvitationV1_Context.decode(rr,rr.uint32());break;case 3:ir.aes256GcmHkdfSha256=InvitationV1_Aes256gcmHkdfsha256.decode(rr,rr.uint32());break;case 4:ir.consentProof=ConsentProofPayload.decode(rr,rr.uint32());break;default:rr.skipType(sr&7);break}}return ir},fromJSON(tr){return{topic:isSet$7(tr.topic)?String(tr.topic):"",context:isSet$7(tr.context)?InvitationV1_Context.fromJSON(tr.context):void 0,aes256GcmHkdfSha256:isSet$7(tr.aes256GcmHkdfSha256)?InvitationV1_Aes256gcmHkdfsha256.fromJSON(tr.aes256GcmHkdfSha256):void 0,consentProof:isSet$7(tr.consentProof)?ConsentProofPayload.fromJSON(tr.consentProof):void 0}},toJSON(tr){const er={};return tr.topic!==void 0&&(er.topic=tr.topic),tr.context!==void 0&&(er.context=tr.context?InvitationV1_Context.toJSON(tr.context):void 0),tr.aes256GcmHkdfSha256!==void 0&&(er.aes256GcmHkdfSha256=tr.aes256GcmHkdfSha256?InvitationV1_Aes256gcmHkdfsha256.toJSON(tr.aes256GcmHkdfSha256):void 0),tr.consentProof!==void 0&&(er.consentProof=tr.consentProof?ConsentProofPayload.toJSON(tr.consentProof):void 0),er},fromPartial(tr){var er;const rr=createBaseInvitationV1();return rr.topic=(er=tr.topic)!==null&&er!==void 0?er:"",rr.context=tr.context!==void 0&&tr.context!==null?InvitationV1_Context.fromPartial(tr.context):void 0,rr.aes256GcmHkdfSha256=tr.aes256GcmHkdfSha256!==void 0&&tr.aes256GcmHkdfSha256!==null?InvitationV1_Aes256gcmHkdfsha256.fromPartial(tr.aes256GcmHkdfSha256):void 0,rr.consentProof=tr.consentProof!==void 0&&tr.consentProof!==null?ConsentProofPayload.fromPartial(tr.consentProof):void 0,rr}};function createBaseInvitationV1_Aes256gcmHkdfsha256(){return{keyMaterial:new Uint8Array}}const InvitationV1_Aes256gcmHkdfsha256={encode(tr,er=_m0.Writer.create()){return tr.keyMaterial.length!==0&&er.uint32(10).bytes(tr.keyMaterial),er},decode(tr,er){const rr=tr instanceof _m0.Reader?tr:new _m0.Reader(tr);let nr=er===void 0?rr.len:rr.pos+er;const ir=createBaseInvitationV1_Aes256gcmHkdfsha256();for(;rr.pos<nr;){const sr=rr.uint32();switch(sr>>>3){case 1:ir.keyMaterial=rr.bytes();break;default:rr.skipType(sr&7);break}}return ir},fromJSON(tr){return{keyMaterial:isSet$7(tr.keyMaterial)?bytesFromBase64$4(tr.keyMaterial):new Uint8Array}},toJSON(tr){const er={};return tr.keyMaterial!==void 0&&(er.keyMaterial=base64FromBytes$4(tr.keyMaterial!==void 0?tr.keyMaterial:new Uint8Array)),er},fromPartial(tr){var er;const rr=createBaseInvitationV1_Aes256gcmHkdfsha256();return rr.keyMaterial=(er=tr.keyMaterial)!==null&&er!==void 0?er:new Uint8Array,rr}};function createBaseInvitationV1_Context(){return{conversationId:"",metadata:{}}}const InvitationV1_Context={encode(tr,er=_m0.Writer.create()){return tr.conversationId!==""&&er.uint32(10).string(tr.conversationId),Object.entries(tr.metadata).forEach(([rr,nr])=>{InvitationV1_Context_MetadataEntry.encode({key:rr,value:nr},er.uint32(18).fork()).ldelim()}),er},decode(tr,er){const rr=tr instanceof _m0.Reader?tr:new _m0.Reader(tr);let nr=er===void 0?rr.len:rr.pos+er;const ir=createBaseInvitationV1_Context();for(;rr.pos<nr;){const sr=rr.uint32();switch(sr>>>3){case 1:ir.conversationId=rr.string();break;case 2:const or=InvitationV1_Context_MetadataEntry.decode(rr,rr.uint32());or.value!==void 0&&(ir.metadata[or.key]=or.value);break;default:rr.skipType(sr&7);break}}return ir},fromJSON(tr){return{conversationId:isSet$7(tr.conversationId)?String(tr.conversationId):"",metadata:isObject$6(tr.metadata)?Object.entries(tr.metadata).reduce((er,[rr,nr])=>(er[rr]=String(nr),er),{}):{}}},toJSON(tr){const er={};return tr.conversationId!==void 0&&(er.conversationId=tr.conversationId),er.metadata={},tr.metadata&&Object.entries(tr.metadata).forEach(([rr,nr])=>{er.metadata[rr]=nr}),er},fromPartial(tr){var er,rr;const nr=createBaseInvitationV1_Context();return nr.conversationId=(er=tr.conversationId)!==null&&er!==void 0?er:"",nr.metadata=Object.entries((rr=tr.metadata)!==null&&rr!==void 0?rr:{}).reduce((ir,[sr,or])=>(or!==void 0&&(ir[sr]=String(or)),ir),{}),nr}};function createBaseInvitationV1_Context_MetadataEntry(){return{key:"",value:""}}const InvitationV1_Context_MetadataEntry={encode(tr,er=_m0.Writer.create()){return tr.key!==""&&er.uint32(10).string(tr.key),tr.value!==""&&er.uint32(18).string(tr.value),er},decode(tr,er){const rr=tr instanceof _m0.Reader?tr:new _m0.Reader(tr);let nr=er===void 0?rr.len:rr.pos+er;const ir=createBaseInvitationV1_Context_MetadataEntry();for(;rr.pos<nr;){const sr=rr.uint32();switch(sr>>>3){case 1:ir.key=rr.string();break;case 2:ir.value=rr.string();break;default:rr.skipType(sr&7);break}}return ir},fromJSON(tr){return{key:isSet$7(tr.key)?String(tr.key):"",value:isSet$7(tr.value)?String(tr.value):""}},toJSON(tr){const er={};return tr.key!==void 0&&(er.key=tr.key),tr.value!==void 0&&(er.value=tr.value),er},fromPartial(tr){var er,rr;const nr=createBaseInvitationV1_Context_MetadataEntry();return nr.key=(er=tr.key)!==null&&er!==void 0?er:"",nr.value=(rr=tr.value)!==null&&rr!==void 0?rr:"",nr}};function createBaseSealedInvitationHeaderV1(){return{sender:void 0,recipient:void 0,createdNs:Long.UZERO}}const SealedInvitationHeaderV1={encode(tr,er=_m0.Writer.create()){return tr.sender!==void 0&&SignedPublicKeyBundle.encode(tr.sender,er.uint32(10).fork()).ldelim(),tr.recipient!==void 0&&SignedPublicKeyBundle.encode(tr.recipient,er.uint32(18).fork()).ldelim(),tr.createdNs.isZero()||er.uint32(24).uint64(tr.createdNs),er},decode(tr,er){const rr=tr instanceof _m0.Reader?tr:new _m0.Reader(tr);let nr=er===void 0?rr.len:rr.pos+er;const ir=createBaseSealedInvitationHeaderV1();for(;rr.pos<nr;){const sr=rr.uint32();switch(sr>>>3){case 1:ir.sender=SignedPublicKeyBundle.decode(rr,rr.uint32());break;case 2:ir.recipient=SignedPublicKeyBundle.decode(rr,rr.uint32());break;case 3:ir.createdNs=rr.uint64();break;default:rr.skipType(sr&7);break}}return ir},fromJSON(tr){return{sender:isSet$7(tr.sender)?SignedPublicKeyBundle.fromJSON(tr.sender):void 0,recipient:isSet$7(tr.recipient)?SignedPublicKeyBundle.fromJSON(tr.recipient):void 0,createdNs:isSet$7(tr.createdNs)?Long.fromValue(tr.createdNs):Long.UZERO}},toJSON(tr){const er={};return tr.sender!==void 0&&(er.sender=tr.sender?SignedPublicKeyBundle.toJSON(tr.sender):void 0),tr.recipient!==void 0&&(er.recipient=tr.recipient?SignedPublicKeyBundle.toJSON(tr.recipient):void 0),tr.createdNs!==void 0&&(er.createdNs=(tr.createdNs||Long.UZERO).toString()),er},fromPartial(tr){const er=createBaseSealedInvitationHeaderV1();return er.sender=tr.sender!==void 0&&tr.sender!==null?SignedPublicKeyBundle.fromPartial(tr.sender):void 0,er.recipient=tr.recipient!==void 0&&tr.recipient!==null?SignedPublicKeyBundle.fromPartial(tr.recipient):void 0,er.createdNs=tr.createdNs!==void 0&&tr.createdNs!==null?Long.fromValue(tr.createdNs):Long.UZERO,er}};function createBaseSealedInvitationV1(){return{headerBytes:new Uint8Array,ciphertext:void 0}}const SealedInvitationV1={encode(tr,er=_m0.Writer.create()){return tr.headerBytes.length!==0&&er.uint32(10).bytes(tr.headerBytes),tr.ciphertext!==void 0&&Ciphertext.encode(tr.ciphertext,er.uint32(18).fork()).ldelim(),er},decode(tr,er){const rr=tr instanceof _m0.Reader?tr:new _m0.Reader(tr);let nr=er===void 0?rr.len:rr.pos+er;const ir=createBaseSealedInvitationV1();for(;rr.pos<nr;){const sr=rr.uint32();switch(sr>>>3){case 1:ir.headerBytes=rr.bytes();break;case 2:ir.ciphertext=Ciphertext.decode(rr,rr.uint32());break;default:rr.skipType(sr&7);break}}return ir},fromJSON(tr){return{headerBytes:isSet$7(tr.headerBytes)?bytesFromBase64$4(tr.headerBytes):new Uint8Array,ciphertext:isSet$7(tr.ciphertext)?Ciphertext.fromJSON(tr.ciphertext):void 0}},toJSON(tr){const er={};return tr.headerBytes!==void 0&&(er.headerBytes=base64FromBytes$4(tr.headerBytes!==void 0?tr.headerBytes:new Uint8Array)),tr.ciphertext!==void 0&&(er.ciphertext=tr.ciphertext?Ciphertext.toJSON(tr.ciphertext):void 0),er},fromPartial(tr){var er;const rr=createBaseSealedInvitationV1();return rr.headerBytes=(er=tr.headerBytes)!==null&&er!==void 0?er:new Uint8Array,rr.ciphertext=tr.ciphertext!==void 0&&tr.ciphertext!==null?Ciphertext.fromPartial(tr.ciphertext):void 0,rr}};function createBaseSealedInvitation(){return{v1:void 0}}const SealedInvitation={encode(tr,er=_m0.Writer.create()){return tr.v1!==void 0&&SealedInvitationV1.encode(tr.v1,er.uint32(10).fork()).ldelim(),er},decode(tr,er){const rr=tr instanceof _m0.Reader?tr:new _m0.Reader(tr);let nr=er===void 0?rr.len:rr.pos+er;const ir=createBaseSealedInvitation();for(;rr.pos<nr;){const sr=rr.uint32();switch(sr>>>3){case 1:ir.v1=SealedInvitationV1.decode(rr,rr.uint32());break;default:rr.skipType(sr&7);break}}return ir},fromJSON(tr){return{v1:isSet$7(tr.v1)?SealedInvitationV1.fromJSON(tr.v1):void 0}},toJSON(tr){const er={};return tr.v1!==void 0&&(er.v1=tr.v1?SealedInvitationV1.toJSON(tr.v1):void 0),er},fromPartial(tr){const er=createBaseSealedInvitation();return er.v1=tr.v1!==void 0&&tr.v1!==null?SealedInvitationV1.fromPartial(tr.v1):void 0,er}};function createBaseConsentProofPayload(){return{signature:"",timestamp:Long.UZERO,payloadVersion:0}}const ConsentProofPayload={encode(tr,er=_m0.Writer.create()){return tr.signature!==""&&er.uint32(10).string(tr.signature),tr.timestamp.isZero()||er.uint32(16).uint64(tr.timestamp),tr.payloadVersion!==0&&er.uint32(24).int32(tr.payloadVersion),er},decode(tr,er){const rr=tr instanceof _m0.Reader?tr:new _m0.Reader(tr);let nr=er===void 0?rr.len:rr.pos+er;const ir=createBaseConsentProofPayload();for(;rr.pos<nr;){const sr=rr.uint32();switch(sr>>>3){case 1:ir.signature=rr.string();break;case 2:ir.timestamp=rr.uint64();break;case 3:ir.payloadVersion=rr.int32();break;default:rr.skipType(sr&7);break}}return ir},fromJSON(tr){return{signature:isSet$7(tr.signature)?String(tr.signature):"",timestamp:isSet$7(tr.timestamp)?Long.fromValue(tr.timestamp):Long.UZERO,payloadVersion:isSet$7(tr.payloadVersion)?consentProofPayloadVersionFromJSON(tr.payloadVersion):0}},toJSON(tr){const er={};return tr.signature!==void 0&&(er.signature=tr.signature),tr.timestamp!==void 0&&(er.timestamp=(tr.timestamp||Long.UZERO).toString()),tr.payloadVersion!==void 0&&(er.payloadVersion=consentProofPayloadVersionToJSON(tr.payloadVersion)),er},fromPartial(tr){var er,rr;const nr=createBaseConsentProofPayload();return nr.signature=(er=tr.signature)!==null&&er!==void 0?er:"",nr.timestamp=tr.timestamp!==void 0&&tr.timestamp!==null?Long.fromValue(tr.timestamp):Long.UZERO,nr.payloadVersion=(rr=tr.payloadVersion)!==null&&rr!==void 0?rr:0,nr}};var globalThis$u=(()=>{if(typeof globalThis$u<"u")return globalThis$u;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof globalThis$u<"u")return globalThis$u;throw"Unable to locate global object"})();function bytesFromBase64$4(tr){if(globalThis$u.Buffer)return Uint8Array.from(globalThis$u.Buffer.from(tr,"base64"));{const er=globalThis$u.atob(tr),rr=new Uint8Array(er.length);for(let nr=0;nr<er.length;++nr)rr[nr]=er.charCodeAt(nr);return rr}}function base64FromBytes$4(tr){if(globalThis$u.Buffer)return globalThis$u.Buffer.from(tr).toString("base64");{const er=[];return tr.forEach(rr=>{er.push(String.fromCharCode(rr))}),globalThis$u.btoa(er.join(""))}}_m0.util.Long!==Long&&(_m0.util.Long=Long,_m0.configure());function isObject$6(tr){return typeof tr=="object"&&tr!==null}function isSet$7(tr){return tr!=null}function createBaseConversationReference(){return{topic:"",peerAddress:"",createdNs:Long.UZERO,context:void 0,consentProofPayload:void 0}}const ConversationReference={encode(tr,er=_m0.Writer.create()){return tr.topic!==""&&er.uint32(10).string(tr.topic),tr.peerAddress!==""&&er.uint32(18).string(tr.peerAddress),tr.createdNs.isZero()||er.uint32(24).uint64(tr.createdNs),tr.context!==void 0&&InvitationV1_Context.encode(tr.context,er.uint32(34).fork()).ldelim(),tr.consentProofPayload!==void 0&&ConsentProofPayload.encode(tr.consentProofPayload,er.uint32(42).fork()).ldelim(),er},decode(tr,er){const rr=tr instanceof _m0.Reader?tr:new _m0.Reader(tr);let nr=er===void 0?rr.len:rr.pos+er;const ir=createBaseConversationReference();for(;rr.pos<nr;){const sr=rr.uint32();switch(sr>>>3){case 1:ir.topic=rr.string();break;case 2:ir.peerAddress=rr.string();break;case 3:ir.createdNs=rr.uint64();break;case 4:ir.context=InvitationV1_Context.decode(rr,rr.uint32());break;case 5:ir.consentProofPayload=ConsentProofPayload.decode(rr,rr.uint32());break;default:rr.skipType(sr&7);break}}return ir},fromJSON(tr){return{topic:isSet$6(tr.topic)?String(tr.topic):"",peerAddress:isSet$6(tr.peerAddress)?String(tr.peerAddress):"",createdNs:isSet$6(tr.createdNs)?Long.fromValue(tr.createdNs):Long.UZERO,context:isSet$6(tr.context)?InvitationV1_Context.fromJSON(tr.context):void 0,consentProofPayload:isSet$6(tr.consentProofPayload)?ConsentProofPayload.fromJSON(tr.consentProofPayload):void 0}},toJSON(tr){const er={};return tr.topic!==void 0&&(er.topic=tr.topic),tr.peerAddress!==void 0&&(er.peerAddress=tr.peerAddress),tr.createdNs!==void 0&&(er.createdNs=(tr.createdNs||Long.UZERO).toString()),tr.context!==void 0&&(er.context=tr.context?InvitationV1_Context.toJSON(tr.context):void 0),tr.consentProofPayload!==void 0&&(er.consentProofPayload=tr.consentProofPayload?ConsentProofPayload.toJSON(tr.consentProofPayload):void 0),er},fromPartial(tr){var er,rr;const nr=createBaseConversationReference();return nr.topic=(er=tr.topic)!==null&&er!==void 0?er:"",nr.peerAddress=(rr=tr.peerAddress)!==null&&rr!==void 0?rr:"",nr.createdNs=tr.createdNs!==void 0&&tr.createdNs!==null?Long.fromValue(tr.createdNs):Long.UZERO,nr.context=tr.context!==void 0&&tr.context!==null?InvitationV1_Context.fromPartial(tr.context):void 0,nr.consentProofPayload=tr.consentProofPayload!==void 0&&tr.consentProofPayload!==null?ConsentProofPayload.fromPartial(tr.consentProofPayload):void 0,nr}};_m0.util.Long!==Long&&(_m0.util.Long=Long,_m0.configure());function isSet$6(tr){return tr!=null}function createBaseMessageHeaderV1(){return{sender:void 0,recipient:void 0,timestamp:Long.UZERO}}const MessageHeaderV1={encode(tr,er=_m0.Writer.create()){return tr.sender!==void 0&&PublicKeyBundle.encode(tr.sender,er.uint32(10).fork()).ldelim(),tr.recipient!==void 0&&PublicKeyBundle.encode(tr.recipient,er.uint32(18).fork()).ldelim(),tr.timestamp.isZero()||er.uint32(24).uint64(tr.timestamp),er},decode(tr,er){const rr=tr instanceof _m0.Reader?tr:new _m0.Reader(tr);let nr=er===void 0?rr.len:rr.pos+er;const ir=createBaseMessageHeaderV1();for(;rr.pos<nr;){const sr=rr.uint32();switch(sr>>>3){case 1:ir.sender=PublicKeyBundle.decode(rr,rr.uint32());break;case 2:ir.recipient=PublicKeyBundle.decode(rr,rr.uint32());break;case 3:ir.timestamp=rr.uint64();break;default:rr.skipType(sr&7);break}}return ir},fromJSON(tr){return{sender:isSet$5(tr.sender)?PublicKeyBundle.fromJSON(tr.sender):void 0,recipient:isSet$5(tr.recipient)?PublicKeyBundle.fromJSON(tr.recipient):void 0,timestamp:isSet$5(tr.timestamp)?Long.fromValue(tr.timestamp):Long.UZERO}},toJSON(tr){const er={};return tr.sender!==void 0&&(er.sender=tr.sender?PublicKeyBundle.toJSON(tr.sender):void 0),tr.recipient!==void 0&&(er.recipient=tr.recipient?PublicKeyBundle.toJSON(tr.recipient):void 0),tr.timestamp!==void 0&&(er.timestamp=(tr.timestamp||Long.UZERO).toString()),er},fromPartial(tr){const er=createBaseMessageHeaderV1();return er.sender=tr.sender!==void 0&&tr.sender!==null?PublicKeyBundle.fromPartial(tr.sender):void 0,er.recipient=tr.recipient!==void 0&&tr.recipient!==null?PublicKeyBundle.fromPartial(tr.recipient):void 0,er.timestamp=tr.timestamp!==void 0&&tr.timestamp!==null?Long.fromValue(tr.timestamp):Long.UZERO,er}};function createBaseMessageV1(){return{headerBytes:new Uint8Array,ciphertext:void 0}}const MessageV1={encode(tr,er=_m0.Writer.create()){return tr.headerBytes.length!==0&&er.uint32(10).bytes(tr.headerBytes),tr.ciphertext!==void 0&&Ciphertext.encode(tr.ciphertext,er.uint32(18).fork()).ldelim(),er},decode(tr,er){const rr=tr instanceof _m0.Reader?tr:new _m0.Reader(tr);let nr=er===void 0?rr.len:rr.pos+er;const ir=createBaseMessageV1();for(;rr.pos<nr;){const sr=rr.uint32();switch(sr>>>3){case 1:ir.headerBytes=rr.bytes();break;case 2:ir.ciphertext=Ciphertext.decode(rr,rr.uint32());break;default:rr.skipType(sr&7);break}}return ir},fromJSON(tr){return{headerBytes:isSet$5(tr.headerBytes)?bytesFromBase64$3(tr.headerBytes):new Uint8Array,ciphertext:isSet$5(tr.ciphertext)?Ciphertext.fromJSON(tr.ciphertext):void 0}},toJSON(tr){const er={};return tr.headerBytes!==void 0&&(er.headerBytes=base64FromBytes$3(tr.headerBytes!==void 0?tr.headerBytes:new Uint8Array)),tr.ciphertext!==void 0&&(er.ciphertext=tr.ciphertext?Ciphertext.toJSON(tr.ciphertext):void 0),er},fromPartial(tr){var er;const rr=createBaseMessageV1();return rr.headerBytes=(er=tr.headerBytes)!==null&&er!==void 0?er:new Uint8Array,rr.ciphertext=tr.ciphertext!==void 0&&tr.ciphertext!==null?Ciphertext.fromPartial(tr.ciphertext):void 0,rr}};function createBaseMessageHeaderV2(){return{createdNs:Long.UZERO,topic:""}}const MessageHeaderV2={encode(tr,er=_m0.Writer.create()){return tr.createdNs.isZero()||er.uint32(8).uint64(tr.createdNs),tr.topic!==""&&er.uint32(18).string(tr.topic),er},decode(tr,er){const rr=tr instanceof _m0.Reader?tr:new _m0.Reader(tr);let nr=er===void 0?rr.len:rr.pos+er;const ir=createBaseMessageHeaderV2();for(;rr.pos<nr;){const sr=rr.uint32();switch(sr>>>3){case 1:ir.createdNs=rr.uint64();break;case 2:ir.topic=rr.string();break;default:rr.skipType(sr&7);break}}return ir},fromJSON(tr){return{createdNs:isSet$5(tr.createdNs)?Long.fromValue(tr.createdNs):Long.UZERO,topic:isSet$5(tr.topic)?String(tr.topic):""}},toJSON(tr){const er={};return tr.createdNs!==void 0&&(er.createdNs=(tr.createdNs||Long.UZERO).toString()),tr.topic!==void 0&&(er.topic=tr.topic),er},fromPartial(tr){var er;const rr=createBaseMessageHeaderV2();return rr.createdNs=tr.createdNs!==void 0&&tr.createdNs!==null?Long.fromValue(tr.createdNs):Long.UZERO,rr.topic=(er=tr.topic)!==null&&er!==void 0?er:"",rr}};function createBaseMessageV2(){return{headerBytes:new Uint8Array,ciphertext:void 0,senderHmac:void 0,shouldPush:void 0}}const MessageV2={encode(tr,er=_m0.Writer.create()){return tr.headerBytes.length!==0&&er.uint32(10).bytes(tr.headerBytes),tr.ciphertext!==void 0&&Ciphertext.encode(tr.ciphertext,er.uint32(18).fork()).ldelim(),tr.senderHmac!==void 0&&er.uint32(26).bytes(tr.senderHmac),tr.shouldPush!==void 0&&er.uint32(32).bool(tr.shouldPush),er},decode(tr,er){const rr=tr instanceof _m0.Reader?tr:new _m0.Reader(tr);let nr=er===void 0?rr.len:rr.pos+er;const ir=createBaseMessageV2();for(;rr.pos<nr;){const sr=rr.uint32();switch(sr>>>3){case 1:ir.headerBytes=rr.bytes();break;case 2:ir.ciphertext=Ciphertext.decode(rr,rr.uint32());break;case 3:ir.senderHmac=rr.bytes();break;case 4:ir.shouldPush=rr.bool();break;default:rr.skipType(sr&7);break}}return ir},fromJSON(tr){return{headerBytes:isSet$5(tr.headerBytes)?bytesFromBase64$3(tr.headerBytes):new Uint8Array,ciphertext:isSet$5(tr.ciphertext)?Ciphertext.fromJSON(tr.ciphertext):void 0,senderHmac:isSet$5(tr.senderHmac)?bytesFromBase64$3(tr.senderHmac):void 0,shouldPush:isSet$5(tr.shouldPush)?!!tr.shouldPush:void 0}},toJSON(tr){const er={};return tr.headerBytes!==void 0&&(er.headerBytes=base64FromBytes$3(tr.headerBytes!==void 0?tr.headerBytes:new Uint8Array)),tr.ciphertext!==void 0&&(er.ciphertext=tr.ciphertext?Ciphertext.toJSON(tr.ciphertext):void 0),tr.senderHmac!==void 0&&(er.senderHmac=tr.senderHmac!==void 0?base64FromBytes$3(tr.senderHmac):void 0),tr.shouldPush!==void 0&&(er.shouldPush=tr.shouldPush),er},fromPartial(tr){var er,rr,nr;const ir=createBaseMessageV2();return ir.headerBytes=(er=tr.headerBytes)!==null&&er!==void 0?er:new Uint8Array,ir.ciphertext=tr.ciphertext!==void 0&&tr.ciphertext!==null?Ciphertext.fromPartial(tr.ciphertext):void 0,ir.senderHmac=(rr=tr.senderHmac)!==null&&rr!==void 0?rr:void 0,ir.shouldPush=(nr=tr.shouldPush)!==null&&nr!==void 0?nr:void 0,ir}};function createBaseMessage(){return{v1:void 0,v2:void 0}}const Message$1={encode(tr,er=_m0.Writer.create()){return tr.v1!==void 0&&MessageV1.encode(tr.v1,er.uint32(10).fork()).ldelim(),tr.v2!==void 0&&MessageV2.encode(tr.v2,er.uint32(18).fork()).ldelim(),er},decode(tr,er){const rr=tr instanceof _m0.Reader?tr:new _m0.Reader(tr);let nr=er===void 0?rr.len:rr.pos+er;const ir=createBaseMessage();for(;rr.pos<nr;){const sr=rr.uint32();switch(sr>>>3){case 1:ir.v1=MessageV1.decode(rr,rr.uint32());break;case 2:ir.v2=MessageV2.decode(rr,rr.uint32());break;default:rr.skipType(sr&7);break}}return ir},fromJSON(tr){return{v1:isSet$5(tr.v1)?MessageV1.fromJSON(tr.v1):void 0,v2:isSet$5(tr.v2)?MessageV2.fromJSON(tr.v2):void 0}},toJSON(tr){const er={};return tr.v1!==void 0&&(er.v1=tr.v1?MessageV1.toJSON(tr.v1):void 0),tr.v2!==void 0&&(er.v2=tr.v2?MessageV2.toJSON(tr.v2):void 0),er},fromPartial(tr){const er=createBaseMessage();return er.v1=tr.v1!==void 0&&tr.v1!==null?MessageV1.fromPartial(tr.v1):void 0,er.v2=tr.v2!==void 0&&tr.v2!==null?MessageV2.fromPartial(tr.v2):void 0,er}};function createBaseDecodedMessage(){return{id:"",messageVersion:"",senderAddress:"",recipientAddress:void 0,sentNs:Long.UZERO,contentTopic:"",conversation:void 0,contentBytes:new Uint8Array}}const DecodedMessage={encode(tr,er=_m0.Writer.create()){return tr.id!==""&&er.uint32(10).string(tr.id),tr.messageVersion!==""&&er.uint32(18).string(tr.messageVersion),tr.senderAddress!==""&&er.uint32(26).string(tr.senderAddress),tr.recipientAddress!==void 0&&er.uint32(34).string(tr.recipientAddress),tr.sentNs.isZero()||er.uint32(40).uint64(tr.sentNs),tr.contentTopic!==""&&er.uint32(50).string(tr.contentTopic),tr.conversation!==void 0&&ConversationReference.encode(tr.conversation,er.uint32(58).fork()).ldelim(),tr.contentBytes.length!==0&&er.uint32(66).bytes(tr.contentBytes),er},decode(tr,er){const rr=tr instanceof _m0.Reader?tr:new _m0.Reader(tr);let nr=er===void 0?rr.len:rr.pos+er;const ir=createBaseDecodedMessage();for(;rr.pos<nr;){const sr=rr.uint32();switch(sr>>>3){case 1:ir.id=rr.string();break;case 2:ir.messageVersion=rr.string();break;case 3:ir.senderAddress=rr.string();break;case 4:ir.recipientAddress=rr.string();break;case 5:ir.sentNs=rr.uint64();break;case 6:ir.contentTopic=rr.string();break;case 7:ir.conversation=ConversationReference.decode(rr,rr.uint32());break;case 8:ir.contentBytes=rr.bytes();break;default:rr.skipType(sr&7);break}}return ir},fromJSON(tr){return{id:isSet$5(tr.id)?String(tr.id):"",messageVersion:isSet$5(tr.messageVersion)?String(tr.messageVersion):"",senderAddress:isSet$5(tr.senderAddress)?String(tr.senderAddress):"",recipientAddress:isSet$5(tr.recipientAddress)?String(tr.recipientAddress):void 0,sentNs:isSet$5(tr.sentNs)?Long.fromValue(tr.sentNs):Long.UZERO,contentTopic:isSet$5(tr.contentTopic)?String(tr.contentTopic):"",conversation:isSet$5(tr.conversation)?ConversationReference.fromJSON(tr.conversation):void 0,contentBytes:isSet$5(tr.contentBytes)?bytesFromBase64$3(tr.contentBytes):new Uint8Array}},toJSON(tr){const er={};return tr.id!==void 0&&(er.id=tr.id),tr.messageVersion!==void 0&&(er.messageVersion=tr.messageVersion),tr.senderAddress!==void 0&&(er.senderAddress=tr.senderAddress),tr.recipientAddress!==void 0&&(er.recipientAddress=tr.recipientAddress),tr.sentNs!==void 0&&(er.sentNs=(tr.sentNs||Long.UZERO).toString()),tr.contentTopic!==void 0&&(er.contentTopic=tr.contentTopic),tr.conversation!==void 0&&(er.conversation=tr.conversation?ConversationReference.toJSON(tr.conversation):void 0),tr.contentBytes!==void 0&&(er.contentBytes=base64FromBytes$3(tr.contentBytes!==void 0?tr.contentBytes:new Uint8Array)),er},fromPartial(tr){var er,rr,nr,ir,sr,or;const ar=createBaseDecodedMessage();return ar.id=(er=tr.id)!==null&&er!==void 0?er:"",ar.messageVersion=(rr=tr.messageVersion)!==null&&rr!==void 0?rr:"",ar.senderAddress=(nr=tr.senderAddress)!==null&&nr!==void 0?nr:"",ar.recipientAddress=(ir=tr.recipientAddress)!==null&&ir!==void 0?ir:void 0,ar.sentNs=tr.sentNs!==void 0&&tr.sentNs!==null?Long.fromValue(tr.sentNs):Long.UZERO,ar.contentTopic=(sr=tr.contentTopic)!==null&&sr!==void 0?sr:"",ar.conversation=tr.conversation!==void 0&&tr.conversation!==null?ConversationReference.fromPartial(tr.conversation):void 0,ar.contentBytes=(or=tr.contentBytes)!==null&&or!==void 0?or:new Uint8Array,ar}};var globalThis$t=(()=>{if(typeof globalThis$t<"u")return globalThis$t;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof globalThis$t<"u")return globalThis$t;throw"Unable to locate global object"})();function bytesFromBase64$3(tr){if(globalThis$t.Buffer)return Uint8Array.from(globalThis$t.Buffer.from(tr,"base64"));{const er=globalThis$t.atob(tr),rr=new Uint8Array(er.length);for(let nr=0;nr<er.length;++nr)rr[nr]=er.charCodeAt(nr);return rr}}function base64FromBytes$3(tr){if(globalThis$t.Buffer)return globalThis$t.Buffer.from(tr).toString("base64");{const er=[];return tr.forEach(rr=>{er.push(String.fromCharCode(rr))}),globalThis$t.btoa(er.join(""))}}_m0.util.Long!==Long&&(_m0.util.Long=Long,_m0.configure());function isSet$5(tr){return tr!=null}var Compression$2;(function(tr){tr[tr.COMPRESSION_DEFLATE=0]="COMPRESSION_DEFLATE",tr[tr.COMPRESSION_GZIP=1]="COMPRESSION_GZIP",tr[tr.UNRECOGNIZED=-1]="UNRECOGNIZED"})(Compression$2||(Compression$2={}));function compressionFromJSON(tr){switch(tr){case 0:case"COMPRESSION_DEFLATE":return Compression$2.COMPRESSION_DEFLATE;case 1:case"COMPRESSION_GZIP":return Compression$2.COMPRESSION_GZIP;case-1:case"UNRECOGNIZED":default:return Compression$2.UNRECOGNIZED}}function compressionToJSON(tr){switch(tr){case Compression$2.COMPRESSION_DEFLATE:return"COMPRESSION_DEFLATE";case Compression$2.COMPRESSION_GZIP:return"COMPRESSION_GZIP";case Compression$2.UNRECOGNIZED:default:return"UNRECOGNIZED"}}function createBaseContentTypeId(){return{authorityId:"",typeId:"",versionMajor:0,versionMinor:0}}const ContentTypeId={encode(tr,er=_m0.Writer.create()){return tr.authorityId!==""&&er.uint32(10).string(tr.authorityId),tr.typeId!==""&&er.uint32(18).string(tr.typeId),tr.versionMajor!==0&&er.uint32(24).uint32(tr.versionMajor),tr.versionMinor!==0&&er.uint32(32).uint32(tr.versionMinor),er},decode(tr,er){const rr=tr instanceof _m0.Reader?tr:new _m0.Reader(tr);let nr=er===void 0?rr.len:rr.pos+er;const ir=createBaseContentTypeId();for(;rr.pos<nr;){const sr=rr.uint32();switch(sr>>>3){case 1:ir.authorityId=rr.string();break;case 2:ir.typeId=rr.string();break;case 3:ir.versionMajor=rr.uint32();break;case 4:ir.versionMinor=rr.uint32();break;default:rr.skipType(sr&7);break}}return ir},fromJSON(tr){return{authorityId:isSet$4(tr.authorityId)?String(tr.authorityId):"",typeId:isSet$4(tr.typeId)?String(tr.typeId):"",versionMajor:isSet$4(tr.versionMajor)?Number(tr.versionMajor):0,versionMinor:isSet$4(tr.versionMinor)?Number(tr.versionMinor):0}},toJSON(tr){const er={};return tr.authorityId!==void 0&&(er.authorityId=tr.authorityId),tr.typeId!==void 0&&(er.typeId=tr.typeId),tr.versionMajor!==void 0&&(er.versionMajor=Math.round(tr.versionMajor)),tr.versionMinor!==void 0&&(er.versionMinor=Math.round(tr.versionMinor)),er},fromPartial(tr){var er,rr,nr,ir;const sr=createBaseContentTypeId();return sr.authorityId=(er=tr.authorityId)!==null&&er!==void 0?er:"",sr.typeId=(rr=tr.typeId)!==null&&rr!==void 0?rr:"",sr.versionMajor=(nr=tr.versionMajor)!==null&&nr!==void 0?nr:0,sr.versionMinor=(ir=tr.versionMinor)!==null&&ir!==void 0?ir:0,sr}};function createBaseEncodedContent(){return{type:void 0,parameters:{},fallback:void 0,compression:void 0,content:new Uint8Array}}const EncodedContent={encode(tr,er=_m0.Writer.create()){return tr.type!==void 0&&ContentTypeId.encode(tr.type,er.uint32(10).fork()).ldelim(),Object.entries(tr.parameters).forEach(([rr,nr])=>{EncodedContent_ParametersEntry.encode({key:rr,value:nr},er.uint32(18).fork()).ldelim()}),tr.fallback!==void 0&&er.uint32(26).string(tr.fallback),tr.compression!==void 0&&er.uint32(40).int32(tr.compression),tr.content.length!==0&&er.uint32(34).bytes(tr.content),er},decode(tr,er){const rr=tr instanceof _m0.Reader?tr:new _m0.Reader(tr);let nr=er===void 0?rr.len:rr.pos+er;const ir=createBaseEncodedContent();for(;rr.pos<nr;){const sr=rr.uint32();switch(sr>>>3){case 1:ir.type=ContentTypeId.decode(rr,rr.uint32());break;case 2:const or=EncodedContent_ParametersEntry.decode(rr,rr.uint32());or.value!==void 0&&(ir.parameters[or.key]=or.value);break;case 3:ir.fallback=rr.string();break;case 5:ir.compression=rr.int32();break;case 4:ir.content=rr.bytes();break;default:rr.skipType(sr&7);break}}return ir},fromJSON(tr){return{type:isSet$4(tr.type)?ContentTypeId.fromJSON(tr.type):void 0,parameters:isObject$5(tr.parameters)?Object.entries(tr.parameters).reduce((er,[rr,nr])=>(er[rr]=String(nr),er),{}):{},fallback:isSet$4(tr.fallback)?String(tr.fallback):void 0,compression:isSet$4(tr.compression)?compressionFromJSON(tr.compression):void 0,content:isSet$4(tr.content)?bytesFromBase64$2(tr.content):new Uint8Array}},toJSON(tr){const er={};return tr.type!==void 0&&(er.type=tr.type?ContentTypeId.toJSON(tr.type):void 0),er.parameters={},tr.parameters&&Object.entries(tr.parameters).forEach(([rr,nr])=>{er.parameters[rr]=nr}),tr.fallback!==void 0&&(er.fallback=tr.fallback),tr.compression!==void 0&&(er.compression=tr.compression!==void 0?compressionToJSON(tr.compression):void 0),tr.content!==void 0&&(er.content=base64FromBytes$2(tr.content!==void 0?tr.content:new Uint8Array)),er},fromPartial(tr){var er,rr,nr,ir;const sr=createBaseEncodedContent();return sr.type=tr.type!==void 0&&tr.type!==null?ContentTypeId.fromPartial(tr.type):void 0,sr.parameters=Object.entries((er=tr.parameters)!==null&&er!==void 0?er:{}).reduce((or,[ar,cr])=>(cr!==void 0&&(or[ar]=String(cr)),or),{}),sr.fallback=(rr=tr.fallback)!==null&&rr!==void 0?rr:void 0,sr.compression=(nr=tr.compression)!==null&&nr!==void 0?nr:void 0,sr.content=(ir=tr.content)!==null&&ir!==void 0?ir:new Uint8Array,sr}};function createBaseEncodedContent_ParametersEntry(){return{key:"",value:""}}const EncodedContent_ParametersEntry={encode(tr,er=_m0.Writer.create()){return tr.key!==""&&er.uint32(10).string(tr.key),tr.value!==""&&er.uint32(18).string(tr.value),er},decode(tr,er){const rr=tr instanceof _m0.Reader?tr:new _m0.Reader(tr);let nr=er===void 0?rr.len:rr.pos+er;const ir=createBaseEncodedContent_ParametersEntry();for(;rr.pos<nr;){const sr=rr.uint32();switch(sr>>>3){case 1:ir.key=rr.string();break;case 2:ir.value=rr.string();break;default:rr.skipType(sr&7);break}}return ir},fromJSON(tr){return{key:isSet$4(tr.key)?String(tr.key):"",value:isSet$4(tr.value)?String(tr.value):""}},toJSON(tr){const er={};return tr.key!==void 0&&(er.key=tr.key),tr.value!==void 0&&(er.value=tr.value),er},fromPartial(tr){var er,rr;const nr=createBaseEncodedContent_ParametersEntry();return nr.key=(er=tr.key)!==null&&er!==void 0?er:"",nr.value=(rr=tr.value)!==null&&rr!==void 0?rr:"",nr}};function createBaseSignedContent(){return{payload:new Uint8Array,sender:void 0,signature:void 0}}const SignedContent={encode(tr,er=_m0.Writer.create()){return tr.payload.length!==0&&er.uint32(10).bytes(tr.payload),tr.sender!==void 0&&SignedPublicKeyBundle.encode(tr.sender,er.uint32(18).fork()).ldelim(),tr.signature!==void 0&&Signature$5.encode(tr.signature,er.uint32(26).fork()).ldelim(),er},decode(tr,er){const rr=tr instanceof _m0.Reader?tr:new _m0.Reader(tr);let nr=er===void 0?rr.len:rr.pos+er;const ir=createBaseSignedContent();for(;rr.pos<nr;){const sr=rr.uint32();switch(sr>>>3){case 1:ir.payload=rr.bytes();break;case 2:ir.sender=SignedPublicKeyBundle.decode(rr,rr.uint32());break;case 3:ir.signature=Signature$5.decode(rr,rr.uint32());break;default:rr.skipType(sr&7);break}}return ir},fromJSON(tr){return{payload:isSet$4(tr.payload)?bytesFromBase64$2(tr.payload):new Uint8Array,sender:isSet$4(tr.sender)?SignedPublicKeyBundle.fromJSON(tr.sender):void 0,signature:isSet$4(tr.signature)?Signature$5.fromJSON(tr.signature):void 0}},toJSON(tr){const er={};return tr.payload!==void 0&&(er.payload=base64FromBytes$2(tr.payload!==void 0?tr.payload:new Uint8Array)),tr.sender!==void 0&&(er.sender=tr.sender?SignedPublicKeyBundle.toJSON(tr.sender):void 0),tr.signature!==void 0&&(er.signature=tr.signature?Signature$5.toJSON(tr.signature):void 0),er},fromPartial(tr){var er;const rr=createBaseSignedContent();return rr.payload=(er=tr.payload)!==null&&er!==void 0?er:new Uint8Array,rr.sender=tr.sender!==void 0&&tr.sender!==null?SignedPublicKeyBundle.fromPartial(tr.sender):void 0,rr.signature=tr.signature!==void 0&&tr.signature!==null?Signature$5.fromPartial(tr.signature):void 0,rr}};var globalThis$s=(()=>{if(typeof globalThis$s<"u")return globalThis$s;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof globalThis$s<"u")return globalThis$s;throw"Unable to locate global object"})();function bytesFromBase64$2(tr){if(globalThis$s.Buffer)return Uint8Array.from(globalThis$s.Buffer.from(tr,"base64"));{const er=globalThis$s.atob(tr),rr=new Uint8Array(er.length);for(let nr=0;nr<er.length;++nr)rr[nr]=er.charCodeAt(nr);return rr}}function base64FromBytes$2(tr){if(globalThis$s.Buffer)return globalThis$s.Buffer.from(tr).toString("base64");{const er=[];return tr.forEach(rr=>{er.push(String.fromCharCode(rr))}),globalThis$s.btoa(er.join(""))}}_m0.util.Long!==Long&&(_m0.util.Long=Long,_m0.configure());function isObject$5(tr){return typeof tr=="object"&&tr!==null}function isSet$4(tr){return tr!=null}var globalThis$r=(()=>{if(typeof globalThis$r<"u")return globalThis$r;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof globalThis$r<"u")return globalThis$r;throw"Unable to locate global object"})();_m0.util.Long!==Long&&(_m0.util.Long=Long,_m0.configure());_m0.util.Long!==Long&&(_m0.util.Long=Long,_m0.configure());function createBaseSignedPrivateKey(){return{createdNs:Long.UZERO,secp256k1:void 0,publicKey:void 0}}const SignedPrivateKey={encode(tr,er=_m0.Writer.create()){return tr.createdNs.isZero()||er.uint32(8).uint64(tr.createdNs),tr.secp256k1!==void 0&&SignedPrivateKey_Secp256k1.encode(tr.secp256k1,er.uint32(18).fork()).ldelim(),tr.publicKey!==void 0&&SignedPublicKey.encode(tr.publicKey,er.uint32(26).fork()).ldelim(),er},decode(tr,er){const rr=tr instanceof _m0.Reader?tr:new _m0.Reader(tr);let nr=er===void 0?rr.len:rr.pos+er;const ir=createBaseSignedPrivateKey();for(;rr.pos<nr;){const sr=rr.uint32();switch(sr>>>3){case 1:ir.createdNs=rr.uint64();break;case 2:ir.secp256k1=SignedPrivateKey_Secp256k1.decode(rr,rr.uint32());break;case 3:ir.publicKey=SignedPublicKey.decode(rr,rr.uint32());break;default:rr.skipType(sr&7);break}}return ir},fromJSON(tr){return{createdNs:isSet$3(tr.createdNs)?Long.fromValue(tr.createdNs):Long.UZERO,secp256k1:isSet$3(tr.secp256k1)?SignedPrivateKey_Secp256k1.fromJSON(tr.secp256k1):void 0,publicKey:isSet$3(tr.publicKey)?SignedPublicKey.fromJSON(tr.publicKey):void 0}},toJSON(tr){const er={};return tr.createdNs!==void 0&&(er.createdNs=(tr.createdNs||Long.UZERO).toString()),tr.secp256k1!==void 0&&(er.secp256k1=tr.secp256k1?SignedPrivateKey_Secp256k1.toJSON(tr.secp256k1):void 0),tr.publicKey!==void 0&&(er.publicKey=tr.publicKey?SignedPublicKey.toJSON(tr.publicKey):void 0),er},fromPartial(tr){const er=createBaseSignedPrivateKey();return er.createdNs=tr.createdNs!==void 0&&tr.createdNs!==null?Long.fromValue(tr.createdNs):Long.UZERO,er.secp256k1=tr.secp256k1!==void 0&&tr.secp256k1!==null?SignedPrivateKey_Secp256k1.fromPartial(tr.secp256k1):void 0,er.publicKey=tr.publicKey!==void 0&&tr.publicKey!==null?SignedPublicKey.fromPartial(tr.publicKey):void 0,er}};function createBaseSignedPrivateKey_Secp256k1(){return{bytes:new Uint8Array}}const SignedPrivateKey_Secp256k1={encode(tr,er=_m0.Writer.create()){return tr.bytes.length!==0&&er.uint32(10).bytes(tr.bytes),er},decode(tr,er){const rr=tr instanceof _m0.Reader?tr:new _m0.Reader(tr);let nr=er===void 0?rr.len:rr.pos+er;const ir=createBaseSignedPrivateKey_Secp256k1();for(;rr.pos<nr;){const sr=rr.uint32();switch(sr>>>3){case 1:ir.bytes=rr.bytes();break;default:rr.skipType(sr&7);break}}return ir},fromJSON(tr){return{bytes:isSet$3(tr.bytes)?bytesFromBase64$1(tr.bytes):new Uint8Array}},toJSON(tr){const er={};return tr.bytes!==void 0&&(er.bytes=base64FromBytes$1(tr.bytes!==void 0?tr.bytes:new Uint8Array)),er},fromPartial(tr){var er;const rr=createBaseSignedPrivateKey_Secp256k1();return rr.bytes=(er=tr.bytes)!==null&&er!==void 0?er:new Uint8Array,rr}};function createBasePrivateKeyBundleV2(){return{identityKey:void 0,preKeys:[]}}const PrivateKeyBundleV2={encode(tr,er=_m0.Writer.create()){tr.identityKey!==void 0&&SignedPrivateKey.encode(tr.identityKey,er.uint32(10).fork()).ldelim();for(const rr of tr.preKeys)SignedPrivateKey.encode(rr,er.uint32(18).fork()).ldelim();return er},decode(tr,er){const rr=tr instanceof _m0.Reader?tr:new _m0.Reader(tr);let nr=er===void 0?rr.len:rr.pos+er;const ir=createBasePrivateKeyBundleV2();for(;rr.pos<nr;){const sr=rr.uint32();switch(sr>>>3){case 1:ir.identityKey=SignedPrivateKey.decode(rr,rr.uint32());break;case 2:ir.preKeys.push(SignedPrivateKey.decode(rr,rr.uint32()));break;default:rr.skipType(sr&7);break}}return ir},fromJSON(tr){return{identityKey:isSet$3(tr.identityKey)?SignedPrivateKey.fromJSON(tr.identityKey):void 0,preKeys:Array.isArray(tr==null?void 0:tr.preKeys)?tr.preKeys.map(er=>SignedPrivateKey.fromJSON(er)):[]}},toJSON(tr){const er={};return tr.identityKey!==void 0&&(er.identityKey=tr.identityKey?SignedPrivateKey.toJSON(tr.identityKey):void 0),tr.preKeys?er.preKeys=tr.preKeys.map(rr=>rr?SignedPrivateKey.toJSON(rr):void 0):er.preKeys=[],er},fromPartial(tr){var er;const rr=createBasePrivateKeyBundleV2();return rr.identityKey=tr.identityKey!==void 0&&tr.identityKey!==null?SignedPrivateKey.fromPartial(tr.identityKey):void 0,rr.preKeys=((er=tr.preKeys)===null||er===void 0?void 0:er.map(nr=>SignedPrivateKey.fromPartial(nr)))||[],rr}};function createBasePrivateKey(){return{timestamp:Long.UZERO,secp256k1:void 0,publicKey:void 0}}const PrivateKey={encode(tr,er=_m0.Writer.create()){return tr.timestamp.isZero()||er.uint32(8).uint64(tr.timestamp),tr.secp256k1!==void 0&&PrivateKey_Secp256k1.encode(tr.secp256k1,er.uint32(18).fork()).ldelim(),tr.publicKey!==void 0&&PublicKey.encode(tr.publicKey,er.uint32(26).fork()).ldelim(),er},decode(tr,er){const rr=tr instanceof _m0.Reader?tr:new _m0.Reader(tr);let nr=er===void 0?rr.len:rr.pos+er;const ir=createBasePrivateKey();for(;rr.pos<nr;){const sr=rr.uint32();switch(sr>>>3){case 1:ir.timestamp=rr.uint64();break;case 2:ir.secp256k1=PrivateKey_Secp256k1.decode(rr,rr.uint32());break;case 3:ir.publicKey=PublicKey.decode(rr,rr.uint32());break;default:rr.skipType(sr&7);break}}return ir},fromJSON(tr){return{timestamp:isSet$3(tr.timestamp)?Long.fromValue(tr.timestamp):Long.UZERO,secp256k1:isSet$3(tr.secp256k1)?PrivateKey_Secp256k1.fromJSON(tr.secp256k1):void 0,publicKey:isSet$3(tr.publicKey)?PublicKey.fromJSON(tr.publicKey):void 0}},toJSON(tr){const er={};return tr.timestamp!==void 0&&(er.timestamp=(tr.timestamp||Long.UZERO).toString()),tr.secp256k1!==void 0&&(er.secp256k1=tr.secp256k1?PrivateKey_Secp256k1.toJSON(tr.secp256k1):void 0),tr.publicKey!==void 0&&(er.publicKey=tr.publicKey?PublicKey.toJSON(tr.publicKey):void 0),er},fromPartial(tr){const er=createBasePrivateKey();return er.timestamp=tr.timestamp!==void 0&&tr.timestamp!==null?Long.fromValue(tr.timestamp):Long.UZERO,er.secp256k1=tr.secp256k1!==void 0&&tr.secp256k1!==null?PrivateKey_Secp256k1.fromPartial(tr.secp256k1):void 0,er.publicKey=tr.publicKey!==void 0&&tr.publicKey!==null?PublicKey.fromPartial(tr.publicKey):void 0,er}};function createBasePrivateKey_Secp256k1(){return{bytes:new Uint8Array}}const PrivateKey_Secp256k1={encode(tr,er=_m0.Writer.create()){return tr.bytes.length!==0&&er.uint32(10).bytes(tr.bytes),er},decode(tr,er){const rr=tr instanceof _m0.Reader?tr:new _m0.Reader(tr);let nr=er===void 0?rr.len:rr.pos+er;const ir=createBasePrivateKey_Secp256k1();for(;rr.pos<nr;){const sr=rr.uint32();switch(sr>>>3){case 1:ir.bytes=rr.bytes();break;default:rr.skipType(sr&7);break}}return ir},fromJSON(tr){return{bytes:isSet$3(tr.bytes)?bytesFromBase64$1(tr.bytes):new Uint8Array}},toJSON(tr){const er={};return tr.bytes!==void 0&&(er.bytes=base64FromBytes$1(tr.bytes!==void 0?tr.bytes:new Uint8Array)),er},fromPartial(tr){var er;const rr=createBasePrivateKey_Secp256k1();return rr.bytes=(er=tr.bytes)!==null&&er!==void 0?er:new Uint8Array,rr}};function createBasePrivateKeyBundleV1(){return{identityKey:void 0,preKeys:[]}}const PrivateKeyBundleV1={encode(tr,er=_m0.Writer.create()){tr.identityKey!==void 0&&PrivateKey.encode(tr.identityKey,er.uint32(10).fork()).ldelim();for(const rr of tr.preKeys)PrivateKey.encode(rr,er.uint32(18).fork()).ldelim();return er},decode(tr,er){const rr=tr instanceof _m0.Reader?tr:new _m0.Reader(tr);let nr=er===void 0?rr.len:rr.pos+er;const ir=createBasePrivateKeyBundleV1();for(;rr.pos<nr;){const sr=rr.uint32();switch(sr>>>3){case 1:ir.identityKey=PrivateKey.decode(rr,rr.uint32());break;case 2:ir.preKeys.push(PrivateKey.decode(rr,rr.uint32()));break;default:rr.skipType(sr&7);break}}return ir},fromJSON(tr){return{identityKey:isSet$3(tr.identityKey)?PrivateKey.fromJSON(tr.identityKey):void 0,preKeys:Array.isArray(tr==null?void 0:tr.preKeys)?tr.preKeys.map(er=>PrivateKey.fromJSON(er)):[]}},toJSON(tr){const er={};return tr.identityKey!==void 0&&(er.identityKey=tr.identityKey?PrivateKey.toJSON(tr.identityKey):void 0),tr.preKeys?er.preKeys=tr.preKeys.map(rr=>rr?PrivateKey.toJSON(rr):void 0):er.preKeys=[],er},fromPartial(tr){var er;const rr=createBasePrivateKeyBundleV1();return rr.identityKey=tr.identityKey!==void 0&&tr.identityKey!==null?PrivateKey.fromPartial(tr.identityKey):void 0,rr.preKeys=((er=tr.preKeys)===null||er===void 0?void 0:er.map(nr=>PrivateKey.fromPartial(nr)))||[],rr}};function createBasePrivateKeyBundle(){return{v1:void 0,v2:void 0}}const PrivateKeyBundle={encode(tr,er=_m0.Writer.create()){return tr.v1!==void 0&&PrivateKeyBundleV1.encode(tr.v1,er.uint32(10).fork()).ldelim(),tr.v2!==void 0&&PrivateKeyBundleV2.encode(tr.v2,er.uint32(18).fork()).ldelim(),er},decode(tr,er){const rr=tr instanceof _m0.Reader?tr:new _m0.Reader(tr);let nr=er===void 0?rr.len:rr.pos+er;const ir=createBasePrivateKeyBundle();for(;rr.pos<nr;){const sr=rr.uint32();switch(sr>>>3){case 1:ir.v1=PrivateKeyBundleV1.decode(rr,rr.uint32());break;case 2:ir.v2=PrivateKeyBundleV2.decode(rr,rr.uint32());break;default:rr.skipType(sr&7);break}}return ir},fromJSON(tr){return{v1:isSet$3(tr.v1)?PrivateKeyBundleV1.fromJSON(tr.v1):void 0,v2:isSet$3(tr.v2)?PrivateKeyBundleV2.fromJSON(tr.v2):void 0}},toJSON(tr){const er={};return tr.v1!==void 0&&(er.v1=tr.v1?PrivateKeyBundleV1.toJSON(tr.v1):void 0),tr.v2!==void 0&&(er.v2=tr.v2?PrivateKeyBundleV2.toJSON(tr.v2):void 0),er},fromPartial(tr){const er=createBasePrivateKeyBundle();return er.v1=tr.v1!==void 0&&tr.v1!==null?PrivateKeyBundleV1.fromPartial(tr.v1):void 0,er.v2=tr.v2!==void 0&&tr.v2!==null?PrivateKeyBundleV2.fromPartial(tr.v2):void 0,er}};function createBaseEncryptedPrivateKeyBundleV1(){return{walletPreKey:new Uint8Array,ciphertext:void 0}}const EncryptedPrivateKeyBundleV1={encode(tr,er=_m0.Writer.create()){return tr.walletPreKey.length!==0&&er.uint32(10).bytes(tr.walletPreKey),tr.ciphertext!==void 0&&Ciphertext.encode(tr.ciphertext,er.uint32(18).fork()).ldelim(),er},decode(tr,er){const rr=tr instanceof _m0.Reader?tr:new _m0.Reader(tr);let nr=er===void 0?rr.len:rr.pos+er;const ir=createBaseEncryptedPrivateKeyBundleV1();for(;rr.pos<nr;){const sr=rr.uint32();switch(sr>>>3){case 1:ir.walletPreKey=rr.bytes();break;case 2:ir.ciphertext=Ciphertext.decode(rr,rr.uint32());break;default:rr.skipType(sr&7);break}}return ir},fromJSON(tr){return{walletPreKey:isSet$3(tr.walletPreKey)?bytesFromBase64$1(tr.walletPreKey):new Uint8Array,ciphertext:isSet$3(tr.ciphertext)?Ciphertext.fromJSON(tr.ciphertext):void 0}},toJSON(tr){const er={};return tr.walletPreKey!==void 0&&(er.walletPreKey=base64FromBytes$1(tr.walletPreKey!==void 0?tr.walletPreKey:new Uint8Array)),tr.ciphertext!==void 0&&(er.ciphertext=tr.ciphertext?Ciphertext.toJSON(tr.ciphertext):void 0),er},fromPartial(tr){var er;const rr=createBaseEncryptedPrivateKeyBundleV1();return rr.walletPreKey=(er=tr.walletPreKey)!==null&&er!==void 0?er:new Uint8Array,rr.ciphertext=tr.ciphertext!==void 0&&tr.ciphertext!==null?Ciphertext.fromPartial(tr.ciphertext):void 0,rr}};function createBaseEncryptedPrivateKeyBundle(){return{v1:void 0}}const EncryptedPrivateKeyBundle={encode(tr,er=_m0.Writer.create()){return tr.v1!==void 0&&EncryptedPrivateKeyBundleV1.encode(tr.v1,er.uint32(10).fork()).ldelim(),er},decode(tr,er){const rr=tr instanceof _m0.Reader?tr:new _m0.Reader(tr);let nr=er===void 0?rr.len:rr.pos+er;const ir=createBaseEncryptedPrivateKeyBundle();for(;rr.pos<nr;){const sr=rr.uint32();switch(sr>>>3){case 1:ir.v1=EncryptedPrivateKeyBundleV1.decode(rr,rr.uint32());break;default:rr.skipType(sr&7);break}}return ir},fromJSON(tr){return{v1:isSet$3(tr.v1)?EncryptedPrivateKeyBundleV1.fromJSON(tr.v1):void 0}},toJSON(tr){const er={};return tr.v1!==void 0&&(er.v1=tr.v1?EncryptedPrivateKeyBundleV1.toJSON(tr.v1):void 0),er},fromPartial(tr){const er=createBaseEncryptedPrivateKeyBundle();return er.v1=tr.v1!==void 0&&tr.v1!==null?EncryptedPrivateKeyBundleV1.fromPartial(tr.v1):void 0,er}};var globalThis$q=(()=>{if(typeof globalThis$q<"u")return globalThis$q;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof globalThis$q<"u")return globalThis$q;throw"Unable to locate global object"})();function bytesFromBase64$1(tr){if(globalThis$q.Buffer)return Uint8Array.from(globalThis$q.Buffer.from(tr,"base64"));{const er=globalThis$q.atob(tr),rr=new Uint8Array(er.length);for(let nr=0;nr<er.length;++nr)rr[nr]=er.charCodeAt(nr);return rr}}function base64FromBytes$1(tr){if(globalThis$q.Buffer)return globalThis$q.Buffer.from(tr).toString("base64");{const er=[];return tr.forEach(rr=>{er.push(String.fromCharCode(rr))}),globalThis$q.btoa(er.join(""))}}_m0.util.Long!==Long&&(_m0.util.Long=Long,_m0.configure());function isSet$3(tr){return tr!=null}function createBaseContactBundleV1(){return{keyBundle:void 0}}const ContactBundleV1={encode(tr,er=_m0.Writer.create()){return tr.keyBundle!==void 0&&PublicKeyBundle.encode(tr.keyBundle,er.uint32(10).fork()).ldelim(),er},decode(tr,er){const rr=tr instanceof _m0.Reader?tr:new _m0.Reader(tr);let nr=er===void 0?rr.len:rr.pos+er;const ir=createBaseContactBundleV1();for(;rr.pos<nr;){const sr=rr.uint32();switch(sr>>>3){case 1:ir.keyBundle=PublicKeyBundle.decode(rr,rr.uint32());break;default:rr.skipType(sr&7);break}}return ir},fromJSON(tr){return{keyBundle:isSet$2(tr.keyBundle)?PublicKeyBundle.fromJSON(tr.keyBundle):void 0}},toJSON(tr){const er={};return tr.keyBundle!==void 0&&(er.keyBundle=tr.keyBundle?PublicKeyBundle.toJSON(tr.keyBundle):void 0),er},fromPartial(tr){const er=createBaseContactBundleV1();return er.keyBundle=tr.keyBundle!==void 0&&tr.keyBundle!==null?PublicKeyBundle.fromPartial(tr.keyBundle):void 0,er}};function createBaseContactBundleV2(){return{keyBundle:void 0}}const ContactBundleV2={encode(tr,er=_m0.Writer.create()){return tr.keyBundle!==void 0&&SignedPublicKeyBundle.encode(tr.keyBundle,er.uint32(10).fork()).ldelim(),er},decode(tr,er){const rr=tr instanceof _m0.Reader?tr:new _m0.Reader(tr);let nr=er===void 0?rr.len:rr.pos+er;const ir=createBaseContactBundleV2();for(;rr.pos<nr;){const sr=rr.uint32();switch(sr>>>3){case 1:ir.keyBundle=SignedPublicKeyBundle.decode(rr,rr.uint32());break;default:rr.skipType(sr&7);break}}return ir},fromJSON(tr){return{keyBundle:isSet$2(tr.keyBundle)?SignedPublicKeyBundle.fromJSON(tr.keyBundle):void 0}},toJSON(tr){const er={};return tr.keyBundle!==void 0&&(er.keyBundle=tr.keyBundle?SignedPublicKeyBundle.toJSON(tr.keyBundle):void 0),er},fromPartial(tr){const er=createBaseContactBundleV2();return er.keyBundle=tr.keyBundle!==void 0&&tr.keyBundle!==null?SignedPublicKeyBundle.fromPartial(tr.keyBundle):void 0,er}};function createBaseContactBundle(){return{v1:void 0,v2:void 0}}const ContactBundle={encode(tr,er=_m0.Writer.create()){return tr.v1!==void 0&&ContactBundleV1.encode(tr.v1,er.uint32(10).fork()).ldelim(),tr.v2!==void 0&&ContactBundleV2.encode(tr.v2,er.uint32(18).fork()).ldelim(),er},decode(tr,er){const rr=tr instanceof _m0.Reader?tr:new _m0.Reader(tr);let nr=er===void 0?rr.len:rr.pos+er;const ir=createBaseContactBundle();for(;rr.pos<nr;){const sr=rr.uint32();switch(sr>>>3){case 1:ir.v1=ContactBundleV1.decode(rr,rr.uint32());break;case 2:ir.v2=ContactBundleV2.decode(rr,rr.uint32());break;default:rr.skipType(sr&7);break}}return ir},fromJSON(tr){return{v1:isSet$2(tr.v1)?ContactBundleV1.fromJSON(tr.v1):void 0,v2:isSet$2(tr.v2)?ContactBundleV2.fromJSON(tr.v2):void 0}},toJSON(tr){const er={};return tr.v1!==void 0&&(er.v1=tr.v1?ContactBundleV1.toJSON(tr.v1):void 0),tr.v2!==void 0&&(er.v2=tr.v2?ContactBundleV2.toJSON(tr.v2):void 0),er},fromPartial(tr){const er=createBaseContactBundle();return er.v1=tr.v1!==void 0&&tr.v1!==null?ContactBundleV1.fromPartial(tr.v1):void 0,er.v2=tr.v2!==void 0&&tr.v2!==null?ContactBundleV2.fromPartial(tr.v2):void 0,er}};_m0.util.Long!==Long&&(_m0.util.Long=Long,_m0.configure());function isSet$2(tr){return tr!=null}const protobufPackage="xmtp.keystore_api.v1";var ErrorCode$1;(function(tr){tr[tr.ERROR_CODE_UNSPECIFIED=0]="ERROR_CODE_UNSPECIFIED",tr[tr.ERROR_CODE_INVALID_INPUT=1]="ERROR_CODE_INVALID_INPUT",tr[tr.ERROR_CODE_NO_MATCHING_PREKEY=2]="ERROR_CODE_NO_MATCHING_PREKEY",tr[tr.UNRECOGNIZED=-1]="UNRECOGNIZED"})(ErrorCode$1||(ErrorCode$1={}));function errorCodeFromJSON(tr){switch(tr){case 0:case"ERROR_CODE_UNSPECIFIED":return ErrorCode$1.ERROR_CODE_UNSPECIFIED;case 1:case"ERROR_CODE_INVALID_INPUT":return ErrorCode$1.ERROR_CODE_INVALID_INPUT;case 2:case"ERROR_CODE_NO_MATCHING_PREKEY":return ErrorCode$1.ERROR_CODE_NO_MATCHING_PREKEY;case-1:case"UNRECOGNIZED":default:return ErrorCode$1.UNRECOGNIZED}}function errorCodeToJSON(tr){switch(tr){case ErrorCode$1.ERROR_CODE_UNSPECIFIED:return"ERROR_CODE_UNSPECIFIED";case ErrorCode$1.ERROR_CODE_INVALID_INPUT:return"ERROR_CODE_INVALID_INPUT";case ErrorCode$1.ERROR_CODE_NO_MATCHING_PREKEY:return"ERROR_CODE_NO_MATCHING_PREKEY";case ErrorCode$1.UNRECOGNIZED:default:return"UNRECOGNIZED"}}var JobType$1;(function(tr){tr[tr.JOB_TYPE_UNSPECIFIED=0]="JOB_TYPE_UNSPECIFIED",tr[tr.JOB_TYPE_REFRESH_V1=1]="JOB_TYPE_REFRESH_V1",tr[tr.JOB_TYPE_REFRESH_V2=2]="JOB_TYPE_REFRESH_V2",tr[tr.JOB_TYPE_REFRESH_PPPP=3]="JOB_TYPE_REFRESH_PPPP",tr[tr.UNRECOGNIZED=-1]="UNRECOGNIZED"})(JobType$1||(JobType$1={}));function jobTypeFromJSON(tr){switch(tr){case 0:case"JOB_TYPE_UNSPECIFIED":return JobType$1.JOB_TYPE_UNSPECIFIED;case 1:case"JOB_TYPE_REFRESH_V1":return JobType$1.JOB_TYPE_REFRESH_V1;case 2:case"JOB_TYPE_REFRESH_V2":return JobType$1.JOB_TYPE_REFRESH_V2;case 3:case"JOB_TYPE_REFRESH_PPPP":return JobType$1.JOB_TYPE_REFRESH_PPPP;case-1:case"UNRECOGNIZED":default:return JobType$1.UNRECOGNIZED}}function jobTypeToJSON(tr){switch(tr){case JobType$1.JOB_TYPE_UNSPECIFIED:return"JOB_TYPE_UNSPECIFIED";case JobType$1.JOB_TYPE_REFRESH_V1:return"JOB_TYPE_REFRESH_V1";case JobType$1.JOB_TYPE_REFRESH_V2:return"JOB_TYPE_REFRESH_V2";case JobType$1.JOB_TYPE_REFRESH_PPPP:return"JOB_TYPE_REFRESH_PPPP";case JobType$1.UNRECOGNIZED:default:return"UNRECOGNIZED"}}var GetKeystoreStatusResponse_KeystoreStatus$1;(function(tr){tr[tr.KEYSTORE_STATUS_UNSPECIFIED=0]="KEYSTORE_STATUS_UNSPECIFIED",tr[tr.KEYSTORE_STATUS_UNINITIALIZED=1]="KEYSTORE_STATUS_UNINITIALIZED",tr[tr.KEYSTORE_STATUS_INITIALIZED=2]="KEYSTORE_STATUS_INITIALIZED",tr[tr.UNRECOGNIZED=-1]="UNRECOGNIZED"})(GetKeystoreStatusResponse_KeystoreStatus$1||(GetKeystoreStatusResponse_KeystoreStatus$1={}));function getKeystoreStatusResponse_KeystoreStatusFromJSON(tr){switch(tr){case 0:case"KEYSTORE_STATUS_UNSPECIFIED":return GetKeystoreStatusResponse_KeystoreStatus$1.KEYSTORE_STATUS_UNSPECIFIED;case 1:case"KEYSTORE_STATUS_UNINITIALIZED":return GetKeystoreStatusResponse_KeystoreStatus$1.KEYSTORE_STATUS_UNINITIALIZED;case 2:case"KEYSTORE_STATUS_INITIALIZED":return GetKeystoreStatusResponse_KeystoreStatus$1.KEYSTORE_STATUS_INITIALIZED;case-1:case"UNRECOGNIZED":default:return GetKeystoreStatusResponse_KeystoreStatus$1.UNRECOGNIZED}}function getKeystoreStatusResponse_KeystoreStatusToJSON(tr){switch(tr){case GetKeystoreStatusResponse_KeystoreStatus$1.KEYSTORE_STATUS_UNSPECIFIED:return"KEYSTORE_STATUS_UNSPECIFIED";case GetKeystoreStatusResponse_KeystoreStatus$1.KEYSTORE_STATUS_UNINITIALIZED:return"KEYSTORE_STATUS_UNINITIALIZED";case GetKeystoreStatusResponse_KeystoreStatus$1.KEYSTORE_STATUS_INITIALIZED:return"KEYSTORE_STATUS_INITIALIZED";case GetKeystoreStatusResponse_KeystoreStatus$1.UNRECOGNIZED:default:return"UNRECOGNIZED"}}function createBaseKeystoreError(){return{message:"",code:0}}const KeystoreError={encode(tr,er=_m0.Writer.create()){return tr.message!==""&&er.uint32(10).string(tr.message),tr.code!==0&&er.uint32(16).int32(tr.code),er},decode(tr,er){const rr=tr instanceof _m0.Reader?tr:new _m0.Reader(tr);let nr=er===void 0?rr.len:rr.pos+er;const ir=createBaseKeystoreError();for(;rr.pos<nr;){const sr=rr.uint32();switch(sr>>>3){case 1:ir.message=rr.string();break;case 2:ir.code=rr.int32();break;default:rr.skipType(sr&7);break}}return ir},fromJSON(tr){return{message:isSet$1(tr.message)?String(tr.message):"",code:isSet$1(tr.code)?errorCodeFromJSON(tr.code):0}},toJSON(tr){const er={};return tr.message!==void 0&&(er.message=tr.message),tr.code!==void 0&&(er.code=errorCodeToJSON(tr.code)),er},fromPartial(tr){var er,rr;const nr=createBaseKeystoreError();return nr.message=(er=tr.message)!==null&&er!==void 0?er:"",nr.code=(rr=tr.code)!==null&&rr!==void 0?rr:0,nr}};function createBaseDecryptV1Request(){return{requests:[]}}const DecryptV1Request={encode(tr,er=_m0.Writer.create()){for(const rr of tr.requests)DecryptV1Request_Request.encode(rr,er.uint32(10).fork()).ldelim();return er},decode(tr,er){const rr=tr instanceof _m0.Reader?tr:new _m0.Reader(tr);let nr=er===void 0?rr.len:rr.pos+er;const ir=createBaseDecryptV1Request();for(;rr.pos<nr;){const sr=rr.uint32();switch(sr>>>3){case 1:ir.requests.push(DecryptV1Request_Request.decode(rr,rr.uint32()));break;default:rr.skipType(sr&7);break}}return ir},fromJSON(tr){return{requests:Array.isArray(tr==null?void 0:tr.requests)?tr.requests.map(er=>DecryptV1Request_Request.fromJSON(er)):[]}},toJSON(tr){const er={};return tr.requests?er.requests=tr.requests.map(rr=>rr?DecryptV1Request_Request.toJSON(rr):void 0):er.requests=[],er},fromPartial(tr){var er;const rr=createBaseDecryptV1Request();return rr.requests=((er=tr.requests)===null||er===void 0?void 0:er.map(nr=>DecryptV1Request_Request.fromPartial(nr)))||[],rr}};function createBaseDecryptV1Request_Request(){return{payload:void 0,peerKeys:void 0,headerBytes:new Uint8Array,isSender:!1}}const DecryptV1Request_Request={encode(tr,er=_m0.Writer.create()){return tr.payload!==void 0&&Ciphertext.encode(tr.payload,er.uint32(10).fork()).ldelim(),tr.peerKeys!==void 0&&PublicKeyBundle.encode(tr.peerKeys,er.uint32(18).fork()).ldelim(),tr.headerBytes.length!==0&&er.uint32(26).bytes(tr.headerBytes),tr.isSender===!0&&er.uint32(32).bool(tr.isSender),er},decode(tr,er){const rr=tr instanceof _m0.Reader?tr:new _m0.Reader(tr);let nr=er===void 0?rr.len:rr.pos+er;const ir=createBaseDecryptV1Request_Request();for(;rr.pos<nr;){const sr=rr.uint32();switch(sr>>>3){case 1:ir.payload=Ciphertext.decode(rr,rr.uint32());break;case 2:ir.peerKeys=PublicKeyBundle.decode(rr,rr.uint32());break;case 3:ir.headerBytes=rr.bytes();break;case 4:ir.isSender=rr.bool();break;default:rr.skipType(sr&7);break}}return ir},fromJSON(tr){return{payload:isSet$1(tr.payload)?Ciphertext.fromJSON(tr.payload):void 0,peerKeys:isSet$1(tr.peerKeys)?PublicKeyBundle.fromJSON(tr.peerKeys):void 0,headerBytes:isSet$1(tr.headerBytes)?bytesFromBase64(tr.headerBytes):new Uint8Array,isSender:isSet$1(tr.isSender)?!!tr.isSender:!1}},toJSON(tr){const er={};return tr.payload!==void 0&&(er.payload=tr.payload?Ciphertext.toJSON(tr.payload):void 0),tr.peerKeys!==void 0&&(er.peerKeys=tr.peerKeys?PublicKeyBundle.toJSON(tr.peerKeys):void 0),tr.headerBytes!==void 0&&(er.headerBytes=base64FromBytes(tr.headerBytes!==void 0?tr.headerBytes:new Uint8Array)),tr.isSender!==void 0&&(er.isSender=tr.isSender),er},fromPartial(tr){var er,rr;const nr=createBaseDecryptV1Request_Request();return nr.payload=tr.payload!==void 0&&tr.payload!==null?Ciphertext.fromPartial(tr.payload):void 0,nr.peerKeys=tr.peerKeys!==void 0&&tr.peerKeys!==null?PublicKeyBundle.fromPartial(tr.peerKeys):void 0,nr.headerBytes=(er=tr.headerBytes)!==null&&er!==void 0?er:new Uint8Array,nr.isSender=(rr=tr.isSender)!==null&&rr!==void 0?rr:!1,nr}};function createBaseDecryptResponse(){return{responses:[]}}const DecryptResponse={encode(tr,er=_m0.Writer.create()){for(const rr of tr.responses)DecryptResponse_Response.encode(rr,er.uint32(10).fork()).ldelim();return er},decode(tr,er){const rr=tr instanceof _m0.Reader?tr:new _m0.Reader(tr);let nr=er===void 0?rr.len:rr.pos+er;const ir=createBaseDecryptResponse();for(;rr.pos<nr;){const sr=rr.uint32();switch(sr>>>3){case 1:ir.responses.push(DecryptResponse_Response.decode(rr,rr.uint32()));break;default:rr.skipType(sr&7);break}}return ir},fromJSON(tr){return{responses:Array.isArray(tr==null?void 0:tr.responses)?tr.responses.map(er=>DecryptResponse_Response.fromJSON(er)):[]}},toJSON(tr){const er={};return tr.responses?er.responses=tr.responses.map(rr=>rr?DecryptResponse_Response.toJSON(rr):void 0):er.responses=[],er},fromPartial(tr){var er;const rr=createBaseDecryptResponse();return rr.responses=((er=tr.responses)===null||er===void 0?void 0:er.map(nr=>DecryptResponse_Response.fromPartial(nr)))||[],rr}};function createBaseDecryptResponse_Response(){return{result:void 0,error:void 0}}const DecryptResponse_Response={encode(tr,er=_m0.Writer.create()){return tr.result!==void 0&&DecryptResponse_Response_Success.encode(tr.result,er.uint32(10).fork()).ldelim(),tr.error!==void 0&&KeystoreError.encode(tr.error,er.uint32(18).fork()).ldelim(),er},decode(tr,er){const rr=tr instanceof _m0.Reader?tr:new _m0.Reader(tr);let nr=er===void 0?rr.len:rr.pos+er;const ir=createBaseDecryptResponse_Response();for(;rr.pos<nr;){const sr=rr.uint32();switch(sr>>>3){case 1:ir.result=DecryptResponse_Response_Success.decode(rr,rr.uint32());break;case 2:ir.error=KeystoreError.decode(rr,rr.uint32());break;default:rr.skipType(sr&7);break}}return ir},fromJSON(tr){return{result:isSet$1(tr.result)?DecryptResponse_Response_Success.fromJSON(tr.result):void 0,error:isSet$1(tr.error)?KeystoreError.fromJSON(tr.error):void 0}},toJSON(tr){const er={};return tr.result!==void 0&&(er.result=tr.result?DecryptResponse_Response_Success.toJSON(tr.result):void 0),tr.error!==void 0&&(er.error=tr.error?KeystoreError.toJSON(tr.error):void 0),er},fromPartial(tr){const er=createBaseDecryptResponse_Response();return er.result=tr.result!==void 0&&tr.result!==null?DecryptResponse_Response_Success.fromPartial(tr.result):void 0,er.error=tr.error!==void 0&&tr.error!==null?KeystoreError.fromPartial(tr.error):void 0,er}};function createBaseDecryptResponse_Response_Success(){return{decrypted:new Uint8Array}}const DecryptResponse_Response_Success={encode(tr,er=_m0.Writer.create()){return tr.decrypted.length!==0&&er.uint32(10).bytes(tr.decrypted),er},decode(tr,er){const rr=tr instanceof _m0.Reader?tr:new _m0.Reader(tr);let nr=er===void 0?rr.len:rr.pos+er;const ir=createBaseDecryptResponse_Response_Success();for(;rr.pos<nr;){const sr=rr.uint32();switch(sr>>>3){case 1:ir.decrypted=rr.bytes();break;default:rr.skipType(sr&7);break}}return ir},fromJSON(tr){return{decrypted:isSet$1(tr.decrypted)?bytesFromBase64(tr.decrypted):new Uint8Array}},toJSON(tr){const er={};return tr.decrypted!==void 0&&(er.decrypted=base64FromBytes(tr.decrypted!==void 0?tr.decrypted:new Uint8Array)),er},fromPartial(tr){var er;const rr=createBaseDecryptResponse_Response_Success();return rr.decrypted=(er=tr.decrypted)!==null&&er!==void 0?er:new Uint8Array,rr}};function createBaseDecryptV2Request(){return{requests:[]}}const DecryptV2Request={encode(tr,er=_m0.Writer.create()){for(const rr of tr.requests)DecryptV2Request_Request.encode(rr,er.uint32(10).fork()).ldelim();return er},decode(tr,er){const rr=tr instanceof _m0.Reader?tr:new _m0.Reader(tr);let nr=er===void 0?rr.len:rr.pos+er;const ir=createBaseDecryptV2Request();for(;rr.pos<nr;){const sr=rr.uint32();switch(sr>>>3){case 1:ir.requests.push(DecryptV2Request_Request.decode(rr,rr.uint32()));break;default:rr.skipType(sr&7);break}}return ir},fromJSON(tr){return{requests:Array.isArray(tr==null?void 0:tr.requests)?tr.requests.map(er=>DecryptV2Request_Request.fromJSON(er)):[]}},toJSON(tr){const er={};return tr.requests?er.requests=tr.requests.map(rr=>rr?DecryptV2Request_Request.toJSON(rr):void 0):er.requests=[],er},fromPartial(tr){var er;const rr=createBaseDecryptV2Request();return rr.requests=((er=tr.requests)===null||er===void 0?void 0:er.map(nr=>DecryptV2Request_Request.fromPartial(nr)))||[],rr}};function createBaseDecryptV2Request_Request(){return{payload:void 0,headerBytes:new Uint8Array,contentTopic:""}}const DecryptV2Request_Request={encode(tr,er=_m0.Writer.create()){return tr.payload!==void 0&&Ciphertext.encode(tr.payload,er.uint32(10).fork()).ldelim(),tr.headerBytes.length!==0&&er.uint32(18).bytes(tr.headerBytes),tr.contentTopic!==""&&er.uint32(26).string(tr.contentTopic),er},decode(tr,er){const rr=tr instanceof _m0.Reader?tr:new _m0.Reader(tr);let nr=er===void 0?rr.len:rr.pos+er;const ir=createBaseDecryptV2Request_Request();for(;rr.pos<nr;){const sr=rr.uint32();switch(sr>>>3){case 1:ir.payload=Ciphertext.decode(rr,rr.uint32());break;case 2:ir.headerBytes=rr.bytes();break;case 3:ir.contentTopic=rr.string();break;default:rr.skipType(sr&7);break}}return ir},fromJSON(tr){return{payload:isSet$1(tr.payload)?Ciphertext.fromJSON(tr.payload):void 0,headerBytes:isSet$1(tr.headerBytes)?bytesFromBase64(tr.headerBytes):new Uint8Array,contentTopic:isSet$1(tr.contentTopic)?String(tr.contentTopic):""}},toJSON(tr){const er={};return tr.payload!==void 0&&(er.payload=tr.payload?Ciphertext.toJSON(tr.payload):void 0),tr.headerBytes!==void 0&&(er.headerBytes=base64FromBytes(tr.headerBytes!==void 0?tr.headerBytes:new Uint8Array)),tr.contentTopic!==void 0&&(er.contentTopic=tr.contentTopic),er},fromPartial(tr){var er,rr;const nr=createBaseDecryptV2Request_Request();return nr.payload=tr.payload!==void 0&&tr.payload!==null?Ciphertext.fromPartial(tr.payload):void 0,nr.headerBytes=(er=tr.headerBytes)!==null&&er!==void 0?er:new Uint8Array,nr.contentTopic=(rr=tr.contentTopic)!==null&&rr!==void 0?rr:"",nr}};function createBaseEncryptV1Request(){return{requests:[]}}const EncryptV1Request={encode(tr,er=_m0.Writer.create()){for(const rr of tr.requests)EncryptV1Request_Request.encode(rr,er.uint32(10).fork()).ldelim();return er},decode(tr,er){const rr=tr instanceof _m0.Reader?tr:new _m0.Reader(tr);let nr=er===void 0?rr.len:rr.pos+er;const ir=createBaseEncryptV1Request();for(;rr.pos<nr;){const sr=rr.uint32();switch(sr>>>3){case 1:ir.requests.push(EncryptV1Request_Request.decode(rr,rr.uint32()));break;default:rr.skipType(sr&7);break}}return ir},fromJSON(tr){return{requests:Array.isArray(tr==null?void 0:tr.requests)?tr.requests.map(er=>EncryptV1Request_Request.fromJSON(er)):[]}},toJSON(tr){const er={};return tr.requests?er.requests=tr.requests.map(rr=>rr?EncryptV1Request_Request.toJSON(rr):void 0):er.requests=[],er},fromPartial(tr){var er;const rr=createBaseEncryptV1Request();return rr.requests=((er=tr.requests)===null||er===void 0?void 0:er.map(nr=>EncryptV1Request_Request.fromPartial(nr)))||[],rr}};function createBaseEncryptV1Request_Request(){return{recipient:void 0,payload:new Uint8Array,headerBytes:new Uint8Array}}const EncryptV1Request_Request={encode(tr,er=_m0.Writer.create()){return tr.recipient!==void 0&&PublicKeyBundle.encode(tr.recipient,er.uint32(10).fork()).ldelim(),tr.payload.length!==0&&er.uint32(18).bytes(tr.payload),tr.headerBytes.length!==0&&er.uint32(26).bytes(tr.headerBytes),er},decode(tr,er){const rr=tr instanceof _m0.Reader?tr:new _m0.Reader(tr);let nr=er===void 0?rr.len:rr.pos+er;const ir=createBaseEncryptV1Request_Request();for(;rr.pos<nr;){const sr=rr.uint32();switch(sr>>>3){case 1:ir.recipient=PublicKeyBundle.decode(rr,rr.uint32());break;case 2:ir.payload=rr.bytes();break;case 3:ir.headerBytes=rr.bytes();break;default:rr.skipType(sr&7);break}}return ir},fromJSON(tr){return{recipient:isSet$1(tr.recipient)?PublicKeyBundle.fromJSON(tr.recipient):void 0,payload:isSet$1(tr.payload)?bytesFromBase64(tr.payload):new Uint8Array,headerBytes:isSet$1(tr.headerBytes)?bytesFromBase64(tr.headerBytes):new Uint8Array}},toJSON(tr){const er={};return tr.recipient!==void 0&&(er.recipient=tr.recipient?PublicKeyBundle.toJSON(tr.recipient):void 0),tr.payload!==void 0&&(er.payload=base64FromBytes(tr.payload!==void 0?tr.payload:new Uint8Array)),tr.headerBytes!==void 0&&(er.headerBytes=base64FromBytes(tr.headerBytes!==void 0?tr.headerBytes:new Uint8Array)),er},fromPartial(tr){var er,rr;const nr=createBaseEncryptV1Request_Request();return nr.recipient=tr.recipient!==void 0&&tr.recipient!==null?PublicKeyBundle.fromPartial(tr.recipient):void 0,nr.payload=(er=tr.payload)!==null&&er!==void 0?er:new Uint8Array,nr.headerBytes=(rr=tr.headerBytes)!==null&&rr!==void 0?rr:new Uint8Array,nr}};function createBaseEncryptResponse(){return{responses:[]}}const EncryptResponse={encode(tr,er=_m0.Writer.create()){for(const rr of tr.responses)EncryptResponse_Response.encode(rr,er.uint32(10).fork()).ldelim();return er},decode(tr,er){const rr=tr instanceof _m0.Reader?tr:new _m0.Reader(tr);let nr=er===void 0?rr.len:rr.pos+er;const ir=createBaseEncryptResponse();for(;rr.pos<nr;){const sr=rr.uint32();switch(sr>>>3){case 1:ir.responses.push(EncryptResponse_Response.decode(rr,rr.uint32()));break;default:rr.skipType(sr&7);break}}return ir},fromJSON(tr){return{responses:Array.isArray(tr==null?void 0:tr.responses)?tr.responses.map(er=>EncryptResponse_Response.fromJSON(er)):[]}},toJSON(tr){const er={};return tr.responses?er.responses=tr.responses.map(rr=>rr?EncryptResponse_Response.toJSON(rr):void 0):er.responses=[],er},fromPartial(tr){var er;const rr=createBaseEncryptResponse();return rr.responses=((er=tr.responses)===null||er===void 0?void 0:er.map(nr=>EncryptResponse_Response.fromPartial(nr)))||[],rr}};function createBaseEncryptResponse_Response(){return{result:void 0,error:void 0}}const EncryptResponse_Response={encode(tr,er=_m0.Writer.create()){return tr.result!==void 0&&EncryptResponse_Response_Success.encode(tr.result,er.uint32(10).fork()).ldelim(),tr.error!==void 0&&KeystoreError.encode(tr.error,er.uint32(18).fork()).ldelim(),er},decode(tr,er){const rr=tr instanceof _m0.Reader?tr:new _m0.Reader(tr);let nr=er===void 0?rr.len:rr.pos+er;const ir=createBaseEncryptResponse_Response();for(;rr.pos<nr;){const sr=rr.uint32();switch(sr>>>3){case 1:ir.result=EncryptResponse_Response_Success.decode(rr,rr.uint32());break;case 2:ir.error=KeystoreError.decode(rr,rr.uint32());break;default:rr.skipType(sr&7);break}}return ir},fromJSON(tr){return{result:isSet$1(tr.result)?EncryptResponse_Response_Success.fromJSON(tr.result):void 0,error:isSet$1(tr.error)?KeystoreError.fromJSON(tr.error):void 0}},toJSON(tr){const er={};return tr.result!==void 0&&(er.result=tr.result?EncryptResponse_Response_Success.toJSON(tr.result):void 0),tr.error!==void 0&&(er.error=tr.error?KeystoreError.toJSON(tr.error):void 0),er},fromPartial(tr){const er=createBaseEncryptResponse_Response();return er.result=tr.result!==void 0&&tr.result!==null?EncryptResponse_Response_Success.fromPartial(tr.result):void 0,er.error=tr.error!==void 0&&tr.error!==null?KeystoreError.fromPartial(tr.error):void 0,er}};function createBaseEncryptResponse_Response_Success(){return{encrypted:void 0,senderHmac:new Uint8Array}}const EncryptResponse_Response_Success={encode(tr,er=_m0.Writer.create()){return tr.encrypted!==void 0&&Ciphertext.encode(tr.encrypted,er.uint32(10).fork()).ldelim(),tr.senderHmac.length!==0&&er.uint32(18).bytes(tr.senderHmac),er},decode(tr,er){const rr=tr instanceof _m0.Reader?tr:new _m0.Reader(tr);let nr=er===void 0?rr.len:rr.pos+er;const ir=createBaseEncryptResponse_Response_Success();for(;rr.pos<nr;){const sr=rr.uint32();switch(sr>>>3){case 1:ir.encrypted=Ciphertext.decode(rr,rr.uint32());break;case 2:ir.senderHmac=rr.bytes();break;default:rr.skipType(sr&7);break}}return ir},fromJSON(tr){return{encrypted:isSet$1(tr.encrypted)?Ciphertext.fromJSON(tr.encrypted):void 0,senderHmac:isSet$1(tr.senderHmac)?bytesFromBase64(tr.senderHmac):new Uint8Array}},toJSON(tr){const er={};return tr.encrypted!==void 0&&(er.encrypted=tr.encrypted?Ciphertext.toJSON(tr.encrypted):void 0),tr.senderHmac!==void 0&&(er.senderHmac=base64FromBytes(tr.senderHmac!==void 0?tr.senderHmac:new Uint8Array)),er},fromPartial(tr){var er;const rr=createBaseEncryptResponse_Response_Success();return rr.encrypted=tr.encrypted!==void 0&&tr.encrypted!==null?Ciphertext.fromPartial(tr.encrypted):void 0,rr.senderHmac=(er=tr.senderHmac)!==null&&er!==void 0?er:new Uint8Array,rr}};function createBaseEncryptV2Request(){return{requests:[]}}const EncryptV2Request={encode(tr,er=_m0.Writer.create()){for(const rr of tr.requests)EncryptV2Request_Request.encode(rr,er.uint32(10).fork()).ldelim();return er},decode(tr,er){const rr=tr instanceof _m0.Reader?tr:new _m0.Reader(tr);let nr=er===void 0?rr.len:rr.pos+er;const ir=createBaseEncryptV2Request();for(;rr.pos<nr;){const sr=rr.uint32();switch(sr>>>3){case 1:ir.requests.push(EncryptV2Request_Request.decode(rr,rr.uint32()));break;default:rr.skipType(sr&7);break}}return ir},fromJSON(tr){return{requests:Array.isArray(tr==null?void 0:tr.requests)?tr.requests.map(er=>EncryptV2Request_Request.fromJSON(er)):[]}},toJSON(tr){const er={};return tr.requests?er.requests=tr.requests.map(rr=>rr?EncryptV2Request_Request.toJSON(rr):void 0):er.requests=[],er},fromPartial(tr){var er;const rr=createBaseEncryptV2Request();return rr.requests=((er=tr.requests)===null||er===void 0?void 0:er.map(nr=>EncryptV2Request_Request.fromPartial(nr)))||[],rr}};function createBaseEncryptV2Request_Request(){return{payload:new Uint8Array,headerBytes:new Uint8Array,contentTopic:""}}const EncryptV2Request_Request={encode(tr,er=_m0.Writer.create()){return tr.payload.length!==0&&er.uint32(10).bytes(tr.payload),tr.headerBytes.length!==0&&er.uint32(18).bytes(tr.headerBytes),tr.contentTopic!==""&&er.uint32(26).string(tr.contentTopic),er},decode(tr,er){const rr=tr instanceof _m0.Reader?tr:new _m0.Reader(tr);let nr=er===void 0?rr.len:rr.pos+er;const ir=createBaseEncryptV2Request_Request();for(;rr.pos<nr;){const sr=rr.uint32();switch(sr>>>3){case 1:ir.payload=rr.bytes();break;case 2:ir.headerBytes=rr.bytes();break;case 3:ir.contentTopic=rr.string();break;default:rr.skipType(sr&7);break}}return ir},fromJSON(tr){return{payload:isSet$1(tr.payload)?bytesFromBase64(tr.payload):new Uint8Array,headerBytes:isSet$1(tr.headerBytes)?bytesFromBase64(tr.headerBytes):new Uint8Array,contentTopic:isSet$1(tr.contentTopic)?String(tr.contentTopic):""}},toJSON(tr){const er={};return tr.payload!==void 0&&(er.payload=base64FromBytes(tr.payload!==void 0?tr.payload:new Uint8Array)),tr.headerBytes!==void 0&&(er.headerBytes=base64FromBytes(tr.headerBytes!==void 0?tr.headerBytes:new Uint8Array)),tr.contentTopic!==void 0&&(er.contentTopic=tr.contentTopic),er},fromPartial(tr){var er,rr,nr;const ir=createBaseEncryptV2Request_Request();return ir.payload=(er=tr.payload)!==null&&er!==void 0?er:new Uint8Array,ir.headerBytes=(rr=tr.headerBytes)!==null&&rr!==void 0?rr:new Uint8Array,ir.contentTopic=(nr=tr.contentTopic)!==null&&nr!==void 0?nr:"",ir}};function createBaseSelfEncryptRequest(){return{requests:[]}}const SelfEncryptRequest={encode(tr,er=_m0.Writer.create()){for(const rr of tr.requests)SelfEncryptRequest_Request.encode(rr,er.uint32(10).fork()).ldelim();return er},decode(tr,er){const rr=tr instanceof _m0.Reader?tr:new _m0.Reader(tr);let nr=er===void 0?rr.len:rr.pos+er;const ir=createBaseSelfEncryptRequest();for(;rr.pos<nr;){const sr=rr.uint32();switch(sr>>>3){case 1:ir.requests.push(SelfEncryptRequest_Request.decode(rr,rr.uint32()));break;default:rr.skipType(sr&7);break}}return ir},fromJSON(tr){return{requests:Array.isArray(tr==null?void 0:tr.requests)?tr.requests.map(er=>SelfEncryptRequest_Request.fromJSON(er)):[]}},toJSON(tr){const er={};return tr.requests?er.requests=tr.requests.map(rr=>rr?SelfEncryptRequest_Request.toJSON(rr):void 0):er.requests=[],er},fromPartial(tr){var er;const rr=createBaseSelfEncryptRequest();return rr.requests=((er=tr.requests)===null||er===void 0?void 0:er.map(nr=>SelfEncryptRequest_Request.fromPartial(nr)))||[],rr}};function createBaseSelfEncryptRequest_Request(){return{payload:new Uint8Array}}const SelfEncryptRequest_Request={encode(tr,er=_m0.Writer.create()){return tr.payload.length!==0&&er.uint32(10).bytes(tr.payload),er},decode(tr,er){const rr=tr instanceof _m0.Reader?tr:new _m0.Reader(tr);let nr=er===void 0?rr.len:rr.pos+er;const ir=createBaseSelfEncryptRequest_Request();for(;rr.pos<nr;){const sr=rr.uint32();switch(sr>>>3){case 1:ir.payload=rr.bytes();break;default:rr.skipType(sr&7);break}}return ir},fromJSON(tr){return{payload:isSet$1(tr.payload)?bytesFromBase64(tr.payload):new Uint8Array}},toJSON(tr){const er={};return tr.payload!==void 0&&(er.payload=base64FromBytes(tr.payload!==void 0?tr.payload:new Uint8Array)),er},fromPartial(tr){var er;const rr=createBaseSelfEncryptRequest_Request();return rr.payload=(er=tr.payload)!==null&&er!==void 0?er:new Uint8Array,rr}};function createBaseSelfEncryptResponse(){return{responses:[]}}const SelfEncryptResponse={encode(tr,er=_m0.Writer.create()){for(const rr of tr.responses)SelfEncryptResponse_Response.encode(rr,er.uint32(10).fork()).ldelim();return er},decode(tr,er){const rr=tr instanceof _m0.Reader?tr:new _m0.Reader(tr);let nr=er===void 0?rr.len:rr.pos+er;const ir=createBaseSelfEncryptResponse();for(;rr.pos<nr;){const sr=rr.uint32();switch(sr>>>3){case 1:ir.responses.push(SelfEncryptResponse_Response.decode(rr,rr.uint32()));break;default:rr.skipType(sr&7);break}}return ir},fromJSON(tr){return{responses:Array.isArray(tr==null?void 0:tr.responses)?tr.responses.map(er=>SelfEncryptResponse_Response.fromJSON(er)):[]}},toJSON(tr){const er={};return tr.responses?er.responses=tr.responses.map(rr=>rr?SelfEncryptResponse_Response.toJSON(rr):void 0):er.responses=[],er},fromPartial(tr){var er;const rr=createBaseSelfEncryptResponse();return rr.responses=((er=tr.responses)===null||er===void 0?void 0:er.map(nr=>SelfEncryptResponse_Response.fromPartial(nr)))||[],rr}};function createBaseSelfEncryptResponse_Response(){return{result:void 0,error:void 0}}const SelfEncryptResponse_Response={encode(tr,er=_m0.Writer.create()){return tr.result!==void 0&&SelfEncryptResponse_Response_Success.encode(tr.result,er.uint32(10).fork()).ldelim(),tr.error!==void 0&&KeystoreError.encode(tr.error,er.uint32(18).fork()).ldelim(),er},decode(tr,er){const rr=tr instanceof _m0.Reader?tr:new _m0.Reader(tr);let nr=er===void 0?rr.len:rr.pos+er;const ir=createBaseSelfEncryptResponse_Response();for(;rr.pos<nr;){const sr=rr.uint32();switch(sr>>>3){case 1:ir.result=SelfEncryptResponse_Response_Success.decode(rr,rr.uint32());break;case 2:ir.error=KeystoreError.decode(rr,rr.uint32());break;default:rr.skipType(sr&7);break}}return ir},fromJSON(tr){return{result:isSet$1(tr.result)?SelfEncryptResponse_Response_Success.fromJSON(tr.result):void 0,error:isSet$1(tr.error)?KeystoreError.fromJSON(tr.error):void 0}},toJSON(tr){const er={};return tr.result!==void 0&&(er.result=tr.result?SelfEncryptResponse_Response_Success.toJSON(tr.result):void 0),tr.error!==void 0&&(er.error=tr.error?KeystoreError.toJSON(tr.error):void 0),er},fromPartial(tr){const er=createBaseSelfEncryptResponse_Response();return er.result=tr.result!==void 0&&tr.result!==null?SelfEncryptResponse_Response_Success.fromPartial(tr.result):void 0,er.error=tr.error!==void 0&&tr.error!==null?KeystoreError.fromPartial(tr.error):void 0,er}};function createBaseSelfEncryptResponse_Response_Success(){return{encrypted:new Uint8Array}}const SelfEncryptResponse_Response_Success={encode(tr,er=_m0.Writer.create()){return tr.encrypted.length!==0&&er.uint32(10).bytes(tr.encrypted),er},decode(tr,er){const rr=tr instanceof _m0.Reader?tr:new _m0.Reader(tr);let nr=er===void 0?rr.len:rr.pos+er;const ir=createBaseSelfEncryptResponse_Response_Success();for(;rr.pos<nr;){const sr=rr.uint32();switch(sr>>>3){case 1:ir.encrypted=rr.bytes();break;default:rr.skipType(sr&7);break}}return ir},fromJSON(tr){return{encrypted:isSet$1(tr.encrypted)?bytesFromBase64(tr.encrypted):new Uint8Array}},toJSON(tr){const er={};return tr.encrypted!==void 0&&(er.encrypted=base64FromBytes(tr.encrypted!==void 0?tr.encrypted:new Uint8Array)),er},fromPartial(tr){var er;const rr=createBaseSelfEncryptResponse_Response_Success();return rr.encrypted=(er=tr.encrypted)!==null&&er!==void 0?er:new Uint8Array,rr}};function createBaseSelfDecryptRequest(){return{requests:[]}}const SelfDecryptRequest={encode(tr,er=_m0.Writer.create()){for(const rr of tr.requests)SelfDecryptRequest_Request.encode(rr,er.uint32(10).fork()).ldelim();return er},decode(tr,er){const rr=tr instanceof _m0.Reader?tr:new _m0.Reader(tr);let nr=er===void 0?rr.len:rr.pos+er;const ir=createBaseSelfDecryptRequest();for(;rr.pos<nr;){const sr=rr.uint32();switch(sr>>>3){case 1:ir.requests.push(SelfDecryptRequest_Request.decode(rr,rr.uint32()));break;default:rr.skipType(sr&7);break}}return ir},fromJSON(tr){return{requests:Array.isArray(tr==null?void 0:tr.requests)?tr.requests.map(er=>SelfDecryptRequest_Request.fromJSON(er)):[]}},toJSON(tr){const er={};return tr.requests?er.requests=tr.requests.map(rr=>rr?SelfDecryptRequest_Request.toJSON(rr):void 0):er.requests=[],er},fromPartial(tr){var er;const rr=createBaseSelfDecryptRequest();return rr.requests=((er=tr.requests)===null||er===void 0?void 0:er.map(nr=>SelfDecryptRequest_Request.fromPartial(nr)))||[],rr}};function createBaseSelfDecryptRequest_Request(){return{payload:new Uint8Array}}const SelfDecryptRequest_Request={encode(tr,er=_m0.Writer.create()){return tr.payload.length!==0&&er.uint32(10).bytes(tr.payload),er},decode(tr,er){const rr=tr instanceof _m0.Reader?tr:new _m0.Reader(tr);let nr=er===void 0?rr.len:rr.pos+er;const ir=createBaseSelfDecryptRequest_Request();for(;rr.pos<nr;){const sr=rr.uint32();switch(sr>>>3){case 1:ir.payload=rr.bytes();break;default:rr.skipType(sr&7);break}}return ir},fromJSON(tr){return{payload:isSet$1(tr.payload)?bytesFromBase64(tr.payload):new Uint8Array}},toJSON(tr){const er={};return tr.payload!==void 0&&(er.payload=base64FromBytes(tr.payload!==void 0?tr.payload:new Uint8Array)),er},fromPartial(tr){var er;const rr=createBaseSelfDecryptRequest_Request();return rr.payload=(er=tr.payload)!==null&&er!==void 0?er:new Uint8Array,rr}};function createBaseGetPrivatePreferencesTopicIdentifierResponse(){return{identifier:""}}const GetPrivatePreferencesTopicIdentifierResponse={encode(tr,er=_m0.Writer.create()){return tr.identifier!==""&&er.uint32(10).string(tr.identifier),er},decode(tr,er){const rr=tr instanceof _m0.Reader?tr:new _m0.Reader(tr);let nr=er===void 0?rr.len:rr.pos+er;const ir=createBaseGetPrivatePreferencesTopicIdentifierResponse();for(;rr.pos<nr;){const sr=rr.uint32();switch(sr>>>3){case 1:ir.identifier=rr.string();break;default:rr.skipType(sr&7);break}}return ir},fromJSON(tr){return{identifier:isSet$1(tr.identifier)?String(tr.identifier):""}},toJSON(tr){const er={};return tr.identifier!==void 0&&(er.identifier=tr.identifier),er},fromPartial(tr){var er;const rr=createBaseGetPrivatePreferencesTopicIdentifierResponse();return rr.identifier=(er=tr.identifier)!==null&&er!==void 0?er:"",rr}};function createBaseCreateInviteRequest(){return{context:void 0,recipient:void 0,createdNs:Long.UZERO,consentProof:void 0}}const CreateInviteRequest={encode(tr,er=_m0.Writer.create()){return tr.context!==void 0&&InvitationV1_Context.encode(tr.context,er.uint32(10).fork()).ldelim(),tr.recipient!==void 0&&SignedPublicKeyBundle.encode(tr.recipient,er.uint32(18).fork()).ldelim(),tr.createdNs.isZero()||er.uint32(24).uint64(tr.createdNs),tr.consentProof!==void 0&&ConsentProofPayload.encode(tr.consentProof,er.uint32(34).fork()).ldelim(),er},decode(tr,er){const rr=tr instanceof _m0.Reader?tr:new _m0.Reader(tr);let nr=er===void 0?rr.len:rr.pos+er;const ir=createBaseCreateInviteRequest();for(;rr.pos<nr;){const sr=rr.uint32();switch(sr>>>3){case 1:ir.context=InvitationV1_Context.decode(rr,rr.uint32());break;case 2:ir.recipient=SignedPublicKeyBundle.decode(rr,rr.uint32());break;case 3:ir.createdNs=rr.uint64();break;case 4:ir.consentProof=ConsentProofPayload.decode(rr,rr.uint32());break;default:rr.skipType(sr&7);break}}return ir},fromJSON(tr){return{context:isSet$1(tr.context)?InvitationV1_Context.fromJSON(tr.context):void 0,recipient:isSet$1(tr.recipient)?SignedPublicKeyBundle.fromJSON(tr.recipient):void 0,createdNs:isSet$1(tr.createdNs)?Long.fromValue(tr.createdNs):Long.UZERO,consentProof:isSet$1(tr.consentProof)?ConsentProofPayload.fromJSON(tr.consentProof):void 0}},toJSON(tr){const er={};return tr.context!==void 0&&(er.context=tr.context?InvitationV1_Context.toJSON(tr.context):void 0),tr.recipient!==void 0&&(er.recipient=tr.recipient?SignedPublicKeyBundle.toJSON(tr.recipient):void 0),tr.createdNs!==void 0&&(er.createdNs=(tr.createdNs||Long.UZERO).toString()),tr.consentProof!==void 0&&(er.consentProof=tr.consentProof?ConsentProofPayload.toJSON(tr.consentProof):void 0),er},fromPartial(tr){const er=createBaseCreateInviteRequest();return er.context=tr.context!==void 0&&tr.context!==null?InvitationV1_Context.fromPartial(tr.context):void 0,er.recipient=tr.recipient!==void 0&&tr.recipient!==null?SignedPublicKeyBundle.fromPartial(tr.recipient):void 0,er.createdNs=tr.createdNs!==void 0&&tr.createdNs!==null?Long.fromValue(tr.createdNs):Long.UZERO,er.consentProof=tr.consentProof!==void 0&&tr.consentProof!==null?ConsentProofPayload.fromPartial(tr.consentProof):void 0,er}};function createBaseCreateInviteResponse(){return{conversation:void 0,payload:new Uint8Array}}const CreateInviteResponse={encode(tr,er=_m0.Writer.create()){return tr.conversation!==void 0&&ConversationReference.encode(tr.conversation,er.uint32(10).fork()).ldelim(),tr.payload.length!==0&&er.uint32(18).bytes(tr.payload),er},decode(tr,er){const rr=tr instanceof _m0.Reader?tr:new _m0.Reader(tr);let nr=er===void 0?rr.len:rr.pos+er;const ir=createBaseCreateInviteResponse();for(;rr.pos<nr;){const sr=rr.uint32();switch(sr>>>3){case 1:ir.conversation=ConversationReference.decode(rr,rr.uint32());break;case 2:ir.payload=rr.bytes();break;default:rr.skipType(sr&7);break}}return ir},fromJSON(tr){return{conversation:isSet$1(tr.conversation)?ConversationReference.fromJSON(tr.conversation):void 0,payload:isSet$1(tr.payload)?bytesFromBase64(tr.payload):new Uint8Array}},toJSON(tr){const er={};return tr.conversation!==void 0&&(er.conversation=tr.conversation?ConversationReference.toJSON(tr.conversation):void 0),tr.payload!==void 0&&(er.payload=base64FromBytes(tr.payload!==void 0?tr.payload:new Uint8Array)),er},fromPartial(tr){var er;const rr=createBaseCreateInviteResponse();return rr.conversation=tr.conversation!==void 0&&tr.conversation!==null?ConversationReference.fromPartial(tr.conversation):void 0,rr.payload=(er=tr.payload)!==null&&er!==void 0?er:new Uint8Array,rr}};function createBaseSaveInvitesRequest(){return{requests:[]}}const SaveInvitesRequest={encode(tr,er=_m0.Writer.create()){for(const rr of tr.requests)SaveInvitesRequest_Request.encode(rr,er.uint32(10).fork()).ldelim();return er},decode(tr,er){const rr=tr instanceof _m0.Reader?tr:new _m0.Reader(tr);let nr=er===void 0?rr.len:rr.pos+er;const ir=createBaseSaveInvitesRequest();for(;rr.pos<nr;){const sr=rr.uint32();switch(sr>>>3){case 1:ir.requests.push(SaveInvitesRequest_Request.decode(rr,rr.uint32()));break;default:rr.skipType(sr&7);break}}return ir},fromJSON(tr){return{requests:Array.isArray(tr==null?void 0:tr.requests)?tr.requests.map(er=>SaveInvitesRequest_Request.fromJSON(er)):[]}},toJSON(tr){const er={};return tr.requests?er.requests=tr.requests.map(rr=>rr?SaveInvitesRequest_Request.toJSON(rr):void 0):er.requests=[],er},fromPartial(tr){var er;const rr=createBaseSaveInvitesRequest();return rr.requests=((er=tr.requests)===null||er===void 0?void 0:er.map(nr=>SaveInvitesRequest_Request.fromPartial(nr)))||[],rr}};function createBaseSaveInvitesRequest_Request(){return{contentTopic:"",timestampNs:Long.UZERO,payload:new Uint8Array}}const SaveInvitesRequest_Request={encode(tr,er=_m0.Writer.create()){return tr.contentTopic!==""&&er.uint32(10).string(tr.contentTopic),tr.timestampNs.isZero()||er.uint32(16).uint64(tr.timestampNs),tr.payload.length!==0&&er.uint32(26).bytes(tr.payload),er},decode(tr,er){const rr=tr instanceof _m0.Reader?tr:new _m0.Reader(tr);let nr=er===void 0?rr.len:rr.pos+er;const ir=createBaseSaveInvitesRequest_Request();for(;rr.pos<nr;){const sr=rr.uint32();switch(sr>>>3){case 1:ir.contentTopic=rr.string();break;case 2:ir.timestampNs=rr.uint64();break;case 3:ir.payload=rr.bytes();break;default:rr.skipType(sr&7);break}}return ir},fromJSON(tr){return{contentTopic:isSet$1(tr.contentTopic)?String(tr.contentTopic):"",timestampNs:isSet$1(tr.timestampNs)?Long.fromValue(tr.timestampNs):Long.UZERO,payload:isSet$1(tr.payload)?bytesFromBase64(tr.payload):new Uint8Array}},toJSON(tr){const er={};return tr.contentTopic!==void 0&&(er.contentTopic=tr.contentTopic),tr.timestampNs!==void 0&&(er.timestampNs=(tr.timestampNs||Long.UZERO).toString()),tr.payload!==void 0&&(er.payload=base64FromBytes(tr.payload!==void 0?tr.payload:new Uint8Array)),er},fromPartial(tr){var er,rr;const nr=createBaseSaveInvitesRequest_Request();return nr.contentTopic=(er=tr.contentTopic)!==null&&er!==void 0?er:"",nr.timestampNs=tr.timestampNs!==void 0&&tr.timestampNs!==null?Long.fromValue(tr.timestampNs):Long.UZERO,nr.payload=(rr=tr.payload)!==null&&rr!==void 0?rr:new Uint8Array,nr}};function createBaseSaveInvitesResponse(){return{responses:[]}}const SaveInvitesResponse={encode(tr,er=_m0.Writer.create()){for(const rr of tr.responses)SaveInvitesResponse_Response.encode(rr,er.uint32(10).fork()).ldelim();return er},decode(tr,er){const rr=tr instanceof _m0.Reader?tr:new _m0.Reader(tr);let nr=er===void 0?rr.len:rr.pos+er;const ir=createBaseSaveInvitesResponse();for(;rr.pos<nr;){const sr=rr.uint32();switch(sr>>>3){case 1:ir.responses.push(SaveInvitesResponse_Response.decode(rr,rr.uint32()));break;default:rr.skipType(sr&7);break}}return ir},fromJSON(tr){return{responses:Array.isArray(tr==null?void 0:tr.responses)?tr.responses.map(er=>SaveInvitesResponse_Response.fromJSON(er)):[]}},toJSON(tr){const er={};return tr.responses?er.responses=tr.responses.map(rr=>rr?SaveInvitesResponse_Response.toJSON(rr):void 0):er.responses=[],er},fromPartial(tr){var er;const rr=createBaseSaveInvitesResponse();return rr.responses=((er=tr.responses)===null||er===void 0?void 0:er.map(nr=>SaveInvitesResponse_Response.fromPartial(nr)))||[],rr}};function createBaseSaveInvitesResponse_Response(){return{result:void 0,error:void 0}}const SaveInvitesResponse_Response={encode(tr,er=_m0.Writer.create()){return tr.result!==void 0&&SaveInvitesResponse_Response_Success.encode(tr.result,er.uint32(10).fork()).ldelim(),tr.error!==void 0&&KeystoreError.encode(tr.error,er.uint32(18).fork()).ldelim(),er},decode(tr,er){const rr=tr instanceof _m0.Reader?tr:new _m0.Reader(tr);let nr=er===void 0?rr.len:rr.pos+er;const ir=createBaseSaveInvitesResponse_Response();for(;rr.pos<nr;){const sr=rr.uint32();switch(sr>>>3){case 1:ir.result=SaveInvitesResponse_Response_Success.decode(rr,rr.uint32());break;case 2:ir.error=KeystoreError.decode(rr,rr.uint32());break;default:rr.skipType(sr&7);break}}return ir},fromJSON(tr){return{result:isSet$1(tr.result)?SaveInvitesResponse_Response_Success.fromJSON(tr.result):void 0,error:isSet$1(tr.error)?KeystoreError.fromJSON(tr.error):void 0}},toJSON(tr){const er={};return tr.result!==void 0&&(er.result=tr.result?SaveInvitesResponse_Response_Success.toJSON(tr.result):void 0),tr.error!==void 0&&(er.error=tr.error?KeystoreError.toJSON(tr.error):void 0),er},fromPartial(tr){const er=createBaseSaveInvitesResponse_Response();return er.result=tr.result!==void 0&&tr.result!==null?SaveInvitesResponse_Response_Success.fromPartial(tr.result):void 0,er.error=tr.error!==void 0&&tr.error!==null?KeystoreError.fromPartial(tr.error):void 0,er}};function createBaseSaveInvitesResponse_Response_Success(){return{conversation:void 0}}const SaveInvitesResponse_Response_Success={encode(tr,er=_m0.Writer.create()){return tr.conversation!==void 0&&ConversationReference.encode(tr.conversation,er.uint32(10).fork()).ldelim(),er},decode(tr,er){const rr=tr instanceof _m0.Reader?tr:new _m0.Reader(tr);let nr=er===void 0?rr.len:rr.pos+er;const ir=createBaseSaveInvitesResponse_Response_Success();for(;rr.pos<nr;){const sr=rr.uint32();switch(sr>>>3){case 1:ir.conversation=ConversationReference.decode(rr,rr.uint32());break;default:rr.skipType(sr&7);break}}return ir},fromJSON(tr){return{conversation:isSet$1(tr.conversation)?ConversationReference.fromJSON(tr.conversation):void 0}},toJSON(tr){const er={};return tr.conversation!==void 0&&(er.conversation=tr.conversation?ConversationReference.toJSON(tr.conversation):void 0),er},fromPartial(tr){const er=createBaseSaveInvitesResponse_Response_Success();return er.conversation=tr.conversation!==void 0&&tr.conversation!==null?ConversationReference.fromPartial(tr.conversation):void 0,er}};function createBaseCreateAuthTokenRequest(){return{timestampNs:void 0}}const CreateAuthTokenRequest={encode(tr,er=_m0.Writer.create()){return tr.timestampNs!==void 0&&er.uint32(8).uint64(tr.timestampNs),er},decode(tr,er){const rr=tr instanceof _m0.Reader?tr:new _m0.Reader(tr);let nr=er===void 0?rr.len:rr.pos+er;const ir=createBaseCreateAuthTokenRequest();for(;rr.pos<nr;){const sr=rr.uint32();switch(sr>>>3){case 1:ir.timestampNs=rr.uint64();break;default:rr.skipType(sr&7);break}}return ir},fromJSON(tr){return{timestampNs:isSet$1(tr.timestampNs)?Long.fromValue(tr.timestampNs):void 0}},toJSON(tr){const er={};return tr.timestampNs!==void 0&&(er.timestampNs=(tr.timestampNs||void 0).toString()),er},fromPartial(tr){const er=createBaseCreateAuthTokenRequest();return er.timestampNs=tr.timestampNs!==void 0&&tr.timestampNs!==null?Long.fromValue(tr.timestampNs):void 0,er}};function createBaseSaveV1ConversationsRequest(){return{conversations:[]}}const SaveV1ConversationsRequest={encode(tr,er=_m0.Writer.create()){for(const rr of tr.conversations)ConversationReference.encode(rr,er.uint32(10).fork()).ldelim();return er},decode(tr,er){const rr=tr instanceof _m0.Reader?tr:new _m0.Reader(tr);let nr=er===void 0?rr.len:rr.pos+er;const ir=createBaseSaveV1ConversationsRequest();for(;rr.pos<nr;){const sr=rr.uint32();switch(sr>>>3){case 1:ir.conversations.push(ConversationReference.decode(rr,rr.uint32()));break;default:rr.skipType(sr&7);break}}return ir},fromJSON(tr){return{conversations:Array.isArray(tr==null?void 0:tr.conversations)?tr.conversations.map(er=>ConversationReference.fromJSON(er)):[]}},toJSON(tr){const er={};return tr.conversations?er.conversations=tr.conversations.map(rr=>rr?ConversationReference.toJSON(rr):void 0):er.conversations=[],er},fromPartial(tr){var er;const rr=createBaseSaveV1ConversationsRequest();return rr.conversations=((er=tr.conversations)===null||er===void 0?void 0:er.map(nr=>ConversationReference.fromPartial(nr)))||[],rr}};function createBaseSaveV1ConversationsResponse(){return{}}const SaveV1ConversationsResponse={encode(tr,er=_m0.Writer.create()){return er},decode(tr,er){const rr=tr instanceof _m0.Reader?tr:new _m0.Reader(tr);let nr=er===void 0?rr.len:rr.pos+er;const ir=createBaseSaveV1ConversationsResponse();for(;rr.pos<nr;){const sr=rr.uint32();switch(sr>>>3){default:rr.skipType(sr&7);break}}return ir},fromJSON(tr){return{}},toJSON(tr){return{}},fromPartial(tr){return createBaseSaveV1ConversationsResponse()}};function createBaseGetConversationsResponse(){return{conversations:[]}}const GetConversationsResponse={encode(tr,er=_m0.Writer.create()){for(const rr of tr.conversations)ConversationReference.encode(rr,er.uint32(10).fork()).ldelim();return er},decode(tr,er){const rr=tr instanceof _m0.Reader?tr:new _m0.Reader(tr);let nr=er===void 0?rr.len:rr.pos+er;const ir=createBaseGetConversationsResponse();for(;rr.pos<nr;){const sr=rr.uint32();switch(sr>>>3){case 1:ir.conversations.push(ConversationReference.decode(rr,rr.uint32()));break;default:rr.skipType(sr&7);break}}return ir},fromJSON(tr){return{conversations:Array.isArray(tr==null?void 0:tr.conversations)?tr.conversations.map(er=>ConversationReference.fromJSON(er)):[]}},toJSON(tr){const er={};return tr.conversations?er.conversations=tr.conversations.map(rr=>rr?ConversationReference.toJSON(rr):void 0):er.conversations=[],er},fromPartial(tr){var er;const rr=createBaseGetConversationsResponse();return rr.conversations=((er=tr.conversations)===null||er===void 0?void 0:er.map(nr=>ConversationReference.fromPartial(nr)))||[],rr}};function createBaseGetKeystoreStatusRequest(){return{walletAddress:""}}const GetKeystoreStatusRequest={encode(tr,er=_m0.Writer.create()){return tr.walletAddress!==""&&er.uint32(10).string(tr.walletAddress),er},decode(tr,er){const rr=tr instanceof _m0.Reader?tr:new _m0.Reader(tr);let nr=er===void 0?rr.len:rr.pos+er;const ir=createBaseGetKeystoreStatusRequest();for(;rr.pos<nr;){const sr=rr.uint32();switch(sr>>>3){case 1:ir.walletAddress=rr.string();break;default:rr.skipType(sr&7);break}}return ir},fromJSON(tr){return{walletAddress:isSet$1(tr.walletAddress)?String(tr.walletAddress):""}},toJSON(tr){const er={};return tr.walletAddress!==void 0&&(er.walletAddress=tr.walletAddress),er},fromPartial(tr){var er;const rr=createBaseGetKeystoreStatusRequest();return rr.walletAddress=(er=tr.walletAddress)!==null&&er!==void 0?er:"",rr}};function createBaseGetKeystoreStatusResponse(){return{status:0}}const GetKeystoreStatusResponse={encode(tr,er=_m0.Writer.create()){return tr.status!==0&&er.uint32(8).int32(tr.status),er},decode(tr,er){const rr=tr instanceof _m0.Reader?tr:new _m0.Reader(tr);let nr=er===void 0?rr.len:rr.pos+er;const ir=createBaseGetKeystoreStatusResponse();for(;rr.pos<nr;){const sr=rr.uint32();switch(sr>>>3){case 1:ir.status=rr.int32();break;default:rr.skipType(sr&7);break}}return ir},fromJSON(tr){return{status:isSet$1(tr.status)?getKeystoreStatusResponse_KeystoreStatusFromJSON(tr.status):0}},toJSON(tr){const er={};return tr.status!==void 0&&(er.status=getKeystoreStatusResponse_KeystoreStatusToJSON(tr.status)),er},fromPartial(tr){var er;const rr=createBaseGetKeystoreStatusResponse();return rr.status=(er=tr.status)!==null&&er!==void 0?er:0,rr}};function createBaseInitKeystoreRequest(){return{v1:void 0}}const InitKeystoreRequest={encode(tr,er=_m0.Writer.create()){return tr.v1!==void 0&&PrivateKeyBundleV1.encode(tr.v1,er.uint32(10).fork()).ldelim(),er},decode(tr,er){const rr=tr instanceof _m0.Reader?tr:new _m0.Reader(tr);let nr=er===void 0?rr.len:rr.pos+er;const ir=createBaseInitKeystoreRequest();for(;rr.pos<nr;){const sr=rr.uint32();switch(sr>>>3){case 1:ir.v1=PrivateKeyBundleV1.decode(rr,rr.uint32());break;default:rr.skipType(sr&7);break}}return ir},fromJSON(tr){return{v1:isSet$1(tr.v1)?PrivateKeyBundleV1.fromJSON(tr.v1):void 0}},toJSON(tr){const er={};return tr.v1!==void 0&&(er.v1=tr.v1?PrivateKeyBundleV1.toJSON(tr.v1):void 0),er},fromPartial(tr){const er=createBaseInitKeystoreRequest();return er.v1=tr.v1!==void 0&&tr.v1!==null?PrivateKeyBundleV1.fromPartial(tr.v1):void 0,er}};function createBaseInitKeystoreResponse(){return{error:void 0}}const InitKeystoreResponse={encode(tr,er=_m0.Writer.create()){return tr.error!==void 0&&KeystoreError.encode(tr.error,er.uint32(10).fork()).ldelim(),er},decode(tr,er){const rr=tr instanceof _m0.Reader?tr:new _m0.Reader(tr);let nr=er===void 0?rr.len:rr.pos+er;const ir=createBaseInitKeystoreResponse();for(;rr.pos<nr;){const sr=rr.uint32();switch(sr>>>3){case 1:ir.error=KeystoreError.decode(rr,rr.uint32());break;default:rr.skipType(sr&7);break}}return ir},fromJSON(tr){return{error:isSet$1(tr.error)?KeystoreError.fromJSON(tr.error):void 0}},toJSON(tr){const er={};return tr.error!==void 0&&(er.error=tr.error?KeystoreError.toJSON(tr.error):void 0),er},fromPartial(tr){const er=createBaseInitKeystoreResponse();return er.error=tr.error!==void 0&&tr.error!==null?KeystoreError.fromPartial(tr.error):void 0,er}};function createBaseSignDigestRequest(){return{digest:new Uint8Array,identityKey:void 0,prekeyIndex:void 0}}const SignDigestRequest={encode(tr,er=_m0.Writer.create()){return tr.digest.length!==0&&er.uint32(10).bytes(tr.digest),tr.identityKey!==void 0&&er.uint32(16).bool(tr.identityKey),tr.prekeyIndex!==void 0&&er.uint32(24).uint32(tr.prekeyIndex),er},decode(tr,er){const rr=tr instanceof _m0.Reader?tr:new _m0.Reader(tr);let nr=er===void 0?rr.len:rr.pos+er;const ir=createBaseSignDigestRequest();for(;rr.pos<nr;){const sr=rr.uint32();switch(sr>>>3){case 1:ir.digest=rr.bytes();break;case 2:ir.identityKey=rr.bool();break;case 3:ir.prekeyIndex=rr.uint32();break;default:rr.skipType(sr&7);break}}return ir},fromJSON(tr){return{digest:isSet$1(tr.digest)?bytesFromBase64(tr.digest):new Uint8Array,identityKey:isSet$1(tr.identityKey)?!!tr.identityKey:void 0,prekeyIndex:isSet$1(tr.prekeyIndex)?Number(tr.prekeyIndex):void 0}},toJSON(tr){const er={};return tr.digest!==void 0&&(er.digest=base64FromBytes(tr.digest!==void 0?tr.digest:new Uint8Array)),tr.identityKey!==void 0&&(er.identityKey=tr.identityKey),tr.prekeyIndex!==void 0&&(er.prekeyIndex=Math.round(tr.prekeyIndex)),er},fromPartial(tr){var er,rr,nr;const ir=createBaseSignDigestRequest();return ir.digest=(er=tr.digest)!==null&&er!==void 0?er:new Uint8Array,ir.identityKey=(rr=tr.identityKey)!==null&&rr!==void 0?rr:void 0,ir.prekeyIndex=(nr=tr.prekeyIndex)!==null&&nr!==void 0?nr:void 0,ir}};function createBaseGetRefreshJobRequest(){return{jobType:0}}const GetRefreshJobRequest={encode(tr,er=_m0.Writer.create()){return tr.jobType!==0&&er.uint32(8).int32(tr.jobType),er},decode(tr,er){const rr=tr instanceof _m0.Reader?tr:new _m0.Reader(tr);let nr=er===void 0?rr.len:rr.pos+er;const ir=createBaseGetRefreshJobRequest();for(;rr.pos<nr;){const sr=rr.uint32();switch(sr>>>3){case 1:ir.jobType=rr.int32();break;default:rr.skipType(sr&7);break}}return ir},fromJSON(tr){return{jobType:isSet$1(tr.jobType)?jobTypeFromJSON(tr.jobType):0}},toJSON(tr){const er={};return tr.jobType!==void 0&&(er.jobType=jobTypeToJSON(tr.jobType)),er},fromPartial(tr){var er;const rr=createBaseGetRefreshJobRequest();return rr.jobType=(er=tr.jobType)!==null&&er!==void 0?er:0,rr}};function createBaseGetRefreshJobResponse(){return{lastRunNs:Long.ZERO}}const GetRefreshJobResponse={encode(tr,er=_m0.Writer.create()){return tr.lastRunNs.isZero()||er.uint32(8).int64(tr.lastRunNs),er},decode(tr,er){const rr=tr instanceof _m0.Reader?tr:new _m0.Reader(tr);let nr=er===void 0?rr.len:rr.pos+er;const ir=createBaseGetRefreshJobResponse();for(;rr.pos<nr;){const sr=rr.uint32();switch(sr>>>3){case 1:ir.lastRunNs=rr.int64();break;default:rr.skipType(sr&7);break}}return ir},fromJSON(tr){return{lastRunNs:isSet$1(tr.lastRunNs)?Long.fromValue(tr.lastRunNs):Long.ZERO}},toJSON(tr){const er={};return tr.lastRunNs!==void 0&&(er.lastRunNs=(tr.lastRunNs||Long.ZERO).toString()),er},fromPartial(tr){const er=createBaseGetRefreshJobResponse();return er.lastRunNs=tr.lastRunNs!==void 0&&tr.lastRunNs!==null?Long.fromValue(tr.lastRunNs):Long.ZERO,er}};function createBaseSetRefeshJobRequest(){return{jobType:0,lastRunNs:Long.ZERO}}const SetRefeshJobRequest={encode(tr,er=_m0.Writer.create()){return tr.jobType!==0&&er.uint32(8).int32(tr.jobType),tr.lastRunNs.isZero()||er.uint32(16).int64(tr.lastRunNs),er},decode(tr,er){const rr=tr instanceof _m0.Reader?tr:new _m0.Reader(tr);let nr=er===void 0?rr.len:rr.pos+er;const ir=createBaseSetRefeshJobRequest();for(;rr.pos<nr;){const sr=rr.uint32();switch(sr>>>3){case 1:ir.jobType=rr.int32();break;case 2:ir.lastRunNs=rr.int64();break;default:rr.skipType(sr&7);break}}return ir},fromJSON(tr){return{jobType:isSet$1(tr.jobType)?jobTypeFromJSON(tr.jobType):0,lastRunNs:isSet$1(tr.lastRunNs)?Long.fromValue(tr.lastRunNs):Long.ZERO}},toJSON(tr){const er={};return tr.jobType!==void 0&&(er.jobType=jobTypeToJSON(tr.jobType)),tr.lastRunNs!==void 0&&(er.lastRunNs=(tr.lastRunNs||Long.ZERO).toString()),er},fromPartial(tr){var er;const rr=createBaseSetRefeshJobRequest();return rr.jobType=(er=tr.jobType)!==null&&er!==void 0?er:0,rr.lastRunNs=tr.lastRunNs!==void 0&&tr.lastRunNs!==null?Long.fromValue(tr.lastRunNs):Long.ZERO,rr}};function createBaseSetRefreshJobResponse(){return{}}const SetRefreshJobResponse={encode(tr,er=_m0.Writer.create()){return er},decode(tr,er){const rr=tr instanceof _m0.Reader?tr:new _m0.Reader(tr);let nr=er===void 0?rr.len:rr.pos+er;const ir=createBaseSetRefreshJobResponse();for(;rr.pos<nr;){const sr=rr.uint32();switch(sr>>>3){default:rr.skipType(sr&7);break}}return ir},fromJSON(tr){return{}},toJSON(tr){return{}},fromPartial(tr){return createBaseSetRefreshJobResponse()}};function createBaseTopicMap(){return{topics:{}}}const TopicMap={encode(tr,er=_m0.Writer.create()){return Object.entries(tr.topics).forEach(([rr,nr])=>{TopicMap_TopicsEntry.encode({key:rr,value:nr},er.uint32(10).fork()).ldelim()}),er},decode(tr,er){const rr=tr instanceof _m0.Reader?tr:new _m0.Reader(tr);let nr=er===void 0?rr.len:rr.pos+er;const ir=createBaseTopicMap();for(;rr.pos<nr;){const sr=rr.uint32();switch(sr>>>3){case 1:const or=TopicMap_TopicsEntry.decode(rr,rr.uint32());or.value!==void 0&&(ir.topics[or.key]=or.value);break;default:rr.skipType(sr&7);break}}return ir},fromJSON(tr){return{topics:isObject$4(tr.topics)?Object.entries(tr.topics).reduce((er,[rr,nr])=>(er[rr]=TopicMap_TopicData.fromJSON(nr),er),{}):{}}},toJSON(tr){const er={};return er.topics={},tr.topics&&Object.entries(tr.topics).forEach(([rr,nr])=>{er.topics[rr]=TopicMap_TopicData.toJSON(nr)}),er},fromPartial(tr){var er;const rr=createBaseTopicMap();return rr.topics=Object.entries((er=tr.topics)!==null&&er!==void 0?er:{}).reduce((nr,[ir,sr])=>(sr!==void 0&&(nr[ir]=TopicMap_TopicData.fromPartial(sr)),nr),{}),rr}};function createBaseTopicMap_TopicData(){return{createdNs:Long.UZERO,peerAddress:"",invitation:void 0}}const TopicMap_TopicData={encode(tr,er=_m0.Writer.create()){return tr.createdNs.isZero()||er.uint32(8).uint64(tr.createdNs),tr.peerAddress!==""&&er.uint32(18).string(tr.peerAddress),tr.invitation!==void 0&&InvitationV1.encode(tr.invitation,er.uint32(26).fork()).ldelim(),er},decode(tr,er){const rr=tr instanceof _m0.Reader?tr:new _m0.Reader(tr);let nr=er===void 0?rr.len:rr.pos+er;const ir=createBaseTopicMap_TopicData();for(;rr.pos<nr;){const sr=rr.uint32();switch(sr>>>3){case 1:ir.createdNs=rr.uint64();break;case 2:ir.peerAddress=rr.string();break;case 3:ir.invitation=InvitationV1.decode(rr,rr.uint32());break;default:rr.skipType(sr&7);break}}return ir},fromJSON(tr){return{createdNs:isSet$1(tr.createdNs)?Long.fromValue(tr.createdNs):Long.UZERO,peerAddress:isSet$1(tr.peerAddress)?String(tr.peerAddress):"",invitation:isSet$1(tr.invitation)?InvitationV1.fromJSON(tr.invitation):void 0}},toJSON(tr){const er={};return tr.createdNs!==void 0&&(er.createdNs=(tr.createdNs||Long.UZERO).toString()),tr.peerAddress!==void 0&&(er.peerAddress=tr.peerAddress),tr.invitation!==void 0&&(er.invitation=tr.invitation?InvitationV1.toJSON(tr.invitation):void 0),er},fromPartial(tr){var er;const rr=createBaseTopicMap_TopicData();return rr.createdNs=tr.createdNs!==void 0&&tr.createdNs!==null?Long.fromValue(tr.createdNs):Long.UZERO,rr.peerAddress=(er=tr.peerAddress)!==null&&er!==void 0?er:"",rr.invitation=tr.invitation!==void 0&&tr.invitation!==null?InvitationV1.fromPartial(tr.invitation):void 0,rr}};function createBaseTopicMap_TopicsEntry(){return{key:"",value:void 0}}const TopicMap_TopicsEntry={encode(tr,er=_m0.Writer.create()){return tr.key!==""&&er.uint32(10).string(tr.key),tr.value!==void 0&&TopicMap_TopicData.encode(tr.value,er.uint32(18).fork()).ldelim(),er},decode(tr,er){const rr=tr instanceof _m0.Reader?tr:new _m0.Reader(tr);let nr=er===void 0?rr.len:rr.pos+er;const ir=createBaseTopicMap_TopicsEntry();for(;rr.pos<nr;){const sr=rr.uint32();switch(sr>>>3){case 1:ir.key=rr.string();break;case 2:ir.value=TopicMap_TopicData.decode(rr,rr.uint32());break;default:rr.skipType(sr&7);break}}return ir},fromJSON(tr){return{key:isSet$1(tr.key)?String(tr.key):"",value:isSet$1(tr.value)?TopicMap_TopicData.fromJSON(tr.value):void 0}},toJSON(tr){const er={};return tr.key!==void 0&&(er.key=tr.key),tr.value!==void 0&&(er.value=tr.value?TopicMap_TopicData.toJSON(tr.value):void 0),er},fromPartial(tr){var er;const rr=createBaseTopicMap_TopicsEntry();return rr.key=(er=tr.key)!==null&&er!==void 0?er:"",rr.value=tr.value!==void 0&&tr.value!==null?TopicMap_TopicData.fromPartial(tr.value):void 0,rr}};function createBaseGetConversationHmacKeysRequest(){return{topics:[]}}const GetConversationHmacKeysRequest={encode(tr,er=_m0.Writer.create()){for(const rr of tr.topics)er.uint32(10).string(rr);return er},decode(tr,er){const rr=tr instanceof _m0.Reader?tr:new _m0.Reader(tr);let nr=er===void 0?rr.len:rr.pos+er;const ir=createBaseGetConversationHmacKeysRequest();for(;rr.pos<nr;){const sr=rr.uint32();switch(sr>>>3){case 1:ir.topics.push(rr.string());break;default:rr.skipType(sr&7);break}}return ir},fromJSON(tr){return{topics:Array.isArray(tr==null?void 0:tr.topics)?tr.topics.map(er=>String(er)):[]}},toJSON(tr){const er={};return tr.topics?er.topics=tr.topics.map(rr=>rr):er.topics=[],er},fromPartial(tr){var er;const rr=createBaseGetConversationHmacKeysRequest();return rr.topics=((er=tr.topics)===null||er===void 0?void 0:er.map(nr=>nr))||[],rr}};function createBaseGetConversationHmacKeysResponse(){return{hmacKeys:{}}}const GetConversationHmacKeysResponse={encode(tr,er=_m0.Writer.create()){return Object.entries(tr.hmacKeys).forEach(([rr,nr])=>{GetConversationHmacKeysResponse_HmacKeysEntry.encode({key:rr,value:nr},er.uint32(10).fork()).ldelim()}),er},decode(tr,er){const rr=tr instanceof _m0.Reader?tr:new _m0.Reader(tr);let nr=er===void 0?rr.len:rr.pos+er;const ir=createBaseGetConversationHmacKeysResponse();for(;rr.pos<nr;){const sr=rr.uint32();switch(sr>>>3){case 1:const or=GetConversationHmacKeysResponse_HmacKeysEntry.decode(rr,rr.uint32());or.value!==void 0&&(ir.hmacKeys[or.key]=or.value);break;default:rr.skipType(sr&7);break}}return ir},fromJSON(tr){return{hmacKeys:isObject$4(tr.hmacKeys)?Object.entries(tr.hmacKeys).reduce((er,[rr,nr])=>(er[rr]=GetConversationHmacKeysResponse_HmacKeys.fromJSON(nr),er),{}):{}}},toJSON(tr){const er={};return er.hmacKeys={},tr.hmacKeys&&Object.entries(tr.hmacKeys).forEach(([rr,nr])=>{er.hmacKeys[rr]=GetConversationHmacKeysResponse_HmacKeys.toJSON(nr)}),er},fromPartial(tr){var er;const rr=createBaseGetConversationHmacKeysResponse();return rr.hmacKeys=Object.entries((er=tr.hmacKeys)!==null&&er!==void 0?er:{}).reduce((nr,[ir,sr])=>(sr!==void 0&&(nr[ir]=GetConversationHmacKeysResponse_HmacKeys.fromPartial(sr)),nr),{}),rr}};function createBaseGetConversationHmacKeysResponse_HmacKeyData(){return{thirtyDayPeriodsSinceEpoch:0,hmacKey:new Uint8Array}}const GetConversationHmacKeysResponse_HmacKeyData={encode(tr,er=_m0.Writer.create()){return tr.thirtyDayPeriodsSinceEpoch!==0&&er.uint32(8).int32(tr.thirtyDayPeriodsSinceEpoch),tr.hmacKey.length!==0&&er.uint32(18).bytes(tr.hmacKey),er},decode(tr,er){const rr=tr instanceof _m0.Reader?tr:new _m0.Reader(tr);let nr=er===void 0?rr.len:rr.pos+er;const ir=createBaseGetConversationHmacKeysResponse_HmacKeyData();for(;rr.pos<nr;){const sr=rr.uint32();switch(sr>>>3){case 1:ir.thirtyDayPeriodsSinceEpoch=rr.int32();break;case 2:ir.hmacKey=rr.bytes();break;default:rr.skipType(sr&7);break}}return ir},fromJSON(tr){return{thirtyDayPeriodsSinceEpoch:isSet$1(tr.thirtyDayPeriodsSinceEpoch)?Number(tr.thirtyDayPeriodsSinceEpoch):0,hmacKey:isSet$1(tr.hmacKey)?bytesFromBase64(tr.hmacKey):new Uint8Array}},toJSON(tr){const er={};return tr.thirtyDayPeriodsSinceEpoch!==void 0&&(er.thirtyDayPeriodsSinceEpoch=Math.round(tr.thirtyDayPeriodsSinceEpoch)),tr.hmacKey!==void 0&&(er.hmacKey=base64FromBytes(tr.hmacKey!==void 0?tr.hmacKey:new Uint8Array)),er},fromPartial(tr){var er,rr;const nr=createBaseGetConversationHmacKeysResponse_HmacKeyData();return nr.thirtyDayPeriodsSinceEpoch=(er=tr.thirtyDayPeriodsSinceEpoch)!==null&&er!==void 0?er:0,nr.hmacKey=(rr=tr.hmacKey)!==null&&rr!==void 0?rr:new Uint8Array,nr}};function createBaseGetConversationHmacKeysResponse_HmacKeys(){return{values:[]}}const GetConversationHmacKeysResponse_HmacKeys={encode(tr,er=_m0.Writer.create()){for(const rr of tr.values)GetConversationHmacKeysResponse_HmacKeyData.encode(rr,er.uint32(10).fork()).ldelim();return er},decode(tr,er){const rr=tr instanceof _m0.Reader?tr:new _m0.Reader(tr);let nr=er===void 0?rr.len:rr.pos+er;const ir=createBaseGetConversationHmacKeysResponse_HmacKeys();for(;rr.pos<nr;){const sr=rr.uint32();switch(sr>>>3){case 1:ir.values.push(GetConversationHmacKeysResponse_HmacKeyData.decode(rr,rr.uint32()));break;default:rr.skipType(sr&7);break}}return ir},fromJSON(tr){return{values:Array.isArray(tr==null?void 0:tr.values)?tr.values.map(er=>GetConversationHmacKeysResponse_HmacKeyData.fromJSON(er)):[]}},toJSON(tr){const er={};return tr.values?er.values=tr.values.map(rr=>rr?GetConversationHmacKeysResponse_HmacKeyData.toJSON(rr):void 0):er.values=[],er},fromPartial(tr){var er;const rr=createBaseGetConversationHmacKeysResponse_HmacKeys();return rr.values=((er=tr.values)===null||er===void 0?void 0:er.map(nr=>GetConversationHmacKeysResponse_HmacKeyData.fromPartial(nr)))||[],rr}};function createBaseGetConversationHmacKeysResponse_HmacKeysEntry(){return{key:"",value:void 0}}const GetConversationHmacKeysResponse_HmacKeysEntry={encode(tr,er=_m0.Writer.create()){return tr.key!==""&&er.uint32(10).string(tr.key),tr.value!==void 0&&GetConversationHmacKeysResponse_HmacKeys.encode(tr.value,er.uint32(18).fork()).ldelim(),er},decode(tr,er){const rr=tr instanceof _m0.Reader?tr:new _m0.Reader(tr);let nr=er===void 0?rr.len:rr.pos+er;const ir=createBaseGetConversationHmacKeysResponse_HmacKeysEntry();for(;rr.pos<nr;){const sr=rr.uint32();switch(sr>>>3){case 1:ir.key=rr.string();break;case 2:ir.value=GetConversationHmacKeysResponse_HmacKeys.decode(rr,rr.uint32());break;default:rr.skipType(sr&7);break}}return ir},fromJSON(tr){return{key:isSet$1(tr.key)?String(tr.key):"",value:isSet$1(tr.value)?GetConversationHmacKeysResponse_HmacKeys.fromJSON(tr.value):void 0}},toJSON(tr){const er={};return tr.key!==void 0&&(er.key=tr.key),tr.value!==void 0&&(er.value=tr.value?GetConversationHmacKeysResponse_HmacKeys.toJSON(tr.value):void 0),er},fromPartial(tr){var er;const rr=createBaseGetConversationHmacKeysResponse_HmacKeysEntry();return rr.key=(er=tr.key)!==null&&er!==void 0?er:"",rr.value=tr.value!==void 0&&tr.value!==null?GetConversationHmacKeysResponse_HmacKeys.fromPartial(tr.value):void 0,rr}};var globalThis$p=(()=>{if(typeof globalThis$p<"u")return globalThis$p;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof globalThis$p<"u")return globalThis$p;throw"Unable to locate global object"})();function bytesFromBase64(tr){if(globalThis$p.Buffer)return Uint8Array.from(globalThis$p.Buffer.from(tr,"base64"));{const er=globalThis$p.atob(tr),rr=new Uint8Array(er.length);for(let nr=0;nr<er.length;++nr)rr[nr]=er.charCodeAt(nr);return rr}}function base64FromBytes(tr){if(globalThis$p.Buffer)return globalThis$p.Buffer.from(tr).toString("base64");{const er=[];return tr.forEach(rr=>{er.push(String.fromCharCode(rr))}),globalThis$p.btoa(er.join(""))}}_m0.util.Long!==Long&&(_m0.util.Long=Long,_m0.configure());function isObject$4(tr){return typeof tr=="object"&&tr!==null}function isSet$1(tr){return tr!=null}const i$3=Object.freeze(Object.defineProperty({__proto__:null,CreateAuthTokenRequest,CreateInviteRequest,CreateInviteResponse,DecryptResponse,DecryptResponse_Response,DecryptResponse_Response_Success,DecryptV1Request,DecryptV1Request_Request,DecryptV2Request,DecryptV2Request_Request,EncryptResponse,EncryptResponse_Response,EncryptResponse_Response_Success,EncryptV1Request,EncryptV1Request_Request,EncryptV2Request,EncryptV2Request_Request,get ErrorCode(){return ErrorCode$1},GetConversationHmacKeysRequest,GetConversationHmacKeysResponse,GetConversationHmacKeysResponse_HmacKeyData,GetConversationHmacKeysResponse_HmacKeys,GetConversationHmacKeysResponse_HmacKeysEntry,GetConversationsResponse,GetKeystoreStatusRequest,GetKeystoreStatusResponse,get GetKeystoreStatusResponse_KeystoreStatus(){return GetKeystoreStatusResponse_KeystoreStatus$1},GetPrivatePreferencesTopicIdentifierResponse,GetRefreshJobRequest,GetRefreshJobResponse,InitKeystoreRequest,InitKeystoreResponse,get JobType(){return JobType$1},KeystoreError,SaveInvitesRequest,SaveInvitesRequest_Request,SaveInvitesResponse,SaveInvitesResponse_Response,SaveInvitesResponse_Response_Success,SaveV1ConversationsRequest,SaveV1ConversationsResponse,SelfDecryptRequest,SelfDecryptRequest_Request,SelfEncryptRequest,SelfEncryptRequest_Request,SelfEncryptResponse,SelfEncryptResponse_Response,SelfEncryptResponse_Response_Success,SetRefeshJobRequest,SetRefreshJobResponse,SignDigestRequest,TopicMap,TopicMap_TopicData,TopicMap_TopicsEntry,errorCodeFromJSON,errorCodeToJSON,getKeystoreStatusResponse_KeystoreStatusFromJSON,getKeystoreStatusResponse_KeystoreStatusToJSON,jobTypeFromJSON,jobTypeToJSON,protobufPackage},Symbol.toStringTag,{value:"Module"}));function createBasePrivatePreferencesAction(){return{allowAddress:void 0,denyAddress:void 0,allowGroup:void 0,denyGroup:void 0,allowInboxId:void 0,denyInboxId:void 0}}const PrivatePreferencesAction={encode(tr,er=_m0.Writer.create()){return tr.allowAddress!==void 0&&PrivatePreferencesAction_AllowAddress.encode(tr.allowAddress,er.uint32(10).fork()).ldelim(),tr.denyAddress!==void 0&&PrivatePreferencesAction_DenyAddress.encode(tr.denyAddress,er.uint32(18).fork()).ldelim(),tr.allowGroup!==void 0&&PrivatePreferencesAction_AllowGroup.encode(tr.allowGroup,er.uint32(26).fork()).ldelim(),tr.denyGroup!==void 0&&PrivatePreferencesAction_DenyGroup.encode(tr.denyGroup,er.uint32(34).fork()).ldelim(),tr.allowInboxId!==void 0&&PrivatePreferencesAction_AllowInboxId.encode(tr.allowInboxId,er.uint32(42).fork()).ldelim(),tr.denyInboxId!==void 0&&PrivatePreferencesAction_DenyInboxId.encode(tr.denyInboxId,er.uint32(50).fork()).ldelim(),er},decode(tr,er){const rr=tr instanceof _m0.Reader?tr:new _m0.Reader(tr);let nr=er===void 0?rr.len:rr.pos+er;const ir=createBasePrivatePreferencesAction();for(;rr.pos<nr;){const sr=rr.uint32();switch(sr>>>3){case 1:ir.allowAddress=PrivatePreferencesAction_AllowAddress.decode(rr,rr.uint32());break;case 2:ir.denyAddress=PrivatePreferencesAction_DenyAddress.decode(rr,rr.uint32());break;case 3:ir.allowGroup=PrivatePreferencesAction_AllowGroup.decode(rr,rr.uint32());break;case 4:ir.denyGroup=PrivatePreferencesAction_DenyGroup.decode(rr,rr.uint32());break;case 5:ir.allowInboxId=PrivatePreferencesAction_AllowInboxId.decode(rr,rr.uint32());break;case 6:ir.denyInboxId=PrivatePreferencesAction_DenyInboxId.decode(rr,rr.uint32());break;default:rr.skipType(sr&7);break}}return ir},fromJSON(tr){return{allowAddress:isSet(tr.allowAddress)?PrivatePreferencesAction_AllowAddress.fromJSON(tr.allowAddress):void 0,denyAddress:isSet(tr.denyAddress)?PrivatePreferencesAction_DenyAddress.fromJSON(tr.denyAddress):void 0,allowGroup:isSet(tr.allowGroup)?PrivatePreferencesAction_AllowGroup.fromJSON(tr.allowGroup):void 0,denyGroup:isSet(tr.denyGroup)?PrivatePreferencesAction_DenyGroup.fromJSON(tr.denyGroup):void 0,allowInboxId:isSet(tr.allowInboxId)?PrivatePreferencesAction_AllowInboxId.fromJSON(tr.allowInboxId):void 0,denyInboxId:isSet(tr.denyInboxId)?PrivatePreferencesAction_DenyInboxId.fromJSON(tr.denyInboxId):void 0}},toJSON(tr){const er={};return tr.allowAddress!==void 0&&(er.allowAddress=tr.allowAddress?PrivatePreferencesAction_AllowAddress.toJSON(tr.allowAddress):void 0),tr.denyAddress!==void 0&&(er.denyAddress=tr.denyAddress?PrivatePreferencesAction_DenyAddress.toJSON(tr.denyAddress):void 0),tr.allowGroup!==void 0&&(er.allowGroup=tr.allowGroup?PrivatePreferencesAction_AllowGroup.toJSON(tr.allowGroup):void 0),tr.denyGroup!==void 0&&(er.denyGroup=tr.denyGroup?PrivatePreferencesAction_DenyGroup.toJSON(tr.denyGroup):void 0),tr.allowInboxId!==void 0&&(er.allowInboxId=tr.allowInboxId?PrivatePreferencesAction_AllowInboxId.toJSON(tr.allowInboxId):void 0),tr.denyInboxId!==void 0&&(er.denyInboxId=tr.denyInboxId?PrivatePreferencesAction_DenyInboxId.toJSON(tr.denyInboxId):void 0),er},fromPartial(tr){const er=createBasePrivatePreferencesAction();return er.allowAddress=tr.allowAddress!==void 0&&tr.allowAddress!==null?PrivatePreferencesAction_AllowAddress.fromPartial(tr.allowAddress):void 0,er.denyAddress=tr.denyAddress!==void 0&&tr.denyAddress!==null?PrivatePreferencesAction_DenyAddress.fromPartial(tr.denyAddress):void 0,er.allowGroup=tr.allowGroup!==void 0&&tr.allowGroup!==null?PrivatePreferencesAction_AllowGroup.fromPartial(tr.allowGroup):void 0,er.denyGroup=tr.denyGroup!==void 0&&tr.denyGroup!==null?PrivatePreferencesAction_DenyGroup.fromPartial(tr.denyGroup):void 0,er.allowInboxId=tr.allowInboxId!==void 0&&tr.allowInboxId!==null?PrivatePreferencesAction_AllowInboxId.fromPartial(tr.allowInboxId):void 0,er.denyInboxId=tr.denyInboxId!==void 0&&tr.denyInboxId!==null?PrivatePreferencesAction_DenyInboxId.fromPartial(tr.denyInboxId):void 0,er}};function createBasePrivatePreferencesAction_AllowAddress(){return{walletAddresses:[]}}const PrivatePreferencesAction_AllowAddress={encode(tr,er=_m0.Writer.create()){for(const rr of tr.walletAddresses)er.uint32(10).string(rr);return er},decode(tr,er){const rr=tr instanceof _m0.Reader?tr:new _m0.Reader(tr);let nr=er===void 0?rr.len:rr.pos+er;const ir=createBasePrivatePreferencesAction_AllowAddress();for(;rr.pos<nr;){const sr=rr.uint32();switch(sr>>>3){case 1:ir.walletAddresses.push(rr.string());break;default:rr.skipType(sr&7);break}}return ir},fromJSON(tr){return{walletAddresses:Array.isArray(tr==null?void 0:tr.walletAddresses)?tr.walletAddresses.map(er=>String(er)):[]}},toJSON(tr){const er={};return tr.walletAddresses?er.walletAddresses=tr.walletAddresses.map(rr=>rr):er.walletAddresses=[],er},fromPartial(tr){var er;const rr=createBasePrivatePreferencesAction_AllowAddress();return rr.walletAddresses=((er=tr.walletAddresses)===null||er===void 0?void 0:er.map(nr=>nr))||[],rr}};function createBasePrivatePreferencesAction_DenyAddress(){return{walletAddresses:[]}}const PrivatePreferencesAction_DenyAddress={encode(tr,er=_m0.Writer.create()){for(const rr of tr.walletAddresses)er.uint32(10).string(rr);return er},decode(tr,er){const rr=tr instanceof _m0.Reader?tr:new _m0.Reader(tr);let nr=er===void 0?rr.len:rr.pos+er;const ir=createBasePrivatePreferencesAction_DenyAddress();for(;rr.pos<nr;){const sr=rr.uint32();switch(sr>>>3){case 1:ir.walletAddresses.push(rr.string());break;default:rr.skipType(sr&7);break}}return ir},fromJSON(tr){return{walletAddresses:Array.isArray(tr==null?void 0:tr.walletAddresses)?tr.walletAddresses.map(er=>String(er)):[]}},toJSON(tr){const er={};return tr.walletAddresses?er.walletAddresses=tr.walletAddresses.map(rr=>rr):er.walletAddresses=[],er},fromPartial(tr){var er;const rr=createBasePrivatePreferencesAction_DenyAddress();return rr.walletAddresses=((er=tr.walletAddresses)===null||er===void 0?void 0:er.map(nr=>nr))||[],rr}};function createBasePrivatePreferencesAction_AllowInboxId(){return{inboxIds:[]}}const PrivatePreferencesAction_AllowInboxId={encode(tr,er=_m0.Writer.create()){for(const rr of tr.inboxIds)er.uint32(10).string(rr);return er},decode(tr,er){const rr=tr instanceof _m0.Reader?tr:new _m0.Reader(tr);let nr=er===void 0?rr.len:rr.pos+er;const ir=createBasePrivatePreferencesAction_AllowInboxId();for(;rr.pos<nr;){const sr=rr.uint32();switch(sr>>>3){case 1:ir.inboxIds.push(rr.string());break;default:rr.skipType(sr&7);break}}return ir},fromJSON(tr){return{inboxIds:Array.isArray(tr==null?void 0:tr.inboxIds)?tr.inboxIds.map(er=>String(er)):[]}},toJSON(tr){const er={};return tr.inboxIds?er.inboxIds=tr.inboxIds.map(rr=>rr):er.inboxIds=[],er},fromPartial(tr){var er;const rr=createBasePrivatePreferencesAction_AllowInboxId();return rr.inboxIds=((er=tr.inboxIds)===null||er===void 0?void 0:er.map(nr=>nr))||[],rr}};function createBasePrivatePreferencesAction_DenyInboxId(){return{inboxIds:[]}}const PrivatePreferencesAction_DenyInboxId={encode(tr,er=_m0.Writer.create()){for(const rr of tr.inboxIds)er.uint32(10).string(rr);return er},decode(tr,er){const rr=tr instanceof _m0.Reader?tr:new _m0.Reader(tr);let nr=er===void 0?rr.len:rr.pos+er;const ir=createBasePrivatePreferencesAction_DenyInboxId();for(;rr.pos<nr;){const sr=rr.uint32();switch(sr>>>3){case 1:ir.inboxIds.push(rr.string());break;default:rr.skipType(sr&7);break}}return ir},fromJSON(tr){return{inboxIds:Array.isArray(tr==null?void 0:tr.inboxIds)?tr.inboxIds.map(er=>String(er)):[]}},toJSON(tr){const er={};return tr.inboxIds?er.inboxIds=tr.inboxIds.map(rr=>rr):er.inboxIds=[],er},fromPartial(tr){var er;const rr=createBasePrivatePreferencesAction_DenyInboxId();return rr.inboxIds=((er=tr.inboxIds)===null||er===void 0?void 0:er.map(nr=>nr))||[],rr}};function createBasePrivatePreferencesAction_AllowGroup(){return{groupIds:[]}}const PrivatePreferencesAction_AllowGroup={encode(tr,er=_m0.Writer.create()){for(const rr of tr.groupIds)er.uint32(10).string(rr);return er},decode(tr,er){const rr=tr instanceof _m0.Reader?tr:new _m0.Reader(tr);let nr=er===void 0?rr.len:rr.pos+er;const ir=createBasePrivatePreferencesAction_AllowGroup();for(;rr.pos<nr;){const sr=rr.uint32();switch(sr>>>3){case 1:ir.groupIds.push(rr.string());break;default:rr.skipType(sr&7);break}}return ir},fromJSON(tr){return{groupIds:Array.isArray(tr==null?void 0:tr.groupIds)?tr.groupIds.map(er=>String(er)):[]}},toJSON(tr){const er={};return tr.groupIds?er.groupIds=tr.groupIds.map(rr=>rr):er.groupIds=[],er},fromPartial(tr){var er;const rr=createBasePrivatePreferencesAction_AllowGroup();return rr.groupIds=((er=tr.groupIds)===null||er===void 0?void 0:er.map(nr=>nr))||[],rr}};function createBasePrivatePreferencesAction_DenyGroup(){return{groupIds:[]}}const PrivatePreferencesAction_DenyGroup={encode(tr,er=_m0.Writer.create()){for(const rr of tr.groupIds)er.uint32(10).string(rr);return er},decode(tr,er){const rr=tr instanceof _m0.Reader?tr:new _m0.Reader(tr);let nr=er===void 0?rr.len:rr.pos+er;const ir=createBasePrivatePreferencesAction_DenyGroup();for(;rr.pos<nr;){const sr=rr.uint32();switch(sr>>>3){case 1:ir.groupIds.push(rr.string());break;default:rr.skipType(sr&7);break}}return ir},fromJSON(tr){return{groupIds:Array.isArray(tr==null?void 0:tr.groupIds)?tr.groupIds.map(er=>String(er)):[]}},toJSON(tr){const er={};return tr.groupIds?er.groupIds=tr.groupIds.map(rr=>rr):er.groupIds=[],er},fromPartial(tr){var er;const rr=createBasePrivatePreferencesAction_DenyGroup();return rr.groupIds=((er=tr.groupIds)===null||er===void 0?void 0:er.map(nr=>nr))||[],rr}};_m0.util.Long!==Long&&(_m0.util.Long=Long,_m0.configure());function isSet(tr){return tr!=null}var globalThis$o=(()=>{if(typeof globalThis$o<"u")return globalThis$o;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof globalThis$o<"u")return globalThis$o;throw"Unable to locate global object"})();_m0.util.Long!==Long&&(_m0.util.Long=Long,_m0.configure());var globalThis$n=(()=>{if(typeof globalThis$n<"u")return globalThis$n;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof globalThis$n<"u")return globalThis$n;throw"Unable to locate global object"})();_m0.util.Long!==Long&&(_m0.util.Long=Long,_m0.configure());_m0.util.Long!==Long&&(_m0.util.Long=Long,_m0.configure());var SortDirection$1;(function(tr){tr[tr.SORT_DIRECTION_UNSPECIFIED=0]="SORT_DIRECTION_UNSPECIFIED",tr[tr.SORT_DIRECTION_ASCENDING=1]="SORT_DIRECTION_ASCENDING",tr[tr.SORT_DIRECTION_DESCENDING=2]="SORT_DIRECTION_DESCENDING",tr[tr.UNRECOGNIZED=-1]="UNRECOGNIZED"})(SortDirection$1||(SortDirection$1={}));var globalThis$m=(()=>{if(typeof globalThis$m<"u")return globalThis$m;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof globalThis$m<"u")return globalThis$m;throw"Unable to locate global object"})();_m0.util.Long!==Long&&(_m0.util.Long=Long,_m0.configure());var AdminListUpdateType;(function(tr){tr[tr.ADMIN_LIST_UPDATE_TYPE_UNSPECIFIED=0]="ADMIN_LIST_UPDATE_TYPE_UNSPECIFIED",tr[tr.ADMIN_LIST_UPDATE_TYPE_ADD_ADMIN=1]="ADMIN_LIST_UPDATE_TYPE_ADD_ADMIN",tr[tr.ADMIN_LIST_UPDATE_TYPE_REMOVE_ADMIN=2]="ADMIN_LIST_UPDATE_TYPE_REMOVE_ADMIN",tr[tr.ADMIN_LIST_UPDATE_TYPE_ADD_SUPER_ADMIN=3]="ADMIN_LIST_UPDATE_TYPE_ADD_SUPER_ADMIN",tr[tr.ADMIN_LIST_UPDATE_TYPE_REMOVE_SUPER_ADMIN=4]="ADMIN_LIST_UPDATE_TYPE_REMOVE_SUPER_ADMIN",tr[tr.UNRECOGNIZED=-1]="UNRECOGNIZED"})(AdminListUpdateType||(AdminListUpdateType={}));var PermissionUpdateType;(function(tr){tr[tr.PERMISSION_UPDATE_TYPE_UNSPECIFIED=0]="PERMISSION_UPDATE_TYPE_UNSPECIFIED",tr[tr.PERMISSION_UPDATE_TYPE_ADD_MEMBER=1]="PERMISSION_UPDATE_TYPE_ADD_MEMBER",tr[tr.PERMISSION_UPDATE_TYPE_REMOVE_MEMBER=2]="PERMISSION_UPDATE_TYPE_REMOVE_MEMBER",tr[tr.PERMISSION_UPDATE_TYPE_ADD_ADMIN=3]="PERMISSION_UPDATE_TYPE_ADD_ADMIN",tr[tr.PERMISSION_UPDATE_TYPE_REMOVE_ADMIN=4]="PERMISSION_UPDATE_TYPE_REMOVE_ADMIN",tr[tr.PERMISSION_UPDATE_TYPE_UPDATE_METADATA=5]="PERMISSION_UPDATE_TYPE_UPDATE_METADATA",tr[tr.UNRECOGNIZED=-1]="UNRECOGNIZED"})(PermissionUpdateType||(PermissionUpdateType={}));var PermissionPolicyOption;(function(tr){tr[tr.PERMISSION_POLICY_OPTION_UNSPECIFIED=0]="PERMISSION_POLICY_OPTION_UNSPECIFIED",tr[tr.PERMISSION_POLICY_OPTION_ALLOW=1]="PERMISSION_POLICY_OPTION_ALLOW",tr[tr.PERMISSION_POLICY_OPTION_DENY=2]="PERMISSION_POLICY_OPTION_DENY",tr[tr.PERMISSION_POLICY_OPTION_ADMIN_ONLY=3]="PERMISSION_POLICY_OPTION_ADMIN_ONLY",tr[tr.PERMISSION_POLICY_OPTION_SUPER_ADMIN_ONLY=4]="PERMISSION_POLICY_OPTION_SUPER_ADMIN_ONLY",tr[tr.UNRECOGNIZED=-1]="UNRECOGNIZED"})(PermissionPolicyOption||(PermissionPolicyOption={}));var globalThis$l=(()=>{if(typeof globalThis$l<"u")return globalThis$l;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof globalThis$l<"u")return globalThis$l;throw"Unable to locate global object"})();_m0.util.Long!==Long&&(_m0.util.Long=Long,_m0.configure());var AssociationTextVersion;(function(tr){tr[tr.ASSOCIATION_TEXT_VERSION_UNSPECIFIED=0]="ASSOCIATION_TEXT_VERSION_UNSPECIFIED",tr[tr.ASSOCIATION_TEXT_VERSION_1=1]="ASSOCIATION_TEXT_VERSION_1",tr[tr.UNRECOGNIZED=-1]="UNRECOGNIZED"})(AssociationTextVersion||(AssociationTextVersion={}));var globalThis$k=(()=>{if(typeof globalThis$k<"u")return globalThis$k;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof globalThis$k<"u")return globalThis$k;throw"Unable to locate global object"})();_m0.util.Long!==Long&&(_m0.util.Long=Long,_m0.configure());var Compression$1;(function(tr){tr[tr.COMPRESSION_DEFLATE=0]="COMPRESSION_DEFLATE",tr[tr.COMPRESSION_GZIP=1]="COMPRESSION_GZIP",tr[tr.UNRECOGNIZED=-1]="UNRECOGNIZED"})(Compression$1||(Compression$1={}));var globalThis$j=(()=>{if(typeof globalThis$j<"u")return globalThis$j;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof globalThis$j<"u")return globalThis$j;throw"Unable to locate global object"})();_m0.util.Long!==Long&&(_m0.util.Long=Long,_m0.configure());var globalThis$i=(()=>{if(typeof globalThis$i<"u")return globalThis$i;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof globalThis$i<"u")return globalThis$i;throw"Unable to locate global object"})();_m0.util.Long!==Long&&(_m0.util.Long=Long,_m0.configure());_m0.util.Long!==Long&&(_m0.util.Long=Long,_m0.configure());var ConversationType;(function(tr){tr[tr.CONVERSATION_TYPE_UNSPECIFIED=0]="CONVERSATION_TYPE_UNSPECIFIED",tr[tr.CONVERSATION_TYPE_GROUP=1]="CONVERSATION_TYPE_GROUP",tr[tr.CONVERSATION_TYPE_DM=2]="CONVERSATION_TYPE_DM",tr[tr.CONVERSATION_TYPE_SYNC=3]="CONVERSATION_TYPE_SYNC",tr[tr.UNRECOGNIZED=-1]="UNRECOGNIZED"})(ConversationType||(ConversationType={}));_m0.util.Long!==Long&&(_m0.util.Long=Long,_m0.configure());_m0.util.Long!==Long&&(_m0.util.Long=Long,_m0.configure());var globalThis$h=(()=>{if(typeof globalThis$h<"u")return globalThis$h;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof globalThis$h<"u")return globalThis$h;throw"Unable to locate global object"})();_m0.util.Long!==Long&&(_m0.util.Long=Long,_m0.configure());_m0.util.Long!==Long&&(_m0.util.Long=Long,_m0.configure());var globalThis$g=(()=>{if(typeof globalThis$g<"u")return globalThis$g;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof globalThis$g<"u")return globalThis$g;throw"Unable to locate global object"})();_m0.util.Long!==Long&&(_m0.util.Long=Long,_m0.configure());var globalThis$f=(()=>{if(typeof globalThis$f<"u")return globalThis$f;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof globalThis$f<"u")return globalThis$f;throw"Unable to locate global object"})();_m0.util.Long!==Long&&(_m0.util.Long=Long,_m0.configure());var globalThis$e=(()=>{if(typeof globalThis$e<"u")return globalThis$e;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof globalThis$e<"u")return globalThis$e;throw"Unable to locate global object"})();_m0.util.Long!==Long&&(_m0.util.Long=Long,_m0.configure());var emptyModule,hasRequiredEmptyModule;function requireEmptyModule(){return hasRequiredEmptyModule||(hasRequiredEmptyModule=1,emptyModule=null),emptyModule}var emptyModuleExports=requireEmptyModule();const nodeCrypto=getDefaultExportFromCjs(emptyModuleExports),nodeCrypto$1=_mergeNamespaces({__proto__:null,default:nodeCrypto},[emptyModuleExports]);/*! noble-secp256k1 - MIT License (c) 2019 Paul Miller (paulmillr.com) */const _0n$b=BigInt(0),_1n$c=BigInt(1),_2n$9=BigInt(2),_3n$4=BigInt(3),_8n$2=BigInt(8),CURVE=Object.freeze({a:_0n$b,b:BigInt(7),P:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:_1n$c,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee")}),divNearest$2=(tr,er)=>(tr+er/_2n$9)/er,endo={beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar(tr){const{n:er}=CURVE,rr=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),nr=-_1n$c*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),ir=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),sr=rr,or=BigInt("0x100000000000000000000000000000000"),ar=divNearest$2(sr*tr,er),cr=divNearest$2(-nr*tr,er);let lr=mod$2(tr-ar*rr-cr*ir,er),ur=mod$2(-ar*nr-cr*sr,er);const dr=lr>or,yr=ur>or;if(dr&&(lr=er-lr),yr&&(ur=er-ur),lr>or||ur>or)throw new Error("splitScalarEndo: Endomorphism failed, k="+tr);return{k1neg:dr,k1:lr,k2neg:yr,k2:ur}}},fieldLen=32,groupLen=32,hashLen=32,compressedLen=fieldLen+1,uncompressedLen=2*fieldLen+1;function weierstrass$2(tr){const{a:er,b:rr}=CURVE,nr=mod$2(tr*tr),ir=mod$2(nr*tr);return mod$2(ir+er*tr+rr)}const USE_ENDOMORPHISM=CURVE.a===_0n$b;class ShaError extends Error{constructor(er){super(er)}}function assertJacPoint(tr){if(!(tr instanceof JacobianPoint))throw new TypeError("JacobianPoint expected")}class JacobianPoint{constructor(er,rr,nr){this.x=er,this.y=rr,this.z=nr}static fromAffine(er){if(!(er instanceof Point$4))throw new TypeError("JacobianPoint#fromAffine: expected Point");return er.equals(Point$4.ZERO)?JacobianPoint.ZERO:new JacobianPoint(er.x,er.y,_1n$c)}static toAffineBatch(er){const rr=invertBatch(er.map(nr=>nr.z));return er.map((nr,ir)=>nr.toAffine(rr[ir]))}static normalizeZ(er){return JacobianPoint.toAffineBatch(er).map(JacobianPoint.fromAffine)}equals(er){assertJacPoint(er);const{x:rr,y:nr,z:ir}=this,{x:sr,y:or,z:ar}=er,cr=mod$2(ir*ir),lr=mod$2(ar*ar),ur=mod$2(rr*lr),dr=mod$2(sr*cr),yr=mod$2(mod$2(nr*ar)*lr),mr=mod$2(mod$2(or*ir)*cr);return ur===dr&&yr===mr}negate(){return new JacobianPoint(this.x,mod$2(-this.y),this.z)}double(){const{x:er,y:rr,z:nr}=this,ir=mod$2(er*er),sr=mod$2(rr*rr),or=mod$2(sr*sr),ar=er+sr,cr=mod$2(_2n$9*(mod$2(ar*ar)-ir-or)),lr=mod$2(_3n$4*ir),ur=mod$2(lr*lr),dr=mod$2(ur-_2n$9*cr),yr=mod$2(lr*(cr-dr)-_8n$2*or),mr=mod$2(_2n$9*rr*nr);return new JacobianPoint(dr,yr,mr)}add(er){assertJacPoint(er);const{x:rr,y:nr,z:ir}=this,{x:sr,y:or,z:ar}=er;if(sr===_0n$b||or===_0n$b)return this;if(rr===_0n$b||nr===_0n$b)return er;const cr=mod$2(ir*ir),lr=mod$2(ar*ar),ur=mod$2(rr*lr),dr=mod$2(sr*cr),yr=mod$2(mod$2(nr*ar)*lr),mr=mod$2(mod$2(or*ir)*cr),wr=mod$2(dr-ur),xr=mod$2(mr-yr);if(wr===_0n$b)return xr===_0n$b?this.double():JacobianPoint.ZERO;const Or=mod$2(wr*wr),Tr=mod$2(wr*Or),Ar=mod$2(ur*Or),Nr=mod$2(xr*xr-Tr-_2n$9*Ar),Ur=mod$2(xr*(Ar-Nr)-yr*Tr),Dr=mod$2(ir*ar*wr);return new JacobianPoint(Nr,Ur,Dr)}subtract(er){return this.add(er.negate())}multiplyUnsafe(er){const rr=JacobianPoint.ZERO;if(typeof er=="bigint"&&er===_0n$b)return rr;let nr=normalizeScalar(er);if(nr===_1n$c)return this;if(!USE_ENDOMORPHISM){let dr=rr,yr=this;for(;nr>_0n$b;)nr&_1n$c&&(dr=dr.add(yr)),yr=yr.double(),nr>>=_1n$c;return dr}let{k1neg:ir,k1:sr,k2neg:or,k2:ar}=endo.splitScalar(nr),cr=rr,lr=rr,ur=this;for(;sr>_0n$b||ar>_0n$b;)sr&_1n$c&&(cr=cr.add(ur)),ar&_1n$c&&(lr=lr.add(ur)),ur=ur.double(),sr>>=_1n$c,ar>>=_1n$c;return ir&&(cr=cr.negate()),or&&(lr=lr.negate()),lr=new JacobianPoint(mod$2(lr.x*endo.beta),lr.y,lr.z),cr.add(lr)}precomputeWindow(er){const rr=USE_ENDOMORPHISM?128/er+1:256/er+1,nr=[];let ir=this,sr=ir;for(let or=0;or<rr;or++){sr=ir,nr.push(sr);for(let ar=1;ar<2**(er-1);ar++)sr=sr.add(ir),nr.push(sr);ir=sr.double()}return nr}wNAF(er,rr){!rr&&this.equals(JacobianPoint.BASE)&&(rr=Point$4.BASE);const nr=rr&&rr._WINDOW_SIZE||1;if(256%nr)throw new Error("Point#wNAF: Invalid precomputation window, must be power of 2");let ir=rr&&pointPrecomputes.get(rr);ir||(ir=this.precomputeWindow(nr),rr&&nr!==1&&(ir=JacobianPoint.normalizeZ(ir),pointPrecomputes.set(rr,ir)));let sr=JacobianPoint.ZERO,or=JacobianPoint.BASE;const ar=1+(USE_ENDOMORPHISM?128/nr:256/nr),cr=2**(nr-1),lr=BigInt(2**nr-1),ur=2**nr,dr=BigInt(nr);for(let yr=0;yr<ar;yr++){const mr=yr*cr;let wr=Number(er&lr);er>>=dr,wr>cr&&(wr-=ur,er+=_1n$c);const xr=mr,Or=mr+Math.abs(wr)-1,Tr=yr%2!==0,Ar=wr<0;wr===0?or=or.add(constTimeNegate(Tr,ir[xr])):sr=sr.add(constTimeNegate(Ar,ir[Or]))}return{p:sr,f:or}}multiply(er,rr){let nr=normalizeScalar(er),ir,sr;if(USE_ENDOMORPHISM){const{k1neg:or,k1:ar,k2neg:cr,k2:lr}=endo.splitScalar(nr);let{p:ur,f:dr}=this.wNAF(ar,rr),{p:yr,f:mr}=this.wNAF(lr,rr);ur=constTimeNegate(or,ur),yr=constTimeNegate(cr,yr),yr=new JacobianPoint(mod$2(yr.x*endo.beta),yr.y,yr.z),ir=ur.add(yr),sr=dr.add(mr)}else{const{p:or,f:ar}=this.wNAF(nr,rr);ir=or,sr=ar}return JacobianPoint.normalizeZ([ir,sr])[0]}toAffine(er){const{x:rr,y:nr,z:ir}=this,sr=this.equals(JacobianPoint.ZERO);er==null&&(er=sr?_8n$2:invert$2(ir));const or=er,ar=mod$2(or*or),cr=mod$2(ar*or),lr=mod$2(rr*ar),ur=mod$2(nr*cr),dr=mod$2(ir*or);if(sr)return Point$4.ZERO;if(dr!==_1n$c)throw new Error("invZ was invalid");return new Point$4(lr,ur)}}JacobianPoint.BASE=new JacobianPoint(CURVE.Gx,CURVE.Gy,_1n$c);JacobianPoint.ZERO=new JacobianPoint(_0n$b,_1n$c,_0n$b);function constTimeNegate(tr,er){const rr=er.negate();return tr?rr:er}const pointPrecomputes=new WeakMap;let Point$4=class Wl{constructor(er,rr){this.x=er,this.y=rr}_setWindowSize(er){this._WINDOW_SIZE=er,pointPrecomputes.delete(this)}hasEvenY(){return this.y%_2n$9===_0n$b}static fromCompressedHex(er){const rr=er.length===32,nr=bytesToNumber(rr?er:er.subarray(1));if(!isValidFieldElement(nr))throw new Error("Point is not on curve");const ir=weierstrass$2(nr);let sr=sqrtMod$2(ir);const or=(sr&_1n$c)===_1n$c;rr?or&&(sr=mod$2(-sr)):(er[0]&1)===1!==or&&(sr=mod$2(-sr));const ar=new Wl(nr,sr);return ar.assertValidity(),ar}static fromUncompressedHex(er){const rr=bytesToNumber(er.subarray(1,fieldLen+1)),nr=bytesToNumber(er.subarray(fieldLen+1,fieldLen*2+1)),ir=new Wl(rr,nr);return ir.assertValidity(),ir}static fromHex(er){const rr=ensureBytes$2(er),nr=rr.length,ir=rr[0];if(nr===fieldLen)return this.fromCompressedHex(rr);if(nr===compressedLen&&(ir===2||ir===3))return this.fromCompressedHex(rr);if(nr===uncompressedLen&&ir===4)return this.fromUncompressedHex(rr);throw new Error(`Point.fromHex: received invalid point. Expected 32-${compressedLen} compressed bytes or ${uncompressedLen} uncompressed bytes, not ${nr}`)}static fromPrivateKey(er){return Wl.BASE.multiply(normalizePrivateKey(er))}static fromSignature(er,rr,nr){const{r:ir,s:sr}=normalizeSignature(rr);if(![0,1,2,3].includes(nr))throw new Error("Cannot recover: invalid recovery bit");const or=truncateHash(ensureBytes$2(er)),{n:ar}=CURVE,cr=nr===2||nr===3?ir+ar:ir,lr=invert$2(cr,ar),ur=mod$2(-or*lr,ar),dr=mod$2(sr*lr,ar),yr=nr&1?"03":"02",mr=Wl.fromHex(yr+numTo32bStr(cr)),wr=Wl.BASE.multiplyAndAddUnsafe(mr,ur,dr);if(!wr)throw new Error("Cannot recover signature: point at infinify");return wr.assertValidity(),wr}toRawBytes(er=!1){return hexToBytes$9(this.toHex(er))}toHex(er=!1){const rr=numTo32bStr(this.x);return er?`${this.hasEvenY()?"02":"03"}${rr}`:`04${rr}${numTo32bStr(this.y)}`}toHexX(){return this.toHex(!0).slice(2)}toRawX(){return this.toRawBytes(!0).slice(1)}assertValidity(){const er="Point is not on elliptic curve",{x:rr,y:nr}=this;if(!isValidFieldElement(rr)||!isValidFieldElement(nr))throw new Error(er);const ir=mod$2(nr*nr),sr=weierstrass$2(rr);if(mod$2(ir-sr)!==_0n$b)throw new Error(er)}equals(er){return this.x===er.x&&this.y===er.y}negate(){return new Wl(this.x,mod$2(-this.y))}double(){return JacobianPoint.fromAffine(this).double().toAffine()}add(er){return JacobianPoint.fromAffine(this).add(JacobianPoint.fromAffine(er)).toAffine()}subtract(er){return this.add(er.negate())}multiply(er){return JacobianPoint.fromAffine(this).multiply(er,this).toAffine()}multiplyAndAddUnsafe(er,rr,nr){const ir=JacobianPoint.fromAffine(this),sr=rr===_0n$b||rr===_1n$c||this!==Wl.BASE?ir.multiplyUnsafe(rr):ir.multiply(rr),or=JacobianPoint.fromAffine(er).multiplyUnsafe(nr),ar=sr.add(or);return ar.equals(JacobianPoint.ZERO)?void 0:ar.toAffine()}};Point$4.BASE=new Point$4(CURVE.Gx,CURVE.Gy);Point$4.ZERO=new Point$4(_0n$b,_0n$b);function sliceDER(tr){return Number.parseInt(tr[0],16)>=8?"00"+tr:tr}function parseDERInt(tr){if(tr.length<2||tr[0]!==2)throw new Error(`Invalid signature integer tag: ${bytesToHex$8(tr)}`);const er=tr[1],rr=tr.subarray(2,er+2);if(!er||rr.length!==er)throw new Error("Invalid signature integer: wrong length");if(rr[0]===0&&rr[1]<=127)throw new Error("Invalid signature integer: trailing length");return{data:bytesToNumber(rr),left:tr.subarray(er+2)}}function parseDERSignature(tr){if(tr.length<2||tr[0]!=48)throw new Error(`Invalid signature tag: ${bytesToHex$8(tr)}`);if(tr[1]!==tr.length-2)throw new Error("Invalid signature: incorrect length");const{data:er,left:rr}=parseDERInt(tr.subarray(2)),{data:nr,left:ir}=parseDERInt(rr);if(ir.length)throw new Error(`Invalid signature: left bytes after parsing: ${bytesToHex$8(ir)}`);return{r:er,s:nr}}let Signature$4=class t0{constructor(er,rr){this.r=er,this.s=rr,this.assertValidity()}static fromCompact(er){const rr=er instanceof Uint8Array,nr="Signature.fromCompact";if(typeof er!="string"&&!rr)throw new TypeError(`${nr}: Expected string or Uint8Array`);const ir=rr?bytesToHex$8(er):er;if(ir.length!==128)throw new Error(`${nr}: Expected 64-byte hex`);return new t0(hexToNumber$5(ir.slice(0,64)),hexToNumber$5(ir.slice(64,128)))}static fromDER(er){const rr=er instanceof Uint8Array;if(typeof er!="string"&&!rr)throw new TypeError("Signature.fromDER: Expected string or Uint8Array");const{r:nr,s:ir}=parseDERSignature(rr?er:hexToBytes$9(er));return new t0(nr,ir)}static fromHex(er){return this.fromDER(er)}assertValidity(){const{r:er,s:rr}=this;if(!isWithinCurveOrder(er))throw new Error("Invalid Signature: r must be 0 < r < n");if(!isWithinCurveOrder(rr))throw new Error("Invalid Signature: s must be 0 < s < n")}hasHighS(){const er=CURVE.n>>_1n$c;return this.s>er}normalizeS(){return this.hasHighS()?new t0(this.r,mod$2(-this.s,CURVE.n)):this}toDERRawBytes(){return hexToBytes$9(this.toDERHex())}toDERHex(){const er=sliceDER(numberToHexUnpadded$2(this.s)),rr=sliceDER(numberToHexUnpadded$2(this.r)),nr=er.length/2,ir=rr.length/2,sr=numberToHexUnpadded$2(nr),or=numberToHexUnpadded$2(ir);return`30${numberToHexUnpadded$2(ir+nr+4)}02${or}${rr}02${sr}${er}`}toRawBytes(){return this.toDERRawBytes()}toHex(){return this.toDERHex()}toCompactRawBytes(){return hexToBytes$9(this.toCompactHex())}toCompactHex(){return numTo32bStr(this.r)+numTo32bStr(this.s)}};function concatBytes$8(...tr){if(!tr.every(nr=>nr instanceof Uint8Array))throw new Error("Uint8Array list expected");if(tr.length===1)return tr[0];const er=tr.reduce((nr,ir)=>nr+ir.length,0),rr=new Uint8Array(er);for(let nr=0,ir=0;nr<tr.length;nr++){const sr=tr[nr];rr.set(sr,ir),ir+=sr.length}return rr}const hexes$4=Array.from({length:256},(tr,er)=>er.toString(16).padStart(2,"0"));function bytesToHex$8(tr){if(!(tr instanceof Uint8Array))throw new Error("Expected Uint8Array");let er="";for(let rr=0;rr<tr.length;rr++)er+=hexes$4[tr[rr]];return er}const POW_2_256=BigInt("0x10000000000000000000000000000000000000000000000000000000000000000");function numTo32bStr(tr){if(typeof tr!="bigint")throw new Error("Expected bigint");if(!(_0n$b<=tr&&tr<POW_2_256))throw new Error("Expected number 0 <= n < 2^256");return tr.toString(16).padStart(64,"0")}function numTo32b$1(tr){const er=hexToBytes$9(numTo32bStr(tr));if(er.length!==32)throw new Error("Error: expected 32 bytes");return er}function numberToHexUnpadded$2(tr){const er=tr.toString(16);return er.length&1?`0${er}`:er}function hexToNumber$5(tr){if(typeof tr!="string")throw new TypeError("hexToNumber: expected string, got "+typeof tr);return BigInt(`0x${tr}`)}function hexToBytes$9(tr){if(typeof tr!="string")throw new TypeError("hexToBytes: expected string, got "+typeof tr);if(tr.length%2)throw new Error("hexToBytes: received invalid unpadded hex"+tr.length);const er=new Uint8Array(tr.length/2);for(let rr=0;rr<er.length;rr++){const nr=rr*2,ir=tr.slice(nr,nr+2),sr=Number.parseInt(ir,16);if(Number.isNaN(sr)||sr<0)throw new Error("Invalid byte sequence");er[rr]=sr}return er}function bytesToNumber(tr){return hexToNumber$5(bytesToHex$8(tr))}function ensureBytes$2(tr){return tr instanceof Uint8Array?Uint8Array.from(tr):hexToBytes$9(tr)}function normalizeScalar(tr){if(typeof tr=="number"&&Number.isSafeInteger(tr)&&tr>0)return BigInt(tr);if(typeof tr=="bigint"&&isWithinCurveOrder(tr))return tr;throw new TypeError("Expected valid private scalar: 0 < scalar < curve.n")}function mod$2(tr,er=CURVE.P){const rr=tr%er;return rr>=_0n$b?rr:er+rr}function pow2$2(tr,er){const{P:rr}=CURVE;let nr=tr;for(;er-- >_0n$b;)nr*=nr,nr%=rr;return nr}function sqrtMod$2(tr){const{P:er}=CURVE,rr=BigInt(6),nr=BigInt(11),ir=BigInt(22),sr=BigInt(23),or=BigInt(44),ar=BigInt(88),cr=tr*tr*tr%er,lr=cr*cr*tr%er,ur=pow2$2(lr,_3n$4)*lr%er,dr=pow2$2(ur,_3n$4)*lr%er,yr=pow2$2(dr,_2n$9)*cr%er,mr=pow2$2(yr,nr)*yr%er,wr=pow2$2(mr,ir)*mr%er,xr=pow2$2(wr,or)*wr%er,Or=pow2$2(xr,ar)*xr%er,Tr=pow2$2(Or,or)*wr%er,Ar=pow2$2(Tr,_3n$4)*lr%er,Nr=pow2$2(Ar,sr)*mr%er,Ur=pow2$2(Nr,rr)*cr%er,Dr=pow2$2(Ur,_2n$9);if(Dr*Dr%er!==tr)throw new Error("Cannot find square root");return Dr}function invert$2(tr,er=CURVE.P){if(tr===_0n$b||er<=_0n$b)throw new Error(`invert: expected positive integers, got n=${tr} mod=${er}`);let rr=mod$2(tr,er),nr=er,ir=_0n$b,sr=_1n$c;for(;rr!==_0n$b;){const ar=nr/rr,cr=nr%rr,lr=ir-sr*ar;nr=rr,rr=cr,ir=sr,sr=lr}if(nr!==_1n$c)throw new Error("invert: does not exist");return mod$2(ir,er)}function invertBatch(tr,er=CURVE.P){const rr=new Array(tr.length),nr=tr.reduce((sr,or,ar)=>or===_0n$b?sr:(rr[ar]=sr,mod$2(sr*or,er)),_1n$c),ir=invert$2(nr,er);return tr.reduceRight((sr,or,ar)=>or===_0n$b?sr:(rr[ar]=mod$2(sr*rr[ar],er),mod$2(sr*or,er)),ir),rr}function bits2int_2(tr){const er=tr.length*8-groupLen*8,rr=bytesToNumber(tr);return er>0?rr>>BigInt(er):rr}function truncateHash(tr,er=!1){const rr=bits2int_2(tr);if(er)return rr;const{n:nr}=CURVE;return rr>=nr?rr-nr:rr}let _sha256Sync,_hmacSha256Sync;class HmacDrbg{constructor(er,rr){if(this.hashLen=er,this.qByteLen=rr,typeof er!="number"||er<2)throw new Error("hashLen must be a number");if(typeof rr!="number"||rr<2)throw new Error("qByteLen must be a number");this.v=new Uint8Array(er).fill(1),this.k=new Uint8Array(er).fill(0),this.counter=0}hmac(...er){return utils$v.hmacSha256(this.k,...er)}hmacSync(...er){return _hmacSha256Sync(this.k,...er)}checkSync(){if(typeof _hmacSha256Sync!="function")throw new ShaError("hmacSha256Sync needs to be set")}incr(){if(this.counter>=1e3)throw new Error("Tried 1,000 k values for sign(), all were invalid");this.counter+=1}async reseed(er=new Uint8Array){this.k=await this.hmac(this.v,Uint8Array.from([0]),er),this.v=await this.hmac(this.v),er.length!==0&&(this.k=await this.hmac(this.v,Uint8Array.from([1]),er),this.v=await this.hmac(this.v))}reseedSync(er=new Uint8Array){this.checkSync(),this.k=this.hmacSync(this.v,Uint8Array.from([0]),er),this.v=this.hmacSync(this.v),er.length!==0&&(this.k=this.hmacSync(this.v,Uint8Array.from([1]),er),this.v=this.hmacSync(this.v))}async generate(){this.incr();let er=0;const rr=[];for(;er<this.qByteLen;){this.v=await this.hmac(this.v);const nr=this.v.slice();rr.push(nr),er+=this.v.length}return concatBytes$8(...rr)}generateSync(){this.checkSync(),this.incr();let er=0;const rr=[];for(;er<this.qByteLen;){this.v=this.hmacSync(this.v);const nr=this.v.slice();rr.push(nr),er+=this.v.length}return concatBytes$8(...rr)}}function isWithinCurveOrder(tr){return _0n$b<tr&&tr<CURVE.n}function isValidFieldElement(tr){return _0n$b<tr&&tr<CURVE.P}function kmdToSig(tr,er,rr,nr=!0){const{n:ir}=CURVE,sr=truncateHash(tr,!0);if(!isWithinCurveOrder(sr))return;const or=invert$2(sr,ir),ar=Point$4.BASE.multiply(sr),cr=mod$2(ar.x,ir);if(cr===_0n$b)return;const lr=mod$2(or*mod$2(er+rr*cr,ir),ir);if(lr===_0n$b)return;let ur=new Signature$4(cr,lr),dr=(ar.x===ur.r?0:2)|Number(ar.y&_1n$c);return nr&&ur.hasHighS()&&(ur=ur.normalizeS(),dr^=1),{sig:ur,recovery:dr}}function normalizePrivateKey(tr){let er;if(typeof tr=="bigint")er=tr;else if(typeof tr=="number"&&Number.isSafeInteger(tr)&&tr>0)er=BigInt(tr);else if(typeof tr=="string"){if(tr.length!==2*groupLen)throw new Error("Expected 32 bytes of private key");er=hexToNumber$5(tr)}else if(tr instanceof Uint8Array){if(tr.length!==groupLen)throw new Error("Expected 32 bytes of private key");er=bytesToNumber(tr)}else throw new TypeError("Expected valid private key");if(!isWithinCurveOrder(er))throw new Error("Expected private key: 0 < key < n");return er}function normalizePublicKey(tr){return tr instanceof Point$4?(tr.assertValidity(),tr):Point$4.fromHex(tr)}function normalizeSignature(tr){if(tr instanceof Signature$4)return tr.assertValidity(),tr;try{return Signature$4.fromDER(tr)}catch{return Signature$4.fromCompact(tr)}}function getPublicKey(tr,er=!1){return Point$4.fromPrivateKey(tr).toRawBytes(er)}function recoverPublicKey$2(tr,er,rr,nr=!1){return Point$4.fromSignature(tr,er,rr).toRawBytes(nr)}function isProbPub(tr){const er=tr instanceof Uint8Array,rr=typeof tr=="string",nr=(er||rr)&&tr.length;return er?nr===compressedLen||nr===uncompressedLen:rr?nr===compressedLen*2||nr===uncompressedLen*2:tr instanceof Point$4}function getSharedSecret(tr,er,rr=!1){if(isProbPub(tr))throw new TypeError("getSharedSecret: first arg must be private key");if(!isProbPub(er))throw new TypeError("getSharedSecret: second arg must be public key");const nr=normalizePublicKey(er);return nr.assertValidity(),nr.multiply(normalizePrivateKey(tr)).toRawBytes(rr)}function bits2int(tr){const er=tr.length>fieldLen?tr.slice(0,fieldLen):tr;return bytesToNumber(er)}function bits2octets(tr){const er=bits2int(tr),rr=mod$2(er,CURVE.n);return int2octets(rr<_0n$b?er:rr)}function int2octets(tr){return numTo32b$1(tr)}function initSigArgs(tr,er,rr){if(tr==null)throw new Error(`sign: expected valid message hash, not "${tr}"`);const nr=ensureBytes$2(tr),ir=normalizePrivateKey(er),sr=[int2octets(ir),bits2octets(nr)];if(rr!=null){rr===!0&&(rr=utils$v.randomBytes(fieldLen));const cr=ensureBytes$2(rr);if(cr.length!==fieldLen)throw new Error(`sign: Expected ${fieldLen} bytes of extra data`);sr.push(cr)}const or=concatBytes$8(...sr),ar=bits2int(nr);return{seed:or,m:ar,d:ir}}function finalizeSig(tr,er){const{sig:rr,recovery:nr}=tr,{der:ir,recovered:sr}=Object.assign({canonical:!0,der:!0},er),or=ir?rr.toDERRawBytes():rr.toCompactRawBytes();return sr?[or,nr]:or}async function sign$1(tr,er,rr={}){const{seed:nr,m:ir,d:sr}=initSigArgs(tr,er,rr.extraEntropy),or=new HmacDrbg(hashLen,groupLen);await or.reseed(nr);let ar;for(;!(ar=kmdToSig(await or.generate(),ir,sr,rr.canonical));)await or.reseed();return finalizeSig(ar,rr)}const vopts={strict:!0};function verify(tr,er,rr,nr=vopts){let ir;try{ir=normalizeSignature(tr),er=ensureBytes$2(er)}catch{return!1}const{r:sr,s:or}=ir;if(nr.strict&&ir.hasHighS())return!1;const ar=truncateHash(er);let cr;try{cr=normalizePublicKey(rr)}catch{return!1}const{n:lr}=CURVE,ur=invert$2(or,lr),dr=mod$2(ar*ur,lr),yr=mod$2(sr*ur,lr),mr=Point$4.BASE.multiplyAndAddUnsafe(cr,dr,yr);return mr?mod$2(mr.x,lr)===sr:!1}Point$4.BASE._setWindowSize(8);const crypto$5={node:nodeCrypto$1,web:typeof self=="object"&&"crypto"in self?self.crypto:void 0},TAGGED_HASH_PREFIXES$1={},utils$v={bytesToHex:bytesToHex$8,hexToBytes:hexToBytes$9,concatBytes:concatBytes$8,mod:mod$2,invert:invert$2,isValidPrivateKey(tr){try{return normalizePrivateKey(tr),!0}catch{return!1}},_bigintTo32Bytes:numTo32b$1,_normalizePrivateKey:normalizePrivateKey,hashToPrivateKey:tr=>{tr=ensureBytes$2(tr);const er=groupLen+8;if(tr.length<er||tr.length>1024)throw new Error("Expected valid bytes of private key as per FIPS 186");const rr=mod$2(bytesToNumber(tr),CURVE.n-_1n$c)+_1n$c;return numTo32b$1(rr)},randomBytes:(tr=32)=>{if(crypto$5.web)return crypto$5.web.getRandomValues(new Uint8Array(tr));if(crypto$5.node){const{randomBytes:er}=crypto$5.node;return Uint8Array.from(er(tr))}else throw new Error("The environment doesn't have randomBytes function")},randomPrivateKey:()=>utils$v.hashToPrivateKey(utils$v.randomBytes(groupLen+8)),precompute(tr=8,er=Point$4.BASE){const rr=er===Point$4.BASE?er:new Point$4(er.x,er.y);return rr._setWindowSize(tr),rr.multiply(_3n$4),rr},sha256:async(...tr)=>{if(crypto$5.web){const er=await crypto$5.web.subtle.digest("SHA-256",concatBytes$8(...tr));return new Uint8Array(er)}else if(crypto$5.node){const{createHash:er}=crypto$5.node,rr=er("sha256");return tr.forEach(nr=>rr.update(nr)),Uint8Array.from(rr.digest())}else throw new Error("The environment doesn't have sha256 function")},hmacSha256:async(tr,...er)=>{if(crypto$5.web){const rr=await crypto$5.web.subtle.importKey("raw",tr,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),nr=concatBytes$8(...er),ir=await crypto$5.web.subtle.sign("HMAC",rr,nr);return new Uint8Array(ir)}else if(crypto$5.node){const{createHmac:rr}=crypto$5.node,nr=rr("sha256",tr);return er.forEach(ir=>nr.update(ir)),Uint8Array.from(nr.digest())}else throw new Error("The environment doesn't have hmac-sha256 function")},sha256Sync:void 0,hmacSha256Sync:void 0,taggedHash:async(tr,...er)=>{let rr=TAGGED_HASH_PREFIXES$1[tr];if(rr===void 0){const nr=await utils$v.sha256(Uint8Array.from(tr,ir=>ir.charCodeAt(0)));rr=concatBytes$8(nr,nr),TAGGED_HASH_PREFIXES$1[tr]=rr}return utils$v.sha256(rr,...er)},taggedHashSync:(tr,...er)=>{if(typeof _sha256Sync!="function")throw new ShaError("sha256Sync is undefined, you need to set it");let rr=TAGGED_HASH_PREFIXES$1[tr];if(rr===void 0){const nr=_sha256Sync(Uint8Array.from(tr,ir=>ir.charCodeAt(0)));rr=concatBytes$8(nr,nr),TAGGED_HASH_PREFIXES$1[tr]=rr}return _sha256Sync(rr,...er)},_JacobianPoint:JacobianPoint};Object.defineProperties(utils$v,{sha256Sync:{configurable:!1,get(){return _sha256Sync},set(tr){_sha256Sync||(_sha256Sync=tr)}},hmacSha256Sync:{configurable:!1,get(){return _hmacSha256Sync},set(tr){_hmacSha256Sync||(_hmacSha256Sync=tr)}}});function isHex(tr,{strict:er=!0}={}){return!tr||typeof tr!="string"?!1:er?/^0x[0-9a-fA-F]*$/.test(tr):tr.startsWith("0x")}function size$1(tr){return isHex(tr,{strict:!1})?Math.ceil((tr.length-2)/2):tr.length}const version$4="2.7.15",getVersion=()=>`viem@${version$4}`;class BaseError extends Error{constructor(er,rr={}){var sr;super(),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ViemError"}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:getVersion()});const nr=rr.cause instanceof BaseError?rr.cause.details:(sr=rr.cause)!=null&&sr.message?rr.cause.message:rr.details,ir=rr.cause instanceof BaseError&&rr.cause.docsPath||rr.docsPath;this.message=[er||"An error occurred.","",...rr.metaMessages?[...rr.metaMessages,""]:[],...ir?[`Docs: https://viem.sh${ir}${rr.docsSlug?`#${rr.docsSlug}`:""}`]:[],...nr?[`Details: ${nr}`]:[],`Version: ${this.version}`].join(`
`),rr.cause&&(this.cause=rr.cause),this.details=nr,this.docsPath=ir,this.metaMessages=rr.metaMessages,this.shortMessage=er}walk(er){return walk(this,er)}}function walk(tr,er){return er!=null&&er(tr)?tr:tr&&typeof tr=="object"&&"cause"in tr?walk(tr.cause,er):er?null:tr}class SizeExceedsPaddingSizeError extends BaseError{constructor({size:er,targetSize:rr,type:nr}){super(`${nr.charAt(0).toUpperCase()}${nr.slice(1).toLowerCase()} size (${er}) exceeds padding size (${rr}).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SizeExceedsPaddingSizeError"})}}function pad(tr,{dir:er,size:rr=32}={}){return typeof tr=="string"?padHex(tr,{dir:er,size:rr}):padBytes(tr,{dir:er,size:rr})}function padHex(tr,{dir:er,size:rr=32}={}){if(rr===null)return tr;const nr=tr.replace("0x","");if(nr.length>rr*2)throw new SizeExceedsPaddingSizeError({size:Math.ceil(nr.length/2),targetSize:rr,type:"hex"});return`0x${nr[er==="right"?"padEnd":"padStart"](rr*2,"0")}`}function padBytes(tr,{dir:er,size:rr=32}={}){if(rr===null)return tr;if(tr.length>rr)throw new SizeExceedsPaddingSizeError({size:tr.length,targetSize:rr,type:"bytes"});const nr=new Uint8Array(rr);for(let ir=0;ir<rr;ir++){const sr=er==="right";nr[sr?ir:rr-ir-1]=tr[sr?ir:tr.length-ir-1]}return nr}class IntegerOutOfRangeError extends BaseError{constructor({max:er,min:rr,signed:nr,size:ir,value:sr}){super(`Number "${sr}" is not in safe ${ir?`${ir*8}-bit ${nr?"signed":"unsigned"} `:""}integer range ${er?`(${rr} to ${er})`:`(above ${rr})`}`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"IntegerOutOfRangeError"})}}class SizeOverflowError extends BaseError{constructor({givenSize:er,maxSize:rr}){super(`Size cannot exceed ${rr} bytes. Given size: ${er} bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SizeOverflowError"})}}function assertSize(tr,{size:er}){if(size$1(tr)>er)throw new SizeOverflowError({givenSize:size$1(tr),maxSize:er})}function hexToBigInt$2(tr,er={}){const{signed:rr}=er;er.size&&assertSize(tr,{size:er.size});const nr=BigInt(tr);if(!rr)return nr;const ir=(tr.length-2)/2,sr=(1n<<BigInt(ir)*8n-1n)-1n;return nr<=sr?nr:nr-BigInt(`0x${"f".padStart(ir*2,"f")}`)-1n}function hexToNumber$4(tr,er={}){return Number(hexToBigInt$2(tr,er))}const hexes$3=Array.from({length:256},(tr,er)=>er.toString(16).padStart(2,"0"));function toHex$1(tr,er={}){return typeof tr=="number"||typeof tr=="bigint"?numberToHex$4(tr,er):typeof tr=="string"?stringToHex(tr,er):typeof tr=="boolean"?boolToHex(tr,er):bytesToHex$7(tr,er)}function boolToHex(tr,er={}){const rr=`0x${Number(tr)}`;return typeof er.size=="number"?(assertSize(rr,{size:er.size}),pad(rr,{size:er.size})):rr}function bytesToHex$7(tr,er={}){let rr="";for(let ir=0;ir<tr.length;ir++)rr+=hexes$3[tr[ir]];const nr=`0x${rr}`;return typeof er.size=="number"?(assertSize(nr,{size:er.size}),pad(nr,{dir:"right",size:er.size})):nr}function numberToHex$4(tr,er={}){const{signed:rr,size:nr}=er,ir=BigInt(tr);let sr;nr?rr?sr=(1n<<BigInt(nr)*8n-1n)-1n:sr=2n**(BigInt(nr)*8n)-1n:typeof tr=="number"&&(sr=BigInt(Number.MAX_SAFE_INTEGER));const or=typeof sr=="bigint"&&rr?-sr-1n:0;if(sr&&ir>sr||ir<or){const cr=typeof tr=="bigint"?"n":"";throw new IntegerOutOfRangeError({max:sr?`${sr}${cr}`:void 0,min:`${or}${cr}`,signed:rr,size:nr,value:`${tr}${cr}`})}const ar=`0x${(rr&&ir<0?(1n<<BigInt(nr*8))+BigInt(ir):ir).toString(16)}`;return nr?pad(ar,{size:nr}):ar}const encoder$1=new TextEncoder;function stringToHex(tr,er={}){const rr=encoder$1.encode(tr);return bytesToHex$7(rr,er)}const encoder=new TextEncoder;function toBytes$6(tr,er={}){return typeof tr=="number"||typeof tr=="bigint"?numberToBytes(tr,er):typeof tr=="boolean"?boolToBytes(tr,er):isHex(tr)?hexToBytes$8(tr,er):stringToBytes(tr,er)}function boolToBytes(tr,er={}){const rr=new Uint8Array(1);return rr[0]=Number(tr),typeof er.size=="number"?(assertSize(rr,{size:er.size}),pad(rr,{size:er.size})):rr}const charCodeMap={zero:48,nine:57,A:65,F:70,a:97,f:102};function charCodeToBase16(tr){if(tr>=charCodeMap.zero&&tr<=charCodeMap.nine)return tr-charCodeMap.zero;if(tr>=charCodeMap.A&&tr<=charCodeMap.F)return tr-(charCodeMap.A-10);if(tr>=charCodeMap.a&&tr<=charCodeMap.f)return tr-(charCodeMap.a-10)}function hexToBytes$8(tr,er={}){let rr=tr;er.size&&(assertSize(rr,{size:er.size}),rr=pad(rr,{dir:"right",size:er.size}));let nr=rr.slice(2);nr.length%2&&(nr=`0${nr}`);const ir=nr.length/2,sr=new Uint8Array(ir);for(let or=0,ar=0;or<ir;or++){const cr=charCodeToBase16(nr.charCodeAt(ar++)),lr=charCodeToBase16(nr.charCodeAt(ar++));if(cr===void 0||lr===void 0)throw new BaseError(`Invalid byte sequence ("${nr[ar-2]}${nr[ar-1]}" in "${nr}").`);sr[or]=cr*16+lr}return sr}function numberToBytes(tr,er){const rr=numberToHex$4(tr,er);return hexToBytes$8(rr)}function stringToBytes(tr,er={}){const rr=encoder.encode(tr);return typeof er.size=="number"?(assertSize(rr,{size:er.size}),pad(rr,{dir:"right",size:er.size})):rr}function number$5(tr){if(!Number.isSafeInteger(tr)||tr<0)throw new Error(`Wrong positive integer: ${tr}`)}function bytes$6(tr,...er){if(!(tr instanceof Uint8Array))throw new Error("Expected Uint8Array");if(er.length>0&&!er.includes(tr.length))throw new Error(`Expected Uint8Array of length ${er}, not of length=${tr.length}`)}function hash$6(tr){if(typeof tr!="function"||typeof tr.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");number$5(tr.outputLen),number$5(tr.blockLen)}function exists$2(tr,er=!0){if(tr.destroyed)throw new Error("Hash instance has been destroyed");if(er&&tr.finished)throw new Error("Hash#digest() has already been called")}function output$2(tr,er){bytes$6(tr);const rr=er.outputLen;if(tr.length<rr)throw new Error(`digestInto() expects output buffer of length at least ${rr}`)}const U32_MASK64$1=BigInt(2**32-1),_32n$1=BigInt(32);function fromBig$1(tr,er=!1){return er?{h:Number(tr&U32_MASK64$1),l:Number(tr>>_32n$1&U32_MASK64$1)}:{h:Number(tr>>_32n$1&U32_MASK64$1)|0,l:Number(tr&U32_MASK64$1)|0}}function split$1(tr,er=!1){let rr=new Uint32Array(tr.length),nr=new Uint32Array(tr.length);for(let ir=0;ir<tr.length;ir++){const{h:sr,l:or}=fromBig$1(tr[ir],er);[rr[ir],nr[ir]]=[sr,or]}return[rr,nr]}const rotlSH$1=(tr,er,rr)=>tr<<rr|er>>>32-rr,rotlSL$1=(tr,er,rr)=>er<<rr|tr>>>32-rr,rotlBH$1=(tr,er,rr)=>er<<rr-32|tr>>>64-rr,rotlBL$1=(tr,er,rr)=>tr<<rr-32|er>>>64-rr,crypto$4=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const u8a$1=tr=>tr instanceof Uint8Array,u32$1=tr=>new Uint32Array(tr.buffer,tr.byteOffset,Math.floor(tr.byteLength/4)),createView$1=tr=>new DataView(tr.buffer,tr.byteOffset,tr.byteLength),rotr$1=(tr,er)=>tr<<32-er|tr>>>er,isLE$1=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!isLE$1)throw new Error("Non little-endian hardware is not supported");function utf8ToBytes$5(tr){if(typeof tr!="string")throw new Error(`utf8ToBytes expected string, got ${typeof tr}`);return new Uint8Array(new TextEncoder().encode(tr))}function toBytes$5(tr){if(typeof tr=="string"&&(tr=utf8ToBytes$5(tr)),!u8a$1(tr))throw new Error(`expected Uint8Array, got ${typeof tr}`);return tr}function concatBytes$7(...tr){const er=new Uint8Array(tr.reduce((nr,ir)=>nr+ir.length,0));let rr=0;return tr.forEach(nr=>{if(!u8a$1(nr))throw new Error("Uint8Array expected");er.set(nr,rr),rr+=nr.length}),er}let Hash$8=class{clone(){return this._cloneInto()}};function wrapConstructor$1(tr){const er=nr=>tr().update(toBytes$5(nr)).digest(),rr=tr();return er.outputLen=rr.outputLen,er.blockLen=rr.blockLen,er.create=()=>tr(),er}function randomBytes$2(tr=32){if(crypto$4&&typeof crypto$4.getRandomValues=="function")return crypto$4.getRandomValues(new Uint8Array(tr));throw new Error("crypto.getRandomValues must be defined")}const[SHA3_PI$1,SHA3_ROTL$1,_SHA3_IOTA$1]=[[],[],[]],_0n$a=BigInt(0),_1n$b=BigInt(1),_2n$8=BigInt(2),_7n$1=BigInt(7),_256n$1=BigInt(256),_0x71n$1=BigInt(113);for(let tr=0,er=_1n$b,rr=1,nr=0;tr<24;tr++){[rr,nr]=[nr,(2*rr+3*nr)%5],SHA3_PI$1.push(2*(5*nr+rr)),SHA3_ROTL$1.push((tr+1)*(tr+2)/2%64);let ir=_0n$a;for(let sr=0;sr<7;sr++)er=(er<<_1n$b^(er>>_7n$1)*_0x71n$1)%_256n$1,er&_2n$8&&(ir^=_1n$b<<(_1n$b<<BigInt(sr))-_1n$b);_SHA3_IOTA$1.push(ir)}const[SHA3_IOTA_H$1,SHA3_IOTA_L$1]=split$1(_SHA3_IOTA$1,!0),rotlH$1=(tr,er,rr)=>rr>32?rotlBH$1(tr,er,rr):rotlSH$1(tr,er,rr),rotlL$1=(tr,er,rr)=>rr>32?rotlBL$1(tr,er,rr):rotlSL$1(tr,er,rr);function keccakP$1(tr,er=24){const rr=new Uint32Array(10);for(let nr=24-er;nr<24;nr++){for(let or=0;or<10;or++)rr[or]=tr[or]^tr[or+10]^tr[or+20]^tr[or+30]^tr[or+40];for(let or=0;or<10;or+=2){const ar=(or+8)%10,cr=(or+2)%10,lr=rr[cr],ur=rr[cr+1],dr=rotlH$1(lr,ur,1)^rr[ar],yr=rotlL$1(lr,ur,1)^rr[ar+1];for(let mr=0;mr<50;mr+=10)tr[or+mr]^=dr,tr[or+mr+1]^=yr}let ir=tr[2],sr=tr[3];for(let or=0;or<24;or++){const ar=SHA3_ROTL$1[or],cr=rotlH$1(ir,sr,ar),lr=rotlL$1(ir,sr,ar),ur=SHA3_PI$1[or];ir=tr[ur],sr=tr[ur+1],tr[ur]=cr,tr[ur+1]=lr}for(let or=0;or<50;or+=10){for(let ar=0;ar<10;ar++)rr[ar]=tr[or+ar];for(let ar=0;ar<10;ar++)tr[or+ar]^=~rr[(ar+2)%10]&rr[(ar+4)%10]}tr[0]^=SHA3_IOTA_H$1[nr],tr[1]^=SHA3_IOTA_L$1[nr]}rr.fill(0)}let Keccak$2=class E0 extends Hash$8{constructor(er,rr,nr,ir=!1,sr=24){if(super(),this.blockLen=er,this.suffix=rr,this.outputLen=nr,this.enableXOF=ir,this.rounds=sr,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,number$5(nr),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=u32$1(this.state)}keccak(){keccakP$1(this.state32,this.rounds),this.posOut=0,this.pos=0}update(er){exists$2(this);const{blockLen:rr,state:nr}=this;er=toBytes$5(er);const ir=er.length;for(let sr=0;sr<ir;){const or=Math.min(rr-this.pos,ir-sr);for(let ar=0;ar<or;ar++)nr[this.pos++]^=er[sr++];this.pos===rr&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:er,suffix:rr,pos:nr,blockLen:ir}=this;er[nr]^=rr,rr&128&&nr===ir-1&&this.keccak(),er[ir-1]^=128,this.keccak()}writeInto(er){exists$2(this,!1),bytes$6(er),this.finish();const rr=this.state,{blockLen:nr}=this;for(let ir=0,sr=er.length;ir<sr;){this.posOut>=nr&&this.keccak();const or=Math.min(nr-this.posOut,sr-ir);er.set(rr.subarray(this.posOut,this.posOut+or),ir),this.posOut+=or,ir+=or}return er}xofInto(er){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(er)}xof(er){return number$5(er),this.xofInto(new Uint8Array(er))}digestInto(er){if(output$2(er,this),this.finished)throw new Error("digest() was already called");return this.writeInto(er),this.destroy(),er}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(er){const{blockLen:rr,suffix:nr,outputLen:ir,rounds:sr,enableXOF:or}=this;return er||(er=new E0(rr,nr,ir,or,sr)),er.state32.set(this.state32),er.pos=this.pos,er.posOut=this.posOut,er.finished=this.finished,er.rounds=sr,er.suffix=nr,er.outputLen=ir,er.enableXOF=or,er.destroyed=this.destroyed,er}};const gen$1=(tr,er,rr)=>wrapConstructor$1(()=>new Keccak$2(er,tr,rr)),keccak_256$1=gen$1(1,136,256/8);function keccak256$3(tr,er){const rr=er||"hex",nr=keccak_256$1(isHex(tr,{strict:!1})?toBytes$6(tr):tr);return rr==="bytes"?nr:toHex$1(nr)}class InvalidAddressError extends BaseError{constructor({address:er}){super(`Address "${er}" is invalid.`,{metaMessages:["- Address must be a hex value of 20 bytes (40 hex characters).","- Address must match its checksum counterpart."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAddressError"})}}class LruMap extends Map{constructor(er){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=er}set(er,rr){return super.set(er,rr),this.maxSize&&this.size>this.maxSize&&this.delete(this.keys().next().value),this}}function checksumAddress(tr,er){const rr=tr.substring(2).toLowerCase(),nr=keccak256$3(stringToBytes(rr),"bytes"),ir=rr.split("");for(let sr=0;sr<40;sr+=2)nr[sr>>1]>>4>=8&&ir[sr]&&(ir[sr]=ir[sr].toUpperCase()),(nr[sr>>1]&15)>=8&&ir[sr+1]&&(ir[sr+1]=ir[sr+1].toUpperCase());return`0x${ir.join("")}`}function getAddress(tr,er){if(!isAddress(tr))throw new InvalidAddressError({address:tr});return checksumAddress(tr)}const addressRegex=/^0x[a-fA-F0-9]{40}$/,isAddressCache=new LruMap(8192);function isAddress(tr,{strict:er=!0}={}){if(isAddressCache.has(tr))return isAddressCache.get(tr);const rr=addressRegex.test(tr)?tr.toLowerCase()===tr?!0:er?checksumAddress(tr)===tr:!0:!1;return isAddressCache.set(tr,rr),rr}function concat$1(tr){return typeof tr[0]=="string"?concatHex(tr):concatBytes$6(tr)}function concatBytes$6(tr){let er=0;for(const ir of tr)er+=ir.length;const rr=new Uint8Array(er);let nr=0;for(const ir of tr)rr.set(ir,nr),nr+=ir.length;return rr}function concatHex(tr){return`0x${tr.reduce((er,rr)=>er+rr.replace("0x",""),"")}`}const scriptRel="modulepreload",assetsURL=function(tr){return"/"+tr},seen={},__vitePreload=function tr(er,rr,nr){let ir=Promise.resolve();if(rr&&rr.length>0){document.getElementsByTagName("link");const sr=document.querySelector("meta[property=csp-nonce]"),or=(sr==null?void 0:sr.nonce)||(sr==null?void 0:sr.getAttribute("nonce"));ir=Promise.all(rr.map(ar=>{if(ar=assetsURL(ar),ar in seen)return;seen[ar]=!0;const cr=ar.endsWith(".css"),lr=cr?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${ar}"]${lr}`))return;const ur=document.createElement("link");if(ur.rel=cr?"stylesheet":scriptRel,cr||(ur.as="script",ur.crossOrigin=""),ur.href=ar,or&&ur.setAttribute("nonce",or),document.head.appendChild(ur),cr)return new Promise((dr,yr)=>{ur.addEventListener("load",dr),ur.addEventListener("error",()=>yr(new Error(`Unable to preload CSS for ${ar}`)))})}))}return ir.then(()=>er()).catch(sr=>{const or=new Event("vite:preloadError",{cancelable:!0});if(or.payload=sr,window.dispatchEvent(or),!or.defaultPrevented)throw sr})};function publicKeyToAddress(tr){const er=keccak256$3(`0x${tr.substring(4)}`).substring(26);return checksumAddress(`0x${er}`)}function isAddressEqual(tr,er){if(!isAddress(tr,{strict:!1}))throw new InvalidAddressError({address:tr});if(!isAddress(er,{strict:!1}))throw new InvalidAddressError({address:er});return tr.toLowerCase()===er.toLowerCase()}function setBigUint64$1(tr,er,rr,nr){if(typeof tr.setBigUint64=="function")return tr.setBigUint64(er,rr,nr);const ir=BigInt(32),sr=BigInt(4294967295),or=Number(rr>>ir&sr),ar=Number(rr&sr),cr=nr?4:0,lr=nr?0:4;tr.setUint32(er+cr,or,nr),tr.setUint32(er+lr,ar,nr)}class SHA2 extends Hash$8{constructor(er,rr,nr,ir){super(),this.blockLen=er,this.outputLen=rr,this.padOffset=nr,this.isLE=ir,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(er),this.view=createView$1(this.buffer)}update(er){exists$2(this);const{view:rr,buffer:nr,blockLen:ir}=this;er=toBytes$5(er);const sr=er.length;for(let or=0;or<sr;){const ar=Math.min(ir-this.pos,sr-or);if(ar===ir){const cr=createView$1(er);for(;ir<=sr-or;or+=ir)this.process(cr,or);continue}nr.set(er.subarray(or,or+ar),this.pos),this.pos+=ar,or+=ar,this.pos===ir&&(this.process(rr,0),this.pos=0)}return this.length+=er.length,this.roundClean(),this}digestInto(er){exists$2(this),output$2(er,this),this.finished=!0;const{buffer:rr,view:nr,blockLen:ir,isLE:sr}=this;let{pos:or}=this;rr[or++]=128,this.buffer.subarray(or).fill(0),this.padOffset>ir-or&&(this.process(nr,0),or=0);for(let dr=or;dr<ir;dr++)rr[dr]=0;setBigUint64$1(nr,ir-8,BigInt(this.length*8),sr),this.process(nr,0);const ar=createView$1(er),cr=this.outputLen;if(cr%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const lr=cr/4,ur=this.get();if(lr>ur.length)throw new Error("_sha2: outputLen bigger than state");for(let dr=0;dr<lr;dr++)ar.setUint32(4*dr,ur[dr],sr)}digest(){const{buffer:er,outputLen:rr}=this;this.digestInto(er);const nr=er.slice(0,rr);return this.destroy(),nr}_cloneInto(er){er||(er=new this.constructor),er.set(...this.get());const{blockLen:rr,buffer:nr,length:ir,finished:sr,destroyed:or,pos:ar}=this;return er.length=ir,er.pos=ar,er.finished=sr,er.destroyed=or,ir%rr&&er.buffer.set(nr),er}}const Chi$1=(tr,er,rr)=>tr&er^~tr&rr,Maj$1=(tr,er,rr)=>tr&er^tr&rr^er&rr,SHA256_K$1=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),IV=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),SHA256_W$1=new Uint32Array(64);let SHA256$3=class extends SHA2{constructor(){super(64,32,8,!1),this.A=IV[0]|0,this.B=IV[1]|0,this.C=IV[2]|0,this.D=IV[3]|0,this.E=IV[4]|0,this.F=IV[5]|0,this.G=IV[6]|0,this.H=IV[7]|0}get(){const{A:er,B:rr,C:nr,D:ir,E:sr,F:or,G:ar,H:cr}=this;return[er,rr,nr,ir,sr,or,ar,cr]}set(er,rr,nr,ir,sr,or,ar,cr){this.A=er|0,this.B=rr|0,this.C=nr|0,this.D=ir|0,this.E=sr|0,this.F=or|0,this.G=ar|0,this.H=cr|0}process(er,rr){for(let dr=0;dr<16;dr++,rr+=4)SHA256_W$1[dr]=er.getUint32(rr,!1);for(let dr=16;dr<64;dr++){const yr=SHA256_W$1[dr-15],mr=SHA256_W$1[dr-2],wr=rotr$1(yr,7)^rotr$1(yr,18)^yr>>>3,xr=rotr$1(mr,17)^rotr$1(mr,19)^mr>>>10;SHA256_W$1[dr]=xr+SHA256_W$1[dr-7]+wr+SHA256_W$1[dr-16]|0}let{A:nr,B:ir,C:sr,D:or,E:ar,F:cr,G:lr,H:ur}=this;for(let dr=0;dr<64;dr++){const yr=rotr$1(ar,6)^rotr$1(ar,11)^rotr$1(ar,25),mr=ur+yr+Chi$1(ar,cr,lr)+SHA256_K$1[dr]+SHA256_W$1[dr]|0,xr=(rotr$1(nr,2)^rotr$1(nr,13)^rotr$1(nr,22))+Maj$1(nr,ir,sr)|0;ur=lr,lr=cr,cr=ar,ar=or+mr|0,or=sr,sr=ir,ir=nr,nr=mr+xr|0}nr=nr+this.A|0,ir=ir+this.B|0,sr=sr+this.C|0,or=or+this.D|0,ar=ar+this.E|0,cr=cr+this.F|0,lr=lr+this.G|0,ur=ur+this.H|0,this.set(nr,ir,sr,or,ar,cr,lr,ur)}roundClean(){SHA256_W$1.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}};const sha256$2=wrapConstructor$1(()=>new SHA256$3);async function recoverPublicKey$1({hash:tr,signature:er}){const rr=isHex(er)?er:toHex$1(er),nr=isHex(tr)?tr:toHex$1(tr);let ir=hexToNumber$4(`0x${rr.slice(130)}`);(ir===0||ir===1)&&(ir+=27);const{secp256k1:sr}=await __vitePreload(async()=>{const{secp256k1:ar}=await Promise.resolve().then(()=>secp256k1$5);return{secp256k1:ar}},void 0);return`0x${sr.Signature.fromCompact(rr.substring(2,130)).addRecoveryBit(ir-27).recoverPublicKey(nr.substring(2)).toHex(!1)}`}async function recoverAddress({hash:tr,signature:er}){return publicKeyToAddress(await recoverPublicKey$1({hash:tr,signature:er}))}const presignMessagePrefix=`Ethereum Signed Message:
`;function hashMessage(tr,er){const rr=typeof tr=="string"?stringToBytes(tr):tr.raw instanceof Uint8Array?tr.raw:toBytes$6(tr.raw),nr=stringToBytes(`${presignMessagePrefix}${rr.length}`);return keccak256$3(concat$1([nr,rr]),er)}async function recoverMessageAddress({message:tr,signature:er}){return recoverAddress({hash:hashMessage(tr),signature:er})}async function verifyMessage({address:tr,message:er,signature:rr}){return isAddressEqual(getAddress(tr),await recoverMessageAddress({message:er,signature:rr}))}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const _0n$9=BigInt(0),_1n$a=BigInt(1),_2n$7=BigInt(2),u8a=tr=>tr instanceof Uint8Array,hexes$2=Array.from({length:256},(tr,er)=>er.toString(16).padStart(2,"0"));function bytesToHex$6(tr){if(!u8a(tr))throw new Error("Uint8Array expected");let er="";for(let rr=0;rr<tr.length;rr++)er+=hexes$2[tr[rr]];return er}function numberToHexUnpadded$1(tr){const er=tr.toString(16);return er.length&1?`0${er}`:er}function hexToNumber$3(tr){if(typeof tr!="string")throw new Error("hex string expected, got "+typeof tr);return BigInt(tr===""?"0":`0x${tr}`)}function hexToBytes$7(tr){if(typeof tr!="string")throw new Error("hex string expected, got "+typeof tr);const er=tr.length;if(er%2)throw new Error("padded hex string expected, got unpadded hex of length "+er);const rr=new Uint8Array(er/2);for(let nr=0;nr<rr.length;nr++){const ir=nr*2,sr=tr.slice(ir,ir+2),or=Number.parseInt(sr,16);if(Number.isNaN(or)||or<0)throw new Error("Invalid byte sequence");rr[nr]=or}return rr}function bytesToNumberBE$1(tr){return hexToNumber$3(bytesToHex$6(tr))}function bytesToNumberLE$1(tr){if(!u8a(tr))throw new Error("Uint8Array expected");return hexToNumber$3(bytesToHex$6(Uint8Array.from(tr).reverse()))}function numberToBytesBE$1(tr,er){return hexToBytes$7(tr.toString(16).padStart(er*2,"0"))}function numberToBytesLE$1(tr,er){return numberToBytesBE$1(tr,er).reverse()}function numberToVarBytesBE$1(tr){return hexToBytes$7(numberToHexUnpadded$1(tr))}function ensureBytes$1(tr,er,rr){let nr;if(typeof er=="string")try{nr=hexToBytes$7(er)}catch(sr){throw new Error(`${tr} must be valid hex string, got "${er}". Cause: ${sr}`)}else if(u8a(er))nr=Uint8Array.from(er);else throw new Error(`${tr} must be hex string or Uint8Array`);const ir=nr.length;if(typeof rr=="number"&&ir!==rr)throw new Error(`${tr} expected ${rr} bytes, got ${ir}`);return nr}function concatBytes$5(...tr){const er=new Uint8Array(tr.reduce((nr,ir)=>nr+ir.length,0));let rr=0;return tr.forEach(nr=>{if(!u8a(nr))throw new Error("Uint8Array expected");er.set(nr,rr),rr+=nr.length}),er}function equalBytes$1(tr,er){if(tr.length!==er.length)return!1;for(let rr=0;rr<tr.length;rr++)if(tr[rr]!==er[rr])return!1;return!0}function utf8ToBytes$4(tr){if(typeof tr!="string")throw new Error(`utf8ToBytes expected string, got ${typeof tr}`);return new Uint8Array(new TextEncoder().encode(tr))}function bitLen$1(tr){let er;for(er=0;tr>_0n$9;tr>>=_1n$a,er+=1);return er}function bitGet$1(tr,er){return tr>>BigInt(er)&_1n$a}const bitSet$1=(tr,er,rr)=>tr|(rr?_1n$a:_0n$9)<<BigInt(er),bitMask$1=tr=>(_2n$7<<BigInt(tr-1))-_1n$a,u8n$1=tr=>new Uint8Array(tr),u8fr$1=tr=>Uint8Array.from(tr);function createHmacDrbg$1(tr,er,rr){if(typeof tr!="number"||tr<2)throw new Error("hashLen must be a number");if(typeof er!="number"||er<2)throw new Error("qByteLen must be a number");if(typeof rr!="function")throw new Error("hmacFn must be a function");let nr=u8n$1(tr),ir=u8n$1(tr),sr=0;const or=()=>{nr.fill(1),ir.fill(0),sr=0},ar=(...dr)=>rr(ir,nr,...dr),cr=(dr=u8n$1())=>{ir=ar(u8fr$1([0]),dr),nr=ar(),dr.length!==0&&(ir=ar(u8fr$1([1]),dr),nr=ar())},lr=()=>{if(sr++>=1e3)throw new Error("drbg: tried 1000 values");let dr=0;const yr=[];for(;dr<er;){nr=ar();const mr=nr.slice();yr.push(mr),dr+=nr.length}return concatBytes$5(...yr)};return(dr,yr)=>{or(),cr(dr);let mr;for(;!(mr=yr(lr()));)cr();return or(),mr}}const validatorFns$1={bigint:tr=>typeof tr=="bigint",function:tr=>typeof tr=="function",boolean:tr=>typeof tr=="boolean",string:tr=>typeof tr=="string",stringOrUint8Array:tr=>typeof tr=="string"||tr instanceof Uint8Array,isSafeInteger:tr=>Number.isSafeInteger(tr),array:tr=>Array.isArray(tr),field:(tr,er)=>er.Fp.isValid(tr),hash:tr=>typeof tr=="function"&&Number.isSafeInteger(tr.outputLen)};function validateObject$4(tr,er,rr={}){const nr=(ir,sr,or)=>{const ar=validatorFns$1[sr];if(typeof ar!="function")throw new Error(`Invalid validator "${sr}", expected function`);const cr=tr[ir];if(!(or&&cr===void 0)&&!ar(cr,tr))throw new Error(`Invalid param ${String(ir)}=${cr} (${typeof cr}), expected ${sr}`)};for(const[ir,sr]of Object.entries(er))nr(ir,sr,!1);for(const[ir,sr]of Object.entries(rr))nr(ir,sr,!0);return tr}const ut$2=Object.freeze(Object.defineProperty({__proto__:null,bitGet:bitGet$1,bitLen:bitLen$1,bitMask:bitMask$1,bitSet:bitSet$1,bytesToHex:bytesToHex$6,bytesToNumberBE:bytesToNumberBE$1,bytesToNumberLE:bytesToNumberLE$1,concatBytes:concatBytes$5,createHmacDrbg:createHmacDrbg$1,ensureBytes:ensureBytes$1,equalBytes:equalBytes$1,hexToBytes:hexToBytes$7,hexToNumber:hexToNumber$3,numberToBytesBE:numberToBytesBE$1,numberToBytesLE:numberToBytesLE$1,numberToHexUnpadded:numberToHexUnpadded$1,numberToVarBytesBE:numberToVarBytesBE$1,utf8ToBytes:utf8ToBytes$4,validateObject:validateObject$4},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const _0n$8=BigInt(0),_1n$9=BigInt(1),_2n$6=BigInt(2),_3n$3=BigInt(3),_4n$2=BigInt(4),_5n$1=BigInt(5),_8n$1=BigInt(8);BigInt(9);BigInt(16);function mod$1(tr,er){const rr=tr%er;return rr>=_0n$8?rr:er+rr}function pow$1(tr,er,rr){if(rr<=_0n$8||er<_0n$8)throw new Error("Expected power/modulo > 0");if(rr===_1n$9)return _0n$8;let nr=_1n$9;for(;er>_0n$8;)er&_1n$9&&(nr=nr*tr%rr),tr=tr*tr%rr,er>>=_1n$9;return nr}function pow2$1(tr,er,rr){let nr=tr;for(;er-- >_0n$8;)nr*=nr,nr%=rr;return nr}function invert$1(tr,er){if(tr===_0n$8||er<=_0n$8)throw new Error(`invert: expected positive integers, got n=${tr} mod=${er}`);let rr=mod$1(tr,er),nr=er,ir=_0n$8,sr=_1n$9;for(;rr!==_0n$8;){const ar=nr/rr,cr=nr%rr,lr=ir-sr*ar;nr=rr,rr=cr,ir=sr,sr=lr}if(nr!==_1n$9)throw new Error("invert: does not exist");return mod$1(ir,er)}function tonelliShanks$1(tr){const er=(tr-_1n$9)/_2n$6;let rr,nr,ir;for(rr=tr-_1n$9,nr=0;rr%_2n$6===_0n$8;rr/=_2n$6,nr++);for(ir=_2n$6;ir<tr&&pow$1(ir,er,tr)!==tr-_1n$9;ir++);if(nr===1){const or=(tr+_1n$9)/_4n$2;return function(cr,lr){const ur=cr.pow(lr,or);if(!cr.eql(cr.sqr(ur),lr))throw new Error("Cannot find square root");return ur}}const sr=(rr+_1n$9)/_2n$6;return function(ar,cr){if(ar.pow(cr,er)===ar.neg(ar.ONE))throw new Error("Cannot find square root");let lr=nr,ur=ar.pow(ar.mul(ar.ONE,ir),rr),dr=ar.pow(cr,sr),yr=ar.pow(cr,rr);for(;!ar.eql(yr,ar.ONE);){if(ar.eql(yr,ar.ZERO))return ar.ZERO;let mr=1;for(let xr=ar.sqr(yr);mr<lr&&!ar.eql(xr,ar.ONE);mr++)xr=ar.sqr(xr);const wr=ar.pow(ur,_1n$9<<BigInt(lr-mr-1));ur=ar.sqr(wr),dr=ar.mul(dr,wr),yr=ar.mul(yr,ur),lr=mr}return dr}}function FpSqrt$1(tr){if(tr%_4n$2===_3n$3){const er=(tr+_1n$9)/_4n$2;return function(nr,ir){const sr=nr.pow(ir,er);if(!nr.eql(nr.sqr(sr),ir))throw new Error("Cannot find square root");return sr}}if(tr%_8n$1===_5n$1){const er=(tr-_5n$1)/_8n$1;return function(nr,ir){const sr=nr.mul(ir,_2n$6),or=nr.pow(sr,er),ar=nr.mul(ir,or),cr=nr.mul(nr.mul(ar,_2n$6),or),lr=nr.mul(ar,nr.sub(cr,nr.ONE));if(!nr.eql(nr.sqr(lr),ir))throw new Error("Cannot find square root");return lr}}return tonelliShanks$1(tr)}const FIELD_FIELDS$1=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function validateField$1(tr){const er={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},rr=FIELD_FIELDS$1.reduce((nr,ir)=>(nr[ir]="function",nr),er);return validateObject$4(tr,rr)}function FpPow$1(tr,er,rr){if(rr<_0n$8)throw new Error("Expected power > 0");if(rr===_0n$8)return tr.ONE;if(rr===_1n$9)return er;let nr=tr.ONE,ir=er;for(;rr>_0n$8;)rr&_1n$9&&(nr=tr.mul(nr,ir)),ir=tr.sqr(ir),rr>>=_1n$9;return nr}function FpInvertBatch$1(tr,er){const rr=new Array(er.length),nr=er.reduce((sr,or,ar)=>tr.is0(or)?sr:(rr[ar]=sr,tr.mul(sr,or)),tr.ONE),ir=tr.inv(nr);return er.reduceRight((sr,or,ar)=>tr.is0(or)?sr:(rr[ar]=tr.mul(sr,rr[ar]),tr.mul(sr,or)),ir),rr}function nLength$1(tr,er){const rr=er!==void 0?er:tr.toString(2).length,nr=Math.ceil(rr/8);return{nBitLength:rr,nByteLength:nr}}function Field$1(tr,er,rr=!1,nr={}){if(tr<=_0n$8)throw new Error(`Expected Field ORDER > 0, got ${tr}`);const{nBitLength:ir,nByteLength:sr}=nLength$1(tr,er);if(sr>2048)throw new Error("Field lengths over 2048 bytes are not supported");const or=FpSqrt$1(tr),ar=Object.freeze({ORDER:tr,BITS:ir,BYTES:sr,MASK:bitMask$1(ir),ZERO:_0n$8,ONE:_1n$9,create:cr=>mod$1(cr,tr),isValid:cr=>{if(typeof cr!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof cr}`);return _0n$8<=cr&&cr<tr},is0:cr=>cr===_0n$8,isOdd:cr=>(cr&_1n$9)===_1n$9,neg:cr=>mod$1(-cr,tr),eql:(cr,lr)=>cr===lr,sqr:cr=>mod$1(cr*cr,tr),add:(cr,lr)=>mod$1(cr+lr,tr),sub:(cr,lr)=>mod$1(cr-lr,tr),mul:(cr,lr)=>mod$1(cr*lr,tr),pow:(cr,lr)=>FpPow$1(ar,cr,lr),div:(cr,lr)=>mod$1(cr*invert$1(lr,tr),tr),sqrN:cr=>cr*cr,addN:(cr,lr)=>cr+lr,subN:(cr,lr)=>cr-lr,mulN:(cr,lr)=>cr*lr,inv:cr=>invert$1(cr,tr),sqrt:nr.sqrt||(cr=>or(ar,cr)),invertBatch:cr=>FpInvertBatch$1(ar,cr),cmov:(cr,lr,ur)=>ur?lr:cr,toBytes:cr=>rr?numberToBytesLE$1(cr,sr):numberToBytesBE$1(cr,sr),fromBytes:cr=>{if(cr.length!==sr)throw new Error(`Fp.fromBytes: expected ${sr}, got ${cr.length}`);return rr?bytesToNumberLE$1(cr):bytesToNumberBE$1(cr)}});return Object.freeze(ar)}function getFieldBytesLength$1(tr){if(typeof tr!="bigint")throw new Error("field order must be bigint");const er=tr.toString(2).length;return Math.ceil(er/8)}function getMinHashLength$1(tr){const er=getFieldBytesLength$1(tr);return er+Math.ceil(er/2)}function mapHashToField$1(tr,er,rr=!1){const nr=tr.length,ir=getFieldBytesLength$1(er),sr=getMinHashLength$1(er);if(nr<16||nr<sr||nr>1024)throw new Error(`expected ${sr}-1024 bytes of input, got ${nr}`);const or=rr?bytesToNumberBE$1(tr):bytesToNumberLE$1(tr),ar=mod$1(or,er-_1n$9)+_1n$9;return rr?numberToBytesLE$1(ar,ir):numberToBytesBE$1(ar,ir)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const _0n$7=BigInt(0),_1n$8=BigInt(1);function wNAF$1(tr,er){const rr=(ir,sr)=>{const or=sr.negate();return ir?or:sr},nr=ir=>{const sr=Math.ceil(er/ir)+1,or=2**(ir-1);return{windows:sr,windowSize:or}};return{constTimeNegate:rr,unsafeLadder(ir,sr){let or=tr.ZERO,ar=ir;for(;sr>_0n$7;)sr&_1n$8&&(or=or.add(ar)),ar=ar.double(),sr>>=_1n$8;return or},precomputeWindow(ir,sr){const{windows:or,windowSize:ar}=nr(sr),cr=[];let lr=ir,ur=lr;for(let dr=0;dr<or;dr++){ur=lr,cr.push(ur);for(let yr=1;yr<ar;yr++)ur=ur.add(lr),cr.push(ur);lr=ur.double()}return cr},wNAF(ir,sr,or){const{windows:ar,windowSize:cr}=nr(ir);let lr=tr.ZERO,ur=tr.BASE;const dr=BigInt(2**ir-1),yr=2**ir,mr=BigInt(ir);for(let wr=0;wr<ar;wr++){const xr=wr*cr;let Or=Number(or&dr);or>>=mr,Or>cr&&(Or-=yr,or+=_1n$8);const Tr=xr,Ar=xr+Math.abs(Or)-1,Nr=wr%2!==0,Ur=Or<0;Or===0?ur=ur.add(rr(Nr,sr[Tr])):lr=lr.add(rr(Ur,sr[Ar]))}return{p:lr,f:ur}},wNAFCached(ir,sr,or,ar){const cr=ir._WINDOW_SIZE||1;let lr=sr.get(ir);return lr||(lr=this.precomputeWindow(ir,cr),cr!==1&&sr.set(ir,ar(lr))),this.wNAF(cr,lr,or)}}}function validateBasic$1(tr){return validateField$1(tr.Fp),validateObject$4(tr,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...nLength$1(tr.n,tr.nBitLength),...tr,p:tr.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function validatePointOpts$1(tr){const er=validateBasic$1(tr);validateObject$4(er,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:rr,Fp:nr,a:ir}=er;if(rr){if(!nr.eql(ir,nr.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof rr!="object"||typeof rr.beta!="bigint"||typeof rr.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...er})}const{bytesToNumberBE:b2n$1,hexToBytes:h2b$1}=ut$2,DER$1={Err:class extends Error{constructor(er=""){super(er)}},_parseInt(tr){const{Err:er}=DER$1;if(tr.length<2||tr[0]!==2)throw new er("Invalid signature integer tag");const rr=tr[1],nr=tr.subarray(2,rr+2);if(!rr||nr.length!==rr)throw new er("Invalid signature integer: wrong length");if(nr[0]&128)throw new er("Invalid signature integer: negative");if(nr[0]===0&&!(nr[1]&128))throw new er("Invalid signature integer: unnecessary leading zero");return{d:b2n$1(nr),l:tr.subarray(rr+2)}},toSig(tr){const{Err:er}=DER$1,rr=typeof tr=="string"?h2b$1(tr):tr;if(!(rr instanceof Uint8Array))throw new Error("ui8a expected");let nr=rr.length;if(nr<2||rr[0]!=48)throw new er("Invalid signature tag");if(rr[1]!==nr-2)throw new er("Invalid signature: incorrect length");const{d:ir,l:sr}=DER$1._parseInt(rr.subarray(2)),{d:or,l:ar}=DER$1._parseInt(sr);if(ar.length)throw new er("Invalid signature: left bytes after parsing");return{r:ir,s:or}},hexFromSig(tr){const er=lr=>Number.parseInt(lr[0],16)&8?"00"+lr:lr,rr=lr=>{const ur=lr.toString(16);return ur.length&1?`0${ur}`:ur},nr=er(rr(tr.s)),ir=er(rr(tr.r)),sr=nr.length/2,or=ir.length/2,ar=rr(sr),cr=rr(or);return`30${rr(or+sr+4)}02${cr}${ir}02${ar}${nr}`}},_0n$6=BigInt(0),_1n$7=BigInt(1);BigInt(2);const _3n$2=BigInt(3);BigInt(4);function weierstrassPoints$1(tr){const er=validatePointOpts$1(tr),{Fp:rr}=er,nr=er.toBytes||((wr,xr,Or)=>{const Tr=xr.toAffine();return concatBytes$5(Uint8Array.from([4]),rr.toBytes(Tr.x),rr.toBytes(Tr.y))}),ir=er.fromBytes||(wr=>{const xr=wr.subarray(1),Or=rr.fromBytes(xr.subarray(0,rr.BYTES)),Tr=rr.fromBytes(xr.subarray(rr.BYTES,2*rr.BYTES));return{x:Or,y:Tr}});function sr(wr){const{a:xr,b:Or}=er,Tr=rr.sqr(wr),Ar=rr.mul(Tr,wr);return rr.add(rr.add(Ar,rr.mul(wr,xr)),Or)}if(!rr.eql(rr.sqr(er.Gy),sr(er.Gx)))throw new Error("bad generator point: equation left != right");function or(wr){return typeof wr=="bigint"&&_0n$6<wr&&wr<er.n}function ar(wr){if(!or(wr))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function cr(wr){const{allowedPrivateKeyLengths:xr,nByteLength:Or,wrapPrivateKey:Tr,n:Ar}=er;if(xr&&typeof wr!="bigint"){if(wr instanceof Uint8Array&&(wr=bytesToHex$6(wr)),typeof wr!="string"||!xr.includes(wr.length))throw new Error("Invalid key");wr=wr.padStart(Or*2,"0")}let Nr;try{Nr=typeof wr=="bigint"?wr:bytesToNumberBE$1(ensureBytes$1("private key",wr,Or))}catch{throw new Error(`private key must be ${Or} bytes, hex or bigint, not ${typeof wr}`)}return Tr&&(Nr=mod$1(Nr,Ar)),ar(Nr),Nr}const lr=new Map;function ur(wr){if(!(wr instanceof dr))throw new Error("ProjectivePoint expected")}class dr{constructor(xr,Or,Tr){if(this.px=xr,this.py=Or,this.pz=Tr,xr==null||!rr.isValid(xr))throw new Error("x required");if(Or==null||!rr.isValid(Or))throw new Error("y required");if(Tr==null||!rr.isValid(Tr))throw new Error("z required")}static fromAffine(xr){const{x:Or,y:Tr}=xr||{};if(!xr||!rr.isValid(Or)||!rr.isValid(Tr))throw new Error("invalid affine point");if(xr instanceof dr)throw new Error("projective point not allowed");const Ar=Nr=>rr.eql(Nr,rr.ZERO);return Ar(Or)&&Ar(Tr)?dr.ZERO:new dr(Or,Tr,rr.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(xr){const Or=rr.invertBatch(xr.map(Tr=>Tr.pz));return xr.map((Tr,Ar)=>Tr.toAffine(Or[Ar])).map(dr.fromAffine)}static fromHex(xr){const Or=dr.fromAffine(ir(ensureBytes$1("pointHex",xr)));return Or.assertValidity(),Or}static fromPrivateKey(xr){return dr.BASE.multiply(cr(xr))}_setWindowSize(xr){this._WINDOW_SIZE=xr,lr.delete(this)}assertValidity(){if(this.is0()){if(er.allowInfinityPoint&&!rr.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:xr,y:Or}=this.toAffine();if(!rr.isValid(xr)||!rr.isValid(Or))throw new Error("bad point: x or y not FE");const Tr=rr.sqr(Or),Ar=sr(xr);if(!rr.eql(Tr,Ar))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:xr}=this.toAffine();if(rr.isOdd)return!rr.isOdd(xr);throw new Error("Field doesn't support isOdd")}equals(xr){ur(xr);const{px:Or,py:Tr,pz:Ar}=this,{px:Nr,py:Ur,pz:Dr}=xr,Hr=rr.eql(rr.mul(Or,Dr),rr.mul(Nr,Ar)),zr=rr.eql(rr.mul(Tr,Dr),rr.mul(Ur,Ar));return Hr&&zr}negate(){return new dr(this.px,rr.neg(this.py),this.pz)}double(){const{a:xr,b:Or}=er,Tr=rr.mul(Or,_3n$2),{px:Ar,py:Nr,pz:Ur}=this;let Dr=rr.ZERO,Hr=rr.ZERO,zr=rr.ZERO,Cr=rr.mul(Ar,Ar),Mr=rr.mul(Nr,Nr),Pr=rr.mul(Ur,Ur),Sr=rr.mul(Ar,Nr);return Sr=rr.add(Sr,Sr),zr=rr.mul(Ar,Ur),zr=rr.add(zr,zr),Dr=rr.mul(xr,zr),Hr=rr.mul(Tr,Pr),Hr=rr.add(Dr,Hr),Dr=rr.sub(Mr,Hr),Hr=rr.add(Mr,Hr),Hr=rr.mul(Dr,Hr),Dr=rr.mul(Sr,Dr),zr=rr.mul(Tr,zr),Pr=rr.mul(xr,Pr),Sr=rr.sub(Cr,Pr),Sr=rr.mul(xr,Sr),Sr=rr.add(Sr,zr),zr=rr.add(Cr,Cr),Cr=rr.add(zr,Cr),Cr=rr.add(Cr,Pr),Cr=rr.mul(Cr,Sr),Hr=rr.add(Hr,Cr),Pr=rr.mul(Nr,Ur),Pr=rr.add(Pr,Pr),Cr=rr.mul(Pr,Sr),Dr=rr.sub(Dr,Cr),zr=rr.mul(Pr,Mr),zr=rr.add(zr,zr),zr=rr.add(zr,zr),new dr(Dr,Hr,zr)}add(xr){ur(xr);const{px:Or,py:Tr,pz:Ar}=this,{px:Nr,py:Ur,pz:Dr}=xr;let Hr=rr.ZERO,zr=rr.ZERO,Cr=rr.ZERO;const Mr=er.a,Pr=rr.mul(er.b,_3n$2);let Sr=rr.mul(Or,Nr),pr=rr.mul(Tr,Ur),gr=rr.mul(Ar,Dr),fr=rr.add(Or,Tr),hr=rr.add(Nr,Ur);fr=rr.mul(fr,hr),hr=rr.add(Sr,pr),fr=rr.sub(fr,hr),hr=rr.add(Or,Ar);let br=rr.add(Nr,Dr);return hr=rr.mul(hr,br),br=rr.add(Sr,gr),hr=rr.sub(hr,br),br=rr.add(Tr,Ar),Hr=rr.add(Ur,Dr),br=rr.mul(br,Hr),Hr=rr.add(pr,gr),br=rr.sub(br,Hr),Cr=rr.mul(Mr,hr),Hr=rr.mul(Pr,gr),Cr=rr.add(Hr,Cr),Hr=rr.sub(pr,Cr),Cr=rr.add(pr,Cr),zr=rr.mul(Hr,Cr),pr=rr.add(Sr,Sr),pr=rr.add(pr,Sr),gr=rr.mul(Mr,gr),hr=rr.mul(Pr,hr),pr=rr.add(pr,gr),gr=rr.sub(Sr,gr),gr=rr.mul(Mr,gr),hr=rr.add(hr,gr),Sr=rr.mul(pr,hr),zr=rr.add(zr,Sr),Sr=rr.mul(br,hr),Hr=rr.mul(fr,Hr),Hr=rr.sub(Hr,Sr),Sr=rr.mul(fr,pr),Cr=rr.mul(br,Cr),Cr=rr.add(Cr,Sr),new dr(Hr,zr,Cr)}subtract(xr){return this.add(xr.negate())}is0(){return this.equals(dr.ZERO)}wNAF(xr){return mr.wNAFCached(this,lr,xr,Or=>{const Tr=rr.invertBatch(Or.map(Ar=>Ar.pz));return Or.map((Ar,Nr)=>Ar.toAffine(Tr[Nr])).map(dr.fromAffine)})}multiplyUnsafe(xr){const Or=dr.ZERO;if(xr===_0n$6)return Or;if(ar(xr),xr===_1n$7)return this;const{endo:Tr}=er;if(!Tr)return mr.unsafeLadder(this,xr);let{k1neg:Ar,k1:Nr,k2neg:Ur,k2:Dr}=Tr.splitScalar(xr),Hr=Or,zr=Or,Cr=this;for(;Nr>_0n$6||Dr>_0n$6;)Nr&_1n$7&&(Hr=Hr.add(Cr)),Dr&_1n$7&&(zr=zr.add(Cr)),Cr=Cr.double(),Nr>>=_1n$7,Dr>>=_1n$7;return Ar&&(Hr=Hr.negate()),Ur&&(zr=zr.negate()),zr=new dr(rr.mul(zr.px,Tr.beta),zr.py,zr.pz),Hr.add(zr)}multiply(xr){ar(xr);let Or=xr,Tr,Ar;const{endo:Nr}=er;if(Nr){const{k1neg:Ur,k1:Dr,k2neg:Hr,k2:zr}=Nr.splitScalar(Or);let{p:Cr,f:Mr}=this.wNAF(Dr),{p:Pr,f:Sr}=this.wNAF(zr);Cr=mr.constTimeNegate(Ur,Cr),Pr=mr.constTimeNegate(Hr,Pr),Pr=new dr(rr.mul(Pr.px,Nr.beta),Pr.py,Pr.pz),Tr=Cr.add(Pr),Ar=Mr.add(Sr)}else{const{p:Ur,f:Dr}=this.wNAF(Or);Tr=Ur,Ar=Dr}return dr.normalizeZ([Tr,Ar])[0]}multiplyAndAddUnsafe(xr,Or,Tr){const Ar=dr.BASE,Nr=(Dr,Hr)=>Hr===_0n$6||Hr===_1n$7||!Dr.equals(Ar)?Dr.multiplyUnsafe(Hr):Dr.multiply(Hr),Ur=Nr(this,Or).add(Nr(xr,Tr));return Ur.is0()?void 0:Ur}toAffine(xr){const{px:Or,py:Tr,pz:Ar}=this,Nr=this.is0();xr==null&&(xr=Nr?rr.ONE:rr.inv(Ar));const Ur=rr.mul(Or,xr),Dr=rr.mul(Tr,xr),Hr=rr.mul(Ar,xr);if(Nr)return{x:rr.ZERO,y:rr.ZERO};if(!rr.eql(Hr,rr.ONE))throw new Error("invZ was invalid");return{x:Ur,y:Dr}}isTorsionFree(){const{h:xr,isTorsionFree:Or}=er;if(xr===_1n$7)return!0;if(Or)return Or(dr,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:xr,clearCofactor:Or}=er;return xr===_1n$7?this:Or?Or(dr,this):this.multiplyUnsafe(er.h)}toRawBytes(xr=!0){return this.assertValidity(),nr(dr,this,xr)}toHex(xr=!0){return bytesToHex$6(this.toRawBytes(xr))}}dr.BASE=new dr(er.Gx,er.Gy,rr.ONE),dr.ZERO=new dr(rr.ZERO,rr.ONE,rr.ZERO);const yr=er.nBitLength,mr=wNAF$1(dr,er.endo?Math.ceil(yr/2):yr);return{CURVE:er,ProjectivePoint:dr,normPrivateKeyToScalar:cr,weierstrassEquation:sr,isWithinCurveOrder:or}}function validateOpts$1(tr){const er=validateBasic$1(tr);return validateObject$4(er,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...er})}function weierstrass$1(tr){const er=validateOpts$1(tr),{Fp:rr,n:nr}=er,ir=rr.BYTES+1,sr=2*rr.BYTES+1;function or(hr){return _0n$6<hr&&hr<rr.ORDER}function ar(hr){return mod$1(hr,nr)}function cr(hr){return invert$1(hr,nr)}const{ProjectivePoint:lr,normPrivateKeyToScalar:ur,weierstrassEquation:dr,isWithinCurveOrder:yr}=weierstrassPoints$1({...er,toBytes(hr,br,_r){const $r=br.toAffine(),Er=rr.toBytes($r.x),vr=concatBytes$5;return _r?vr(Uint8Array.from([br.hasEvenY()?2:3]),Er):vr(Uint8Array.from([4]),Er,rr.toBytes($r.y))},fromBytes(hr){const br=hr.length,_r=hr[0],$r=hr.subarray(1);if(br===ir&&(_r===2||_r===3)){const Er=bytesToNumberBE$1($r);if(!or(Er))throw new Error("Point is not on curve");const vr=dr(Er);let Ir=rr.sqrt(vr);const Rr=(Ir&_1n$7)===_1n$7;return(_r&1)===1!==Rr&&(Ir=rr.neg(Ir)),{x:Er,y:Ir}}else if(br===sr&&_r===4){const Er=rr.fromBytes($r.subarray(0,rr.BYTES)),vr=rr.fromBytes($r.subarray(rr.BYTES,2*rr.BYTES));return{x:Er,y:vr}}else throw new Error(`Point of length ${br} was invalid. Expected ${ir} compressed bytes or ${sr} uncompressed bytes`)}}),mr=hr=>bytesToHex$6(numberToBytesBE$1(hr,er.nByteLength));function wr(hr){const br=nr>>_1n$7;return hr>br}function xr(hr){return wr(hr)?ar(-hr):hr}const Or=(hr,br,_r)=>bytesToNumberBE$1(hr.slice(br,_r));class Tr{constructor(br,_r,$r){this.r=br,this.s=_r,this.recovery=$r,this.assertValidity()}static fromCompact(br){const _r=er.nByteLength;return br=ensureBytes$1("compactSignature",br,_r*2),new Tr(Or(br,0,_r),Or(br,_r,2*_r))}static fromDER(br){const{r:_r,s:$r}=DER$1.toSig(ensureBytes$1("DER",br));return new Tr(_r,$r)}assertValidity(){if(!yr(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!yr(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(br){return new Tr(this.r,this.s,br)}recoverPublicKey(br){const{r:_r,s:$r,recovery:Er}=this,vr=zr(ensureBytes$1("msgHash",br));if(Er==null||![0,1,2,3].includes(Er))throw new Error("recovery id invalid");const Ir=Er===2||Er===3?_r+er.n:_r;if(Ir>=rr.ORDER)throw new Error("recovery id 2 or 3 invalid");const Rr=Er&1?"03":"02",Br=lr.fromHex(Rr+mr(Ir)),Jr=cr(Ir),Wr=ar(-vr*Jr),qr=ar($r*Jr),an=lr.BASE.multiplyAndAddUnsafe(Br,Wr,qr);if(!an)throw new Error("point at infinify");return an.assertValidity(),an}hasHighS(){return wr(this.s)}normalizeS(){return this.hasHighS()?new Tr(this.r,ar(-this.s),this.recovery):this}toDERRawBytes(){return hexToBytes$7(this.toDERHex())}toDERHex(){return DER$1.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return hexToBytes$7(this.toCompactHex())}toCompactHex(){return mr(this.r)+mr(this.s)}}const Ar={isValidPrivateKey(hr){try{return ur(hr),!0}catch{return!1}},normPrivateKeyToScalar:ur,randomPrivateKey:()=>{const hr=getMinHashLength$1(er.n);return mapHashToField$1(er.randomBytes(hr),er.n)},precompute(hr=8,br=lr.BASE){return br._setWindowSize(hr),br.multiply(BigInt(3)),br}};function Nr(hr,br=!0){return lr.fromPrivateKey(hr).toRawBytes(br)}function Ur(hr){const br=hr instanceof Uint8Array,_r=typeof hr=="string",$r=(br||_r)&&hr.length;return br?$r===ir||$r===sr:_r?$r===2*ir||$r===2*sr:hr instanceof lr}function Dr(hr,br,_r=!0){if(Ur(hr))throw new Error("first arg must be private key");if(!Ur(br))throw new Error("second arg must be public key");return lr.fromHex(br).multiply(ur(hr)).toRawBytes(_r)}const Hr=er.bits2int||function(hr){const br=bytesToNumberBE$1(hr),_r=hr.length*8-er.nBitLength;return _r>0?br>>BigInt(_r):br},zr=er.bits2int_modN||function(hr){return ar(Hr(hr))},Cr=bitMask$1(er.nBitLength);function Mr(hr){if(typeof hr!="bigint")throw new Error("bigint expected");if(!(_0n$6<=hr&&hr<Cr))throw new Error(`bigint expected < 2^${er.nBitLength}`);return numberToBytesBE$1(hr,er.nByteLength)}function Pr(hr,br,_r=Sr){if(["recovered","canonical"].some(cn=>cn in _r))throw new Error("sign() legacy options not supported");const{hash:$r,randomBytes:Er}=er;let{lowS:vr,prehash:Ir,extraEntropy:Rr}=_r;vr==null&&(vr=!0),hr=ensureBytes$1("msgHash",hr),Ir&&(hr=ensureBytes$1("prehashed msgHash",$r(hr)));const Br=zr(hr),Jr=ur(br),Wr=[Mr(Jr),Mr(Br)];if(Rr!=null){const cn=Rr===!0?Er(rr.BYTES):Rr;Wr.push(ensureBytes$1("extraEntropy",cn))}const qr=concatBytes$5(...Wr),an=Br;function tn(cn){const dn=Hr(cn);if(!yr(dn))return;const Zr=cr(dn),Yr=lr.BASE.multiply(dn).toAffine(),Qr=ar(Yr.x);if(Qr===_0n$6)return;const un=ar(Zr*ar(an+Qr*Jr));if(un===_0n$6)return;let gn=(Yr.x===Qr?0:2)|Number(Yr.y&_1n$7),Rn=un;return vr&&wr(un)&&(Rn=xr(un),gn^=1),new Tr(Qr,Rn,gn)}return{seed:qr,k2sig:tn}}const Sr={lowS:er.lowS,prehash:!1},pr={lowS:er.lowS,prehash:!1};function gr(hr,br,_r=Sr){const{seed:$r,k2sig:Er}=Pr(hr,br,_r),vr=er;return createHmacDrbg$1(vr.hash.outputLen,vr.nByteLength,vr.hmac)($r,Er)}lr.BASE._setWindowSize(8);function fr(hr,br,_r,$r=pr){var Yr;const Er=hr;if(br=ensureBytes$1("msgHash",br),_r=ensureBytes$1("publicKey",_r),"strict"in $r)throw new Error("options.strict was renamed to lowS");const{lowS:vr,prehash:Ir}=$r;let Rr,Br;try{if(typeof Er=="string"||Er instanceof Uint8Array)try{Rr=Tr.fromDER(Er)}catch(Qr){if(!(Qr instanceof DER$1.Err))throw Qr;Rr=Tr.fromCompact(Er)}else if(typeof Er=="object"&&typeof Er.r=="bigint"&&typeof Er.s=="bigint"){const{r:Qr,s:un}=Er;Rr=new Tr(Qr,un)}else throw new Error("PARSE");Br=lr.fromHex(_r)}catch(Qr){if(Qr.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(vr&&Rr.hasHighS())return!1;Ir&&(br=er.hash(br));const{r:Jr,s:Wr}=Rr,qr=zr(br),an=cr(Wr),tn=ar(qr*an),cn=ar(Jr*an),dn=(Yr=lr.BASE.multiplyAndAddUnsafe(Br,tn,cn))==null?void 0:Yr.toAffine();return dn?ar(dn.x)===Jr:!1}return{CURVE:er,getPublicKey:Nr,getSharedSecret:Dr,sign:gr,verify:fr,ProjectivePoint:lr,Signature:Tr,utils:Ar}}let HMAC$1=class extends Hash$8{constructor(er,rr){super(),this.finished=!1,this.destroyed=!1,hash$6(er);const nr=toBytes$5(rr);if(this.iHash=er.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const ir=this.blockLen,sr=new Uint8Array(ir);sr.set(nr.length>ir?er.create().update(nr).digest():nr);for(let or=0;or<sr.length;or++)sr[or]^=54;this.iHash.update(sr),this.oHash=er.create();for(let or=0;or<sr.length;or++)sr[or]^=106;this.oHash.update(sr),sr.fill(0)}update(er){return exists$2(this),this.iHash.update(er),this}digestInto(er){exists$2(this),bytes$6(er,this.outputLen),this.finished=!0,this.iHash.digestInto(er),this.oHash.update(er),this.oHash.digestInto(er),this.destroy()}digest(){const er=new Uint8Array(this.oHash.outputLen);return this.digestInto(er),er}_cloneInto(er){er||(er=Object.create(Object.getPrototypeOf(this),{}));const{oHash:rr,iHash:nr,finished:ir,destroyed:sr,blockLen:or,outputLen:ar}=this;return er=er,er.finished=ir,er.destroyed=sr,er.blockLen=or,er.outputLen=ar,er.oHash=rr._cloneInto(er.oHash),er.iHash=nr._cloneInto(er.iHash),er}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const hmac$2=(tr,er,rr)=>new HMAC$1(tr,er).update(rr).digest();hmac$2.create=(tr,er)=>new HMAC$1(tr,er);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function getHash$1(tr){return{hash:tr,hmac:(er,...rr)=>hmac$2(tr,er,concatBytes$7(...rr)),randomBytes:randomBytes$2}}function createCurve$1(tr,er){const rr=nr=>weierstrass$1({...tr,...getHash$1(nr)});return Object.freeze({...rr(er),create:rr})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const secp256k1P$1=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),secp256k1N$1=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),_1n$6=BigInt(1),_2n$5=BigInt(2),divNearest$1=(tr,er)=>(tr+er/_2n$5)/er;function sqrtMod$1(tr){const er=secp256k1P$1,rr=BigInt(3),nr=BigInt(6),ir=BigInt(11),sr=BigInt(22),or=BigInt(23),ar=BigInt(44),cr=BigInt(88),lr=tr*tr*tr%er,ur=lr*lr*tr%er,dr=pow2$1(ur,rr,er)*ur%er,yr=pow2$1(dr,rr,er)*ur%er,mr=pow2$1(yr,_2n$5,er)*lr%er,wr=pow2$1(mr,ir,er)*mr%er,xr=pow2$1(wr,sr,er)*wr%er,Or=pow2$1(xr,ar,er)*xr%er,Tr=pow2$1(Or,cr,er)*Or%er,Ar=pow2$1(Tr,ar,er)*xr%er,Nr=pow2$1(Ar,rr,er)*ur%er,Ur=pow2$1(Nr,or,er)*wr%er,Dr=pow2$1(Ur,nr,er)*lr%er,Hr=pow2$1(Dr,_2n$5,er);if(!Fp$1.eql(Fp$1.sqr(Hr),tr))throw new Error("Cannot find square root");return Hr}const Fp$1=Field$1(secp256k1P$1,void 0,void 0,{sqrt:sqrtMod$1}),secp256k1$4=createCurve$1({a:BigInt(0),b:BigInt(7),Fp:Fp$1,n:secp256k1N$1,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:tr=>{const er=secp256k1N$1,rr=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),nr=-_1n$6*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),ir=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),sr=rr,or=BigInt("0x100000000000000000000000000000000"),ar=divNearest$1(sr*tr,er),cr=divNearest$1(-nr*tr,er);let lr=mod$1(tr-ar*rr-cr*ir,er),ur=mod$1(-ar*nr-cr*sr,er);const dr=lr>or,yr=ur>or;if(dr&&(lr=er-lr),yr&&(ur=er-ur),lr>or||ur>or)throw new Error("splitScalar: Endomorphism failed, k="+tr);return{k1neg:dr,k1:lr,k2neg:yr,k2:ur}}}},sha256$2);BigInt(0);secp256k1$4.ProjectivePoint;const secp256k1$5=Object.freeze(Object.defineProperty({__proto__:null,secp256k1:secp256k1$4},Symbol.toStringTag,{value:"Module"}));function hexToSignature(tr){const{r:er,s:rr}=secp256k1$4.Signature.fromCompact(tr.slice(2,130)),nr=BigInt(`0x${tr.slice(130)}`);return{r:numberToHex$4(er,{size:32}),s:numberToHex$4(rr,{size:32}),v:nr}}let t$7=class x0{constructor(er){Ys(this,"authorityId");Ys(this,"typeId");Ys(this,"versionMajor");Ys(this,"versionMinor");this.authorityId=er.authorityId,this.typeId=er.typeId,this.versionMajor=er.versionMajor,this.versionMinor=er.versionMinor}toString(){return`${this.authorityId}/${this.typeId}:${this.versionMajor}.${this.versionMinor}`}static fromString(er){const[rr,nr]=er.split(":"),[ir,sr]=rr.split("/"),[or,ar]=nr.split(".");return new x0({authorityId:ir,typeId:sr,versionMajor:Number(or),versionMinor:Number(ar)})}sameAs(er){return this.authorityId===er.authorityId&&this.typeId===er.typeId}};const t$6=new t$7({authorityId:"xmtp.org",typeId:"text",versionMajor:1,versionMinor:0});var n$1;(function(tr){tr.utf8="UTF-8"})(n$1||(n$1={}));let r$5=class{get contentType(){return t$6}encode(er){return{type:t$6,parameters:{encoding:n$1.utf8},content:new TextEncoder().encode(er)}}decode(er){const{encoding:rr}=er.parameters;if(rr!==n$1.utf8)throw new Error(`unrecognized encoding ${rr}`);return new TextDecoder().decode(er.content)}fallback(){}shouldPush(){return!0}};const E_CANCELED=new Error("request for lock canceled");var __awaiter$2=function(tr,er,rr,nr){function ir(sr){return sr instanceof rr?sr:new rr(function(or){or(sr)})}return new(rr||(rr=Promise))(function(sr,or){function ar(ur){try{lr(nr.next(ur))}catch(dr){or(dr)}}function cr(ur){try{lr(nr.throw(ur))}catch(dr){or(dr)}}function lr(ur){ur.done?sr(ur.value):ir(ur.value).then(ar,cr)}lr((nr=nr.apply(tr,er||[])).next())})};class Semaphore{constructor(er,rr=E_CANCELED){this._value=er,this._cancelError=rr,this._queue=[],this._weightedWaiters=[]}acquire(er=1,rr=0){if(er<=0)throw new Error(`invalid weight ${er}: must be positive`);return new Promise((nr,ir)=>{const sr={resolve:nr,reject:ir,weight:er,priority:rr},or=findIndexFromEnd(this._queue,ar=>rr<=ar.priority);or===-1&&er<=this._value?this._dispatchItem(sr):this._queue.splice(or+1,0,sr)})}runExclusive(er){return __awaiter$2(this,arguments,void 0,function*(rr,nr=1,ir=0){const[sr,or]=yield this.acquire(nr,ir);try{return yield rr(sr)}finally{or()}})}waitForUnlock(er=1,rr=0){if(er<=0)throw new Error(`invalid weight ${er}: must be positive`);return this._couldLockImmediately(er,rr)?Promise.resolve():new Promise(nr=>{this._weightedWaiters[er-1]||(this._weightedWaiters[er-1]=[]),insertSorted(this._weightedWaiters[er-1],{resolve:nr,priority:rr})})}isLocked(){return this._value<=0}getValue(){return this._value}setValue(er){this._value=er,this._dispatchQueue()}release(er=1){if(er<=0)throw new Error(`invalid weight ${er}: must be positive`);this._value+=er,this._dispatchQueue()}cancel(){this._queue.forEach(er=>er.reject(this._cancelError)),this._queue=[]}_dispatchQueue(){for(this._drainUnlockWaiters();this._queue.length>0&&this._queue[0].weight<=this._value;)this._dispatchItem(this._queue.shift()),this._drainUnlockWaiters()}_dispatchItem(er){const rr=this._value;this._value-=er.weight,er.resolve([rr,this._newReleaser(er.weight)])}_newReleaser(er){let rr=!1;return()=>{rr||(rr=!0,this.release(er))}}_drainUnlockWaiters(){if(this._queue.length===0)for(let er=this._value;er>0;er--){const rr=this._weightedWaiters[er-1];rr&&(rr.forEach(nr=>nr.resolve()),this._weightedWaiters[er-1]=[])}else{const er=this._queue[0].priority;for(let rr=this._value;rr>0;rr--){const nr=this._weightedWaiters[rr-1];if(!nr)continue;const ir=nr.findIndex(sr=>sr.priority<=er);(ir===-1?nr:nr.splice(0,ir)).forEach(sr=>sr.resolve())}}}_couldLockImmediately(er,rr){return(this._queue.length===0||this._queue[0].priority<rr)&&er<=this._value}}function insertSorted(tr,er){const rr=findIndexFromEnd(tr,nr=>er.priority<=nr.priority);tr.splice(rr+1,0,er)}function findIndexFromEnd(tr,er){for(let rr=tr.length-1;rr>=0;rr--)if(er(tr[rr]))return rr;return-1}var __awaiter$1=function(tr,er,rr,nr){function ir(sr){return sr instanceof rr?sr:new rr(function(or){or(sr)})}return new(rr||(rr=Promise))(function(sr,or){function ar(ur){try{lr(nr.next(ur))}catch(dr){or(dr)}}function cr(ur){try{lr(nr.throw(ur))}catch(dr){or(dr)}}function lr(ur){ur.done?sr(ur.value):ir(ur.value).then(ar,cr)}lr((nr=nr.apply(tr,er||[])).next())})};class Mutex{constructor(er){this._semaphore=new Semaphore(1,er)}acquire(){return __awaiter$1(this,arguments,void 0,function*(er=0){const[,rr]=yield this._semaphore.acquire(1,er);return rr})}runExclusive(er,rr=0){return this._semaphore.runExclusive(()=>er(),1,rr)}isLocked(){return this._semaphore.isLocked()}waitForUnlock(er=0){return this._semaphore.waitForUnlock(1,er)}release(){this._semaphore.isLocked()&&this._semaphore.release()}cancel(){return this._semaphore.cancel()}}var elliptic={};const name$1="elliptic",version$3="6.5.5",description="EC cryptography",main="lib/elliptic.js",files=["lib"],scripts={lint:"eslint lib test","lint:fix":"npm run lint -- --fix",unit:"istanbul test _mocha --reporter=spec test/index.js",test:"npm run lint && npm run unit",version:"grunt dist && git add dist/"},repository={type:"git",url:"git@github.com:indutny/elliptic"},keywords=["EC","Elliptic","curve","Cryptography"],author="Fedor Indutny <fedor@indutny.com>",license="MIT",bugs={url:"https://github.com/indutny/elliptic/issues"},homepage="https://github.com/indutny/elliptic",devDependencies={brfs:"^2.0.2",coveralls:"^3.1.0",eslint:"^7.6.0",grunt:"^1.2.1","grunt-browserify":"^5.3.0","grunt-cli":"^1.3.2","grunt-contrib-connect":"^3.0.0","grunt-contrib-copy":"^1.0.0","grunt-contrib-uglify":"^5.0.0","grunt-mocha-istanbul":"^5.0.2","grunt-saucelabs":"^9.0.1",istanbul:"^0.4.5",mocha:"^8.0.1"},dependencies={"bn.js":"^4.11.9",brorand:"^1.1.0","hash.js":"^1.0.0","hmac-drbg":"^1.0.1",inherits:"^2.0.4","minimalistic-assert":"^1.0.1","minimalistic-crypto-utils":"^1.0.1"},require$$0$4={name:name$1,version:version$3,description,main,files,scripts,repository,keywords,author,license,bugs,homepage,devDependencies,dependencies};var utils$u={},bn$1={exports:{}};const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$3=getAugmentedNamespace(__viteBrowserExternal$1);bn$1.exports;(function(tr){(function(er,rr){function nr(Sr,pr){if(!Sr)throw new Error(pr||"Assertion failed")}function ir(Sr,pr){Sr.super_=pr;var gr=function(){};gr.prototype=pr.prototype,Sr.prototype=new gr,Sr.prototype.constructor=Sr}function sr(Sr,pr,gr){if(sr.isBN(Sr))return Sr;this.negative=0,this.words=null,this.length=0,this.red=null,Sr!==null&&((pr==="le"||pr==="be")&&(gr=pr,pr=10),this._init(Sr||0,pr||10,gr||"be"))}typeof er=="object"?er.exports=sr:rr.BN=sr,sr.BN=sr,sr.wordSize=26;var or;try{typeof window<"u"&&typeof window.Buffer<"u"?or=window.Buffer:or=require$$3.Buffer}catch{}sr.isBN=function(pr){return pr instanceof sr?!0:pr!==null&&typeof pr=="object"&&pr.constructor.wordSize===sr.wordSize&&Array.isArray(pr.words)},sr.max=function(pr,gr){return pr.cmp(gr)>0?pr:gr},sr.min=function(pr,gr){return pr.cmp(gr)<0?pr:gr},sr.prototype._init=function(pr,gr,fr){if(typeof pr=="number")return this._initNumber(pr,gr,fr);if(typeof pr=="object")return this._initArray(pr,gr,fr);gr==="hex"&&(gr=16),nr(gr===(gr|0)&&gr>=2&&gr<=36),pr=pr.toString().replace(/\s+/g,"");var hr=0;pr[0]==="-"&&(hr++,this.negative=1),hr<pr.length&&(gr===16?this._parseHex(pr,hr,fr):(this._parseBase(pr,gr,hr),fr==="le"&&this._initArray(this.toArray(),gr,fr)))},sr.prototype._initNumber=function(pr,gr,fr){pr<0&&(this.negative=1,pr=-pr),pr<67108864?(this.words=[pr&67108863],this.length=1):pr<4503599627370496?(this.words=[pr&67108863,pr/67108864&67108863],this.length=2):(nr(pr<9007199254740992),this.words=[pr&67108863,pr/67108864&67108863,1],this.length=3),fr==="le"&&this._initArray(this.toArray(),gr,fr)},sr.prototype._initArray=function(pr,gr,fr){if(nr(typeof pr.length=="number"),pr.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(pr.length/3),this.words=new Array(this.length);for(var hr=0;hr<this.length;hr++)this.words[hr]=0;var br,_r,$r=0;if(fr==="be")for(hr=pr.length-1,br=0;hr>=0;hr-=3)_r=pr[hr]|pr[hr-1]<<8|pr[hr-2]<<16,this.words[br]|=_r<<$r&67108863,this.words[br+1]=_r>>>26-$r&67108863,$r+=24,$r>=26&&($r-=26,br++);else if(fr==="le")for(hr=0,br=0;hr<pr.length;hr+=3)_r=pr[hr]|pr[hr+1]<<8|pr[hr+2]<<16,this.words[br]|=_r<<$r&67108863,this.words[br+1]=_r>>>26-$r&67108863,$r+=24,$r>=26&&($r-=26,br++);return this.strip()};function ar(Sr,pr){var gr=Sr.charCodeAt(pr);return gr>=65&&gr<=70?gr-55:gr>=97&&gr<=102?gr-87:gr-48&15}function cr(Sr,pr,gr){var fr=ar(Sr,gr);return gr-1>=pr&&(fr|=ar(Sr,gr-1)<<4),fr}sr.prototype._parseHex=function(pr,gr,fr){this.length=Math.ceil((pr.length-gr)/6),this.words=new Array(this.length);for(var hr=0;hr<this.length;hr++)this.words[hr]=0;var br=0,_r=0,$r;if(fr==="be")for(hr=pr.length-1;hr>=gr;hr-=2)$r=cr(pr,gr,hr)<<br,this.words[_r]|=$r&67108863,br>=18?(br-=18,_r+=1,this.words[_r]|=$r>>>26):br+=8;else{var Er=pr.length-gr;for(hr=Er%2===0?gr+1:gr;hr<pr.length;hr+=2)$r=cr(pr,gr,hr)<<br,this.words[_r]|=$r&67108863,br>=18?(br-=18,_r+=1,this.words[_r]|=$r>>>26):br+=8}this.strip()};function lr(Sr,pr,gr,fr){for(var hr=0,br=Math.min(Sr.length,gr),_r=pr;_r<br;_r++){var $r=Sr.charCodeAt(_r)-48;hr*=fr,$r>=49?hr+=$r-49+10:$r>=17?hr+=$r-17+10:hr+=$r}return hr}sr.prototype._parseBase=function(pr,gr,fr){this.words=[0],this.length=1;for(var hr=0,br=1;br<=67108863;br*=gr)hr++;hr--,br=br/gr|0;for(var _r=pr.length-fr,$r=_r%hr,Er=Math.min(_r,_r-$r)+fr,vr=0,Ir=fr;Ir<Er;Ir+=hr)vr=lr(pr,Ir,Ir+hr,gr),this.imuln(br),this.words[0]+vr<67108864?this.words[0]+=vr:this._iaddn(vr);if($r!==0){var Rr=1;for(vr=lr(pr,Ir,pr.length,gr),Ir=0;Ir<$r;Ir++)Rr*=gr;this.imuln(Rr),this.words[0]+vr<67108864?this.words[0]+=vr:this._iaddn(vr)}this.strip()},sr.prototype.copy=function(pr){pr.words=new Array(this.length);for(var gr=0;gr<this.length;gr++)pr.words[gr]=this.words[gr];pr.length=this.length,pr.negative=this.negative,pr.red=this.red},sr.prototype.clone=function(){var pr=new sr(null);return this.copy(pr),pr},sr.prototype._expand=function(pr){for(;this.length<pr;)this.words[this.length++]=0;return this},sr.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},sr.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},sr.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var ur=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],dr=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],yr=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];sr.prototype.toString=function(pr,gr){pr=pr||10,gr=gr|0||1;var fr;if(pr===16||pr==="hex"){fr="";for(var hr=0,br=0,_r=0;_r<this.length;_r++){var $r=this.words[_r],Er=(($r<<hr|br)&16777215).toString(16);br=$r>>>24-hr&16777215,br!==0||_r!==this.length-1?fr=ur[6-Er.length]+Er+fr:fr=Er+fr,hr+=2,hr>=26&&(hr-=26,_r--)}for(br!==0&&(fr=br.toString(16)+fr);fr.length%gr!==0;)fr="0"+fr;return this.negative!==0&&(fr="-"+fr),fr}if(pr===(pr|0)&&pr>=2&&pr<=36){var vr=dr[pr],Ir=yr[pr];fr="";var Rr=this.clone();for(Rr.negative=0;!Rr.isZero();){var Br=Rr.modn(Ir).toString(pr);Rr=Rr.idivn(Ir),Rr.isZero()?fr=Br+fr:fr=ur[vr-Br.length]+Br+fr}for(this.isZero()&&(fr="0"+fr);fr.length%gr!==0;)fr="0"+fr;return this.negative!==0&&(fr="-"+fr),fr}nr(!1,"Base should be between 2 and 36")},sr.prototype.toNumber=function(){var pr=this.words[0];return this.length===2?pr+=this.words[1]*67108864:this.length===3&&this.words[2]===1?pr+=4503599627370496+this.words[1]*67108864:this.length>2&&nr(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-pr:pr},sr.prototype.toJSON=function(){return this.toString(16)},sr.prototype.toBuffer=function(pr,gr){return nr(typeof or<"u"),this.toArrayLike(or,pr,gr)},sr.prototype.toArray=function(pr,gr){return this.toArrayLike(Array,pr,gr)},sr.prototype.toArrayLike=function(pr,gr,fr){var hr=this.byteLength(),br=fr||Math.max(1,hr);nr(hr<=br,"byte array longer than desired length"),nr(br>0,"Requested array length <= 0"),this.strip();var _r=gr==="le",$r=new pr(br),Er,vr,Ir=this.clone();if(_r){for(vr=0;!Ir.isZero();vr++)Er=Ir.andln(255),Ir.iushrn(8),$r[vr]=Er;for(;vr<br;vr++)$r[vr]=0}else{for(vr=0;vr<br-hr;vr++)$r[vr]=0;for(vr=0;!Ir.isZero();vr++)Er=Ir.andln(255),Ir.iushrn(8),$r[br-vr-1]=Er}return $r},Math.clz32?sr.prototype._countBits=function(pr){return 32-Math.clz32(pr)}:sr.prototype._countBits=function(pr){var gr=pr,fr=0;return gr>=4096&&(fr+=13,gr>>>=13),gr>=64&&(fr+=7,gr>>>=7),gr>=8&&(fr+=4,gr>>>=4),gr>=2&&(fr+=2,gr>>>=2),fr+gr},sr.prototype._zeroBits=function(pr){if(pr===0)return 26;var gr=pr,fr=0;return gr&8191||(fr+=13,gr>>>=13),gr&127||(fr+=7,gr>>>=7),gr&15||(fr+=4,gr>>>=4),gr&3||(fr+=2,gr>>>=2),gr&1||fr++,fr},sr.prototype.bitLength=function(){var pr=this.words[this.length-1],gr=this._countBits(pr);return(this.length-1)*26+gr};function mr(Sr){for(var pr=new Array(Sr.bitLength()),gr=0;gr<pr.length;gr++){var fr=gr/26|0,hr=gr%26;pr[gr]=(Sr.words[fr]&1<<hr)>>>hr}return pr}sr.prototype.zeroBits=function(){if(this.isZero())return 0;for(var pr=0,gr=0;gr<this.length;gr++){var fr=this._zeroBits(this.words[gr]);if(pr+=fr,fr!==26)break}return pr},sr.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},sr.prototype.toTwos=function(pr){return this.negative!==0?this.abs().inotn(pr).iaddn(1):this.clone()},sr.prototype.fromTwos=function(pr){return this.testn(pr-1)?this.notn(pr).iaddn(1).ineg():this.clone()},sr.prototype.isNeg=function(){return this.negative!==0},sr.prototype.neg=function(){return this.clone().ineg()},sr.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},sr.prototype.iuor=function(pr){for(;this.length<pr.length;)this.words[this.length++]=0;for(var gr=0;gr<pr.length;gr++)this.words[gr]=this.words[gr]|pr.words[gr];return this.strip()},sr.prototype.ior=function(pr){return nr((this.negative|pr.negative)===0),this.iuor(pr)},sr.prototype.or=function(pr){return this.length>pr.length?this.clone().ior(pr):pr.clone().ior(this)},sr.prototype.uor=function(pr){return this.length>pr.length?this.clone().iuor(pr):pr.clone().iuor(this)},sr.prototype.iuand=function(pr){var gr;this.length>pr.length?gr=pr:gr=this;for(var fr=0;fr<gr.length;fr++)this.words[fr]=this.words[fr]&pr.words[fr];return this.length=gr.length,this.strip()},sr.prototype.iand=function(pr){return nr((this.negative|pr.negative)===0),this.iuand(pr)},sr.prototype.and=function(pr){return this.length>pr.length?this.clone().iand(pr):pr.clone().iand(this)},sr.prototype.uand=function(pr){return this.length>pr.length?this.clone().iuand(pr):pr.clone().iuand(this)},sr.prototype.iuxor=function(pr){var gr,fr;this.length>pr.length?(gr=this,fr=pr):(gr=pr,fr=this);for(var hr=0;hr<fr.length;hr++)this.words[hr]=gr.words[hr]^fr.words[hr];if(this!==gr)for(;hr<gr.length;hr++)this.words[hr]=gr.words[hr];return this.length=gr.length,this.strip()},sr.prototype.ixor=function(pr){return nr((this.negative|pr.negative)===0),this.iuxor(pr)},sr.prototype.xor=function(pr){return this.length>pr.length?this.clone().ixor(pr):pr.clone().ixor(this)},sr.prototype.uxor=function(pr){return this.length>pr.length?this.clone().iuxor(pr):pr.clone().iuxor(this)},sr.prototype.inotn=function(pr){nr(typeof pr=="number"&&pr>=0);var gr=Math.ceil(pr/26)|0,fr=pr%26;this._expand(gr),fr>0&&gr--;for(var hr=0;hr<gr;hr++)this.words[hr]=~this.words[hr]&67108863;return fr>0&&(this.words[hr]=~this.words[hr]&67108863>>26-fr),this.strip()},sr.prototype.notn=function(pr){return this.clone().inotn(pr)},sr.prototype.setn=function(pr,gr){nr(typeof pr=="number"&&pr>=0);var fr=pr/26|0,hr=pr%26;return this._expand(fr+1),gr?this.words[fr]=this.words[fr]|1<<hr:this.words[fr]=this.words[fr]&~(1<<hr),this.strip()},sr.prototype.iadd=function(pr){var gr;if(this.negative!==0&&pr.negative===0)return this.negative=0,gr=this.isub(pr),this.negative^=1,this._normSign();if(this.negative===0&&pr.negative!==0)return pr.negative=0,gr=this.isub(pr),pr.negative=1,gr._normSign();var fr,hr;this.length>pr.length?(fr=this,hr=pr):(fr=pr,hr=this);for(var br=0,_r=0;_r<hr.length;_r++)gr=(fr.words[_r]|0)+(hr.words[_r]|0)+br,this.words[_r]=gr&67108863,br=gr>>>26;for(;br!==0&&_r<fr.length;_r++)gr=(fr.words[_r]|0)+br,this.words[_r]=gr&67108863,br=gr>>>26;if(this.length=fr.length,br!==0)this.words[this.length]=br,this.length++;else if(fr!==this)for(;_r<fr.length;_r++)this.words[_r]=fr.words[_r];return this},sr.prototype.add=function(pr){var gr;return pr.negative!==0&&this.negative===0?(pr.negative=0,gr=this.sub(pr),pr.negative^=1,gr):pr.negative===0&&this.negative!==0?(this.negative=0,gr=pr.sub(this),this.negative=1,gr):this.length>pr.length?this.clone().iadd(pr):pr.clone().iadd(this)},sr.prototype.isub=function(pr){if(pr.negative!==0){pr.negative=0;var gr=this.iadd(pr);return pr.negative=1,gr._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(pr),this.negative=1,this._normSign();var fr=this.cmp(pr);if(fr===0)return this.negative=0,this.length=1,this.words[0]=0,this;var hr,br;fr>0?(hr=this,br=pr):(hr=pr,br=this);for(var _r=0,$r=0;$r<br.length;$r++)gr=(hr.words[$r]|0)-(br.words[$r]|0)+_r,_r=gr>>26,this.words[$r]=gr&67108863;for(;_r!==0&&$r<hr.length;$r++)gr=(hr.words[$r]|0)+_r,_r=gr>>26,this.words[$r]=gr&67108863;if(_r===0&&$r<hr.length&&hr!==this)for(;$r<hr.length;$r++)this.words[$r]=hr.words[$r];return this.length=Math.max(this.length,$r),hr!==this&&(this.negative=1),this.strip()},sr.prototype.sub=function(pr){return this.clone().isub(pr)};function wr(Sr,pr,gr){gr.negative=pr.negative^Sr.negative;var fr=Sr.length+pr.length|0;gr.length=fr,fr=fr-1|0;var hr=Sr.words[0]|0,br=pr.words[0]|0,_r=hr*br,$r=_r&67108863,Er=_r/67108864|0;gr.words[0]=$r;for(var vr=1;vr<fr;vr++){for(var Ir=Er>>>26,Rr=Er&67108863,Br=Math.min(vr,pr.length-1),Jr=Math.max(0,vr-Sr.length+1);Jr<=Br;Jr++){var Wr=vr-Jr|0;hr=Sr.words[Wr]|0,br=pr.words[Jr]|0,_r=hr*br+Rr,Ir+=_r/67108864|0,Rr=_r&67108863}gr.words[vr]=Rr|0,Er=Ir|0}return Er!==0?gr.words[vr]=Er|0:gr.length--,gr.strip()}var xr=function(pr,gr,fr){var hr=pr.words,br=gr.words,_r=fr.words,$r=0,Er,vr,Ir,Rr=hr[0]|0,Br=Rr&8191,Jr=Rr>>>13,Wr=hr[1]|0,qr=Wr&8191,an=Wr>>>13,tn=hr[2]|0,cn=tn&8191,dn=tn>>>13,Zr=hr[3]|0,Yr=Zr&8191,Qr=Zr>>>13,un=hr[4]|0,gn=un&8191,Rn=un>>>13,Pn=hr[5]|0,Cn=Pn&8191,Sn=Pn>>>13,zn=hr[6]|0,Zn=zn&8191,Kn=zn>>>13,eo=hr[7]|0,vn=eo&8191,xn=eo>>>13,Dn=hr[8]|0,Xr=Dn&8191,Lr=Dn>>>13,Fr=hr[9]|0,ln=Fr&8191,mn=Fr>>>13,_n=br[0]|0,An=_n&8191,Gn=_n>>>13,Xs=br[1]|0,Jn=Xs&8191,no=Xs>>>13,zs=br[2]|0,to=zs&8191,No=zs>>>13,Ro=br[3]|0,uo=Ro&8191,To=Ro>>>13,Eo=br[4]|0,so=Eo&8191,Po=Eo>>>13,hn=br[5]|0,pn=hn&8191,kn=hn>>>13,Mn=br[6]|0,Ln=Mn&8191,vo=Mn>>>13,Gr=br[7]|0,nn=Gr&8191,sn=Gr>>>13,kr=br[8]|0,fn=kr&8191,En=kr>>>13,$n=br[9]|0,Tn=$n&8191,Bn=$n>>>13;fr.negative=pr.negative^gr.negative,fr.length=19,Er=Math.imul(Br,An),vr=Math.imul(Br,Gn),vr=vr+Math.imul(Jr,An)|0,Ir=Math.imul(Jr,Gn);var jn=($r+Er|0)+((vr&8191)<<13)|0;$r=(Ir+(vr>>>13)|0)+(jn>>>26)|0,jn&=67108863,Er=Math.imul(qr,An),vr=Math.imul(qr,Gn),vr=vr+Math.imul(an,An)|0,Ir=Math.imul(an,Gn),Er=Er+Math.imul(Br,Jn)|0,vr=vr+Math.imul(Br,no)|0,vr=vr+Math.imul(Jr,Jn)|0,Ir=Ir+Math.imul(Jr,no)|0;var Hn=($r+Er|0)+((vr&8191)<<13)|0;$r=(Ir+(vr>>>13)|0)+(Hn>>>26)|0,Hn&=67108863,Er=Math.imul(cn,An),vr=Math.imul(cn,Gn),vr=vr+Math.imul(dn,An)|0,Ir=Math.imul(dn,Gn),Er=Er+Math.imul(qr,Jn)|0,vr=vr+Math.imul(qr,no)|0,vr=vr+Math.imul(an,Jn)|0,Ir=Ir+Math.imul(an,no)|0,Er=Er+Math.imul(Br,to)|0,vr=vr+Math.imul(Br,No)|0,vr=vr+Math.imul(Jr,to)|0,Ir=Ir+Math.imul(Jr,No)|0;var go=($r+Er|0)+((vr&8191)<<13)|0;$r=(Ir+(vr>>>13)|0)+(go>>>26)|0,go&=67108863,Er=Math.imul(Yr,An),vr=Math.imul(Yr,Gn),vr=vr+Math.imul(Qr,An)|0,Ir=Math.imul(Qr,Gn),Er=Er+Math.imul(cn,Jn)|0,vr=vr+Math.imul(cn,no)|0,vr=vr+Math.imul(dn,Jn)|0,Ir=Ir+Math.imul(dn,no)|0,Er=Er+Math.imul(qr,to)|0,vr=vr+Math.imul(qr,No)|0,vr=vr+Math.imul(an,to)|0,Ir=Ir+Math.imul(an,No)|0,Er=Er+Math.imul(Br,uo)|0,vr=vr+Math.imul(Br,To)|0,vr=vr+Math.imul(Jr,uo)|0,Ir=Ir+Math.imul(Jr,To)|0;var Yn=($r+Er|0)+((vr&8191)<<13)|0;$r=(Ir+(vr>>>13)|0)+(Yn>>>26)|0,Yn&=67108863,Er=Math.imul(gn,An),vr=Math.imul(gn,Gn),vr=vr+Math.imul(Rn,An)|0,Ir=Math.imul(Rn,Gn),Er=Er+Math.imul(Yr,Jn)|0,vr=vr+Math.imul(Yr,no)|0,vr=vr+Math.imul(Qr,Jn)|0,Ir=Ir+Math.imul(Qr,no)|0,Er=Er+Math.imul(cn,to)|0,vr=vr+Math.imul(cn,No)|0,vr=vr+Math.imul(dn,to)|0,Ir=Ir+Math.imul(dn,No)|0,Er=Er+Math.imul(qr,uo)|0,vr=vr+Math.imul(qr,To)|0,vr=vr+Math.imul(an,uo)|0,Ir=Ir+Math.imul(an,To)|0,Er=Er+Math.imul(Br,so)|0,vr=vr+Math.imul(Br,Po)|0,vr=vr+Math.imul(Jr,so)|0,Ir=Ir+Math.imul(Jr,Po)|0;var oo=($r+Er|0)+((vr&8191)<<13)|0;$r=(Ir+(vr>>>13)|0)+(oo>>>26)|0,oo&=67108863,Er=Math.imul(Cn,An),vr=Math.imul(Cn,Gn),vr=vr+Math.imul(Sn,An)|0,Ir=Math.imul(Sn,Gn),Er=Er+Math.imul(gn,Jn)|0,vr=vr+Math.imul(gn,no)|0,vr=vr+Math.imul(Rn,Jn)|0,Ir=Ir+Math.imul(Rn,no)|0,Er=Er+Math.imul(Yr,to)|0,vr=vr+Math.imul(Yr,No)|0,vr=vr+Math.imul(Qr,to)|0,Ir=Ir+Math.imul(Qr,No)|0,Er=Er+Math.imul(cn,uo)|0,vr=vr+Math.imul(cn,To)|0,vr=vr+Math.imul(dn,uo)|0,Ir=Ir+Math.imul(dn,To)|0,Er=Er+Math.imul(qr,so)|0,vr=vr+Math.imul(qr,Po)|0,vr=vr+Math.imul(an,so)|0,Ir=Ir+Math.imul(an,Po)|0,Er=Er+Math.imul(Br,pn)|0,vr=vr+Math.imul(Br,kn)|0,vr=vr+Math.imul(Jr,pn)|0,Ir=Ir+Math.imul(Jr,kn)|0;var co=($r+Er|0)+((vr&8191)<<13)|0;$r=(Ir+(vr>>>13)|0)+(co>>>26)|0,co&=67108863,Er=Math.imul(Zn,An),vr=Math.imul(Zn,Gn),vr=vr+Math.imul(Kn,An)|0,Ir=Math.imul(Kn,Gn),Er=Er+Math.imul(Cn,Jn)|0,vr=vr+Math.imul(Cn,no)|0,vr=vr+Math.imul(Sn,Jn)|0,Ir=Ir+Math.imul(Sn,no)|0,Er=Er+Math.imul(gn,to)|0,vr=vr+Math.imul(gn,No)|0,vr=vr+Math.imul(Rn,to)|0,Ir=Ir+Math.imul(Rn,No)|0,Er=Er+Math.imul(Yr,uo)|0,vr=vr+Math.imul(Yr,To)|0,vr=vr+Math.imul(Qr,uo)|0,Ir=Ir+Math.imul(Qr,To)|0,Er=Er+Math.imul(cn,so)|0,vr=vr+Math.imul(cn,Po)|0,vr=vr+Math.imul(dn,so)|0,Ir=Ir+Math.imul(dn,Po)|0,Er=Er+Math.imul(qr,pn)|0,vr=vr+Math.imul(qr,kn)|0,vr=vr+Math.imul(an,pn)|0,Ir=Ir+Math.imul(an,kn)|0,Er=Er+Math.imul(Br,Ln)|0,vr=vr+Math.imul(Br,vo)|0,vr=vr+Math.imul(Jr,Ln)|0,Ir=Ir+Math.imul(Jr,vo)|0;var ro=($r+Er|0)+((vr&8191)<<13)|0;$r=(Ir+(vr>>>13)|0)+(ro>>>26)|0,ro&=67108863,Er=Math.imul(vn,An),vr=Math.imul(vn,Gn),vr=vr+Math.imul(xn,An)|0,Ir=Math.imul(xn,Gn),Er=Er+Math.imul(Zn,Jn)|0,vr=vr+Math.imul(Zn,no)|0,vr=vr+Math.imul(Kn,Jn)|0,Ir=Ir+Math.imul(Kn,no)|0,Er=Er+Math.imul(Cn,to)|0,vr=vr+Math.imul(Cn,No)|0,vr=vr+Math.imul(Sn,to)|0,Ir=Ir+Math.imul(Sn,No)|0,Er=Er+Math.imul(gn,uo)|0,vr=vr+Math.imul(gn,To)|0,vr=vr+Math.imul(Rn,uo)|0,Ir=Ir+Math.imul(Rn,To)|0,Er=Er+Math.imul(Yr,so)|0,vr=vr+Math.imul(Yr,Po)|0,vr=vr+Math.imul(Qr,so)|0,Ir=Ir+Math.imul(Qr,Po)|0,Er=Er+Math.imul(cn,pn)|0,vr=vr+Math.imul(cn,kn)|0,vr=vr+Math.imul(dn,pn)|0,Ir=Ir+Math.imul(dn,kn)|0,Er=Er+Math.imul(qr,Ln)|0,vr=vr+Math.imul(qr,vo)|0,vr=vr+Math.imul(an,Ln)|0,Ir=Ir+Math.imul(an,vo)|0,Er=Er+Math.imul(Br,nn)|0,vr=vr+Math.imul(Br,sn)|0,vr=vr+Math.imul(Jr,nn)|0,Ir=Ir+Math.imul(Jr,sn)|0;var fo=($r+Er|0)+((vr&8191)<<13)|0;$r=(Ir+(vr>>>13)|0)+(fo>>>26)|0,fo&=67108863,Er=Math.imul(Xr,An),vr=Math.imul(Xr,Gn),vr=vr+Math.imul(Lr,An)|0,Ir=Math.imul(Lr,Gn),Er=Er+Math.imul(vn,Jn)|0,vr=vr+Math.imul(vn,no)|0,vr=vr+Math.imul(xn,Jn)|0,Ir=Ir+Math.imul(xn,no)|0,Er=Er+Math.imul(Zn,to)|0,vr=vr+Math.imul(Zn,No)|0,vr=vr+Math.imul(Kn,to)|0,Ir=Ir+Math.imul(Kn,No)|0,Er=Er+Math.imul(Cn,uo)|0,vr=vr+Math.imul(Cn,To)|0,vr=vr+Math.imul(Sn,uo)|0,Ir=Ir+Math.imul(Sn,To)|0,Er=Er+Math.imul(gn,so)|0,vr=vr+Math.imul(gn,Po)|0,vr=vr+Math.imul(Rn,so)|0,Ir=Ir+Math.imul(Rn,Po)|0,Er=Er+Math.imul(Yr,pn)|0,vr=vr+Math.imul(Yr,kn)|0,vr=vr+Math.imul(Qr,pn)|0,Ir=Ir+Math.imul(Qr,kn)|0,Er=Er+Math.imul(cn,Ln)|0,vr=vr+Math.imul(cn,vo)|0,vr=vr+Math.imul(dn,Ln)|0,Ir=Ir+Math.imul(dn,vo)|0,Er=Er+Math.imul(qr,nn)|0,vr=vr+Math.imul(qr,sn)|0,vr=vr+Math.imul(an,nn)|0,Ir=Ir+Math.imul(an,sn)|0,Er=Er+Math.imul(Br,fn)|0,vr=vr+Math.imul(Br,En)|0,vr=vr+Math.imul(Jr,fn)|0,Ir=Ir+Math.imul(Jr,En)|0;var io=($r+Er|0)+((vr&8191)<<13)|0;$r=(Ir+(vr>>>13)|0)+(io>>>26)|0,io&=67108863,Er=Math.imul(ln,An),vr=Math.imul(ln,Gn),vr=vr+Math.imul(mn,An)|0,Ir=Math.imul(mn,Gn),Er=Er+Math.imul(Xr,Jn)|0,vr=vr+Math.imul(Xr,no)|0,vr=vr+Math.imul(Lr,Jn)|0,Ir=Ir+Math.imul(Lr,no)|0,Er=Er+Math.imul(vn,to)|0,vr=vr+Math.imul(vn,No)|0,vr=vr+Math.imul(xn,to)|0,Ir=Ir+Math.imul(xn,No)|0,Er=Er+Math.imul(Zn,uo)|0,vr=vr+Math.imul(Zn,To)|0,vr=vr+Math.imul(Kn,uo)|0,Ir=Ir+Math.imul(Kn,To)|0,Er=Er+Math.imul(Cn,so)|0,vr=vr+Math.imul(Cn,Po)|0,vr=vr+Math.imul(Sn,so)|0,Ir=Ir+Math.imul(Sn,Po)|0,Er=Er+Math.imul(gn,pn)|0,vr=vr+Math.imul(gn,kn)|0,vr=vr+Math.imul(Rn,pn)|0,Ir=Ir+Math.imul(Rn,kn)|0,Er=Er+Math.imul(Yr,Ln)|0,vr=vr+Math.imul(Yr,vo)|0,vr=vr+Math.imul(Qr,Ln)|0,Ir=Ir+Math.imul(Qr,vo)|0,Er=Er+Math.imul(cn,nn)|0,vr=vr+Math.imul(cn,sn)|0,vr=vr+Math.imul(dn,nn)|0,Ir=Ir+Math.imul(dn,sn)|0,Er=Er+Math.imul(qr,fn)|0,vr=vr+Math.imul(qr,En)|0,vr=vr+Math.imul(an,fn)|0,Ir=Ir+Math.imul(an,En)|0,Er=Er+Math.imul(Br,Tn)|0,vr=vr+Math.imul(Br,Bn)|0,vr=vr+Math.imul(Jr,Tn)|0,Ir=Ir+Math.imul(Jr,Bn)|0;var ao=($r+Er|0)+((vr&8191)<<13)|0;$r=(Ir+(vr>>>13)|0)+(ao>>>26)|0,ao&=67108863,Er=Math.imul(ln,Jn),vr=Math.imul(ln,no),vr=vr+Math.imul(mn,Jn)|0,Ir=Math.imul(mn,no),Er=Er+Math.imul(Xr,to)|0,vr=vr+Math.imul(Xr,No)|0,vr=vr+Math.imul(Lr,to)|0,Ir=Ir+Math.imul(Lr,No)|0,Er=Er+Math.imul(vn,uo)|0,vr=vr+Math.imul(vn,To)|0,vr=vr+Math.imul(xn,uo)|0,Ir=Ir+Math.imul(xn,To)|0,Er=Er+Math.imul(Zn,so)|0,vr=vr+Math.imul(Zn,Po)|0,vr=vr+Math.imul(Kn,so)|0,Ir=Ir+Math.imul(Kn,Po)|0,Er=Er+Math.imul(Cn,pn)|0,vr=vr+Math.imul(Cn,kn)|0,vr=vr+Math.imul(Sn,pn)|0,Ir=Ir+Math.imul(Sn,kn)|0,Er=Er+Math.imul(gn,Ln)|0,vr=vr+Math.imul(gn,vo)|0,vr=vr+Math.imul(Rn,Ln)|0,Ir=Ir+Math.imul(Rn,vo)|0,Er=Er+Math.imul(Yr,nn)|0,vr=vr+Math.imul(Yr,sn)|0,vr=vr+Math.imul(Qr,nn)|0,Ir=Ir+Math.imul(Qr,sn)|0,Er=Er+Math.imul(cn,fn)|0,vr=vr+Math.imul(cn,En)|0,vr=vr+Math.imul(dn,fn)|0,Ir=Ir+Math.imul(dn,En)|0,Er=Er+Math.imul(qr,Tn)|0,vr=vr+Math.imul(qr,Bn)|0,vr=vr+Math.imul(an,Tn)|0,Ir=Ir+Math.imul(an,Bn)|0;var lo=($r+Er|0)+((vr&8191)<<13)|0;$r=(Ir+(vr>>>13)|0)+(lo>>>26)|0,lo&=67108863,Er=Math.imul(ln,to),vr=Math.imul(ln,No),vr=vr+Math.imul(mn,to)|0,Ir=Math.imul(mn,No),Er=Er+Math.imul(Xr,uo)|0,vr=vr+Math.imul(Xr,To)|0,vr=vr+Math.imul(Lr,uo)|0,Ir=Ir+Math.imul(Lr,To)|0,Er=Er+Math.imul(vn,so)|0,vr=vr+Math.imul(vn,Po)|0,vr=vr+Math.imul(xn,so)|0,Ir=Ir+Math.imul(xn,Po)|0,Er=Er+Math.imul(Zn,pn)|0,vr=vr+Math.imul(Zn,kn)|0,vr=vr+Math.imul(Kn,pn)|0,Ir=Ir+Math.imul(Kn,kn)|0,Er=Er+Math.imul(Cn,Ln)|0,vr=vr+Math.imul(Cn,vo)|0,vr=vr+Math.imul(Sn,Ln)|0,Ir=Ir+Math.imul(Sn,vo)|0,Er=Er+Math.imul(gn,nn)|0,vr=vr+Math.imul(gn,sn)|0,vr=vr+Math.imul(Rn,nn)|0,Ir=Ir+Math.imul(Rn,sn)|0,Er=Er+Math.imul(Yr,fn)|0,vr=vr+Math.imul(Yr,En)|0,vr=vr+Math.imul(Qr,fn)|0,Ir=Ir+Math.imul(Qr,En)|0,Er=Er+Math.imul(cn,Tn)|0,vr=vr+Math.imul(cn,Bn)|0,vr=vr+Math.imul(dn,Tn)|0,Ir=Ir+Math.imul(dn,Bn)|0;var Ws=($r+Er|0)+((vr&8191)<<13)|0;$r=(Ir+(vr>>>13)|0)+(Ws>>>26)|0,Ws&=67108863,Er=Math.imul(ln,uo),vr=Math.imul(ln,To),vr=vr+Math.imul(mn,uo)|0,Ir=Math.imul(mn,To),Er=Er+Math.imul(Xr,so)|0,vr=vr+Math.imul(Xr,Po)|0,vr=vr+Math.imul(Lr,so)|0,Ir=Ir+Math.imul(Lr,Po)|0,Er=Er+Math.imul(vn,pn)|0,vr=vr+Math.imul(vn,kn)|0,vr=vr+Math.imul(xn,pn)|0,Ir=Ir+Math.imul(xn,kn)|0,Er=Er+Math.imul(Zn,Ln)|0,vr=vr+Math.imul(Zn,vo)|0,vr=vr+Math.imul(Kn,Ln)|0,Ir=Ir+Math.imul(Kn,vo)|0,Er=Er+Math.imul(Cn,nn)|0,vr=vr+Math.imul(Cn,sn)|0,vr=vr+Math.imul(Sn,nn)|0,Ir=Ir+Math.imul(Sn,sn)|0,Er=Er+Math.imul(gn,fn)|0,vr=vr+Math.imul(gn,En)|0,vr=vr+Math.imul(Rn,fn)|0,Ir=Ir+Math.imul(Rn,En)|0,Er=Er+Math.imul(Yr,Tn)|0,vr=vr+Math.imul(Yr,Bn)|0,vr=vr+Math.imul(Qr,Tn)|0,Ir=Ir+Math.imul(Qr,Bn)|0;var Qs=($r+Er|0)+((vr&8191)<<13)|0;$r=(Ir+(vr>>>13)|0)+(Qs>>>26)|0,Qs&=67108863,Er=Math.imul(ln,so),vr=Math.imul(ln,Po),vr=vr+Math.imul(mn,so)|0,Ir=Math.imul(mn,Po),Er=Er+Math.imul(Xr,pn)|0,vr=vr+Math.imul(Xr,kn)|0,vr=vr+Math.imul(Lr,pn)|0,Ir=Ir+Math.imul(Lr,kn)|0,Er=Er+Math.imul(vn,Ln)|0,vr=vr+Math.imul(vn,vo)|0,vr=vr+Math.imul(xn,Ln)|0,Ir=Ir+Math.imul(xn,vo)|0,Er=Er+Math.imul(Zn,nn)|0,vr=vr+Math.imul(Zn,sn)|0,vr=vr+Math.imul(Kn,nn)|0,Ir=Ir+Math.imul(Kn,sn)|0,Er=Er+Math.imul(Cn,fn)|0,vr=vr+Math.imul(Cn,En)|0,vr=vr+Math.imul(Sn,fn)|0,Ir=Ir+Math.imul(Sn,En)|0,Er=Er+Math.imul(gn,Tn)|0,vr=vr+Math.imul(gn,Bn)|0,vr=vr+Math.imul(Rn,Tn)|0,Ir=Ir+Math.imul(Rn,Bn)|0;var _i=($r+Er|0)+((vr&8191)<<13)|0;$r=(Ir+(vr>>>13)|0)+(_i>>>26)|0,_i&=67108863,Er=Math.imul(ln,pn),vr=Math.imul(ln,kn),vr=vr+Math.imul(mn,pn)|0,Ir=Math.imul(mn,kn),Er=Er+Math.imul(Xr,Ln)|0,vr=vr+Math.imul(Xr,vo)|0,vr=vr+Math.imul(Lr,Ln)|0,Ir=Ir+Math.imul(Lr,vo)|0,Er=Er+Math.imul(vn,nn)|0,vr=vr+Math.imul(vn,sn)|0,vr=vr+Math.imul(xn,nn)|0,Ir=Ir+Math.imul(xn,sn)|0,Er=Er+Math.imul(Zn,fn)|0,vr=vr+Math.imul(Zn,En)|0,vr=vr+Math.imul(Kn,fn)|0,Ir=Ir+Math.imul(Kn,En)|0,Er=Er+Math.imul(Cn,Tn)|0,vr=vr+Math.imul(Cn,Bn)|0,vr=vr+Math.imul(Sn,Tn)|0,Ir=Ir+Math.imul(Sn,Bn)|0;var Js=($r+Er|0)+((vr&8191)<<13)|0;$r=(Ir+(vr>>>13)|0)+(Js>>>26)|0,Js&=67108863,Er=Math.imul(ln,Ln),vr=Math.imul(ln,vo),vr=vr+Math.imul(mn,Ln)|0,Ir=Math.imul(mn,vo),Er=Er+Math.imul(Xr,nn)|0,vr=vr+Math.imul(Xr,sn)|0,vr=vr+Math.imul(Lr,nn)|0,Ir=Ir+Math.imul(Lr,sn)|0,Er=Er+Math.imul(vn,fn)|0,vr=vr+Math.imul(vn,En)|0,vr=vr+Math.imul(xn,fn)|0,Ir=Ir+Math.imul(xn,En)|0,Er=Er+Math.imul(Zn,Tn)|0,vr=vr+Math.imul(Zn,Bn)|0,vr=vr+Math.imul(Kn,Tn)|0,Ir=Ir+Math.imul(Kn,Bn)|0;var Ls=($r+Er|0)+((vr&8191)<<13)|0;$r=(Ir+(vr>>>13)|0)+(Ls>>>26)|0,Ls&=67108863,Er=Math.imul(ln,nn),vr=Math.imul(ln,sn),vr=vr+Math.imul(mn,nn)|0,Ir=Math.imul(mn,sn),Er=Er+Math.imul(Xr,fn)|0,vr=vr+Math.imul(Xr,En)|0,vr=vr+Math.imul(Lr,fn)|0,Ir=Ir+Math.imul(Lr,En)|0,Er=Er+Math.imul(vn,Tn)|0,vr=vr+Math.imul(vn,Bn)|0,vr=vr+Math.imul(xn,Tn)|0,Ir=Ir+Math.imul(xn,Bn)|0;var Qn=($r+Er|0)+((vr&8191)<<13)|0;$r=(Ir+(vr>>>13)|0)+(Qn>>>26)|0,Qn&=67108863,Er=Math.imul(ln,fn),vr=Math.imul(ln,En),vr=vr+Math.imul(mn,fn)|0,Ir=Math.imul(mn,En),Er=Er+Math.imul(Xr,Tn)|0,vr=vr+Math.imul(Xr,Bn)|0,vr=vr+Math.imul(Lr,Tn)|0,Ir=Ir+Math.imul(Lr,Bn)|0;var In=($r+Er|0)+((vr&8191)<<13)|0;$r=(Ir+(vr>>>13)|0)+(In>>>26)|0,In&=67108863,Er=Math.imul(ln,Tn),vr=Math.imul(ln,Bn),vr=vr+Math.imul(mn,Tn)|0,Ir=Math.imul(mn,Bn);var Nn=($r+Er|0)+((vr&8191)<<13)|0;return $r=(Ir+(vr>>>13)|0)+(Nn>>>26)|0,Nn&=67108863,_r[0]=jn,_r[1]=Hn,_r[2]=go,_r[3]=Yn,_r[4]=oo,_r[5]=co,_r[6]=ro,_r[7]=fo,_r[8]=io,_r[9]=ao,_r[10]=lo,_r[11]=Ws,_r[12]=Qs,_r[13]=_i,_r[14]=Js,_r[15]=Ls,_r[16]=Qn,_r[17]=In,_r[18]=Nn,$r!==0&&(_r[19]=$r,fr.length++),fr};Math.imul||(xr=wr);function Or(Sr,pr,gr){gr.negative=pr.negative^Sr.negative,gr.length=Sr.length+pr.length;for(var fr=0,hr=0,br=0;br<gr.length-1;br++){var _r=hr;hr=0;for(var $r=fr&67108863,Er=Math.min(br,pr.length-1),vr=Math.max(0,br-Sr.length+1);vr<=Er;vr++){var Ir=br-vr,Rr=Sr.words[Ir]|0,Br=pr.words[vr]|0,Jr=Rr*Br,Wr=Jr&67108863;_r=_r+(Jr/67108864|0)|0,Wr=Wr+$r|0,$r=Wr&67108863,_r=_r+(Wr>>>26)|0,hr+=_r>>>26,_r&=67108863}gr.words[br]=$r,fr=_r,_r=hr}return fr!==0?gr.words[br]=fr:gr.length--,gr.strip()}function Tr(Sr,pr,gr){var fr=new Ar;return fr.mulp(Sr,pr,gr)}sr.prototype.mulTo=function(pr,gr){var fr,hr=this.length+pr.length;return this.length===10&&pr.length===10?fr=xr(this,pr,gr):hr<63?fr=wr(this,pr,gr):hr<1024?fr=Or(this,pr,gr):fr=Tr(this,pr,gr),fr};function Ar(Sr,pr){this.x=Sr,this.y=pr}Ar.prototype.makeRBT=function(pr){for(var gr=new Array(pr),fr=sr.prototype._countBits(pr)-1,hr=0;hr<pr;hr++)gr[hr]=this.revBin(hr,fr,pr);return gr},Ar.prototype.revBin=function(pr,gr,fr){if(pr===0||pr===fr-1)return pr;for(var hr=0,br=0;br<gr;br++)hr|=(pr&1)<<gr-br-1,pr>>=1;return hr},Ar.prototype.permute=function(pr,gr,fr,hr,br,_r){for(var $r=0;$r<_r;$r++)hr[$r]=gr[pr[$r]],br[$r]=fr[pr[$r]]},Ar.prototype.transform=function(pr,gr,fr,hr,br,_r){this.permute(_r,pr,gr,fr,hr,br);for(var $r=1;$r<br;$r<<=1)for(var Er=$r<<1,vr=Math.cos(2*Math.PI/Er),Ir=Math.sin(2*Math.PI/Er),Rr=0;Rr<br;Rr+=Er)for(var Br=vr,Jr=Ir,Wr=0;Wr<$r;Wr++){var qr=fr[Rr+Wr],an=hr[Rr+Wr],tn=fr[Rr+Wr+$r],cn=hr[Rr+Wr+$r],dn=Br*tn-Jr*cn;cn=Br*cn+Jr*tn,tn=dn,fr[Rr+Wr]=qr+tn,hr[Rr+Wr]=an+cn,fr[Rr+Wr+$r]=qr-tn,hr[Rr+Wr+$r]=an-cn,Wr!==Er&&(dn=vr*Br-Ir*Jr,Jr=vr*Jr+Ir*Br,Br=dn)}},Ar.prototype.guessLen13b=function(pr,gr){var fr=Math.max(gr,pr)|1,hr=fr&1,br=0;for(fr=fr/2|0;fr;fr=fr>>>1)br++;return 1<<br+1+hr},Ar.prototype.conjugate=function(pr,gr,fr){if(!(fr<=1))for(var hr=0;hr<fr/2;hr++){var br=pr[hr];pr[hr]=pr[fr-hr-1],pr[fr-hr-1]=br,br=gr[hr],gr[hr]=-gr[fr-hr-1],gr[fr-hr-1]=-br}},Ar.prototype.normalize13b=function(pr,gr){for(var fr=0,hr=0;hr<gr/2;hr++){var br=Math.round(pr[2*hr+1]/gr)*8192+Math.round(pr[2*hr]/gr)+fr;pr[hr]=br&67108863,br<67108864?fr=0:fr=br/67108864|0}return pr},Ar.prototype.convert13b=function(pr,gr,fr,hr){for(var br=0,_r=0;_r<gr;_r++)br=br+(pr[_r]|0),fr[2*_r]=br&8191,br=br>>>13,fr[2*_r+1]=br&8191,br=br>>>13;for(_r=2*gr;_r<hr;++_r)fr[_r]=0;nr(br===0),nr((br&-8192)===0)},Ar.prototype.stub=function(pr){for(var gr=new Array(pr),fr=0;fr<pr;fr++)gr[fr]=0;return gr},Ar.prototype.mulp=function(pr,gr,fr){var hr=2*this.guessLen13b(pr.length,gr.length),br=this.makeRBT(hr),_r=this.stub(hr),$r=new Array(hr),Er=new Array(hr),vr=new Array(hr),Ir=new Array(hr),Rr=new Array(hr),Br=new Array(hr),Jr=fr.words;Jr.length=hr,this.convert13b(pr.words,pr.length,$r,hr),this.convert13b(gr.words,gr.length,Ir,hr),this.transform($r,_r,Er,vr,hr,br),this.transform(Ir,_r,Rr,Br,hr,br);for(var Wr=0;Wr<hr;Wr++){var qr=Er[Wr]*Rr[Wr]-vr[Wr]*Br[Wr];vr[Wr]=Er[Wr]*Br[Wr]+vr[Wr]*Rr[Wr],Er[Wr]=qr}return this.conjugate(Er,vr,hr),this.transform(Er,vr,Jr,_r,hr,br),this.conjugate(Jr,_r,hr),this.normalize13b(Jr,hr),fr.negative=pr.negative^gr.negative,fr.length=pr.length+gr.length,fr.strip()},sr.prototype.mul=function(pr){var gr=new sr(null);return gr.words=new Array(this.length+pr.length),this.mulTo(pr,gr)},sr.prototype.mulf=function(pr){var gr=new sr(null);return gr.words=new Array(this.length+pr.length),Tr(this,pr,gr)},sr.prototype.imul=function(pr){return this.clone().mulTo(pr,this)},sr.prototype.imuln=function(pr){nr(typeof pr=="number"),nr(pr<67108864);for(var gr=0,fr=0;fr<this.length;fr++){var hr=(this.words[fr]|0)*pr,br=(hr&67108863)+(gr&67108863);gr>>=26,gr+=hr/67108864|0,gr+=br>>>26,this.words[fr]=br&67108863}return gr!==0&&(this.words[fr]=gr,this.length++),this},sr.prototype.muln=function(pr){return this.clone().imuln(pr)},sr.prototype.sqr=function(){return this.mul(this)},sr.prototype.isqr=function(){return this.imul(this.clone())},sr.prototype.pow=function(pr){var gr=mr(pr);if(gr.length===0)return new sr(1);for(var fr=this,hr=0;hr<gr.length&&gr[hr]===0;hr++,fr=fr.sqr());if(++hr<gr.length)for(var br=fr.sqr();hr<gr.length;hr++,br=br.sqr())gr[hr]!==0&&(fr=fr.mul(br));return fr},sr.prototype.iushln=function(pr){nr(typeof pr=="number"&&pr>=0);var gr=pr%26,fr=(pr-gr)/26,hr=67108863>>>26-gr<<26-gr,br;if(gr!==0){var _r=0;for(br=0;br<this.length;br++){var $r=this.words[br]&hr,Er=(this.words[br]|0)-$r<<gr;this.words[br]=Er|_r,_r=$r>>>26-gr}_r&&(this.words[br]=_r,this.length++)}if(fr!==0){for(br=this.length-1;br>=0;br--)this.words[br+fr]=this.words[br];for(br=0;br<fr;br++)this.words[br]=0;this.length+=fr}return this.strip()},sr.prototype.ishln=function(pr){return nr(this.negative===0),this.iushln(pr)},sr.prototype.iushrn=function(pr,gr,fr){nr(typeof pr=="number"&&pr>=0);var hr;gr?hr=(gr-gr%26)/26:hr=0;var br=pr%26,_r=Math.min((pr-br)/26,this.length),$r=67108863^67108863>>>br<<br,Er=fr;if(hr-=_r,hr=Math.max(0,hr),Er){for(var vr=0;vr<_r;vr++)Er.words[vr]=this.words[vr];Er.length=_r}if(_r!==0)if(this.length>_r)for(this.length-=_r,vr=0;vr<this.length;vr++)this.words[vr]=this.words[vr+_r];else this.words[0]=0,this.length=1;var Ir=0;for(vr=this.length-1;vr>=0&&(Ir!==0||vr>=hr);vr--){var Rr=this.words[vr]|0;this.words[vr]=Ir<<26-br|Rr>>>br,Ir=Rr&$r}return Er&&Ir!==0&&(Er.words[Er.length++]=Ir),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},sr.prototype.ishrn=function(pr,gr,fr){return nr(this.negative===0),this.iushrn(pr,gr,fr)},sr.prototype.shln=function(pr){return this.clone().ishln(pr)},sr.prototype.ushln=function(pr){return this.clone().iushln(pr)},sr.prototype.shrn=function(pr){return this.clone().ishrn(pr)},sr.prototype.ushrn=function(pr){return this.clone().iushrn(pr)},sr.prototype.testn=function(pr){nr(typeof pr=="number"&&pr>=0);var gr=pr%26,fr=(pr-gr)/26,hr=1<<gr;if(this.length<=fr)return!1;var br=this.words[fr];return!!(br&hr)},sr.prototype.imaskn=function(pr){nr(typeof pr=="number"&&pr>=0);var gr=pr%26,fr=(pr-gr)/26;if(nr(this.negative===0,"imaskn works only with positive numbers"),this.length<=fr)return this;if(gr!==0&&fr++,this.length=Math.min(fr,this.length),gr!==0){var hr=67108863^67108863>>>gr<<gr;this.words[this.length-1]&=hr}return this.strip()},sr.prototype.maskn=function(pr){return this.clone().imaskn(pr)},sr.prototype.iaddn=function(pr){return nr(typeof pr=="number"),nr(pr<67108864),pr<0?this.isubn(-pr):this.negative!==0?this.length===1&&(this.words[0]|0)<pr?(this.words[0]=pr-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(pr),this.negative=1,this):this._iaddn(pr)},sr.prototype._iaddn=function(pr){this.words[0]+=pr;for(var gr=0;gr<this.length&&this.words[gr]>=67108864;gr++)this.words[gr]-=67108864,gr===this.length-1?this.words[gr+1]=1:this.words[gr+1]++;return this.length=Math.max(this.length,gr+1),this},sr.prototype.isubn=function(pr){if(nr(typeof pr=="number"),nr(pr<67108864),pr<0)return this.iaddn(-pr);if(this.negative!==0)return this.negative=0,this.iaddn(pr),this.negative=1,this;if(this.words[0]-=pr,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var gr=0;gr<this.length&&this.words[gr]<0;gr++)this.words[gr]+=67108864,this.words[gr+1]-=1;return this.strip()},sr.prototype.addn=function(pr){return this.clone().iaddn(pr)},sr.prototype.subn=function(pr){return this.clone().isubn(pr)},sr.prototype.iabs=function(){return this.negative=0,this},sr.prototype.abs=function(){return this.clone().iabs()},sr.prototype._ishlnsubmul=function(pr,gr,fr){var hr=pr.length+fr,br;this._expand(hr);var _r,$r=0;for(br=0;br<pr.length;br++){_r=(this.words[br+fr]|0)+$r;var Er=(pr.words[br]|0)*gr;_r-=Er&67108863,$r=(_r>>26)-(Er/67108864|0),this.words[br+fr]=_r&67108863}for(;br<this.length-fr;br++)_r=(this.words[br+fr]|0)+$r,$r=_r>>26,this.words[br+fr]=_r&67108863;if($r===0)return this.strip();for(nr($r===-1),$r=0,br=0;br<this.length;br++)_r=-(this.words[br]|0)+$r,$r=_r>>26,this.words[br]=_r&67108863;return this.negative=1,this.strip()},sr.prototype._wordDiv=function(pr,gr){var fr=this.length-pr.length,hr=this.clone(),br=pr,_r=br.words[br.length-1]|0,$r=this._countBits(_r);fr=26-$r,fr!==0&&(br=br.ushln(fr),hr.iushln(fr),_r=br.words[br.length-1]|0);var Er=hr.length-br.length,vr;if(gr!=="mod"){vr=new sr(null),vr.length=Er+1,vr.words=new Array(vr.length);for(var Ir=0;Ir<vr.length;Ir++)vr.words[Ir]=0}var Rr=hr.clone()._ishlnsubmul(br,1,Er);Rr.negative===0&&(hr=Rr,vr&&(vr.words[Er]=1));for(var Br=Er-1;Br>=0;Br--){var Jr=(hr.words[br.length+Br]|0)*67108864+(hr.words[br.length+Br-1]|0);for(Jr=Math.min(Jr/_r|0,67108863),hr._ishlnsubmul(br,Jr,Br);hr.negative!==0;)Jr--,hr.negative=0,hr._ishlnsubmul(br,1,Br),hr.isZero()||(hr.negative^=1);vr&&(vr.words[Br]=Jr)}return vr&&vr.strip(),hr.strip(),gr!=="div"&&fr!==0&&hr.iushrn(fr),{div:vr||null,mod:hr}},sr.prototype.divmod=function(pr,gr,fr){if(nr(!pr.isZero()),this.isZero())return{div:new sr(0),mod:new sr(0)};var hr,br,_r;return this.negative!==0&&pr.negative===0?(_r=this.neg().divmod(pr,gr),gr!=="mod"&&(hr=_r.div.neg()),gr!=="div"&&(br=_r.mod.neg(),fr&&br.negative!==0&&br.iadd(pr)),{div:hr,mod:br}):this.negative===0&&pr.negative!==0?(_r=this.divmod(pr.neg(),gr),gr!=="mod"&&(hr=_r.div.neg()),{div:hr,mod:_r.mod}):this.negative&pr.negative?(_r=this.neg().divmod(pr.neg(),gr),gr!=="div"&&(br=_r.mod.neg(),fr&&br.negative!==0&&br.isub(pr)),{div:_r.div,mod:br}):pr.length>this.length||this.cmp(pr)<0?{div:new sr(0),mod:this}:pr.length===1?gr==="div"?{div:this.divn(pr.words[0]),mod:null}:gr==="mod"?{div:null,mod:new sr(this.modn(pr.words[0]))}:{div:this.divn(pr.words[0]),mod:new sr(this.modn(pr.words[0]))}:this._wordDiv(pr,gr)},sr.prototype.div=function(pr){return this.divmod(pr,"div",!1).div},sr.prototype.mod=function(pr){return this.divmod(pr,"mod",!1).mod},sr.prototype.umod=function(pr){return this.divmod(pr,"mod",!0).mod},sr.prototype.divRound=function(pr){var gr=this.divmod(pr);if(gr.mod.isZero())return gr.div;var fr=gr.div.negative!==0?gr.mod.isub(pr):gr.mod,hr=pr.ushrn(1),br=pr.andln(1),_r=fr.cmp(hr);return _r<0||br===1&&_r===0?gr.div:gr.div.negative!==0?gr.div.isubn(1):gr.div.iaddn(1)},sr.prototype.modn=function(pr){nr(pr<=67108863);for(var gr=(1<<26)%pr,fr=0,hr=this.length-1;hr>=0;hr--)fr=(gr*fr+(this.words[hr]|0))%pr;return fr},sr.prototype.idivn=function(pr){nr(pr<=67108863);for(var gr=0,fr=this.length-1;fr>=0;fr--){var hr=(this.words[fr]|0)+gr*67108864;this.words[fr]=hr/pr|0,gr=hr%pr}return this.strip()},sr.prototype.divn=function(pr){return this.clone().idivn(pr)},sr.prototype.egcd=function(pr){nr(pr.negative===0),nr(!pr.isZero());var gr=this,fr=pr.clone();gr.negative!==0?gr=gr.umod(pr):gr=gr.clone();for(var hr=new sr(1),br=new sr(0),_r=new sr(0),$r=new sr(1),Er=0;gr.isEven()&&fr.isEven();)gr.iushrn(1),fr.iushrn(1),++Er;for(var vr=fr.clone(),Ir=gr.clone();!gr.isZero();){for(var Rr=0,Br=1;!(gr.words[0]&Br)&&Rr<26;++Rr,Br<<=1);if(Rr>0)for(gr.iushrn(Rr);Rr-- >0;)(hr.isOdd()||br.isOdd())&&(hr.iadd(vr),br.isub(Ir)),hr.iushrn(1),br.iushrn(1);for(var Jr=0,Wr=1;!(fr.words[0]&Wr)&&Jr<26;++Jr,Wr<<=1);if(Jr>0)for(fr.iushrn(Jr);Jr-- >0;)(_r.isOdd()||$r.isOdd())&&(_r.iadd(vr),$r.isub(Ir)),_r.iushrn(1),$r.iushrn(1);gr.cmp(fr)>=0?(gr.isub(fr),hr.isub(_r),br.isub($r)):(fr.isub(gr),_r.isub(hr),$r.isub(br))}return{a:_r,b:$r,gcd:fr.iushln(Er)}},sr.prototype._invmp=function(pr){nr(pr.negative===0),nr(!pr.isZero());var gr=this,fr=pr.clone();gr.negative!==0?gr=gr.umod(pr):gr=gr.clone();for(var hr=new sr(1),br=new sr(0),_r=fr.clone();gr.cmpn(1)>0&&fr.cmpn(1)>0;){for(var $r=0,Er=1;!(gr.words[0]&Er)&&$r<26;++$r,Er<<=1);if($r>0)for(gr.iushrn($r);$r-- >0;)hr.isOdd()&&hr.iadd(_r),hr.iushrn(1);for(var vr=0,Ir=1;!(fr.words[0]&Ir)&&vr<26;++vr,Ir<<=1);if(vr>0)for(fr.iushrn(vr);vr-- >0;)br.isOdd()&&br.iadd(_r),br.iushrn(1);gr.cmp(fr)>=0?(gr.isub(fr),hr.isub(br)):(fr.isub(gr),br.isub(hr))}var Rr;return gr.cmpn(1)===0?Rr=hr:Rr=br,Rr.cmpn(0)<0&&Rr.iadd(pr),Rr},sr.prototype.gcd=function(pr){if(this.isZero())return pr.abs();if(pr.isZero())return this.abs();var gr=this.clone(),fr=pr.clone();gr.negative=0,fr.negative=0;for(var hr=0;gr.isEven()&&fr.isEven();hr++)gr.iushrn(1),fr.iushrn(1);do{for(;gr.isEven();)gr.iushrn(1);for(;fr.isEven();)fr.iushrn(1);var br=gr.cmp(fr);if(br<0){var _r=gr;gr=fr,fr=_r}else if(br===0||fr.cmpn(1)===0)break;gr.isub(fr)}while(!0);return fr.iushln(hr)},sr.prototype.invm=function(pr){return this.egcd(pr).a.umod(pr)},sr.prototype.isEven=function(){return(this.words[0]&1)===0},sr.prototype.isOdd=function(){return(this.words[0]&1)===1},sr.prototype.andln=function(pr){return this.words[0]&pr},sr.prototype.bincn=function(pr){nr(typeof pr=="number");var gr=pr%26,fr=(pr-gr)/26,hr=1<<gr;if(this.length<=fr)return this._expand(fr+1),this.words[fr]|=hr,this;for(var br=hr,_r=fr;br!==0&&_r<this.length;_r++){var $r=this.words[_r]|0;$r+=br,br=$r>>>26,$r&=67108863,this.words[_r]=$r}return br!==0&&(this.words[_r]=br,this.length++),this},sr.prototype.isZero=function(){return this.length===1&&this.words[0]===0},sr.prototype.cmpn=function(pr){var gr=pr<0;if(this.negative!==0&&!gr)return-1;if(this.negative===0&&gr)return 1;this.strip();var fr;if(this.length>1)fr=1;else{gr&&(pr=-pr),nr(pr<=67108863,"Number is too big");var hr=this.words[0]|0;fr=hr===pr?0:hr<pr?-1:1}return this.negative!==0?-fr|0:fr},sr.prototype.cmp=function(pr){if(this.negative!==0&&pr.negative===0)return-1;if(this.negative===0&&pr.negative!==0)return 1;var gr=this.ucmp(pr);return this.negative!==0?-gr|0:gr},sr.prototype.ucmp=function(pr){if(this.length>pr.length)return 1;if(this.length<pr.length)return-1;for(var gr=0,fr=this.length-1;fr>=0;fr--){var hr=this.words[fr]|0,br=pr.words[fr]|0;if(hr!==br){hr<br?gr=-1:hr>br&&(gr=1);break}}return gr},sr.prototype.gtn=function(pr){return this.cmpn(pr)===1},sr.prototype.gt=function(pr){return this.cmp(pr)===1},sr.prototype.gten=function(pr){return this.cmpn(pr)>=0},sr.prototype.gte=function(pr){return this.cmp(pr)>=0},sr.prototype.ltn=function(pr){return this.cmpn(pr)===-1},sr.prototype.lt=function(pr){return this.cmp(pr)===-1},sr.prototype.lten=function(pr){return this.cmpn(pr)<=0},sr.prototype.lte=function(pr){return this.cmp(pr)<=0},sr.prototype.eqn=function(pr){return this.cmpn(pr)===0},sr.prototype.eq=function(pr){return this.cmp(pr)===0},sr.red=function(pr){return new Mr(pr)},sr.prototype.toRed=function(pr){return nr(!this.red,"Already a number in reduction context"),nr(this.negative===0,"red works only with positives"),pr.convertTo(this)._forceRed(pr)},sr.prototype.fromRed=function(){return nr(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},sr.prototype._forceRed=function(pr){return this.red=pr,this},sr.prototype.forceRed=function(pr){return nr(!this.red,"Already a number in reduction context"),this._forceRed(pr)},sr.prototype.redAdd=function(pr){return nr(this.red,"redAdd works only with red numbers"),this.red.add(this,pr)},sr.prototype.redIAdd=function(pr){return nr(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,pr)},sr.prototype.redSub=function(pr){return nr(this.red,"redSub works only with red numbers"),this.red.sub(this,pr)},sr.prototype.redISub=function(pr){return nr(this.red,"redISub works only with red numbers"),this.red.isub(this,pr)},sr.prototype.redShl=function(pr){return nr(this.red,"redShl works only with red numbers"),this.red.shl(this,pr)},sr.prototype.redMul=function(pr){return nr(this.red,"redMul works only with red numbers"),this.red._verify2(this,pr),this.red.mul(this,pr)},sr.prototype.redIMul=function(pr){return nr(this.red,"redMul works only with red numbers"),this.red._verify2(this,pr),this.red.imul(this,pr)},sr.prototype.redSqr=function(){return nr(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},sr.prototype.redISqr=function(){return nr(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},sr.prototype.redSqrt=function(){return nr(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},sr.prototype.redInvm=function(){return nr(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},sr.prototype.redNeg=function(){return nr(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},sr.prototype.redPow=function(pr){return nr(this.red&&!pr.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,pr)};var Nr={k256:null,p224:null,p192:null,p25519:null};function Ur(Sr,pr){this.name=Sr,this.p=new sr(pr,16),this.n=this.p.bitLength(),this.k=new sr(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}Ur.prototype._tmp=function(){var pr=new sr(null);return pr.words=new Array(Math.ceil(this.n/13)),pr},Ur.prototype.ireduce=function(pr){var gr=pr,fr;do this.split(gr,this.tmp),gr=this.imulK(gr),gr=gr.iadd(this.tmp),fr=gr.bitLength();while(fr>this.n);var hr=fr<this.n?-1:gr.ucmp(this.p);return hr===0?(gr.words[0]=0,gr.length=1):hr>0?gr.isub(this.p):gr.strip!==void 0?gr.strip():gr._strip(),gr},Ur.prototype.split=function(pr,gr){pr.iushrn(this.n,0,gr)},Ur.prototype.imulK=function(pr){return pr.imul(this.k)};function Dr(){Ur.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}ir(Dr,Ur),Dr.prototype.split=function(pr,gr){for(var fr=4194303,hr=Math.min(pr.length,9),br=0;br<hr;br++)gr.words[br]=pr.words[br];if(gr.length=hr,pr.length<=9){pr.words[0]=0,pr.length=1;return}var _r=pr.words[9];for(gr.words[gr.length++]=_r&fr,br=10;br<pr.length;br++){var $r=pr.words[br]|0;pr.words[br-10]=($r&fr)<<4|_r>>>22,_r=$r}_r>>>=22,pr.words[br-10]=_r,_r===0&&pr.length>10?pr.length-=10:pr.length-=9},Dr.prototype.imulK=function(pr){pr.words[pr.length]=0,pr.words[pr.length+1]=0,pr.length+=2;for(var gr=0,fr=0;fr<pr.length;fr++){var hr=pr.words[fr]|0;gr+=hr*977,pr.words[fr]=gr&67108863,gr=hr*64+(gr/67108864|0)}return pr.words[pr.length-1]===0&&(pr.length--,pr.words[pr.length-1]===0&&pr.length--),pr};function Hr(){Ur.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}ir(Hr,Ur);function zr(){Ur.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}ir(zr,Ur);function Cr(){Ur.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}ir(Cr,Ur),Cr.prototype.imulK=function(pr){for(var gr=0,fr=0;fr<pr.length;fr++){var hr=(pr.words[fr]|0)*19+gr,br=hr&67108863;hr>>>=26,pr.words[fr]=br,gr=hr}return gr!==0&&(pr.words[pr.length++]=gr),pr},sr._prime=function(pr){if(Nr[pr])return Nr[pr];var gr;if(pr==="k256")gr=new Dr;else if(pr==="p224")gr=new Hr;else if(pr==="p192")gr=new zr;else if(pr==="p25519")gr=new Cr;else throw new Error("Unknown prime "+pr);return Nr[pr]=gr,gr};function Mr(Sr){if(typeof Sr=="string"){var pr=sr._prime(Sr);this.m=pr.p,this.prime=pr}else nr(Sr.gtn(1),"modulus must be greater than 1"),this.m=Sr,this.prime=null}Mr.prototype._verify1=function(pr){nr(pr.negative===0,"red works only with positives"),nr(pr.red,"red works only with red numbers")},Mr.prototype._verify2=function(pr,gr){nr((pr.negative|gr.negative)===0,"red works only with positives"),nr(pr.red&&pr.red===gr.red,"red works only with red numbers")},Mr.prototype.imod=function(pr){return this.prime?this.prime.ireduce(pr)._forceRed(this):pr.umod(this.m)._forceRed(this)},Mr.prototype.neg=function(pr){return pr.isZero()?pr.clone():this.m.sub(pr)._forceRed(this)},Mr.prototype.add=function(pr,gr){this._verify2(pr,gr);var fr=pr.add(gr);return fr.cmp(this.m)>=0&&fr.isub(this.m),fr._forceRed(this)},Mr.prototype.iadd=function(pr,gr){this._verify2(pr,gr);var fr=pr.iadd(gr);return fr.cmp(this.m)>=0&&fr.isub(this.m),fr},Mr.prototype.sub=function(pr,gr){this._verify2(pr,gr);var fr=pr.sub(gr);return fr.cmpn(0)<0&&fr.iadd(this.m),fr._forceRed(this)},Mr.prototype.isub=function(pr,gr){this._verify2(pr,gr);var fr=pr.isub(gr);return fr.cmpn(0)<0&&fr.iadd(this.m),fr},Mr.prototype.shl=function(pr,gr){return this._verify1(pr),this.imod(pr.ushln(gr))},Mr.prototype.imul=function(pr,gr){return this._verify2(pr,gr),this.imod(pr.imul(gr))},Mr.prototype.mul=function(pr,gr){return this._verify2(pr,gr),this.imod(pr.mul(gr))},Mr.prototype.isqr=function(pr){return this.imul(pr,pr.clone())},Mr.prototype.sqr=function(pr){return this.mul(pr,pr)},Mr.prototype.sqrt=function(pr){if(pr.isZero())return pr.clone();var gr=this.m.andln(3);if(nr(gr%2===1),gr===3){var fr=this.m.add(new sr(1)).iushrn(2);return this.pow(pr,fr)}for(var hr=this.m.subn(1),br=0;!hr.isZero()&&hr.andln(1)===0;)br++,hr.iushrn(1);nr(!hr.isZero());var _r=new sr(1).toRed(this),$r=_r.redNeg(),Er=this.m.subn(1).iushrn(1),vr=this.m.bitLength();for(vr=new sr(2*vr*vr).toRed(this);this.pow(vr,Er).cmp($r)!==0;)vr.redIAdd($r);for(var Ir=this.pow(vr,hr),Rr=this.pow(pr,hr.addn(1).iushrn(1)),Br=this.pow(pr,hr),Jr=br;Br.cmp(_r)!==0;){for(var Wr=Br,qr=0;Wr.cmp(_r)!==0;qr++)Wr=Wr.redSqr();nr(qr<Jr);var an=this.pow(Ir,new sr(1).iushln(Jr-qr-1));Rr=Rr.redMul(an),Ir=an.redSqr(),Br=Br.redMul(Ir),Jr=qr}return Rr},Mr.prototype.invm=function(pr){var gr=pr._invmp(this.m);return gr.negative!==0?(gr.negative=0,this.imod(gr).redNeg()):this.imod(gr)},Mr.prototype.pow=function(pr,gr){if(gr.isZero())return new sr(1).toRed(this);if(gr.cmpn(1)===0)return pr.clone();var fr=4,hr=new Array(1<<fr);hr[0]=new sr(1).toRed(this),hr[1]=pr;for(var br=2;br<hr.length;br++)hr[br]=this.mul(hr[br-1],pr);var _r=hr[0],$r=0,Er=0,vr=gr.bitLength()%26;for(vr===0&&(vr=26),br=gr.length-1;br>=0;br--){for(var Ir=gr.words[br],Rr=vr-1;Rr>=0;Rr--){var Br=Ir>>Rr&1;if(_r!==hr[0]&&(_r=this.sqr(_r)),Br===0&&$r===0){Er=0;continue}$r<<=1,$r|=Br,Er++,!(Er!==fr&&(br!==0||Rr!==0))&&(_r=this.mul(_r,hr[$r]),Er=0,$r=0)}vr=26}return _r},Mr.prototype.convertTo=function(pr){var gr=pr.umod(this.m);return gr===pr?gr.clone():gr},Mr.prototype.convertFrom=function(pr){var gr=pr.clone();return gr.red=null,gr},sr.mont=function(pr){return new Pr(pr)};function Pr(Sr){Mr.call(this,Sr),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new sr(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}ir(Pr,Mr),Pr.prototype.convertTo=function(pr){return this.imod(pr.ushln(this.shift))},Pr.prototype.convertFrom=function(pr){var gr=this.imod(pr.mul(this.rinv));return gr.red=null,gr},Pr.prototype.imul=function(pr,gr){if(pr.isZero()||gr.isZero())return pr.words[0]=0,pr.length=1,pr;var fr=pr.imul(gr),hr=fr.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),br=fr.isub(hr).iushrn(this.shift),_r=br;return br.cmp(this.m)>=0?_r=br.isub(this.m):br.cmpn(0)<0&&(_r=br.iadd(this.m)),_r._forceRed(this)},Pr.prototype.mul=function(pr,gr){if(pr.isZero()||gr.isZero())return new sr(0)._forceRed(this);var fr=pr.mul(gr),hr=fr.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),br=fr.isub(hr).iushrn(this.shift),_r=br;return br.cmp(this.m)>=0?_r=br.isub(this.m):br.cmpn(0)<0&&(_r=br.iadd(this.m)),_r._forceRed(this)},Pr.prototype.invm=function(pr){var gr=this.imod(pr._invmp(this.m).mul(this.r2));return gr._forceRed(this)}})(tr,commonjsGlobal)})(bn$1);var bnExports$1=bn$1.exports,minimalisticAssert=assert$q;function assert$q(tr,er){if(!tr)throw new Error(er||"Assertion failed")}assert$q.equal=function tr(er,rr,nr){if(er!=rr)throw new Error(nr||"Assertion failed: "+er+" != "+rr)};var utils$t={};(function(tr){var er=tr;function rr(sr,or){if(Array.isArray(sr))return sr.slice();if(!sr)return[];var ar=[];if(typeof sr!="string"){for(var cr=0;cr<sr.length;cr++)ar[cr]=sr[cr]|0;return ar}if(or==="hex"){sr=sr.replace(/[^a-z0-9]+/ig,""),sr.length%2!==0&&(sr="0"+sr);for(var cr=0;cr<sr.length;cr+=2)ar.push(parseInt(sr[cr]+sr[cr+1],16))}else for(var cr=0;cr<sr.length;cr++){var lr=sr.charCodeAt(cr),ur=lr>>8,dr=lr&255;ur?ar.push(ur,dr):ar.push(dr)}return ar}er.toArray=rr;function nr(sr){return sr.length===1?"0"+sr:sr}er.zero2=nr;function ir(sr){for(var or="",ar=0;ar<sr.length;ar++)or+=nr(sr[ar].toString(16));return or}er.toHex=ir,er.encode=function(or,ar){return ar==="hex"?ir(or):or}})(utils$t);(function(tr){var er=tr,rr=bnExports$1,nr=minimalisticAssert,ir=utils$t;er.assert=nr,er.toArray=ir.toArray,er.zero2=ir.zero2,er.toHex=ir.toHex,er.encode=ir.encode;function sr(ur,dr,yr){var mr=new Array(Math.max(ur.bitLength(),yr)+1),wr;for(wr=0;wr<mr.length;wr+=1)mr[wr]=0;var xr=1<<dr+1,Or=ur.clone();for(wr=0;wr<mr.length;wr++){var Tr,Ar=Or.andln(xr-1);Or.isOdd()?(Ar>(xr>>1)-1?Tr=(xr>>1)-Ar:Tr=Ar,Or.isubn(Tr)):Tr=0,mr[wr]=Tr,Or.iushrn(1)}return mr}er.getNAF=sr;function or(ur,dr){var yr=[[],[]];ur=ur.clone(),dr=dr.clone();for(var mr=0,wr=0,xr;ur.cmpn(-mr)>0||dr.cmpn(-wr)>0;){var Or=ur.andln(3)+mr&3,Tr=dr.andln(3)+wr&3;Or===3&&(Or=-1),Tr===3&&(Tr=-1);var Ar;Or&1?(xr=ur.andln(7)+mr&7,(xr===3||xr===5)&&Tr===2?Ar=-Or:Ar=Or):Ar=0,yr[0].push(Ar);var Nr;Tr&1?(xr=dr.andln(7)+wr&7,(xr===3||xr===5)&&Or===2?Nr=-Tr:Nr=Tr):Nr=0,yr[1].push(Nr),2*mr===Ar+1&&(mr=1-mr),2*wr===Nr+1&&(wr=1-wr),ur.iushrn(1),dr.iushrn(1)}return yr}er.getJSF=or;function ar(ur,dr,yr){var mr="_"+dr;ur.prototype[dr]=function(){return this[mr]!==void 0?this[mr]:this[mr]=yr.call(this)}}er.cachedProperty=ar;function cr(ur){return typeof ur=="string"?er.toArray(ur,"hex"):ur}er.parseBytes=cr;function lr(ur){return new rr(ur,"hex","le")}er.intFromLE=lr})(utils$u);var brorand={exports:{}},r$4;brorand.exports=function tr(er){return r$4||(r$4=new Rand(null)),r$4.generate(er)};function Rand(tr){this.rand=tr}brorand.exports.Rand=Rand;Rand.prototype.generate=function tr(er){return this._rand(er)};Rand.prototype._rand=function tr(er){if(this.rand.getBytes)return this.rand.getBytes(er);for(var rr=new Uint8Array(er),nr=0;nr<rr.length;nr++)rr[nr]=this.rand.getByte();return rr};if(typeof self=="object")self.crypto&&self.crypto.getRandomValues?Rand.prototype._rand=function(er){var rr=new Uint8Array(er);return self.crypto.getRandomValues(rr),rr}:self.msCrypto&&self.msCrypto.getRandomValues?Rand.prototype._rand=function(er){var rr=new Uint8Array(er);return self.msCrypto.getRandomValues(rr),rr}:typeof window=="object"&&(Rand.prototype._rand=function(){throw new Error("Not implemented yet")});else try{var crypto$3=requireEmptyModule();if(typeof crypto$3.randomBytes!="function")throw new Error("Not supported");Rand.prototype._rand=function(er){return crypto$3.randomBytes(er)}}catch{}var brorandExports=brorand.exports,curve={},BN$8=bnExports$1,utils$s=utils$u,getNAF=utils$s.getNAF,getJSF=utils$s.getJSF,assert$p=utils$s.assert;function BaseCurve(tr,er){this.type=tr,this.p=new BN$8(er.p,16),this.red=er.prime?BN$8.red(er.prime):BN$8.mont(this.p),this.zero=new BN$8(0).toRed(this.red),this.one=new BN$8(1).toRed(this.red),this.two=new BN$8(2).toRed(this.red),this.n=er.n&&new BN$8(er.n,16),this.g=er.g&&this.pointFromJSON(er.g,er.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var rr=this.n&&this.p.div(this.n);!rr||rr.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}var base=BaseCurve;BaseCurve.prototype.point=function tr(){throw new Error("Not implemented")};BaseCurve.prototype.validate=function tr(){throw new Error("Not implemented")};BaseCurve.prototype._fixedNafMul=function tr(er,rr){assert$p(er.precomputed);var nr=er._getDoubles(),ir=getNAF(rr,1,this._bitLength),sr=(1<<nr.step+1)-(nr.step%2===0?2:1);sr/=3;var or=[],ar,cr;for(ar=0;ar<ir.length;ar+=nr.step){cr=0;for(var lr=ar+nr.step-1;lr>=ar;lr--)cr=(cr<<1)+ir[lr];or.push(cr)}for(var ur=this.jpoint(null,null,null),dr=this.jpoint(null,null,null),yr=sr;yr>0;yr--){for(ar=0;ar<or.length;ar++)cr=or[ar],cr===yr?dr=dr.mixedAdd(nr.points[ar]):cr===-yr&&(dr=dr.mixedAdd(nr.points[ar].neg()));ur=ur.add(dr)}return ur.toP()};BaseCurve.prototype._wnafMul=function tr(er,rr){var nr=4,ir=er._getNAFPoints(nr);nr=ir.wnd;for(var sr=ir.points,or=getNAF(rr,nr,this._bitLength),ar=this.jpoint(null,null,null),cr=or.length-1;cr>=0;cr--){for(var lr=0;cr>=0&&or[cr]===0;cr--)lr++;if(cr>=0&&lr++,ar=ar.dblp(lr),cr<0)break;var ur=or[cr];assert$p(ur!==0),er.type==="affine"?ur>0?ar=ar.mixedAdd(sr[ur-1>>1]):ar=ar.mixedAdd(sr[-ur-1>>1].neg()):ur>0?ar=ar.add(sr[ur-1>>1]):ar=ar.add(sr[-ur-1>>1].neg())}return er.type==="affine"?ar.toP():ar};BaseCurve.prototype._wnafMulAdd=function tr(er,rr,nr,ir,sr){var or=this._wnafT1,ar=this._wnafT2,cr=this._wnafT3,lr=0,ur,dr,yr;for(ur=0;ur<ir;ur++){yr=rr[ur];var mr=yr._getNAFPoints(er);or[ur]=mr.wnd,ar[ur]=mr.points}for(ur=ir-1;ur>=1;ur-=2){var wr=ur-1,xr=ur;if(or[wr]!==1||or[xr]!==1){cr[wr]=getNAF(nr[wr],or[wr],this._bitLength),cr[xr]=getNAF(nr[xr],or[xr],this._bitLength),lr=Math.max(cr[wr].length,lr),lr=Math.max(cr[xr].length,lr);continue}var Or=[rr[wr],null,null,rr[xr]];rr[wr].y.cmp(rr[xr].y)===0?(Or[1]=rr[wr].add(rr[xr]),Or[2]=rr[wr].toJ().mixedAdd(rr[xr].neg())):rr[wr].y.cmp(rr[xr].y.redNeg())===0?(Or[1]=rr[wr].toJ().mixedAdd(rr[xr]),Or[2]=rr[wr].add(rr[xr].neg())):(Or[1]=rr[wr].toJ().mixedAdd(rr[xr]),Or[2]=rr[wr].toJ().mixedAdd(rr[xr].neg()));var Tr=[-3,-1,-5,-7,0,7,5,1,3],Ar=getJSF(nr[wr],nr[xr]);for(lr=Math.max(Ar[0].length,lr),cr[wr]=new Array(lr),cr[xr]=new Array(lr),dr=0;dr<lr;dr++){var Nr=Ar[0][dr]|0,Ur=Ar[1][dr]|0;cr[wr][dr]=Tr[(Nr+1)*3+(Ur+1)],cr[xr][dr]=0,ar[wr]=Or}}var Dr=this.jpoint(null,null,null),Hr=this._wnafT4;for(ur=lr;ur>=0;ur--){for(var zr=0;ur>=0;){var Cr=!0;for(dr=0;dr<ir;dr++)Hr[dr]=cr[dr][ur]|0,Hr[dr]!==0&&(Cr=!1);if(!Cr)break;zr++,ur--}if(ur>=0&&zr++,Dr=Dr.dblp(zr),ur<0)break;for(dr=0;dr<ir;dr++){var Mr=Hr[dr];Mr!==0&&(Mr>0?yr=ar[dr][Mr-1>>1]:Mr<0&&(yr=ar[dr][-Mr-1>>1].neg()),yr.type==="affine"?Dr=Dr.mixedAdd(yr):Dr=Dr.add(yr))}}for(ur=0;ur<ir;ur++)ar[ur]=null;return sr?Dr:Dr.toP()};function BasePoint(tr,er){this.curve=tr,this.type=er,this.precomputed=null}BaseCurve.BasePoint=BasePoint;BasePoint.prototype.eq=function tr(){throw new Error("Not implemented")};BasePoint.prototype.validate=function tr(){return this.curve.validate(this)};BaseCurve.prototype.decodePoint=function tr(er,rr){er=utils$s.toArray(er,rr);var nr=this.p.byteLength();if((er[0]===4||er[0]===6||er[0]===7)&&er.length-1===2*nr){er[0]===6?assert$p(er[er.length-1]%2===0):er[0]===7&&assert$p(er[er.length-1]%2===1);var ir=this.point(er.slice(1,1+nr),er.slice(1+nr,1+2*nr));return ir}else if((er[0]===2||er[0]===3)&&er.length-1===nr)return this.pointFromX(er.slice(1,1+nr),er[0]===3);throw new Error("Unknown point format")};BasePoint.prototype.encodeCompressed=function tr(er){return this.encode(er,!0)};BasePoint.prototype._encode=function tr(er){var rr=this.curve.p.byteLength(),nr=this.getX().toArray("be",rr);return er?[this.getY().isEven()?2:3].concat(nr):[4].concat(nr,this.getY().toArray("be",rr))};BasePoint.prototype.encode=function tr(er,rr){return utils$s.encode(this._encode(rr),er)};BasePoint.prototype.precompute=function tr(er){if(this.precomputed)return this;var rr={doubles:null,naf:null,beta:null};return rr.naf=this._getNAFPoints(8),rr.doubles=this._getDoubles(4,er),rr.beta=this._getBeta(),this.precomputed=rr,this};BasePoint.prototype._hasDoubles=function tr(er){if(!this.precomputed)return!1;var rr=this.precomputed.doubles;return rr?rr.points.length>=Math.ceil((er.bitLength()+1)/rr.step):!1};BasePoint.prototype._getDoubles=function tr(er,rr){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var nr=[this],ir=this,sr=0;sr<rr;sr+=er){for(var or=0;or<er;or++)ir=ir.dbl();nr.push(ir)}return{step:er,points:nr}};BasePoint.prototype._getNAFPoints=function tr(er){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var rr=[this],nr=(1<<er)-1,ir=nr===1?null:this.dbl(),sr=1;sr<nr;sr++)rr[sr]=rr[sr-1].add(ir);return{wnd:er,points:rr}};BasePoint.prototype._getBeta=function tr(){return null};BasePoint.prototype.dblp=function tr(er){for(var rr=this,nr=0;nr<er;nr++)rr=rr.dbl();return rr};var inherits_browser={exports:{}};typeof Object.create=="function"?inherits_browser.exports=function(er,rr){rr&&(er.super_=rr,er.prototype=Object.create(rr.prototype,{constructor:{value:er,enumerable:!1,writable:!0,configurable:!0}}))}:inherits_browser.exports=function(er,rr){if(rr){er.super_=rr;var nr=function(){};nr.prototype=rr.prototype,er.prototype=new nr,er.prototype.constructor=er}};var inherits_browserExports=inherits_browser.exports,utils$r=utils$u,BN$7=bnExports$1,inherits$9=inherits_browserExports,Base$2=base,assert$o=utils$r.assert;function ShortCurve(tr){Base$2.call(this,"short",tr),this.a=new BN$7(tr.a,16).toRed(this.red),this.b=new BN$7(tr.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this._getEndomorphism(tr),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}inherits$9(ShortCurve,Base$2);var short=ShortCurve;ShortCurve.prototype._getEndomorphism=function tr(er){if(!(!this.zeroA||!this.g||!this.n||this.p.modn(3)!==1)){var rr,nr;if(er.beta)rr=new BN$7(er.beta,16).toRed(this.red);else{var ir=this._getEndoRoots(this.p);rr=ir[0].cmp(ir[1])<0?ir[0]:ir[1],rr=rr.toRed(this.red)}if(er.lambda)nr=new BN$7(er.lambda,16);else{var sr=this._getEndoRoots(this.n);this.g.mul(sr[0]).x.cmp(this.g.x.redMul(rr))===0?nr=sr[0]:(nr=sr[1],assert$o(this.g.mul(nr).x.cmp(this.g.x.redMul(rr))===0))}var or;return er.basis?or=er.basis.map(function(ar){return{a:new BN$7(ar.a,16),b:new BN$7(ar.b,16)}}):or=this._getEndoBasis(nr),{beta:rr,lambda:nr,basis:or}}};ShortCurve.prototype._getEndoRoots=function tr(er){var rr=er===this.p?this.red:BN$7.mont(er),nr=new BN$7(2).toRed(rr).redInvm(),ir=nr.redNeg(),sr=new BN$7(3).toRed(rr).redNeg().redSqrt().redMul(nr),or=ir.redAdd(sr).fromRed(),ar=ir.redSub(sr).fromRed();return[or,ar]};ShortCurve.prototype._getEndoBasis=function tr(er){for(var rr=this.n.ushrn(Math.floor(this.n.bitLength()/2)),nr=er,ir=this.n.clone(),sr=new BN$7(1),or=new BN$7(0),ar=new BN$7(0),cr=new BN$7(1),lr,ur,dr,yr,mr,wr,xr,Or=0,Tr,Ar;nr.cmpn(0)!==0;){var Nr=ir.div(nr);Tr=ir.sub(Nr.mul(nr)),Ar=ar.sub(Nr.mul(sr));var Ur=cr.sub(Nr.mul(or));if(!dr&&Tr.cmp(rr)<0)lr=xr.neg(),ur=sr,dr=Tr.neg(),yr=Ar;else if(dr&&++Or===2)break;xr=Tr,ir=nr,nr=Tr,ar=sr,sr=Ar,cr=or,or=Ur}mr=Tr.neg(),wr=Ar;var Dr=dr.sqr().add(yr.sqr()),Hr=mr.sqr().add(wr.sqr());return Hr.cmp(Dr)>=0&&(mr=lr,wr=ur),dr.negative&&(dr=dr.neg(),yr=yr.neg()),mr.negative&&(mr=mr.neg(),wr=wr.neg()),[{a:dr,b:yr},{a:mr,b:wr}]};ShortCurve.prototype._endoSplit=function tr(er){var rr=this.endo.basis,nr=rr[0],ir=rr[1],sr=ir.b.mul(er).divRound(this.n),or=nr.b.neg().mul(er).divRound(this.n),ar=sr.mul(nr.a),cr=or.mul(ir.a),lr=sr.mul(nr.b),ur=or.mul(ir.b),dr=er.sub(ar).sub(cr),yr=lr.add(ur).neg();return{k1:dr,k2:yr}};ShortCurve.prototype.pointFromX=function tr(er,rr){er=new BN$7(er,16),er.red||(er=er.toRed(this.red));var nr=er.redSqr().redMul(er).redIAdd(er.redMul(this.a)).redIAdd(this.b),ir=nr.redSqrt();if(ir.redSqr().redSub(nr).cmp(this.zero)!==0)throw new Error("invalid point");var sr=ir.fromRed().isOdd();return(rr&&!sr||!rr&&sr)&&(ir=ir.redNeg()),this.point(er,ir)};ShortCurve.prototype.validate=function tr(er){if(er.inf)return!0;var rr=er.x,nr=er.y,ir=this.a.redMul(rr),sr=rr.redSqr().redMul(rr).redIAdd(ir).redIAdd(this.b);return nr.redSqr().redISub(sr).cmpn(0)===0};ShortCurve.prototype._endoWnafMulAdd=function tr(er,rr,nr){for(var ir=this._endoWnafT1,sr=this._endoWnafT2,or=0;or<er.length;or++){var ar=this._endoSplit(rr[or]),cr=er[or],lr=cr._getBeta();ar.k1.negative&&(ar.k1.ineg(),cr=cr.neg(!0)),ar.k2.negative&&(ar.k2.ineg(),lr=lr.neg(!0)),ir[or*2]=cr,ir[or*2+1]=lr,sr[or*2]=ar.k1,sr[or*2+1]=ar.k2}for(var ur=this._wnafMulAdd(1,ir,sr,or*2,nr),dr=0;dr<or*2;dr++)ir[dr]=null,sr[dr]=null;return ur};function Point$3(tr,er,rr,nr){Base$2.BasePoint.call(this,tr,"affine"),er===null&&rr===null?(this.x=null,this.y=null,this.inf=!0):(this.x=new BN$7(er,16),this.y=new BN$7(rr,16),nr&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}inherits$9(Point$3,Base$2.BasePoint);ShortCurve.prototype.point=function tr(er,rr,nr){return new Point$3(this,er,rr,nr)};ShortCurve.prototype.pointFromJSON=function tr(er,rr){return Point$3.fromJSON(this,er,rr)};Point$3.prototype._getBeta=function tr(){if(this.curve.endo){var er=this.precomputed;if(er&&er.beta)return er.beta;var rr=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(er){var nr=this.curve,ir=function(sr){return nr.point(sr.x.redMul(nr.endo.beta),sr.y)};er.beta=rr,rr.precomputed={beta:null,naf:er.naf&&{wnd:er.naf.wnd,points:er.naf.points.map(ir)},doubles:er.doubles&&{step:er.doubles.step,points:er.doubles.points.map(ir)}}}return rr}};Point$3.prototype.toJSON=function tr(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]};Point$3.fromJSON=function tr(er,rr,nr){typeof rr=="string"&&(rr=JSON.parse(rr));var ir=er.point(rr[0],rr[1],nr);if(!rr[2])return ir;function sr(ar){return er.point(ar[0],ar[1],nr)}var or=rr[2];return ir.precomputed={beta:null,doubles:or.doubles&&{step:or.doubles.step,points:[ir].concat(or.doubles.points.map(sr))},naf:or.naf&&{wnd:or.naf.wnd,points:[ir].concat(or.naf.points.map(sr))}},ir};Point$3.prototype.inspect=function tr(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"};Point$3.prototype.isInfinity=function tr(){return this.inf};Point$3.prototype.add=function tr(er){if(this.inf)return er;if(er.inf)return this;if(this.eq(er))return this.dbl();if(this.neg().eq(er))return this.curve.point(null,null);if(this.x.cmp(er.x)===0)return this.curve.point(null,null);var rr=this.y.redSub(er.y);rr.cmpn(0)!==0&&(rr=rr.redMul(this.x.redSub(er.x).redInvm()));var nr=rr.redSqr().redISub(this.x).redISub(er.x),ir=rr.redMul(this.x.redSub(nr)).redISub(this.y);return this.curve.point(nr,ir)};Point$3.prototype.dbl=function tr(){if(this.inf)return this;var er=this.y.redAdd(this.y);if(er.cmpn(0)===0)return this.curve.point(null,null);var rr=this.curve.a,nr=this.x.redSqr(),ir=er.redInvm(),sr=nr.redAdd(nr).redIAdd(nr).redIAdd(rr).redMul(ir),or=sr.redSqr().redISub(this.x.redAdd(this.x)),ar=sr.redMul(this.x.redSub(or)).redISub(this.y);return this.curve.point(or,ar)};Point$3.prototype.getX=function tr(){return this.x.fromRed()};Point$3.prototype.getY=function tr(){return this.y.fromRed()};Point$3.prototype.mul=function tr(er){return er=new BN$7(er,16),this.isInfinity()?this:this._hasDoubles(er)?this.curve._fixedNafMul(this,er):this.curve.endo?this.curve._endoWnafMulAdd([this],[er]):this.curve._wnafMul(this,er)};Point$3.prototype.mulAdd=function tr(er,rr,nr){var ir=[this,rr],sr=[er,nr];return this.curve.endo?this.curve._endoWnafMulAdd(ir,sr):this.curve._wnafMulAdd(1,ir,sr,2)};Point$3.prototype.jmulAdd=function tr(er,rr,nr){var ir=[this,rr],sr=[er,nr];return this.curve.endo?this.curve._endoWnafMulAdd(ir,sr,!0):this.curve._wnafMulAdd(1,ir,sr,2,!0)};Point$3.prototype.eq=function tr(er){return this===er||this.inf===er.inf&&(this.inf||this.x.cmp(er.x)===0&&this.y.cmp(er.y)===0)};Point$3.prototype.neg=function tr(er){if(this.inf)return this;var rr=this.curve.point(this.x,this.y.redNeg());if(er&&this.precomputed){var nr=this.precomputed,ir=function(sr){return sr.neg()};rr.precomputed={naf:nr.naf&&{wnd:nr.naf.wnd,points:nr.naf.points.map(ir)},doubles:nr.doubles&&{step:nr.doubles.step,points:nr.doubles.points.map(ir)}}}return rr};Point$3.prototype.toJ=function tr(){if(this.inf)return this.curve.jpoint(null,null,null);var er=this.curve.jpoint(this.x,this.y,this.curve.one);return er};function JPoint(tr,er,rr,nr){Base$2.BasePoint.call(this,tr,"jacobian"),er===null&&rr===null&&nr===null?(this.x=this.curve.one,this.y=this.curve.one,this.z=new BN$7(0)):(this.x=new BN$7(er,16),this.y=new BN$7(rr,16),this.z=new BN$7(nr,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}inherits$9(JPoint,Base$2.BasePoint);ShortCurve.prototype.jpoint=function tr(er,rr,nr){return new JPoint(this,er,rr,nr)};JPoint.prototype.toP=function tr(){if(this.isInfinity())return this.curve.point(null,null);var er=this.z.redInvm(),rr=er.redSqr(),nr=this.x.redMul(rr),ir=this.y.redMul(rr).redMul(er);return this.curve.point(nr,ir)};JPoint.prototype.neg=function tr(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)};JPoint.prototype.add=function tr(er){if(this.isInfinity())return er;if(er.isInfinity())return this;var rr=er.z.redSqr(),nr=this.z.redSqr(),ir=this.x.redMul(rr),sr=er.x.redMul(nr),or=this.y.redMul(rr.redMul(er.z)),ar=er.y.redMul(nr.redMul(this.z)),cr=ir.redSub(sr),lr=or.redSub(ar);if(cr.cmpn(0)===0)return lr.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var ur=cr.redSqr(),dr=ur.redMul(cr),yr=ir.redMul(ur),mr=lr.redSqr().redIAdd(dr).redISub(yr).redISub(yr),wr=lr.redMul(yr.redISub(mr)).redISub(or.redMul(dr)),xr=this.z.redMul(er.z).redMul(cr);return this.curve.jpoint(mr,wr,xr)};JPoint.prototype.mixedAdd=function tr(er){if(this.isInfinity())return er.toJ();if(er.isInfinity())return this;var rr=this.z.redSqr(),nr=this.x,ir=er.x.redMul(rr),sr=this.y,or=er.y.redMul(rr).redMul(this.z),ar=nr.redSub(ir),cr=sr.redSub(or);if(ar.cmpn(0)===0)return cr.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var lr=ar.redSqr(),ur=lr.redMul(ar),dr=nr.redMul(lr),yr=cr.redSqr().redIAdd(ur).redISub(dr).redISub(dr),mr=cr.redMul(dr.redISub(yr)).redISub(sr.redMul(ur)),wr=this.z.redMul(ar);return this.curve.jpoint(yr,mr,wr)};JPoint.prototype.dblp=function tr(er){if(er===0)return this;if(this.isInfinity())return this;if(!er)return this.dbl();var rr;if(this.curve.zeroA||this.curve.threeA){var nr=this;for(rr=0;rr<er;rr++)nr=nr.dbl();return nr}var ir=this.curve.a,sr=this.curve.tinv,or=this.x,ar=this.y,cr=this.z,lr=cr.redSqr().redSqr(),ur=ar.redAdd(ar);for(rr=0;rr<er;rr++){var dr=or.redSqr(),yr=ur.redSqr(),mr=yr.redSqr(),wr=dr.redAdd(dr).redIAdd(dr).redIAdd(ir.redMul(lr)),xr=or.redMul(yr),Or=wr.redSqr().redISub(xr.redAdd(xr)),Tr=xr.redISub(Or),Ar=wr.redMul(Tr);Ar=Ar.redIAdd(Ar).redISub(mr);var Nr=ur.redMul(cr);rr+1<er&&(lr=lr.redMul(mr)),or=Or,cr=Nr,ur=Ar}return this.curve.jpoint(or,ur.redMul(sr),cr)};JPoint.prototype.dbl=function tr(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()};JPoint.prototype._zeroDbl=function tr(){var er,rr,nr;if(this.zOne){var ir=this.x.redSqr(),sr=this.y.redSqr(),or=sr.redSqr(),ar=this.x.redAdd(sr).redSqr().redISub(ir).redISub(or);ar=ar.redIAdd(ar);var cr=ir.redAdd(ir).redIAdd(ir),lr=cr.redSqr().redISub(ar).redISub(ar),ur=or.redIAdd(or);ur=ur.redIAdd(ur),ur=ur.redIAdd(ur),er=lr,rr=cr.redMul(ar.redISub(lr)).redISub(ur),nr=this.y.redAdd(this.y)}else{var dr=this.x.redSqr(),yr=this.y.redSqr(),mr=yr.redSqr(),wr=this.x.redAdd(yr).redSqr().redISub(dr).redISub(mr);wr=wr.redIAdd(wr);var xr=dr.redAdd(dr).redIAdd(dr),Or=xr.redSqr(),Tr=mr.redIAdd(mr);Tr=Tr.redIAdd(Tr),Tr=Tr.redIAdd(Tr),er=Or.redISub(wr).redISub(wr),rr=xr.redMul(wr.redISub(er)).redISub(Tr),nr=this.y.redMul(this.z),nr=nr.redIAdd(nr)}return this.curve.jpoint(er,rr,nr)};JPoint.prototype._threeDbl=function tr(){var er,rr,nr;if(this.zOne){var ir=this.x.redSqr(),sr=this.y.redSqr(),or=sr.redSqr(),ar=this.x.redAdd(sr).redSqr().redISub(ir).redISub(or);ar=ar.redIAdd(ar);var cr=ir.redAdd(ir).redIAdd(ir).redIAdd(this.curve.a),lr=cr.redSqr().redISub(ar).redISub(ar);er=lr;var ur=or.redIAdd(or);ur=ur.redIAdd(ur),ur=ur.redIAdd(ur),rr=cr.redMul(ar.redISub(lr)).redISub(ur),nr=this.y.redAdd(this.y)}else{var dr=this.z.redSqr(),yr=this.y.redSqr(),mr=this.x.redMul(yr),wr=this.x.redSub(dr).redMul(this.x.redAdd(dr));wr=wr.redAdd(wr).redIAdd(wr);var xr=mr.redIAdd(mr);xr=xr.redIAdd(xr);var Or=xr.redAdd(xr);er=wr.redSqr().redISub(Or),nr=this.y.redAdd(this.z).redSqr().redISub(yr).redISub(dr);var Tr=yr.redSqr();Tr=Tr.redIAdd(Tr),Tr=Tr.redIAdd(Tr),Tr=Tr.redIAdd(Tr),rr=wr.redMul(xr.redISub(er)).redISub(Tr)}return this.curve.jpoint(er,rr,nr)};JPoint.prototype._dbl=function tr(){var er=this.curve.a,rr=this.x,nr=this.y,ir=this.z,sr=ir.redSqr().redSqr(),or=rr.redSqr(),ar=nr.redSqr(),cr=or.redAdd(or).redIAdd(or).redIAdd(er.redMul(sr)),lr=rr.redAdd(rr);lr=lr.redIAdd(lr);var ur=lr.redMul(ar),dr=cr.redSqr().redISub(ur.redAdd(ur)),yr=ur.redISub(dr),mr=ar.redSqr();mr=mr.redIAdd(mr),mr=mr.redIAdd(mr),mr=mr.redIAdd(mr);var wr=cr.redMul(yr).redISub(mr),xr=nr.redAdd(nr).redMul(ir);return this.curve.jpoint(dr,wr,xr)};JPoint.prototype.trpl=function tr(){if(!this.curve.zeroA)return this.dbl().add(this);var er=this.x.redSqr(),rr=this.y.redSqr(),nr=this.z.redSqr(),ir=rr.redSqr(),sr=er.redAdd(er).redIAdd(er),or=sr.redSqr(),ar=this.x.redAdd(rr).redSqr().redISub(er).redISub(ir);ar=ar.redIAdd(ar),ar=ar.redAdd(ar).redIAdd(ar),ar=ar.redISub(or);var cr=ar.redSqr(),lr=ir.redIAdd(ir);lr=lr.redIAdd(lr),lr=lr.redIAdd(lr),lr=lr.redIAdd(lr);var ur=sr.redIAdd(ar).redSqr().redISub(or).redISub(cr).redISub(lr),dr=rr.redMul(ur);dr=dr.redIAdd(dr),dr=dr.redIAdd(dr);var yr=this.x.redMul(cr).redISub(dr);yr=yr.redIAdd(yr),yr=yr.redIAdd(yr);var mr=this.y.redMul(ur.redMul(lr.redISub(ur)).redISub(ar.redMul(cr)));mr=mr.redIAdd(mr),mr=mr.redIAdd(mr),mr=mr.redIAdd(mr);var wr=this.z.redAdd(ar).redSqr().redISub(nr).redISub(cr);return this.curve.jpoint(yr,mr,wr)};JPoint.prototype.mul=function tr(er,rr){return er=new BN$7(er,rr),this.curve._wnafMul(this,er)};JPoint.prototype.eq=function tr(er){if(er.type==="affine")return this.eq(er.toJ());if(this===er)return!0;var rr=this.z.redSqr(),nr=er.z.redSqr();if(this.x.redMul(nr).redISub(er.x.redMul(rr)).cmpn(0)!==0)return!1;var ir=rr.redMul(this.z),sr=nr.redMul(er.z);return this.y.redMul(sr).redISub(er.y.redMul(ir)).cmpn(0)===0};JPoint.prototype.eqXToP=function tr(er){var rr=this.z.redSqr(),nr=er.toRed(this.curve.red).redMul(rr);if(this.x.cmp(nr)===0)return!0;for(var ir=er.clone(),sr=this.curve.redN.redMul(rr);;){if(ir.iadd(this.curve.n),ir.cmp(this.curve.p)>=0)return!1;if(nr.redIAdd(sr),this.x.cmp(nr)===0)return!0}};JPoint.prototype.inspect=function tr(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"};JPoint.prototype.isInfinity=function tr(){return this.z.cmpn(0)===0};var BN$6=bnExports$1,inherits$8=inherits_browserExports,Base$1=base,utils$q=utils$u;function MontCurve(tr){Base$1.call(this,"mont",tr),this.a=new BN$6(tr.a,16).toRed(this.red),this.b=new BN$6(tr.b,16).toRed(this.red),this.i4=new BN$6(4).toRed(this.red).redInvm(),this.two=new BN$6(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}inherits$8(MontCurve,Base$1);var mont=MontCurve;MontCurve.prototype.validate=function tr(er){var rr=er.normalize().x,nr=rr.redSqr(),ir=nr.redMul(rr).redAdd(nr.redMul(this.a)).redAdd(rr),sr=ir.redSqrt();return sr.redSqr().cmp(ir)===0};function Point$2(tr,er,rr){Base$1.BasePoint.call(this,tr,"projective"),er===null&&rr===null?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new BN$6(er,16),this.z=new BN$6(rr,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}inherits$8(Point$2,Base$1.BasePoint);MontCurve.prototype.decodePoint=function tr(er,rr){return this.point(utils$q.toArray(er,rr),1)};MontCurve.prototype.point=function tr(er,rr){return new Point$2(this,er,rr)};MontCurve.prototype.pointFromJSON=function tr(er){return Point$2.fromJSON(this,er)};Point$2.prototype.precompute=function tr(){};Point$2.prototype._encode=function tr(){return this.getX().toArray("be",this.curve.p.byteLength())};Point$2.fromJSON=function tr(er,rr){return new Point$2(er,rr[0],rr[1]||er.one)};Point$2.prototype.inspect=function tr(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"};Point$2.prototype.isInfinity=function tr(){return this.z.cmpn(0)===0};Point$2.prototype.dbl=function tr(){var er=this.x.redAdd(this.z),rr=er.redSqr(),nr=this.x.redSub(this.z),ir=nr.redSqr(),sr=rr.redSub(ir),or=rr.redMul(ir),ar=sr.redMul(ir.redAdd(this.curve.a24.redMul(sr)));return this.curve.point(or,ar)};Point$2.prototype.add=function tr(){throw new Error("Not supported on Montgomery curve")};Point$2.prototype.diffAdd=function tr(er,rr){var nr=this.x.redAdd(this.z),ir=this.x.redSub(this.z),sr=er.x.redAdd(er.z),or=er.x.redSub(er.z),ar=or.redMul(nr),cr=sr.redMul(ir),lr=rr.z.redMul(ar.redAdd(cr).redSqr()),ur=rr.x.redMul(ar.redISub(cr).redSqr());return this.curve.point(lr,ur)};Point$2.prototype.mul=function tr(er){for(var rr=er.clone(),nr=this,ir=this.curve.point(null,null),sr=this,or=[];rr.cmpn(0)!==0;rr.iushrn(1))or.push(rr.andln(1));for(var ar=or.length-1;ar>=0;ar--)or[ar]===0?(nr=nr.diffAdd(ir,sr),ir=ir.dbl()):(ir=nr.diffAdd(ir,sr),nr=nr.dbl());return ir};Point$2.prototype.mulAdd=function tr(){throw new Error("Not supported on Montgomery curve")};Point$2.prototype.jumlAdd=function tr(){throw new Error("Not supported on Montgomery curve")};Point$2.prototype.eq=function tr(er){return this.getX().cmp(er.getX())===0};Point$2.prototype.normalize=function tr(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this};Point$2.prototype.getX=function tr(){return this.normalize(),this.x.fromRed()};var utils$p=utils$u,BN$5=bnExports$1,inherits$7=inherits_browserExports,Base=base,assert$n=utils$p.assert;function EdwardsCurve(tr){this.twisted=(tr.a|0)!==1,this.mOneA=this.twisted&&(tr.a|0)===-1,this.extended=this.mOneA,Base.call(this,"edwards",tr),this.a=new BN$5(tr.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new BN$5(tr.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new BN$5(tr.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),assert$n(!this.twisted||this.c.fromRed().cmpn(1)===0),this.oneC=(tr.c|0)===1}inherits$7(EdwardsCurve,Base);var edwards=EdwardsCurve;EdwardsCurve.prototype._mulA=function tr(er){return this.mOneA?er.redNeg():this.a.redMul(er)};EdwardsCurve.prototype._mulC=function tr(er){return this.oneC?er:this.c.redMul(er)};EdwardsCurve.prototype.jpoint=function tr(er,rr,nr,ir){return this.point(er,rr,nr,ir)};EdwardsCurve.prototype.pointFromX=function tr(er,rr){er=new BN$5(er,16),er.red||(er=er.toRed(this.red));var nr=er.redSqr(),ir=this.c2.redSub(this.a.redMul(nr)),sr=this.one.redSub(this.c2.redMul(this.d).redMul(nr)),or=ir.redMul(sr.redInvm()),ar=or.redSqrt();if(ar.redSqr().redSub(or).cmp(this.zero)!==0)throw new Error("invalid point");var cr=ar.fromRed().isOdd();return(rr&&!cr||!rr&&cr)&&(ar=ar.redNeg()),this.point(er,ar)};EdwardsCurve.prototype.pointFromY=function tr(er,rr){er=new BN$5(er,16),er.red||(er=er.toRed(this.red));var nr=er.redSqr(),ir=nr.redSub(this.c2),sr=nr.redMul(this.d).redMul(this.c2).redSub(this.a),or=ir.redMul(sr.redInvm());if(or.cmp(this.zero)===0){if(rr)throw new Error("invalid point");return this.point(this.zero,er)}var ar=or.redSqrt();if(ar.redSqr().redSub(or).cmp(this.zero)!==0)throw new Error("invalid point");return ar.fromRed().isOdd()!==rr&&(ar=ar.redNeg()),this.point(ar,er)};EdwardsCurve.prototype.validate=function tr(er){if(er.isInfinity())return!0;er.normalize();var rr=er.x.redSqr(),nr=er.y.redSqr(),ir=rr.redMul(this.a).redAdd(nr),sr=this.c2.redMul(this.one.redAdd(this.d.redMul(rr).redMul(nr)));return ir.cmp(sr)===0};function Point$1(tr,er,rr,nr,ir){Base.BasePoint.call(this,tr,"projective"),er===null&&rr===null&&nr===null?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new BN$5(er,16),this.y=new BN$5(rr,16),this.z=nr?new BN$5(nr,16):this.curve.one,this.t=ir&&new BN$5(ir,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}inherits$7(Point$1,Base.BasePoint);EdwardsCurve.prototype.pointFromJSON=function tr(er){return Point$1.fromJSON(this,er)};EdwardsCurve.prototype.point=function tr(er,rr,nr,ir){return new Point$1(this,er,rr,nr,ir)};Point$1.fromJSON=function tr(er,rr){return new Point$1(er,rr[0],rr[1],rr[2])};Point$1.prototype.inspect=function tr(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"};Point$1.prototype.isInfinity=function tr(){return this.x.cmpn(0)===0&&(this.y.cmp(this.z)===0||this.zOne&&this.y.cmp(this.curve.c)===0)};Point$1.prototype._extDbl=function tr(){var er=this.x.redSqr(),rr=this.y.redSqr(),nr=this.z.redSqr();nr=nr.redIAdd(nr);var ir=this.curve._mulA(er),sr=this.x.redAdd(this.y).redSqr().redISub(er).redISub(rr),or=ir.redAdd(rr),ar=or.redSub(nr),cr=ir.redSub(rr),lr=sr.redMul(ar),ur=or.redMul(cr),dr=sr.redMul(cr),yr=ar.redMul(or);return this.curve.point(lr,ur,yr,dr)};Point$1.prototype._projDbl=function tr(){var er=this.x.redAdd(this.y).redSqr(),rr=this.x.redSqr(),nr=this.y.redSqr(),ir,sr,or,ar,cr,lr;if(this.curve.twisted){ar=this.curve._mulA(rr);var ur=ar.redAdd(nr);this.zOne?(ir=er.redSub(rr).redSub(nr).redMul(ur.redSub(this.curve.two)),sr=ur.redMul(ar.redSub(nr)),or=ur.redSqr().redSub(ur).redSub(ur)):(cr=this.z.redSqr(),lr=ur.redSub(cr).redISub(cr),ir=er.redSub(rr).redISub(nr).redMul(lr),sr=ur.redMul(ar.redSub(nr)),or=ur.redMul(lr))}else ar=rr.redAdd(nr),cr=this.curve._mulC(this.z).redSqr(),lr=ar.redSub(cr).redSub(cr),ir=this.curve._mulC(er.redISub(ar)).redMul(lr),sr=this.curve._mulC(ar).redMul(rr.redISub(nr)),or=ar.redMul(lr);return this.curve.point(ir,sr,or)};Point$1.prototype.dbl=function tr(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()};Point$1.prototype._extAdd=function tr(er){var rr=this.y.redSub(this.x).redMul(er.y.redSub(er.x)),nr=this.y.redAdd(this.x).redMul(er.y.redAdd(er.x)),ir=this.t.redMul(this.curve.dd).redMul(er.t),sr=this.z.redMul(er.z.redAdd(er.z)),or=nr.redSub(rr),ar=sr.redSub(ir),cr=sr.redAdd(ir),lr=nr.redAdd(rr),ur=or.redMul(ar),dr=cr.redMul(lr),yr=or.redMul(lr),mr=ar.redMul(cr);return this.curve.point(ur,dr,mr,yr)};Point$1.prototype._projAdd=function tr(er){var rr=this.z.redMul(er.z),nr=rr.redSqr(),ir=this.x.redMul(er.x),sr=this.y.redMul(er.y),or=this.curve.d.redMul(ir).redMul(sr),ar=nr.redSub(or),cr=nr.redAdd(or),lr=this.x.redAdd(this.y).redMul(er.x.redAdd(er.y)).redISub(ir).redISub(sr),ur=rr.redMul(ar).redMul(lr),dr,yr;return this.curve.twisted?(dr=rr.redMul(cr).redMul(sr.redSub(this.curve._mulA(ir))),yr=ar.redMul(cr)):(dr=rr.redMul(cr).redMul(sr.redSub(ir)),yr=this.curve._mulC(ar).redMul(cr)),this.curve.point(ur,dr,yr)};Point$1.prototype.add=function tr(er){return this.isInfinity()?er:er.isInfinity()?this:this.curve.extended?this._extAdd(er):this._projAdd(er)};Point$1.prototype.mul=function tr(er){return this._hasDoubles(er)?this.curve._fixedNafMul(this,er):this.curve._wnafMul(this,er)};Point$1.prototype.mulAdd=function tr(er,rr,nr){return this.curve._wnafMulAdd(1,[this,rr],[er,nr],2,!1)};Point$1.prototype.jmulAdd=function tr(er,rr,nr){return this.curve._wnafMulAdd(1,[this,rr],[er,nr],2,!0)};Point$1.prototype.normalize=function tr(){if(this.zOne)return this;var er=this.z.redInvm();return this.x=this.x.redMul(er),this.y=this.y.redMul(er),this.t&&(this.t=this.t.redMul(er)),this.z=this.curve.one,this.zOne=!0,this};Point$1.prototype.neg=function tr(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())};Point$1.prototype.getX=function tr(){return this.normalize(),this.x.fromRed()};Point$1.prototype.getY=function tr(){return this.normalize(),this.y.fromRed()};Point$1.prototype.eq=function tr(er){return this===er||this.getX().cmp(er.getX())===0&&this.getY().cmp(er.getY())===0};Point$1.prototype.eqXToP=function tr(er){var rr=er.toRed(this.curve.red).redMul(this.z);if(this.x.cmp(rr)===0)return!0;for(var nr=er.clone(),ir=this.curve.redN.redMul(this.z);;){if(nr.iadd(this.curve.n),nr.cmp(this.curve.p)>=0)return!1;if(rr.redIAdd(ir),this.x.cmp(rr)===0)return!0}};Point$1.prototype.toP=Point$1.prototype.normalize;Point$1.prototype.mixedAdd=Point$1.prototype.add;(function(tr){var er=tr;er.base=base,er.short=short,er.mont=mont,er.edwards=edwards})(curve);var curves$2={},hash$5={},utils$o={},assert$m=minimalisticAssert,inherits$6=inherits_browserExports;utils$o.inherits=inherits$6;function isSurrogatePair(tr,er){return(tr.charCodeAt(er)&64512)!==55296||er<0||er+1>=tr.length?!1:(tr.charCodeAt(er+1)&64512)===56320}function toArray$2(tr,er){if(Array.isArray(tr))return tr.slice();if(!tr)return[];var rr=[];if(typeof tr=="string")if(er){if(er==="hex")for(tr=tr.replace(/[^a-z0-9]+/ig,""),tr.length%2!==0&&(tr="0"+tr),ir=0;ir<tr.length;ir+=2)rr.push(parseInt(tr[ir]+tr[ir+1],16))}else for(var nr=0,ir=0;ir<tr.length;ir++){var sr=tr.charCodeAt(ir);sr<128?rr[nr++]=sr:sr<2048?(rr[nr++]=sr>>6|192,rr[nr++]=sr&63|128):isSurrogatePair(tr,ir)?(sr=65536+((sr&1023)<<10)+(tr.charCodeAt(++ir)&1023),rr[nr++]=sr>>18|240,rr[nr++]=sr>>12&63|128,rr[nr++]=sr>>6&63|128,rr[nr++]=sr&63|128):(rr[nr++]=sr>>12|224,rr[nr++]=sr>>6&63|128,rr[nr++]=sr&63|128)}else for(ir=0;ir<tr.length;ir++)rr[ir]=tr[ir]|0;return rr}utils$o.toArray=toArray$2;function toHex(tr){for(var er="",rr=0;rr<tr.length;rr++)er+=zero2(tr[rr].toString(16));return er}utils$o.toHex=toHex;function htonl(tr){var er=tr>>>24|tr>>>8&65280|tr<<8&16711680|(tr&255)<<24;return er>>>0}utils$o.htonl=htonl;function toHex32(tr,er){for(var rr="",nr=0;nr<tr.length;nr++){var ir=tr[nr];er==="little"&&(ir=htonl(ir)),rr+=zero8(ir.toString(16))}return rr}utils$o.toHex32=toHex32;function zero2(tr){return tr.length===1?"0"+tr:tr}utils$o.zero2=zero2;function zero8(tr){return tr.length===7?"0"+tr:tr.length===6?"00"+tr:tr.length===5?"000"+tr:tr.length===4?"0000"+tr:tr.length===3?"00000"+tr:tr.length===2?"000000"+tr:tr.length===1?"0000000"+tr:tr}utils$o.zero8=zero8;function join32(tr,er,rr,nr){var ir=rr-er;assert$m(ir%4===0);for(var sr=new Array(ir/4),or=0,ar=er;or<sr.length;or++,ar+=4){var cr;nr==="big"?cr=tr[ar]<<24|tr[ar+1]<<16|tr[ar+2]<<8|tr[ar+3]:cr=tr[ar+3]<<24|tr[ar+2]<<16|tr[ar+1]<<8|tr[ar],sr[or]=cr>>>0}return sr}utils$o.join32=join32;function split32(tr,er){for(var rr=new Array(tr.length*4),nr=0,ir=0;nr<tr.length;nr++,ir+=4){var sr=tr[nr];er==="big"?(rr[ir]=sr>>>24,rr[ir+1]=sr>>>16&255,rr[ir+2]=sr>>>8&255,rr[ir+3]=sr&255):(rr[ir+3]=sr>>>24,rr[ir+2]=sr>>>16&255,rr[ir+1]=sr>>>8&255,rr[ir]=sr&255)}return rr}utils$o.split32=split32;function rotr32$1(tr,er){return tr>>>er|tr<<32-er}utils$o.rotr32=rotr32$1;function rotl32$2(tr,er){return tr<<er|tr>>>32-er}utils$o.rotl32=rotl32$2;function sum32$3(tr,er){return tr+er>>>0}utils$o.sum32=sum32$3;function sum32_3$1(tr,er,rr){return tr+er+rr>>>0}utils$o.sum32_3=sum32_3$1;function sum32_4$2(tr,er,rr,nr){return tr+er+rr+nr>>>0}utils$o.sum32_4=sum32_4$2;function sum32_5$2(tr,er,rr,nr,ir){return tr+er+rr+nr+ir>>>0}utils$o.sum32_5=sum32_5$2;function sum64$1(tr,er,rr,nr){var ir=tr[er],sr=tr[er+1],or=nr+sr>>>0,ar=(or<nr?1:0)+rr+ir;tr[er]=ar>>>0,tr[er+1]=or}utils$o.sum64=sum64$1;function sum64_hi$1(tr,er,rr,nr){var ir=er+nr>>>0,sr=(ir<er?1:0)+tr+rr;return sr>>>0}utils$o.sum64_hi=sum64_hi$1;function sum64_lo$1(tr,er,rr,nr){var ir=er+nr;return ir>>>0}utils$o.sum64_lo=sum64_lo$1;function sum64_4_hi$1(tr,er,rr,nr,ir,sr,or,ar){var cr=0,lr=er;lr=lr+nr>>>0,cr+=lr<er?1:0,lr=lr+sr>>>0,cr+=lr<sr?1:0,lr=lr+ar>>>0,cr+=lr<ar?1:0;var ur=tr+rr+ir+or+cr;return ur>>>0}utils$o.sum64_4_hi=sum64_4_hi$1;function sum64_4_lo$1(tr,er,rr,nr,ir,sr,or,ar){var cr=er+nr+sr+ar;return cr>>>0}utils$o.sum64_4_lo=sum64_4_lo$1;function sum64_5_hi$1(tr,er,rr,nr,ir,sr,or,ar,cr,lr){var ur=0,dr=er;dr=dr+nr>>>0,ur+=dr<er?1:0,dr=dr+sr>>>0,ur+=dr<sr?1:0,dr=dr+ar>>>0,ur+=dr<ar?1:0,dr=dr+lr>>>0,ur+=dr<lr?1:0;var yr=tr+rr+ir+or+cr+ur;return yr>>>0}utils$o.sum64_5_hi=sum64_5_hi$1;function sum64_5_lo$1(tr,er,rr,nr,ir,sr,or,ar,cr,lr){var ur=er+nr+sr+ar+lr;return ur>>>0}utils$o.sum64_5_lo=sum64_5_lo$1;function rotr64_hi$1(tr,er,rr){var nr=er<<32-rr|tr>>>rr;return nr>>>0}utils$o.rotr64_hi=rotr64_hi$1;function rotr64_lo$1(tr,er,rr){var nr=tr<<32-rr|er>>>rr;return nr>>>0}utils$o.rotr64_lo=rotr64_lo$1;function shr64_hi$1(tr,er,rr){return tr>>>rr}utils$o.shr64_hi=shr64_hi$1;function shr64_lo$1(tr,er,rr){var nr=tr<<32-rr|er>>>rr;return nr>>>0}utils$o.shr64_lo=shr64_lo$1;var common$6={},utils$n=utils$o,assert$l=minimalisticAssert;function BlockHash$4(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}common$6.BlockHash=BlockHash$4;BlockHash$4.prototype.update=function tr(er,rr){if(er=utils$n.toArray(er,rr),this.pending?this.pending=this.pending.concat(er):this.pending=er,this.pendingTotal+=er.length,this.pending.length>=this._delta8){er=this.pending;var nr=er.length%this._delta8;this.pending=er.slice(er.length-nr,er.length),this.pending.length===0&&(this.pending=null),er=utils$n.join32(er,0,er.length-nr,this.endian);for(var ir=0;ir<er.length;ir+=this._delta32)this._update(er,ir,ir+this._delta32)}return this};BlockHash$4.prototype.digest=function tr(er){return this.update(this._pad()),assert$l(this.pending===null),this._digest(er)};BlockHash$4.prototype._pad=function tr(){var er=this.pendingTotal,rr=this._delta8,nr=rr-(er+this.padLength)%rr,ir=new Array(nr+this.padLength);ir[0]=128;for(var sr=1;sr<nr;sr++)ir[sr]=0;if(er<<=3,this.endian==="big"){for(var or=8;or<this.padLength;or++)ir[sr++]=0;ir[sr++]=0,ir[sr++]=0,ir[sr++]=0,ir[sr++]=0,ir[sr++]=er>>>24&255,ir[sr++]=er>>>16&255,ir[sr++]=er>>>8&255,ir[sr++]=er&255}else for(ir[sr++]=er&255,ir[sr++]=er>>>8&255,ir[sr++]=er>>>16&255,ir[sr++]=er>>>24&255,ir[sr++]=0,ir[sr++]=0,ir[sr++]=0,ir[sr++]=0,or=8;or<this.padLength;or++)ir[sr++]=0;return ir};var sha$1={},common$5={},utils$m=utils$o,rotr32=utils$m.rotr32;function ft_1$1(tr,er,rr,nr){if(tr===0)return ch32$1(er,rr,nr);if(tr===1||tr===3)return p32(er,rr,nr);if(tr===2)return maj32$1(er,rr,nr)}common$5.ft_1=ft_1$1;function ch32$1(tr,er,rr){return tr&er^~tr&rr}common$5.ch32=ch32$1;function maj32$1(tr,er,rr){return tr&er^tr&rr^er&rr}common$5.maj32=maj32$1;function p32(tr,er,rr){return tr^er^rr}common$5.p32=p32;function s0_256$1(tr){return rotr32(tr,2)^rotr32(tr,13)^rotr32(tr,22)}common$5.s0_256=s0_256$1;function s1_256$1(tr){return rotr32(tr,6)^rotr32(tr,11)^rotr32(tr,25)}common$5.s1_256=s1_256$1;function g0_256$1(tr){return rotr32(tr,7)^rotr32(tr,18)^tr>>>3}common$5.g0_256=g0_256$1;function g1_256$1(tr){return rotr32(tr,17)^rotr32(tr,19)^tr>>>10}common$5.g1_256=g1_256$1;var utils$l=utils$o,common$4=common$6,shaCommon$1=common$5,rotl32$1=utils$l.rotl32,sum32$2=utils$l.sum32,sum32_5$1=utils$l.sum32_5,ft_1=shaCommon$1.ft_1,BlockHash$3=common$4.BlockHash,sha1_K=[1518500249,1859775393,2400959708,3395469782];function SHA1(){if(!(this instanceof SHA1))return new SHA1;BlockHash$3.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}utils$l.inherits(SHA1,BlockHash$3);var _1$1=SHA1;SHA1.blockSize=512;SHA1.outSize=160;SHA1.hmacStrength=80;SHA1.padLength=64;SHA1.prototype._update=function tr(er,rr){for(var nr=this.W,ir=0;ir<16;ir++)nr[ir]=er[rr+ir];for(;ir<nr.length;ir++)nr[ir]=rotl32$1(nr[ir-3]^nr[ir-8]^nr[ir-14]^nr[ir-16],1);var sr=this.h[0],or=this.h[1],ar=this.h[2],cr=this.h[3],lr=this.h[4];for(ir=0;ir<nr.length;ir++){var ur=~~(ir/20),dr=sum32_5$1(rotl32$1(sr,5),ft_1(ur,or,ar,cr),lr,nr[ir],sha1_K[ur]);lr=cr,cr=ar,ar=rotl32$1(or,30),or=sr,sr=dr}this.h[0]=sum32$2(this.h[0],sr),this.h[1]=sum32$2(this.h[1],or),this.h[2]=sum32$2(this.h[2],ar),this.h[3]=sum32$2(this.h[3],cr),this.h[4]=sum32$2(this.h[4],lr)};SHA1.prototype._digest=function tr(er){return er==="hex"?utils$l.toHex32(this.h,"big"):utils$l.split32(this.h,"big")};var utils$k=utils$o,common$3=common$6,shaCommon=common$5,assert$k=minimalisticAssert,sum32$1=utils$k.sum32,sum32_4$1=utils$k.sum32_4,sum32_5=utils$k.sum32_5,ch32=shaCommon.ch32,maj32=shaCommon.maj32,s0_256=shaCommon.s0_256,s1_256=shaCommon.s1_256,g0_256=shaCommon.g0_256,g1_256=shaCommon.g1_256,BlockHash$2=common$3.BlockHash,sha256_K=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function SHA256$2(){if(!(this instanceof SHA256$2))return new SHA256$2;BlockHash$2.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=sha256_K,this.W=new Array(64)}utils$k.inherits(SHA256$2,BlockHash$2);var _256=SHA256$2;SHA256$2.blockSize=512;SHA256$2.outSize=256;SHA256$2.hmacStrength=192;SHA256$2.padLength=64;SHA256$2.prototype._update=function tr(er,rr){for(var nr=this.W,ir=0;ir<16;ir++)nr[ir]=er[rr+ir];for(;ir<nr.length;ir++)nr[ir]=sum32_4$1(g1_256(nr[ir-2]),nr[ir-7],g0_256(nr[ir-15]),nr[ir-16]);var sr=this.h[0],or=this.h[1],ar=this.h[2],cr=this.h[3],lr=this.h[4],ur=this.h[5],dr=this.h[6],yr=this.h[7];for(assert$k(this.k.length===nr.length),ir=0;ir<nr.length;ir++){var mr=sum32_5(yr,s1_256(lr),ch32(lr,ur,dr),this.k[ir],nr[ir]),wr=sum32$1(s0_256(sr),maj32(sr,or,ar));yr=dr,dr=ur,ur=lr,lr=sum32$1(cr,mr),cr=ar,ar=or,or=sr,sr=sum32$1(mr,wr)}this.h[0]=sum32$1(this.h[0],sr),this.h[1]=sum32$1(this.h[1],or),this.h[2]=sum32$1(this.h[2],ar),this.h[3]=sum32$1(this.h[3],cr),this.h[4]=sum32$1(this.h[4],lr),this.h[5]=sum32$1(this.h[5],ur),this.h[6]=sum32$1(this.h[6],dr),this.h[7]=sum32$1(this.h[7],yr)};SHA256$2.prototype._digest=function tr(er){return er==="hex"?utils$k.toHex32(this.h,"big"):utils$k.split32(this.h,"big")};var utils$j=utils$o,SHA256$1=_256;function SHA224(){if(!(this instanceof SHA224))return new SHA224;SHA256$1.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}utils$j.inherits(SHA224,SHA256$1);var _224=SHA224;SHA224.blockSize=512;SHA224.outSize=224;SHA224.hmacStrength=192;SHA224.padLength=64;SHA224.prototype._digest=function tr(er){return er==="hex"?utils$j.toHex32(this.h.slice(0,7),"big"):utils$j.split32(this.h.slice(0,7),"big")};var utils$i=utils$o,common$2=common$6,assert$j=minimalisticAssert,rotr64_hi=utils$i.rotr64_hi,rotr64_lo=utils$i.rotr64_lo,shr64_hi=utils$i.shr64_hi,shr64_lo=utils$i.shr64_lo,sum64=utils$i.sum64,sum64_hi=utils$i.sum64_hi,sum64_lo=utils$i.sum64_lo,sum64_4_hi=utils$i.sum64_4_hi,sum64_4_lo=utils$i.sum64_4_lo,sum64_5_hi=utils$i.sum64_5_hi,sum64_5_lo=utils$i.sum64_5_lo,BlockHash$1=common$2.BlockHash,sha512_K=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function SHA512$2(){if(!(this instanceof SHA512$2))return new SHA512$2;BlockHash$1.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=sha512_K,this.W=new Array(160)}utils$i.inherits(SHA512$2,BlockHash$1);var _512=SHA512$2;SHA512$2.blockSize=1024;SHA512$2.outSize=512;SHA512$2.hmacStrength=192;SHA512$2.padLength=128;SHA512$2.prototype._prepareBlock=function tr(er,rr){for(var nr=this.W,ir=0;ir<32;ir++)nr[ir]=er[rr+ir];for(;ir<nr.length;ir+=2){var sr=g1_512_hi(nr[ir-4],nr[ir-3]),or=g1_512_lo(nr[ir-4],nr[ir-3]),ar=nr[ir-14],cr=nr[ir-13],lr=g0_512_hi(nr[ir-30],nr[ir-29]),ur=g0_512_lo(nr[ir-30],nr[ir-29]),dr=nr[ir-32],yr=nr[ir-31];nr[ir]=sum64_4_hi(sr,or,ar,cr,lr,ur,dr,yr),nr[ir+1]=sum64_4_lo(sr,or,ar,cr,lr,ur,dr,yr)}};SHA512$2.prototype._update=function tr(er,rr){this._prepareBlock(er,rr);var nr=this.W,ir=this.h[0],sr=this.h[1],or=this.h[2],ar=this.h[3],cr=this.h[4],lr=this.h[5],ur=this.h[6],dr=this.h[7],yr=this.h[8],mr=this.h[9],wr=this.h[10],xr=this.h[11],Or=this.h[12],Tr=this.h[13],Ar=this.h[14],Nr=this.h[15];assert$j(this.k.length===nr.length);for(var Ur=0;Ur<nr.length;Ur+=2){var Dr=Ar,Hr=Nr,zr=s1_512_hi(yr,mr),Cr=s1_512_lo(yr,mr),Mr=ch64_hi(yr,mr,wr,xr,Or),Pr=ch64_lo(yr,mr,wr,xr,Or,Tr),Sr=this.k[Ur],pr=this.k[Ur+1],gr=nr[Ur],fr=nr[Ur+1],hr=sum64_5_hi(Dr,Hr,zr,Cr,Mr,Pr,Sr,pr,gr,fr),br=sum64_5_lo(Dr,Hr,zr,Cr,Mr,Pr,Sr,pr,gr,fr);Dr=s0_512_hi(ir,sr),Hr=s0_512_lo(ir,sr),zr=maj64_hi(ir,sr,or,ar,cr),Cr=maj64_lo(ir,sr,or,ar,cr,lr);var _r=sum64_hi(Dr,Hr,zr,Cr),$r=sum64_lo(Dr,Hr,zr,Cr);Ar=Or,Nr=Tr,Or=wr,Tr=xr,wr=yr,xr=mr,yr=sum64_hi(ur,dr,hr,br),mr=sum64_lo(dr,dr,hr,br),ur=cr,dr=lr,cr=or,lr=ar,or=ir,ar=sr,ir=sum64_hi(hr,br,_r,$r),sr=sum64_lo(hr,br,_r,$r)}sum64(this.h,0,ir,sr),sum64(this.h,2,or,ar),sum64(this.h,4,cr,lr),sum64(this.h,6,ur,dr),sum64(this.h,8,yr,mr),sum64(this.h,10,wr,xr),sum64(this.h,12,Or,Tr),sum64(this.h,14,Ar,Nr)};SHA512$2.prototype._digest=function tr(er){return er==="hex"?utils$i.toHex32(this.h,"big"):utils$i.split32(this.h,"big")};function ch64_hi(tr,er,rr,nr,ir){var sr=tr&rr^~tr&ir;return sr<0&&(sr+=4294967296),sr}function ch64_lo(tr,er,rr,nr,ir,sr){var or=er&nr^~er&sr;return or<0&&(or+=4294967296),or}function maj64_hi(tr,er,rr,nr,ir){var sr=tr&rr^tr&ir^rr&ir;return sr<0&&(sr+=4294967296),sr}function maj64_lo(tr,er,rr,nr,ir,sr){var or=er&nr^er&sr^nr&sr;return or<0&&(or+=4294967296),or}function s0_512_hi(tr,er){var rr=rotr64_hi(tr,er,28),nr=rotr64_hi(er,tr,2),ir=rotr64_hi(er,tr,7),sr=rr^nr^ir;return sr<0&&(sr+=4294967296),sr}function s0_512_lo(tr,er){var rr=rotr64_lo(tr,er,28),nr=rotr64_lo(er,tr,2),ir=rotr64_lo(er,tr,7),sr=rr^nr^ir;return sr<0&&(sr+=4294967296),sr}function s1_512_hi(tr,er){var rr=rotr64_hi(tr,er,14),nr=rotr64_hi(tr,er,18),ir=rotr64_hi(er,tr,9),sr=rr^nr^ir;return sr<0&&(sr+=4294967296),sr}function s1_512_lo(tr,er){var rr=rotr64_lo(tr,er,14),nr=rotr64_lo(tr,er,18),ir=rotr64_lo(er,tr,9),sr=rr^nr^ir;return sr<0&&(sr+=4294967296),sr}function g0_512_hi(tr,er){var rr=rotr64_hi(tr,er,1),nr=rotr64_hi(tr,er,8),ir=shr64_hi(tr,er,7),sr=rr^nr^ir;return sr<0&&(sr+=4294967296),sr}function g0_512_lo(tr,er){var rr=rotr64_lo(tr,er,1),nr=rotr64_lo(tr,er,8),ir=shr64_lo(tr,er,7),sr=rr^nr^ir;return sr<0&&(sr+=4294967296),sr}function g1_512_hi(tr,er){var rr=rotr64_hi(tr,er,19),nr=rotr64_hi(er,tr,29),ir=shr64_hi(tr,er,6),sr=rr^nr^ir;return sr<0&&(sr+=4294967296),sr}function g1_512_lo(tr,er){var rr=rotr64_lo(tr,er,19),nr=rotr64_lo(er,tr,29),ir=shr64_lo(tr,er,6),sr=rr^nr^ir;return sr<0&&(sr+=4294967296),sr}var utils$h=utils$o,SHA512$1=_512;function SHA384(){if(!(this instanceof SHA384))return new SHA384;SHA512$1.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}utils$h.inherits(SHA384,SHA512$1);var _384=SHA384;SHA384.blockSize=1024;SHA384.outSize=384;SHA384.hmacStrength=192;SHA384.padLength=128;SHA384.prototype._digest=function tr(er){return er==="hex"?utils$h.toHex32(this.h.slice(0,12),"big"):utils$h.split32(this.h.slice(0,12),"big")};sha$1.sha1=_1$1;sha$1.sha224=_224;sha$1.sha256=_256;sha$1.sha384=_384;sha$1.sha512=_512;var ripemd={},utils$g=utils$o,common$1=common$6,rotl32=utils$g.rotl32,sum32=utils$g.sum32,sum32_3=utils$g.sum32_3,sum32_4=utils$g.sum32_4,BlockHash=common$1.BlockHash;function RIPEMD160(){if(!(this instanceof RIPEMD160))return new RIPEMD160;BlockHash.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}utils$g.inherits(RIPEMD160,BlockHash);ripemd.ripemd160=RIPEMD160;RIPEMD160.blockSize=512;RIPEMD160.outSize=160;RIPEMD160.hmacStrength=192;RIPEMD160.padLength=64;RIPEMD160.prototype._update=function tr(er,rr){for(var nr=this.h[0],ir=this.h[1],sr=this.h[2],or=this.h[3],ar=this.h[4],cr=nr,lr=ir,ur=sr,dr=or,yr=ar,mr=0;mr<80;mr++){var wr=sum32(rotl32(sum32_4(nr,f$2(mr,ir,sr,or),er[r$3[mr]+rr],K$4(mr)),s$2[mr]),ar);nr=ar,ar=or,or=rotl32(sr,10),sr=ir,ir=wr,wr=sum32(rotl32(sum32_4(cr,f$2(79-mr,lr,ur,dr),er[rh[mr]+rr],Kh(mr)),sh[mr]),yr),cr=yr,yr=dr,dr=rotl32(ur,10),ur=lr,lr=wr}wr=sum32_3(this.h[1],sr,dr),this.h[1]=sum32_3(this.h[2],or,yr),this.h[2]=sum32_3(this.h[3],ar,cr),this.h[3]=sum32_3(this.h[4],nr,lr),this.h[4]=sum32_3(this.h[0],ir,ur),this.h[0]=wr};RIPEMD160.prototype._digest=function tr(er){return er==="hex"?utils$g.toHex32(this.h,"little"):utils$g.split32(this.h,"little")};function f$2(tr,er,rr,nr){return tr<=15?er^rr^nr:tr<=31?er&rr|~er&nr:tr<=47?(er|~rr)^nr:tr<=63?er&nr|rr&~nr:er^(rr|~nr)}function K$4(tr){return tr<=15?0:tr<=31?1518500249:tr<=47?1859775393:tr<=63?2400959708:2840853838}function Kh(tr){return tr<=15?1352829926:tr<=31?1548603684:tr<=47?1836072691:tr<=63?2053994217:0}var r$3=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],rh=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],s$2=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],sh=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],utils$f=utils$o,assert$i=minimalisticAssert;function Hmac(tr,er,rr){if(!(this instanceof Hmac))return new Hmac(tr,er,rr);this.Hash=tr,this.blockSize=tr.blockSize/8,this.outSize=tr.outSize/8,this.inner=null,this.outer=null,this._init(utils$f.toArray(er,rr))}var hmac$1=Hmac;Hmac.prototype._init=function tr(er){er.length>this.blockSize&&(er=new this.Hash().update(er).digest()),assert$i(er.length<=this.blockSize);for(var rr=er.length;rr<this.blockSize;rr++)er.push(0);for(rr=0;rr<er.length;rr++)er[rr]^=54;for(this.inner=new this.Hash().update(er),rr=0;rr<er.length;rr++)er[rr]^=106;this.outer=new this.Hash().update(er)};Hmac.prototype.update=function tr(er,rr){return this.inner.update(er,rr),this};Hmac.prototype.digest=function tr(er){return this.outer.update(this.inner.digest()),this.outer.digest(er)};(function(tr){var er=tr;er.utils=utils$o,er.common=common$6,er.sha=sha$1,er.ripemd=ripemd,er.hmac=hmac$1,er.sha1=er.sha.sha1,er.sha256=er.sha.sha256,er.sha224=er.sha.sha224,er.sha384=er.sha.sha384,er.sha512=er.sha.sha512,er.ripemd160=er.ripemd.ripemd160})(hash$5);var secp256k1$3,hasRequiredSecp256k1;function requireSecp256k1(){return hasRequiredSecp256k1||(hasRequiredSecp256k1=1,secp256k1$3={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}),secp256k1$3}(function(tr){var er=tr,rr=hash$5,nr=curve,ir=utils$u,sr=ir.assert;function or(lr){lr.type==="short"?this.curve=new nr.short(lr):lr.type==="edwards"?this.curve=new nr.edwards(lr):this.curve=new nr.mont(lr),this.g=this.curve.g,this.n=this.curve.n,this.hash=lr.hash,sr(this.g.validate(),"Invalid curve"),sr(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}er.PresetCurve=or;function ar(lr,ur){Object.defineProperty(er,lr,{configurable:!0,enumerable:!0,get:function(){var dr=new or(ur);return Object.defineProperty(er,lr,{configurable:!0,enumerable:!0,value:dr}),dr}})}ar("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:rr.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),ar("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:rr.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),ar("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:rr.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),ar("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:rr.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),ar("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:rr.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),ar("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:rr.sha256,gRed:!1,g:["9"]}),ar("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:rr.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});var cr;try{cr=requireSecp256k1()}catch{cr=void 0}ar("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:rr.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",cr]})})(curves$2);var hash$4=hash$5,utils$e=utils$t,assert$h=minimalisticAssert;function HmacDRBG$1(tr){if(!(this instanceof HmacDRBG$1))return new HmacDRBG$1(tr);this.hash=tr.hash,this.predResist=!!tr.predResist,this.outLen=this.hash.outSize,this.minEntropy=tr.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var er=utils$e.toArray(tr.entropy,tr.entropyEnc||"hex"),rr=utils$e.toArray(tr.nonce,tr.nonceEnc||"hex"),nr=utils$e.toArray(tr.pers,tr.persEnc||"hex");assert$h(er.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(er,rr,nr)}var hmacDrbg=HmacDRBG$1;HmacDRBG$1.prototype._init=function tr(er,rr,nr){var ir=er.concat(rr).concat(nr);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var sr=0;sr<this.V.length;sr++)this.K[sr]=0,this.V[sr]=1;this._update(ir),this._reseed=1,this.reseedInterval=281474976710656};HmacDRBG$1.prototype._hmac=function tr(){return new hash$4.hmac(this.hash,this.K)};HmacDRBG$1.prototype._update=function tr(er){var rr=this._hmac().update(this.V).update([0]);er&&(rr=rr.update(er)),this.K=rr.digest(),this.V=this._hmac().update(this.V).digest(),er&&(this.K=this._hmac().update(this.V).update([1]).update(er).digest(),this.V=this._hmac().update(this.V).digest())};HmacDRBG$1.prototype.reseed=function tr(er,rr,nr,ir){typeof rr!="string"&&(ir=nr,nr=rr,rr=null),er=utils$e.toArray(er,rr),nr=utils$e.toArray(nr,ir),assert$h(er.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(er.concat(nr||[])),this._reseed=1};HmacDRBG$1.prototype.generate=function tr(er,rr,nr,ir){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");typeof rr!="string"&&(ir=nr,nr=rr,rr=null),nr&&(nr=utils$e.toArray(nr,ir||"hex"),this._update(nr));for(var sr=[];sr.length<er;)this.V=this._hmac().update(this.V).digest(),sr=sr.concat(this.V);var or=sr.slice(0,er);return this._update(nr),this._reseed++,utils$e.encode(or,rr)};var BN$4=bnExports$1,utils$d=utils$u,assert$g=utils$d.assert;function KeyPair$3(tr,er){this.ec=tr,this.priv=null,this.pub=null,er.priv&&this._importPrivate(er.priv,er.privEnc),er.pub&&this._importPublic(er.pub,er.pubEnc)}var key$1=KeyPair$3;KeyPair$3.fromPublic=function tr(er,rr,nr){return rr instanceof KeyPair$3?rr:new KeyPair$3(er,{pub:rr,pubEnc:nr})};KeyPair$3.fromPrivate=function tr(er,rr,nr){return rr instanceof KeyPair$3?rr:new KeyPair$3(er,{priv:rr,privEnc:nr})};KeyPair$3.prototype.validate=function tr(){var er=this.getPublic();return er.isInfinity()?{result:!1,reason:"Invalid public key"}:er.validate()?er.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}};KeyPair$3.prototype.getPublic=function tr(er,rr){return typeof er=="string"&&(rr=er,er=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),rr?this.pub.encode(rr,er):this.pub};KeyPair$3.prototype.getPrivate=function tr(er){return er==="hex"?this.priv.toString(16,2):this.priv};KeyPair$3.prototype._importPrivate=function tr(er,rr){this.priv=new BN$4(er,rr||16),this.priv=this.priv.umod(this.ec.curve.n)};KeyPair$3.prototype._importPublic=function tr(er,rr){if(er.x||er.y){this.ec.curve.type==="mont"?assert$g(er.x,"Need x coordinate"):(this.ec.curve.type==="short"||this.ec.curve.type==="edwards")&&assert$g(er.x&&er.y,"Need both x and y coordinate"),this.pub=this.ec.curve.point(er.x,er.y);return}this.pub=this.ec.curve.decodePoint(er,rr)};KeyPair$3.prototype.derive=function tr(er){return er.validate()||assert$g(er.validate(),"public point not validated"),er.mul(this.priv).getX()};KeyPair$3.prototype.sign=function tr(er,rr,nr){return this.ec.sign(er,this,rr,nr)};KeyPair$3.prototype.verify=function tr(er,rr){return this.ec.verify(er,rr,this)};KeyPair$3.prototype.inspect=function tr(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"};var BN$3=bnExports$1,utils$c=utils$u,assert$f=utils$c.assert;function Signature$3(tr,er){if(tr instanceof Signature$3)return tr;this._importDER(tr,er)||(assert$f(tr.r&&tr.s,"Signature without r or s"),this.r=new BN$3(tr.r,16),this.s=new BN$3(tr.s,16),tr.recoveryParam===void 0?this.recoveryParam=null:this.recoveryParam=tr.recoveryParam)}var signature$2=Signature$3;function Position(){this.place=0}function getLength(tr,er){var rr=tr[er.place++];if(!(rr&128))return rr;var nr=rr&15;if(nr===0||nr>4)return!1;for(var ir=0,sr=0,or=er.place;sr<nr;sr++,or++)ir<<=8,ir|=tr[or],ir>>>=0;return ir<=127?!1:(er.place=or,ir)}function rmPadding(tr){for(var er=0,rr=tr.length-1;!tr[er]&&!(tr[er+1]&128)&&er<rr;)er++;return er===0?tr:tr.slice(er)}Signature$3.prototype._importDER=function tr(er,rr){er=utils$c.toArray(er,rr);var nr=new Position;if(er[nr.place++]!==48)return!1;var ir=getLength(er,nr);if(ir===!1||ir+nr.place!==er.length||er[nr.place++]!==2)return!1;var sr=getLength(er,nr);if(sr===!1)return!1;var or=er.slice(nr.place,sr+nr.place);if(nr.place+=sr,er[nr.place++]!==2)return!1;var ar=getLength(er,nr);if(ar===!1||er.length!==ar+nr.place)return!1;var cr=er.slice(nr.place,ar+nr.place);if(or[0]===0)if(or[1]&128)or=or.slice(1);else return!1;if(cr[0]===0)if(cr[1]&128)cr=cr.slice(1);else return!1;return this.r=new BN$3(or),this.s=new BN$3(cr),this.recoveryParam=null,!0};function constructLength(tr,er){if(er<128){tr.push(er);return}var rr=1+(Math.log(er)/Math.LN2>>>3);for(tr.push(rr|128);--rr;)tr.push(er>>>(rr<<3)&255);tr.push(er)}Signature$3.prototype.toDER=function tr(er){var rr=this.r.toArray(),nr=this.s.toArray();for(rr[0]&128&&(rr=[0].concat(rr)),nr[0]&128&&(nr=[0].concat(nr)),rr=rmPadding(rr),nr=rmPadding(nr);!nr[0]&&!(nr[1]&128);)nr=nr.slice(1);var ir=[2];constructLength(ir,rr.length),ir=ir.concat(rr),ir.push(2),constructLength(ir,nr.length);var sr=ir.concat(nr),or=[48];return constructLength(or,sr.length),or=or.concat(sr),utils$c.encode(or,er)};var BN$2=bnExports$1,HmacDRBG=hmacDrbg,utils$b=utils$u,curves$1=curves$2,rand=brorandExports,assert$e=utils$b.assert,KeyPair$2=key$1,Signature$2=signature$2;function EC(tr){if(!(this instanceof EC))return new EC(tr);typeof tr=="string"&&(assert$e(Object.prototype.hasOwnProperty.call(curves$1,tr),"Unknown curve "+tr),tr=curves$1[tr]),tr instanceof curves$1.PresetCurve&&(tr={curve:tr}),this.curve=tr.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=tr.curve.g,this.g.precompute(tr.curve.n.bitLength()+1),this.hash=tr.hash||tr.curve.hash}var ec$2=EC;EC.prototype.keyPair=function tr(er){return new KeyPair$2(this,er)};EC.prototype.keyFromPrivate=function tr(er,rr){return KeyPair$2.fromPrivate(this,er,rr)};EC.prototype.keyFromPublic=function tr(er,rr){return KeyPair$2.fromPublic(this,er,rr)};EC.prototype.genKeyPair=function tr(er){er||(er={});for(var rr=new HmacDRBG({hash:this.hash,pers:er.pers,persEnc:er.persEnc||"utf8",entropy:er.entropy||rand(this.hash.hmacStrength),entropyEnc:er.entropy&&er.entropyEnc||"utf8",nonce:this.n.toArray()}),nr=this.n.byteLength(),ir=this.n.sub(new BN$2(2));;){var sr=new BN$2(rr.generate(nr));if(!(sr.cmp(ir)>0))return sr.iaddn(1),this.keyFromPrivate(sr)}};EC.prototype._truncateToN=function tr(er,rr){var nr=er.byteLength()*8-this.n.bitLength();return nr>0&&(er=er.ushrn(nr)),!rr&&er.cmp(this.n)>=0?er.sub(this.n):er};EC.prototype.sign=function tr(er,rr,nr,ir){typeof nr=="object"&&(ir=nr,nr=null),ir||(ir={}),rr=this.keyFromPrivate(rr,nr),er=this._truncateToN(new BN$2(er,16));for(var sr=this.n.byteLength(),or=rr.getPrivate().toArray("be",sr),ar=er.toArray("be",sr),cr=new HmacDRBG({hash:this.hash,entropy:or,nonce:ar,pers:ir.pers,persEnc:ir.persEnc||"utf8"}),lr=this.n.sub(new BN$2(1)),ur=0;;ur++){var dr=ir.k?ir.k(ur):new BN$2(cr.generate(this.n.byteLength()));if(dr=this._truncateToN(dr,!0),!(dr.cmpn(1)<=0||dr.cmp(lr)>=0)){var yr=this.g.mul(dr);if(!yr.isInfinity()){var mr=yr.getX(),wr=mr.umod(this.n);if(wr.cmpn(0)!==0){var xr=dr.invm(this.n).mul(wr.mul(rr.getPrivate()).iadd(er));if(xr=xr.umod(this.n),xr.cmpn(0)!==0){var Or=(yr.getY().isOdd()?1:0)|(mr.cmp(wr)!==0?2:0);return ir.canonical&&xr.cmp(this.nh)>0&&(xr=this.n.sub(xr),Or^=1),new Signature$2({r:wr,s:xr,recoveryParam:Or})}}}}}};EC.prototype.verify=function tr(er,rr,nr,ir){er=this._truncateToN(new BN$2(er,16)),nr=this.keyFromPublic(nr,ir),rr=new Signature$2(rr,"hex");var sr=rr.r,or=rr.s;if(sr.cmpn(1)<0||sr.cmp(this.n)>=0||or.cmpn(1)<0||or.cmp(this.n)>=0)return!1;var ar=or.invm(this.n),cr=ar.mul(er).umod(this.n),lr=ar.mul(sr).umod(this.n),ur;return this.curve._maxwellTrick?(ur=this.g.jmulAdd(cr,nr.getPublic(),lr),ur.isInfinity()?!1:ur.eqXToP(sr)):(ur=this.g.mulAdd(cr,nr.getPublic(),lr),ur.isInfinity()?!1:ur.getX().umod(this.n).cmp(sr)===0)};EC.prototype.recoverPubKey=function(tr,er,rr,nr){assert$e((3&rr)===rr,"The recovery param is more than two bits"),er=new Signature$2(er,nr);var ir=this.n,sr=new BN$2(tr),or=er.r,ar=er.s,cr=rr&1,lr=rr>>1;if(or.cmp(this.curve.p.umod(this.curve.n))>=0&&lr)throw new Error("Unable to find sencond key candinate");lr?or=this.curve.pointFromX(or.add(this.curve.n),cr):or=this.curve.pointFromX(or,cr);var ur=er.r.invm(ir),dr=ir.sub(sr).mul(ur).umod(ir),yr=ar.mul(ur).umod(ir);return this.g.mulAdd(dr,or,yr)};EC.prototype.getKeyRecoveryParam=function(tr,er,rr,nr){if(er=new Signature$2(er,nr),er.recoveryParam!==null)return er.recoveryParam;for(var ir=0;ir<4;ir++){var sr;try{sr=this.recoverPubKey(tr,er,ir)}catch{continue}if(sr.eq(rr))return ir}throw new Error("Unable to find valid recovery factor")};var utils$a=utils$u,assert$d=utils$a.assert,parseBytes$2=utils$a.parseBytes,cachedProperty$1=utils$a.cachedProperty;function KeyPair$1(tr,er){this.eddsa=tr,this._secret=parseBytes$2(er.secret),tr.isPoint(er.pub)?this._pub=er.pub:this._pubBytes=parseBytes$2(er.pub)}KeyPair$1.fromPublic=function tr(er,rr){return rr instanceof KeyPair$1?rr:new KeyPair$1(er,{pub:rr})};KeyPair$1.fromSecret=function tr(er,rr){return rr instanceof KeyPair$1?rr:new KeyPair$1(er,{secret:rr})};KeyPair$1.prototype.secret=function tr(){return this._secret};cachedProperty$1(KeyPair$1,"pubBytes",function tr(){return this.eddsa.encodePoint(this.pub())});cachedProperty$1(KeyPair$1,"pub",function tr(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())});cachedProperty$1(KeyPair$1,"privBytes",function tr(){var er=this.eddsa,rr=this.hash(),nr=er.encodingLength-1,ir=rr.slice(0,er.encodingLength);return ir[0]&=248,ir[nr]&=127,ir[nr]|=64,ir});cachedProperty$1(KeyPair$1,"priv",function tr(){return this.eddsa.decodeInt(this.privBytes())});cachedProperty$1(KeyPair$1,"hash",function tr(){return this.eddsa.hash().update(this.secret()).digest()});cachedProperty$1(KeyPair$1,"messagePrefix",function tr(){return this.hash().slice(this.eddsa.encodingLength)});KeyPair$1.prototype.sign=function tr(er){return assert$d(this._secret,"KeyPair can only verify"),this.eddsa.sign(er,this)};KeyPair$1.prototype.verify=function tr(er,rr){return this.eddsa.verify(er,rr,this)};KeyPair$1.prototype.getSecret=function tr(er){return assert$d(this._secret,"KeyPair is public only"),utils$a.encode(this.secret(),er)};KeyPair$1.prototype.getPublic=function tr(er){return utils$a.encode(this.pubBytes(),er)};var key=KeyPair$1,BN$1=bnExports$1,utils$9=utils$u,assert$c=utils$9.assert,cachedProperty=utils$9.cachedProperty,parseBytes$1=utils$9.parseBytes;function Signature$1(tr,er){this.eddsa=tr,typeof er!="object"&&(er=parseBytes$1(er)),Array.isArray(er)&&(er={R:er.slice(0,tr.encodingLength),S:er.slice(tr.encodingLength)}),assert$c(er.R&&er.S,"Signature without R or S"),tr.isPoint(er.R)&&(this._R=er.R),er.S instanceof BN$1&&(this._S=er.S),this._Rencoded=Array.isArray(er.R)?er.R:er.Rencoded,this._Sencoded=Array.isArray(er.S)?er.S:er.Sencoded}cachedProperty(Signature$1,"S",function tr(){return this.eddsa.decodeInt(this.Sencoded())});cachedProperty(Signature$1,"R",function tr(){return this.eddsa.decodePoint(this.Rencoded())});cachedProperty(Signature$1,"Rencoded",function tr(){return this.eddsa.encodePoint(this.R())});cachedProperty(Signature$1,"Sencoded",function tr(){return this.eddsa.encodeInt(this.S())});Signature$1.prototype.toBytes=function tr(){return this.Rencoded().concat(this.Sencoded())};Signature$1.prototype.toHex=function tr(){return utils$9.encode(this.toBytes(),"hex").toUpperCase()};var signature$1=Signature$1,hash$3=hash$5,curves=curves$2,utils$8=utils$u,assert$b=utils$8.assert,parseBytes=utils$8.parseBytes,KeyPair=key,Signature=signature$1;function EDDSA(tr){if(assert$b(tr==="ed25519","only tested with ed25519 so far"),!(this instanceof EDDSA))return new EDDSA(tr);tr=curves[tr].curve,this.curve=tr,this.g=tr.g,this.g.precompute(tr.n.bitLength()+1),this.pointClass=tr.point().constructor,this.encodingLength=Math.ceil(tr.n.bitLength()/8),this.hash=hash$3.sha512}var eddsa=EDDSA;EDDSA.prototype.sign=function tr(er,rr){er=parseBytes(er);var nr=this.keyFromSecret(rr),ir=this.hashInt(nr.messagePrefix(),er),sr=this.g.mul(ir),or=this.encodePoint(sr),ar=this.hashInt(or,nr.pubBytes(),er).mul(nr.priv()),cr=ir.add(ar).umod(this.curve.n);return this.makeSignature({R:sr,S:cr,Rencoded:or})};EDDSA.prototype.verify=function tr(er,rr,nr){er=parseBytes(er),rr=this.makeSignature(rr);var ir=this.keyFromPublic(nr),sr=this.hashInt(rr.Rencoded(),ir.pubBytes(),er),or=this.g.mul(rr.S()),ar=rr.R().add(ir.pub().mul(sr));return ar.eq(or)};EDDSA.prototype.hashInt=function tr(){for(var er=this.hash(),rr=0;rr<arguments.length;rr++)er.update(arguments[rr]);return utils$8.intFromLE(er.digest()).umod(this.curve.n)};EDDSA.prototype.keyFromPublic=function tr(er){return KeyPair.fromPublic(this,er)};EDDSA.prototype.keyFromSecret=function tr(er){return KeyPair.fromSecret(this,er)};EDDSA.prototype.makeSignature=function tr(er){return er instanceof Signature?er:new Signature(this,er)};EDDSA.prototype.encodePoint=function tr(er){var rr=er.getY().toArray("le",this.encodingLength);return rr[this.encodingLength-1]|=er.getX().isOdd()?128:0,rr};EDDSA.prototype.decodePoint=function tr(er){er=utils$8.parseBytes(er);var rr=er.length-1,nr=er.slice(0,rr).concat(er[rr]&-129),ir=(er[rr]&128)!==0,sr=utils$8.intFromLE(nr);return this.curve.pointFromY(sr,ir)};EDDSA.prototype.encodeInt=function tr(er){return er.toArray("le",this.encodingLength)};EDDSA.prototype.decodeInt=function tr(er){return utils$8.intFromLE(er)};EDDSA.prototype.isPoint=function tr(er){return er instanceof this.pointClass};(function(tr){var er=tr;er.version=require$$0$4.version,er.utils=utils$u,er.rand=brorandExports,er.curve=curve,er.curves=curves$2,er.ec=ec$2,er.eddsa=eddsa})(elliptic);const T$2=getDefaultExportFromCjs(elliptic);let wasm;const cachedTextDecoder=typeof TextDecoder<"u"?new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}):{decode:()=>{throw Error("TextDecoder not available")}};typeof TextDecoder<"u"&&cachedTextDecoder.decode();let cachedUint8Memory0=null;function getUint8Memory0(){return(cachedUint8Memory0===null||cachedUint8Memory0.byteLength===0)&&(cachedUint8Memory0=new Uint8Array(wasm.memory.buffer)),cachedUint8Memory0}function getStringFromWasm0(tr,er){return tr=tr>>>0,cachedTextDecoder.decode(getUint8Memory0().subarray(tr,tr+er))}const heap=new Array(128).fill(void 0);heap.push(void 0,null,!0,!1);let heap_next=heap.length;function addHeapObject(tr){heap_next===heap.length&&heap.push(heap.length+1);const er=heap_next;return heap_next=heap[er],heap[er]=tr,er}function getObject(tr){return heap[tr]}function dropObject(tr){tr<132||(heap[tr]=heap_next,heap_next=tr)}function takeObject(tr){const er=getObject(tr);return dropObject(tr),er}let WASM_VECTOR_LEN=0;function passArray8ToWasm0(tr,er){const rr=er(tr.length*1,1)>>>0;return getUint8Memory0().set(tr,rr/1),WASM_VECTOR_LEN=tr.length,rr}let cachedInt32Memory0=null;function getInt32Memory0(){return(cachedInt32Memory0===null||cachedInt32Memory0.byteLength===0)&&(cachedInt32Memory0=new Int32Array(wasm.memory.buffer)),cachedInt32Memory0}function getArrayU8FromWasm0(tr,er){return tr=tr>>>0,getUint8Memory0().subarray(tr/1,tr/1+er)}function user_preferences_encrypt(tr,er,rr){try{const cr=wasm.__wbindgen_add_to_stack_pointer(-16),lr=passArray8ToWasm0(tr,wasm.__wbindgen_malloc),ur=WASM_VECTOR_LEN,dr=passArray8ToWasm0(er,wasm.__wbindgen_malloc),yr=WASM_VECTOR_LEN,mr=passArray8ToWasm0(rr,wasm.__wbindgen_malloc),wr=WASM_VECTOR_LEN;wasm.user_preferences_encrypt(cr,lr,ur,dr,yr,mr,wr);var nr=getInt32Memory0()[cr/4+0],ir=getInt32Memory0()[cr/4+1],sr=getInt32Memory0()[cr/4+2],or=getInt32Memory0()[cr/4+3];if(or)throw takeObject(sr);var ar=getArrayU8FromWasm0(nr,ir).slice();return wasm.__wbindgen_free(nr,ir*1,1),ar}finally{wasm.__wbindgen_add_to_stack_pointer(16)}}function user_preferences_decrypt(tr,er,rr){try{const cr=wasm.__wbindgen_add_to_stack_pointer(-16),lr=passArray8ToWasm0(tr,wasm.__wbindgen_malloc),ur=WASM_VECTOR_LEN,dr=passArray8ToWasm0(er,wasm.__wbindgen_malloc),yr=WASM_VECTOR_LEN,mr=passArray8ToWasm0(rr,wasm.__wbindgen_malloc),wr=WASM_VECTOR_LEN;wasm.user_preferences_decrypt(cr,lr,ur,dr,yr,mr,wr);var nr=getInt32Memory0()[cr/4+0],ir=getInt32Memory0()[cr/4+1],sr=getInt32Memory0()[cr/4+2],or=getInt32Memory0()[cr/4+3];if(or)throw takeObject(sr);var ar=getArrayU8FromWasm0(nr,ir).slice();return wasm.__wbindgen_free(nr,ir*1,1),ar}finally{wasm.__wbindgen_add_to_stack_pointer(16)}}function generate_private_preferences_topic(tr){let er,rr;try{const lr=wasm.__wbindgen_add_to_stack_pointer(-16),ur=passArray8ToWasm0(tr,wasm.__wbindgen_malloc),dr=WASM_VECTOR_LEN;wasm.generate_private_preferences_topic(lr,ur,dr);var nr=getInt32Memory0()[lr/4+0],ir=getInt32Memory0()[lr/4+1],sr=getInt32Memory0()[lr/4+2],or=getInt32Memory0()[lr/4+3],ar=nr,cr=ir;if(or)throw ar=0,cr=0,takeObject(sr);return er=ar,rr=cr,getStringFromWasm0(ar,cr)}finally{wasm.__wbindgen_add_to_stack_pointer(16),wasm.__wbindgen_free(er,rr,1)}}function handleError(tr,er){try{return tr.apply(this,er)}catch(rr){wasm.__wbindgen_exn_store(addHeapObject(rr))}}async function __wbg_load(tr,er){if(typeof Response=="function"&&tr instanceof Response){if(typeof WebAssembly.instantiateStreaming=="function")try{return await WebAssembly.instantiateStreaming(tr,er)}catch(nr){if(tr.headers.get("Content-Type")!="application/wasm")console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",nr);else throw nr}const rr=await tr.arrayBuffer();return await WebAssembly.instantiate(rr,er)}else{const rr=await WebAssembly.instantiate(tr,er);return rr instanceof WebAssembly.Instance?{instance:rr,module:tr}:rr}}function __wbg_get_imports(){const tr={};return tr.wbg={},tr.wbg.__wbindgen_string_new=function(er,rr){const nr=getStringFromWasm0(er,rr);return addHeapObject(nr)},tr.wbg.__wbindgen_object_drop_ref=function(er){takeObject(er)},tr.wbg.__wbg_crypto_d05b68a3572bb8ca=function(er){const rr=getObject(er).crypto;return addHeapObject(rr)},tr.wbg.__wbindgen_is_object=function(er){const rr=getObject(er);return typeof rr=="object"&&rr!==null},tr.wbg.__wbg_process_b02b3570280d0366=function(er){const rr=getObject(er).process;return addHeapObject(rr)},tr.wbg.__wbg_versions_c1cb42213cedf0f5=function(er){const rr=getObject(er).versions;return addHeapObject(rr)},tr.wbg.__wbg_node_43b1089f407e4ec2=function(er){const rr=getObject(er).node;return addHeapObject(rr)},tr.wbg.__wbindgen_is_string=function(er){return typeof getObject(er)=="string"},tr.wbg.__wbg_require_9a7e0f667ead4995=function(){return handleError(function(){const er=module.require;return addHeapObject(er)},arguments)},tr.wbg.__wbg_msCrypto_10fc94afee92bd76=function(er){const rr=getObject(er).msCrypto;return addHeapObject(rr)},tr.wbg.__wbg_randomFillSync_b70ccbdf4926a99d=function(){return handleError(function(er,rr){getObject(er).randomFillSync(takeObject(rr))},arguments)},tr.wbg.__wbg_getRandomValues_7e42b4fb8779dc6d=function(){return handleError(function(er,rr){getObject(er).getRandomValues(getObject(rr))},arguments)},tr.wbg.__wbindgen_is_function=function(er){return typeof getObject(er)=="function"},tr.wbg.__wbg_newnoargs_cfecb3965268594c=function(er,rr){const nr=new Function(getStringFromWasm0(er,rr));return addHeapObject(nr)},tr.wbg.__wbg_call_3f093dd26d5569f8=function(){return handleError(function(er,rr){const nr=getObject(er).call(getObject(rr));return addHeapObject(nr)},arguments)},tr.wbg.__wbg_self_05040bd9523805b9=function(){return handleError(function(){const er=self.self;return addHeapObject(er)},arguments)},tr.wbg.__wbg_window_adc720039f2cb14f=function(){return handleError(function(){const er=window.window;return addHeapObject(er)},arguments)},tr.wbg.__wbg_globalThis_622105db80c1457d=function(){return handleError(function(){const er=globalThis.globalThis;return addHeapObject(er)},arguments)},tr.wbg.__wbg_global_f56b013ed9bcf359=function(){return handleError(function(){const er=globalThis.global;return addHeapObject(er)},arguments)},tr.wbg.__wbindgen_is_undefined=function(er){return getObject(er)===void 0},tr.wbg.__wbg_call_67f2111acd2dfdb6=function(){return handleError(function(er,rr,nr){const ir=getObject(er).call(getObject(rr),getObject(nr));return addHeapObject(ir)},arguments)},tr.wbg.__wbg_buffer_b914fb8b50ebbc3e=function(er){const rr=getObject(er).buffer;return addHeapObject(rr)},tr.wbg.__wbg_newwithbyteoffsetandlength_0de9ee56e9f6ee6e=function(er,rr,nr){const ir=new Uint8Array(getObject(er),rr>>>0,nr>>>0);return addHeapObject(ir)},tr.wbg.__wbg_new_b1f2d6842d615181=function(er){const rr=new Uint8Array(getObject(er));return addHeapObject(rr)},tr.wbg.__wbg_set_7d988c98e6ced92d=function(er,rr,nr){getObject(er).set(getObject(rr),nr>>>0)},tr.wbg.__wbg_newwithlength_0d03cef43b68a530=function(er){const rr=new Uint8Array(er>>>0);return addHeapObject(rr)},tr.wbg.__wbg_subarray_adc418253d76e2f1=function(er,rr,nr){const ir=getObject(er).subarray(rr>>>0,nr>>>0);return addHeapObject(ir)},tr.wbg.__wbindgen_object_clone_ref=function(er){const rr=getObject(er);return addHeapObject(rr)},tr.wbg.__wbindgen_throw=function(er,rr){throw new Error(getStringFromWasm0(er,rr))},tr.wbg.__wbindgen_memory=function(){const er=wasm.memory;return addHeapObject(er)},tr}function __wbg_finalize_init(tr,er){return wasm=tr.exports,__wbg_init.__wbindgen_wasm_module=er,cachedInt32Memory0=null,cachedUint8Memory0=null,wasm}async function __wbg_init(tr){if(wasm!==void 0)return wasm;typeof tr>"u"&&(tr=new URL("/assets/user_preferences_bindings_wasm_bg-CCaStjan.wasm",import.meta.url));const er=__wbg_get_imports();(typeof tr=="string"||typeof Request=="function"&&tr instanceof Request||typeof URL=="function"&&tr instanceof URL)&&(tr=fetch(tr));const{instance:rr,module:nr}=await __wbg_load(await tr,er);return __wbg_finalize_init(rr,nr)}const b64=new Array(64),s64=new Array(123);for(let tr=0;tr<64;)s64[b64[tr]=tr<26?tr+65:tr<52?tr+71:tr<62?tr-4:tr-59|43]=tr++;var SortDirection;(function(tr){tr.SORT_DIRECTION_UNSPECIFIED="SORT_DIRECTION_UNSPECIFIED",tr.SORT_DIRECTION_ASCENDING="SORT_DIRECTION_ASCENDING",tr.SORT_DIRECTION_DESCENDING="SORT_DIRECTION_DESCENDING"})(SortDirection||(SortDirection={}));var globalThis$d=(()=>{if(typeof globalThis$d<"u")return globalThis$d;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof globalThis$d<"u")return globalThis$d;throw"Unable to locate global object"})();_m0.util.Long!==Long&&(_m0.util.Long=Long,_m0.configure());var globalThis$c=(()=>{if(typeof globalThis$c<"u")return globalThis$c;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof globalThis$c<"u")return globalThis$c;throw"Unable to locate global object"})();_m0.util.Long!==Long&&(_m0.util.Long=Long,_m0.configure());var globalThis$b=(()=>{if(typeof globalThis$b<"u")return globalThis$b;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof globalThis$b<"u")return globalThis$b;throw"Unable to locate global object"})();_m0.util.Long!==Long&&(_m0.util.Long=Long,_m0.configure());var globalThis$a=(()=>{if(typeof globalThis$a<"u")return globalThis$a;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof globalThis$a<"u")return globalThis$a;throw"Unable to locate global object"})();_m0.util.Long!==Long&&(_m0.util.Long=Long,_m0.configure());var ConsentProofPayloadVersion;(function(tr){tr[tr.CONSENT_PROOF_PAYLOAD_VERSION_UNSPECIFIED=0]="CONSENT_PROOF_PAYLOAD_VERSION_UNSPECIFIED",tr[tr.CONSENT_PROOF_PAYLOAD_VERSION_1=1]="CONSENT_PROOF_PAYLOAD_VERSION_1",tr[tr.UNRECOGNIZED=-1]="UNRECOGNIZED"})(ConsentProofPayloadVersion||(ConsentProofPayloadVersion={}));var globalThis$9=(()=>{if(typeof globalThis$9<"u")return globalThis$9;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof globalThis$9<"u")return globalThis$9;throw"Unable to locate global object"})();_m0.util.Long!==Long&&(_m0.util.Long=Long,_m0.configure());_m0.util.Long!==Long&&(_m0.util.Long=Long,_m0.configure());var globalThis$8=(()=>{if(typeof globalThis$8<"u")return globalThis$8;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof globalThis$8<"u")return globalThis$8;throw"Unable to locate global object"})();_m0.util.Long!==Long&&(_m0.util.Long=Long,_m0.configure());var Compression;(function(tr){tr[tr.COMPRESSION_DEFLATE=0]="COMPRESSION_DEFLATE",tr[tr.COMPRESSION_GZIP=1]="COMPRESSION_GZIP",tr[tr.UNRECOGNIZED=-1]="UNRECOGNIZED"})(Compression||(Compression={}));var globalThis$7=(()=>{if(typeof globalThis$7<"u")return globalThis$7;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof globalThis$7<"u")return globalThis$7;throw"Unable to locate global object"})();_m0.util.Long!==Long&&(_m0.util.Long=Long,_m0.configure());var globalThis$6=(()=>{if(typeof globalThis$6<"u")return globalThis$6;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof globalThis$6<"u")return globalThis$6;throw"Unable to locate global object"})();_m0.util.Long!==Long&&(_m0.util.Long=Long,_m0.configure());_m0.util.Long!==Long&&(_m0.util.Long=Long,_m0.configure());var globalThis$5=(()=>{if(typeof globalThis$5<"u")return globalThis$5;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof globalThis$5<"u")return globalThis$5;throw"Unable to locate global object"})();_m0.util.Long!==Long&&(_m0.util.Long=Long,_m0.configure());_m0.util.Long!==Long&&(_m0.util.Long=Long,_m0.configure());var ErrorCode;(function(tr){tr[tr.ERROR_CODE_UNSPECIFIED=0]="ERROR_CODE_UNSPECIFIED",tr[tr.ERROR_CODE_INVALID_INPUT=1]="ERROR_CODE_INVALID_INPUT",tr[tr.ERROR_CODE_NO_MATCHING_PREKEY=2]="ERROR_CODE_NO_MATCHING_PREKEY",tr[tr.UNRECOGNIZED=-1]="UNRECOGNIZED"})(ErrorCode||(ErrorCode={}));var JobType;(function(tr){tr[tr.JOB_TYPE_UNSPECIFIED=0]="JOB_TYPE_UNSPECIFIED",tr[tr.JOB_TYPE_REFRESH_V1=1]="JOB_TYPE_REFRESH_V1",tr[tr.JOB_TYPE_REFRESH_V2=2]="JOB_TYPE_REFRESH_V2",tr[tr.JOB_TYPE_REFRESH_PPPP=3]="JOB_TYPE_REFRESH_PPPP",tr[tr.UNRECOGNIZED=-1]="UNRECOGNIZED"})(JobType||(JobType={}));var GetKeystoreStatusResponse_KeystoreStatus;(function(tr){tr[tr.KEYSTORE_STATUS_UNSPECIFIED=0]="KEYSTORE_STATUS_UNSPECIFIED",tr[tr.KEYSTORE_STATUS_UNINITIALIZED=1]="KEYSTORE_STATUS_UNINITIALIZED",tr[tr.KEYSTORE_STATUS_INITIALIZED=2]="KEYSTORE_STATUS_INITIALIZED",tr[tr.UNRECOGNIZED=-1]="UNRECOGNIZED"})(GetKeystoreStatusResponse_KeystoreStatus||(GetKeystoreStatusResponse_KeystoreStatus={}));var globalThis$4=(()=>{if(typeof globalThis$4<"u")return globalThis$4;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof globalThis$4<"u")return globalThis$4;throw"Unable to locate global object"})();_m0.util.Long!==Long&&(_m0.util.Long=Long,_m0.configure());var globalThis$3=(()=>{if(typeof globalThis$3<"u")return globalThis$3;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof globalThis$3<"u")return globalThis$3;throw"Unable to locate global object"})();_m0.util.Long!==Long&&(_m0.util.Long=Long,_m0.configure());var globalThis$2=(()=>{if(typeof globalThis$2<"u")return globalThis$2;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof globalThis$2<"u")return globalThis$2;throw"Unable to locate global object"})();_m0.util.Long!==Long&&(_m0.util.Long=Long,_m0.configure());var globalThis$1=(()=>{if(typeof globalThis$1<"u")return globalThis$1;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof globalThis$1<"u")return globalThis$1;throw"Unable to locate global object"})();_m0.util.Long!==Long&&(_m0.util.Long=Long,_m0.configure());const createConsentMessage=(tr,er)=>`XMTP : Grant inbox consent to sender

Current Time: ${new Date(er).toUTCString()}
From Address: ${tr}

For more info: https://xmtp.org/signatures/`;let N$1=class $0{constructor(er){if(!er.aes256GcmHkdfSha256)throw new Error("invalid ciphertext");if(er.aes256GcmHkdfSha256.payload.length<16)throw new Error(`invalid ciphertext ciphertext length: ${er.aes256GcmHkdfSha256.payload.length}`);if(er.aes256GcmHkdfSha256.hkdfSalt.length!==32)throw new Error(`invalid ciphertext salt length: ${er.aes256GcmHkdfSha256.hkdfSalt.length}`);if(er.aes256GcmHkdfSha256.gcmNonce.length!==12)throw new Error(`invalid ciphertext nonce length: ${er.aes256GcmHkdfSha256.gcmNonce.length}`);this.aes256GcmHkdfSha256=er.aes256GcmHkdfSha256}toBytes(){return Ciphertext.encode(this).finish()}static fromBytes(er){return new $0(Ciphertext.decode(er))}};const D$2=window.crypto,x$2=new Uint8Array().buffer,M$1=new Uint8Array().buffer;async function _$2(tr){return new Uint8Array(await D$2.subtle.digest("SHA-256",tr))}async function V$1(tr,er,rr){const nr=D$2.getRandomValues(new Uint8Array(32)),ir=D$2.getRandomValues(new Uint8Array(12)),sr=await q$2(er,nr),or=await D$2.subtle.encrypt(L$1(ir,rr),sr,tr);return new N$1({aes256GcmHkdfSha256:{payload:new Uint8Array(or),hkdfSalt:nr,gcmNonce:ir}})}async function U(tr,er,rr){if(!tr.aes256GcmHkdfSha256)throw new Error("invalid payload ciphertext");const nr=await q$2(er,tr.aes256GcmHkdfSha256.hkdfSalt),ir=await D$2.subtle.decrypt(L$1(tr.aes256GcmHkdfSha256.gcmNonce,rr),nr,tr.aes256GcmHkdfSha256.payload);return new Uint8Array(ir)}function L$1(tr,er){const rr={name:"AES-GCM",iv:tr};return er&&(rr.additionalData=er),rr}async function q$2(tr,er){const rr=await D$2.subtle.importKey("raw",tr,"HKDF",!1,["deriveKey"]);return D$2.subtle.deriveKey({name:"HKDF",hash:"SHA-256",salt:er,info:x$2},rr,{name:"AES-GCM",length:256},!1,["encrypt","decrypt"])}async function O$1(tr,er){const rr=await D$2.subtle.importKey("raw",tr,"HKDF",!1,["deriveKey"]);return D$2.subtle.deriveKey({name:"HKDF",hash:"SHA-256",salt:M$1,info:er},rr,{name:"HMAC",hash:"SHA-256",length:256},!0,["sign","verify"])}async function G$1(tr,er,rr){const nr=await O$1(tr,er),ir=await D$2.subtle.sign("HMAC",nr,rr);return new Uint8Array(ir)}async function F$2(tr){const er=await D$2.subtle.exportKey("raw",tr);return new Uint8Array(er)}const j$2=utils$v.bytesToHex;function X(tr,er){if(tr.length!==er.length)return!1;for(let rr=0;rr<tr.length;rr++)if(tr[rr]!==er[rr])return!1;return!0}function J(tr){const er=hexToSignature(tr),rr=hexToBytes$8(er.r),nr=hexToBytes$8(er.s);let ir=Number(er.v);ir!==0&&ir!==1||(ir+=27);const sr=1-ir%2,or=new Uint8Array(64);return or.set(rr),or.set(nr,rr.length),{bytes:or,recovery:sr}}function z$2(tr){if(tr.bytes.length!==32)throw new Error(`invalid private key length: ${tr.bytes.length}`)}class Y{constructor(er){if(!er.secp256k1)throw new Error("invalid private key");if(z$2(er.secp256k1),this.secp256k1=er.secp256k1,this.createdNs=er.createdNs,!er.publicKey)throw new Error("missing public key");this.publicKey=new oe(er.publicKey)}static async generate(er){const rr={bytes:utils$v.randomPrivateKey()},nr=Long.fromNumber(new Date().getTime()).mul(1e6),ir=new ie({secp256k1Uncompressed:{bytes:getPublicKey(rr.bytes)},createdNs:nr}),sr=await er.signKey(ir);return new Y({secp256k1:rr,createdNs:nr,publicKey:sr})}generated(){return new Date(this.createdNs.div(1e6).toNumber())}async sign(er){const[rr,nr]=await sign$1(er,this.secp256k1.bytes,{recovered:!0,der:!1});return new te({ecdsaCompact:{bytes:rr,recovery:nr}})}async signKey(er){const rr=er.toBytes(),nr=await _$2(rr),ir=await this.sign(nr);return new oe({keyBytes:rr,signature:ir})}static async signerKey(er,rr){return ee(await _$2(er.bytesToSign()),rr)}sharedSecret(er){return getSharedSecret(this.secp256k1.bytes,er.secp256k1Uncompressed.bytes,!1)}encrypt(er,rr,nr){return V$1(er,this.sharedSecret(rr),nr)}decrypt(er,rr,nr){return U(er,this.sharedSecret(rr),nr)}matches(er){return this.publicKey.equals(er)}equals(er){return X(this.secp256k1.bytes,er.secp256k1.bytes)&&this.publicKey.equals(er.publicKey)}toBytes(){return SignedPrivateKey.encode(this).finish()}validatePublicKey(){return X(getPublicKey(this.secp256k1.bytes),this.publicKey.secp256k1Uncompressed.bytes)}static fromBytes(er){return new Y(SignedPrivateKey.decode(er))}static fromLegacyKey(er,rr){return new Y({createdNs:er.timestamp.mul(1e6),secp256k1:er.secp256k1,publicKey:oe.fromLegacyKey(er.publicKey,rr)})}}let W$6=class d0{constructor(er){if(!er.secp256k1)throw new Error("invalid private key");if(z$2(er.secp256k1),this.timestamp=er.timestamp,this.secp256k1=er.secp256k1,!er.publicKey)throw new Error("missing public key");this.publicKey=new ae(er.publicKey)}static generate(){const er={bytes:utils$v.randomPrivateKey()},rr=Long.fromNumber(new Date().getTime());return new d0({secp256k1:er,timestamp:rr,publicKey:new ae({secp256k1Uncompressed:{bytes:getPublicKey(er.bytes)},timestamp:rr})})}generated(){return new Date(this.timestamp.toNumber())}async sign(er){const[rr,nr]=await sign$1(er,this.secp256k1.bytes,{recovered:!0,der:!1});return new te({ecdsaCompact:{bytes:rr,recovery:nr}})}async signKey(er){const rr=await _$2(er.bytesToSign());return er.signature=await this.sign(rr),er}sharedSecret(er){return getSharedSecret(this.secp256k1.bytes,er.secp256k1Uncompressed.bytes,!1)}encrypt(er,rr,nr){return V$1(er,this.sharedSecret(rr),nr)}decrypt(er,rr,nr){return U(er,this.sharedSecret(rr),nr)}matches(er){return this.publicKey.equals(er)}validatePublicKey(){return X(getPublicKey(this.secp256k1.bytes),this.publicKey.secp256k1Uncompressed.bytes)}toBytes(){return PrivateKey.encode(this).finish()}static fromBytes(er){return new d0(PrivateKey.decode(er))}};function Q(tr){if(tr.bytes.length!==64)throw new Error(`invalid signature length: ${tr.bytes.length}`);if(tr.recovery!==0&&tr.recovery!==1)throw new Error(`invalid recovery bit: ${tr.recovery}`)}function Z(tr,er){return tr.recovery===er.recovery&&X(tr.bytes,er.bytes)}function ee(tr,er){const rr=recoverPublicKey$2(tr,er.bytes,er.recovery);return rr?new ie({secp256k1Uncompressed:{bytes:rr},createdNs:Long.fromNumber(0)}):void 0}class te{constructor(er){if(er.ecdsaCompact)Q(er.ecdsaCompact),this.ecdsaCompact=er.ecdsaCompact;else{if(!er.walletEcdsaCompact)throw new Error("invalid signature");Q(er.walletEcdsaCompact),this.walletEcdsaCompact=er.walletEcdsaCompact}}async signerKey(er){return this.ecdsaCompact?Y.signerKey(er,this.ecdsaCompact):this.walletEcdsaCompact?ne.signerKey(er,this.walletEcdsaCompact):void 0}getPublicKey(er){let rr;if(this.ecdsaCompact)rr=recoverPublicKey$2(er,this.ecdsaCompact.bytes,this.ecdsaCompact.recovery);else{if(!this.walletEcdsaCompact)throw new Error("invalid v1 signature");rr=recoverPublicKey$2(er,this.walletEcdsaCompact.bytes,this.walletEcdsaCompact.recovery)}return rr?new ae({secp256k1Uncompressed:{bytes:rr},timestamp:Long.fromNumber(0)}):void 0}equals(er){return this.ecdsaCompact&&er.ecdsaCompact?Z(this.ecdsaCompact,er.ecdsaCompact):!(!this.walletEcdsaCompact||!er.walletEcdsaCompact)&&Z(this.walletEcdsaCompact,er.walletEcdsaCompact)}toBytes(){return Signature$5.encode(this).finish()}static fromBytes(er){return new te(Signature$5.decode(er))}}var se;(function(tr){tr[tr.INBOX_KEY=0]="INBOX_KEY",tr[tr.SEND_KEY=1]="SEND_KEY"})(se||(se={}));class ne{constructor(er){this.wallet=er}static identitySigRequestText(er){return`XMTP : Create Identity
${j$2(er)}

For more info: https://xmtp.org/signatures/`}static signerKey(er,rr){return ee(hexToBytes$8(hashMessage(this.identitySigRequestText(er.bytesToSign()))),rr)}async signKey(er){const rr=er.toBytes(),nr=await this.wallet.signMessage(ne.identitySigRequestText(rr)),{bytes:ir,recovery:sr}=J(nr),or=new te({walletEcdsaCompact:{bytes:ir,recovery:sr}});return new oe({keyBytes:rr,signature:or})}}const re$7=new Long(10**9).mul(10**9);class ie{constructor(er){if(!(er!=null&&er.secp256k1Uncompressed))throw new Error("invalid public key");(function(rr){if(rr.bytes.length!==65)throw new Error(`invalid public key length: ${rr.bytes.length}`);if(rr.bytes[0]!==4)throw new Error(`unrecognized public key prefix: ${rr.bytes[0]}`)})(er.secp256k1Uncompressed),this.secp256k1Uncompressed=er.secp256k1Uncompressed,this.createdNs=er.createdNs.toUnsigned()}generated(){return new Date(this.timestamp.toNumber())}isFromLegacyKey(){return this.createdNs.lessThan(re$7)}get timestamp(){return(this.isFromLegacyKey()?this.createdNs:this.createdNs.div(1e6)).toUnsigned()}verify(er,rr){return!!er.ecdsaCompact&&verify(er.ecdsaCompact.bytes,rr,this.secp256k1Uncompressed.bytes)}async verifyKey(er){if(!er.signature)return!1;const rr=await _$2(er.bytesToSign());return this.verify(er.signature,rr)}equals(er){return X(this.secp256k1Uncompressed.bytes,er.secp256k1Uncompressed.bytes)}getEthereumAddress(){return function(er){const rr=bytesToHex$7(er.slice(1)),nr=keccak256$3(rr),ir=nr.substring(nr.length-40);return getAddress(`0x${ir}`)}(this.secp256k1Uncompressed.bytes)}toBytes(){return UnsignedPublicKey.encode(this).finish()}static fromBytes(er){return new ie(UnsignedPublicKey.decode(er))}}class oe extends ie{constructor(er){if(!er.keyBytes)throw new Error("missing key bytes");if(super(UnsignedPublicKey.decode(er.keyBytes)),this.keyBytes=er.keyBytes,!er.signature)throw new Error("missing key signature");this.signature=new te(er.signature)}get unsignedKey(){return new ie({createdNs:this.createdNs,secp256k1Uncompressed:this.secp256k1Uncompressed})}signerKey(){return this.signature.signerKey(this)}async walletSignatureAddress(){if(!this.signature.walletEcdsaCompact)throw new Error("key was not signed by a wallet");const er=await this.signerKey();if(!er)throw new Error("key signature not valid");return er.getEthereumAddress()}equals(er){return this.unsignedKey.equals(er.unsignedKey)&&this.signature.equals(er.signature)}bytesToSign(){return this.keyBytes}toBytes(){return SignedPublicKey.encode(this).finish()}static fromBytes(er){return new oe(SignedPublicKey.decode(er))}toLegacyKey(){if(!this.isFromLegacyKey())throw new Error("cannot be converted to legacy key");let er=this.signature;return er.walletEcdsaCompact&&(er=new te({ecdsaCompact:er.walletEcdsaCompact})),new ae({timestamp:this.timestamp,secp256k1Uncompressed:this.secp256k1Uncompressed,signature:er})}static fromLegacyKey(er,rr){if(!er.signature)throw new Error("key is not signed");let nr=er.signature;return rr&&(nr=new te({walletEcdsaCompact:nr.ecdsaCompact})),new oe({keyBytes:er.bytesToSign(),signature:nr})}}class ae extends ie{constructor(er){super({createdNs:er.timestamp.mul(1e6),secp256k1Uncompressed:er.secp256k1Uncompressed}),er.signature&&(!er.signature.ecdsaCompact&&er.signature.walletEcdsaCompact?this.signature=new te({ecdsaCompact:{bytes:er.signature.walletEcdsaCompact.bytes,recovery:er.signature.walletEcdsaCompact.recovery}}):this.signature=new te(er.signature))}get timestamp(){return this.createdNs.div(1e6)}bytesToSign(){return PublicKey.encode({timestamp:this.timestamp,secp256k1Uncompressed:this.secp256k1Uncompressed}).finish()}async signWithWallet(er){const rr=await er.signMessage(ne.identitySigRequestText(this.bytesToSign())),{bytes:nr,recovery:ir}=J(rr);this.signature=new te({ecdsaCompact:{bytes:nr,recovery:ir}})}walletSignatureAddress(){if(!this.signature)throw new Error("key is not signed");const er=hexToBytes$8(hashMessage(ne.identitySigRequestText(this.bytesToSign()))),rr=this.signature.getPublicKey(er);if(!rr)throw new Error("key signature is malformed");return rr.getEthereumAddress()}toBytes(){return PublicKey.encode(this).finish()}static fromBytes(er){return new ae(PublicKey.decode(er))}}class ce{constructor(er){if(!er.identityKey)throw new Error("missing identity key");if(!er.preKey)throw new Error("missing pre-key");this.identityKey=new oe(er.identityKey),this.preKey=new oe(er.preKey)}walletSignatureAddress(){return this.identityKey.walletSignatureAddress()}equals(er){return this.identityKey.equals(er.identityKey)&&this.preKey.equals(er.preKey)}toBytes(){return SignedPublicKeyBundle.encode(this).finish()}isFromLegacyBundle(){return this.identityKey.isFromLegacyKey()&&this.preKey.isFromLegacyKey()}toLegacyBundle(){return new de({identityKey:this.identityKey.toLegacyKey(),preKey:this.preKey.toLegacyKey()})}static fromBytes(er){const rr=SignedPublicKeyBundle.decode(er);return new ce(rr)}static fromLegacyBundle(er){return new ce({identityKey:oe.fromLegacyKey(er.identityKey,!0),preKey:oe.fromLegacyKey(er.preKey)})}}class de{constructor(er){if(!er.identityKey)throw new Error("missing identity key");if(!er.preKey)throw new Error("missing pre-key");this.identityKey=new ae(er.identityKey),this.preKey=new ae(er.preKey)}equals(er){return this.identityKey.equals(er.identityKey)&&this.preKey.equals(er.preKey)}walletSignatureAddress(){return this.identityKey.walletSignatureAddress()}toBytes(){return PublicKeyBundle.encode(this).finish()}static fromBytes(er){const rr=PublicKeyBundle.decode(er);return new de(rr)}}class he{constructor(er,rr){this.messageEnvelope=er,this.onSend=rr}async messageID(){if(!this.messageEnvelope.message)throw new Error("no envelope message");return j$2(await _$2(this.messageEnvelope.message))}async send(){return this.onSend()}}class ye{constructor(er,rr,nr,ir,sr){this.messages=[],this.resolvers=[],this.topics=rr,this.client=er,this.callback=this.newMessageCallback(nr,ir),this.onConnectionLost=sr}newMessageCallback(er,rr){return async nr=>{if(nr.message)try{const ir=await er(nr);if(!ir)return;if(rr){const or=rr(ir);or&&this.resubscribeToTopics(or)}const sr=this.resolvers.pop();sr?sr({value:ir}):this.messages.unshift(ir)}catch(ir){console.warn(ir)}}}async start(){if(!this.callback)throw new Error("Missing callback for stream");this.subscriptionManager=this.client.apiClient.subscribe({contentTopics:this.topics},async er=>{this.callback&&await(this==null?void 0:this.callback(er))},this.onConnectionLost)}static async create(er,rr,nr,ir,sr){const or=new ye(er,rr,nr,ir,sr);return await or.start(),or}[Symbol.asyncIterator](){return this}async return(){return this.subscriptionManager&&await this.subscriptionManager.unsubscribe(),this.callback?(this.callback=void 0,this.resolvers.forEach(er=>er({value:void 0,done:!0})),{value:void 0,done:!0}):{value:void 0,done:!0}}next(){const er=this.messages.pop();return er?Promise.resolve({value:er}):this.callback?new Promise(rr=>this.resolvers.unshift(rr)):Promise.resolve({value:void 0,done:!0})}async resubscribeToTopics(er){var rr;if(!this.callback||!this.subscriptionManager)throw new Error("Missing callback for stream");if(typeof((rr=this.subscriptionManager)==null?void 0:rr.updateContentTopics)=="function")return this.subscriptionManager.updateContentTopics(er);await this.subscriptionManager.unsubscribe(),this.topics=er,this.subscriptionManager=this.client.apiClient.subscribe({contentTopics:this.topics},async nr=>{this.callback&&await(this==null?void 0:this.callback(nr))},this.onConnectionLost)}}const{b64Decode:ue,b64Encode:le}=r$6;function pe(tr,er){const rr=new Uint8Array(tr.length+er.length);return rr.set(tr),rr.set(er,tr.length),rr}function we(tr){return Long.fromNumber(tr.valueOf()).multiply(1e6)}function fe$1(tr){return new Date(tr.divide(1e6).toNumber())}const me=tr=>tr&&we(tr).toString(),ge$1=tr=>{if(tr)return fe$1(Long.fromString(tr))};class ve extends Error{constructor(er,rr){super(rr),this.code=er}}const be=tr=>{if(tr.error)throw new ve(tr.error.code,tr.error.message);if(!tr.result)throw new ve(ErrorCode$1.ERROR_CODE_UNSPECIFIED,"No result from Keystore");if("encrypted"in tr.result&&!tr.result.encrypted)throw new Error("Missing ciphertext");if("decrypted"in tr.result&&!tr.result.decrypted)throw new Error("Missing decrypted result");return tr.result},Ee=(tr,er)=>({requests:tr.map(rr=>{var sr,or,ar,cr;const nr=new de({identityKey:(sr=rr.header.sender)==null?void 0:sr.identityKey,preKey:(or=rr.header.sender)==null?void 0:or.preKey}),ir=er.equals(nr);return{payload:rr.ciphertext,peerKeys:ir?new de({identityKey:(ar=rr.header.recipient)==null?void 0:ar.identityKey,preKey:(cr=rr.header.recipient)==null?void 0:cr.preKey}):nr,headerBytes:rr.headerBytes,isSender:ir}})}),Ke=tr=>`/xmtp/0/${tr}/proto`,ke=(tr,er)=>{const rr=[getAddress(tr),getAddress(er)];return rr.sort(),Ke(`dm-${rr.join("-")}`)},Ae=tr=>Ke(`m-${tr}`),Se=tr=>Ke(`contact-${getAddress(tr)}`),Te=tr=>Ke(`intro-${getAddress(tr)}`),Ce=tr=>Ke(`invite-${getAddress(tr)}`),Pe=tr=>Ke(`privatestore-${tr}`),Ie=tr=>Ke(`userpreferences-${tr}`),Be=tr=>{const er=/^[\x21-\x7F]+$/,rr=tr.indexOf("0/");if(rr!==-1){const nr=tr.substring(rr+2,tr.lastIndexOf("/proto"));return er.test(nr)}return!1};class Re{constructor(er,rr,nr){this.conversationVersion="v1",this.context=void 0,this.peerAddress=getAddress(rr),this.client=er,this.createdAt=nr}get clientAddress(){return this.client.address}async allow(){await this.client.contacts.allow([this.peerAddress])}async deny(){await this.client.contacts.deny([this.peerAddress])}get isAllowed(){return this.client.contacts.isAllowed(this.peerAddress)}get isDenied(){return this.client.contacts.isDenied(this.peerAddress)}get consentState(){return this.client.contacts.consentState(this.peerAddress)}get topic(){return ke(this.peerAddress,this.client.address)}get ephemeralTopic(){return ke(this.peerAddress,this.client.address).replace("/xmtp/0/dm-","/xmtp/0/dmE-")}async messages(er){const rr=ke(this.peerAddress,this.client.address),nr=await this.client.listEnvelopes(rr,this.processEnvelope.bind(this),er);return this.decryptBatch(nr,rr,!1)}messagesPaginated(er){return this.client.listEnvelopesPaginated(this.topic,this.decodeMessage.bind(this),er)}async decodeMessage(er){if(!er.contentTopic)throw new Error("Missing content topic");const rr=await this.processEnvelope(er),nr=await this.decryptBatch([rr],er.contentTopic,!0);if(!nr.length)throw new Error("No results");return nr[0]}async prepareMessage(er,rr){let nr,ir=await this.client.getUserContact(this.peerAddress);if(!ir)throw new Error(`recipient ${this.peerAddress} is not registered`);ir instanceof de||(ir=ir.toLegacyBundle());const sr=rr!=null&&rr.ephemeral?this.ephemeralTopic:this.topic;this.client.contacts.addresses.has(this.peerAddress)?nr=[sr]:(nr=[Te(this.peerAddress),Te(this.client.address),sr],this.client.contacts.addresses.add(this.peerAddress));const{payload:or}=await this.client.encodeContent(er,rr),ar=await this.createMessage(or,ir,rr==null?void 0:rr.timestamp),cr=ar.toBytes(),lr={contentTopic:sr,message:cr,timestampNs:me(ar.sent)};return new he(lr,async()=>(await this.client.publishEnvelopes(nr.map(ur=>({contentTopic:ur,message:cr,timestamp:ar.sent}))),Ve.fromV1Message(ar,er,(rr==null?void 0:rr.contentType)||t$6,or,sr,this)))}streamMessages(er){return ye.create(this.client,[this.topic],async rr=>this.decodeMessage(rr),void 0,er)}async processEnvelope({message:er,contentTopic:rr}){if(!er||!er.length)throw new Error("empty envelope");const nr=await Me.fromBytes(er),{senderAddress:ir,recipientAddress:sr}=nr;if(!ir||!sr||!rr||ke(ir,sr)!==this.topic)throw new Error("Headers do not match intended recipient");return nr}streamEphemeral(er){return ye.create(this.client,[this.ephemeralTopic],this.decodeMessage.bind(this),void 0,er)}async send(er,rr){let nr,ir=await this.client.getUserContact(this.peerAddress);if(!ir)throw new Error(`recipient ${this.peerAddress} is not registered`);ir instanceof de||(ir=ir.toLegacyBundle());const sr=rr!=null&&rr.ephemeral?this.ephemeralTopic:this.topic;this.client.contacts.addresses.has(this.peerAddress)?nr=[sr]:(nr=[Te(this.peerAddress),Te(this.client.address),sr],this.client.contacts.addresses.add(this.peerAddress));const or=(rr==null?void 0:rr.contentType)||t$6,{payload:ar}=await this.client.encodeContent(er,rr),cr=await this.createMessage(ar,ir,rr==null?void 0:rr.timestamp);return await this.client.publishEnvelopes(nr.map(lr=>({contentTopic:lr,message:cr.toBytes(),timestamp:cr.sent}))),this.consentState==="unknown"&&await this.allow(),Ve.fromV1Message(cr,er,or,ar,sr,this)}async decryptBatch(er,rr,nr=!1){const ir=(await this.client.keystore.decryptV1(Ee(er,this.client.publicKeyBundle))).responses,sr=[];for(let or=0;or<ir.length;or++){const ar=ir[or],cr=er[or];try{const{decrypted:lr}=be(ar);sr.push(await this.buildDecodedMessage(cr,lr,rr))}catch(lr){if(nr)throw lr;console.warn("Error decoding content",lr)}}return sr}async buildDecodedMessage(er,rr,nr){const{content:ir,contentType:sr,error:or,contentFallback:ar}=await this.client.decodeContent(rr);return Ve.fromV1Message(er,ir,sr,rr,nr,this,or,ar)}async createMessage(er,rr,nr){return nr=nr||new Date,Me.encode(this.client.keystore,er,this.client.publicKeyBundle,rr,nr)}}class Ne{constructor(er,rr,nr,ir,sr,or){this.conversationVersion="v2",this.topic=rr,this.createdAt=ir,this.context=sr,this.client=er,this.peerAddress=nr,this.consentProof=or}get clientAddress(){return this.client.address}async allow(){await this.client.contacts.allow([this.peerAddress])}async deny(){await this.client.contacts.deny([this.peerAddress])}get isAllowed(){return this.client.contacts.isAllowed(this.peerAddress)}get isDenied(){return this.client.contacts.isDenied(this.peerAddress)}get consentState(){return this.client.contacts.consentState(this.peerAddress)}get consentProofPayload(){return this.consentProof}async messages(er){const rr=await this.client.listEnvelopes(this.topic,this.processEnvelope.bind(this),er);return this.decryptBatch(rr,!1)}messagesPaginated(er){return this.client.listEnvelopesPaginated(this.topic,this.decodeMessage.bind(this),er)}get ephemeralTopic(){return this.topic.replace("/xmtp/0/m","/xmtp/0/mE")}streamEphemeral(er){return ye.create(this.client,[this.ephemeralTopic],this.decodeMessage.bind(this),void 0,er)}streamMessages(er){return ye.create(this.client,[this.topic],this.decodeMessage.bind(this),void 0,er)}async send(er,rr){const{payload:nr,shouldPush:ir}=await this.client.encodeContent(er,rr),sr=await this.createMessage(nr,ir,rr==null?void 0:rr.timestamp),or=rr!=null&&rr.ephemeral?this.ephemeralTopic:this.topic;await this.client.publishEnvelopes([{contentTopic:or,message:sr.toBytes(),timestamp:sr.sent}]);const ar=(rr==null?void 0:rr.contentType)||t$6;return this.consentState==="unknown"&&await this.allow(),Ve.fromV2Message(sr,er,ar,or,nr,this,this.client.address)}async createMessage(er,rr,nr){const ir={topic:this.topic,createdNs:we(nr||new Date)},sr=MessageHeaderV2.encode(ir).finish(),or=await _$2(pe(sr,er)),ar={payload:er,sender:this.client.signedPublicKeyBundle,signature:await this.client.keystore.signDigest({digest:or,prekeyIndex:0,identityKey:void 0})},cr=SignedContent.encode(ar).finish(),{encrypted:lr,senderHmac:ur}=await this.encryptMessage(cr,sr),dr={v1:void 0,v2:{headerBytes:sr,ciphertext:lr,senderHmac:ur,shouldPush:rr}},yr=Message$1.encode(dr).finish();return _e.create(dr,ir,yr,ur,rr)}async decryptBatch(er,rr=!1){const nr=(await this.client.keystore.decryptV2(this.buildDecryptRequest(er))).responses,ir=[];for(let sr=0;sr<nr.length;sr++){const or=nr[sr],ar=er[sr];try{const{decrypted:cr}=be(or);ir.push(await this.buildDecodedMessage(ar,cr))}catch(cr){if(rr)throw cr;console.warn("Error decoding content",cr)}}return ir}buildDecryptRequest(er){return{requests:er.map(rr=>({payload:rr.ciphertext,headerBytes:rr.headerBytes,contentTopic:this.topic}))}}async encryptMessage(er,rr){const{responses:nr}=await this.client.keystore.encryptV2({requests:[{payload:er,headerBytes:rr,contentTopic:this.topic}]});if(nr.length!==1)throw new Error("Invalid response length");const{encrypted:ir,senderHmac:sr}=be(nr[0]);return{encrypted:ir,senderHmac:sr}}async buildDecodedMessage(er,rr){var ur,dr,yr;const nr=SignedContent.decode(rr);if(!((ur=nr.sender)!=null&&ur.identityKey)||!((dr=nr.sender)!=null&&dr.preKey)||!nr.signature)throw new Error("incomplete signed content");await async function(mr){var Or,Tr;const wr=(Or=mr.sender)==null?void 0:Or.preKey;if(!wr||!wr.signature||!wr.keyBytes)throw new Error("missing pre-key or pre-key signature");const xr=(Tr=mr.sender)==null?void 0:Tr.identityKey;if(!xr)throw new Error("missing identity key in bundle");if(!await new oe(xr).verifyKey(new oe(wr)))throw new Error("pre key not signed by identity key")}(nr);const ir=await _$2(pe(er.headerBytes,nr.payload));if(!new oe((yr=nr.sender)==null?void 0:yr.preKey).verify(new te(nr.signature),ir))throw new Error("invalid signature");const sr=await new ce(nr.sender).walletSignatureAddress(),{content:or,contentType:ar,error:cr,contentFallback:lr}=await this.client.decodeContent(nr.payload);return Ve.fromV2Message(er,or,ar,this.topic,nr.payload,this,sr,cr,lr)}async prepareMessage(er,rr){const{payload:nr,shouldPush:ir}=await this.client.encodeContent(er,rr),sr=await this.createMessage(nr,ir,rr==null?void 0:rr.timestamp),or=sr.toBytes(),ar=rr!=null&&rr.ephemeral?this.ephemeralTopic:this.topic,cr={contentTopic:ar,message:or,timestampNs:me(sr.sent)};return new he(cr,async()=>(await this.client.publishEnvelopes([{contentTopic:ar,message:or,timestamp:sr.sent}]),Ve.fromV2Message(sr,er,(rr==null?void 0:rr.contentType)||t$6,ar,nr,this,this.client.address)))}async processEnvelope(er){if(!er.message||!er.contentTopic)throw new Error("empty envelope");const rr=Message$1.decode(er.message);if(!rr.v2)throw new Error("unknown message version");const nr=MessageHeaderV2.decode(rr.v2.headerBytes);if(nr.topic!==this.topic)throw new Error("topic mismatch");return _e.create(rr,nr,er.message,rr.v2.senderHmac,rr.v2.shouldPush)}async decodeMessage(er){if(!er.contentTopic)throw new Error("Missing content topic");const rr=await this.processEnvelope(er),nr=await this.decryptBatch([rr],!0);if(!nr.length)throw new Error("No results");return nr[0]}}const De=tr=>{var er,rr;if((er=tr.v1)!=null&&er.ciphertext)return[tr.v1.headerBytes,new N$1(tr.v1.ciphertext)];if((rr=tr.v2)!=null&&rr.ciphertext)return[tr.v2.headerBytes,new N$1(tr.v2.ciphertext)];throw new Error("unknown message version")};class xe{constructor(er,rr,nr){[this.headerBytes,this.ciphertext]=De(nr),this.id=er,this.bytes=rr}toBytes(){return this.bytes}}class Me extends xe{constructor(er,rr,nr,ir,sr){super(er,rr,nr),this.conversation=void 0,this.senderAddress=sr,this.header=ir}static async create(er,rr,nr){if(!rr.sender)throw new Error("missing message sender");const ir=new de(rr.sender).walletSignatureAddress(),sr=j$2(await _$2(nr));return new Me(sr,nr,er,rr,ir)}get sent(){return new Date(this.header.timestamp.toNumber())}get recipientAddress(){var er,rr;if((rr=(er=this.header)==null?void 0:er.recipient)!=null&&rr.identityKey)return new ae(this.header.recipient.identityKey).walletSignatureAddress()}async decrypt(er,rr){const nr=(await er.decryptV1(Ee([this],rr))).responses;if(!nr.length)throw new Error("No response from Keystore");const{decrypted:ir}=be(nr[0]);return ir}static fromBytes(er){const rr=Message$1.decode(er),[nr]=De(rr),ir=MessageHeaderV1.decode(nr);if(!ir)throw new Error("missing message header");if(!ir.sender)throw new Error("missing message sender");if(!ir.sender.identityKey)throw new Error("missing message sender identity key");if(!ir.sender.preKey)throw new Error("missing message sender pre-key");if(!ir.recipient)throw new Error("missing message recipient");if(!ir.recipient.identityKey)throw new Error("missing message recipient identity-key");if(!ir.recipient.preKey)throw new Error("missing message recipient pre-key");return Me.create(rr,ir,er)}static async encode(er,rr,nr,ir,sr){const or={sender:nr,recipient:ir,timestamp:Long.fromNumber(sr.getTime())},ar=MessageHeaderV1.encode(or).finish(),cr=await er.encryptV1({requests:[{recipient:ir,headerBytes:ar,payload:rr}]});if(!cr.responses.length)throw new Error("No response from Keystore");const{encrypted:lr}=be(cr.responses[0]),ur={v1:{headerBytes:ar,ciphertext:lr},v2:void 0},dr=Message$1.encode(ur).finish();return Me.create(ur,or,dr)}}class _e extends xe{constructor(er,rr,nr,ir,sr,or){super(er,rr,nr),this.header=ir,this.senderHmac=sr,this.shouldPush=or}static async create(er,rr,nr,ir,sr){const or=j$2(await _$2(nr));return new _e(or,nr,er,rr,ir,sr)}get sent(){return fe$1(this.header.createdNs)}}class Ve{constructor({id:er,messageVersion:rr,senderAddress:nr,recipientAddress:ir,conversation:sr,contentBytes:or,contentType:ar,contentTopic:cr,content:lr,sent:ur,error:dr,contentFallback:yr}){this.id=er,this.messageVersion=rr,this.senderAddress=nr,this.recipientAddress=ir,this.conversation=sr,this.contentType=ar,this.sent=ur,this.error=dr,this.content=lr,this.contentTopic=cr,this.contentBytes=or,this.contentFallback=yr}toBytes(){return DecodedMessage.encode({...this,conversation:{topic:this.conversation.topic,context:this.conversation.context??void 0,createdNs:we(this.conversation.createdAt),peerAddress:this.conversation.peerAddress,consentProofPayload:this.conversation.consentProof??void 0},sentNs:we(this.sent)}).finish()}static async fromBytes(er,rr){const nr=DecodedMessage.decode(er),ir=nr.messageVersion;if(ir!=="v1"&&ir!=="v2")throw new Error("Invalid message version");if(!nr.conversation)throw new Error("No conversation reference found");const{content:sr,contentType:or,error:ar,contentFallback:cr}=await rr.decodeContent(nr.contentBytes);return new Ve({...nr,content:sr,contentType:or,error:ar,messageVersion:ir,sent:fe$1(nr.sentNs),conversation:Ue(nr.conversation,rr,ir),contentFallback:cr})}static fromV1Message(er,rr,nr,ir,sr,or,ar,cr){const{id:lr,senderAddress:ur,recipientAddress:dr,sent:yr}=er;if(!ur)throw new Error("Sender address is required");return new Ve({id:lr,messageVersion:"v1",senderAddress:ur,recipientAddress:dr,sent:yr,content:rr,contentBytes:ir,contentType:nr,contentTopic:sr,conversation:or,error:ar,contentFallback:cr})}static fromV2Message(er,rr,nr,ir,sr,or,ar,cr,lr){const{id:ur,sent:dr}=er;return new Ve({id:ur,messageVersion:"v2",senderAddress:ar,sent:dr,content:rr,contentBytes:sr,contentType:nr,contentTopic:ir,conversation:or,error:cr,contentFallback:lr})}}function Ue(tr,er,rr){if(rr==="v1")return new Re(er,tr.peerAddress,fe$1(tr.createdNs));if(rr==="v2")return new Ne(er,tr.topic,tr.peerAddress,fe$1(tr.createdNs),tr.context,tr.consentProofPayload);throw new Error(`Unknown conversation version ${rr}`)}class qe extends Error{constructor(er){super(`no pre-key matches: ${j$2(er.secp256k1Uncompressed.bytes)}`)}}class Oe{constructor(er){if(this.version=2,!er.identityKey)throw new Error("missing identity key");this.identityKey=new Y(er.identityKey),this.preKeys=(er.preKeys||[]).map(rr=>new Y(rr))}static async generate(er){const rr=await Y.generate(new ne(er)),nr=new Oe({identityKey:rr,preKeys:[]});return await nr.addPreKey(),nr}getCurrentPreKey(){return this.preKeys[0]}findPreKey(er){const rr=this.preKeys.find(nr=>nr.matches(er));if(!rr)throw new qe(er);return rr}async addPreKey(){this._publicKeyBundle=void 0;const er=await Y.generate(this.identityKey);this.preKeys.unshift(er)}getPublicKeyBundle(){return this._publicKeyBundle||(this._publicKeyBundle=new ce({identityKey:this.identityKey.publicKey,preKey:this.getCurrentPreKey().publicKey})),this._publicKeyBundle}async sharedSecret(er,rr,nr){if(!er.identityKey||!er.preKey)throw new Error("invalid peer key bundle");if(!await er.identityKey.verifyKey(er.preKey))throw new Error("peer preKey signature invalid");if(!this.identityKey)throw new Error("missing identity key");let ir,sr,or;nr?(or=this.findPreKey(rr),ir=or.sharedSecret(er.identityKey),sr=this.identityKey.sharedSecret(er.preKey)):(or=this.findPreKey(rr),ir=this.identityKey.sharedSecret(er.preKey),sr=or.sharedSecret(er.identityKey));const ar=or.sharedSecret(er.preKey),cr=new Uint8Array(ir.length+sr.length+ar.length);return cr.set(ir,0),cr.set(sr,ir.length),cr.set(ar,ir.length+sr.length),cr}encode(){return PrivateKeyBundle.encode({v1:void 0,v2:this}).finish()}validatePublicKeys(){return!!this.identityKey.validatePublicKey()&&this.preKeys.every(er=>er.validatePublicKey())}equals(er){if(this.preKeys.length!==er.preKeys.length)return!1;for(let rr=0;rr<this.preKeys.length;rr++)if(!this.preKeys[rr].equals(er.preKeys[rr]))return!1;return this.identityKey.equals(er.identityKey)}static fromLegacyBundle(er){return new Oe({identityKey:Y.fromLegacyKey(er.identityKey,!0),preKeys:er.preKeys.map(rr=>Y.fromLegacyKey(rr))})}}class Ge{constructor(er){if(this.version=1,!er.identityKey)throw new Error("missing identity key");this.identityKey=new W$6(er.identityKey),this.preKeys=(er.preKeys||[]).map(rr=>new W$6(rr))}static async generate(er){const rr=W$6.generate();er&&await rr.publicKey.signWithWallet(er);const nr=new Ge({identityKey:rr,preKeys:[]});return await nr.addPreKey(),nr}getCurrentPreKey(){return this.preKeys[0]}findPreKey(er){const rr=this.preKeys.find(nr=>nr.matches(er));if(!rr)throw new qe(er);return rr}async addPreKey(){this._publicKeyBundle=void 0;const er=W$6.generate();await this.identityKey.signKey(er.publicKey),this.preKeys.unshift(er)}getPublicKeyBundle(){return this._publicKeyBundle||(this._publicKeyBundle=new de({identityKey:this.identityKey.publicKey,preKey:this.getCurrentPreKey().publicKey})),this._publicKeyBundle}validatePublicKeys(){return!!this.identityKey.validatePublicKey()&&this.preKeys.every(er=>er.validatePublicKey())}async sharedSecret(er,rr,nr){if(!er.identityKey||!er.preKey)throw new Error("invalid peer key bundle");if(!await er.identityKey.verifyKey(er.preKey))throw new Error("peer preKey signature invalid");if(!this.identityKey)throw new Error("missing identity key");let ir,sr,or;nr?(or=this.findPreKey(rr),ir=or.sharedSecret(er.identityKey),sr=this.identityKey.sharedSecret(er.preKey)):(or=this.findPreKey(rr),ir=this.identityKey.sharedSecret(er.preKey),sr=or.sharedSecret(er.identityKey));const ar=or.sharedSecret(er.preKey),cr=new Uint8Array(ir.length+sr.length+ar.length);return cr.set(ir,0),cr.set(sr,ir.length),cr.set(ar,ir.length+sr.length),cr}encode(){return PrivateKeyBundle.encode({v1:this,v2:void 0}).finish()}}function He(tr){const er=PrivateKeyBundle.decode(tr);if(er.v1)return new Ge(er.v1);if(er.v2)return new Oe(er.v2);throw new Error("unknown private key bundle version")}class Fe{constructor({walletAddr:er,createdNs:rr}){this.walletAddr=er,this.createdNs=rr}static create(er,rr){return rr=rr||new Date,new Fe({walletAddr:er,createdNs:we(rr)})}static fromBytes(er){const rr=AuthData.decode(er);return new Fe(rr)}toBytes(){return AuthData.encode(this).finish()}}class $e{constructor({identityKey:er,authDataBytes:rr,authDataSignature:nr}){if(!er)throw new Error("Missing identity key in token");if(!nr)throw new Error("Missing authDataSignature in token");this.identityKey=er,this.authDataBytes=rr,this.authDataSignature=nr}get authData(){return this._authData||(this._authData=Fe.fromBytes(this.authDataBytes)),this._authData}get ageMs(){return new Date().valueOf()-this.authData.createdNs.div(1e6).toNumber()}toBytes(){return Token.encode(this).finish()}static fromBytes(er){return new $e(Token.decode(er))}toBase64(){return Buffer.from(this.toBytes()).toString("base64")}}class je{constructor(er){this.keystore=er}async createToken(er){return(rr=>rr instanceof $e?rr:new $e(rr))(await this.keystore.createAuthToken({timestampNs:er?we(er):void 0}))}}const Xe=tr=>new Promise(er=>setTimeout(er,tr)),Je=tr=>!!tr;async function ze(tr,er,rr,nr,ir=Je,sr=1){const or=typeof sr=="number"?sr:1;try{return await tr(...er)}catch(ar){if(!ir(ar)||or>rr)throw ar;return await Xe(nr),ze(tr,er,rr,nr,ir,or+1)}}async function*Ye(tr,er){for await(const rr of tr){const nr=await Promise.allSettled(rr.map(er)),ir=[];for(const sr of nr)sr.status==="fulfilled"?ir.push(sr.value):console.warn("Failed to process envelope due to reason: ",sr.reason);yield ir}}class We{constructor(er,rr=3590){this.authenticator=er,this.maxAgeMs=1e3*rr}async getToken(){return(!this.token||this.token.ageMs>this.maxAgeMs)&&await this.refresh(),this.token.toBase64()}async refresh(){this.token=await this.authenticator.createToken()}}const{MessageApi:Qe,SortDirection:Ze}=d$2,et={local:"http://localhost:5555",dev:"https://dev.xmtp.network",production:"https://production.xmtp.network"};var tt;(function(tr){tr[tr.OK=0]="OK",tr[tr.CANCELLED=1]="CANCELLED",tr[tr.UNKNOWN=2]="UNKNOWN",tr[tr.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",tr[tr.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",tr[tr.NOT_FOUND=5]="NOT_FOUND",tr[tr.ALREADY_EXISTS=6]="ALREADY_EXISTS",tr[tr.PERMISSION_DENIED=7]="PERMISSION_DENIED",tr[tr.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",tr[tr.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",tr[tr.ABORTED=10]="ABORTED",tr[tr.OUT_OF_RANGE=11]="OUT_OF_RANGE",tr[tr.UNIMPLEMENTED=12]="UNIMPLEMENTED",tr[tr.INTERNAL=13]="INTERNAL",tr[tr.UNAVAILABLE=14]="UNAVAILABLE",tr[tr.DATA_LOSS=15]="DATA_LOSS",tr[tr.UNAUTHENTICATED=16]="UNAUTHENTICATED"})(tt||(tt={}));class st extends Error{constructor(er,rr){super(er),this.code=rr}static fromObject(er){return new st(er.message,er.code)}}const nt=tr=>!!tr&&!(tr.name!=="AbortError"&&!tr.message.includes("aborted")),rt=tr=>!(er=>!(!er||!("code"in er)||er.code!==16))(tr),it=tr=>(tr.message&&tr.message.length&&typeof tr.message=="string"&&(tr.message=ue(tr.message)),tr);class ot{constructor(er,rr){this.pathPrefix=er,this.maxRetries=(rr==null?void 0:rr.maxRetries)||5,this.appVersion=rr==null?void 0:rr.appVersion,this.version="xmtp-js/12.1.0",er===et.dev&&console.info(`
XX    XX MM    MM TTTTTT PPPPPP   DDDDD   EEEEEEE VV     VV 
 XX  XX  MMM  MMM   TT   PP   PP  DD  DD  EE      VV     VV 
  XXXX   MM MM MM   TT   PPPPPP   DD   DD EEEEE    VV   VV  
 XX  XX  MM    MM   TT   PP       DD   DD EE        VV VV   
XX    XX MM    MM   TT   PP       DDDDDD  EEEEEEE    VVV    

Connected to the XMTP 'dev' network. Use 'production' for production messages.
https://github.com/xmtp/xmtp-js#xmtp-production-and-dev-network-environments
`)}async _query(er){try{return await ze(Qe.Query,[er,{pathPrefix:this.pathPrefix,mode:"cors",headers:this.headers()}],this.maxRetries,100)}catch(rr){throw st.fromObject(rr)}}_batchQuery(er){return ze(Qe.BatchQuery,[er,{pathPrefix:this.pathPrefix,mode:"cors",headers:this.headers()}],this.maxRetries,100)}async _publish(er,rr=0){var sr;const nr=await this.getToken(),ir=this.headers();ir.set("Authorization",`Bearer ${nr}`);try{return await ze(Qe.Publish,[er,{pathPrefix:this.pathPrefix,mode:"cors",headers:ir}],this.maxRetries,100,rt)}catch(or){if(rt(or)||rr>=1)throw st.fromObject(or);return await((sr=this.authCache)==null?void 0:sr.refresh()),this._publish(er,rr+1)}}_subscribe(er,rr,nr){const ir=new AbortController;return(async()=>{for(;;){const sr=new Date().getTime();try{if(await Qe.Subscribe(er,rr,{pathPrefix:this.pathPrefix,signal:ir.signal,mode:"cors",headers:this.headers()}),ir.signal.aborted)return;console.info("Stream connection closed. Resubscribing"),new Date().getTime()-sr<1e3&&await Xe(1e3),nr==null||nr()}catch(or){if(nt(or)||ir.signal.aborted)return;console.info("Stream connection closed. Resubscribing"),new Date().getTime()-sr<1e3&&await Xe(1e3),nr==null||nr()}}})(),{unsubscribe:async()=>{ir==null||ir.abort()}}}async query(er,{direction:rr=Ze.SORT_DIRECTION_ASCENDING,limit:nr}){const ir=[];for await(const sr of this.queryIteratePages(er,{direction:rr,pageSize:nr&&nr<100?nr:100}))for(const or of sr)if(ir.push(or),nr&&ir.length===nr)return ir;return ir}async*queryIterator(er,rr){for await(const nr of this.queryIteratePages(er,rr))for(const ir of nr)yield ir}async*queryIteratePages({contentTopic:er,startTime:rr,endTime:nr},{direction:ir,pageSize:sr=10}){var lr,ur,dr;if(!er||!er.length)throw new Error("Must specify content topics");const or=me(rr),ar=me(nr);let cr;for(;;){const yr={limit:sr,direction:ir,cursor:cr},mr=await this._query({contentTopics:[er],startTimeNs:or,endTimeNs:ar,pagingInfo:yr});if(!((lr=mr.envelopes)!=null&&lr.length)||(yield mr.envelopes.map(it),!((ur=mr.pagingInfo)!=null&&ur.cursor)))return;cr=(dr=mr.pagingInfo)==null?void 0:dr.cursor}}async batchQuery(er){const rr=[];for(let sr=0;sr<er.length;sr+=50){const or=er.slice(sr,sr+50),ar=[];for(const lr of or)ar.push({contentTopics:[lr.contentTopic],startTimeNs:me(lr.startTime),endTimeNs:me(lr.endTime),pagingInfo:{limit:lr.pageSize||10,direction:lr.direction||Ze.SORT_DIRECTION_ASCENDING}});const cr={requests:ar};rr.push(cr)}const nr=await Promise.all(rr.map(async sr=>this._batchQuery(sr))),ir=[];for(const sr of nr){if(!sr.responses)throw new Error("BatchQueryResponse missing responses");for(const or of sr.responses)or.envelopes?ir.push(or.envelopes.map(it)):ir.push([])}return ir}async publish(er){const rr=[];for(const{contentTopic:nr,message:ir,timestamp:sr}of er){if(!nr.length)throw new Error("Content topic cannot be empty string");if(!ir.length)throw new Error("0 length messages not allowed");const or=sr||new Date;rr.push({contentTopic:nr,timestampNs:me(or),message:Uint8Array.from(ir)})}return this._publish({envelopes:rr})}subscribe(er,rr,nr){if(!er.contentTopics.length)throw new Error("Must provide list of contentTopics to subscribe to");return this._subscribe(er,ir=>rr(it(ir)),nr)}getToken(){if(!this.authCache)throw new Error("AuthCache is not set on API Client");return this.authCache.getToken()}setAuthenticator(er,rr){this.authCache=new We(er,rr)}headers(){const er=new Headers;return er.set("X-Client-Version",this.version),this.appVersion&&er.set("X-App-Version",this.appVersion),er}}class at{constructor(er,rr){this.disableOffset=!1,this.jobType=er,this.mutex=new Mutex,this.keystore=rr}get protoJobType(){return function(er){const rr={v1:JobType$1.JOB_TYPE_REFRESH_V1,v2:JobType$1.JOB_TYPE_REFRESH_V2,"user-preferences":JobType$1.JOB_TYPE_REFRESH_PPPP}[er];if(!rr)throw new Error(`unknown job type: ${er}`);return rr}(this.jobType)}async run(er){return this.mutex.runExclusive(async()=>{const rr=await this.getLastRunTime(),nr=new Date,ir=await er(rr?this.disableOffset?rr:new Date(rr.getTime()-1e4):void 0);return await this.setLastRunTime(nr),ir})}async resetLastRunTime(){await this.keystore.setRefreshJob({jobType:this.protoJobType,lastRunNs:we(new Date(0))})}async getLastRunTime(){const{lastRunNs:er}=await this.keystore.getRefreshJob(GetRefreshJobRequest.fromPartial({jobType:this.protoJobType}));if(!er.equals(Long.fromNumber(0)))return fe$1(er)}async setLastRunTime(er){await this.keystore.setRefreshJob({jobType:this.protoJobType,lastRunNs:we(er)})}}const ct=tr=>!!(tr.recipientAddress&&tr.senderAddress);class dt{constructor(er){this.client=er,this.v1JobRunner=new at("v1",er.keystore),this.v2JobRunner=new at("v2",er.keystore)}async list(){const[er,rr]=await Promise.all([this.listV1Conversations(),this.listV2Conversations()]),nr=er.concat(rr);return nr.sort((ir,sr)=>ir.createdAt.getTime()-sr.createdAt.getTime()),nr}async listFromCache(){const[er,rr]=await Promise.all([this.getV1ConversationsFromKeystore(),this.getV2ConversationsFromKeystore()]),nr=er.concat(rr);return nr.sort((ir,sr)=>ir.createdAt.getTime()-sr.createdAt.getTime()),nr}async listV1Conversations(){return this.v1JobRunner.run(async er=>{const rr=await this.getIntroductionPeers({startTime:er,direction:Ze.SORT_DIRECTION_ASCENDING});return await this.client.keystore.saveV1Conversations({conversations:Array.from(rr).map(([nr,ir])=>({peerAddress:nr,createdNs:we(ir),topic:ke(nr,this.client.address),context:void 0,consentProofPayload:void 0})).filter(nr=>Be(nr.topic))}),(await this.client.keystore.getV1Conversations()).conversations.map(this.conversationReferenceToV1.bind(this))})}async listV2Conversations(){return this.v2JobRunner.run(async er=>{const rr=await this.getV2ConversationsFromKeystore(),nr=await this.updateV2Conversations(er),ir=new Set(rr.map(sr=>sr.topic));for(const sr of nr)ir.has(sr.topic)||(rr.push(sr),ir.add(sr.topic));return rr.sort((sr,or)=>sr.createdAt.getTime()-or.createdAt.getTime()),rr})}async getV2ConversationsFromKeystore(){return(await this.client.keystore.getV2Conversations()).conversations.map(this.conversationReferenceToV2.bind(this))}async getV1ConversationsFromKeystore(){return(await this.client.keystore.getV1Conversations()).conversations.map(this.conversationReferenceToV1.bind(this))}async updateV2Conversations(er){const rr=await this.client.listInvitations({startTime:er,direction:Ze.SORT_DIRECTION_ASCENDING});return this.decodeInvites(rr)}async decodeInvites(er,rr=!1){const{responses:nr}=await this.client.keystore.saveInvites({requests:er.map(sr=>({payload:sr.message,timestampNs:Long.fromString(sr.timestampNs),contentTopic:sr.contentTopic})).filter(sr=>Be(sr.contentTopic))}),ir=[];for(const sr of nr)try{ir.push(this.saveInviteResponseToConversation(sr))}catch(or){if(console.warn("Error saving invite response to conversation: ",or),rr)throw or}return ir}saveInviteResponseToConversation({result:er,error:rr}){if(rr||!er||!er.conversation)throw new Error(`Error from keystore: ${rr==null?void 0:rr.code} ${rr==null?void 0:rr.message}}`);return this.conversationReferenceToV2(er.conversation)}conversationReferenceToV2(er){return new Ne(this.client,er.topic,er.peerAddress,fe$1(er.createdNs),er.context,er.consentProofPayload)}conversationReferenceToV1(er){return new Re(this.client,er.peerAddress,fe$1(er.createdNs))}async stream(er){const rr=new Set,nr=Te(this.client.address),ir=Ce(this.client.address),sr=[nr,ir];return ye.create(this.client,sr,(async or=>{if(or.contentTopic===nr){if(!or.message)throw new Error("empty envelope");const ar=await Me.fromBytes(or.message),cr=this.getPeerAddress(ar);return(lr=>!rr.has(lr)&&(rr.add(lr),!0))(cr)?(await ar.decrypt(this.client.keystore,this.client.publicKeyBundle),new Re(this.client,cr,ar.sent)):void 0}if(or.contentTopic===ir){const ar=await this.decodeInvites([or],!0);if(ar.length)return ar[0]}throw new Error("unrecognized invite topic")}).bind(this),void 0,er)}async streamAllMessages(er){const rr=Te(this.client.address),nr=Ce(this.client.address),ir=new Set([rr,nr]),sr=new Map;for(const lr of await this.list())ir.add(lr.topic),sr.set(lr.topic,lr);const or=(lr,ur)=>!ir.has(lr)&&(sr.set(lr,ur),ir.add(lr),!0),ar=await ye.create(this.client,Array.from(ir.values()),async lr=>{const ur=lr.contentTopic;if(!ur||!lr.message)return null;if(ur===rr){const yr=await Me.fromBytes(lr.message);if(!ct(yr))return null;const mr=this.getPeerAddress(yr);return new Re(this.client,mr,yr.sent).decodeMessage(lr)}if(ur===nr)return(await this.decodeInvites([lr],!0))[0];const dr=sr.get(ur);if(dr instanceof Re||dr instanceof Ne)return dr.decodeMessage(lr);throw console.log("Unknown topic"),new Error("Unknown topic")},lr=>{var ur;if(lr instanceof Ve&&lr.contentTopic===rr){const dr=new Re(this.client,((ur=lr.recipientAddress)==null?void 0:ur.toLowerCase())===this.client.address.toLowerCase()?lr.senderAddress:lr.recipientAddress,lr.sent);return or(dr.topic,dr)?Array.from(ir.values()):void 0}if(lr instanceof Ne)return or(lr.topic,lr)?Array.from(ir.values()):void 0},er),cr=async function*(){for await(const lr of ar)if(lr instanceof Ve&&(yield lr),lr instanceof Ne)for(const ur of await lr.messages())yield ur}();return cr.return=async()=>(await(ar==null?void 0:ar.return()),{value:void 0,done:!0}),cr}async getIntroductionPeers(er){const rr=Te(this.client.address),nr=await this.client.listEnvelopes(rr,sr=>{if(!sr.message)throw new Error("empty envelope");return Me.fromBytes(sr.message)},er),ir=new Map;for(const sr of nr){if(!ct(sr))continue;const or=this.getPeerAddress(sr);if(or){const ar=ir.get(or);if(!ar||ar>sr.sent)try{await sr.decrypt(this.client.keystore,this.client.publicKeyBundle),ir.set(or,sr.sent)}catch{continue}}}return ir}async newConversation(er,rr,nr){const ir=ar=>{return ar.peerAddress.toLowerCase()===er.toLowerCase()&&(cr=rr,lr=ar.context??void 0,(cr==null?void 0:cr.conversationId)===(lr==null?void 0:lr.conversationId));var cr,lr},sr=(await this.getV2ConversationsFromKeystore()).find(ir);if(sr)return sr;let or=await this.client.getUserContact(er);if(!or)throw new Error(`Recipient ${er} is not on the XMTP network`);if(er.toLowerCase()===this.client.address.toLowerCase())throw new Error("self messaging not supported");if(or instanceof de&&!(rr!=null&&rr.conversationId))return new Re(this.client,er,new Date);if(!(rr!=null&&rr.conversationId)){const ar=(await this.listV1Conversations()).find(cr=>cr.peerAddress.toLowerCase()===er.toLowerCase());if(ar){if(!this.client.signedPublicKeyBundle.isFromLegacyBundle())throw new Error("cannot resume pre-existing V1 conversation; client keys not compatible");if(!(or instanceof de||or.isFromLegacyBundle()))throw new Error("cannot resume pre-existing V1 conversation; peer keys not compatible");return ar}}return or instanceof de&&(or=ce.fromLegacyBundle(or)),this.v2JobRunner.run(async ar=>(await this.updateV2Conversations(ar)).find(ir)||this.createV2Convo(or,rr,nr))}async createV2Convo(er,rr,nr){const ir=new Date,{payload:sr,conversation:or}=await this.client.keystore.createInvite({recipient:er,context:rr,createdNs:we(ir),consentProof:nr});if(!sr||!or)throw new Error("Required field not returned from Keystore");const ar=await er.walletSignatureAddress();return await this.client.publishEnvelopes([{contentTopic:Ce(ar),message:sr,timestamp:ir},{contentTopic:Ce(this.client.address),message:sr,timestamp:ir}]),await this.client.contacts.allow([ar]),this.conversationReferenceToV2(or)}getPeerAddress(er){var rr;return((rr=er.recipientAddress)==null?void 0:rr.toLowerCase())===this.client.address.toLowerCase()?er.senderAddress:er.recipientAddress}}class ht{constructor(er){this.storage=er}static create(){if(typeof localStorage>"u")throw new Error("Missing LocalStorage. Use ephemeralPersistence instead");return new ht(localStorage)}async getItem(er){const rr=this.storage.getItem(er);return rr===null?null:Uint8Array.from(Buffer.from(rr,"binary"))}async setItem(er,rr){this.storage.setItem(er,Buffer.from(rr).toString("binary"))}}class yt{constructor(){this.store=new Map}get length(){return this.store.size}clear(){this.store=new Map}getItem(er){return this.validateString(er),this.store.has(er)?String(this.store.get(er)):null}key(er){if(er===void 0)throw new TypeError("Failed to execute 'key' on 'Storage': 1 argument required, but only 0 present.");const rr=[...this.store.keys()];return er>=rr.length?null:rr[er]}removeItem(er){this.validateString(er),this.store.delete(er)}setItem(er,rr){this.validateString(er),this.validateString(rr),this.store.set(String(er),String(rr))}validateString(er){if(typeof er!="string")throw new TypeError("Key must be a string")}}let ut$1=class extends ht{static create(){return new ht(new yt)}},lt$8=class extends Error{};class pt{constructor(er){if(!er.publicKey.signature)throw new Error("Provided public key is not signed");this.identityKey=er}async createToken(er){const rr=Fe.create(this.identityKey.publicKey.walletSignatureAddress(),er||new Date).toBytes(),nr=keccak256$3(rr),ir=await this.identityKey.sign(hexToBytes$8(nr));return new $e(Token.fromPartial({identityKey:PublicKey.fromPartial(this.identityKey.publicKey),authDataBytes:rr,authDataSignature:Signature$5.fromPartial(ir)}))}}const wt=new T$2.ec("secp256k1"),ft$2=D$2.subtle,mt=Buffer.from("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141","hex"),gt$a=Buffer.alloc(32,0);function vt(tr,er){if(!tr)throw new Error(er||"Assertion failed")}function bt(tr){return er=tr,!(!Buffer.isBuffer(er)||er.length!==32)&&tr.compare(gt$a)>0&&tr.compare(mt)<0;var er}function Et(tr){const er=new Uint8Array(tr);return D$2.getRandomValues(er),Buffer.from(er)}async function Kt(tr){const er=await ft$2.digest("SHA-512",tr);return Buffer.from(er)}function kt(tr){return function(er,rr,nr){return new Promise(function(ir){return ft$2.importKey("raw",rr,{name:"AES-CBC"},!1,[tr]).then(function(sr){const or={name:"AES-CBC",iv:er};return ft$2[tr](or,sr,nr)}).then(function(sr){ir(Buffer.from(new Uint8Array(sr)))})})}}const At=kt("encrypt"),St=kt("decrypt");async function Tt(tr,er){const rr=await ft$2.importKey("raw",tr,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]);return Buffer.from(await ft$2.sign({name:"HMAC",hash:"SHA-256"},rr,er))}function Ct(tr){return vt(tr.length===32,"Bad private key"),vt(bt(tr),"Bad private key"),Buffer.from(wt.keyFromPrivate(tr).getPublic("array"))}function Pt(tr,er){return new Promise(function(rr){vt(Buffer.isBuffer(tr),"Bad private key"),vt(Buffer.isBuffer(er),"Bad public key"),vt(tr.length===32,"Bad private key"),vt(bt(tr),"Bad private key"),vt(er.length===65||er.length===33,"Bad public key"),er.length===65&&vt(er[0]===4,"Bad public key"),er.length===33&&vt(er[0]===2||er[0]===3,"Bad public key");const nr=wt.keyFromPrivate(tr),ir=wt.keyFromPublic(er),sr=nr.derive(ir.getPublic());rr(Buffer.from(sr.toArray()))})}async function It(tr,er){const rr=await Pt(tr,er.ephemeralPublicKey),nr=await Kt(rr),ir=nr.slice(0,32),sr=nr.slice(32),or=Buffer.concat([er.iv,er.ephemeralPublicKey,er.ciphertext]);return vt(await async function(ar,cr,lr){return function(ur,dr){if(ur.length!==dr.length)return!1;let yr=0;for(let mr=0;mr<ur.length;mr++)yr|=ur[mr]^dr[mr];return yr===0}(await Tt(ar,cr),lr)}(sr,or,er.mac),"Bad mac"),St(er.iv,ir,er.ciphertext)}async function Bt(tr,er){await __wbg_init();const rr=tr.publicKey.secp256k1Uncompressed.bytes,nr=tr.secp256k1.bytes;return user_preferences_encrypt(rr,nr,er)}async function Rt(tr,er){await __wbg_init();const rr=tr.publicKey.secp256k1Uncompressed.bytes,nr=tr.secp256k1.bytes;return user_preferences_decrypt(rr,nr,er)}class Nt{constructor({topic:er,context:rr,aes256GcmHkdfSha256:nr,consentProof:ir}){if(!er||!er.length)throw new Error("Missing topic");if(!nr||!nr.keyMaterial||!nr.keyMaterial.length)throw new Error("Missing key material");this.topic=er,this.context=rr,this.aes256GcmHkdfSha256=nr,this.consentProof=ir}static createRandom(er,rr){const nr=Ae(Buffer.from(D$2.getRandomValues(new Uint8Array(32))).toString("base64").replace(/=*$/g,"").replace(/\//g,"-")),ir=D$2.getRandomValues(new Uint8Array(32));return new Nt({topic:nr,aes256GcmHkdfSha256:{keyMaterial:ir},context:er,consentProof:rr})}toBytes(){return InvitationV1.encode(this).finish()}static fromBytes(er){return new Nt(InvitationV1.decode(er))}}class Dt{constructor({sender:er,recipient:rr,createdNs:nr}){if(!er)throw new Error("Missing sender");if(!rr)throw new Error("Missing recipient");this.sender=new ce(er),this.recipient=new ce(rr),this.createdNs=nr}toBytes(){return SealedInvitationHeaderV1.encode(this).finish()}static fromBytes(er){return new Dt(SealedInvitationHeaderV1.decode(er))}}class xt{constructor({headerBytes:er,ciphertext:rr}){if(!er||!er.length)throw new Error("Missing header bytes");if(!rr)throw new Error("Missing ciphertext");this.headerBytes=er,this.ciphertext=new N$1(rr)}get header(){return this._header||(this._header=Dt.fromBytes(this.headerBytes)),this._header}async getInvitation(er){if(this._invitation)return this._invitation;const rr=this.header;let nr;nr=er.identityKey.matches(this.header.sender.identityKey)?await er.sharedSecret(rr.recipient,rr.sender.preKey,!1):await er.sharedSecret(rr.sender,rr.recipient.preKey,!0);const ir=await U(this.ciphertext,nr,this.headerBytes);return this._invitation=Nt.fromBytes(ir),this._invitation}toBytes(){return SealedInvitationV1.encode(this).finish()}static fromBytes(er){return new xt(SealedInvitationV1.decode(er))}}class Mt{constructor({v1:er}){if(!er)throw new Error("Missing v1 or v2 invitation");this.v1=new xt(er)}toBytes(){return SealedInvitation.encode(this).finish()}static fromBytes(er){return new Mt(SealedInvitation.decode(er))}static async fromEnvelope(er){var sr;if(!er.message||!er.timestampNs)throw new Error("invalid invitation envelope");const rr=Mt.fromBytes(er.message),nr=Long.fromString(er.timestampNs),ir=(sr=rr.v1)==null?void 0:sr.header.createdNs;if(!ir||!ir.equals(nr))throw new Error("envelope and header timestamp mistmatch");return rr}static async createV1({sender:er,recipient:rr,created:nr,invitation:ir}){const sr=new Dt({sender:er.getPublicKeyBundle(),recipient:rr,createdNs:we(nr)}).toBytes(),or=await er.sharedSecret(rr,er.getCurrentPreKey().publicKey,!1),ar=ir.toBytes(),cr=await V$1(ar,or,sr);return new Mt({v1:{headerBytes:sr,ciphertext:cr}})}}const _t=(tr,er)=>tr instanceof ve?tr:new ve(er,tr.message),Vt=(tr,er,rr)=>Promise.all(tr.map(async nr=>{try{return{result:await er(nr)}}catch(ir){return{error:_t(ir,rr)}}})),Ut=tr=>tr instanceof de?tr:new de(tr),Lt=(tr,er,rr)=>{for(const nr of er)if(!tr[nr])throw new ve(ErrorCode$1.ERROR_CODE_INVALID_INPUT,`Missing field ${String(nr)}`);for(const nr of rr){const ir=tr[nr];if(!ir||!(ir!=null&&ir.length))throw new ve(ErrorCode$1.ERROR_CODE_INVALID_INPUT,`Missing field ${String(nr)}`)}return!0},qt=tr=>{var er;if(!((er=tr==null?void 0:tr.aes256GcmHkdfSha256)!=null&&er.keyMaterial))throw new ve(ErrorCode$1.ERROR_CODE_INVALID_INPUT,"Missing key material");return tr.aes256GcmHkdfSha256.keyMaterial},Ot=({invitation:tr,createdNs:er,peerAddress:rr})=>({context:tr.context,topic:tr.topic,peerAddress:rr,createdNs:er,consentProofPayload:tr.consentProof});class Gt{constructor(er,rr,nr=new Map){this.persistenceKey=rr,this.persistence=er,this.revision=0,this.mutex=new Mutex,this.topicMap=nr}get revisionKey(){return this.persistenceKey+"/revision"}static async create(er){const rr=new Gt(er,"invitations/v1");return await rr.refresh(),rr}validate(er){return!!er.topic&&er.topic.length>0&&!!er.invitation}async refresh(){const er=await this.getRevision();if(er>this.revision)for(const[rr,nr]of await this.loadFromPersistence())this.topicMap.set(rr,nr);this.revision=er}async getRevision(){const er=await this.persistence.getItem(this.revisionKey);return er?function(rr){const nr=rr.buffer;return new DataView(nr).getInt32(0,!0)}(er):0}async setRevision(er){await this.persistence.setItem(this.revisionKey,function(rr){const nr=new ArrayBuffer(4);return new DataView(nr).setInt32(0,rr,!0),new Uint8Array(nr)}(er))}async loadFromPersistence(){const er=await this.persistence.getItem(this.persistenceKey);return er?(rr=>{const nr=new Map;for(const[ir,sr]of Object.entries(rr.topics))nr.set(ir,sr);return nr})(TopicMap.decode(er)):new Map}async store(){await this.persistence.setItem(this.persistenceKey,this.toBytes()),this.revision++,await this.setRevision(this.revision)}async add(er){await this.mutex.runExclusive(async()=>{await this.refresh();let rr=!1;for(const nr of er){if(!this.validate(nr)){console.warn("Invalid topic data",nr.topic);continue}const{topic:ir,...sr}=nr;this.topicMap.has(ir)||(this.topicMap.set(ir,sr),rr=!0)}rr&&await this.store()})}get topics(){return[...this.topicMap.values()]}lookup(er){return this.topicMap.get(er)}toBytes(){return TopicMap.encode({topics:Object.fromEntries(this.topicMap)}).finish()}}class Ht extends Gt{static async create(er){const rr=new Ht(er,"conversation-v1/v1");return await rr.refresh(),rr}validate(er){var rr;return!!(er.topic&&er.topic.length&&((rr=er.peerAddress)==null?void 0:rr.length)>0)}}const Ft=async(tr,er,rr,nr)=>V$1(rr,await tr.sharedSecret(er,tr.getCurrentPreKey().publicKey,!1),nr),{ErrorCode:$t}=i$3,jt=new TextEncoder().encode("__XMTP__INVITATION__SALT__XMTP__");class Xt{constructor(er,rr,nr,ir){this.v1Keys=er,this.v2Keys=Oe.fromLegacyBundle(er),this.v1Store=rr,this.v2Store=nr,this.authenticator=new pt(er.identityKey),this.jobStatePersistence=ir}static async create(er,rr){return new Xt(er,await Ht.create(rr),await Gt.create(rr),rr)}get walletAddress(){return this.v1Keys.identityKey.publicKey.walletSignatureAddress()}async decryptV1(er){const rr=await Vt(er.requests,async nr=>{Lt(nr,["payload","peerKeys"],["headerBytes"]);const{payload:ir,peerKeys:sr,headerBytes:or,isSender:ar}=nr;return{decrypted:await(async(lr,ur,dr,yr,mr)=>U(dr,await lr.sharedSecret(ur,lr.getCurrentPreKey().publicKey,!mr),yr))(this.v1Keys,Ut(sr),ir,or,ar)}},ErrorCode$1.ERROR_CODE_UNSPECIFIED);return DecryptResponse.fromPartial({responses:rr})}async decryptV2(er){const rr=await Vt(er.requests,async nr=>{Lt(nr,["payload"],["headerBytes"]);const{payload:ir,headerBytes:sr,contentTopic:or}=nr,ar=this.v2Store.lookup(or);if(!ar)throw new ve(ErrorCode$1.ERROR_CODE_NO_MATCHING_PREKEY,"no topic key");return{decrypted:await((lr,ur,dr)=>U(lr,ur,dr))(ir,qt(ar.invitation),sr)}},$t.ERROR_CODE_UNSPECIFIED);return DecryptResponse.fromPartial({responses:rr})}async encryptV1(er){const rr=await Vt(er.requests,async nr=>{Lt(nr,["payload","recipient"],["headerBytes"]);const{recipient:ir,payload:sr,headerBytes:or}=nr;return{encrypted:await Ft(this.v1Keys,Ut(ir),sr,or)}},$t.ERROR_CODE_UNSPECIFIED);return EncryptResponse.fromPartial({responses:rr})}async createAuthToken({timestampNs:er}){return this.authenticator.createToken(er?fe$1(er):void 0)}async selfEncrypt(er){const rr=await Vt(er.requests,async nr=>{const{payload:ir}=nr;if(!ir)throw new ve($t.ERROR_CODE_INVALID_INPUT,"Missing field payload");return{encrypted:await Bt(this.v1Keys.identityKey,ir)}},$t.ERROR_CODE_INVALID_INPUT);return SelfEncryptResponse.fromPartial({responses:rr})}async selfDecrypt(er){const rr=await Vt(er.requests,async nr=>{const{payload:ir}=nr;if(!ir)throw new ve($t.ERROR_CODE_INVALID_INPUT,"Missing field payload");return{decrypted:await Rt(this.v1Keys.identityKey,ir)}},$t.ERROR_CODE_INVALID_INPUT);return DecryptResponse.fromPartial({responses:rr})}async getPrivatePreferencesTopicIdentifier(){const er=await async function(rr){await __wbg_init();const nr=rr.secp256k1.bytes;return generate_private_preferences_topic(nr)}(this.v1Keys.identityKey);return GetPrivatePreferencesTopicIdentifierResponse.fromPartial({identifier:er})}async encryptV2(er){const rr=await Vt(er.requests,async nr=>{Lt(nr,["payload"],["headerBytes"]);const{payload:ir,headerBytes:sr,contentTopic:or}=nr,ar=this.v2Store.lookup(or);if(!ar)throw new ve($t.ERROR_CODE_NO_MATCHING_PREKEY,"no topic key");const cr=qt(ar.invitation),lr=await((dr,yr,mr)=>V$1(dr,yr,mr))(ir,cr,sr),ur=`${Math.floor(Date.now()/1e3/60/60/24/30)}-${await this.getAccountAddress()}`;return{encrypted:lr,senderHmac:await G$1(cr,new TextEncoder().encode(ur),sr)}},$t.ERROR_CODE_INVALID_INPUT);return EncryptResponse.fromPartial({responses:rr})}async saveInvites(er){const rr=[],nr=await Vt(er.requests,async({payload:ir,timestampNs:sr})=>{const or=Mt.fromBytes(ir);if(or.v1){if(!or.v1.header.createdNs.equals(sr))throw new Error("envelope and header timestamp mismatch");const ar=or.v1.header.sender.equals(this.v2Keys.getPublicKeyBundle()),cr=await or.v1.getInvitation(this.v2Keys),lr={invitation:cr,createdNs:or.v1.header.createdNs,peerAddress:ar?await or.v1.header.recipient.walletSignatureAddress():await or.v1.header.sender.walletSignatureAddress()};return rr.push({...lr,topic:cr.topic}),{conversation:Ot(lr)}}},$t.ERROR_CODE_INVALID_INPUT);return await this.v2Store.add(rr),SaveInvitesResponse.fromPartial({responses:nr})}async createInvite(er){var nr;try{Lt(er,["recipient"],[]);const ir=fe$1(er.createdNs),sr=(rr=er.recipient)instanceof ce?rr:new ce(rr),or=await this.getAccountAddress(),ar=await sr.walletSignatureAddress(),cr=await this.v2Keys.sharedSecret(sr,this.v2Keys.getCurrentPreKey().publicKey,or<ar),lr=[or,ar].sort(),ur=(((nr=er.context)==null?void 0:nr.conversationId)||"")+lr.join(),dr=new TextEncoder().encode(ur),yr=j$2(await Tt(Buffer.from(cr),Buffer.from(dr))),mr=["0",...lr].join("|"),wr=new TextEncoder().encode(mr),xr=await async function(Ur,Dr){const Hr=await D$2.subtle.importKey("raw",Ur,"HKDF",!1,["deriveKey"]);return D$2.subtle.deriveKey({name:"HKDF",hash:"SHA-256",salt:jt,info:Dr},Hr,{name:"AES-GCM",length:256},!0,["encrypt","decrypt"])}(cr,wr),Or=new Uint8Array(await D$2.subtle.exportKey("raw",xr)),Tr=new Nt({topic:Ae(yr),aes256GcmHkdfSha256:{keyMaterial:Or},context:er.context,consentProof:er.consentProof}),Ar=await Mt.createV1({sender:this.v2Keys,recipient:sr,created:ir,invitation:Tr}),Nr={invitation:Tr,topic:Tr.topic,createdNs:er.createdNs,peerAddress:await sr.walletSignatureAddress()};return await this.v2Store.add([Nr]),CreateInviteResponse.fromPartial({conversation:Ot(Nr),payload:Ar.toBytes()})}catch(ir){throw _t(ir,$t.ERROR_CODE_INVALID_INPUT)}var rr}async signDigest(er){Lt(er,["digest"],[]);const{digest:rr,identityKey:nr,prekeyIndex:ir}=er;let sr;if(nr)sr=this.v1Keys.identityKey;else{if(ir===void 0||!Number.isInteger(ir))throw new ve($t.ERROR_CODE_INVALID_INPUT,"must specifify identityKey or prekeyIndex");if(sr=this.v1Keys.preKeys[ir],!sr)throw new ve($t.ERROR_CODE_NO_MATCHING_PREKEY,"no prekey found")}return sr.sign(rr)}async saveV1Conversations({conversations:er}){return await this.v1Store.add(er.map(rr=>({topic:ke(rr.peerAddress,this.walletAddress),peerAddress:rr.peerAddress,createdNs:rr.createdNs,invitation:void 0}))),{}}async getV1Conversations(){return{conversations:this.v1Store.topics.map(this.topicDataToV1ConversationReference.bind(this))}}async getV2Conversations(){const er=this.v2Store.topics.map(rr=>Ot(rr));return er.sort((rr,nr)=>rr.createdNs.div(1e6).sub(nr.createdNs.div(1e6)).toNumber()),GetConversationsResponse.fromPartial({conversations:er})}async getPublicKeyBundle(){return this.v1Keys.getPublicKeyBundle()}async getPrivateKeyBundle(){return this.v1Keys}async getAccountAddress(){return this.accountAddress||(this.accountAddress=await this.v2Keys.getPublicKeyBundle().walletSignatureAddress()),this.accountAddress}async getRefreshJob({jobType:er}){if(er===JobType$1.JOB_TYPE_UNSPECIFIED)throw new ve($t.ERROR_CODE_INVALID_INPUT,"invalid job type");const rr=await this.getLastRunTime(er);return GetRefreshJobResponse.fromPartial({lastRunNs:rr||Long.fromNumber(0)})}async setRefreshJob({jobType:er,lastRunNs:rr}){const nr=await this.buildJobStorageKey(er);return await this.jobStatePersistence.setItem(nr,Uint8Array.from(rr.toBytes())),{}}topicDataToV1ConversationReference(er){return{peerAddress:er.peerAddress,createdNs:er.createdNs,topic:ke(er.peerAddress,this.walletAddress),context:void 0,consentProofPayload:void 0}}buildJobStorageKey(er){return`refreshJob/${er.toString()}`}async getLastRunTime(er){const rr=await this.jobStatePersistence.getItem(this.buildJobStorageKey(er));if(rr&&rr.length)return Long.fromBytes([...rr])}lookupTopic(er){return this.v2Store.lookup(er)}async getV2ConversationHmacKeys(er){const rr=Math.floor(Date.now()/1e3/60/60/24/30),nr={};let ir=this.v2Store.topics;return er!=null&&er.topics&&(ir=ir.filter(sr=>sr.invitation!==void 0&&er.topics.includes(sr.invitation.topic))),await Promise.all(ir.map(async sr=>{var or;if((or=sr.invitation)!=null&&or.topic){const ar=qt(sr.invitation),cr=await Promise.all([rr-1,rr,rr+1].map(async lr=>{const ur=`${lr}-${await this.getAccountAddress()}`,dr=await O$1(ar,new TextEncoder().encode(ur));return{thirtyDayPeriodsSinceEpoch:lr,hmacKey:await F$2(dr)}}));nr[sr.invitation.topic]={values:cr}}})),{hmacKeys:nr}}}class Jt{constructor(er){this.apiClient=er}async getItem(er){for await(const rr of this.apiClient.queryIterator({contentTopic:this.buildTopic(er)},{pageSize:1,direction:SortDirection$2.SORT_DIRECTION_DESCENDING}))if(rr.message)try{return Uint8Array.from(rr.message)}catch(nr){console.log(nr)}return null}async setItem(er,rr){const nr=Uint8Array.from(rr);await this.apiClient.publish([{contentTopic:this.buildTopic(er),message:nr}])}setAuthenticator(er){this.apiClient.setAuthenticator(er)}buildTopic(er){return Pe(er)}}class zt{constructor({eciesBytes:er,signature:rr}){if(!er||!er.length)throw new Error("eciesBytes is empty");if(!rr)throw new Error("signature is undefined");this.eciesBytes=er,this.signature=new te(rr),this.ciphertext=SignedEciesCiphertext_Ecies.decode(er)}toBytes(){return SignedEciesCiphertext.encode(this).finish()}async verify(er){return er.verify(this.signature,await _$2(this.eciesBytes))}static fromBytes(er){const rr=SignedEciesCiphertext.decode(er);return new zt(rr)}static async create(er,rr){(sr=>{if(sr.iv.length!==16)throw new Error("Invalid iv length");if(sr.ephemeralPublicKey.length!==65)throw new Error("Invalid ephemPublicKey length");if(sr.ciphertext.length<1||sr.ciphertext.length%16!=0)throw new Error("Invalid ciphertext length");if(sr.mac.length!==32)throw new Error("Invalid mac length")})(er);const nr=SignedEciesCiphertext_Ecies.encode(er).finish(),ir=await rr.sign(await _$2(nr));return new zt({eciesBytes:nr,signature:ir})}}class Yt{constructor(er,rr){this.persistence=er,this.privateKey=rr,this.privateKeyBytes=Buffer.from(rr.secp256k1.bytes),this.publicKey=Ct(this.privateKeyBytes)}async getItem(er){const rr=await this.persistence.getItem(er);return rr?this.decrypt(rr):null}async setItem(er,rr){const nr=await this.encrypt(rr);await this.persistence.setItem(er,nr)}async encrypt(er){const rr=await async function(nr,ir,sr){sr=sr||{};const or=(sr==null?void 0:sr.iv)||Et(16);let ar=(sr==null?void 0:sr.ephemPrivateKey)||Et(32);for(;!bt(ar);){if(sr!=null&&sr.ephemPrivateKey)throw new Error("ephemPrivateKey is not valid");ar=Et(32)}const cr=Ct(ar),lr=await Kt(await Pt(ar,nr)),ur=lr.slice(0,32),dr=lr.slice(32),yr=await At(or,ur,ir),mr=Buffer.concat([or,cr,yr]);return{iv:or,ephemeralPublicKey:cr,ciphertext:yr,mac:await Tt(dr,mr)}}(this.publicKey,Buffer.from(er));return this.serializeEcies(rr)}async decrypt(er){const rr=await this.deserializeEcies(er),nr=await It(this.privateKeyBytes,rr);return Uint8Array.from(nr)}async serializeEcies(er){return(await zt.create(er,this.privateKey)).toBytes()}async deserializeEcies(er){const rr=zt.fromBytes(er);if(!await rr.verify(this.privateKey.publicKey))throw new Error("signature validation failed");const nr=rr.ciphertext;return{ciphertext:Buffer.from(nr.ciphertext),mac:Buffer.from(nr.mac),iv:Buffer.from(nr.iv),ephemeralPublicKey:Buffer.from(nr.ephemeralPublicKey)}}}class Wt{constructor(er,rr){this.prefix=er,this.persistence=rr}getItem(er){return this.persistence.getItem(this.buildKey(er))}setItem(er,rr){return this.persistence.setItem(this.buildKey(er),rr)}buildKey(er){return this.prefix+er}}const Qt=async(tr,er)=>{if(!tr.persistConversations)return ut$1.create();const rr=await er.identityKey.publicKey.walletSignatureAddress(),nr=`xmtp/${tr.env}/${rr}/`,ir=tr.basePersistence,sr=!tr.disablePersistenceEncryption;return new Wt(nr,sr?new Yt(ir,er.identityKey):ir)},Zt="key_bundle";class es{constructor(er,rr,nr){this.signer=er,this.persistence=rr,this.preEnableIdentityCallback=nr}async getStorageAddress(er){let rr=await this.signer.getAddress();return rr=getAddress(rr),`${rr}/${er}`}async loadPrivateKeyBundle(){const er=await this.persistence.getItem(await this.getStorageAddress(Zt));if(!er)return null;const[rr,nr]=await this.fromEncryptedBytes(this.signer,Uint8Array.from(er));return nr&&await this.storePrivateKeyBundle(rr),rr}async storePrivateKeyBundle(er){const rr=await this.getStorageAddress(Zt),nr=await this.toEncryptedBytes(er,this.signer);typeof this.persistence.setAuthenticator=="function"&&this.persistence.setAuthenticator(new pt(er.identityKey)),await this.persistence.setItem(rr,nr)}async toEncryptedBytes(er,rr){const nr=er.encode(),ir=D$2.getRandomValues(new Uint8Array(32)),sr=ss(ir),or=await rr.getAddress();this.preEnableIdentityCallback&&await this.preEnableIdentityCallback();const ar=await rr.signMessage(sr);if(!verifyMessage({address:or,message:sr,signature:ar}))throw new Error("invalid signature");const cr=hexToBytes$8(ar),lr=await V$1(nr,cr);return EncryptedPrivateKeyBundle.encode({v1:{walletPreKey:ir,ciphertext:lr}}).finish()}async fromEncryptedBytes(er,rr){var or;const[nr,ir]=function(ar){try{const cr=EncryptedPrivateKeyBundle.decode(ar);if(cr.v1)return[cr.v1,!1]}catch{return[EncryptedPrivateKeyBundleV1.decode(ar),!0]}throw new Error("unrecognized encrypted private key bundle version")}(rr);if(!nr.walletPreKey)throw new Error("missing wallet pre-key");if(!((or=nr.ciphertext)!=null&&or.aes256GcmHkdfSha256))throw new Error("missing bundle ciphertext");this.preEnableIdentityCallback&&await this.preEnableIdentityCallback();const sr=hexToBytes$8(await er.signMessage(ss(nr.walletPreKey)));try{const ar=new N$1(nr.ciphertext),cr=await U(ar,sr),[lr,ur]=ts(cr);return[lr,ir||ur]}catch{if(sr.length!==65)throw new Error("Expected 65 bytes before trying a different recovery byte");const cr=sr[sr.length-1];let lr=sr.slice(0,sr.length-1);lr=cr<27?new Uint8Array([...lr,cr+27]):new Uint8Array([...lr,cr-27]);const ur=new N$1(nr.ciphertext),dr=await U(ur,lr),[yr,mr]=ts(dr);return[yr,ir||mr]}}}function ts(tr){try{const er=He(tr);if(er instanceof Oe)throw new Error("V2 bundles not supported yet");return[er,!1]}catch{const rr=PrivateKeyBundleV1.decode(tr);return[new Ge(rr),!0]}}function ss(tr){return`XMTP : Enable Identity
${j$2(tr)}

For more info: https://xmtp.org/signatures/`}class ns{async newKeystore(er,rr,nr){if(!nr)throw new lt$8("Wallet required to generate new keys");er.preCreateIdentityCallback&&await er.preCreateIdentityCallback();const ir=await Ge.generate(nr);return await new es(nr,new Jt(rr),er.preEnableIdentityCallback).storePrivateKeyBundle(ir),Xt.create(ir,await Qt(er,ir))}}class rs{async newKeystore(er,rr,nr){if(!nr)throw new lt$8("No wallet provided");const ir=new es(nr,new Jt(rr),er.preEnableIdentityCallback),sr=await ir.loadPrivateKeyBundle();if(!sr)throw new lt$8("No keys found");return Xt.create(sr,await Qt(er,sr))}}function is$1(){return window.ethereum}function os(tr){const[er,rr,...nr]=tr.split(".");return{major:Number(er),minor:Number(rr),patch:nr.join(".")}}function as(tr,er){if(!tr||!er)return!1;const rr=os(tr),nr=os(er);return rr.major!==nr.major?rr.major>nr.major:rr.minor!==nr.minor?rr.minor>nr.minor:!(!rr.patch||!nr.patch)&&function(ir,sr){const[or,ar]=ir.split("-"),[cr,lr]=sr.split("-");if(Number(or)!==Number(cr))return Number(or)>Number(cr);if(!ar||!lr)return!1;const[ur,dr]=ar.split("."),[yr,mr]=lr.split(".");return ur!==yr?!0:Number(dr)>Number(mr)}(rr.patch,nr.patch)}const{GetKeystoreStatusResponse_KeystoreStatus:cs$1,InitKeystoreRequest:ds,InitKeystoreResponse:hs,GetKeystoreStatusRequest:ys,GetKeystoreStatusResponse:us}=i$3;async function ls(tr,er,rr,nr,ir){let sr=null;if(er.req){const ar=(0,er.req.encode)(rr).finish();sr=le(ar,0,ar.length)}const or=await async function(ar,cr,lr,ur){var mr;const dr={meta:lr};typeof cr=="string"&&(dr.req=cr);const yr=await((mr=is$1())==null?void 0:mr.request({method:"wallet_invokeSnap",params:{snapId:ur,request:{method:ar,params:dr}}}));if(!yr||typeof yr!="object")throw new Error("No response value");return yr.res}(tr,sr,nr,ir);if(Array.isArray(or))throw new Error("Unexpected array response");return er.res.decode(ue(or))}async function ps(){var er;const tr=is$1();if(tr!=null&&tr.isMetaMask)try{return await tr.request({method:"wallet_getSnaps"}),!0}catch{}if((tr==null?void 0:tr.detected)!==void 0&&Array.isArray(tr.detected))for(const rr of tr.detected)try{return await rr.request({method:"wallet_getSnaps"}),(er=tr==null?void 0:tr.setProvider)==null||er.call(tr,rr),!0}catch{}if((tr==null?void 0:tr.providers)!==void 0&&Array.isArray(tr.providers))for(const rr of tr.providers)try{return await rr.request({method:"wallet_getSnaps"}),window.ethereum=rr,!0}catch{}return!1}async function ws(tr,er){try{const rr=await async function(){var nr;return await((nr=is$1())==null?void 0:nr.request({method:"wallet_getSnaps"}))}();return rr?Object.values(rr).find(nr=>{return nr&&nr.id===tr&&(!er||(ir=nr.version,sr=er,!ir||!sr||os(ir).major===os(sr).major));var ir,sr}):void 0}catch(rr){return void console.warn("Failed to obtain installed snap",rr)}}const fs$1={req:ys,res:us},ms$1={req:ds,res:hs},gs={decryptV1:{req:DecryptV1Request,res:DecryptResponse},decryptV2:{req:DecryptV2Request,res:DecryptResponse},encryptV1:{req:EncryptV1Request,res:EncryptResponse},encryptV2:{req:EncryptV2Request,res:EncryptResponse},saveInvites:{req:SaveInvitesRequest,res:SaveInvitesResponse},createInvite:{req:CreateInviteRequest,res:CreateInviteResponse},createAuthToken:{req:CreateAuthTokenRequest,res:Token},signDigest:{req:SignDigestRequest,res:Signature$5},getPublicKeyBundle:{req:null,res:PublicKeyBundle},getPrivateKeyBundle:{req:null,res:PrivateKeyBundleV1},saveV1Conversations:{req:SaveV1ConversationsRequest,res:SaveV1ConversationsResponse},getV1Conversations:{req:null,res:GetConversationsResponse},getV2Conversations:{req:null,res:GetConversationsResponse},getRefreshJob:{req:GetRefreshJobRequest,res:GetRefreshJobResponse},setRefreshJob:{req:SetRefeshJobRequest,res:SetRefreshJobResponse},selfEncrypt:{req:SelfEncryptRequest,res:SelfEncryptResponse},selfDecrypt:{req:SelfDecryptRequest,res:DecryptResponse},getPrivatePreferencesTopicIdentifier:{req:null,res:GetPrivatePreferencesTopicIdentifierResponse},getV2ConversationHmacKeys:{req:GetConversationHmacKeysRequest,res:GetConversationHmacKeysResponse}},vs={...gs,getKeystoreStatus:{req:GetKeystoreStatusRequest,res:GetKeystoreStatusResponse},initKeystore:{req:InitKeystoreRequest,res:InitKeystoreResponse}},{GetKeystoreStatusResponse_KeystoreStatus:bs}=i$3;class Es{constructor(er="local:http://localhost:8080",rr){this.snapId=er,this.snapVersion=rr}async newKeystore(er,rr,nr){if(!nr)throw new lt$8("No wallet provided");if(!await ps())throw new lt$8("MetaMask with Snaps not detected");const ir=await nr.getAddress(),sr=er.env,or=await ws(this.snapId,this.snapVersion);if(or&&!as(this.snapVersion,or.version)||await async function(ar,cr={}){var lr;await((lr=is$1())==null?void 0:lr.request({method:"wallet_requestSnaps",params:{[ar]:cr}}))}(this.snapId,this.snapVersion?{version:this.snapVersion}:{}),!await async function(ar,cr,lr){return await async function(dr,yr){const mr=await ls("getKeystoreStatus",fs$1,{walletAddress:dr.walletAddress},dr,yr);if([cs$1.KEYSTORE_STATUS_UNSPECIFIED,cs$1.UNRECOGNIZED].includes(mr.status))throw new Error("No status specified in response");return mr.status}({walletAddress:ar,env:cr},lr)===bs.KEYSTORE_STATUS_INITIALIZED}(ir,sr,this.snapId)){const ar=await async function(cr,lr,ur){if(cr.privateKeyOverride){const dr=He(cr.privateKeyOverride);if(!(dr instanceof Ge))throw new Error("Unsupported private key bundle version");return dr}if(!ur)throw new Error("No privateKeyOverride or wallet");return async function(dr,yr,mr){const wr=new rs;try{const xr=await wr.newKeystore(dr,yr,mr);return new Ge(await xr.getPrivateKeyBundle())}catch(xr){if(xr instanceof lt$8)return async function(Or,Tr,Ar){const Nr=new ns,Ur=await Nr.newKeystore(Or,Tr,Ar);return new Ge(await Ur.getPrivateKeyBundle())}(dr,yr,mr);throw xr}}(cr,lr,ur)}(er,rr,nr);await async function(cr,lr,ur){const dr=cr.identityKey.publicKey.walletSignatureAddress(),yr=await ls("initKeystore",ms$1,{v1:cr},{walletAddress:dr,env:lr},ur);if(yr.error)throw new ve(yr.error.code,yr.error.message)}(ar,sr,this.snapId)}return function(ar,cr,lr){const ur={},dr={walletAddress:ar,env:cr};for(const[yr,mr]of Object.entries(vs))ur[yr]=async wr=>mr.req?ls(yr,mr,wr,dr,lr):ls(yr,mr,void 0,dr,lr);return{...ur,getAccountAddress:async()=>ar}}(ir,sr,this.snapId)}}class Ks{async newKeystore(er){const{privateKeyOverride:rr}=er;if(!rr)throw new lt$8("No private key override provided");const nr=He(rr);if(nr instanceof Oe)throw new Error("V2 private key bundle found. Only V1 supported");return Xt.create(nr,await Qt(er,nr))}}function ks(tr){if(!tr)return null;if(function(er){return"type"in er&&(er.type==="walletClient"||er.type==="base")}(tr))return function(er){const{account:rr}=er;if(!rr||!rr.address)throw new Error("WalletClient is not configured");return{getAddress:async()=>rr.address,signMessage:async nr=>er.signMessage({message:typeof nr=="string"?nr:{raw:nr},account:rr})}}(tr);if(typeof tr.getAddress!="function")throw new Error("Unknown wallet type");return tr}function As(tr){if(tr===Compression$2.COMPRESSION_GZIP)return"gzip";if(tr===Compression$2.COMPRESSION_DEFLATE)return"deflate";throw new Error("unrecognized compression algorithm")}function Ss(tr,er=1024){let rr=0;return new ReadableStream({pull(nr){if(rr>=tr.length)return nr.close();let ir=rr+er;ir=ir<=tr.length?ir:tr.length,nr.enqueue(tr.subarray(rr,ir)),rr=ir}})}function Ts(tr,er){let rr=0;return new WritableStream({write(nr){const ir=rr+nr.length;if(ir>er)throw new Error("maximum output size exceeded");for(;tr.bytes.length<ir;)tr.bytes=Cs(tr.bytes,er);tr.bytes.set(nr,rr),rr=ir},close(){rr<tr.bytes.length&&(tr.bytes=tr.bytes.subarray(0,rr))}})}function Cs(tr,er){let rr=2*tr.length;rr>er&&(rr=er);const nr=new Uint8Array(rr);return nr.set(tr),nr}function Ps(tr){var rr,nr;let er;try{er=ContactBundle.decode(tr)}catch{const sr=PublicKeyBundle.decode(tr);er={v1:{keyBundle:new de(sr)},v2:void 0}}if((rr=er.v1)!=null&&rr.keyBundle)return new de(er.v1.keyBundle);if((nr=er.v2)!=null&&nr.keyBundle)return new ce(er.v2.keyBundle);throw new Error("unknown or invalid contact bundle")}function Is(tr){return tr instanceof de?ContactBundle.encode({v1:{keyBundle:tr},v2:void 0}).finish():ContactBundle.encode({v1:void 0,v2:{keyBundle:tr}}).finish()}class Bs{constructor(er,rr,nr){this.value=er,this.entryType=rr,this.permissionType=nr}get key(){return`${this.entryType}-${this.value}`}static fromAddress(er,rr="unknown"){return new Bs(er,"address",rr)}static fromGroupId(er,rr="unknown"){return new Bs(er,"groupId",rr)}static fromInboxId(er,rr="unknown"){return new Bs(er,"inboxId",rr)}}class Rs{constructor(er){this.entries=new Map,this.client=er}allow(er){const rr=Bs.fromAddress(er,"allowed");return this.entries.set(rr.key,"allowed"),rr}deny(er){const rr=Bs.fromAddress(er,"denied");return this.entries.set(rr.key,"denied"),rr}allowGroup(er){const rr=Bs.fromGroupId(er,"allowed");return this.entries.set(rr.key,"allowed"),rr}denyGroup(er){const rr=Bs.fromGroupId(er,"denied");return this.entries.set(rr.key,"denied"),rr}allowInboxId(er){const rr=Bs.fromInboxId(er,"allowed");return this.entries.set(rr.key,"allowed"),rr}denyInboxId(er){const rr=Bs.fromInboxId(er,"denied");return this.entries.set(rr.key,"denied"),rr}state(er){const rr=Bs.fromAddress(er);return this.entries.get(rr.key)??"unknown"}groupState(er){const rr=Bs.fromGroupId(er);return this.entries.get(rr.key)??"unknown"}inboxIdState(er){const rr=Bs.fromInboxId(er);return this.entries.get(rr.key)??"unknown"}async getIdentifier(){if(!this._identifier){const{identifier:er}=await this.client.keystore.getPrivatePreferencesTopicIdentifier();this._identifier=er}return this._identifier}async decodeMessages(er){const{responses:rr}=await this.client.keystore.selfDecrypt({requests:er.map(nr=>({payload:nr}))});return rr.reduce((nr,ir)=>{var sr;return(sr=ir.result)!=null&&sr.decrypted?nr.concat(PrivatePreferencesAction.decode(ir.result.decrypted)):nr},[])}processActions(er,rr){const nr=[];return er.forEach(ir=>{var sr,or,ar,cr,lr,ur;(sr=ir.allowAddress)==null||sr.walletAddresses.forEach(dr=>{nr.push(this.allow(dr))}),(or=ir.denyAddress)==null||or.walletAddresses.forEach(dr=>{nr.push(this.deny(dr))}),(ar=ir.allowGroup)==null||ar.groupIds.forEach(dr=>{nr.push(this.allowGroup(dr))}),(cr=ir.denyGroup)==null||cr.groupIds.forEach(dr=>{nr.push(this.denyGroup(dr))}),(lr=ir.allowInboxId)==null||lr.inboxIds.forEach(dr=>{nr.push(this.allowInboxId(dr))}),(ur=ir.denyInboxId)==null||ur.inboxIds.forEach(dr=>{nr.push(this.denyInboxId(dr))})}),rr&&(this.lastEntryTimestamp=ge$1(rr)),nr}async stream(er){const rr=await this.getIdentifier(),nr=Ie(rr);return ye.create(this.client,[nr],async ir=>{if(!ir.message)return;const sr=await this.decodeMessages([ir.message]);return this.processActions(sr,ir.timestampNs),sr[0]},void 0,er)}reset(){this.entries.clear()}async load(er){const rr=await this.getIdentifier(),nr=Ie(rr);let ir;const sr=await this.client.listEnvelopes(nr,async({message:ar,timestampNs:cr})=>(cr&&(ir=cr),ar),{startTime:er}),or=await this.decodeMessages(sr);return this.processActions(or,ir)}async publish(er){const rr=await this.getIdentifier(),nr=er.reduce((ur,dr)=>{var xr,Or,Tr;let yr,mr,wr;if(dr.permissionType==="unknown")return ur;switch(dr.entryType){case"address":yr=dr.permissionType==="allowed"?"allowAddress":"denyAddress",mr="walletAddresses",wr=((xr=ur[yr])==null?void 0:xr[mr])??[];break;case"groupId":yr=dr.permissionType==="allowed"?"allowGroup":"denyGroup",mr="groupIds",wr=((Or=ur[yr])==null?void 0:Or[mr])??[];break;case"inboxId":yr=dr.permissionType==="allowed"?"allowInboxId":"denyInboxId",mr="inboxIds",wr=((Tr=ur[yr])==null?void 0:Tr[mr])??[];break;default:return ur}return{...ur,[yr]:{[mr]:[...wr,dr.value]}}},{}),ir=PrivatePreferencesAction.encode(nr).finish(),{responses:sr}=await this.client.keystore.selfEncrypt({requests:[{payload:ir}]}),or=sr.reduce((ur,dr)=>{var yr,mr;return(yr=dr.result)!=null&&yr.encrypted?ur.concat((mr=dr.result)==null?void 0:mr.encrypted):ur},[]),ar=Ie(rr),cr=new Date,lr=or.map(ur=>({contentTopic:ar,message:ur,timestamp:cr}));await this.client.publishEnvelopes(lr),er.forEach(ur=>{this.entries.set(ur.key,ur.permissionType)})}}class Ns{constructor(er){this.addresses=new Set,this.consentList=new Rs(er),this.client=er,this.jobRunner=new at("user-preferences",er.keystore)}validateConsentSignature({signature:er,timestamp:rr},nr){const ir=Number(rr);if(!er||!ir||ir>Date.now()||ir<Date.now()-2592e6)return!1;const sr=J(er),or=createConsentMessage(nr,ir),ar=ee(hexToBytes$8(hashMessage(or)),sr);return(ar==null?void 0:ar.getEthereumAddress())===this.client.address}async loadConsentList(er){return this.jobRunner.run(async rr=>{const nr=await this.consentList.load(er??rr);try{const ir=(await this.client.conversations.list()).reduce((sr,or)=>or.consentProof&&this.consentState(or.peerAddress)==="unknown"&&this.validateConsentSignature(or.consentProof,or.peerAddress)?sr.concat(or.peerAddress):sr,[]);ir.length&&await this.client.contacts.allow(ir)}catch(ir){console.log(ir)}return nr})}async refreshConsentList(){return this.consentList.reset(),await this.jobRunner.resetLastRunTime(),this.loadConsentList()}async streamConsentList(er){return this.consentList.stream(er)}get lastConsentListEntryTimestamp(){return this.consentList.lastEntryTimestamp}setConsentListEntries(er){er.length&&(this.consentList.reset(),er.forEach(rr=>{rr.permissionType==="allowed"&&this.consentList.allow(rr.value),rr.permissionType==="denied"&&this.consentList.deny(rr.value)}))}isAllowed(er){return this.consentList.state(er)==="allowed"}isDenied(er){return this.consentList.state(er)==="denied"}isGroupAllowed(er){return this.consentList.groupState(er)==="allowed"}isGroupDenied(er){return this.consentList.groupState(er)==="denied"}isInboxAllowed(er){return this.consentList.inboxIdState(er)==="allowed"}isInboxDenied(er){return this.consentList.inboxIdState(er)==="denied"}consentState(er){return this.consentList.state(er)}groupConsentState(er){return this.consentList.groupState(er)}inboxConsentState(er){return this.consentList.inboxIdState(er)}async allow(er){await this.consentList.publish(er.map(rr=>Bs.fromAddress(rr,"allowed")))}async deny(er){await this.consentList.publish(er.map(rr=>Bs.fromAddress(rr,"denied")))}async allowGroups(er){await this.consentList.publish(er.map(rr=>Bs.fromGroupId(rr,"allowed")))}async denyGroups(er){await this.consentList.publish(er.map(rr=>Bs.fromGroupId(rr,"denied")))}async allowInboxes(er){await this.consentList.publish(er.map(rr=>Bs.fromInboxId(rr,"allowed")))}async denyInboxes(er){await this.consentList.publish(er.map(rr=>Bs.fromInboxId(rr,"denied")))}}var Ds;(function(tr){tr[tr.none=0]="none",tr[tr.xmtpTopicStore=1]="xmtpTopicStore"})(Ds||(Ds={}));const xs=Ds.none;class Ms{static createConfiguration(){return{type:xs,version:0}}constructor(er){this.configuration=er}get backupType(){return xs}}const _s=Ds.xmtpTopicStore;class Vs{static createConfiguration(er){return{type:_s,version:0,topic:"history-v0:"+er}}constructor(er){this.configuration=er}get backupType(){return _s}}async function Us(tr,er){const rr=await async function(nr,ir){let sr;switch((await ir()).type){case Ds.none:sr=Ms.createConfiguration();break;case Ds.xmtpTopicStore:sr=Vs.createConfiguration(nr)}return sr}(tr,er);switch(rr.type){case Ds.none:return new Ms(rr);case Ds.xmtpTopicStore:return new Vs(rr)}}const qs=104857600;class Os{constructor(er,rr,nr,ir){this.knownPublicKeyBundles=new Map,this.keystore=ir,this.publicKeyBundle=er,this.address=er.walletSignatureAddress(),this._conversations=new dt(this),this._codecs=new Map,this._maxContentSize=qs,this.apiClient=rr,this._backupClient=nr,this.contacts=new Ns(this)}get conversations(){return this._conversations}get backupType(){return this._backupClient.backupType}get signedPublicKeyBundle(){return ce.fromLegacyBundle(this.publicKeyBundle)}static async create(er,rr){const nr=ks(er),ir=function(dr){const yr={privateKeyOverride:void 0,env:"dev",apiUrl:void 0,codecs:[new r$5],maxContentSize:qs,persistConversations:!0,skipContactPublishing:!1,useSnaps:!1,basePersistence:typeof window<"u"&&window.document!==void 0?ht.create():ut$1.create(),disablePersistenceEncryption:!1,keystoreProviders:$s(),apiClientFactory:Gs};return dr!=null&&dr.codecs&&(dr.codecs=yr.codecs.concat(dr.codecs)),dr!=null&&dr.useSnaps&&(dr.keystoreProviders=[new Es("npm:@xmtp/snap","1.3.6"),...yr.keystoreProviders]),{...yr,...dr}}(rr),sr=ir.apiClientFactory(ir),or=await async function(dr,yr,mr){for(const wr of dr.keystoreProviders)try{return await wr.newKeystore(dr,yr,mr??void 0)}catch(xr){if(xr instanceof lt$8)continue;throw xr}throw new Error("No keystore providers available")}(ir,sr,nr),ar=new de(await or.getPublicKeyBundle()),cr=ar.walletSignatureAddress();sr.setAuthenticator(new je(or));const lr=await Os.setupBackupClient(cr,ir.env),ur=new Os(ar,sr,lr,or);return await ur.init(ir),ur}static async getKeys(er,rr){const nr=await Os.create(ks(er),rr),ir=await nr.keystore.getPrivateKeyBundle();return new Ge(ir).encode()}static isSnapsReady(){return ps()}static async setupBackupClient(er,rr){return Us(er,async()=>Promise.resolve({type:rr==="local"?Ds.xmtpTopicStore:Ds.none}))}async init(er){er.codecs.forEach(rr=>{this.registerCodec(rr)}),this._maxContentSize=er.maxContentSize,er.skipContactPublishing||await this.ensureUserContactPublished(er.publishLegacyContact)}async close(){}async ensureUserContactPublished(er=!1){const rr=await Hs(this.apiClient,this.address);rr&&rr instanceof ce&&this.signedPublicKeyBundle.equals(rr)||(await this.publishUserContact(!0),er||await this.publishUserContact(er))}async publishUserContact(er=!1){const rr=er?this.publicKeyBundle:this.signedPublicKeyBundle;await this.publishEnvelopes([{contentTopic:Se(this.address),message:Is(rr)}])}async getUserContact(er){er=getAddress(er);const rr=this.knownPublicKeyBundles.get(er);if(rr)return rr;const nr=await Hs(this.apiClient,er);return nr&&this.knownPublicKeyBundles.set(er,nr),nr}async getUserContacts(er){const rr=er.map(or=>getAddress(or)),nr=new Map,ir=[];for(const or of rr){const ar=this.knownPublicKeyBundles.get(or);ar?nr.set(or,ar):(nr.set(or,void 0),ir.push(or))}const sr=await Fs(this.apiClient,ir);for(let or=0;or<sr.length;or++){const ar=ir[or],cr=sr[or];nr.set(ar,cr),cr&&this.knownPublicKeyBundles.set(ar,cr)}return rr.map(or=>nr.get(or))}forgetContact(er){er=getAddress(er),this.knownPublicKeyBundles.delete(er)}async canMessage(er){try{return Array.isArray(er)?(await this.getUserContacts(er)).map(rr=>!!rr):await this.getUserContact(er)!==void 0}catch{return!1}}static async canMessage(er,rr){const nr=(rr==null?void 0:rr.apiUrl)||et[(rr==null?void 0:rr.env)||"dev"],ir=new ot(nr,{appVersion:rr==null?void 0:rr.appVersion});if(Array.isArray(er)){const sr=er.map(or=>getAddress(or));return(await Fs(ir,sr)).map(or=>!!or)}try{er=getAddress(er)}catch{return!1}return await Hs(ir,er)!==void 0}validateEnvelope(er){const rr=er.message;if(!er.contentTopic)throw new Error("Missing content topic");if(!rr||!rr.length)throw new Error("Cannot publish empty message")}async publishEnvelopes(er){for(const rr of er)this.validateEnvelope(rr);await this.apiClient.publish(er)}registerCodec(er){const rr=er.contentType,nr=`${rr.authorityId}/${rr.typeId}`;return this._codecs.set(nr,er),this}codecFor(er){const rr=`${er.authorityId}/${er.typeId}`,nr=this._codecs.get(rr);if(nr&&!(er.versionMajor>nr.contentType.versionMajor))return nr}async encodeContent(er,rr){const nr=(rr==null?void 0:rr.contentType)||t$6,ir=this.codecFor(nr);if(!ir)throw new Error("unknown content type "+nr);const sr=ir.encode(er,this),or=ir.fallback(er);return or&&(sr.fallback=or),typeof(rr==null?void 0:rr.compression)=="number"&&sr.content.length>=10&&(sr.compression=rr.compression),await async function(ar){if(ar.compression===void 0)return;const cr={bytes:new Uint8Array(ar.content.length/10)};await Ss(ar.content).pipeThrough(new CompressionStream(As(ar.compression))).pipeTo(Ts(cr,ar.content.length+1e3)),ar.content=cr.bytes}(sr),{payload:EncodedContent.encode(sr).finish(),shouldPush:ir.shouldPush(er)}}async decodeContent(er){const rr=EncodedContent.decode(er);if(!rr.type)throw new Error("missing content type");let nr;const ir=new t$7(rr.type);let sr;await async function(ar,cr){if(ar.compression===void 0)return;const lr={bytes:new Uint8Array(ar.content.length)};await Ss(ar.content).pipeThrough(new DecompressionStream(As(ar.compression))).pipeTo(Ts(lr,cr)),ar.content=lr.bytes}(rr,1e3);const or=this.codecFor(ir);return or?nr=or.decode(rr,this):sr=new Error("unknown content type "+ir),{content:nr,contentType:ir,error:sr,contentFallback:rr.fallback}}listInvitations(er){return this.listEnvelopes(Ce(this.address),async rr=>rr,er)}async listEnvelopes(er,rr,nr){nr||(nr={});const{startTime:ir,endTime:sr,limit:or}=nr,ar=await this.apiClient.query({contentTopic:er,startTime:ir,endTime:sr},{direction:nr.direction||SortDirection$2.SORT_DIRECTION_ASCENDING,limit:or}),cr=[];for(const lr of ar)if(lr.message)try{const ur=await rr(lr);cr.push(ur)}catch(ur){console.warn("Error in listEnvelopes mapper",ur)}return cr}listEnvelopesPaginated(er,rr,nr){return Ye(this.apiClient.queryIteratePages({contentTopic:er,startTime:nr==null?void 0:nr.startTime,endTime:nr==null?void 0:nr.endTime},{direction:nr==null?void 0:nr.direction,pageSize:(nr==null?void 0:nr.pageSize)||100}),rr)}}function Gs(tr){const er=tr.apiUrl||et[tr.env];return new ot(er,{appVersion:tr.appVersion})}async function Hs(tr,er){const rr=tr.queryIterator({contentTopic:Se(er)},{pageSize:5,direction:Ze.SORT_DIRECTION_DESCENDING});for await(const nr of rr){if(!nr.message)continue;const ir=Ps(nr.message);let sr;try{sr=await(ir==null?void 0:ir.walletSignatureAddress())}catch{sr=void 0}if((sr==null?void 0:sr.toLowerCase())===er.toLowerCase())return ir}}async function Fs(tr,er){const rr=er.map(Se),nr=await tr.batchQuery(rr.map(ir=>({contentTopic:ir,pageSize:5,direction:Ze.SORT_DIRECTION_DESCENDING})));return Promise.all(er.map(async(ir,sr)=>{const or=nr[sr];if(or){for(const ar of or)if(ar.message)try{const cr=Ps(ar.message),lr=await(cr==null?void 0:cr.walletSignatureAddress());if(ir.toLowerCase()===lr.toLowerCase())return cr;console.info("Received contact bundle with incorrect address")}catch(cr){console.info("Invalid contact bundle",cr)}}}))}function $s(){return[new Ks,new rs,new ns]}const Message=({authorImg:tr,name:er,content:rr,delay:nr})=>jsxRuntimeExports.jsxs("div",{className:"message anim",style:{"--delay":nr},children:[jsxRuntimeExports.jsxs("div",{className:"author-img__wrapper video-author video-p",children:[jsxRuntimeExports.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-check",children:jsxRuntimeExports.jsx("path",{d:"M20 6L9 17l-5-5"})}),jsxRuntimeExports.jsx("img",{className:"author-img",src:tr,alt:er})]}),jsxRuntimeExports.jsxs("div",{className:"msg-wrapper",children:[jsxRuntimeExports.jsx("div",{className:"msg__name video-p-name",children:er}),jsxRuntimeExports.jsx("div",{className:"msg__content video-p-sub",children:rr})]})]}),Chat=()=>{const[tr,er]=reactExports.useState([]),[rr,nr]=reactExports.useState(null),[ir,sr]=reactExports.useState(null),[or,ar]=reactExports.useState("");reactExports.useEffect(()=>{(async()=>{const ur=Wallet.createRandom();console.log("Wallet address: "+ur.address);const dr=await Os.create(ur,{env:"dev"});nr(dr);const yr="0x20B572bE48527a770479744AeC6fE5644F97678B";if(await dr.canMessage(yr)){const wr=await dr.conversations.newConversation(yr);sr(wr);for await(const xr of await wr.streamMessages())er(Or=>[...Or,{authorImg:"https://example.com/author-image.jpg",name:xr.senderAddress,content:xr.content,delay:"0s"}])}else console.error("Recipient is not XMTP enabled.")})()},[]);const cr=async()=>{ir&&or&&(await ir.send(or),er(lr=>[...lr,{authorImg:"https://your-profile-image-url.com",name:"You",content:or,delay:"0s"}]),ar(""))};return jsxRuntimeExports.jsxs("div",{className:"chat",children:[jsxRuntimeExports.jsxs("div",{className:"chat-header anim",children:["Live Chat",jsxRuntimeExports.jsxs("span",{children:[jsxRuntimeExports.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:jsxRuntimeExports.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M14.212 7.762c0 2.644-2.163 4.763-4.863 4.763-2.698 0-4.863-2.119-4.863-4.763C4.486 5.12 6.651 3 9.35 3c2.7 0 4.863 2.119 4.863 4.762zM2 17.917c0-2.447 3.386-3.06 7.35-3.06 3.985 0 7.349.634 7.349 3.083 0 2.448-3.386 3.06-7.35 3.06C5.364 21 2 20.367 2 17.917zM16.173 7.85a6.368 6.368 0 01-1.137 3.646c-.075.107-.008.252.123.275.182.03.369.048.56.052 1.898.048 3.601-1.148 4.072-2.95.697-2.675-1.35-5.077-3.957-5.077a4.16 4.16 0 00-.818.082c-.036.008-.075.025-.095.055-.025.04-.007.09.019.124a6.414 6.414 0 011.233 3.793zm3.144 5.853c1.276.245 2.115.742 2.462 1.467a2.107 2.107 0 010 1.878c-.531 1.123-2.245 1.485-2.912 1.578a.207.207 0 01-.234-.232c.34-3.113-2.367-4.588-3.067-4.927-.03-.017-.036-.04-.034-.055.002-.01.015-.025.038-.028 1.515-.028 3.145.176 3.747.32z"})}),"15,988 people"]})]}),jsxRuntimeExports.jsx("div",{className:"message-container",children:tr.map((lr,ur)=>jsxRuntimeExports.jsx(Message,{...lr},ur))}),jsxRuntimeExports.jsxs("div",{className:"chat-footer anim",style:{"--delay":".1s"},children:[jsxRuntimeExports.jsx("input",{type:"text",placeholder:"Write your message",value:or,onChange:lr=>ar(lr.target.value)}),jsxRuntimeExports.jsx("button",{onClick:cr,children:"Send"})]})]})},Votes=()=>{const[tr,er]=reactExports.useState(30),[rr,nr]=reactExports.useState({yes:20,no:10}),ir=or=>{er(tr+1),nr({...rr,[or]:rr[or]+1})},sr=or=>tr===0?0:Math.round(or/tr*100);return jsxRuntimeExports.jsxs("div",{className:"chat",children:[jsxRuntimeExports.jsxs("div",{className:"chat-header anim",children:["Daily Votes",jsxRuntimeExports.jsxs("span",{children:[jsxRuntimeExports.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:jsxRuntimeExports.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M14.212 7.762c0 2.644-2.163 4.763-4.863 4.763-2.698 0-4.863-2.119-4.863-4.763C4.486 5.12 6.651 3 9.35 3c2.7 0 4.863 2.119 4.863 4.762zM2 17.917c0-2.447 3.386-3.06 7.35-3.06 3.985 0 7.349.634 7.349 3.083 0 2.448-3.386 3.06-7.35 3.06C5.364 21 2 20.367 2 17.917zM16.173 7.85a6.368 6.368 0 01-1.137 3.646c-.075.107-.008.252.123.275.182.03.369.048.56.052 1.898.048 3.601-1.148 4.072-2.95.697-2.675-1.35-5.077-3.957-5.077a4.16 4.16 0 00-.818.082c-.036.008-.075.025-.095.055-.025.04-.007.09.019.124a6.414 6.414 0 011.233 3.793zm3.144 5.853c1.276.245 2.115.742 2.462 1.467a2.107 2.107 0 010 1.878c-.531 1.123-2.245 1.485-2.912 1.578a.207.207 0 01-.234-.232c.34-3.113-2.367-4.588-3.067-4.927-.03-.017-.036-.04-.034-.055.002-.01.015-.025.038-.028 1.515-.028 3.145.176 3.747.32z"})}),tr]})]}),jsxRuntimeExports.jsx("div",{className:"question",children:jsxRuntimeExports.jsx("p",{children:"Sign contract with WestHan?"})}),jsxRuntimeExports.jsx("div",{className:"poll",children:jsxRuntimeExports.jsxs("div",{className:"poll-content",children:[jsxRuntimeExports.jsxs("div",{className:"ans1",children:[jsxRuntimeExports.jsxs("h4",{className:"percentage-1",children:[sr(rr.yes),"%"]}),jsxRuntimeExports.jsx("div",{className:"line1 bar",style:{width:`${sr(rr.yes)}%`}}),jsxRuntimeExports.jsx("h3",{className:"ans-text",onClick:()=>ir("yes"),children:"YES"})]}),jsxRuntimeExports.jsxs("div",{className:"ans2",children:[jsxRuntimeExports.jsxs("h4",{className:"percentage-2",children:[sr(rr.no),"%"]}),jsxRuntimeExports.jsx("div",{className:"line2 bar",style:{width:`${sr(rr.no)}%`}}),jsxRuntimeExports.jsx("h3",{className:"ans-text",onClick:()=>ir("no"),children:"NO"})]})]})})]})},Posts=({posts:tr,isLocked:er})=>!tr||tr.length===0?jsxRuntimeExports.jsx("div",{children:"No posts available."}):jsxRuntimeExports.jsxs("div",{style:{"--delay":".2s"},className:`posts-container anim ${er?"blurred":""}`,children:[er&&jsxRuntimeExports.jsxs("div",{className:"overlay",children:[jsxRuntimeExports.jsx("div",{className:"lock-icon",children:""}),jsxRuntimeExports.jsx("div",{className:"lock-message",children:"Join to "})]}),tr.map((rr,nr)=>jsxRuntimeExports.jsxs("div",{className:"post",children:[jsxRuntimeExports.jsx("h3",{className:"post-title",children:rr.title}),jsxRuntimeExports.jsx("p",{className:"post-content",children:rr.content})]},nr))]}),DetailsContainer=({selectedVideo:tr,onBack:er})=>{if(!tr)return null;const rr=[{title:"Hello World",content:"Today is the day when I...."},{title:"Post 2",content:"This is the content of post 2."},{title:"Post 3",content:"This is the content of post 3."}];return jsxRuntimeExports.jsx("div",{className:"details-container",children:jsxRuntimeExports.jsxs("div",{className:"video-and-chat",children:[jsxRuntimeExports.jsxs("div",{className:"PlayerALL",children:[jsxRuntimeExports.jsx(Player,{selectedVideo:tr}),jsxRuntimeExports.jsx(Posts,{posts:rr,isLocked:!0})]}),jsxRuntimeExports.jsxs("div",{className:"chat-and-votes",children:[jsxRuntimeExports.jsx(Votes,{}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx(Chat,{})]})]})})},Header$1=({onLogoClick:tr,isLoggedIn:er,onLoginClick:rr,logout:nr})=>(reactExports.useState(!1),jsxRuntimeExports.jsxs("div",{className:"header",children:[jsxRuntimeExports.jsx("div",{className:"search-bar",children:jsxRuntimeExports.jsx("input",{type:"text",placeholder:"Search"})}),jsxRuntimeExports.jsxs("div",{className:"user-settings",children:[jsxRuntimeExports.jsx("div",{className:"user-name",style:{cursor:"pointer",border:"1.5px solid white",padding:"7px 20px",borderRadius:"13px",background:"none",color:"white"},onClick:rr,children:"Wallet"}),er&&jsxRuntimeExports.jsx("div",{className:"logout-button",style:{cursor:"pointer",border:"1.5px solid white",padding:"7px 20px",borderRadius:"13px",background:"none",color:"white"},onClick:nr,children:"Logout"})]})]})),Main=({provider:tr,walletServicesPlugin:er,logout:rr})=>{const[nr,ir]=reactExports.useState("discover"),[sr,or]=reactExports.useState(null),[ar,cr]=reactExports.useState(!1),[lr,ur]=reactExports.useState(!1);reactExports.useEffect(()=>{tr&&ur(!0)},[tr]);const dr=Or=>{or(Or),cr(!0)},yr=()=>{cr(!1)},mr=()=>{cr(!1),ir("discover")},wr=()=>{cr(!1),ir("discover")},xr=async()=>{if(er)try{await er.showWalletUi()}catch(Or){console.error("Error showing Wallet UI:",Or)}else console.log("WalletServicesPlugin is not available")};return jsxRuntimeExports.jsxs("div",{className:"container",children:[jsxRuntimeExports.jsx(Sidebar,{activeSection:nr,setActiveSection:mr}),jsxRuntimeExports.jsxs("div",{className:"wrapper",children:[jsxRuntimeExports.jsx(Header$1,{onLogoClick:wr,isLoggedIn:lr,onLoginClick:xr,logout:rr}),ar?jsxRuntimeExports.jsx(DetailsContainer,{selectedVideo:sr,onBack:yr}):jsxRuntimeExports.jsx(MainContainer,{selectedVideo:sr,setSelectedVideo:dr})]})]})},Login=({onLogin:tr})=>jsxRuntimeExports.jsxs("div",{className:"login-container",children:[jsxRuntimeExports.jsx("div",{className:"login-text",children:"Follow your Athletes."}),jsxRuntimeExports.jsx("button",{onClick:tr,className:"login-button",children:"Login"})]});function _typeof(tr){"@babel/helpers - typeof";return _typeof=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(er){return typeof er}:function(er){return er&&typeof Symbol=="function"&&er.constructor===Symbol&&er!==Symbol.prototype?"symbol":typeof er},_typeof(tr)}function toPrimitive(tr,er){if(_typeof(tr)!="object"||!tr)return tr;var rr=tr[Symbol.toPrimitive];if(rr!==void 0){var nr=rr.call(tr,er||"default");if(_typeof(nr)!="object")return nr;throw new TypeError("@@toPrimitive must return a primitive value.")}return(er==="string"?String:Number)(tr)}function toPropertyKey(tr){var er=toPrimitive(tr,"string");return _typeof(er)=="symbol"?er:er+""}function _defineProperty(tr,er,rr){return(er=toPropertyKey(er))in tr?Object.defineProperty(tr,er,{value:rr,enumerable:!0,configurable:!0,writable:!0}):tr[er]=rr,tr}function ownKeys(tr,er){var rr=Object.keys(tr);if(Object.getOwnPropertySymbols){var nr=Object.getOwnPropertySymbols(tr);er&&(nr=nr.filter(function(ir){return Object.getOwnPropertyDescriptor(tr,ir).enumerable})),rr.push.apply(rr,nr)}return rr}function _objectSpread2(tr){for(var er=1;er<arguments.length;er++){var rr=arguments[er]!=null?arguments[er]:{};er%2?ownKeys(Object(rr),!0).forEach(function(nr){_defineProperty(tr,nr,rr[nr])}):Object.getOwnPropertyDescriptors?Object.defineProperties(tr,Object.getOwnPropertyDescriptors(rr)):ownKeys(Object(rr)).forEach(function(nr){Object.defineProperty(tr,nr,Object.getOwnPropertyDescriptor(rr,nr))})}return tr}var browser$3={exports:{}},stream={exports:{}},primordials={ArrayIsArray(tr){return Array.isArray(tr)},ArrayPrototypeIncludes(tr,er){return tr.includes(er)},ArrayPrototypeIndexOf(tr,er){return tr.indexOf(er)},ArrayPrototypeJoin(tr,er){return tr.join(er)},ArrayPrototypeMap(tr,er){return tr.map(er)},ArrayPrototypePop(tr,er){return tr.pop(er)},ArrayPrototypePush(tr,er){return tr.push(er)},ArrayPrototypeSlice(tr,er,rr){return tr.slice(er,rr)},Error,FunctionPrototypeCall(tr,er,...rr){return tr.call(er,...rr)},FunctionPrototypeSymbolHasInstance(tr,er){return Function.prototype[Symbol.hasInstance].call(tr,er)},MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties(tr,er){return Object.defineProperties(tr,er)},ObjectDefineProperty(tr,er,rr){return Object.defineProperty(tr,er,rr)},ObjectGetOwnPropertyDescriptor(tr,er){return Object.getOwnPropertyDescriptor(tr,er)},ObjectKeys(tr){return Object.keys(tr)},ObjectSetPrototypeOf(tr,er){return Object.setPrototypeOf(tr,er)},Promise,PromisePrototypeCatch(tr,er){return tr.catch(er)},PromisePrototypeThen(tr,er,rr){return tr.then(er,rr)},PromiseReject(tr){return Promise.reject(tr)},PromiseResolve(tr){return Promise.resolve(tr)},ReflectApply:Reflect.apply,RegExpPrototypeTest(tr,er){return tr.test(er)},SafeSet:Set,String,StringPrototypeSlice(tr,er,rr){return tr.slice(er,rr)},StringPrototypeToLowerCase(tr){return tr.toLowerCase()},StringPrototypeToUpperCase(tr){return tr.toUpperCase()},StringPrototypeTrim(tr){return tr.trim()},Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,SymbolDispose:Symbol.dispose||Symbol("Symbol.dispose"),SymbolAsyncDispose:Symbol.asyncDispose||Symbol("Symbol.asyncDispose"),TypedArrayPrototypeSet(tr,er,rr){return tr.set(er,rr)},Boolean,Uint8Array},util$8={exports:{}},browser$2={exports:{}},hasRequiredBrowser;function requireBrowser(){if(hasRequiredBrowser)return browser$2.exports;hasRequiredBrowser=1;const{AbortController:tr,AbortSignal:er}=typeof self<"u"?self:typeof window<"u"?window:void 0;return browser$2.exports=tr,browser$2.exports.AbortSignal=er,browser$2.exports.default=tr,browser$2.exports}var events={exports:{}},R=typeof Reflect=="object"?Reflect:null,ReflectApply=R&&typeof R.apply=="function"?R.apply:function tr(er,rr,nr){return Function.prototype.apply.call(er,rr,nr)},ReflectOwnKeys;R&&typeof R.ownKeys=="function"?ReflectOwnKeys=R.ownKeys:Object.getOwnPropertySymbols?ReflectOwnKeys=function(er){return Object.getOwnPropertyNames(er).concat(Object.getOwnPropertySymbols(er))}:ReflectOwnKeys=function(er){return Object.getOwnPropertyNames(er)};function ProcessEmitWarning(tr){console&&console.warn&&console.warn(tr)}var NumberIsNaN$2=Number.isNaN||function tr(er){return er!==er};function EventEmitter$1(){EventEmitter$1.init.call(this)}events.exports=EventEmitter$1;events.exports.once=once$9;EventEmitter$1.EventEmitter=EventEmitter$1;EventEmitter$1.prototype._events=void 0;EventEmitter$1.prototype._eventsCount=0;EventEmitter$1.prototype._maxListeners=void 0;var defaultMaxListeners=10;function checkListener(tr){if(typeof tr!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof tr)}Object.defineProperty(EventEmitter$1,"defaultMaxListeners",{enumerable:!0,get:function(){return defaultMaxListeners},set:function(tr){if(typeof tr!="number"||tr<0||NumberIsNaN$2(tr))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+tr+".");defaultMaxListeners=tr}});EventEmitter$1.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};EventEmitter$1.prototype.setMaxListeners=function tr(er){if(typeof er!="number"||er<0||NumberIsNaN$2(er))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+er+".");return this._maxListeners=er,this};function _getMaxListeners(tr){return tr._maxListeners===void 0?EventEmitter$1.defaultMaxListeners:tr._maxListeners}EventEmitter$1.prototype.getMaxListeners=function tr(){return _getMaxListeners(this)};EventEmitter$1.prototype.emit=function tr(er){for(var rr=[],nr=1;nr<arguments.length;nr++)rr.push(arguments[nr]);var ir=er==="error",sr=this._events;if(sr!==void 0)ir=ir&&sr.error===void 0;else if(!ir)return!1;if(ir){var or;if(rr.length>0&&(or=rr[0]),or instanceof Error)throw or;var ar=new Error("Unhandled error."+(or?" ("+or.message+")":""));throw ar.context=or,ar}var cr=sr[er];if(cr===void 0)return!1;if(typeof cr=="function")ReflectApply(cr,this,rr);else for(var lr=cr.length,ur=arrayClone$1(cr,lr),nr=0;nr<lr;++nr)ReflectApply(ur[nr],this,rr);return!0};function _addListener(tr,er,rr,nr){var ir,sr,or;if(checkListener(rr),sr=tr._events,sr===void 0?(sr=tr._events=Object.create(null),tr._eventsCount=0):(sr.newListener!==void 0&&(tr.emit("newListener",er,rr.listener?rr.listener:rr),sr=tr._events),or=sr[er]),or===void 0)or=sr[er]=rr,++tr._eventsCount;else if(typeof or=="function"?or=sr[er]=nr?[rr,or]:[or,rr]:nr?or.unshift(rr):or.push(rr),ir=_getMaxListeners(tr),ir>0&&or.length>ir&&!or.warned){or.warned=!0;var ar=new Error("Possible EventEmitter memory leak detected. "+or.length+" "+String(er)+" listeners added. Use emitter.setMaxListeners() to increase limit");ar.name="MaxListenersExceededWarning",ar.emitter=tr,ar.type=er,ar.count=or.length,ProcessEmitWarning(ar)}return tr}EventEmitter$1.prototype.addListener=function tr(er,rr){return _addListener(this,er,rr,!1)};EventEmitter$1.prototype.on=EventEmitter$1.prototype.addListener;EventEmitter$1.prototype.prependListener=function tr(er,rr){return _addListener(this,er,rr,!0)};function onceWrapper(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function _onceWrap(tr,er,rr){var nr={fired:!1,wrapFn:void 0,target:tr,type:er,listener:rr},ir=onceWrapper.bind(nr);return ir.listener=rr,nr.wrapFn=ir,ir}EventEmitter$1.prototype.once=function tr(er,rr){return checkListener(rr),this.on(er,_onceWrap(this,er,rr)),this};EventEmitter$1.prototype.prependOnceListener=function tr(er,rr){return checkListener(rr),this.prependListener(er,_onceWrap(this,er,rr)),this};EventEmitter$1.prototype.removeListener=function tr(er,rr){var nr,ir,sr,or,ar;if(checkListener(rr),ir=this._events,ir===void 0)return this;if(nr=ir[er],nr===void 0)return this;if(nr===rr||nr.listener===rr)--this._eventsCount===0?this._events=Object.create(null):(delete ir[er],ir.removeListener&&this.emit("removeListener",er,nr.listener||rr));else if(typeof nr!="function"){for(sr=-1,or=nr.length-1;or>=0;or--)if(nr[or]===rr||nr[or].listener===rr){ar=nr[or].listener,sr=or;break}if(sr<0)return this;sr===0?nr.shift():spliceOne(nr,sr),nr.length===1&&(ir[er]=nr[0]),ir.removeListener!==void 0&&this.emit("removeListener",er,ar||rr)}return this};EventEmitter$1.prototype.off=EventEmitter$1.prototype.removeListener;EventEmitter$1.prototype.removeAllListeners=function tr(er){var rr,nr,ir;if(nr=this._events,nr===void 0)return this;if(nr.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):nr[er]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete nr[er]),this;if(arguments.length===0){var sr=Object.keys(nr),or;for(ir=0;ir<sr.length;++ir)or=sr[ir],or!=="removeListener"&&this.removeAllListeners(or);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(rr=nr[er],typeof rr=="function")this.removeListener(er,rr);else if(rr!==void 0)for(ir=rr.length-1;ir>=0;ir--)this.removeListener(er,rr[ir]);return this};function _listeners(tr,er,rr){var nr=tr._events;if(nr===void 0)return[];var ir=nr[er];return ir===void 0?[]:typeof ir=="function"?rr?[ir.listener||ir]:[ir]:rr?unwrapListeners(ir):arrayClone$1(ir,ir.length)}EventEmitter$1.prototype.listeners=function tr(er){return _listeners(this,er,!0)};EventEmitter$1.prototype.rawListeners=function tr(er){return _listeners(this,er,!1)};EventEmitter$1.listenerCount=function(tr,er){return typeof tr.listenerCount=="function"?tr.listenerCount(er):listenerCount.call(tr,er)};EventEmitter$1.prototype.listenerCount=listenerCount;function listenerCount(tr){var er=this._events;if(er!==void 0){var rr=er[tr];if(typeof rr=="function")return 1;if(rr!==void 0)return rr.length}return 0}EventEmitter$1.prototype.eventNames=function tr(){return this._eventsCount>0?ReflectOwnKeys(this._events):[]};function arrayClone$1(tr,er){for(var rr=new Array(er),nr=0;nr<er;++nr)rr[nr]=tr[nr];return rr}function spliceOne(tr,er){for(;er+1<tr.length;er++)tr[er]=tr[er+1];tr.pop()}function unwrapListeners(tr){for(var er=new Array(tr.length),rr=0;rr<er.length;++rr)er[rr]=tr[rr].listener||tr[rr];return er}function once$9(tr,er){return new Promise(function(rr,nr){function ir(or){tr.removeListener(er,sr),nr(or)}function sr(){typeof tr.removeListener=="function"&&tr.removeListener("error",ir),rr([].slice.call(arguments))}eventTargetAgnosticAddListener(tr,er,sr,{once:!0}),er!=="error"&&addErrorHandlerIfEventEmitter(tr,ir,{once:!0})})}function addErrorHandlerIfEventEmitter(tr,er,rr){typeof tr.on=="function"&&eventTargetAgnosticAddListener(tr,"error",er,rr)}function eventTargetAgnosticAddListener(tr,er,rr,nr){if(typeof tr.on=="function")nr.once?tr.once(er,rr):tr.on(er,rr);else if(typeof tr.addEventListener=="function")tr.addEventListener(er,function ir(sr){nr.once&&tr.removeEventListener(er,ir),rr(sr)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof tr)}var eventsExports=events.exports;(function(tr){const er=buffer$1,{kResistStopPropagation:rr,SymbolDispose:nr}=primordials,ir=globalThis.AbortSignal||requireBrowser().AbortSignal,sr=globalThis.AbortController||requireBrowser().AbortController,or=Object.getPrototypeOf(async function(){}).constructor,ar=globalThis.Blob||er.Blob,cr=typeof ar<"u"?function(mr){return mr instanceof ar}:function(mr){return!1},lr=(yr,mr)=>{if(yr!==void 0&&(yr===null||typeof yr!="object"||!("aborted"in yr)))throw new ERR_INVALID_ARG_TYPE(mr,"AbortSignal",yr)},ur=(yr,mr)=>{if(typeof yr!="function")throw new ERR_INVALID_ARG_TYPE(mr,"Function",yr)};class dr extends Error{constructor(mr){if(!Array.isArray(mr))throw new TypeError(`Expected input to be an Array, got ${typeof mr}`);let wr="";for(let xr=0;xr<mr.length;xr++)wr+=`    ${mr[xr].stack}
`;super(wr),this.name="AggregateError",this.errors=mr}}tr.exports={AggregateError:dr,kEmptyObject:Object.freeze({}),once(yr){let mr=!1;return function(...wr){mr||(mr=!0,yr.apply(this,wr))}},createDeferredPromise:function(){let yr,mr;return{promise:new Promise((xr,Or)=>{yr=xr,mr=Or}),resolve:yr,reject:mr}},promisify(yr){return new Promise((mr,wr)=>{yr((xr,...Or)=>xr?wr(xr):mr(...Or))})},debuglog(){return function(){}},format(yr,...mr){return yr.replace(/%([sdifj])/g,function(...[wr,xr]){const Or=mr.shift();return xr==="f"?Or.toFixed(6):xr==="j"?JSON.stringify(Or):xr==="s"&&typeof Or=="object"?`${Or.constructor!==Object?Or.constructor.name:""} {}`.trim():Or.toString()})},inspect(yr){switch(typeof yr){case"string":if(yr.includes("'"))if(yr.includes('"')){if(!yr.includes("`")&&!yr.includes("${"))return`\`${yr}\``}else return`"${yr}"`;return`'${yr}'`;case"number":return isNaN(yr)?"NaN":Object.is(yr,-0)?String(yr):yr;case"bigint":return`${String(yr)}n`;case"boolean":case"undefined":return String(yr);case"object":return"{}"}},types:{isAsyncFunction(yr){return yr instanceof or},isArrayBufferView(yr){return ArrayBuffer.isView(yr)}},isBlob:cr,deprecate(yr,mr){return yr},addAbortListener:eventsExports.addAbortListener||function(mr,wr){if(mr===void 0)throw new ERR_INVALID_ARG_TYPE("signal","AbortSignal",mr);lr(mr,"signal"),ur(wr,"listener");let xr;return mr.aborted?queueMicrotask(()=>wr()):(mr.addEventListener("abort",wr,{__proto__:null,once:!0,[rr]:!0}),xr=()=>{mr.removeEventListener("abort",wr)}),{__proto__:null,[nr](){var Or;(Or=xr)===null||Or===void 0||Or()}}},AbortSignalAny:ir.any||function(mr){if(mr.length===1)return mr[0];const wr=new sr,xr=()=>wr.abort();return mr.forEach(Or=>{lr(Or,"signals"),Or.addEventListener("abort",xr,{once:!0})}),wr.signal.addEventListener("abort",()=>{mr.forEach(Or=>Or.removeEventListener("abort",xr))},{once:!0}),wr.signal}},tr.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")})(util$8);var utilExports=util$8.exports,operators={};const{format:format$1,inspect:inspect$1,AggregateError:CustomAggregateError}=utilExports,AggregateError$1=globalThis.AggregateError||CustomAggregateError,kIsNodeError=Symbol("kIsNodeError"),kTypes=["string","function","number","object","Function","Object","boolean","bigint","symbol"],classRegExp=/^([A-Z][a-z0-9]*)+$/,nodeInternalPrefix="__node_internal_",codes$2={};function assert$a(tr,er){if(!tr)throw new codes$2.ERR_INTERNAL_ASSERTION(er)}function addNumericalSeparator(tr){let er="",rr=tr.length;const nr=tr[0]==="-"?1:0;for(;rr>=nr+4;rr-=3)er=`_${tr.slice(rr-3,rr)}${er}`;return`${tr.slice(0,rr)}${er}`}function getMessage(tr,er,rr){if(typeof er=="function")return assert$a(er.length<=rr.length,`Code: ${tr}; The provided arguments length (${rr.length}) does not match the required ones (${er.length}).`),er(...rr);const nr=(er.match(/%[dfijoOs]/g)||[]).length;return assert$a(nr===rr.length,`Code: ${tr}; The provided arguments length (${rr.length}) does not match the required ones (${nr}).`),rr.length===0?er:format$1(er,...rr)}function E$1(tr,er,rr){rr||(rr=Error);class nr extends rr{constructor(...sr){super(getMessage(tr,er,sr))}toString(){return`${this.name} [${tr}]: ${this.message}`}}Object.defineProperties(nr.prototype,{name:{value:rr.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${tr}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),nr.prototype.code=tr,nr.prototype[kIsNodeError]=!0,codes$2[tr]=nr}function hideStackFrames$1(tr){const er=nodeInternalPrefix+tr.name;return Object.defineProperty(tr,"name",{value:er}),tr}function aggregateTwoErrors$2(tr,er){if(tr&&er&&tr!==er){if(Array.isArray(er.errors))return er.errors.push(tr),er;const rr=new AggregateError$1([er,tr],er.message);return rr.code=er.code,rr}return tr||er}let AbortError$5=class extends Error{constructor(er="The operation was aborted",rr=void 0){if(rr!==void 0&&typeof rr!="object")throw new codes$2.ERR_INVALID_ARG_TYPE("options","Object",rr);super(er,rr),this.code="ABORT_ERR",this.name="AbortError"}};E$1("ERR_ASSERTION","%s",Error);E$1("ERR_INVALID_ARG_TYPE",(tr,er,rr)=>{assert$a(typeof tr=="string","'name' must be a string"),Array.isArray(er)||(er=[er]);let nr="The ";tr.endsWith(" argument")?nr+=`${tr} `:nr+=`"${tr}" ${tr.includes(".")?"property":"argument"} `,nr+="must be ";const ir=[],sr=[],or=[];for(const cr of er)assert$a(typeof cr=="string","All expected entries have to be of type string"),kTypes.includes(cr)?ir.push(cr.toLowerCase()):classRegExp.test(cr)?sr.push(cr):(assert$a(cr!=="object",'The value "object" should be written as "Object"'),or.push(cr));if(sr.length>0){const cr=ir.indexOf("object");cr!==-1&&(ir.splice(ir,cr,1),sr.push("Object"))}if(ir.length>0){switch(ir.length){case 1:nr+=`of type ${ir[0]}`;break;case 2:nr+=`one of type ${ir[0]} or ${ir[1]}`;break;default:{const cr=ir.pop();nr+=`one of type ${ir.join(", ")}, or ${cr}`}}(sr.length>0||or.length>0)&&(nr+=" or ")}if(sr.length>0){switch(sr.length){case 1:nr+=`an instance of ${sr[0]}`;break;case 2:nr+=`an instance of ${sr[0]} or ${sr[1]}`;break;default:{const cr=sr.pop();nr+=`an instance of ${sr.join(", ")}, or ${cr}`}}or.length>0&&(nr+=" or ")}switch(or.length){case 0:break;case 1:or[0].toLowerCase()!==or[0]&&(nr+="an "),nr+=`${or[0]}`;break;case 2:nr+=`one of ${or[0]} or ${or[1]}`;break;default:{const cr=or.pop();nr+=`one of ${or.join(", ")}, or ${cr}`}}if(rr==null)nr+=`. Received ${rr}`;else if(typeof rr=="function"&&rr.name)nr+=`. Received function ${rr.name}`;else if(typeof rr=="object"){var ar;if((ar=rr.constructor)!==null&&ar!==void 0&&ar.name)nr+=`. Received an instance of ${rr.constructor.name}`;else{const cr=inspect$1(rr,{depth:-1});nr+=`. Received ${cr}`}}else{let cr=inspect$1(rr,{colors:!1});cr.length>25&&(cr=`${cr.slice(0,25)}...`),nr+=`. Received type ${typeof rr} (${cr})`}return nr},TypeError);E$1("ERR_INVALID_ARG_VALUE",(tr,er,rr="is invalid")=>{let nr=inspect$1(er);return nr.length>128&&(nr=nr.slice(0,128)+"..."),`The ${tr.includes(".")?"property":"argument"} '${tr}' ${rr}. Received ${nr}`},TypeError);E$1("ERR_INVALID_RETURN_VALUE",(tr,er,rr)=>{var nr;const ir=rr!=null&&(nr=rr.constructor)!==null&&nr!==void 0&&nr.name?`instance of ${rr.constructor.name}`:`type ${typeof rr}`;return`Expected ${tr} to be returned from the "${er}" function but got ${ir}.`},TypeError);E$1("ERR_MISSING_ARGS",(...tr)=>{assert$a(tr.length>0,"At least one arg needs to be specified");let er;const rr=tr.length;switch(tr=(Array.isArray(tr)?tr:[tr]).map(nr=>`"${nr}"`).join(" or "),rr){case 1:er+=`The ${tr[0]} argument`;break;case 2:er+=`The ${tr[0]} and ${tr[1]} arguments`;break;default:{const nr=tr.pop();er+=`The ${tr.join(", ")}, and ${nr} arguments`}break}return`${er} must be specified`},TypeError);E$1("ERR_OUT_OF_RANGE",(tr,er,rr)=>{assert$a(er,'Missing "range" argument');let nr;return Number.isInteger(rr)&&Math.abs(rr)>2**32?nr=addNumericalSeparator(String(rr)):typeof rr=="bigint"?(nr=String(rr),(rr>2n**32n||rr<-(2n**32n))&&(nr=addNumericalSeparator(nr)),nr+="n"):nr=inspect$1(rr),`The value of "${tr}" is out of range. It must be ${er}. Received ${nr}`},RangeError);E$1("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error);E$1("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error);E$1("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error);E$1("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error);E$1("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error);E$1("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);E$1("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error);E$1("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error);E$1("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error);E$1("ERR_STREAM_WRITE_AFTER_END","write after end",Error);E$1("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError);var errors$5={AbortError:AbortError$5,aggregateTwoErrors:hideStackFrames$1(aggregateTwoErrors$2),hideStackFrames:hideStackFrames$1,codes:codes$2};const{ArrayIsArray:ArrayIsArray$2,ArrayPrototypeIncludes,ArrayPrototypeJoin,ArrayPrototypeMap,NumberIsInteger:NumberIsInteger$1,NumberIsNaN:NumberIsNaN$1,NumberMAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER,NumberParseInt,ObjectPrototypeHasOwnProperty,RegExpPrototypeExec,String:String$1,StringPrototypeToUpperCase,StringPrototypeTrim}=primordials,{hideStackFrames,codes:{ERR_SOCKET_BAD_PORT,ERR_INVALID_ARG_TYPE:ERR_INVALID_ARG_TYPE$5,ERR_INVALID_ARG_VALUE:ERR_INVALID_ARG_VALUE$3,ERR_OUT_OF_RANGE:ERR_OUT_OF_RANGE$1,ERR_UNKNOWN_SIGNAL}}=errors$5,{normalizeEncoding:normalizeEncoding$1}=utilExports,{isAsyncFunction,isArrayBufferView}=utilExports.types,signals={};function isInt32(tr){return tr===(tr|0)}function isUint32(tr){return tr===tr>>>0}const octalReg=/^[0-7]+$/,modeDesc="must be a 32-bit unsigned integer or an octal string";function parseFileMode(tr,er,rr){if(typeof tr>"u"&&(tr=rr),typeof tr=="string"){if(RegExpPrototypeExec(octalReg,tr)===null)throw new ERR_INVALID_ARG_VALUE$3(er,tr,modeDesc);tr=NumberParseInt(tr,8)}return validateUint32(tr,er),tr}const validateInteger$2=hideStackFrames((tr,er,rr=NumberMIN_SAFE_INTEGER,nr=NumberMAX_SAFE_INTEGER)=>{if(typeof tr!="number")throw new ERR_INVALID_ARG_TYPE$5(er,"number",tr);if(!NumberIsInteger$1(tr))throw new ERR_OUT_OF_RANGE$1(er,"an integer",tr);if(tr<rr||tr>nr)throw new ERR_OUT_OF_RANGE$1(er,`>= ${rr} && <= ${nr}`,tr)}),validateInt32=hideStackFrames((tr,er,rr=-2147483648,nr=2147483647)=>{if(typeof tr!="number")throw new ERR_INVALID_ARG_TYPE$5(er,"number",tr);if(!NumberIsInteger$1(tr))throw new ERR_OUT_OF_RANGE$1(er,"an integer",tr);if(tr<rr||tr>nr)throw new ERR_OUT_OF_RANGE$1(er,`>= ${rr} && <= ${nr}`,tr)}),validateUint32=hideStackFrames((tr,er,rr=!1)=>{if(typeof tr!="number")throw new ERR_INVALID_ARG_TYPE$5(er,"number",tr);if(!NumberIsInteger$1(tr))throw new ERR_OUT_OF_RANGE$1(er,"an integer",tr);const nr=rr?1:0,ir=4294967295;if(tr<nr||tr>ir)throw new ERR_OUT_OF_RANGE$1(er,`>= ${nr} && <= ${ir}`,tr)});function validateString(tr,er){if(typeof tr!="string")throw new ERR_INVALID_ARG_TYPE$5(er,"string",tr)}function validateNumber(tr,er,rr=void 0,nr){if(typeof tr!="number")throw new ERR_INVALID_ARG_TYPE$5(er,"number",tr);if(rr!=null&&tr<rr||nr!=null&&tr>nr||(rr!=null||nr!=null)&&NumberIsNaN$1(tr))throw new ERR_OUT_OF_RANGE$1(er,`${rr!=null?`>= ${rr}`:""}${rr!=null&&nr!=null?" && ":""}${nr!=null?`<= ${nr}`:""}`,tr)}const validateOneOf=hideStackFrames((tr,er,rr)=>{if(!ArrayPrototypeIncludes(rr,tr)){const ir="must be one of: "+ArrayPrototypeJoin(ArrayPrototypeMap(rr,sr=>typeof sr=="string"?`'${sr}'`:String$1(sr)),", ");throw new ERR_INVALID_ARG_VALUE$3(er,tr,ir)}});function validateBoolean$1(tr,er){if(typeof tr!="boolean")throw new ERR_INVALID_ARG_TYPE$5(er,"boolean",tr)}function getOwnPropertyValueOrDefault(tr,er,rr){return tr==null||!ObjectPrototypeHasOwnProperty(tr,er)?rr:tr[er]}const validateObject$3=hideStackFrames((tr,er,rr=null)=>{const nr=getOwnPropertyValueOrDefault(rr,"allowArray",!1),ir=getOwnPropertyValueOrDefault(rr,"allowFunction",!1);if(!getOwnPropertyValueOrDefault(rr,"nullable",!1)&&tr===null||!nr&&ArrayIsArray$2(tr)||typeof tr!="object"&&(!ir||typeof tr!="function"))throw new ERR_INVALID_ARG_TYPE$5(er,"Object",tr)}),validateDictionary=hideStackFrames((tr,er)=>{if(tr!=null&&typeof tr!="object"&&typeof tr!="function")throw new ERR_INVALID_ARG_TYPE$5(er,"a dictionary",tr)}),validateArray=hideStackFrames((tr,er,rr=0)=>{if(!ArrayIsArray$2(tr))throw new ERR_INVALID_ARG_TYPE$5(er,"Array",tr);if(tr.length<rr){const nr=`must be longer than ${rr}`;throw new ERR_INVALID_ARG_VALUE$3(er,tr,nr)}});function validateStringArray(tr,er){validateArray(tr,er);for(let rr=0;rr<tr.length;rr++)validateString(tr[rr],`${er}[${rr}]`)}function validateBooleanArray(tr,er){validateArray(tr,er);for(let rr=0;rr<tr.length;rr++)validateBoolean$1(tr[rr],`${er}[${rr}]`)}function validateAbortSignalArray(tr,er){validateArray(tr,er);for(let rr=0;rr<tr.length;rr++){const nr=tr[rr],ir=`${er}[${rr}]`;if(nr==null)throw new ERR_INVALID_ARG_TYPE$5(ir,"AbortSignal",nr);validateAbortSignal$3(nr,ir)}}function validateSignalName(tr,er="signal"){if(validateString(tr,er),signals[tr]===void 0)throw signals[StringPrototypeToUpperCase(tr)]!==void 0?new ERR_UNKNOWN_SIGNAL(tr+" (signals must use all capital letters)"):new ERR_UNKNOWN_SIGNAL(tr)}const validateBuffer=hideStackFrames((tr,er="buffer")=>{if(!isArrayBufferView(tr))throw new ERR_INVALID_ARG_TYPE$5(er,["Buffer","TypedArray","DataView"],tr)});function validateEncoding(tr,er){const rr=normalizeEncoding$1(er),nr=tr.length;if(rr==="hex"&&nr%2!==0)throw new ERR_INVALID_ARG_VALUE$3("encoding",er,`is invalid for data of length ${nr}`)}function validatePort(tr,er="Port",rr=!0){if(typeof tr!="number"&&typeof tr!="string"||typeof tr=="string"&&StringPrototypeTrim(tr).length===0||+tr!==+tr>>>0||tr>65535||tr===0&&!rr)throw new ERR_SOCKET_BAD_PORT(er,tr,rr);return tr|0}const validateAbortSignal$3=hideStackFrames((tr,er)=>{if(tr!==void 0&&(tr===null||typeof tr!="object"||!("aborted"in tr)))throw new ERR_INVALID_ARG_TYPE$5(er,"AbortSignal",tr)}),validateFunction$2=hideStackFrames((tr,er)=>{if(typeof tr!="function")throw new ERR_INVALID_ARG_TYPE$5(er,"Function",tr)}),validatePlainFunction=hideStackFrames((tr,er)=>{if(typeof tr!="function"||isAsyncFunction(tr))throw new ERR_INVALID_ARG_TYPE$5(er,"Function",tr)}),validateUndefined=hideStackFrames((tr,er)=>{if(tr!==void 0)throw new ERR_INVALID_ARG_TYPE$5(er,"undefined",tr)});function validateUnion(tr,er,rr){if(!ArrayPrototypeIncludes(rr,tr))throw new ERR_INVALID_ARG_TYPE$5(er,`('${ArrayPrototypeJoin(rr,"|")}')`,tr)}const linkValueRegExp=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function validateLinkHeaderFormat(tr,er){if(typeof tr>"u"||!RegExpPrototypeExec(linkValueRegExp,tr))throw new ERR_INVALID_ARG_VALUE$3(er,tr,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}function validateLinkHeaderValue(tr){if(typeof tr=="string")return validateLinkHeaderFormat(tr,"hints"),tr;if(ArrayIsArray$2(tr)){const er=tr.length;let rr="";if(er===0)return rr;for(let nr=0;nr<er;nr++){const ir=tr[nr];validateLinkHeaderFormat(ir,"hints"),rr+=ir,nr!==er-1&&(rr+=", ")}return rr}throw new ERR_INVALID_ARG_VALUE$3("hints",tr,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}var validators$1={isInt32,isUint32,parseFileMode,validateArray,validateStringArray,validateBooleanArray,validateAbortSignalArray,validateBoolean:validateBoolean$1,validateBuffer,validateDictionary,validateEncoding,validateFunction:validateFunction$2,validateInt32,validateInteger:validateInteger$2,validateNumber,validateObject:validateObject$3,validateOneOf,validatePlainFunction,validatePort,validateSignalName,validateString,validateUint32,validateUndefined,validateUnion,validateAbortSignal:validateAbortSignal$3,validateLinkHeaderValue},endOfStream$2={exports:{}};const{SymbolAsyncIterator:SymbolAsyncIterator$2,SymbolIterator:SymbolIterator$2,SymbolFor}=primordials,kIsDestroyed$1=SymbolFor("nodejs.stream.destroyed"),kIsErrored=SymbolFor("nodejs.stream.errored"),kIsReadable=SymbolFor("nodejs.stream.readable"),kIsWritable=SymbolFor("nodejs.stream.writable"),kIsDisturbed=SymbolFor("nodejs.stream.disturbed"),kIsClosedPromise$1=SymbolFor("nodejs.webstream.isClosedPromise"),kControllerErrorFunction=SymbolFor("nodejs.webstream.controllerErrorFunction");function isReadableNodeStream$2(tr,er=!1){var rr;return!!(tr&&typeof tr.pipe=="function"&&typeof tr.on=="function"&&(!er||typeof tr.pause=="function"&&typeof tr.resume=="function")&&(!tr._writableState||((rr=tr._readableState)===null||rr===void 0?void 0:rr.readable)!==!1)&&(!tr._writableState||tr._readableState))}function isWritableNodeStream$1(tr){var er;return!!(tr&&typeof tr.write=="function"&&typeof tr.on=="function"&&(!tr._readableState||((er=tr._writableState)===null||er===void 0?void 0:er.writable)!==!1))}function isDuplexNodeStream(tr){return!!(tr&&typeof tr.pipe=="function"&&tr._readableState&&typeof tr.on=="function"&&typeof tr.write=="function")}function isNodeStream$4(tr){return tr&&(tr._readableState||tr._writableState||typeof tr.write=="function"&&typeof tr.on=="function"||typeof tr.pipe=="function"&&typeof tr.on=="function")}function isReadableStream$4(tr){return!!(tr&&!isNodeStream$4(tr)&&typeof tr.pipeThrough=="function"&&typeof tr.getReader=="function"&&typeof tr.cancel=="function")}function isWritableStream$3(tr){return!!(tr&&!isNodeStream$4(tr)&&typeof tr.getWriter=="function"&&typeof tr.abort=="function")}function isTransformStream$2(tr){return!!(tr&&!isNodeStream$4(tr)&&typeof tr.readable=="object"&&typeof tr.writable=="object")}function isWebStream$2(tr){return isReadableStream$4(tr)||isWritableStream$3(tr)||isTransformStream$2(tr)}function isIterable$2(tr,er){return tr==null?!1:er===!0?typeof tr[SymbolAsyncIterator$2]=="function":er===!1?typeof tr[SymbolIterator$2]=="function":typeof tr[SymbolAsyncIterator$2]=="function"||typeof tr[SymbolIterator$2]=="function"}function isDestroyed$1(tr){if(!isNodeStream$4(tr))return null;const er=tr._writableState,rr=tr._readableState,nr=er||rr;return!!(tr.destroyed||tr[kIsDestroyed$1]||nr!=null&&nr.destroyed)}function isWritableEnded(tr){if(!isWritableNodeStream$1(tr))return null;if(tr.writableEnded===!0)return!0;const er=tr._writableState;return er!=null&&er.errored?!1:typeof(er==null?void 0:er.ended)!="boolean"?null:er.ended}function isWritableFinished$1(tr,er){if(!isWritableNodeStream$1(tr))return null;if(tr.writableFinished===!0)return!0;const rr=tr._writableState;return rr!=null&&rr.errored?!1:typeof(rr==null?void 0:rr.finished)!="boolean"?null:!!(rr.finished||er===!1&&rr.ended===!0&&rr.length===0)}function isReadableEnded(tr){if(!isReadableNodeStream$2(tr))return null;if(tr.readableEnded===!0)return!0;const er=tr._readableState;return!er||er.errored?!1:typeof(er==null?void 0:er.ended)!="boolean"?null:er.ended}function isReadableFinished$2(tr,er){if(!isReadableNodeStream$2(tr))return null;const rr=tr._readableState;return rr!=null&&rr.errored?!1:typeof(rr==null?void 0:rr.endEmitted)!="boolean"?null:!!(rr.endEmitted||er===!1&&rr.ended===!0&&rr.length===0)}function isReadable$3(tr){return tr&&tr[kIsReadable]!=null?tr[kIsReadable]:typeof(tr==null?void 0:tr.readable)!="boolean"?null:isDestroyed$1(tr)?!1:isReadableNodeStream$2(tr)&&tr.readable&&!isReadableFinished$2(tr)}function isWritable$3(tr){return tr&&tr[kIsWritable]!=null?tr[kIsWritable]:typeof(tr==null?void 0:tr.writable)!="boolean"?null:isDestroyed$1(tr)?!1:isWritableNodeStream$1(tr)&&tr.writable&&!isWritableEnded(tr)}function isFinished$1(tr,er){return isNodeStream$4(tr)?isDestroyed$1(tr)?!0:!((er==null?void 0:er.readable)!==!1&&isReadable$3(tr)||(er==null?void 0:er.writable)!==!1&&isWritable$3(tr)):null}function isWritableErrored$1(tr){var er,rr;return isNodeStream$4(tr)?tr.writableErrored?tr.writableErrored:(er=(rr=tr._writableState)===null||rr===void 0?void 0:rr.errored)!==null&&er!==void 0?er:null:null}function isReadableErrored$1(tr){var er,rr;return isNodeStream$4(tr)?tr.readableErrored?tr.readableErrored:(er=(rr=tr._readableState)===null||rr===void 0?void 0:rr.errored)!==null&&er!==void 0?er:null:null}function isClosed$1(tr){if(!isNodeStream$4(tr))return null;if(typeof tr.closed=="boolean")return tr.closed;const er=tr._writableState,rr=tr._readableState;return typeof(er==null?void 0:er.closed)=="boolean"||typeof(rr==null?void 0:rr.closed)=="boolean"?(er==null?void 0:er.closed)||(rr==null?void 0:rr.closed):typeof tr._closed=="boolean"&&isOutgoingMessage(tr)?tr._closed:null}function isOutgoingMessage(tr){return typeof tr._closed=="boolean"&&typeof tr._defaultKeepAlive=="boolean"&&typeof tr._removedConnection=="boolean"&&typeof tr._removedContLen=="boolean"}function isServerResponse(tr){return typeof tr._sent100=="boolean"&&isOutgoingMessage(tr)}function isServerRequest$1(tr){var er;return typeof tr._consuming=="boolean"&&typeof tr._dumped=="boolean"&&((er=tr.req)===null||er===void 0?void 0:er.upgradeOrConnect)===void 0}function willEmitClose(tr){if(!isNodeStream$4(tr))return null;const er=tr._writableState,rr=tr._readableState,nr=er||rr;return!nr&&isServerResponse(tr)||!!(nr&&nr.autoDestroy&&nr.emitClose&&nr.closed===!1)}function isDisturbed(tr){var er;return!!(tr&&((er=tr[kIsDisturbed])!==null&&er!==void 0?er:tr.readableDidRead||tr.readableAborted))}function isErrored(tr){var er,rr,nr,ir,sr,or,ar,cr,lr,ur;return!!(tr&&((er=(rr=(nr=(ir=(sr=(or=tr[kIsErrored])!==null&&or!==void 0?or:tr.readableErrored)!==null&&sr!==void 0?sr:tr.writableErrored)!==null&&ir!==void 0?ir:(ar=tr._readableState)===null||ar===void 0?void 0:ar.errorEmitted)!==null&&nr!==void 0?nr:(cr=tr._writableState)===null||cr===void 0?void 0:cr.errorEmitted)!==null&&rr!==void 0?rr:(lr=tr._readableState)===null||lr===void 0?void 0:lr.errored)!==null&&er!==void 0?er:!((ur=tr._writableState)===null||ur===void 0)&&ur.errored))}var utils$7={isDestroyed:isDestroyed$1,kIsDestroyed:kIsDestroyed$1,isDisturbed,kIsDisturbed,isErrored,kIsErrored,isReadable:isReadable$3,kIsReadable,kIsClosedPromise:kIsClosedPromise$1,kControllerErrorFunction,kIsWritable,isClosed:isClosed$1,isDuplexNodeStream,isFinished:isFinished$1,isIterable:isIterable$2,isReadableNodeStream:isReadableNodeStream$2,isReadableStream:isReadableStream$4,isReadableEnded,isReadableFinished:isReadableFinished$2,isReadableErrored:isReadableErrored$1,isNodeStream:isNodeStream$4,isWebStream:isWebStream$2,isWritable:isWritable$3,isWritableNodeStream:isWritableNodeStream$1,isWritableStream:isWritableStream$3,isWritableEnded,isWritableFinished:isWritableFinished$1,isWritableErrored:isWritableErrored$1,isServerRequest:isServerRequest$1,isServerResponse,willEmitClose,isTransformStream:isTransformStream$2};const process$4=browserExports$2,{AbortError:AbortError$4,codes:codes$1}=errors$5,{ERR_INVALID_ARG_TYPE:ERR_INVALID_ARG_TYPE$4,ERR_STREAM_PREMATURE_CLOSE:ERR_STREAM_PREMATURE_CLOSE$2}=codes$1,{kEmptyObject,once:once$8}=utilExports,{validateAbortSignal:validateAbortSignal$2,validateFunction:validateFunction$1,validateObject:validateObject$2,validateBoolean}=validators$1,{Promise:Promise$3,PromisePrototypeThen:PromisePrototypeThen$2,SymbolDispose:SymbolDispose$1}=primordials,{isClosed,isReadable:isReadable$2,isReadableNodeStream:isReadableNodeStream$1,isReadableStream:isReadableStream$3,isReadableFinished:isReadableFinished$1,isReadableErrored,isWritable:isWritable$2,isWritableNodeStream,isWritableStream:isWritableStream$2,isWritableFinished,isWritableErrored,isNodeStream:isNodeStream$3,willEmitClose:_willEmitClose,kIsClosedPromise}=utils$7;let addAbortListener$1;function isRequest$5(tr){return tr.setHeader&&typeof tr.abort=="function"}const nop=()=>{};function eos$7(tr,er,rr){var nr,ir;if(arguments.length===2?(rr=er,er=kEmptyObject):er==null?er=kEmptyObject:validateObject$2(er,"options"),validateFunction$1(rr,"callback"),validateAbortSignal$2(er.signal,"options.signal"),rr=once$8(rr),isReadableStream$3(tr)||isWritableStream$2(tr))return eosWeb(tr,er,rr);if(!isNodeStream$3(tr))throw new ERR_INVALID_ARG_TYPE$4("stream",["ReadableStream","WritableStream","Stream"],tr);const sr=(nr=er.readable)!==null&&nr!==void 0?nr:isReadableNodeStream$1(tr),or=(ir=er.writable)!==null&&ir!==void 0?ir:isWritableNodeStream(tr),ar=tr._writableState,cr=tr._readableState,lr=()=>{tr.writable||yr()};let ur=_willEmitClose(tr)&&isReadableNodeStream$1(tr)===sr&&isWritableNodeStream(tr)===or,dr=isWritableFinished(tr,!1);const yr=()=>{dr=!0,tr.destroyed&&(ur=!1),!(ur&&(!tr.readable||sr))&&(!sr||mr)&&rr.call(tr)};let mr=isReadableFinished$1(tr,!1);const wr=()=>{mr=!0,tr.destroyed&&(ur=!1),!(ur&&(!tr.writable||or))&&(!or||dr)&&rr.call(tr)},xr=Dr=>{rr.call(tr,Dr)};let Or=isClosed(tr);const Tr=()=>{Or=!0;const Dr=isWritableErrored(tr)||isReadableErrored(tr);if(Dr&&typeof Dr!="boolean")return rr.call(tr,Dr);if(sr&&!mr&&isReadableNodeStream$1(tr,!0)&&!isReadableFinished$1(tr,!1))return rr.call(tr,new ERR_STREAM_PREMATURE_CLOSE$2);if(or&&!dr&&!isWritableFinished(tr,!1))return rr.call(tr,new ERR_STREAM_PREMATURE_CLOSE$2);rr.call(tr)},Ar=()=>{Or=!0;const Dr=isWritableErrored(tr)||isReadableErrored(tr);if(Dr&&typeof Dr!="boolean")return rr.call(tr,Dr);rr.call(tr)},Nr=()=>{tr.req.on("finish",yr)};isRequest$5(tr)?(tr.on("complete",yr),ur||tr.on("abort",Tr),tr.req?Nr():tr.on("request",Nr)):or&&!ar&&(tr.on("end",lr),tr.on("close",lr)),!ur&&typeof tr.aborted=="boolean"&&tr.on("aborted",Tr),tr.on("end",wr),tr.on("finish",yr),er.error!==!1&&tr.on("error",xr),tr.on("close",Tr),Or?process$4.nextTick(Tr):ar!=null&&ar.errorEmitted||cr!=null&&cr.errorEmitted?ur||process$4.nextTick(Ar):(!sr&&(!ur||isReadable$2(tr))&&(dr||isWritable$2(tr)===!1)||!or&&(!ur||isWritable$2(tr))&&(mr||isReadable$2(tr)===!1)||cr&&tr.req&&tr.aborted)&&process$4.nextTick(Ar);const Ur=()=>{rr=nop,tr.removeListener("aborted",Tr),tr.removeListener("complete",yr),tr.removeListener("abort",Tr),tr.removeListener("request",Nr),tr.req&&tr.req.removeListener("finish",yr),tr.removeListener("end",lr),tr.removeListener("close",lr),tr.removeListener("finish",yr),tr.removeListener("end",wr),tr.removeListener("error",xr),tr.removeListener("close",Tr)};if(er.signal&&!Or){const Dr=()=>{const Hr=rr;Ur(),Hr.call(tr,new AbortError$4(void 0,{cause:er.signal.reason}))};if(er.signal.aborted)process$4.nextTick(Dr);else{addAbortListener$1=addAbortListener$1||utilExports.addAbortListener;const Hr=addAbortListener$1(er.signal,Dr),zr=rr;rr=once$8((...Cr)=>{Hr[SymbolDispose$1](),zr.apply(tr,Cr)})}}return Ur}function eosWeb(tr,er,rr){let nr=!1,ir=nop;if(er.signal)if(ir=()=>{nr=!0,rr.call(tr,new AbortError$4(void 0,{cause:er.signal.reason}))},er.signal.aborted)process$4.nextTick(ir);else{addAbortListener$1=addAbortListener$1||utilExports.addAbortListener;const or=addAbortListener$1(er.signal,ir),ar=rr;rr=once$8((...cr)=>{or[SymbolDispose$1](),ar.apply(tr,cr)})}const sr=(...or)=>{nr||process$4.nextTick(()=>rr.apply(tr,or))};return PromisePrototypeThen$2(tr[kIsClosedPromise].promise,sr,sr),nop}function finished$1(tr,er){var rr;let nr=!1;return er===null&&(er=kEmptyObject),(rr=er)!==null&&rr!==void 0&&rr.cleanup&&(validateBoolean(er.cleanup,"cleanup"),nr=er.cleanup),new Promise$3((ir,sr)=>{const or=eos$7(tr,er,ar=>{nr&&or(),ar?sr(ar):ir()})})}endOfStream$2.exports=eos$7;endOfStream$2.exports.finished=finished$1;var endOfStreamExports=endOfStream$2.exports;const process$3=browserExports$2,{aggregateTwoErrors:aggregateTwoErrors$1,codes:{ERR_MULTIPLE_CALLBACK:ERR_MULTIPLE_CALLBACK$1},AbortError:AbortError$3}=errors$5,{Symbol:Symbol$3}=primordials,{kIsDestroyed,isDestroyed,isFinished,isServerRequest}=utils$7,kDestroy=Symbol$3("kDestroy"),kConstruct=Symbol$3("kConstruct");function checkError(tr,er,rr){tr&&(tr.stack,er&&!er.errored&&(er.errored=tr),rr&&!rr.errored&&(rr.errored=tr))}function destroy$1(tr,er){const rr=this._readableState,nr=this._writableState,ir=nr||rr;return nr!=null&&nr.destroyed||rr!=null&&rr.destroyed?(typeof er=="function"&&er(),this):(checkError(tr,nr,rr),nr&&(nr.destroyed=!0),rr&&(rr.destroyed=!0),ir.constructed?_destroy(this,tr,er):this.once(kDestroy,function(sr){_destroy(this,aggregateTwoErrors$1(sr,tr),er)}),this)}function _destroy(tr,er,rr){let nr=!1;function ir(sr){if(nr)return;nr=!0;const or=tr._readableState,ar=tr._writableState;checkError(sr,ar,or),ar&&(ar.closed=!0),or&&(or.closed=!0),typeof rr=="function"&&rr(sr),sr?process$3.nextTick(emitErrorCloseNT,tr,sr):process$3.nextTick(emitCloseNT$1,tr)}try{tr._destroy(er||null,ir)}catch(sr){ir(sr)}}function emitErrorCloseNT(tr,er){emitErrorNT$1(tr,er),emitCloseNT$1(tr)}function emitCloseNT$1(tr){const er=tr._readableState,rr=tr._writableState;rr&&(rr.closeEmitted=!0),er&&(er.closeEmitted=!0),(rr!=null&&rr.emitClose||er!=null&&er.emitClose)&&tr.emit("close")}function emitErrorNT$1(tr,er){const rr=tr._readableState,nr=tr._writableState;nr!=null&&nr.errorEmitted||rr!=null&&rr.errorEmitted||(nr&&(nr.errorEmitted=!0),rr&&(rr.errorEmitted=!0),tr.emit("error",er))}function undestroy$1(){const tr=this._readableState,er=this._writableState;tr&&(tr.constructed=!0,tr.closed=!1,tr.closeEmitted=!1,tr.destroyed=!1,tr.errored=null,tr.errorEmitted=!1,tr.reading=!1,tr.ended=tr.readable===!1,tr.endEmitted=tr.readable===!1),er&&(er.constructed=!0,er.destroyed=!1,er.closed=!1,er.closeEmitted=!1,er.errored=null,er.errorEmitted=!1,er.finalCalled=!1,er.prefinished=!1,er.ended=er.writable===!1,er.ending=er.writable===!1,er.finished=er.writable===!1)}function errorOrDestroy$1(tr,er,rr){const nr=tr._readableState,ir=tr._writableState;if(ir!=null&&ir.destroyed||nr!=null&&nr.destroyed)return this;nr!=null&&nr.autoDestroy||ir!=null&&ir.autoDestroy?tr.destroy(er):er&&(er.stack,ir&&!ir.errored&&(ir.errored=er),nr&&!nr.errored&&(nr.errored=er),rr?process$3.nextTick(emitErrorNT$1,tr,er):emitErrorNT$1(tr,er))}function construct(tr,er){if(typeof tr._construct!="function")return;const rr=tr._readableState,nr=tr._writableState;rr&&(rr.constructed=!1),nr&&(nr.constructed=!1),tr.once(kConstruct,er),!(tr.listenerCount(kConstruct)>1)&&process$3.nextTick(constructNT,tr)}function constructNT(tr){let er=!1;function rr(nr){if(er){errorOrDestroy$1(tr,nr??new ERR_MULTIPLE_CALLBACK$1);return}er=!0;const ir=tr._readableState,sr=tr._writableState,or=sr||ir;ir&&(ir.constructed=!0),sr&&(sr.constructed=!0),or.destroyed?tr.emit(kDestroy,nr):nr?errorOrDestroy$1(tr,nr,!0):process$3.nextTick(emitConstructNT,tr)}try{tr._construct(nr=>{process$3.nextTick(rr,nr)})}catch(nr){process$3.nextTick(rr,nr)}}function emitConstructNT(tr){tr.emit(kConstruct)}function isRequest$4(tr){return(tr==null?void 0:tr.setHeader)&&typeof tr.abort=="function"}function emitCloseLegacy(tr){tr.emit("close")}function emitErrorCloseLegacy(tr,er){tr.emit("error",er),process$3.nextTick(emitCloseLegacy,tr)}function destroyer$4(tr,er){!tr||isDestroyed(tr)||(!er&&!isFinished(tr)&&(er=new AbortError$3),isServerRequest(tr)?(tr.socket=null,tr.destroy(er)):isRequest$4(tr)?tr.abort():isRequest$4(tr.req)?tr.req.abort():typeof tr.destroy=="function"?tr.destroy(er):typeof tr.close=="function"?tr.close():er?process$3.nextTick(emitErrorCloseLegacy,tr,er):process$3.nextTick(emitCloseLegacy,tr),tr.destroyed||(tr[kIsDestroyed]=!0))}var destroy_1$1={construct,destroyer:destroyer$4,destroy:destroy$1,undestroy:undestroy$1,errorOrDestroy:errorOrDestroy$1};const{ArrayIsArray:ArrayIsArray$1,ObjectSetPrototypeOf:ObjectSetPrototypeOf$2}=primordials,{EventEmitter:EE}=eventsExports;function Stream(tr){EE.call(this,tr)}ObjectSetPrototypeOf$2(Stream.prototype,EE.prototype);ObjectSetPrototypeOf$2(Stream,EE);Stream.prototype.pipe=function(tr,er){const rr=this;function nr(ur){tr.writable&&tr.write(ur)===!1&&rr.pause&&rr.pause()}rr.on("data",nr);function ir(){rr.readable&&rr.resume&&rr.resume()}tr.on("drain",ir),!tr._isStdio&&(!er||er.end!==!1)&&(rr.on("end",or),rr.on("close",ar));let sr=!1;function or(){sr||(sr=!0,tr.end())}function ar(){sr||(sr=!0,typeof tr.destroy=="function"&&tr.destroy())}function cr(ur){lr(),EE.listenerCount(this,"error")===0&&this.emit("error",ur)}prependListener(rr,"error",cr),prependListener(tr,"error",cr);function lr(){rr.removeListener("data",nr),tr.removeListener("drain",ir),rr.removeListener("end",or),rr.removeListener("close",ar),rr.removeListener("error",cr),tr.removeListener("error",cr),rr.removeListener("end",lr),rr.removeListener("close",lr),tr.removeListener("close",lr)}return rr.on("end",lr),rr.on("close",lr),tr.on("close",lr),tr.emit("pipe",rr),tr};function prependListener(tr,er,rr){if(typeof tr.prependListener=="function")return tr.prependListener(er,rr);!tr._events||!tr._events[er]?tr.on(er,rr):ArrayIsArray$1(tr._events[er])?tr._events[er].unshift(rr):tr._events[er]=[rr,tr._events[er]]}var legacy={Stream,prependListener},addAbortSignal={exports:{}};(function(tr){const{SymbolDispose:er}=primordials,{AbortError:rr,codes:nr}=errors$5,{isNodeStream:ir,isWebStream:sr,kControllerErrorFunction:or}=utils$7,ar=endOfStreamExports,{ERR_INVALID_ARG_TYPE:cr}=nr;let lr;const ur=(dr,yr)=>{if(typeof dr!="object"||!("aborted"in dr))throw new cr(yr,"AbortSignal",dr)};tr.exports.addAbortSignal=function(yr,mr){if(ur(yr,"signal"),!ir(mr)&&!sr(mr))throw new cr("stream",["ReadableStream","WritableStream","Stream"],mr);return tr.exports.addAbortSignalNoValidate(yr,mr)},tr.exports.addAbortSignalNoValidate=function(dr,yr){if(typeof dr!="object"||!("aborted"in dr))return yr;const mr=ir(yr)?()=>{yr.destroy(new rr(void 0,{cause:dr.reason}))}:()=>{yr[or](new rr(void 0,{cause:dr.reason}))};if(dr.aborted)mr();else{lr=lr||utilExports.addAbortListener;const wr=lr(dr,mr);ar(yr,wr[er])}return yr}})(addAbortSignal);var addAbortSignalExports=addAbortSignal.exports;const{StringPrototypeSlice,SymbolIterator:SymbolIterator$1,TypedArrayPrototypeSet,Uint8Array:Uint8Array$1}=primordials,{Buffer:Buffer$a}=buffer$1,{inspect}=utilExports;var buffer_list$1=class{constructor(){this.head=null,this.tail=null,this.length=0}push(er){const rr={data:er,next:null};this.length>0?this.tail.next=rr:this.head=rr,this.tail=rr,++this.length}unshift(er){const rr={data:er,next:this.head};this.length===0&&(this.tail=rr),this.head=rr,++this.length}shift(){if(this.length===0)return;const er=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,er}clear(){this.head=this.tail=null,this.length=0}join(er){if(this.length===0)return"";let rr=this.head,nr=""+rr.data;for(;(rr=rr.next)!==null;)nr+=er+rr.data;return nr}concat(er){if(this.length===0)return Buffer$a.alloc(0);const rr=Buffer$a.allocUnsafe(er>>>0);let nr=this.head,ir=0;for(;nr;)TypedArrayPrototypeSet(rr,nr.data,ir),ir+=nr.data.length,nr=nr.next;return rr}consume(er,rr){const nr=this.head.data;if(er<nr.length){const ir=nr.slice(0,er);return this.head.data=nr.slice(er),ir}return er===nr.length?this.shift():rr?this._getString(er):this._getBuffer(er)}first(){return this.head.data}*[SymbolIterator$1](){for(let er=this.head;er;er=er.next)yield er.data}_getString(er){let rr="",nr=this.head,ir=0;do{const sr=nr.data;if(er>sr.length)rr+=sr,er-=sr.length;else{er===sr.length?(rr+=sr,++ir,nr.next?this.head=nr.next:this.head=this.tail=null):(rr+=StringPrototypeSlice(sr,0,er),this.head=nr,nr.data=StringPrototypeSlice(sr,er));break}++ir}while((nr=nr.next)!==null);return this.length-=ir,rr}_getBuffer(er){const rr=Buffer$a.allocUnsafe(er),nr=er;let ir=this.head,sr=0;do{const or=ir.data;if(er>or.length)TypedArrayPrototypeSet(rr,or,nr-er),er-=or.length;else{er===or.length?(TypedArrayPrototypeSet(rr,or,nr-er),++sr,ir.next?this.head=ir.next:this.head=this.tail=null):(TypedArrayPrototypeSet(rr,new Uint8Array$1(or.buffer,or.byteOffset,er),nr-er),this.head=ir,ir.data=or.slice(er));break}++sr}while((ir=ir.next)!==null);return this.length-=sr,rr}[Symbol.for("nodejs.util.inspect.custom")](er,rr){return inspect(this,{...rr,depth:0,customInspect:!1})}};const{MathFloor:MathFloor$1,NumberIsInteger}=primordials,{validateInteger:validateInteger$1}=validators$1,{ERR_INVALID_ARG_VALUE:ERR_INVALID_ARG_VALUE$2}=errors$5.codes;let defaultHighWaterMarkBytes=16*1024,defaultHighWaterMarkObjectMode=16;function highWaterMarkFrom$1(tr,er,rr){return tr.highWaterMark!=null?tr.highWaterMark:er?tr[rr]:null}function getDefaultHighWaterMark(tr){return tr?defaultHighWaterMarkObjectMode:defaultHighWaterMarkBytes}function setDefaultHighWaterMark(tr,er){validateInteger$1(er,"value",0),tr?defaultHighWaterMarkObjectMode=er:defaultHighWaterMarkBytes=er}function getHighWaterMark$2(tr,er,rr,nr){const ir=highWaterMarkFrom$1(er,nr,rr);if(ir!=null){if(!NumberIsInteger(ir)||ir<0){const sr=nr?`options.${rr}`:"options.highWaterMark";throw new ERR_INVALID_ARG_VALUE$2(sr,ir)}return MathFloor$1(ir)}return getDefaultHighWaterMark(tr.objectMode)}var state$1={getHighWaterMark:getHighWaterMark$2,getDefaultHighWaterMark,setDefaultHighWaterMark},string_decoder={},safeBuffer={exports:{}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */(function(tr,er){var rr=buffer$1,nr=rr.Buffer;function ir(or,ar){for(var cr in or)ar[cr]=or[cr]}nr.from&&nr.alloc&&nr.allocUnsafe&&nr.allocUnsafeSlow?tr.exports=rr:(ir(rr,er),er.Buffer=sr);function sr(or,ar,cr){return nr(or,ar,cr)}sr.prototype=Object.create(nr.prototype),ir(nr,sr),sr.from=function(or,ar,cr){if(typeof or=="number")throw new TypeError("Argument must not be a number");return nr(or,ar,cr)},sr.alloc=function(or,ar,cr){if(typeof or!="number")throw new TypeError("Argument must be a number");var lr=nr(or);return ar!==void 0?typeof cr=="string"?lr.fill(ar,cr):lr.fill(ar):lr.fill(0),lr},sr.allocUnsafe=function(or){if(typeof or!="number")throw new TypeError("Argument must be a number");return nr(or)},sr.allocUnsafeSlow=function(or){if(typeof or!="number")throw new TypeError("Argument must be a number");return rr.SlowBuffer(or)}})(safeBuffer,safeBuffer.exports);var safeBufferExports=safeBuffer.exports,Buffer$9=safeBufferExports.Buffer,isEncoding=Buffer$9.isEncoding||function(tr){switch(tr=""+tr,tr&&tr.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function _normalizeEncoding(tr){if(!tr)return"utf8";for(var er;;)switch(tr){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return tr;default:if(er)return;tr=(""+tr).toLowerCase(),er=!0}}function normalizeEncoding(tr){var er=_normalizeEncoding(tr);if(typeof er!="string"&&(Buffer$9.isEncoding===isEncoding||!isEncoding(tr)))throw new Error("Unknown encoding: "+tr);return er||tr}string_decoder.StringDecoder=StringDecoder;function StringDecoder(tr){this.encoding=normalizeEncoding(tr);var er;switch(this.encoding){case"utf16le":this.text=utf16Text,this.end=utf16End,er=4;break;case"utf8":this.fillLast=utf8FillLast,er=4;break;case"base64":this.text=base64Text,this.end=base64End,er=3;break;default:this.write=simpleWrite,this.end=simpleEnd;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=Buffer$9.allocUnsafe(er)}StringDecoder.prototype.write=function(tr){if(tr.length===0)return"";var er,rr;if(this.lastNeed){if(er=this.fillLast(tr),er===void 0)return"";rr=this.lastNeed,this.lastNeed=0}else rr=0;return rr<tr.length?er?er+this.text(tr,rr):this.text(tr,rr):er||""};StringDecoder.prototype.end=utf8End;StringDecoder.prototype.text=utf8Text;StringDecoder.prototype.fillLast=function(tr){if(this.lastNeed<=tr.length)return tr.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);tr.copy(this.lastChar,this.lastTotal-this.lastNeed,0,tr.length),this.lastNeed-=tr.length};function utf8CheckByte(tr){return tr<=127?0:tr>>5===6?2:tr>>4===14?3:tr>>3===30?4:tr>>6===2?-1:-2}function utf8CheckIncomplete(tr,er,rr){var nr=er.length-1;if(nr<rr)return 0;var ir=utf8CheckByte(er[nr]);return ir>=0?(ir>0&&(tr.lastNeed=ir-1),ir):--nr<rr||ir===-2?0:(ir=utf8CheckByte(er[nr]),ir>=0?(ir>0&&(tr.lastNeed=ir-2),ir):--nr<rr||ir===-2?0:(ir=utf8CheckByte(er[nr]),ir>=0?(ir>0&&(ir===2?ir=0:tr.lastNeed=ir-3),ir):0))}function utf8CheckExtraBytes(tr,er,rr){if((er[0]&192)!==128)return tr.lastNeed=0,"";if(tr.lastNeed>1&&er.length>1){if((er[1]&192)!==128)return tr.lastNeed=1,"";if(tr.lastNeed>2&&er.length>2&&(er[2]&192)!==128)return tr.lastNeed=2,""}}function utf8FillLast(tr){var er=this.lastTotal-this.lastNeed,rr=utf8CheckExtraBytes(this,tr);if(rr!==void 0)return rr;if(this.lastNeed<=tr.length)return tr.copy(this.lastChar,er,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);tr.copy(this.lastChar,er,0,tr.length),this.lastNeed-=tr.length}function utf8Text(tr,er){var rr=utf8CheckIncomplete(this,tr,er);if(!this.lastNeed)return tr.toString("utf8",er);this.lastTotal=rr;var nr=tr.length-(rr-this.lastNeed);return tr.copy(this.lastChar,0,nr),tr.toString("utf8",er,nr)}function utf8End(tr){var er=tr&&tr.length?this.write(tr):"";return this.lastNeed?er+"":er}function utf16Text(tr,er){if((tr.length-er)%2===0){var rr=tr.toString("utf16le",er);if(rr){var nr=rr.charCodeAt(rr.length-1);if(nr>=55296&&nr<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=tr[tr.length-2],this.lastChar[1]=tr[tr.length-1],rr.slice(0,-1)}return rr}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=tr[tr.length-1],tr.toString("utf16le",er,tr.length-1)}function utf16End(tr){var er=tr&&tr.length?this.write(tr):"";if(this.lastNeed){var rr=this.lastTotal-this.lastNeed;return er+this.lastChar.toString("utf16le",0,rr)}return er}function base64Text(tr,er){var rr=(tr.length-er)%3;return rr===0?tr.toString("base64",er):(this.lastNeed=3-rr,this.lastTotal=3,rr===1?this.lastChar[0]=tr[tr.length-1]:(this.lastChar[0]=tr[tr.length-2],this.lastChar[1]=tr[tr.length-1]),tr.toString("base64",er,tr.length-rr))}function base64End(tr){var er=tr&&tr.length?this.write(tr):"";return this.lastNeed?er+this.lastChar.toString("base64",0,3-this.lastNeed):er}function simpleWrite(tr){return tr.toString(this.encoding)}function simpleEnd(tr){return tr&&tr.length?this.write(tr):""}const process$2=browserExports$2,{PromisePrototypeThen:PromisePrototypeThen$1,SymbolAsyncIterator:SymbolAsyncIterator$1,SymbolIterator}=primordials,{Buffer:Buffer$8}=buffer$1,{ERR_INVALID_ARG_TYPE:ERR_INVALID_ARG_TYPE$3,ERR_STREAM_NULL_VALUES}=errors$5.codes;function from(tr,er,rr){let nr;if(typeof er=="string"||er instanceof Buffer$8)return new tr({objectMode:!0,...rr,read(){this.push(er),this.push(null)}});let ir;if(er&&er[SymbolAsyncIterator$1])ir=!0,nr=er[SymbolAsyncIterator$1]();else if(er&&er[SymbolIterator])ir=!1,nr=er[SymbolIterator]();else throw new ERR_INVALID_ARG_TYPE$3("iterable",["Iterable"],er);const sr=new tr({objectMode:!0,highWaterMark:1,...rr});let or=!1;sr._read=function(){or||(or=!0,cr())},sr._destroy=function(lr,ur){PromisePrototypeThen$1(ar(lr),()=>process$2.nextTick(ur,lr),dr=>process$2.nextTick(ur,dr||lr))};async function ar(lr){const ur=lr!=null,dr=typeof nr.throw=="function";if(ur&&dr){const{value:yr,done:mr}=await nr.throw(lr);if(await yr,mr)return}if(typeof nr.return=="function"){const{value:yr}=await nr.return();await yr}}async function cr(){for(;;){try{const{value:lr,done:ur}=ir?await nr.next():nr.next();if(ur)sr.push(null);else{const dr=lr&&typeof lr.then=="function"?await lr:lr;if(dr===null)throw or=!1,new ERR_STREAM_NULL_VALUES;if(sr.push(dr))continue;or=!1}}catch(lr){sr.destroy(lr)}break}}return sr}var from_1=from,readable,hasRequiredReadable;function requireReadable(){if(hasRequiredReadable)return readable;hasRequiredReadable=1;const tr=browserExports$2,{ArrayPrototypeIndexOf:er,NumberIsInteger:rr,NumberIsNaN:nr,NumberParseInt:ir,ObjectDefineProperties:sr,ObjectKeys:or,ObjectSetPrototypeOf:ar,Promise:cr,SafeSet:lr,SymbolAsyncDispose:ur,SymbolAsyncIterator:dr,Symbol:yr}=primordials;readable=Kn,Kn.ReadableState=Zn;const{EventEmitter:mr}=eventsExports,{Stream:wr,prependListener:xr}=legacy,{Buffer:Or}=buffer$1,{addAbortSignal:Tr}=addAbortSignalExports,Ar=endOfStreamExports;let Nr=utilExports.debuglog("stream",hn=>{Nr=hn});const Ur=buffer_list$1,Dr=destroy_1$1,{getHighWaterMark:Hr,getDefaultHighWaterMark:zr}=state$1,{aggregateTwoErrors:Cr,codes:{ERR_INVALID_ARG_TYPE:Mr,ERR_METHOD_NOT_IMPLEMENTED:Pr,ERR_OUT_OF_RANGE:Sr,ERR_STREAM_PUSH_AFTER_EOF:pr,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:gr},AbortError:fr}=errors$5,{validateObject:hr}=validators$1,br=yr("kPaused"),{StringDecoder:_r}=string_decoder,$r=from_1;ar(Kn.prototype,wr.prototype),ar(Kn,wr);const Er=()=>{},{errorOrDestroy:vr}=Dr,Ir=1,Rr=2,Br=4,Jr=8,Wr=16,qr=32,an=64,tn=128,cn=256,dn=512,Zr=1024,Yr=2048,Qr=4096,un=8192,gn=16384,Rn=32768,Pn=65536,Cn=1<<17,Sn=1<<18;function zn(hn){return{enumerable:!1,get(){return(this.state&hn)!==0},set(pn){pn?this.state|=hn:this.state&=~hn}}}sr(Zn.prototype,{objectMode:zn(Ir),ended:zn(Rr),endEmitted:zn(Br),reading:zn(Jr),constructed:zn(Wr),sync:zn(qr),needReadable:zn(an),emittedReadable:zn(tn),readableListening:zn(cn),resumeScheduled:zn(dn),errorEmitted:zn(Zr),emitClose:zn(Yr),autoDestroy:zn(Qr),destroyed:zn(un),closed:zn(gn),closeEmitted:zn(Rn),multiAwaitDrain:zn(Pn),readingMore:zn(Cn),dataEmitted:zn(Sn)});function Zn(hn,pn,kn){typeof kn!="boolean"&&(kn=pn instanceof requireDuplex()),this.state=Yr|Qr|Wr|qr,hn&&hn.objectMode&&(this.state|=Ir),kn&&hn&&hn.readableObjectMode&&(this.state|=Ir),this.highWaterMark=hn?Hr(this,hn,"readableHighWaterMark",kn):zr(!1),this.buffer=new Ur,this.length=0,this.pipes=[],this.flowing=null,this[br]=null,hn&&hn.emitClose===!1&&(this.state&=~Yr),hn&&hn.autoDestroy===!1&&(this.state&=~Qr),this.errored=null,this.defaultEncoding=hn&&hn.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.decoder=null,this.encoding=null,hn&&hn.encoding&&(this.decoder=new _r(hn.encoding),this.encoding=hn.encoding)}function Kn(hn){if(!(this instanceof Kn))return new Kn(hn);const pn=this instanceof requireDuplex();this._readableState=new Zn(hn,this,pn),hn&&(typeof hn.read=="function"&&(this._read=hn.read),typeof hn.destroy=="function"&&(this._destroy=hn.destroy),typeof hn.construct=="function"&&(this._construct=hn.construct),hn.signal&&!pn&&Tr(hn.signal,this)),wr.call(this,hn),Dr.construct(this,()=>{this._readableState.needReadable&&mn(this,this._readableState)})}Kn.prototype.destroy=Dr.destroy,Kn.prototype._undestroy=Dr.undestroy,Kn.prototype._destroy=function(hn,pn){pn(hn)},Kn.prototype[mr.captureRejectionSymbol]=function(hn){this.destroy(hn)},Kn.prototype[ur]=function(){let hn;return this.destroyed||(hn=this.readableEnded?null:new fr,this.destroy(hn)),new cr((pn,kn)=>Ar(this,Mn=>Mn&&Mn!==hn?kn(Mn):pn(null)))},Kn.prototype.push=function(hn,pn){return eo(this,hn,pn,!1)},Kn.prototype.unshift=function(hn,pn){return eo(this,hn,pn,!0)};function eo(hn,pn,kn,Mn){Nr("readableAddChunk",pn);const Ln=hn._readableState;let vo;if(Ln.state&Ir||(typeof pn=="string"?(kn=kn||Ln.defaultEncoding,Ln.encoding!==kn&&(Mn&&Ln.encoding?pn=Or.from(pn,kn).toString(Ln.encoding):(pn=Or.from(pn,kn),kn=""))):pn instanceof Or?kn="":wr._isUint8Array(pn)?(pn=wr._uint8ArrayToBuffer(pn),kn=""):pn!=null&&(vo=new Mr("chunk",["string","Buffer","Uint8Array"],pn))),vo)vr(hn,vo);else if(pn===null)Ln.state&=~Jr,Lr(hn,Ln);else if(Ln.state&Ir||pn&&pn.length>0)if(Mn)if(Ln.state&Br)vr(hn,new gr);else{if(Ln.destroyed||Ln.errored)return!1;vn(hn,Ln,pn,!0)}else if(Ln.ended)vr(hn,new pr);else{if(Ln.destroyed||Ln.errored)return!1;Ln.state&=~Jr,Ln.decoder&&!kn?(pn=Ln.decoder.write(pn),Ln.objectMode||pn.length!==0?vn(hn,Ln,pn,!1):mn(hn,Ln)):vn(hn,Ln,pn,!1)}else Mn||(Ln.state&=~Jr,mn(hn,Ln));return!Ln.ended&&(Ln.length<Ln.highWaterMark||Ln.length===0)}function vn(hn,pn,kn,Mn){pn.flowing&&pn.length===0&&!pn.sync&&hn.listenerCount("data")>0?(pn.state&Pn?pn.awaitDrainWriters.clear():pn.awaitDrainWriters=null,pn.dataEmitted=!0,hn.emit("data",kn)):(pn.length+=pn.objectMode?1:kn.length,Mn?pn.buffer.unshift(kn):pn.buffer.push(kn),pn.state&an&&Fr(hn)),mn(hn,pn)}Kn.prototype.isPaused=function(){const hn=this._readableState;return hn[br]===!0||hn.flowing===!1},Kn.prototype.setEncoding=function(hn){const pn=new _r(hn);this._readableState.decoder=pn,this._readableState.encoding=this._readableState.decoder.encoding;const kn=this._readableState.buffer;let Mn="";for(const Ln of kn)Mn+=pn.write(Ln);return kn.clear(),Mn!==""&&kn.push(Mn),this._readableState.length=Mn.length,this};const xn=1073741824;function Dn(hn){if(hn>xn)throw new Sr("size","<= 1GiB",hn);return hn--,hn|=hn>>>1,hn|=hn>>>2,hn|=hn>>>4,hn|=hn>>>8,hn|=hn>>>16,hn++,hn}function Xr(hn,pn){return hn<=0||pn.length===0&&pn.ended?0:pn.state&Ir?1:nr(hn)?pn.flowing&&pn.length?pn.buffer.first().length:pn.length:hn<=pn.length?hn:pn.ended?pn.length:0}Kn.prototype.read=function(hn){Nr("read",hn),hn===void 0?hn=NaN:rr(hn)||(hn=ir(hn,10));const pn=this._readableState,kn=hn;if(hn>pn.highWaterMark&&(pn.highWaterMark=Dn(hn)),hn!==0&&(pn.state&=~tn),hn===0&&pn.needReadable&&((pn.highWaterMark!==0?pn.length>=pn.highWaterMark:pn.length>0)||pn.ended))return Nr("read: emitReadable",pn.length,pn.ended),pn.length===0&&pn.ended?uo(this):Fr(this),null;if(hn=Xr(hn,pn),hn===0&&pn.ended)return pn.length===0&&uo(this),null;let Mn=(pn.state&an)!==0;if(Nr("need readable",Mn),(pn.length===0||pn.length-hn<pn.highWaterMark)&&(Mn=!0,Nr("length less than watermark",Mn)),pn.ended||pn.reading||pn.destroyed||pn.errored||!pn.constructed)Mn=!1,Nr("reading, ended or constructing",Mn);else if(Mn){Nr("do read"),pn.state|=Jr|qr,pn.length===0&&(pn.state|=an);try{this._read(pn.highWaterMark)}catch(vo){vr(this,vo)}pn.state&=~qr,pn.reading||(hn=Xr(kn,pn))}let Ln;return hn>0?Ln=Ro(hn,pn):Ln=null,Ln===null?(pn.needReadable=pn.length<=pn.highWaterMark,hn=0):(pn.length-=hn,pn.multiAwaitDrain?pn.awaitDrainWriters.clear():pn.awaitDrainWriters=null),pn.length===0&&(pn.ended||(pn.needReadable=!0),kn!==hn&&pn.ended&&uo(this)),Ln!==null&&!pn.errorEmitted&&!pn.closeEmitted&&(pn.dataEmitted=!0,this.emit("data",Ln)),Ln};function Lr(hn,pn){if(Nr("onEofChunk"),!pn.ended){if(pn.decoder){const kn=pn.decoder.end();kn&&kn.length&&(pn.buffer.push(kn),pn.length+=pn.objectMode?1:kn.length)}pn.ended=!0,pn.sync?Fr(hn):(pn.needReadable=!1,pn.emittedReadable=!0,ln(hn))}}function Fr(hn){const pn=hn._readableState;Nr("emitReadable",pn.needReadable,pn.emittedReadable),pn.needReadable=!1,pn.emittedReadable||(Nr("emitReadable",pn.flowing),pn.emittedReadable=!0,tr.nextTick(ln,hn))}function ln(hn){const pn=hn._readableState;Nr("emitReadable_",pn.destroyed,pn.length,pn.ended),!pn.destroyed&&!pn.errored&&(pn.length||pn.ended)&&(hn.emit("readable"),pn.emittedReadable=!1),pn.needReadable=!pn.flowing&&!pn.ended&&pn.length<=pn.highWaterMark,zs(hn)}function mn(hn,pn){!pn.readingMore&&pn.constructed&&(pn.readingMore=!0,tr.nextTick(_n,hn,pn))}function _n(hn,pn){for(;!pn.reading&&!pn.ended&&(pn.length<pn.highWaterMark||pn.flowing&&pn.length===0);){const kn=pn.length;if(Nr("maybeReadMore read 0"),hn.read(0),kn===pn.length)break}pn.readingMore=!1}Kn.prototype._read=function(hn){throw new Pr("_read()")},Kn.prototype.pipe=function(hn,pn){const kn=this,Mn=this._readableState;Mn.pipes.length===1&&(Mn.multiAwaitDrain||(Mn.multiAwaitDrain=!0,Mn.awaitDrainWriters=new lr(Mn.awaitDrainWriters?[Mn.awaitDrainWriters]:[]))),Mn.pipes.push(hn),Nr("pipe count=%d opts=%j",Mn.pipes.length,pn);const vo=(!pn||pn.end!==!1)&&hn!==tr.stdout&&hn!==tr.stderr?nn:Hn;Mn.endEmitted?tr.nextTick(vo):kn.once("end",vo),hn.on("unpipe",Gr);function Gr(go,Yn){Nr("onunpipe"),go===kn&&Yn&&Yn.hasUnpiped===!1&&(Yn.hasUnpiped=!0,fn())}function nn(){Nr("onend"),hn.end()}let sn,kr=!1;function fn(){Nr("cleanup"),hn.removeListener("close",Bn),hn.removeListener("finish",jn),sn&&hn.removeListener("drain",sn),hn.removeListener("error",Tn),hn.removeListener("unpipe",Gr),kn.removeListener("end",nn),kn.removeListener("end",Hn),kn.removeListener("data",$n),kr=!0,sn&&Mn.awaitDrainWriters&&(!hn._writableState||hn._writableState.needDrain)&&sn()}function En(){kr||(Mn.pipes.length===1&&Mn.pipes[0]===hn?(Nr("false write response, pause",0),Mn.awaitDrainWriters=hn,Mn.multiAwaitDrain=!1):Mn.pipes.length>1&&Mn.pipes.includes(hn)&&(Nr("false write response, pause",Mn.awaitDrainWriters.size),Mn.awaitDrainWriters.add(hn)),kn.pause()),sn||(sn=An(kn,hn),hn.on("drain",sn))}kn.on("data",$n);function $n(go){Nr("ondata");const Yn=hn.write(go);Nr("dest.write",Yn),Yn===!1&&En()}function Tn(go){if(Nr("onerror",go),Hn(),hn.removeListener("error",Tn),hn.listenerCount("error")===0){const Yn=hn._writableState||hn._readableState;Yn&&!Yn.errorEmitted?vr(hn,go):hn.emit("error",go)}}xr(hn,"error",Tn);function Bn(){hn.removeListener("finish",jn),Hn()}hn.once("close",Bn);function jn(){Nr("onfinish"),hn.removeListener("close",Bn),Hn()}hn.once("finish",jn);function Hn(){Nr("unpipe"),kn.unpipe(hn)}return hn.emit("pipe",kn),hn.writableNeedDrain===!0?En():Mn.flowing||(Nr("pipe resume"),kn.resume()),hn};function An(hn,pn){return function(){const Mn=hn._readableState;Mn.awaitDrainWriters===pn?(Nr("pipeOnDrain",1),Mn.awaitDrainWriters=null):Mn.multiAwaitDrain&&(Nr("pipeOnDrain",Mn.awaitDrainWriters.size),Mn.awaitDrainWriters.delete(pn)),(!Mn.awaitDrainWriters||Mn.awaitDrainWriters.size===0)&&hn.listenerCount("data")&&hn.resume()}}Kn.prototype.unpipe=function(hn){const pn=this._readableState,kn={hasUnpiped:!1};if(pn.pipes.length===0)return this;if(!hn){const Ln=pn.pipes;pn.pipes=[],this.pause();for(let vo=0;vo<Ln.length;vo++)Ln[vo].emit("unpipe",this,{hasUnpiped:!1});return this}const Mn=er(pn.pipes,hn);return Mn===-1?this:(pn.pipes.splice(Mn,1),pn.pipes.length===0&&this.pause(),hn.emit("unpipe",this,kn),this)},Kn.prototype.on=function(hn,pn){const kn=wr.prototype.on.call(this,hn,pn),Mn=this._readableState;return hn==="data"?(Mn.readableListening=this.listenerCount("readable")>0,Mn.flowing!==!1&&this.resume()):hn==="readable"&&!Mn.endEmitted&&!Mn.readableListening&&(Mn.readableListening=Mn.needReadable=!0,Mn.flowing=!1,Mn.emittedReadable=!1,Nr("on readable",Mn.length,Mn.reading),Mn.length?Fr(this):Mn.reading||tr.nextTick(Xs,this)),kn},Kn.prototype.addListener=Kn.prototype.on,Kn.prototype.removeListener=function(hn,pn){const kn=wr.prototype.removeListener.call(this,hn,pn);return hn==="readable"&&tr.nextTick(Gn,this),kn},Kn.prototype.off=Kn.prototype.removeListener,Kn.prototype.removeAllListeners=function(hn){const pn=wr.prototype.removeAllListeners.apply(this,arguments);return(hn==="readable"||hn===void 0)&&tr.nextTick(Gn,this),pn};function Gn(hn){const pn=hn._readableState;pn.readableListening=hn.listenerCount("readable")>0,pn.resumeScheduled&&pn[br]===!1?pn.flowing=!0:hn.listenerCount("data")>0?hn.resume():pn.readableListening||(pn.flowing=null)}function Xs(hn){Nr("readable nexttick read 0"),hn.read(0)}Kn.prototype.resume=function(){const hn=this._readableState;return hn.flowing||(Nr("resume"),hn.flowing=!hn.readableListening,Jn(this,hn)),hn[br]=!1,this};function Jn(hn,pn){pn.resumeScheduled||(pn.resumeScheduled=!0,tr.nextTick(no,hn,pn))}function no(hn,pn){Nr("resume",pn.reading),pn.reading||hn.read(0),pn.resumeScheduled=!1,hn.emit("resume"),zs(hn),pn.flowing&&!pn.reading&&hn.read(0)}Kn.prototype.pause=function(){return Nr("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(Nr("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[br]=!0,this};function zs(hn){const pn=hn._readableState;for(Nr("flow",pn.flowing);pn.flowing&&hn.read()!==null;);}Kn.prototype.wrap=function(hn){let pn=!1;hn.on("data",Mn=>{!this.push(Mn)&&hn.pause&&(pn=!0,hn.pause())}),hn.on("end",()=>{this.push(null)}),hn.on("error",Mn=>{vr(this,Mn)}),hn.on("close",()=>{this.destroy()}),hn.on("destroy",()=>{this.destroy()}),this._read=()=>{pn&&hn.resume&&(pn=!1,hn.resume())};const kn=or(hn);for(let Mn=1;Mn<kn.length;Mn++){const Ln=kn[Mn];this[Ln]===void 0&&typeof hn[Ln]=="function"&&(this[Ln]=hn[Ln].bind(hn))}return this},Kn.prototype[dr]=function(){return to(this)},Kn.prototype.iterator=function(hn){return hn!==void 0&&hr(hn,"options"),to(this,hn)};function to(hn,pn){typeof hn.read!="function"&&(hn=Kn.wrap(hn,{objectMode:!0}));const kn=No(hn,pn);return kn.stream=hn,kn}async function*No(hn,pn){let kn=Er;function Mn(Gr){this===hn?(kn(),kn=Er):kn=Gr}hn.on("readable",Mn);let Ln;const vo=Ar(hn,{writable:!1},Gr=>{Ln=Gr?Cr(Ln,Gr):null,kn(),kn=Er});try{for(;;){const Gr=hn.destroyed?null:hn.read();if(Gr!==null)yield Gr;else{if(Ln)throw Ln;if(Ln===null)return;await new cr(Mn)}}}catch(Gr){throw Ln=Cr(Ln,Gr),Ln}finally{(Ln||(pn==null?void 0:pn.destroyOnReturn)!==!1)&&(Ln===void 0||hn._readableState.autoDestroy)?Dr.destroyer(hn,null):(hn.off("readable",Mn),vo())}}sr(Kn.prototype,{readable:{__proto__:null,get(){const hn=this._readableState;return!!hn&&hn.readable!==!1&&!hn.destroyed&&!hn.errorEmitted&&!hn.endEmitted},set(hn){this._readableState&&(this._readableState.readable=!!hn)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._readableState.readable!==!1&&(this._readableState.destroyed||this._readableState.errored)&&!this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(hn){this._readableState&&(this._readableState.flowing=hn)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.objectMode:!1}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return this._readableState?this._readableState.closed:!1}},destroyed:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.destroyed:!1},set(hn){this._readableState&&(this._readableState.destroyed=hn)}},readableEnded:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.endEmitted:!1}}}),sr(Zn.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return this[br]!==!1},set(hn){this[br]=!!hn}}}),Kn._fromList=Ro;function Ro(hn,pn){if(pn.length===0)return null;let kn;return pn.objectMode?kn=pn.buffer.shift():!hn||hn>=pn.length?(pn.decoder?kn=pn.buffer.join(""):pn.buffer.length===1?kn=pn.buffer.first():kn=pn.buffer.concat(pn.length),pn.buffer.clear()):kn=pn.buffer.consume(hn,pn.decoder),kn}function uo(hn){const pn=hn._readableState;Nr("endReadable",pn.endEmitted),pn.endEmitted||(pn.ended=!0,tr.nextTick(To,pn,hn))}function To(hn,pn){if(Nr("endReadableNT",hn.endEmitted,hn.length),!hn.errored&&!hn.closeEmitted&&!hn.endEmitted&&hn.length===0){if(hn.endEmitted=!0,pn.emit("end"),pn.writable&&pn.allowHalfOpen===!1)tr.nextTick(Eo,pn);else if(hn.autoDestroy){const kn=pn._writableState;(!kn||kn.autoDestroy&&(kn.finished||kn.writable===!1))&&pn.destroy()}}}function Eo(hn){hn.writable&&!hn.writableEnded&&!hn.destroyed&&hn.end()}Kn.from=function(hn,pn){return $r(Kn,hn,pn)};let so;function Po(){return so===void 0&&(so={}),so}return Kn.fromWeb=function(hn,pn){return Po().newStreamReadableFromReadableStream(hn,pn)},Kn.toWeb=function(hn,pn){return Po().newReadableStreamFromStreamReadable(hn,pn)},Kn.wrap=function(hn,pn){var kn,Mn;return new Kn({objectMode:(kn=(Mn=hn.readableObjectMode)!==null&&Mn!==void 0?Mn:hn.objectMode)!==null&&kn!==void 0?kn:!0,...pn,destroy(Ln,vo){Dr.destroyer(hn,Ln),vo(Ln)}}).wrap(hn)},readable}var writable,hasRequiredWritable;function requireWritable(){if(hasRequiredWritable)return writable;hasRequiredWritable=1;const tr=browserExports$2,{ArrayPrototypeSlice:er,Error:rr,FunctionPrototypeSymbolHasInstance:nr,ObjectDefineProperty:ir,ObjectDefineProperties:sr,ObjectSetPrototypeOf:or,StringPrototypeToLowerCase:ar,Symbol:cr,SymbolHasInstance:lr}=primordials;writable=hr,hr.WritableState=gr;const{EventEmitter:ur}=eventsExports,dr=legacy.Stream,{Buffer:yr}=buffer$1,mr=destroy_1$1,{addAbortSignal:wr}=addAbortSignalExports,{getHighWaterMark:xr,getDefaultHighWaterMark:Or}=state$1,{ERR_INVALID_ARG_TYPE:Tr,ERR_METHOD_NOT_IMPLEMENTED:Ar,ERR_MULTIPLE_CALLBACK:Nr,ERR_STREAM_CANNOT_PIPE:Ur,ERR_STREAM_DESTROYED:Dr,ERR_STREAM_ALREADY_FINISHED:Hr,ERR_STREAM_NULL_VALUES:zr,ERR_STREAM_WRITE_AFTER_END:Cr,ERR_UNKNOWN_ENCODING:Mr}=errors$5.codes,{errorOrDestroy:Pr}=mr;or(hr.prototype,dr.prototype),or(hr,dr);function Sr(){}const pr=cr("kOnFinished");function gr(Qr,un,gn){typeof gn!="boolean"&&(gn=un instanceof requireDuplex()),this.objectMode=!!(Qr&&Qr.objectMode),gn&&(this.objectMode=this.objectMode||!!(Qr&&Qr.writableObjectMode)),this.highWaterMark=Qr?xr(this,Qr,"writableHighWaterMark",gn):Or(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;const Rn=!!(Qr&&Qr.decodeStrings===!1);this.decodeStrings=!Rn,this.defaultEncoding=Qr&&Qr.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=vr.bind(void 0,un),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,fr(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!Qr||Qr.emitClose!==!1,this.autoDestroy=!Qr||Qr.autoDestroy!==!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[pr]=[]}function fr(Qr){Qr.buffered=[],Qr.bufferedIndex=0,Qr.allBuffers=!0,Qr.allNoop=!0}gr.prototype.getBuffer=function(){return er(this.buffered,this.bufferedIndex)},ir(gr.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}});function hr(Qr){const un=this instanceof requireDuplex();if(!un&&!nr(hr,this))return new hr(Qr);this._writableState=new gr(Qr,this,un),Qr&&(typeof Qr.write=="function"&&(this._write=Qr.write),typeof Qr.writev=="function"&&(this._writev=Qr.writev),typeof Qr.destroy=="function"&&(this._destroy=Qr.destroy),typeof Qr.final=="function"&&(this._final=Qr.final),typeof Qr.construct=="function"&&(this._construct=Qr.construct),Qr.signal&&wr(Qr.signal,this)),dr.call(this,Qr),mr.construct(this,()=>{const gn=this._writableState;gn.writing||Jr(this,gn),tn(this,gn)})}ir(hr,lr,{__proto__:null,value:function(Qr){return nr(this,Qr)?!0:this!==hr?!1:Qr&&Qr._writableState instanceof gr}}),hr.prototype.pipe=function(){Pr(this,new Ur)};function br(Qr,un,gn,Rn){const Pn=Qr._writableState;if(typeof gn=="function")Rn=gn,gn=Pn.defaultEncoding;else{if(!gn)gn=Pn.defaultEncoding;else if(gn!=="buffer"&&!yr.isEncoding(gn))throw new Mr(gn);typeof Rn!="function"&&(Rn=Sr)}if(un===null)throw new zr;if(!Pn.objectMode)if(typeof un=="string")Pn.decodeStrings!==!1&&(un=yr.from(un,gn),gn="buffer");else if(un instanceof yr)gn="buffer";else if(dr._isUint8Array(un))un=dr._uint8ArrayToBuffer(un),gn="buffer";else throw new Tr("chunk",["string","Buffer","Uint8Array"],un);let Cn;return Pn.ending?Cn=new Cr:Pn.destroyed&&(Cn=new Dr("write")),Cn?(tr.nextTick(Rn,Cn),Pr(Qr,Cn,!0),Cn):(Pn.pendingcb++,_r(Qr,Pn,un,gn,Rn))}hr.prototype.write=function(Qr,un,gn){return br(this,Qr,un,gn)===!0},hr.prototype.cork=function(){this._writableState.corked++},hr.prototype.uncork=function(){const Qr=this._writableState;Qr.corked&&(Qr.corked--,Qr.writing||Jr(this,Qr))},hr.prototype.setDefaultEncoding=function(un){if(typeof un=="string"&&(un=ar(un)),!yr.isEncoding(un))throw new Mr(un);return this._writableState.defaultEncoding=un,this};function _r(Qr,un,gn,Rn,Pn){const Cn=un.objectMode?1:gn.length;un.length+=Cn;const Sn=un.length<un.highWaterMark;return Sn||(un.needDrain=!0),un.writing||un.corked||un.errored||!un.constructed?(un.buffered.push({chunk:gn,encoding:Rn,callback:Pn}),un.allBuffers&&Rn!=="buffer"&&(un.allBuffers=!1),un.allNoop&&Pn!==Sr&&(un.allNoop=!1)):(un.writelen=Cn,un.writecb=Pn,un.writing=!0,un.sync=!0,Qr._write(gn,Rn,un.onwrite),un.sync=!1),Sn&&!un.errored&&!un.destroyed}function $r(Qr,un,gn,Rn,Pn,Cn,Sn){un.writelen=Rn,un.writecb=Sn,un.writing=!0,un.sync=!0,un.destroyed?un.onwrite(new Dr("write")):gn?Qr._writev(Pn,un.onwrite):Qr._write(Pn,Cn,un.onwrite),un.sync=!1}function Er(Qr,un,gn,Rn){--un.pendingcb,Rn(gn),Br(un),Pr(Qr,gn)}function vr(Qr,un){const gn=Qr._writableState,Rn=gn.sync,Pn=gn.writecb;if(typeof Pn!="function"){Pr(Qr,new Nr);return}gn.writing=!1,gn.writecb=null,gn.length-=gn.writelen,gn.writelen=0,un?(un.stack,gn.errored||(gn.errored=un),Qr._readableState&&!Qr._readableState.errored&&(Qr._readableState.errored=un),Rn?tr.nextTick(Er,Qr,gn,un,Pn):Er(Qr,gn,un,Pn)):(gn.buffered.length>gn.bufferedIndex&&Jr(Qr,gn),Rn?gn.afterWriteTickInfo!==null&&gn.afterWriteTickInfo.cb===Pn?gn.afterWriteTickInfo.count++:(gn.afterWriteTickInfo={count:1,cb:Pn,stream:Qr,state:gn},tr.nextTick(Ir,gn.afterWriteTickInfo)):Rr(Qr,gn,1,Pn))}function Ir({stream:Qr,state:un,count:gn,cb:Rn}){return un.afterWriteTickInfo=null,Rr(Qr,un,gn,Rn)}function Rr(Qr,un,gn,Rn){for(!un.ending&&!Qr.destroyed&&un.length===0&&un.needDrain&&(un.needDrain=!1,Qr.emit("drain"));gn-- >0;)un.pendingcb--,Rn();un.destroyed&&Br(un),tn(Qr,un)}function Br(Qr){if(Qr.writing)return;for(let Pn=Qr.bufferedIndex;Pn<Qr.buffered.length;++Pn){var un;const{chunk:Cn,callback:Sn}=Qr.buffered[Pn],zn=Qr.objectMode?1:Cn.length;Qr.length-=zn,Sn((un=Qr.errored)!==null&&un!==void 0?un:new Dr("write"))}const gn=Qr[pr].splice(0);for(let Pn=0;Pn<gn.length;Pn++){var Rn;gn[Pn]((Rn=Qr.errored)!==null&&Rn!==void 0?Rn:new Dr("end"))}fr(Qr)}function Jr(Qr,un){if(un.corked||un.bufferProcessing||un.destroyed||!un.constructed)return;const{buffered:gn,bufferedIndex:Rn,objectMode:Pn}=un,Cn=gn.length-Rn;if(!Cn)return;let Sn=Rn;if(un.bufferProcessing=!0,Cn>1&&Qr._writev){un.pendingcb-=Cn-1;const zn=un.allNoop?Sr:Kn=>{for(let eo=Sn;eo<gn.length;++eo)gn[eo].callback(Kn)},Zn=un.allNoop&&Sn===0?gn:er(gn,Sn);Zn.allBuffers=un.allBuffers,$r(Qr,un,!0,un.length,Zn,"",zn),fr(un)}else{do{const{chunk:zn,encoding:Zn,callback:Kn}=gn[Sn];gn[Sn++]=null;const eo=Pn?1:zn.length;$r(Qr,un,!1,eo,zn,Zn,Kn)}while(Sn<gn.length&&!un.writing);Sn===gn.length?fr(un):Sn>256?(gn.splice(0,Sn),un.bufferedIndex=0):un.bufferedIndex=Sn}un.bufferProcessing=!1}hr.prototype._write=function(Qr,un,gn){if(this._writev)this._writev([{chunk:Qr,encoding:un}],gn);else throw new Ar("_write()")},hr.prototype._writev=null,hr.prototype.end=function(Qr,un,gn){const Rn=this._writableState;typeof Qr=="function"?(gn=Qr,Qr=null,un=null):typeof un=="function"&&(gn=un,un=null);let Pn;if(Qr!=null){const Cn=br(this,Qr,un);Cn instanceof rr&&(Pn=Cn)}return Rn.corked&&(Rn.corked=1,this.uncork()),Pn||(!Rn.errored&&!Rn.ending?(Rn.ending=!0,tn(this,Rn,!0),Rn.ended=!0):Rn.finished?Pn=new Hr("end"):Rn.destroyed&&(Pn=new Dr("end"))),typeof gn=="function"&&(Pn||Rn.finished?tr.nextTick(gn,Pn):Rn[pr].push(gn)),this};function Wr(Qr){return Qr.ending&&!Qr.destroyed&&Qr.constructed&&Qr.length===0&&!Qr.errored&&Qr.buffered.length===0&&!Qr.finished&&!Qr.writing&&!Qr.errorEmitted&&!Qr.closeEmitted}function qr(Qr,un){let gn=!1;function Rn(Pn){if(gn){Pr(Qr,Pn??Nr());return}if(gn=!0,un.pendingcb--,Pn){const Cn=un[pr].splice(0);for(let Sn=0;Sn<Cn.length;Sn++)Cn[Sn](Pn);Pr(Qr,Pn,un.sync)}else Wr(un)&&(un.prefinished=!0,Qr.emit("prefinish"),un.pendingcb++,tr.nextTick(cn,Qr,un))}un.sync=!0,un.pendingcb++;try{Qr._final(Rn)}catch(Pn){Rn(Pn)}un.sync=!1}function an(Qr,un){!un.prefinished&&!un.finalCalled&&(typeof Qr._final=="function"&&!un.destroyed?(un.finalCalled=!0,qr(Qr,un)):(un.prefinished=!0,Qr.emit("prefinish")))}function tn(Qr,un,gn){Wr(un)&&(an(Qr,un),un.pendingcb===0&&(gn?(un.pendingcb++,tr.nextTick((Rn,Pn)=>{Wr(Pn)?cn(Rn,Pn):Pn.pendingcb--},Qr,un)):Wr(un)&&(un.pendingcb++,cn(Qr,un))))}function cn(Qr,un){un.pendingcb--,un.finished=!0;const gn=un[pr].splice(0);for(let Rn=0;Rn<gn.length;Rn++)gn[Rn]();if(Qr.emit("finish"),un.autoDestroy){const Rn=Qr._readableState;(!Rn||Rn.autoDestroy&&(Rn.endEmitted||Rn.readable===!1))&&Qr.destroy()}}sr(hr.prototype,{closed:{__proto__:null,get(){return this._writableState?this._writableState.closed:!1}},destroyed:{__proto__:null,get(){return this._writableState?this._writableState.destroyed:!1},set(Qr){this._writableState&&(this._writableState.destroyed=Qr)}},writable:{__proto__:null,get(){const Qr=this._writableState;return!!Qr&&Qr.writable!==!1&&!Qr.destroyed&&!Qr.errored&&!Qr.ending&&!Qr.ended},set(Qr){this._writableState&&(this._writableState.writable=!!Qr)}},writableFinished:{__proto__:null,get(){return this._writableState?this._writableState.finished:!1}},writableObjectMode:{__proto__:null,get(){return this._writableState?this._writableState.objectMode:!1}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return this._writableState?this._writableState.ending:!1}},writableNeedDrain:{__proto__:null,get(){const Qr=this._writableState;return Qr?!Qr.destroyed&&!Qr.ending&&Qr.needDrain:!1}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._writableState.writable!==!1&&(this._writableState.destroyed||this._writableState.errored)&&!this._writableState.finished)}}});const dn=mr.destroy;hr.prototype.destroy=function(Qr,un){const gn=this._writableState;return!gn.destroyed&&(gn.bufferedIndex<gn.buffered.length||gn[pr].length)&&tr.nextTick(Br,gn),dn.call(this,Qr,un),this},hr.prototype._undestroy=mr.undestroy,hr.prototype._destroy=function(Qr,un){un(Qr)},hr.prototype[ur.captureRejectionSymbol]=function(Qr){this.destroy(Qr)};let Zr;function Yr(){return Zr===void 0&&(Zr={}),Zr}return hr.fromWeb=function(Qr,un){return Yr().newStreamWritableFromWritableStream(Qr,un)},hr.toWeb=function(Qr){return Yr().newWritableStreamFromStreamWritable(Qr)},writable}var duplexify,hasRequiredDuplexify;function requireDuplexify(){if(hasRequiredDuplexify)return duplexify;hasRequiredDuplexify=1;const tr=browserExports$2,er=buffer$1,{isReadable:rr,isWritable:nr,isIterable:ir,isNodeStream:sr,isReadableNodeStream:or,isWritableNodeStream:ar,isDuplexNodeStream:cr,isReadableStream:lr,isWritableStream:ur}=utils$7,dr=endOfStreamExports,{AbortError:yr,codes:{ERR_INVALID_ARG_TYPE:mr,ERR_INVALID_RETURN_VALUE:wr}}=errors$5,{destroyer:xr}=destroy_1$1,Or=requireDuplex(),Tr=requireReadable(),Ar=requireWritable(),{createDeferredPromise:Nr}=utilExports,Ur=from_1,Dr=globalThis.Blob||er.Blob,Hr=typeof Dr<"u"?function(gr){return gr instanceof Dr}:function(gr){return!1},zr=globalThis.AbortController||requireBrowser().AbortController,{FunctionPrototypeCall:Cr}=primordials;class Mr extends Or{constructor(gr){super(gr),(gr==null?void 0:gr.readable)===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),(gr==null?void 0:gr.writable)===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}}duplexify=function pr(gr,fr){if(cr(gr))return gr;if(or(gr))return Sr({readable:gr});if(ar(gr))return Sr({writable:gr});if(sr(gr))return Sr({writable:!1,readable:!1});if(lr(gr))return Sr({readable:Tr.fromWeb(gr)});if(ur(gr))return Sr({writable:Ar.fromWeb(gr)});if(typeof gr=="function"){const{value:br,write:_r,final:$r,destroy:Er}=Pr(gr);if(ir(br))return Ur(Mr,br,{objectMode:!0,write:_r,final:$r,destroy:Er});const vr=br==null?void 0:br.then;if(typeof vr=="function"){let Ir;const Rr=Cr(vr,br,Br=>{if(Br!=null)throw new wr("nully","body",Br)},Br=>{xr(Ir,Br)});return Ir=new Mr({objectMode:!0,readable:!1,write:_r,final(Br){$r(async()=>{try{await Rr,tr.nextTick(Br,null)}catch(Jr){tr.nextTick(Br,Jr)}})},destroy:Er})}throw new wr("Iterable, AsyncIterable or AsyncFunction",fr,br)}if(Hr(gr))return pr(gr.arrayBuffer());if(ir(gr))return Ur(Mr,gr,{objectMode:!0,writable:!1});if(lr(gr==null?void 0:gr.readable)&&ur(gr==null?void 0:gr.writable))return Mr.fromWeb(gr);if(typeof(gr==null?void 0:gr.writable)=="object"||typeof(gr==null?void 0:gr.readable)=="object"){const br=gr!=null&&gr.readable?or(gr==null?void 0:gr.readable)?gr==null?void 0:gr.readable:pr(gr.readable):void 0,_r=gr!=null&&gr.writable?ar(gr==null?void 0:gr.writable)?gr==null?void 0:gr.writable:pr(gr.writable):void 0;return Sr({readable:br,writable:_r})}const hr=gr==null?void 0:gr.then;if(typeof hr=="function"){let br;return Cr(hr,gr,_r=>{_r!=null&&br.push(_r),br.push(null)},_r=>{xr(br,_r)}),br=new Mr({objectMode:!0,writable:!1,read(){}})}throw new mr(fr,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],gr)};function Pr(pr){let{promise:gr,resolve:fr}=Nr();const hr=new zr,br=hr.signal;return{value:pr(async function*(){for(;;){const $r=gr;gr=null;const{chunk:Er,done:vr,cb:Ir}=await $r;if(tr.nextTick(Ir),vr)return;if(br.aborted)throw new yr(void 0,{cause:br.reason});({promise:gr,resolve:fr}=Nr()),yield Er}}(),{signal:br}),write($r,Er,vr){const Ir=fr;fr=null,Ir({chunk:$r,done:!1,cb:vr})},final($r){const Er=fr;fr=null,Er({done:!0,cb:$r})},destroy($r,Er){hr.abort(),Er($r)}}}function Sr(pr){const gr=pr.readable&&typeof pr.readable.read!="function"?Tr.wrap(pr.readable):pr.readable,fr=pr.writable;let hr=!!rr(gr),br=!!nr(fr),_r,$r,Er,vr,Ir;function Rr(Br){const Jr=vr;vr=null,Jr?Jr(Br):Br&&Ir.destroy(Br)}return Ir=new Mr({readableObjectMode:!!(gr!=null&&gr.readableObjectMode),writableObjectMode:!!(fr!=null&&fr.writableObjectMode),readable:hr,writable:br}),br&&(dr(fr,Br=>{br=!1,Br&&xr(gr,Br),Rr(Br)}),Ir._write=function(Br,Jr,Wr){fr.write(Br,Jr)?Wr():_r=Wr},Ir._final=function(Br){fr.end(),$r=Br},fr.on("drain",function(){if(_r){const Br=_r;_r=null,Br()}}),fr.on("finish",function(){if($r){const Br=$r;$r=null,Br()}})),hr&&(dr(gr,Br=>{hr=!1,Br&&xr(gr,Br),Rr(Br)}),gr.on("readable",function(){if(Er){const Br=Er;Er=null,Br()}}),gr.on("end",function(){Ir.push(null)}),Ir._read=function(){for(;;){const Br=gr.read();if(Br===null){Er=Ir._read;return}if(!Ir.push(Br))return}}),Ir._destroy=function(Br,Jr){!Br&&vr!==null&&(Br=new yr),Er=null,_r=null,$r=null,vr===null?Jr(Br):(vr=Jr,xr(fr,Br),xr(gr,Br))},Ir}return duplexify}var duplex$1,hasRequiredDuplex;function requireDuplex(){if(hasRequiredDuplex)return duplex$1;hasRequiredDuplex=1;const{ObjectDefineProperties:tr,ObjectGetOwnPropertyDescriptor:er,ObjectKeys:rr,ObjectSetPrototypeOf:nr}=primordials;duplex$1=or;const ir=requireReadable(),sr=requireWritable();nr(or.prototype,ir.prototype),nr(or,ir);{const ur=rr(sr.prototype);for(let dr=0;dr<ur.length;dr++){const yr=ur[dr];or.prototype[yr]||(or.prototype[yr]=sr.prototype[yr])}}function or(ur){if(!(this instanceof or))return new or(ur);ir.call(this,ur),sr.call(this,ur),ur?(this.allowHalfOpen=ur.allowHalfOpen!==!1,ur.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),ur.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}tr(or.prototype,{writable:{__proto__:null,...er(sr.prototype,"writable")},writableHighWaterMark:{__proto__:null,...er(sr.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...er(sr.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...er(sr.prototype,"writableBuffer")},writableLength:{__proto__:null,...er(sr.prototype,"writableLength")},writableFinished:{__proto__:null,...er(sr.prototype,"writableFinished")},writableCorked:{__proto__:null,...er(sr.prototype,"writableCorked")},writableEnded:{__proto__:null,...er(sr.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...er(sr.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set(ur){this._readableState&&this._writableState&&(this._readableState.destroyed=ur,this._writableState.destroyed=ur)}}});let ar;function cr(){return ar===void 0&&(ar={}),ar}or.fromWeb=function(ur,dr){return cr().newStreamDuplexFromReadableWritablePair(ur,dr)},or.toWeb=function(ur){return cr().newReadableWritablePairFromDuplex(ur)};let lr;return or.from=function(ur){return lr||(lr=requireDuplexify()),lr(ur,"body")},duplex$1}const{ObjectSetPrototypeOf:ObjectSetPrototypeOf$1,Symbol:Symbol$2}=primordials;var transform=Transform$5;const{ERR_METHOD_NOT_IMPLEMENTED:ERR_METHOD_NOT_IMPLEMENTED$1}=errors$5.codes,Duplex$3=requireDuplex(),{getHighWaterMark:getHighWaterMark$1}=state$1;ObjectSetPrototypeOf$1(Transform$5.prototype,Duplex$3.prototype);ObjectSetPrototypeOf$1(Transform$5,Duplex$3);const kCallback=Symbol$2("kCallback");function Transform$5(tr){if(!(this instanceof Transform$5))return new Transform$5(tr);const er=tr?getHighWaterMark$1(this,tr,"readableHighWaterMark",!0):null;er===0&&(tr={...tr,highWaterMark:null,readableHighWaterMark:er,writableHighWaterMark:tr.writableHighWaterMark||0}),Duplex$3.call(this,tr),this._readableState.sync=!1,this[kCallback]=null,tr&&(typeof tr.transform=="function"&&(this._transform=tr.transform),typeof tr.flush=="function"&&(this._flush=tr.flush)),this.on("prefinish",prefinish$1)}function final(tr){typeof this._flush=="function"&&!this.destroyed?this._flush((er,rr)=>{if(er){tr?tr(er):this.destroy(er);return}rr!=null&&this.push(rr),this.push(null),tr&&tr()}):(this.push(null),tr&&tr())}function prefinish$1(){this._final!==final&&final.call(this)}Transform$5.prototype._final=final;Transform$5.prototype._transform=function(tr,er,rr){throw new ERR_METHOD_NOT_IMPLEMENTED$1("_transform()")};Transform$5.prototype._write=function(tr,er,rr){const nr=this._readableState,ir=this._writableState,sr=nr.length;this._transform(tr,er,(or,ar)=>{if(or){rr(or);return}ar!=null&&this.push(ar),ir.ended||sr===nr.length||nr.length<nr.highWaterMark?rr():this[kCallback]=rr})};Transform$5.prototype._read=function(){if(this[kCallback]){const tr=this[kCallback];this[kCallback]=null,tr()}};const{ObjectSetPrototypeOf}=primordials;var passthrough=PassThrough$2;const Transform$4=transform;ObjectSetPrototypeOf(PassThrough$2.prototype,Transform$4.prototype);ObjectSetPrototypeOf(PassThrough$2,Transform$4);function PassThrough$2(tr){if(!(this instanceof PassThrough$2))return new PassThrough$2(tr);Transform$4.call(this,tr)}PassThrough$2.prototype._transform=function(tr,er,rr){rr(null,tr)};const process$1=browserExports$2,{ArrayIsArray,Promise:Promise$2,SymbolAsyncIterator,SymbolDispose}=primordials,eos$6=endOfStreamExports,{once:once$7}=utilExports,destroyImpl=destroy_1$1,Duplex$2=requireDuplex(),{aggregateTwoErrors,codes:{ERR_INVALID_ARG_TYPE:ERR_INVALID_ARG_TYPE$2,ERR_INVALID_RETURN_VALUE,ERR_MISSING_ARGS:ERR_MISSING_ARGS$3,ERR_STREAM_DESTROYED:ERR_STREAM_DESTROYED$1,ERR_STREAM_PREMATURE_CLOSE:ERR_STREAM_PREMATURE_CLOSE$1},AbortError:AbortError$2}=errors$5,{validateFunction,validateAbortSignal:validateAbortSignal$1}=validators$1,{isIterable:isIterable$1,isReadable:isReadable$1,isReadableNodeStream,isNodeStream:isNodeStream$2,isTransformStream:isTransformStream$1,isWebStream:isWebStream$1,isReadableStream:isReadableStream$2,isReadableFinished}=utils$7,AbortController$2=globalThis.AbortController||requireBrowser().AbortController;let PassThrough$1,Readable,addAbortListener;function destroyer$3(tr,er,rr){let nr=!1;tr.on("close",()=>{nr=!0});const ir=eos$6(tr,{readable:er,writable:rr},sr=>{nr=!sr});return{destroy:sr=>{nr||(nr=!0,destroyImpl.destroyer(tr,sr||new ERR_STREAM_DESTROYED$1("pipe")))},cleanup:ir}}function popCallback$1(tr){return validateFunction(tr[tr.length-1],"streams[stream.length - 1]"),tr.pop()}function makeAsyncIterable(tr){if(isIterable$1(tr))return tr;if(isReadableNodeStream(tr))return fromReadable(tr);throw new ERR_INVALID_ARG_TYPE$2("val",["Readable","Iterable","AsyncIterable"],tr)}async function*fromReadable(tr){Readable||(Readable=requireReadable()),yield*Readable.prototype[SymbolAsyncIterator].call(tr)}async function pumpToNode(tr,er,rr,{end:nr}){let ir,sr=null;const or=lr=>{if(lr&&(ir=lr),sr){const ur=sr;sr=null,ur()}},ar=()=>new Promise$2((lr,ur)=>{ir?ur(ir):sr=()=>{ir?ur(ir):lr()}});er.on("drain",or);const cr=eos$6(er,{readable:!1},or);try{er.writableNeedDrain&&await ar();for await(const lr of tr)er.write(lr)||await ar();nr&&(er.end(),await ar()),rr()}catch(lr){rr(ir!==lr?aggregateTwoErrors(ir,lr):lr)}finally{cr(),er.off("drain",or)}}async function pumpToWeb(tr,er,rr,{end:nr}){isTransformStream$1(er)&&(er=er.writable);const ir=er.getWriter();try{for await(const sr of tr)await ir.ready,ir.write(sr).catch(()=>{});await ir.ready,nr&&await ir.close(),rr()}catch(sr){try{await ir.abort(sr),rr(sr)}catch(or){rr(or)}}}function pipeline$2(...tr){return pipelineImpl(tr,once$7(popCallback$1(tr)))}function pipelineImpl(tr,er,rr){if(tr.length===1&&ArrayIsArray(tr[0])&&(tr=tr[0]),tr.length<2)throw new ERR_MISSING_ARGS$3("streams");const nr=new AbortController$2,ir=nr.signal,sr=rr==null?void 0:rr.signal,or=[];validateAbortSignal$1(sr,"options.signal");function ar(){wr(new AbortError$2)}addAbortListener=addAbortListener||utilExports.addAbortListener;let cr;sr&&(cr=addAbortListener(sr,ar));let lr,ur;const dr=[];let yr=0;function mr(Ar){wr(Ar,--yr===0)}function wr(Ar,Nr){var Ur;if(Ar&&(!lr||lr.code==="ERR_STREAM_PREMATURE_CLOSE")&&(lr=Ar),!(!lr&&!Nr)){for(;dr.length;)dr.shift()(lr);(Ur=cr)===null||Ur===void 0||Ur[SymbolDispose](),nr.abort(),Nr&&(lr||or.forEach(Dr=>Dr()),process$1.nextTick(er,lr,ur))}}let xr;for(let Ar=0;Ar<tr.length;Ar++){const Nr=tr[Ar],Ur=Ar<tr.length-1,Dr=Ar>0,Hr=Ur||(rr==null?void 0:rr.end)!==!1,zr=Ar===tr.length-1;if(isNodeStream$2(Nr)){let Cr=function(Mr){Mr&&Mr.name!=="AbortError"&&Mr.code!=="ERR_STREAM_PREMATURE_CLOSE"&&mr(Mr)};if(Hr){const{destroy:Mr,cleanup:Pr}=destroyer$3(Nr,Ur,Dr);dr.push(Mr),isReadable$1(Nr)&&zr&&or.push(Pr)}Nr.on("error",Cr),isReadable$1(Nr)&&zr&&or.push(()=>{Nr.removeListener("error",Cr)})}if(Ar===0)if(typeof Nr=="function"){if(xr=Nr({signal:ir}),!isIterable$1(xr))throw new ERR_INVALID_RETURN_VALUE("Iterable, AsyncIterable or Stream","source",xr)}else isIterable$1(Nr)||isReadableNodeStream(Nr)||isTransformStream$1(Nr)?xr=Nr:xr=Duplex$2.from(Nr);else if(typeof Nr=="function"){if(isTransformStream$1(xr)){var Or;xr=makeAsyncIterable((Or=xr)===null||Or===void 0?void 0:Or.readable)}else xr=makeAsyncIterable(xr);if(xr=Nr(xr,{signal:ir}),Ur){if(!isIterable$1(xr,!0))throw new ERR_INVALID_RETURN_VALUE("AsyncIterable",`transform[${Ar-1}]`,xr)}else{var Tr;PassThrough$1||(PassThrough$1=passthrough);const Cr=new PassThrough$1({objectMode:!0}),Mr=(Tr=xr)===null||Tr===void 0?void 0:Tr.then;if(typeof Mr=="function")yr++,Mr.call(xr,pr=>{ur=pr,pr!=null&&Cr.write(pr),Hr&&Cr.end(),process$1.nextTick(mr)},pr=>{Cr.destroy(pr),process$1.nextTick(mr,pr)});else if(isIterable$1(xr,!0))yr++,pumpToNode(xr,Cr,mr,{end:Hr});else if(isReadableStream$2(xr)||isTransformStream$1(xr)){const pr=xr.readable||xr;yr++,pumpToNode(pr,Cr,mr,{end:Hr})}else throw new ERR_INVALID_RETURN_VALUE("AsyncIterable or Promise","destination",xr);xr=Cr;const{destroy:Pr,cleanup:Sr}=destroyer$3(xr,!1,!0);dr.push(Pr),zr&&or.push(Sr)}}else if(isNodeStream$2(Nr)){if(isReadableNodeStream(xr)){yr+=2;const Cr=pipe$2(xr,Nr,mr,{end:Hr});isReadable$1(Nr)&&zr&&or.push(Cr)}else if(isTransformStream$1(xr)||isReadableStream$2(xr)){const Cr=xr.readable||xr;yr++,pumpToNode(Cr,Nr,mr,{end:Hr})}else if(isIterable$1(xr))yr++,pumpToNode(xr,Nr,mr,{end:Hr});else throw new ERR_INVALID_ARG_TYPE$2("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],xr);xr=Nr}else if(isWebStream$1(Nr)){if(isReadableNodeStream(xr))yr++,pumpToWeb(makeAsyncIterable(xr),Nr,mr,{end:Hr});else if(isReadableStream$2(xr)||isIterable$1(xr))yr++,pumpToWeb(xr,Nr,mr,{end:Hr});else if(isTransformStream$1(xr))yr++,pumpToWeb(xr.readable,Nr,mr,{end:Hr});else throw new ERR_INVALID_ARG_TYPE$2("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],xr);xr=Nr}else xr=Duplex$2.from(Nr)}return(ir!=null&&ir.aborted||sr!=null&&sr.aborted)&&process$1.nextTick(ar),xr}function pipe$2(tr,er,rr,{end:nr}){let ir=!1;if(er.on("close",()=>{ir||rr(new ERR_STREAM_PREMATURE_CLOSE$1)}),tr.pipe(er,{end:!1}),nr){let sr=function(){ir=!0,er.end()};isReadableFinished(tr)?process$1.nextTick(sr):tr.once("end",sr)}else rr();return eos$6(tr,{readable:!0,writable:!1},sr=>{const or=tr._readableState;sr&&sr.code==="ERR_STREAM_PREMATURE_CLOSE"&&or&&or.ended&&!or.errored&&!or.errorEmitted?tr.once("end",rr).once("error",rr):rr(sr)}),eos$6(er,{readable:!1,writable:!0},rr)}var pipeline_1$1={pipelineImpl,pipeline:pipeline$2};const{pipeline:pipeline$1}=pipeline_1$1,Duplex$1=requireDuplex(),{destroyer:destroyer$2}=destroy_1$1,{isNodeStream:isNodeStream$1,isReadable,isWritable:isWritable$1,isWebStream,isTransformStream,isWritableStream:isWritableStream$1,isReadableStream:isReadableStream$1}=utils$7,{AbortError:AbortError$1,codes:{ERR_INVALID_ARG_VALUE:ERR_INVALID_ARG_VALUE$1,ERR_MISSING_ARGS:ERR_MISSING_ARGS$2}}=errors$5,eos$5=endOfStreamExports;var compose$1=function tr(...er){if(er.length===0)throw new ERR_MISSING_ARGS$2("streams");if(er.length===1)return Duplex$1.from(er[0]);const rr=[...er];if(typeof er[0]=="function"&&(er[0]=Duplex$1.from(er[0])),typeof er[er.length-1]=="function"){const mr=er.length-1;er[mr]=Duplex$1.from(er[mr])}for(let mr=0;mr<er.length;++mr)if(!(!isNodeStream$1(er[mr])&&!isWebStream(er[mr]))){if(mr<er.length-1&&!(isReadable(er[mr])||isReadableStream$1(er[mr])||isTransformStream(er[mr])))throw new ERR_INVALID_ARG_VALUE$1(`streams[${mr}]`,rr[mr],"must be readable");if(mr>0&&!(isWritable$1(er[mr])||isWritableStream$1(er[mr])||isTransformStream(er[mr])))throw new ERR_INVALID_ARG_VALUE$1(`streams[${mr}]`,rr[mr],"must be writable")}let nr,ir,sr,or,ar;function cr(mr){const wr=or;or=null,wr?wr(mr):mr?ar.destroy(mr):!yr&&!dr&&ar.destroy()}const lr=er[0],ur=pipeline$1(er,cr),dr=!!(isWritable$1(lr)||isWritableStream$1(lr)||isTransformStream(lr)),yr=!!(isReadable(ur)||isReadableStream$1(ur)||isTransformStream(ur));if(ar=new Duplex$1({writableObjectMode:!!(lr!=null&&lr.writableObjectMode),readableObjectMode:!!(ur!=null&&ur.readableObjectMode),writable:dr,readable:yr}),dr){if(isNodeStream$1(lr))ar._write=function(wr,xr,Or){lr.write(wr,xr)?Or():nr=Or},ar._final=function(wr){lr.end(),ir=wr},lr.on("drain",function(){if(nr){const wr=nr;nr=null,wr()}});else if(isWebStream(lr)){const xr=(isTransformStream(lr)?lr.writable:lr).getWriter();ar._write=async function(Or,Tr,Ar){try{await xr.ready,xr.write(Or).catch(()=>{}),Ar()}catch(Nr){Ar(Nr)}},ar._final=async function(Or){try{await xr.ready,xr.close().catch(()=>{}),ir=Or}catch(Tr){Or(Tr)}}}const mr=isTransformStream(ur)?ur.readable:ur;eos$5(mr,()=>{if(ir){const wr=ir;ir=null,wr()}})}if(yr){if(isNodeStream$1(ur))ur.on("readable",function(){if(sr){const mr=sr;sr=null,mr()}}),ur.on("end",function(){ar.push(null)}),ar._read=function(){for(;;){const mr=ur.read();if(mr===null){sr=ar._read;return}if(!ar.push(mr))return}};else if(isWebStream(ur)){const wr=(isTransformStream(ur)?ur.readable:ur).getReader();ar._read=async function(){for(;;)try{const{value:xr,done:Or}=await wr.read();if(!ar.push(xr))return;if(Or){ar.push(null);return}}catch{return}}}}return ar._destroy=function(mr,wr){!mr&&or!==null&&(mr=new AbortError$1),sr=null,nr=null,ir=null,or===null?wr(mr):(or=wr,isNodeStream$1(ur)&&destroyer$2(ur,mr))},ar};const AbortController$1=globalThis.AbortController||requireBrowser().AbortController,{codes:{ERR_INVALID_ARG_VALUE,ERR_INVALID_ARG_TYPE:ERR_INVALID_ARG_TYPE$1,ERR_MISSING_ARGS:ERR_MISSING_ARGS$1,ERR_OUT_OF_RANGE},AbortError}=errors$5,{validateAbortSignal,validateInteger,validateObject:validateObject$1}=validators$1,kWeakHandler=primordials.Symbol("kWeak"),kResistStopPropagation=primordials.Symbol("kResistStopPropagation"),{finished}=endOfStreamExports,staticCompose=compose$1,{addAbortSignalNoValidate}=addAbortSignalExports,{isWritable,isNodeStream}=utils$7,{deprecate:deprecate$1}=utilExports,{ArrayPrototypePush,Boolean:Boolean$1,MathFloor,Number:Number$1,NumberIsNaN,Promise:Promise$1,PromiseReject,PromiseResolve,PromisePrototypeThen,Symbol:Symbol$1}=primordials,kEmpty=Symbol$1("kEmpty"),kEof=Symbol$1("kEof");function compose(tr,er){if(er!=null&&validateObject$1(er,"options"),(er==null?void 0:er.signal)!=null&&validateAbortSignal(er.signal,"options.signal"),isNodeStream(tr)&&!isWritable(tr))throw new ERR_INVALID_ARG_VALUE("stream",tr,"must be writable");const rr=staticCompose(this,tr);return er!=null&&er.signal&&addAbortSignalNoValidate(er.signal,rr),rr}function map$1(tr,er){if(typeof tr!="function")throw new ERR_INVALID_ARG_TYPE$1("fn",["Function","AsyncFunction"],tr);er!=null&&validateObject$1(er,"options"),(er==null?void 0:er.signal)!=null&&validateAbortSignal(er.signal,"options.signal");let rr=1;(er==null?void 0:er.concurrency)!=null&&(rr=MathFloor(er.concurrency));let nr=rr-1;return(er==null?void 0:er.highWaterMark)!=null&&(nr=MathFloor(er.highWaterMark)),validateInteger(rr,"options.concurrency",1),validateInteger(nr,"options.highWaterMark",0),nr+=rr,(async function*(){const sr=utilExports.AbortSignalAny([er==null?void 0:er.signal].filter(Boolean$1)),or=this,ar=[],cr={signal:sr};let lr,ur,dr=!1,yr=0;function mr(){dr=!0,wr()}function wr(){yr-=1,xr()}function xr(){ur&&!dr&&yr<rr&&ar.length<nr&&(ur(),ur=null)}async function Or(){try{for await(let Tr of or){if(dr)return;if(sr.aborted)throw new AbortError;try{if(Tr=tr(Tr,cr),Tr===kEmpty)continue;Tr=PromiseResolve(Tr)}catch(Ar){Tr=PromiseReject(Ar)}yr+=1,PromisePrototypeThen(Tr,wr,mr),ar.push(Tr),lr&&(lr(),lr=null),!dr&&(ar.length>=nr||yr>=rr)&&await new Promise$1(Ar=>{ur=Ar})}ar.push(kEof)}catch(Tr){const Ar=PromiseReject(Tr);PromisePrototypeThen(Ar,wr,mr),ar.push(Ar)}finally{dr=!0,lr&&(lr(),lr=null)}}Or();try{for(;;){for(;ar.length>0;){const Tr=await ar[0];if(Tr===kEof)return;if(sr.aborted)throw new AbortError;Tr!==kEmpty&&(yield Tr),ar.shift(),xr()}await new Promise$1(Tr=>{lr=Tr})}}finally{dr=!0,ur&&(ur(),ur=null)}}).call(this)}function asIndexedPairs(tr=void 0){return tr!=null&&validateObject$1(tr,"options"),(tr==null?void 0:tr.signal)!=null&&validateAbortSignal(tr.signal,"options.signal"),(async function*(){let rr=0;for await(const ir of this){var nr;if(tr!=null&&(nr=tr.signal)!==null&&nr!==void 0&&nr.aborted)throw new AbortError({cause:tr.signal.reason});yield[rr++,ir]}}).call(this)}async function some(tr,er=void 0){for await(const rr of filter.call(this,tr,er))return!0;return!1}async function every(tr,er=void 0){if(typeof tr!="function")throw new ERR_INVALID_ARG_TYPE$1("fn",["Function","AsyncFunction"],tr);return!await some.call(this,async(...rr)=>!await tr(...rr),er)}async function find(tr,er){for await(const rr of filter.call(this,tr,er))return rr}async function forEach$2(tr,er){if(typeof tr!="function")throw new ERR_INVALID_ARG_TYPE$1("fn",["Function","AsyncFunction"],tr);async function rr(nr,ir){return await tr(nr,ir),kEmpty}for await(const nr of map$1.call(this,rr,er));}function filter(tr,er){if(typeof tr!="function")throw new ERR_INVALID_ARG_TYPE$1("fn",["Function","AsyncFunction"],tr);async function rr(nr,ir){return await tr(nr,ir)?nr:kEmpty}return map$1.call(this,rr,er)}class ReduceAwareErrMissingArgs extends ERR_MISSING_ARGS$1{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}}async function reduce(tr,er,rr){var nr;if(typeof tr!="function")throw new ERR_INVALID_ARG_TYPE$1("reducer",["Function","AsyncFunction"],tr);rr!=null&&validateObject$1(rr,"options"),(rr==null?void 0:rr.signal)!=null&&validateAbortSignal(rr.signal,"options.signal");let ir=arguments.length>1;if(rr!=null&&(nr=rr.signal)!==null&&nr!==void 0&&nr.aborted){const lr=new AbortError(void 0,{cause:rr.signal.reason});throw this.once("error",()=>{}),await finished(this.destroy(lr)),lr}const sr=new AbortController$1,or=sr.signal;if(rr!=null&&rr.signal){const lr={once:!0,[kWeakHandler]:this,[kResistStopPropagation]:!0};rr.signal.addEventListener("abort",()=>sr.abort(),lr)}let ar=!1;try{for await(const lr of this){var cr;if(ar=!0,rr!=null&&(cr=rr.signal)!==null&&cr!==void 0&&cr.aborted)throw new AbortError;ir?er=await tr(er,lr,{signal:or}):(er=lr,ir=!0)}if(!ar&&!ir)throw new ReduceAwareErrMissingArgs}finally{sr.abort()}return er}async function toArray$1(tr){tr!=null&&validateObject$1(tr,"options"),(tr==null?void 0:tr.signal)!=null&&validateAbortSignal(tr.signal,"options.signal");const er=[];for await(const nr of this){var rr;if(tr!=null&&(rr=tr.signal)!==null&&rr!==void 0&&rr.aborted)throw new AbortError(void 0,{cause:tr.signal.reason});ArrayPrototypePush(er,nr)}return er}function flatMap(tr,er){const rr=map$1.call(this,tr,er);return(async function*(){for await(const ir of rr)yield*ir}).call(this)}function toIntegerOrInfinity(tr){if(tr=Number$1(tr),NumberIsNaN(tr))return 0;if(tr<0)throw new ERR_OUT_OF_RANGE("number",">= 0",tr);return tr}function drop(tr,er=void 0){return er!=null&&validateObject$1(er,"options"),(er==null?void 0:er.signal)!=null&&validateAbortSignal(er.signal,"options.signal"),tr=toIntegerOrInfinity(tr),(async function*(){var nr;if(er!=null&&(nr=er.signal)!==null&&nr!==void 0&&nr.aborted)throw new AbortError;for await(const sr of this){var ir;if(er!=null&&(ir=er.signal)!==null&&ir!==void 0&&ir.aborted)throw new AbortError;tr--<=0&&(yield sr)}}).call(this)}function take(tr,er=void 0){return er!=null&&validateObject$1(er,"options"),(er==null?void 0:er.signal)!=null&&validateAbortSignal(er.signal,"options.signal"),tr=toIntegerOrInfinity(tr),(async function*(){var nr;if(er!=null&&(nr=er.signal)!==null&&nr!==void 0&&nr.aborted)throw new AbortError;for await(const sr of this){var ir;if(er!=null&&(ir=er.signal)!==null&&ir!==void 0&&ir.aborted)throw new AbortError;if(tr-- >0&&(yield sr),tr<=0)return}}).call(this)}operators.streamReturningOperators={asIndexedPairs:deprecate$1(asIndexedPairs,"readable.asIndexedPairs will be removed in a future version."),drop,filter,flatMap,map:map$1,take,compose};operators.promiseReturningOperators={every,forEach:forEach$2,reduce,toArray:toArray$1,some,find};var promises,hasRequiredPromises;function requirePromises(){if(hasRequiredPromises)return promises;hasRequiredPromises=1;const{ArrayPrototypePop:tr,Promise:er}=primordials,{isIterable:rr,isNodeStream:nr,isWebStream:ir}=utils$7,{pipelineImpl:sr}=pipeline_1$1,{finished:or}=endOfStreamExports;requireStream();function ar(...cr){return new er((lr,ur)=>{let dr,yr;const mr=cr[cr.length-1];if(mr&&typeof mr=="object"&&!nr(mr)&&!rr(mr)&&!ir(mr)){const wr=tr(cr);dr=wr.signal,yr=wr.end}sr(cr,(wr,xr)=>{wr?ur(wr):lr(xr)},{signal:dr,end:yr})})}return promises={finished:or,pipeline:ar},promises}var hasRequiredStream;function requireStream(){if(hasRequiredStream)return stream.exports;hasRequiredStream=1;const{Buffer:tr}=buffer$1,{ObjectDefineProperty:er,ObjectKeys:rr,ReflectApply:nr}=primordials,{promisify:{custom:ir}}=utilExports,{streamReturningOperators:sr,promiseReturningOperators:or}=operators,{codes:{ERR_ILLEGAL_CONSTRUCTOR:ar}}=errors$5,cr=compose$1,{setDefaultHighWaterMark:lr,getDefaultHighWaterMark:ur}=state$1,{pipeline:dr}=pipeline_1$1,{destroyer:yr}=destroy_1$1,mr=endOfStreamExports,wr=requirePromises(),xr=utils$7,Or=stream.exports=legacy.Stream;Or.isDestroyed=xr.isDestroyed,Or.isDisturbed=xr.isDisturbed,Or.isErrored=xr.isErrored,Or.isReadable=xr.isReadable,Or.isWritable=xr.isWritable,Or.Readable=requireReadable();for(const Ar of rr(sr)){let Ur=function(...Dr){if(new.target)throw ar();return Or.Readable.from(nr(Nr,this,Dr))};const Nr=sr[Ar];er(Ur,"name",{__proto__:null,value:Nr.name}),er(Ur,"length",{__proto__:null,value:Nr.length}),er(Or.Readable.prototype,Ar,{__proto__:null,value:Ur,enumerable:!1,configurable:!0,writable:!0})}for(const Ar of rr(or)){let Ur=function(...Dr){if(new.target)throw ar();return nr(Nr,this,Dr)};const Nr=or[Ar];er(Ur,"name",{__proto__:null,value:Nr.name}),er(Ur,"length",{__proto__:null,value:Nr.length}),er(Or.Readable.prototype,Ar,{__proto__:null,value:Ur,enumerable:!1,configurable:!0,writable:!0})}Or.Writable=requireWritable(),Or.Duplex=requireDuplex(),Or.Transform=transform,Or.PassThrough=passthrough,Or.pipeline=dr;const{addAbortSignal:Tr}=addAbortSignalExports;return Or.addAbortSignal=Tr,Or.finished=mr,Or.destroy=yr,Or.compose=cr,Or.setDefaultHighWaterMark=lr,Or.getDefaultHighWaterMark=ur,er(Or,"promises",{__proto__:null,configurable:!0,enumerable:!0,get(){return wr}}),er(dr,ir,{__proto__:null,enumerable:!0,get(){return wr.pipeline}}),er(mr,ir,{__proto__:null,enumerable:!0,get(){return wr.finished}}),Or.Stream=Or,Or._isUint8Array=function(Nr){return Nr instanceof Uint8Array},Or._uint8ArrayToBuffer=function(Nr){return tr.from(Nr.buffer,Nr.byteOffset,Nr.byteLength)},stream.exports}(function(tr){const er=requireStream(),rr=requirePromises(),nr=er.Readable.destroy;tr.exports=er.Readable,tr.exports._uint8ArrayToBuffer=er._uint8ArrayToBuffer,tr.exports._isUint8Array=er._isUint8Array,tr.exports.isDisturbed=er.isDisturbed,tr.exports.isErrored=er.isErrored,tr.exports.isReadable=er.isReadable,tr.exports.Readable=er.Readable,tr.exports.Writable=er.Writable,tr.exports.Duplex=er.Duplex,tr.exports.Transform=er.Transform,tr.exports.PassThrough=er.PassThrough,tr.exports.addAbortSignal=er.addAbortSignal,tr.exports.finished=er.finished,tr.exports.destroy=er.destroy,tr.exports.destroy=nr,tr.exports.pipeline=er.pipeline,tr.exports.compose=er.compose,Object.defineProperty(er,"promises",{configurable:!0,enumerable:!0,get(){return rr}}),tr.exports.Stream=er.Stream,tr.exports.default=tr.exports})(browser$3);var browserExports$1=browser$3.exports,fastSafeStringify=stringify$1;stringify$1.default=stringify$1;stringify$1.stable=deterministicStringify;stringify$1.stableStringify=deterministicStringify;var LIMIT_REPLACE_NODE="[...]",CIRCULAR_REPLACE_NODE="[Circular]",arr=[],replacerStack=[];function defaultOptions$1(){return{depthLimit:Number.MAX_SAFE_INTEGER,edgesLimit:Number.MAX_SAFE_INTEGER}}function stringify$1(tr,er,rr,nr){typeof nr>"u"&&(nr=defaultOptions$1()),decirc(tr,"",0,[],void 0,0,nr);var ir;try{replacerStack.length===0?ir=JSON.stringify(tr,er,rr):ir=JSON.stringify(tr,replaceGetterValues(er),rr)}catch{return JSON.stringify("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;arr.length!==0;){var sr=arr.pop();sr.length===4?Object.defineProperty(sr[0],sr[1],sr[3]):sr[0][sr[1]]=sr[2]}}return ir}function setReplace(tr,er,rr,nr){var ir=Object.getOwnPropertyDescriptor(nr,rr);ir.get!==void 0?ir.configurable?(Object.defineProperty(nr,rr,{value:tr}),arr.push([nr,rr,er,ir])):replacerStack.push([er,rr,tr]):(nr[rr]=tr,arr.push([nr,rr,er]))}function decirc(tr,er,rr,nr,ir,sr,or){sr+=1;var ar;if(typeof tr=="object"&&tr!==null){for(ar=0;ar<nr.length;ar++)if(nr[ar]===tr){setReplace(CIRCULAR_REPLACE_NODE,tr,er,ir);return}if(typeof or.depthLimit<"u"&&sr>or.depthLimit){setReplace(LIMIT_REPLACE_NODE,tr,er,ir);return}if(typeof or.edgesLimit<"u"&&rr+1>or.edgesLimit){setReplace(LIMIT_REPLACE_NODE,tr,er,ir);return}if(nr.push(tr),Array.isArray(tr))for(ar=0;ar<tr.length;ar++)decirc(tr[ar],ar,ar,nr,tr,sr,or);else{var cr=Object.keys(tr);for(ar=0;ar<cr.length;ar++){var lr=cr[ar];decirc(tr[lr],lr,ar,nr,tr,sr,or)}}nr.pop()}}function compareFunction(tr,er){return tr<er?-1:tr>er?1:0}function deterministicStringify(tr,er,rr,nr){typeof nr>"u"&&(nr=defaultOptions$1());var ir=deterministicDecirc(tr,"",0,[],void 0,0,nr)||tr,sr;try{replacerStack.length===0?sr=JSON.stringify(ir,er,rr):sr=JSON.stringify(ir,replaceGetterValues(er),rr)}catch{return JSON.stringify("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;arr.length!==0;){var or=arr.pop();or.length===4?Object.defineProperty(or[0],or[1],or[3]):or[0][or[1]]=or[2]}}return sr}function deterministicDecirc(tr,er,rr,nr,ir,sr,or){sr+=1;var ar;if(typeof tr=="object"&&tr!==null){for(ar=0;ar<nr.length;ar++)if(nr[ar]===tr){setReplace(CIRCULAR_REPLACE_NODE,tr,er,ir);return}try{if(typeof tr.toJSON=="function")return}catch{return}if(typeof or.depthLimit<"u"&&sr>or.depthLimit){setReplace(LIMIT_REPLACE_NODE,tr,er,ir);return}if(typeof or.edgesLimit<"u"&&rr+1>or.edgesLimit){setReplace(LIMIT_REPLACE_NODE,tr,er,ir);return}if(nr.push(tr),Array.isArray(tr))for(ar=0;ar<tr.length;ar++)deterministicDecirc(tr[ar],ar,ar,nr,tr,sr,or);else{var cr={},lr=Object.keys(tr).sort(compareFunction);for(ar=0;ar<lr.length;ar++){var ur=lr[ar];deterministicDecirc(tr[ur],ur,ar,nr,tr,sr,or),cr[ur]=tr[ur]}if(typeof ir<"u")arr.push([ir,er,tr]),ir[er]=cr;else return cr}nr.pop()}}function replaceGetterValues(tr){return tr=typeof tr<"u"?tr:function(er,rr){return rr},function(er,rr){if(replacerStack.length>0)for(var nr=0;nr<replacerStack.length;nr++){var ir=replacerStack[nr];if(ir[1]===er&&ir[0]===rr){rr=ir[2],replacerStack.splice(nr,1);break}}return tr.call(this,er,rr)}}const stringify$2=getDefaultExportFromCjs(fastSafeStringify);var once$6={exports:{}},wrappy_1=wrappy$1;function wrappy$1(tr,er){if(tr&&er)return wrappy$1(tr)(er);if(typeof tr!="function")throw new TypeError("need wrapper function");return Object.keys(tr).forEach(function(nr){rr[nr]=tr[nr]}),rr;function rr(){for(var nr=new Array(arguments.length),ir=0;ir<nr.length;ir++)nr[ir]=arguments[ir];var sr=tr.apply(this,nr),or=nr[nr.length-1];return typeof sr=="function"&&sr!==or&&Object.keys(or).forEach(function(ar){sr[ar]=or[ar]}),sr}}var wrappy=wrappy_1;once$6.exports=wrappy(once$4);once$6.exports.strict=wrappy(onceStrict);once$4.proto=once$4(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return once$4(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return onceStrict(this)},configurable:!0})});function once$4(tr){var er=function(){return er.called?er.value:(er.called=!0,er.value=tr.apply(this,arguments))};return er.called=!1,er}function onceStrict(tr){var er=function(){if(er.called)throw new Error(er.onceError);return er.called=!0,er.value=tr.apply(this,arguments)},rr=tr.name||"Function wrapped with `once`";return er.onceError=rr+" shouldn't be called more than once",er.called=!1,er}var onceExports=once$6.exports;const once$5=getDefaultExportFromCjs(onceExports);var once$3=onceExports,noop$5=function(){},isRequest$3=function(tr){return tr.setHeader&&typeof tr.abort=="function"},isChildProcess=function(tr){return tr.stdio&&Array.isArray(tr.stdio)&&tr.stdio.length===3},eos$3=function(tr,er,rr){if(typeof er=="function")return eos$3(tr,null,er);er||(er={}),rr=once$3(rr||noop$5);var nr=tr._writableState,ir=tr._readableState,sr=er.readable||er.readable!==!1&&tr.readable,or=er.writable||er.writable!==!1&&tr.writable,ar=!1,cr=function(){tr.writable||lr()},lr=function(){or=!1,sr||rr.call(tr)},ur=function(){sr=!1,or||rr.call(tr)},dr=function(Or){rr.call(tr,Or?new Error("exited with error code: "+Or):null)},yr=function(Or){rr.call(tr,Or)},mr=function(){process.nextTick(wr)},wr=function(){if(!ar){if(sr&&!(ir&&ir.ended&&!ir.destroyed))return rr.call(tr,new Error("premature close"));if(or&&!(nr&&nr.ended&&!nr.destroyed))return rr.call(tr,new Error("premature close"))}},xr=function(){tr.req.on("finish",lr)};return isRequest$3(tr)?(tr.on("complete",lr),tr.on("abort",mr),tr.req?xr():tr.on("request",xr)):or&&!nr&&(tr.on("end",cr),tr.on("close",cr)),isChildProcess(tr)&&tr.on("exit",dr),tr.on("end",ur),tr.on("finish",lr),er.error!==!1&&tr.on("error",yr),tr.on("close",mr),function(){ar=!0,tr.removeListener("complete",lr),tr.removeListener("abort",mr),tr.removeListener("request",xr),tr.req&&tr.req.removeListener("finish",lr),tr.removeListener("end",cr),tr.removeListener("close",cr),tr.removeListener("finish",lr),tr.removeListener("exit",dr),tr.removeListener("end",ur),tr.removeListener("error",yr),tr.removeListener("close",mr)}},endOfStream$1=eos$3;const eos$4=getDefaultExportFromCjs(endOfStream$1);var once$2=onceExports,eos$2=endOfStream$1,fs=require$$3,noop$4=function(){},ancient=/^v?\.0/.test(process.version),isFn=function(tr){return typeof tr=="function"},isFS=function(tr){return!ancient||!fs?!1:(tr instanceof(fs.ReadStream||noop$4)||tr instanceof(fs.WriteStream||noop$4))&&isFn(tr.close)},isRequest$2=function(tr){return tr.setHeader&&isFn(tr.abort)},destroyer$1=function(tr,er,rr,nr){nr=once$2(nr);var ir=!1;tr.on("close",function(){ir=!0}),eos$2(tr,{readable:er,writable:rr},function(or){if(or)return nr(or);ir=!0,nr()});var sr=!1;return function(or){if(!ir&&!sr){if(sr=!0,isFS(tr))return tr.close(noop$4);if(isRequest$2(tr))return tr.abort();if(isFn(tr.destroy))return tr.destroy();nr(or||new Error("stream was destroyed"))}}},call$2=function(tr){tr()},pipe$1=function(tr,er){return tr.pipe(er)},pump=function(){var tr=Array.prototype.slice.call(arguments),er=isFn(tr[tr.length-1]||noop$4)&&tr.pop()||noop$4;if(Array.isArray(tr[0])&&(tr=tr[0]),tr.length<2)throw new Error("pump requires two streams per minimum");var rr,nr=tr.map(function(ir,sr){var or=sr<tr.length-1,ar=sr>0;return destroyer$1(ir,or,ar,function(cr){rr||(rr=cr),cr&&nr.forEach(call$2),!or&&(nr.forEach(call$2),er(rr))})});return tr.reduce(pipe$1)},pump_1=pump;const pump$1=getDefaultExportFromCjs(pump_1);function noop$3(){}const SYN="SYN",ACK="ACK",BRK="BRK";class BasePostMessageStream extends browserExports$1.Duplex{constructor(er){let{name:rr,target:nr,targetWindow:ir=window,targetOrigin:sr="*"}=er;if(super({objectMode:!0}),_defineProperty(this,"_init",void 0),_defineProperty(this,"_haveSyn",void 0),_defineProperty(this,"_name",void 0),_defineProperty(this,"_target",void 0),_defineProperty(this,"_targetWindow",void 0),_defineProperty(this,"_targetOrigin",void 0),_defineProperty(this,"_onMessage",void 0),_defineProperty(this,"_synIntervalId",void 0),!rr||!nr)throw new Error("Invalid input.");this._init=!1,this._haveSyn=!1,this._name=rr,this._target=nr,this._targetWindow=ir,this._targetOrigin=sr,this._onMessage=this.onMessage.bind(this),this._synIntervalId=null,window.addEventListener("message",this._onMessage,!1),this._handShake()}_break(){this.cork(),this._write(BRK,null,noop$3),this._haveSyn=!1,this._init=!1}_handShake(){this._write(SYN,null,noop$3),this.cork()}_onData(er){if(!this._init)er===SYN?(this._haveSyn=!0,this._write(ACK,null,noop$3)):er===ACK&&(this._init=!0,this._haveSyn||this._write(ACK,null,noop$3),this.uncork());else if(er===BRK)this._break();else try{this.push(er)}catch(rr){this.emit("error",rr)}}_postMessage(er){const rr=this._targetOrigin;this._targetWindow.postMessage({target:this._target,data:er},rr)}onMessage(er){const rr=er.data;this._targetOrigin!=="*"&&er.origin!==this._targetOrigin||er.source!==this._targetWindow||typeof rr!="object"||rr.target!==this._name||!rr.data||this._onData(rr.data)}_read(){}_write(er,rr,nr){this._postMessage(er),nr()}_destroy(){window.removeEventListener("message",this._onMessage,!1)}}const errorCodes={rpc:{invalidInput:-32e3,resourceNotFound:-32001,resourceUnavailable:-32002,transactionRejected:-32003,methodNotSupported:-32004,limitExceeded:-32005,parse:-32700,invalidRequest:-32600,methodNotFound:-32601,invalidParams:-32602,internal:-32603},provider:{userRejectedRequest:4001,unauthorized:4100,unsupportedMethod:4200,disconnected:4900,chainDisconnected:4901}},errorValues={"-32700":{standard:"JSON RPC 2.0",message:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."},"-32600":{standard:"JSON RPC 2.0",message:"The JSON sent is not a valid Request object."},"-32601":{standard:"JSON RPC 2.0",message:"The method does not exist / is not available."},"-32602":{standard:"JSON RPC 2.0",message:"Invalid method parameter(s)."},"-32603":{standard:"JSON RPC 2.0",message:"Internal JSON-RPC error."},"-32000":{standard:"EIP-1474",message:"Invalid input."},"-32001":{standard:"EIP-1474",message:"Resource not found."},"-32002":{standard:"EIP-1474",message:"Resource unavailable."},"-32003":{standard:"EIP-1474",message:"Transaction rejected."},"-32004":{standard:"EIP-1474",message:"Method not supported."},"-32005":{standard:"EIP-1474",message:"Request limit exceeded."},4001:{standard:"EIP-1193",message:"User rejected the request."},4100:{standard:"EIP-1193",message:"The requested account and/or method has not been authorized by the user."},4200:{standard:"EIP-1193",message:"The requested method is not supported by this Ethereum provider."},4900:{standard:"EIP-1193",message:"The provider is disconnected from all chains."},4901:{standard:"EIP-1193",message:"The provider is disconnected from the specified chain."}},FALLBACK_ERROR_CODE=errorCodes.rpc.internal,FALLBACK_MESSAGE="Unspecified error message. This is a bug, please report it.",JSON_RPC_SERVER_ERROR_MESSAGE="Unspecified server error.";function isValidCode(tr){return Number.isInteger(tr)}function isValidString(tr){return typeof tr=="string"&&tr.length>0}function isObject$3(tr){return!!tr&&typeof tr=="object"&&!Array.isArray(tr)}function isPlainObject$1(tr){if(typeof tr!="object"||tr===null)return!1;try{let er=tr;for(;Object.getPrototypeOf(er)!==null;)er=Object.getPrototypeOf(er);return Object.getPrototypeOf(tr)===er}catch{return!1}}function isJsonRpcServerError(tr){return tr>=-32099&&tr<=-32e3}function isJsonRpcError(tr){const er=tr;return!(!er||!isValidCode(er.code)||!isValidString(er.message)||er.stack&&!isValidString(er.stack))}function getMessageFromCode(tr){let er=arguments.length>1&&arguments[1]!==void 0?arguments[1]:FALLBACK_MESSAGE;if(isValidCode(tr)){const rr=tr.toString();if(Object.hasOwn(errorValues,rr))return errorValues[rr].message;if(isJsonRpcServerError(tr))return JSON_RPC_SERVER_ERROR_MESSAGE}return er}const FALLBACK_ERROR={code:FALLBACK_ERROR_CODE,message:getMessageFromCode(FALLBACK_ERROR_CODE)};function isValidJson(tr){try{JSON.parse(JSON.stringify(tr,(er,rr)=>{if(er==="__proto__"||er==="constructor")throw new Error("Not valid json");if(typeof rr=="function"||typeof rr=="symbol")throw new Error("Not valid json");return rr}),(er,rr)=>{if(!(er==="__proto__"||er==="constructor"))return rr})}catch{return!1}return!0}function serializeObject(tr){return Object.getOwnPropertyNames(tr).reduce((er,rr)=>{const nr=tr[rr];return isValidJson(nr)&&(er[rr]=nr),er},{})}function serializeCause(tr){return Array.isArray(tr)?tr.map(er=>isValidJson(er)?er:isObject$3(er)?serializeObject(er):null):isObject$3(tr)?serializeObject(tr):isValidJson(tr)?tr:null}function buildError(tr,er){if(tr&&typeof tr=="object"&&"serialize"in tr&&typeof tr.serialize=="function")return tr.serialize();if(isJsonRpcError(tr))return tr;const rr=serializeCause(tr);return _objectSpread2(_objectSpread2({},er),{},{data:{cause:rr}})}function serializeError$2(tr){let{fallbackError:er=FALLBACK_ERROR,shouldIncludeStack:rr=!0}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!isJsonRpcError(er))throw new Error("Must provide fallback error with integer number code and string message.");const nr=buildError(tr,er);return rr||delete nr.stack,nr}function dataHasCause(tr){return isObject$3(tr)&&Object.hasOwn(tr,"cause")&&isObject$3(tr.cause)}function isValidEthProviderCode$1(tr){return Number.isInteger(tr)&&tr>=1e3&&tr<=4999}function stringifyReplacer(tr,er){if(er!=="[Circular]")return er}class JsonRpcError extends Error{constructor(er,rr,nr){if(!Number.isInteger(er))throw new Error('"code" must be an integer.');if(!rr||typeof rr!="string")throw new Error('"message" must be a non-empty string.');dataHasCause(nr)?(super(rr,{cause:nr.cause}),_defineProperty(this,"cause",void 0),_defineProperty(this,"code",void 0),_defineProperty(this,"data",void 0),Object.hasOwn(this,"cause")||Object.assign(this,{cause:nr.cause})):(super(rr),_defineProperty(this,"cause",void 0),_defineProperty(this,"code",void 0),_defineProperty(this,"data",void 0)),nr!==void 0&&(this.data=nr),this.code=er,this.cause=nr==null?void 0:nr.cause}serialize(){const er={code:this.code,message:this.message};return this.data!==void 0&&(er.data=this.data,isPlainObject$1(this.data)&&(er.data.cause=serializeCause(this.data.cause))),this.stack&&(er.stack=this.stack),er}toString(){return stringify$2(this.serialize(),stringifyReplacer,2)}}let EthereumProviderError$1=class extends JsonRpcError{constructor(er,rr,nr){if(!isValidEthProviderCode$1(er))throw new Error('"code" must be an integer such that: 1000 <= code <= 4999');super(er,rr,nr)}};function parseOpts$1(tr){if(tr){if(typeof tr=="string")return[tr];if(typeof tr=="object"&&!Array.isArray(tr)){const{message:er,data:rr}=tr;if(er&&typeof er!="string")throw new Error("Must specify string message.");return[er??void 0,rr]}}return[]}function getJsonRpcError(tr,er){const[rr,nr]=parseOpts$1(er);return new JsonRpcError(tr,rr??getMessageFromCode(tr),nr)}function getEthProviderError$1(tr,er){const[rr,nr]=parseOpts$1(er);return new EthereumProviderError$1(tr,rr??getMessageFromCode(tr),nr)}const rpcErrors={parse:tr=>getJsonRpcError(errorCodes.rpc.parse,tr),invalidRequest:tr=>getJsonRpcError(errorCodes.rpc.invalidRequest,tr),invalidParams:tr=>getJsonRpcError(errorCodes.rpc.invalidParams,tr),methodNotFound:tr=>getJsonRpcError(errorCodes.rpc.methodNotFound,tr),internal:tr=>getJsonRpcError(errorCodes.rpc.internal,tr),server:tr=>{if(!tr||typeof tr!="object"||Array.isArray(tr))throw new Error("Ethereum RPC Server errors must provide single object argument.");const{code:er}=tr;if(!Number.isInteger(er)||er>-32005||er<-32099)throw new Error('"code" must be an integer such that: -32099 <= code <= -32005');return getJsonRpcError(er,tr)},invalidInput:tr=>getJsonRpcError(errorCodes.rpc.invalidInput,tr),resourceNotFound:tr=>getJsonRpcError(errorCodes.rpc.resourceNotFound,tr),resourceUnavailable:tr=>getJsonRpcError(errorCodes.rpc.resourceUnavailable,tr),transactionRejected:tr=>getJsonRpcError(errorCodes.rpc.transactionRejected,tr),methodNotSupported:tr=>getJsonRpcError(errorCodes.rpc.methodNotSupported,tr),limitExceeded:tr=>getJsonRpcError(errorCodes.rpc.limitExceeded,tr)},providerErrors={userRejectedRequest:tr=>getEthProviderError$1(errorCodes.provider.userRejectedRequest,tr),unauthorized:tr=>getEthProviderError$1(errorCodes.provider.unauthorized,tr),unsupportedMethod:tr=>getEthProviderError$1(errorCodes.provider.unsupportedMethod,tr),disconnected:tr=>getEthProviderError$1(errorCodes.provider.disconnected,tr),chainDisconnected:tr=>getEthProviderError$1(errorCodes.provider.chainDisconnected,tr),custom:tr=>{if(!tr||typeof tr!="object"||Array.isArray(tr))throw new Error("Ethereum Provider custom errors must provide single object argument.");const{code:er,message:rr,data:nr}=tr;if(!rr||typeof rr!="string")throw new Error('"message" must be a nonempty string');return new EthereumProviderError$1(er,rr,nr)}};function safeApply(tr,er,rr){try{Reflect.apply(tr,er,rr)}catch(nr){setTimeout(()=>{throw nr})}}function arrayClone(tr){const er=tr.length,rr=new Array(er);for(let nr=0;nr<er;nr+=1)rr[nr]=tr[nr];return rr}class SafeEventEmitter extends eventsExports.EventEmitter{emit(er){let rr=er==="error";const nr=this._events;if(nr!==void 0)rr=rr&&nr.error===void 0;else if(!rr)return!1;for(var ir=arguments.length,sr=new Array(ir>1?ir-1:0),or=1;or<ir;or++)sr[or-1]=arguments[or];if(rr){let cr;if(sr.length>0&&([cr]=sr),cr instanceof Error)throw cr;const lr=new Error(`Unhandled error.${cr?` (${cr.message})`:""}`);throw lr.context=cr,lr}const ar=nr[er];if(ar===void 0)return!1;if(typeof ar=="function")safeApply(ar,this,sr);else{const cr=ar.length,lr=arrayClone(ar);for(let ur=0;ur<cr;ur+=1)safeApply(lr[ur],this,sr)}return!0}}class SerializableError extends Error{constructor(er){let{code:rr,message:nr,data:ir}=er;if(!Number.isInteger(rr))throw new Error("code must be an integer");if(!nr||typeof nr!="string")throw new Error("message must be string");super(nr),_defineProperty(this,"code",void 0),_defineProperty(this,"data",void 0),this.code=rr,ir!==void 0&&(this.data=ir)}toString(){return stringify$2({code:this.code,message:this.message,data:this.data,stack:this.stack})}}const getRpcPromiseCallback=function(tr,er){let rr=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;return(nr,ir)=>{nr||ir.error?er(nr||ir.error):!rr||Array.isArray(ir)?tr(ir):tr(ir.result)}};function createStreamMiddleware(){const tr={};function er(){return!1}const rr=new SafeEventEmitter;function nr(cr){const lr=tr[cr.id];if(!lr)throw new Error(`StreamMiddleware - Unknown response id "${cr.id}"`);delete tr[cr.id],Object.assign(lr.res,cr),setTimeout(lr.end)}function ir(cr){rr.emit("notification",cr)}function sr(cr,lr,ur){let dr;try{!cr.id?ir(cr):nr(cr)}catch(yr){dr=yr}ur(dr)}const or=new browserExports$1.Duplex({objectMode:!0,read:er,write:sr});return{events:rr,middleware:(cr,lr,ur,dr)=>{or.push(cr),tr[cr.id]={req:cr,res:lr,next:ur,end:dr}},stream:or}}function createScaffoldMiddleware(tr){return(er,rr,nr,ir)=>{const sr=tr[er.method];return sr===void 0?nr():typeof sr=="function"?sr(er,rr,nr,ir):(rr.result=sr,ir())}}function createIdRemapMiddleware(){return(tr,er,rr,nr)=>{const ir=tr.id,sr=Math.random().toString(36).slice(2);tr.id=sr,er.id=sr,rr(or=>{tr.id=ir,er.id=ir,or()})}}function createAsyncMiddleware(tr){return async(er,rr,nr,ir)=>{let sr;const or=new Promise(ur=>{sr=ur});let ar=null,cr=!1;const lr=async()=>{cr=!0,nr(ur=>{ar=ur,sr()}),await or};try{await tr(er,rr,lr),cr?(await or,ar(null)):ir(null)}catch(ur){const dr=ur;ar?ar(dr):ir(dr)}}}class JRPCEngine extends SafeEventEmitter{constructor(){super(),_defineProperty(this,"_middleware",void 0),this._middleware=[]}static async _runAllMiddleware(er,rr,nr){const ir=[];let sr=null,or=!1;for(const ar of nr)if([sr,or]=await JRPCEngine._runMiddleware(er,rr,ar,ir),or)break;return[sr,or,ir.reverse()]}static _runMiddleware(er,rr,nr,ir){return new Promise(sr=>{const or=cr=>{const lr=cr||rr.error;lr&&(typeof lr=="object"&&Object.keys(lr).includes("stack")===!1&&(lr.stack="Stack trace is not available."),rr.error=serializeError$2(lr,{shouldIncludeStack:!0,fallbackError:{message:(lr==null?void 0:lr.message)||(lr==null?void 0:lr.toString()),code:(lr==null?void 0:lr.code)||-32603,stack:(lr==null?void 0:lr.stack)||"Stack trace is not available.",data:(lr==null?void 0:lr.data)||(lr==null?void 0:lr.message)||(lr==null?void 0:lr.toString())}})),sr([lr,!0])},ar=cr=>{rr.error?or(rr.error):(cr&&(typeof cr!="function"&&or(new SerializableError({code:-32603,message:"JRPCEngine: 'next' return handlers must be functions"})),ir.push(cr)),sr([null,!1]))};try{nr(er,rr,ar,or)}catch(cr){or(cr)}})}static async _runReturnHandlers(er){for(const rr of er)await new Promise((nr,ir)=>{rr(sr=>sr?ir(sr):nr())})}static _checkForCompletion(er,rr,nr){if(!("result"in rr)&&!("error"in rr))throw new SerializableError({code:-32603,message:"Response has no error or result for request"});if(!nr)throw new SerializableError({code:-32603,message:"Nothing ended request"})}push(er){this._middleware.push(er)}handle(er,rr){if(rr&&typeof rr!="function")throw new Error('"callback" must be a function if provided.');return Array.isArray(er)?rr?this._handleBatch(er,rr):this._handleBatch(er):rr?this._handle(er,rr):this._promiseHandle(er)}asMiddleware(){return async(er,rr,nr,ir)=>{try{const[sr,or,ar]=await JRPCEngine._runAllMiddleware(er,rr,this._middleware);return or?(await JRPCEngine._runReturnHandlers(ar),ir(sr)):nr(async cr=>{try{await JRPCEngine._runReturnHandlers(ar)}catch(lr){return cr(lr)}return cr()})}catch(sr){return ir(sr)}}}async _handleBatch(er,rr){try{const nr=await Promise.all(er.map(this._promiseHandle.bind(this)));return rr?rr(null,nr):nr}catch(nr){if(rr)return rr(nr);throw nr}}_promiseHandle(er){return new Promise((rr,nr)=>{this._handle(er,(ir,sr)=>{ir&&sr===void 0?nr(ir):rr(sr)}).catch(nr)})}async _handle(er,rr){if(!er||Array.isArray(er)||typeof er!="object"){const mr=new SerializableError({code:-32603,message:"request must be plain object"});return rr(mr,{id:void 0,jsonrpc:"2.0",error:mr})}if(typeof er.method!="string"){const mr=new SerializableError({code:-32603,message:"method must be string"});return rr(mr,{id:er.id,jsonrpc:"2.0",error:mr})}const nr=_objectSpread2({},er),ir={id:nr.id,jsonrpc:nr.jsonrpc};let sr=null;try{await this._processRequest(nr,ir)}catch(mr){sr=mr}if(sr&&(delete ir.result,!ir.error)){var or,ar,cr,lr,ur,dr,yr;typeof sr=="object"&&Object.keys(sr).includes("stack")===!1&&(sr.stack="Stack trace is not available."),ir.error=serializeError$2(sr,{shouldIncludeStack:!0,fallbackError:{message:((or=sr)===null||or===void 0?void 0:or.message)||((ar=sr)===null||ar===void 0?void 0:ar.toString()),code:((cr=sr)===null||cr===void 0?void 0:cr.code)||-32603,stack:((lr=sr)===null||lr===void 0?void 0:lr.stack)||"Stack trace is not available.",data:((ur=sr)===null||ur===void 0?void 0:ur.data)||((dr=sr)===null||dr===void 0?void 0:dr.message)||((yr=sr)===null||yr===void 0?void 0:yr.toString())}})}return rr(sr,ir)}async _processRequest(er,rr){const[nr,ir,sr]=await JRPCEngine._runAllMiddleware(er,rr,this._middleware);if(JRPCEngine._checkForCompletion(er,rr,ir),await JRPCEngine._runReturnHandlers(sr),nr)throw nr}}function mergeMiddleware(tr){const er=new JRPCEngine;return tr.forEach(rr=>er.push(rr)),er.asMiddleware()}function providerFromEngine(tr){const er=new SafeEventEmitter;return er.sendAsync=async rr=>{const nr=await tr.handle(rr);if(nr.error){var ir,sr,or,ar,cr,lr,ur;typeof nr.error=="object"&&Object.keys(nr.error).includes("stack")===!1&&(nr.error.stack="Stack trace is not available.");const dr=serializeError$2(nr.error,{fallbackError:{message:((ir=nr.error)===null||ir===void 0?void 0:ir.message)||((sr=nr.error)===null||sr===void 0?void 0:sr.toString()),code:((or=nr.error)===null||or===void 0?void 0:or.code)||-32603,stack:((ar=nr.error)===null||ar===void 0?void 0:ar.stack)||"Stack trace is not available.",data:((cr=nr.error)===null||cr===void 0?void 0:cr.data)||((lr=nr.error)===null||lr===void 0?void 0:lr.message)||((ur=nr.error)===null||ur===void 0?void 0:ur.toString())},shouldIncludeStack:!0});throw rpcErrors.internal(dr)}return nr.result},er.send=(rr,nr)=>{if(typeof nr!="function")throw new Error('Must provide callback to "send" method.');tr.handle(rr,nr)},tr.on&&tr.on("notification",rr=>{er.emit("data",null,rr)}),er.request=async rr=>{const nr=_objectSpread2(_objectSpread2({},rr),{},{id:Math.random().toString(36).slice(2),jsonrpc:"2.0"});return await er.sendAsync(nr)},er}class Substream extends browserExports$1.Duplex{constructor(er){let{parent:rr,name:nr}=er;super({objectMode:!0}),_defineProperty(this,"_parent",void 0),_defineProperty(this,"_name",void 0),this._parent=rr,this._name=nr}_read(){}_write(er,rr,nr){this._parent.push({name:this._name,data:er}),nr()}}const IGNORE_SUBSTREAM=Symbol("IGNORE_SUBSTREAM");class ObjectMultiplex extends browserExports$1.Duplex{constructor(){let er=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(_objectSpread2(_objectSpread2({},er),{},{objectMode:!0})),_defineProperty(this,"_substreams",void 0),_defineProperty(this,"getStream",void 0),this._substreams={}}createStream(er){if(!er)throw new Error("ObjectMultiplex - name must not be empty");if(this._substreams[er])throw new Error(`ObjectMultiplex - Substream for name "${er}" already exists`);const rr=new Substream({parent:this,name:er});return this._substreams[er]=rr,anyStreamEnd(this,nr=>rr.destroy(nr||void 0)),rr}ignoreStream(er){if(!er)throw new Error("ObjectMultiplex - name must not be empty");if(this._substreams[er])throw new Error(`ObjectMultiplex - Substream for name "${er}" already exists`);this._substreams[er]=IGNORE_SUBSTREAM}_read(){}_write(er,rr,nr){const{name:ir,data:sr}=er;if(!ir)return window.console.warn(`ObjectMultiplex - malformed chunk without name "${er}"`),nr();const or=this._substreams[ir];return or?(or!==IGNORE_SUBSTREAM&&or.push(sr),nr()):(window.console.warn(`ObjectMultiplex - orphaned data for stream "${ir}"`),nr())}}function anyStreamEnd(tr,er){const rr=once$5(er);eos$4(tr,{readable:!1},rr),eos$4(tr,{writable:!1},rr)}var base64url$3={exports:{}},base64url$2={},padString$1={};Object.defineProperty(padString$1,"__esModule",{value:!0});function padString(tr){var er=4,rr=tr.length,nr=rr%er;if(!nr)return tr;var ir=rr,sr=er-nr,or=rr+sr,ar=Buffer.alloc(or);for(ar.write(tr);sr--;)ar.write("=",ir++);return ar.toString()}padString$1.default=padString;Object.defineProperty(base64url$2,"__esModule",{value:!0});var pad_string_1=padString$1;function encode$4(tr,er){return er===void 0&&(er="utf8"),Buffer.isBuffer(tr)?fromBase64(tr.toString("base64")):fromBase64(Buffer.from(tr,er).toString("base64"))}function decode$4(tr,er){return er===void 0&&(er="utf8"),Buffer.from(toBase64(tr),"base64").toString(er)}function toBase64(tr){return tr=tr.toString(),pad_string_1.default(tr).replace(/\-/g,"+").replace(/_/g,"/")}function fromBase64(tr){return tr.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function toBuffer$1(tr){return Buffer.from(toBase64(tr),"base64")}var base64url$1=encode$4;base64url$1.encode=encode$4;base64url$1.decode=decode$4;base64url$1.toBase64=toBase64;base64url$1.fromBase64=fromBase64;base64url$1.toBuffer=toBuffer$1;base64url$2.default=base64url$1;(function(tr){tr.exports=base64url$2.default,tr.exports.default=tr.exports})(base64url$3);var base64urlExports=base64url$3.exports;const base64urlLib=getDefaultExportFromCjs(base64urlExports),TORUS_LEGACY_NETWORK={MAINNET:"mainnet",TESTNET:"testnet",CYAN:"cyan",AQUA:"aqua",CELESTE:"celeste"},TORUS_SAPPHIRE_NETWORK={SAPPHIRE_DEVNET:"sapphire_devnet",SAPPHIRE_MAINNET:"sapphire_mainnet"};TORUS_LEGACY_NETWORK.MAINNET+"",TORUS_LEGACY_NETWORK.TESTNET+"",TORUS_LEGACY_NETWORK.CYAN+"",TORUS_LEGACY_NETWORK.AQUA+"",TORUS_LEGACY_NETWORK.CELESTE+"";TORUS_LEGACY_NETWORK.AQUA+"",TORUS_SAPPHIRE_NETWORK.SAPPHIRE_MAINNET,TORUS_LEGACY_NETWORK.CELESTE+"",TORUS_SAPPHIRE_NETWORK.SAPPHIRE_MAINNET,TORUS_LEGACY_NETWORK.CYAN+"",TORUS_SAPPHIRE_NETWORK.SAPPHIRE_MAINNET,TORUS_LEGACY_NETWORK.MAINNET+"",TORUS_SAPPHIRE_NETWORK.SAPPHIRE_MAINNET,TORUS_LEGACY_NETWORK.TESTNET+"",TORUS_SAPPHIRE_NETWORK.SAPPHIRE_DEVNET;TORUS_LEGACY_NETWORK.MAINNET+"",TORUS_LEGACY_NETWORK.TESTNET+"",TORUS_LEGACY_NETWORK.CYAN+"",TORUS_LEGACY_NETWORK.AQUA+"",TORUS_LEGACY_NETWORK.CELESTE+"";const SIGNER_MAP={[TORUS_SAPPHIRE_NETWORK.SAPPHIRE_MAINNET]:"https://signer.web3auth.io",[TORUS_SAPPHIRE_NETWORK.SAPPHIRE_DEVNET]:"https://signer.web3auth.io",[TORUS_LEGACY_NETWORK.MAINNET]:"https://signer.web3auth.io",[TORUS_LEGACY_NETWORK.TESTNET]:"https://signer.web3auth.io",[TORUS_LEGACY_NETWORK.CYAN]:"https://signer-polygon.web3auth.io",[TORUS_LEGACY_NETWORK.AQUA]:"https://signer-polygon.web3auth.io",[TORUS_LEGACY_NETWORK.CELESTE]:"https://signer-polygon.web3auth.io"};TORUS_LEGACY_NETWORK.MAINNET+"",TORUS_LEGACY_NETWORK.TESTNET+"",TORUS_LEGACY_NETWORK.CYAN+"",TORUS_LEGACY_NETWORK.AQUA+"",TORUS_LEGACY_NETWORK.CELESTE+"";const SESSION_SERVER="https://session.web3auth.io";var colorString$1={exports:{}},colorName$1={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},simpleSwizzle={exports:{}},isArrayish$1=function tr(er){return!er||typeof er=="string"?!1:er instanceof Array||Array.isArray(er)||er.length>=0&&(er.splice instanceof Function||Object.getOwnPropertyDescriptor(er,er.length-1)&&er.constructor.name!=="String")},isArrayish=isArrayish$1,concat=Array.prototype.concat,slice$1=Array.prototype.slice,swizzle$1=simpleSwizzle.exports=function tr(er){for(var rr=[],nr=0,ir=er.length;nr<ir;nr++){var sr=er[nr];isArrayish(sr)?rr=concat.call(rr,slice$1.call(sr)):rr.push(sr)}return rr};swizzle$1.wrap=function(tr){return function(){return tr(swizzle$1(arguments))}};var simpleSwizzleExports=simpleSwizzle.exports,colorNames=colorName$1,swizzle=simpleSwizzleExports,hasOwnProperty$2=Object.hasOwnProperty,reverseNames=Object.create(null);for(var name in colorNames)hasOwnProperty$2.call(colorNames,name)&&(reverseNames[colorNames[name]]=name);var cs=colorString$1.exports={to:{},get:{}};cs.get=function(tr){var er=tr.substring(0,3).toLowerCase(),rr,nr;switch(er){case"hsl":rr=cs.get.hsl(tr),nr="hsl";break;case"hwb":rr=cs.get.hwb(tr),nr="hwb";break;default:rr=cs.get.rgb(tr),nr="rgb";break}return rr?{model:nr,value:rr}:null};cs.get.rgb=function(tr){if(!tr)return null;var er=/^#([a-f0-9]{3,4})$/i,rr=/^#([a-f0-9]{6})([a-f0-9]{2})?$/i,nr=/^rgba?\(\s*([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/,ir=/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/,sr=/^(\w+)$/,or=[0,0,0,1],ar,cr,lr;if(ar=tr.match(rr)){for(lr=ar[2],ar=ar[1],cr=0;cr<3;cr++){var ur=cr*2;or[cr]=parseInt(ar.slice(ur,ur+2),16)}lr&&(or[3]=parseInt(lr,16)/255)}else if(ar=tr.match(er)){for(ar=ar[1],lr=ar[3],cr=0;cr<3;cr++)or[cr]=parseInt(ar[cr]+ar[cr],16);lr&&(or[3]=parseInt(lr+lr,16)/255)}else if(ar=tr.match(nr)){for(cr=0;cr<3;cr++)or[cr]=parseInt(ar[cr+1],0);ar[4]&&(ar[5]?or[3]=parseFloat(ar[4])*.01:or[3]=parseFloat(ar[4]))}else if(ar=tr.match(ir)){for(cr=0;cr<3;cr++)or[cr]=Math.round(parseFloat(ar[cr+1])*2.55);ar[4]&&(ar[5]?or[3]=parseFloat(ar[4])*.01:or[3]=parseFloat(ar[4]))}else return(ar=tr.match(sr))?ar[1]==="transparent"?[0,0,0,0]:hasOwnProperty$2.call(colorNames,ar[1])?(or=colorNames[ar[1]],or[3]=1,or):null:null;for(cr=0;cr<3;cr++)or[cr]=clamp(or[cr],0,255);return or[3]=clamp(or[3],0,1),or};cs.get.hsl=function(tr){if(!tr)return null;var er=/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,?\s*([+-]?[\d\.]+)%\s*,?\s*([+-]?[\d\.]+)%\s*(?:[,|\/]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,rr=tr.match(er);if(rr){var nr=parseFloat(rr[4]),ir=(parseFloat(rr[1])%360+360)%360,sr=clamp(parseFloat(rr[2]),0,100),or=clamp(parseFloat(rr[3]),0,100),ar=clamp(isNaN(nr)?1:nr,0,1);return[ir,sr,or,ar]}return null};cs.get.hwb=function(tr){if(!tr)return null;var er=/^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,rr=tr.match(er);if(rr){var nr=parseFloat(rr[4]),ir=(parseFloat(rr[1])%360+360)%360,sr=clamp(parseFloat(rr[2]),0,100),or=clamp(parseFloat(rr[3]),0,100),ar=clamp(isNaN(nr)?1:nr,0,1);return[ir,sr,or,ar]}return null};cs.to.hex=function(){var tr=swizzle(arguments);return"#"+hexDouble(tr[0])+hexDouble(tr[1])+hexDouble(tr[2])+(tr[3]<1?hexDouble(Math.round(tr[3]*255)):"")};cs.to.rgb=function(){var tr=swizzle(arguments);return tr.length<4||tr[3]===1?"rgb("+Math.round(tr[0])+", "+Math.round(tr[1])+", "+Math.round(tr[2])+")":"rgba("+Math.round(tr[0])+", "+Math.round(tr[1])+", "+Math.round(tr[2])+", "+tr[3]+")"};cs.to.rgb.percent=function(){var tr=swizzle(arguments),er=Math.round(tr[0]/255*100),rr=Math.round(tr[1]/255*100),nr=Math.round(tr[2]/255*100);return tr.length<4||tr[3]===1?"rgb("+er+"%, "+rr+"%, "+nr+"%)":"rgba("+er+"%, "+rr+"%, "+nr+"%, "+tr[3]+")"};cs.to.hsl=function(){var tr=swizzle(arguments);return tr.length<4||tr[3]===1?"hsl("+tr[0]+", "+tr[1]+"%, "+tr[2]+"%)":"hsla("+tr[0]+", "+tr[1]+"%, "+tr[2]+"%, "+tr[3]+")"};cs.to.hwb=function(){var tr=swizzle(arguments),er="";return tr.length>=4&&tr[3]!==1&&(er=", "+tr[3]),"hwb("+tr[0]+", "+tr[1]+"%, "+tr[2]+"%"+er+")"};cs.to.keyword=function(tr){return reverseNames[tr.slice(0,3)]};function clamp(tr,er,rr){return Math.min(Math.max(er,tr),rr)}function hexDouble(tr){var er=Math.round(tr).toString(16).toUpperCase();return er.length<2?"0"+er:er}var colorStringExports=colorString$1.exports,colorName={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};const cssKeywords=colorName,reverseKeywords={};for(const tr of Object.keys(cssKeywords))reverseKeywords[cssKeywords[tr]]=tr;const convert$2={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};var conversions$2=convert$2;for(const tr of Object.keys(convert$2)){if(!("channels"in convert$2[tr]))throw new Error("missing channels property: "+tr);if(!("labels"in convert$2[tr]))throw new Error("missing channel labels property: "+tr);if(convert$2[tr].labels.length!==convert$2[tr].channels)throw new Error("channel and label counts mismatch: "+tr);const{channels:er,labels:rr}=convert$2[tr];delete convert$2[tr].channels,delete convert$2[tr].labels,Object.defineProperty(convert$2[tr],"channels",{value:er}),Object.defineProperty(convert$2[tr],"labels",{value:rr})}convert$2.rgb.hsl=function(tr){const er=tr[0]/255,rr=tr[1]/255,nr=tr[2]/255,ir=Math.min(er,rr,nr),sr=Math.max(er,rr,nr),or=sr-ir;let ar,cr;sr===ir?ar=0:er===sr?ar=(rr-nr)/or:rr===sr?ar=2+(nr-er)/or:nr===sr&&(ar=4+(er-rr)/or),ar=Math.min(ar*60,360),ar<0&&(ar+=360);const lr=(ir+sr)/2;return sr===ir?cr=0:lr<=.5?cr=or/(sr+ir):cr=or/(2-sr-ir),[ar,cr*100,lr*100]};convert$2.rgb.hsv=function(tr){let er,rr,nr,ir,sr;const or=tr[0]/255,ar=tr[1]/255,cr=tr[2]/255,lr=Math.max(or,ar,cr),ur=lr-Math.min(or,ar,cr),dr=function(yr){return(lr-yr)/6/ur+1/2};return ur===0?(ir=0,sr=0):(sr=ur/lr,er=dr(or),rr=dr(ar),nr=dr(cr),or===lr?ir=nr-rr:ar===lr?ir=1/3+er-nr:cr===lr&&(ir=2/3+rr-er),ir<0?ir+=1:ir>1&&(ir-=1)),[ir*360,sr*100,lr*100]};convert$2.rgb.hwb=function(tr){const er=tr[0],rr=tr[1];let nr=tr[2];const ir=convert$2.rgb.hsl(tr)[0],sr=1/255*Math.min(er,Math.min(rr,nr));return nr=1-1/255*Math.max(er,Math.max(rr,nr)),[ir,sr*100,nr*100]};convert$2.rgb.cmyk=function(tr){const er=tr[0]/255,rr=tr[1]/255,nr=tr[2]/255,ir=Math.min(1-er,1-rr,1-nr),sr=(1-er-ir)/(1-ir)||0,or=(1-rr-ir)/(1-ir)||0,ar=(1-nr-ir)/(1-ir)||0;return[sr*100,or*100,ar*100,ir*100]};function comparativeDistance(tr,er){return(tr[0]-er[0])**2+(tr[1]-er[1])**2+(tr[2]-er[2])**2}convert$2.rgb.keyword=function(tr){const er=reverseKeywords[tr];if(er)return er;let rr=1/0,nr;for(const ir of Object.keys(cssKeywords)){const sr=cssKeywords[ir],or=comparativeDistance(tr,sr);or<rr&&(rr=or,nr=ir)}return nr};convert$2.keyword.rgb=function(tr){return cssKeywords[tr]};convert$2.rgb.xyz=function(tr){let er=tr[0]/255,rr=tr[1]/255,nr=tr[2]/255;er=er>.04045?((er+.055)/1.055)**2.4:er/12.92,rr=rr>.04045?((rr+.055)/1.055)**2.4:rr/12.92,nr=nr>.04045?((nr+.055)/1.055)**2.4:nr/12.92;const ir=er*.4124+rr*.3576+nr*.1805,sr=er*.2126+rr*.7152+nr*.0722,or=er*.0193+rr*.1192+nr*.9505;return[ir*100,sr*100,or*100]};convert$2.rgb.lab=function(tr){const er=convert$2.rgb.xyz(tr);let rr=er[0],nr=er[1],ir=er[2];rr/=95.047,nr/=100,ir/=108.883,rr=rr>.008856?rr**(1/3):7.787*rr+16/116,nr=nr>.008856?nr**(1/3):7.787*nr+16/116,ir=ir>.008856?ir**(1/3):7.787*ir+16/116;const sr=116*nr-16,or=500*(rr-nr),ar=200*(nr-ir);return[sr,or,ar]};convert$2.hsl.rgb=function(tr){const er=tr[0]/360,rr=tr[1]/100,nr=tr[2]/100;let ir,sr,or;if(rr===0)return or=nr*255,[or,or,or];nr<.5?ir=nr*(1+rr):ir=nr+rr-nr*rr;const ar=2*nr-ir,cr=[0,0,0];for(let lr=0;lr<3;lr++)sr=er+1/3*-(lr-1),sr<0&&sr++,sr>1&&sr--,6*sr<1?or=ar+(ir-ar)*6*sr:2*sr<1?or=ir:3*sr<2?or=ar+(ir-ar)*(2/3-sr)*6:or=ar,cr[lr]=or*255;return cr};convert$2.hsl.hsv=function(tr){const er=tr[0];let rr=tr[1]/100,nr=tr[2]/100,ir=rr;const sr=Math.max(nr,.01);nr*=2,rr*=nr<=1?nr:2-nr,ir*=sr<=1?sr:2-sr;const or=(nr+rr)/2,ar=nr===0?2*ir/(sr+ir):2*rr/(nr+rr);return[er,ar*100,or*100]};convert$2.hsv.rgb=function(tr){const er=tr[0]/60,rr=tr[1]/100;let nr=tr[2]/100;const ir=Math.floor(er)%6,sr=er-Math.floor(er),or=255*nr*(1-rr),ar=255*nr*(1-rr*sr),cr=255*nr*(1-rr*(1-sr));switch(nr*=255,ir){case 0:return[nr,cr,or];case 1:return[ar,nr,or];case 2:return[or,nr,cr];case 3:return[or,ar,nr];case 4:return[cr,or,nr];case 5:return[nr,or,ar]}};convert$2.hsv.hsl=function(tr){const er=tr[0],rr=tr[1]/100,nr=tr[2]/100,ir=Math.max(nr,.01);let sr,or;or=(2-rr)*nr;const ar=(2-rr)*ir;return sr=rr*ir,sr/=ar<=1?ar:2-ar,sr=sr||0,or/=2,[er,sr*100,or*100]};convert$2.hwb.rgb=function(tr){const er=tr[0]/360;let rr=tr[1]/100,nr=tr[2]/100;const ir=rr+nr;let sr;ir>1&&(rr/=ir,nr/=ir);const or=Math.floor(6*er),ar=1-nr;sr=6*er-or,or&1&&(sr=1-sr);const cr=rr+sr*(ar-rr);let lr,ur,dr;switch(or){default:case 6:case 0:lr=ar,ur=cr,dr=rr;break;case 1:lr=cr,ur=ar,dr=rr;break;case 2:lr=rr,ur=ar,dr=cr;break;case 3:lr=rr,ur=cr,dr=ar;break;case 4:lr=cr,ur=rr,dr=ar;break;case 5:lr=ar,ur=rr,dr=cr;break}return[lr*255,ur*255,dr*255]};convert$2.cmyk.rgb=function(tr){const er=tr[0]/100,rr=tr[1]/100,nr=tr[2]/100,ir=tr[3]/100,sr=1-Math.min(1,er*(1-ir)+ir),or=1-Math.min(1,rr*(1-ir)+ir),ar=1-Math.min(1,nr*(1-ir)+ir);return[sr*255,or*255,ar*255]};convert$2.xyz.rgb=function(tr){const er=tr[0]/100,rr=tr[1]/100,nr=tr[2]/100;let ir,sr,or;return ir=er*3.2406+rr*-1.5372+nr*-.4986,sr=er*-.9689+rr*1.8758+nr*.0415,or=er*.0557+rr*-.204+nr*1.057,ir=ir>.0031308?1.055*ir**(1/2.4)-.055:ir*12.92,sr=sr>.0031308?1.055*sr**(1/2.4)-.055:sr*12.92,or=or>.0031308?1.055*or**(1/2.4)-.055:or*12.92,ir=Math.min(Math.max(0,ir),1),sr=Math.min(Math.max(0,sr),1),or=Math.min(Math.max(0,or),1),[ir*255,sr*255,or*255]};convert$2.xyz.lab=function(tr){let er=tr[0],rr=tr[1],nr=tr[2];er/=95.047,rr/=100,nr/=108.883,er=er>.008856?er**(1/3):7.787*er+16/116,rr=rr>.008856?rr**(1/3):7.787*rr+16/116,nr=nr>.008856?nr**(1/3):7.787*nr+16/116;const ir=116*rr-16,sr=500*(er-rr),or=200*(rr-nr);return[ir,sr,or]};convert$2.lab.xyz=function(tr){const er=tr[0],rr=tr[1],nr=tr[2];let ir,sr,or;sr=(er+16)/116,ir=rr/500+sr,or=sr-nr/200;const ar=sr**3,cr=ir**3,lr=or**3;return sr=ar>.008856?ar:(sr-16/116)/7.787,ir=cr>.008856?cr:(ir-16/116)/7.787,or=lr>.008856?lr:(or-16/116)/7.787,ir*=95.047,sr*=100,or*=108.883,[ir,sr,or]};convert$2.lab.lch=function(tr){const er=tr[0],rr=tr[1],nr=tr[2];let ir;ir=Math.atan2(nr,rr)*360/2/Math.PI,ir<0&&(ir+=360);const or=Math.sqrt(rr*rr+nr*nr);return[er,or,ir]};convert$2.lch.lab=function(tr){const er=tr[0],rr=tr[1],ir=tr[2]/360*2*Math.PI,sr=rr*Math.cos(ir),or=rr*Math.sin(ir);return[er,sr,or]};convert$2.rgb.ansi16=function(tr,er=null){const[rr,nr,ir]=tr;let sr=er===null?convert$2.rgb.hsv(tr)[2]:er;if(sr=Math.round(sr/50),sr===0)return 30;let or=30+(Math.round(ir/255)<<2|Math.round(nr/255)<<1|Math.round(rr/255));return sr===2&&(or+=60),or};convert$2.hsv.ansi16=function(tr){return convert$2.rgb.ansi16(convert$2.hsv.rgb(tr),tr[2])};convert$2.rgb.ansi256=function(tr){const er=tr[0],rr=tr[1],nr=tr[2];return er===rr&&rr===nr?er<8?16:er>248?231:Math.round((er-8)/247*24)+232:16+36*Math.round(er/255*5)+6*Math.round(rr/255*5)+Math.round(nr/255*5)};convert$2.ansi16.rgb=function(tr){let er=tr%10;if(er===0||er===7)return tr>50&&(er+=3.5),er=er/10.5*255,[er,er,er];const rr=(~~(tr>50)+1)*.5,nr=(er&1)*rr*255,ir=(er>>1&1)*rr*255,sr=(er>>2&1)*rr*255;return[nr,ir,sr]};convert$2.ansi256.rgb=function(tr){if(tr>=232){const sr=(tr-232)*10+8;return[sr,sr,sr]}tr-=16;let er;const rr=Math.floor(tr/36)/5*255,nr=Math.floor((er=tr%36)/6)/5*255,ir=er%6/5*255;return[rr,nr,ir]};convert$2.rgb.hex=function(tr){const rr=(((Math.round(tr[0])&255)<<16)+((Math.round(tr[1])&255)<<8)+(Math.round(tr[2])&255)).toString(16).toUpperCase();return"000000".substring(rr.length)+rr};convert$2.hex.rgb=function(tr){const er=tr.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!er)return[0,0,0];let rr=er[0];er[0].length===3&&(rr=rr.split("").map(ar=>ar+ar).join(""));const nr=parseInt(rr,16),ir=nr>>16&255,sr=nr>>8&255,or=nr&255;return[ir,sr,or]};convert$2.rgb.hcg=function(tr){const er=tr[0]/255,rr=tr[1]/255,nr=tr[2]/255,ir=Math.max(Math.max(er,rr),nr),sr=Math.min(Math.min(er,rr),nr),or=ir-sr;let ar,cr;return or<1?ar=sr/(1-or):ar=0,or<=0?cr=0:ir===er?cr=(rr-nr)/or%6:ir===rr?cr=2+(nr-er)/or:cr=4+(er-rr)/or,cr/=6,cr%=1,[cr*360,or*100,ar*100]};convert$2.hsl.hcg=function(tr){const er=tr[1]/100,rr=tr[2]/100,nr=rr<.5?2*er*rr:2*er*(1-rr);let ir=0;return nr<1&&(ir=(rr-.5*nr)/(1-nr)),[tr[0],nr*100,ir*100]};convert$2.hsv.hcg=function(tr){const er=tr[1]/100,rr=tr[2]/100,nr=er*rr;let ir=0;return nr<1&&(ir=(rr-nr)/(1-nr)),[tr[0],nr*100,ir*100]};convert$2.hcg.rgb=function(tr){const er=tr[0]/360,rr=tr[1]/100,nr=tr[2]/100;if(rr===0)return[nr*255,nr*255,nr*255];const ir=[0,0,0],sr=er%1*6,or=sr%1,ar=1-or;let cr=0;switch(Math.floor(sr)){case 0:ir[0]=1,ir[1]=or,ir[2]=0;break;case 1:ir[0]=ar,ir[1]=1,ir[2]=0;break;case 2:ir[0]=0,ir[1]=1,ir[2]=or;break;case 3:ir[0]=0,ir[1]=ar,ir[2]=1;break;case 4:ir[0]=or,ir[1]=0,ir[2]=1;break;default:ir[0]=1,ir[1]=0,ir[2]=ar}return cr=(1-rr)*nr,[(rr*ir[0]+cr)*255,(rr*ir[1]+cr)*255,(rr*ir[2]+cr)*255]};convert$2.hcg.hsv=function(tr){const er=tr[1]/100,rr=tr[2]/100,nr=er+rr*(1-er);let ir=0;return nr>0&&(ir=er/nr),[tr[0],ir*100,nr*100]};convert$2.hcg.hsl=function(tr){const er=tr[1]/100,nr=tr[2]/100*(1-er)+.5*er;let ir=0;return nr>0&&nr<.5?ir=er/(2*nr):nr>=.5&&nr<1&&(ir=er/(2*(1-nr))),[tr[0],ir*100,nr*100]};convert$2.hcg.hwb=function(tr){const er=tr[1]/100,rr=tr[2]/100,nr=er+rr*(1-er);return[tr[0],(nr-er)*100,(1-nr)*100]};convert$2.hwb.hcg=function(tr){const er=tr[1]/100,nr=1-tr[2]/100,ir=nr-er;let sr=0;return ir<1&&(sr=(nr-ir)/(1-ir)),[tr[0],ir*100,sr*100]};convert$2.apple.rgb=function(tr){return[tr[0]/65535*255,tr[1]/65535*255,tr[2]/65535*255]};convert$2.rgb.apple=function(tr){return[tr[0]/255*65535,tr[1]/255*65535,tr[2]/255*65535]};convert$2.gray.rgb=function(tr){return[tr[0]/100*255,tr[0]/100*255,tr[0]/100*255]};convert$2.gray.hsl=function(tr){return[0,0,tr[0]]};convert$2.gray.hsv=convert$2.gray.hsl;convert$2.gray.hwb=function(tr){return[0,100,tr[0]]};convert$2.gray.cmyk=function(tr){return[0,0,0,tr[0]]};convert$2.gray.lab=function(tr){return[tr[0],0,0]};convert$2.gray.hex=function(tr){const er=Math.round(tr[0]/100*255)&255,nr=((er<<16)+(er<<8)+er).toString(16).toUpperCase();return"000000".substring(nr.length)+nr};convert$2.rgb.gray=function(tr){return[(tr[0]+tr[1]+tr[2])/3/255*100]};const conversions$1=conversions$2;function buildGraph(){const tr={},er=Object.keys(conversions$1);for(let rr=er.length,nr=0;nr<rr;nr++)tr[er[nr]]={distance:-1,parent:null};return tr}function deriveBFS(tr){const er=buildGraph(),rr=[tr];for(er[tr].distance=0;rr.length;){const nr=rr.pop(),ir=Object.keys(conversions$1[nr]);for(let sr=ir.length,or=0;or<sr;or++){const ar=ir[or],cr=er[ar];cr.distance===-1&&(cr.distance=er[nr].distance+1,cr.parent=nr,rr.unshift(ar))}}return er}function link(tr,er){return function(rr){return er(tr(rr))}}function wrapConversion(tr,er){const rr=[er[tr].parent,tr];let nr=conversions$1[er[tr].parent][tr],ir=er[tr].parent;for(;er[ir].parent;)rr.unshift(er[ir].parent),nr=link(conversions$1[er[ir].parent][ir],nr),ir=er[ir].parent;return nr.conversion=rr,nr}var route$1=function(tr){const er=deriveBFS(tr),rr={},nr=Object.keys(er);for(let ir=nr.length,sr=0;sr<ir;sr++){const or=nr[sr];er[or].parent!==null&&(rr[or]=wrapConversion(or,er))}return rr};const conversions=conversions$2,route=route$1,convert$1={},models=Object.keys(conversions);function wrapRaw(tr){const er=function(...rr){const nr=rr[0];return nr==null?nr:(nr.length>1&&(rr=nr),tr(rr))};return"conversion"in tr&&(er.conversion=tr.conversion),er}function wrapRounded(tr){const er=function(...rr){const nr=rr[0];if(nr==null)return nr;nr.length>1&&(rr=nr);const ir=tr(rr);if(typeof ir=="object")for(let sr=ir.length,or=0;or<sr;or++)ir[or]=Math.round(ir[or]);return ir};return"conversion"in tr&&(er.conversion=tr.conversion),er}models.forEach(tr=>{convert$1[tr]={},Object.defineProperty(convert$1[tr],"channels",{value:conversions[tr].channels}),Object.defineProperty(convert$1[tr],"labels",{value:conversions[tr].labels});const er=route(tr);Object.keys(er).forEach(nr=>{const ir=er[nr];convert$1[tr][nr]=wrapRounded(ir),convert$1[tr][nr].raw=wrapRaw(ir)})});var colorConvert=convert$1;const colorString=colorStringExports,convert=colorConvert,skippedModels=["keyword","gray","hex"],hashedModelKeys={};for(const tr of Object.keys(convert))hashedModelKeys[[...convert[tr].labels].sort().join("")]=tr;const limiters={};function Color(tr,er){if(!(this instanceof Color))return new Color(tr,er);if(er&&er in skippedModels&&(er=null),er&&!(er in convert))throw new Error("Unknown model: "+er);let rr,nr;if(tr==null)this.model="rgb",this.color=[0,0,0],this.valpha=1;else if(tr instanceof Color)this.model=tr.model,this.color=[...tr.color],this.valpha=tr.valpha;else if(typeof tr=="string"){const ir=colorString.get(tr);if(ir===null)throw new Error("Unable to parse color from string: "+tr);this.model=ir.model,nr=convert[this.model].channels,this.color=ir.value.slice(0,nr),this.valpha=typeof ir.value[nr]=="number"?ir.value[nr]:1}else if(tr.length>0){this.model=er||"rgb",nr=convert[this.model].channels;const ir=Array.prototype.slice.call(tr,0,nr);this.color=zeroArray(ir,nr),this.valpha=typeof tr[nr]=="number"?tr[nr]:1}else if(typeof tr=="number")this.model="rgb",this.color=[tr>>16&255,tr>>8&255,tr&255],this.valpha=1;else{this.valpha=1;const ir=Object.keys(tr);"alpha"in tr&&(ir.splice(ir.indexOf("alpha"),1),this.valpha=typeof tr.alpha=="number"?tr.alpha:0);const sr=ir.sort().join("");if(!(sr in hashedModelKeys))throw new Error("Unable to parse color from object: "+JSON.stringify(tr));this.model=hashedModelKeys[sr];const{labels:or}=convert[this.model],ar=[];for(rr=0;rr<or.length;rr++)ar.push(tr[or[rr]]);this.color=zeroArray(ar)}if(limiters[this.model])for(nr=convert[this.model].channels,rr=0;rr<nr;rr++){const ir=limiters[this.model][rr];ir&&(this.color[rr]=ir(this.color[rr]))}this.valpha=Math.max(0,Math.min(1,this.valpha)),Object.freeze&&Object.freeze(this)}Color.prototype={toString(){return this.string()},toJSON(){return this[this.model]()},string(tr){let er=this.model in colorString.to?this:this.rgb();er=er.round(typeof tr=="number"?tr:1);const rr=er.valpha===1?er.color:[...er.color,this.valpha];return colorString.to[er.model](rr)},percentString(tr){const er=this.rgb().round(typeof tr=="number"?tr:1),rr=er.valpha===1?er.color:[...er.color,this.valpha];return colorString.to.rgb.percent(rr)},array(){return this.valpha===1?[...this.color]:[...this.color,this.valpha]},object(){const tr={},{channels:er}=convert[this.model],{labels:rr}=convert[this.model];for(let nr=0;nr<er;nr++)tr[rr[nr]]=this.color[nr];return this.valpha!==1&&(tr.alpha=this.valpha),tr},unitArray(){const tr=this.rgb().color;return tr[0]/=255,tr[1]/=255,tr[2]/=255,this.valpha!==1&&tr.push(this.valpha),tr},unitObject(){const tr=this.rgb().object();return tr.r/=255,tr.g/=255,tr.b/=255,this.valpha!==1&&(tr.alpha=this.valpha),tr},round(tr){return tr=Math.max(tr||0,0),new Color([...this.color.map(roundToPlace(tr)),this.valpha],this.model)},alpha(tr){return tr!==void 0?new Color([...this.color,Math.max(0,Math.min(1,tr))],this.model):this.valpha},red:getset("rgb",0,maxfn(255)),green:getset("rgb",1,maxfn(255)),blue:getset("rgb",2,maxfn(255)),hue:getset(["hsl","hsv","hsl","hwb","hcg"],0,tr=>(tr%360+360)%360),saturationl:getset("hsl",1,maxfn(100)),lightness:getset("hsl",2,maxfn(100)),saturationv:getset("hsv",1,maxfn(100)),value:getset("hsv",2,maxfn(100)),chroma:getset("hcg",1,maxfn(100)),gray:getset("hcg",2,maxfn(100)),white:getset("hwb",1,maxfn(100)),wblack:getset("hwb",2,maxfn(100)),cyan:getset("cmyk",0,maxfn(100)),magenta:getset("cmyk",1,maxfn(100)),yellow:getset("cmyk",2,maxfn(100)),black:getset("cmyk",3,maxfn(100)),x:getset("xyz",0,maxfn(95.047)),y:getset("xyz",1,maxfn(100)),z:getset("xyz",2,maxfn(108.833)),l:getset("lab",0,maxfn(100)),a:getset("lab",1),b:getset("lab",2),keyword(tr){return tr!==void 0?new Color(tr):convert[this.model].keyword(this.color)},hex(tr){return tr!==void 0?new Color(tr):colorString.to.hex(this.rgb().round().color)},hexa(tr){if(tr!==void 0)return new Color(tr);const er=this.rgb().round().color;let rr=Math.round(this.valpha*255).toString(16).toUpperCase();return rr.length===1&&(rr="0"+rr),colorString.to.hex(er)+rr},rgbNumber(){const tr=this.rgb().color;return(tr[0]&255)<<16|(tr[1]&255)<<8|tr[2]&255},luminosity(){const tr=this.rgb().color,er=[];for(const[rr,nr]of tr.entries()){const ir=nr/255;er[rr]=ir<=.04045?ir/12.92:((ir+.055)/1.055)**2.4}return .2126*er[0]+.7152*er[1]+.0722*er[2]},contrast(tr){const er=this.luminosity(),rr=tr.luminosity();return er>rr?(er+.05)/(rr+.05):(rr+.05)/(er+.05)},level(tr){const er=this.contrast(tr);return er>=7?"AAA":er>=4.5?"AA":""},isDark(){const tr=this.rgb().color;return(tr[0]*2126+tr[1]*7152+tr[2]*722)/1e4<128},isLight(){return!this.isDark()},negate(){const tr=this.rgb();for(let er=0;er<3;er++)tr.color[er]=255-tr.color[er];return tr},lighten(tr){const er=this.hsl();return er.color[2]+=er.color[2]*tr,er},darken(tr){const er=this.hsl();return er.color[2]-=er.color[2]*tr,er},saturate(tr){const er=this.hsl();return er.color[1]+=er.color[1]*tr,er},desaturate(tr){const er=this.hsl();return er.color[1]-=er.color[1]*tr,er},whiten(tr){const er=this.hwb();return er.color[1]+=er.color[1]*tr,er},blacken(tr){const er=this.hwb();return er.color[2]+=er.color[2]*tr,er},grayscale(){const tr=this.rgb().color,er=tr[0]*.3+tr[1]*.59+tr[2]*.11;return Color.rgb(er,er,er)},fade(tr){return this.alpha(this.valpha-this.valpha*tr)},opaquer(tr){return this.alpha(this.valpha+this.valpha*tr)},rotate(tr){const er=this.hsl();let rr=er.color[0];return rr=(rr+tr)%360,rr=rr<0?360+rr:rr,er.color[0]=rr,er},mix(tr,er){if(!tr||!tr.rgb)throw new Error('Argument to "mix" was not a Color instance, but rather an instance of '+typeof tr);const rr=tr.rgb(),nr=this.rgb(),ir=er===void 0?.5:er,sr=2*ir-1,or=rr.alpha()-nr.alpha(),ar=((sr*or===-1?sr:(sr+or)/(1+sr*or))+1)/2,cr=1-ar;return Color.rgb(ar*rr.red()+cr*nr.red(),ar*rr.green()+cr*nr.green(),ar*rr.blue()+cr*nr.blue(),rr.alpha()*ir+nr.alpha()*(1-ir))}};for(const tr of Object.keys(convert)){if(skippedModels.includes(tr))continue;const{channels:er}=convert[tr];Color.prototype[tr]=function(...rr){return this.model===tr?new Color(this):rr.length>0?new Color(rr,tr):new Color([...assertArray(convert[this.model][tr].raw(this.color)),this.valpha],tr)},Color[tr]=function(...rr){let nr=rr[0];return typeof nr=="number"&&(nr=zeroArray(rr,er)),new Color(nr,tr)}}function roundTo(tr,er){return Number(tr.toFixed(er))}function roundToPlace(tr){return function(er){return roundTo(er,tr)}}function getset(tr,er,rr){tr=Array.isArray(tr)?tr:[tr];for(const nr of tr)(limiters[nr]||(limiters[nr]=[]))[er]=rr;return tr=tr[0],function(nr){let ir;return nr!==void 0?(rr&&(nr=rr(nr)),ir=this[tr](),ir.color[er]=nr,ir):(ir=this[tr]().color[er],rr&&(ir=rr(ir)),ir)}}function maxfn(tr){return function(er){return Math.max(0,Math.min(tr,er))}}function assertArray(tr){return Array.isArray(tr)?tr:[tr]}function zeroArray(tr,er){for(let rr=0;rr<er;rr++)typeof tr[rr]!="number"&&(tr[rr]=0);return tr}var color=Color;const Color$1=getDefaultExportFromCjs(color),base64url=base64urlLib;function safeatob(tr){return base64url.decode(tr)}function jsonToBase64(tr){return base64url.encode(JSON.stringify(tr))}function storageAvailable$1(tr){let er=!1,rr=0,nr;try{nr=window[tr],er=!0,rr=nr.length;const ir="__storage_test__";return nr.setItem(ir,ir),nr.removeItem(ir),!0}catch(ir){const sr=ir;return sr&&(sr.code===22||sr.code===1014||sr.name==="QuotaExceededError"||sr.name==="NS_ERROR_DOM_QUOTA_REACHED")&&er&&rr!==0}}class MemoryStore{constructor(){_defineProperty(this,"store",new Map)}getItem(er){return this.store.get(er)||null}setItem(er,rr){this.store.set(er,rr)}removeItem(er){this.store.delete(er)}}class BrowserStorage{constructor(er,rr){_defineProperty(this,"storage",void 0),_defineProperty(this,"_storeKey",void 0),this.storage=rr,this._storeKey=er;try{rr.getItem(er)||this.resetStore()}catch{}}static getInstance(er){let rr=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"local";if(!this.instanceMap.has(er)){let nr;rr==="local"&&storageAvailable$1("localStorage")?nr=window.localStorage:rr==="session"&&storageAvailable$1("sessionStorage")?nr=window.sessionStorage:nr=new MemoryStore,this.instanceMap.set(er,new this(er,nr))}return this.instanceMap.get(er)}toJSON(){return this.storage.getItem(this._storeKey)}resetStore(){const er=this.getStore();return this.storage.removeItem(this._storeKey),er}getStore(){return JSON.parse(this.storage.getItem(this._storeKey)||"{}")}get(er){return JSON.parse(this.storage.getItem(this._storeKey)||"{}")[er]}set(er,rr){const nr=JSON.parse(this.storage.getItem(this._storeKey)||"{}");nr[er]=rr,this.storage.setItem(this._storeKey,JSON.stringify(nr))}}_defineProperty(BrowserStorage,"instanceMap",new Map);const UX_MODE={POPUP:"popup",REDIRECT:"redirect"},OPENLOGIN_NETWORK=_objectSpread2(_objectSpread2({},TORUS_SAPPHIRE_NETWORK),TORUS_LEGACY_NETWORK),SUPPORTED_KEY_CURVES={SECP256K1:"secp256k1",ED25519:"ed25519"},LOGIN_PROVIDER={GOOGLE:"google",FACEBOOK:"facebook",REDDIT:"reddit",DISCORD:"discord",TWITCH:"twitch",APPLE:"apple",LINE:"line",GITHUB:"github",KAKAO:"kakao",LINKEDIN:"linkedin",TWITTER:"twitter",WEIBO:"weibo",WECHAT:"wechat",FARCASTER:"farcaster",EMAIL_PASSWORDLESS:"email_passwordless",SMS_PASSWORDLESS:"sms_passwordless",WEBAUTHN:"webauthn",JWT:"jwt"},OPENLOGIN_ACTIONS={LOGIN:"login",ENABLE_MFA:"enable_mfa",MANAGE_MFA:"manage_mfa",MODIFY_SOCIAL_FACTOR:"modify_social_factor"},BUILD_ENV={PRODUCTION:"production",DEVELOPMENT:"development",STAGING:"staging",TESTING:"testing"},LANGUAGES={en:"en",ja:"ja",ko:"ko",de:"de",zh:"zh",es:"es",fr:"fr",pt:"pt",nl:"nl",tr:"tr"},LANGUAGE_MAP={en:"english",ja:"japanese",ko:"korean",de:"german",zh:"mandarin",es:"spanish",fr:"french",pt:"portuguese",nl:"dutch",tr:"turkish"},THEME_MODES={light:"light",dark:"dark",auto:"auto"};function getColorsList(){let tr=arguments.length>0&&arguments[0]!==void 0?arguments[0]:3,er=arguments.length>1&&arguments[1]!==void 0?arguments[1]:50,rr=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"black",nr=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,ir=arguments.length>4&&arguments[4]!==void 0?arguments[4]:20,sr=arguments.length>5&&arguments[5]!==void 0?arguments[5]:"#0346ff";const or=[];let ar;for(ar=0;ar<tr;ar+=1)or.push(Color$1(sr).rotate((ar+1)/tr*-nr).saturate((ar+1)/tr*(ir/100)).mix(Color$1(rr),er/100*(ar+1)/tr).hex());return or}function generateWhiteLabelTheme(tr){const er=getColorsList(3,50,"black",0,20,tr),rr=getColorsList(6,85,"white",0,20,tr);return[...er.reverse(),tr,...rr]}function applyWhiteLabelTheme(tr,er){if(er.primary){const rr=generateWhiteLabelTheme(er.primary);tr.style.setProperty("--app-primary-900",rr[0]),tr.style.setProperty("--app-primary-800",rr[1]),tr.style.setProperty("--app-primary-700",rr[2]),tr.style.setProperty("--app-primary-600",rr[3]),tr.style.setProperty("--app-primary-500",rr[4]),tr.style.setProperty("--app-primary-400",rr[5]),tr.style.setProperty("--app-primary-300",rr[6]),tr.style.setProperty("--app-primary-200",rr[7]),tr.style.setProperty("--app-primary-100",rr[8]),tr.style.setProperty("--app-primary-50",rr[9])}er.onPrimary&&tr.style.setProperty("--app-on-primary",er.onPrimary)}function fixProto(tr,er){var rr=Object.setPrototypeOf;rr?rr(tr,er):tr.__proto__=er}function fixStack(tr,er){er===void 0&&(er=tr.constructor);var rr=Error.captureStackTrace;rr&&rr(tr,er)}var __extends$2=function(){var tr=function(rr,nr){return tr=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ir,sr){ir.__proto__=sr}||function(ir,sr){for(var or in sr)Object.prototype.hasOwnProperty.call(sr,or)&&(ir[or]=sr[or])},tr(rr,nr)};return function(er,rr){if(typeof rr!="function"&&rr!==null)throw new TypeError("Class extends value "+String(rr)+" is not a constructor or null");tr(er,rr);function nr(){this.constructor=er}er.prototype=rr===null?Object.create(rr):(nr.prototype=rr.prototype,new nr)}}(),CustomError=function(tr){__extends$2(er,tr);function er(rr,nr){var ir=this.constructor,sr=tr.call(this,rr,nr)||this;return Object.defineProperty(sr,"name",{value:ir.name,enumerable:!1,configurable:!0}),fixProto(sr,ir.prototype),fixStack(sr),sr}return er}(Error);class InvalidTokenError extends Error{}InvalidTokenError.prototype.name="InvalidTokenError";function b64DecodeUnicode(tr){return decodeURIComponent(atob(tr).replace(/(.)/g,(er,rr)=>{let nr=rr.charCodeAt(0).toString(16).toUpperCase();return nr.length<2&&(nr="0"+nr),"%"+nr}))}function base64UrlDecode(tr){let er=tr.replace(/-/g,"+").replace(/_/g,"/");switch(er.length%4){case 0:break;case 2:er+="==";break;case 3:er+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return b64DecodeUnicode(er)}catch{return atob(er)}}function jwtDecode(tr,er){if(typeof tr!="string")throw new InvalidTokenError("Invalid token specified: must be a string");er||(er={});const rr=er.header===!0?0:1,nr=tr.split(".")[rr];if(typeof nr!="string")throw new InvalidTokenError(`Invalid token specified: missing part #${rr+1}`);let ir;try{ir=base64UrlDecode(nr)}catch(sr){throw new InvalidTokenError(`Invalid token specified: invalid base64 for part #${rr+1} (${sr.message})`)}try{return JSON.parse(ir)}catch(sr){throw new InvalidTokenError(`Invalid token specified: invalid json for part #${rr+1} (${sr.message})`)}}var lodash_merge={exports:{}};lodash_merge.exports;(function(tr,er){var rr=200,nr="__lodash_hash_undefined__",ir=800,sr=16,or=9007199254740991,ar="[object Arguments]",cr="[object Array]",lr="[object AsyncFunction]",ur="[object Boolean]",dr="[object Date]",yr="[object Error]",mr="[object Function]",wr="[object GeneratorFunction]",xr="[object Map]",Or="[object Number]",Tr="[object Null]",Ar="[object Object]",Nr="[object Proxy]",Ur="[object RegExp]",Dr="[object Set]",Hr="[object String]",zr="[object Undefined]",Cr="[object WeakMap]",Mr="[object ArrayBuffer]",Pr="[object DataView]",Sr="[object Float32Array]",pr="[object Float64Array]",gr="[object Int8Array]",fr="[object Int16Array]",hr="[object Int32Array]",br="[object Uint8Array]",_r="[object Uint8ClampedArray]",$r="[object Uint16Array]",Er="[object Uint32Array]",vr=/[\\^$.*+?()[\]{}|]/g,Ir=/^\[object .+?Constructor\]$/,Rr=/^(?:0|[1-9]\d*)$/,Br={};Br[Sr]=Br[pr]=Br[gr]=Br[fr]=Br[hr]=Br[br]=Br[_r]=Br[$r]=Br[Er]=!0,Br[ar]=Br[cr]=Br[Mr]=Br[ur]=Br[Pr]=Br[dr]=Br[yr]=Br[mr]=Br[xr]=Br[Or]=Br[Ar]=Br[Ur]=Br[Dr]=Br[Hr]=Br[Cr]=!1;var Jr=typeof globalThis=="object"&&globalThis&&globalThis.Object===Object&&globalThis,Wr=typeof self=="object"&&self&&self.Object===Object&&self,qr=Jr||Wr||Function("return this")(),an=er&&!er.nodeType&&er,tn=an&&!0&&tr&&!tr.nodeType&&tr,cn=tn&&tn.exports===an,dn=cn&&Jr.process,Zr=function(){try{var jr=tn&&tn.require&&tn.require("util").types;return jr||dn&&dn.binding&&dn.binding("util")}catch{}}(),Yr=Zr&&Zr.isTypedArray;function Qr(jr,rn,yn){switch(yn.length){case 0:return jr.call(rn);case 1:return jr.call(rn,yn[0]);case 2:return jr.call(rn,yn[0],yn[1]);case 3:return jr.call(rn,yn[0],yn[1],yn[2])}return jr.apply(rn,yn)}function un(jr,rn){for(var yn=-1,qn=Array(jr);++yn<jr;)qn[yn]=rn(yn);return qn}function gn(jr){return function(rn){return jr(rn)}}function Rn(jr,rn){return jr==null?void 0:jr[rn]}function Pn(jr,rn){return function(yn){return jr(rn(yn))}}var Cn=Array.prototype,Sn=Function.prototype,zn=Object.prototype,Zn=qr["__core-js_shared__"],Kn=Sn.toString,eo=zn.hasOwnProperty,vn=function(){var jr=/[^.]+$/.exec(Zn&&Zn.keys&&Zn.keys.IE_PROTO||"");return jr?"Symbol(src)_1."+jr:""}(),xn=zn.toString,Dn=Kn.call(Object),Xr=RegExp("^"+Kn.call(eo).replace(vr,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Lr=cn?qr.Buffer:void 0,Fr=qr.Symbol,ln=qr.Uint8Array;Lr&&Lr.allocUnsafe;var mn=Pn(Object.getPrototypeOf,Object),_n=Object.create,An=zn.propertyIsEnumerable,Gn=Cn.splice,Xs=Fr?Fr.toStringTag:void 0,Jn=function(){try{var jr=Ao(Object,"defineProperty");return jr({},"",{}),jr}catch{}}(),no=Lr?Lr.isBuffer:void 0,zs=Math.max,to=Date.now,No=Ao(qr,"Map"),Ro=Ao(Object,"create"),uo=function(){function jr(){}return function(rn){if(!$a(rn))return{};if(_n)return _n(rn);jr.prototype=rn;var yn=new jr;return jr.prototype=void 0,yn}}();function To(jr){var rn=-1,yn=jr==null?0:jr.length;for(this.clear();++rn<yn;){var qn=jr[rn];this.set(qn[0],qn[1])}}function Eo(){this.__data__=Ro?Ro(null):{},this.size=0}function so(jr){var rn=this.has(jr)&&delete this.__data__[jr];return this.size-=rn?1:0,rn}function Po(jr){var rn=this.__data__;if(Ro){var yn=rn[jr];return yn===nr?void 0:yn}return eo.call(rn,jr)?rn[jr]:void 0}function hn(jr){var rn=this.__data__;return Ro?rn[jr]!==void 0:eo.call(rn,jr)}function pn(jr,rn){var yn=this.__data__;return this.size+=this.has(jr)?0:1,yn[jr]=Ro&&rn===void 0?nr:rn,this}To.prototype.clear=Eo,To.prototype.delete=so,To.prototype.get=Po,To.prototype.has=hn,To.prototype.set=pn;function kn(jr){var rn=-1,yn=jr==null?0:jr.length;for(this.clear();++rn<yn;){var qn=jr[rn];this.set(qn[0],qn[1])}}function Mn(){this.__data__=[],this.size=0}function Ln(jr){var rn=this.__data__,yn=io(rn,jr);if(yn<0)return!1;var qn=rn.length-1;return yn==qn?rn.pop():Gn.call(rn,yn,1),--this.size,!0}function vo(jr){var rn=this.__data__,yn=io(rn,jr);return yn<0?void 0:rn[yn][1]}function Gr(jr){return io(this.__data__,jr)>-1}function nn(jr,rn){var yn=this.__data__,qn=io(yn,jr);return qn<0?(++this.size,yn.push([jr,rn])):yn[qn][1]=rn,this}kn.prototype.clear=Mn,kn.prototype.delete=Ln,kn.prototype.get=vo,kn.prototype.has=Gr,kn.prototype.set=nn;function sn(jr){var rn=-1,yn=jr==null?0:jr.length;for(this.clear();++rn<yn;){var qn=jr[rn];this.set(qn[0],qn[1])}}function kr(){this.size=0,this.__data__={hash:new To,map:new(No||kn),string:new To}}function fn(jr){var rn=wn(this,jr).delete(jr);return this.size-=rn?1:0,rn}function En(jr){return wn(this,jr).get(jr)}function $n(jr){return wn(this,jr).has(jr)}function Tn(jr,rn){var yn=wn(this,jr),qn=yn.size;return yn.set(jr,rn),this.size+=yn.size==qn?0:1,this}sn.prototype.clear=kr,sn.prototype.delete=fn,sn.prototype.get=En,sn.prototype.has=$n,sn.prototype.set=Tn;function Bn(jr){var rn=this.__data__=new kn(jr);this.size=rn.size}function jn(){this.__data__=new kn,this.size=0}function Hn(jr){var rn=this.__data__,yn=rn.delete(jr);return this.size=rn.size,yn}function go(jr){return this.__data__.get(jr)}function Yn(jr){return this.__data__.has(jr)}function oo(jr,rn){var yn=this.__data__;if(yn instanceof kn){var qn=yn.__data__;if(!No||qn.length<rr-1)return qn.push([jr,rn]),this.size=++yn.size,this;yn=this.__data__=new sn(qn)}return yn.set(jr,rn),this.size=yn.size,this}Bn.prototype.clear=jn,Bn.prototype.delete=Hn,Bn.prototype.get=go,Bn.prototype.has=Yn,Bn.prototype.set=oo;function co(jr,rn){var yn=Yo(jr),qn=!yn&&Hl(jr),Xn=!yn&&!qn&&Pl(jr),po=!yn&&!qn&&!Xn&&Xl(jr),yo=yn||qn||Xn||po,_o=yo?un(jr.length,String):[],bo=_o.length;for(var Ho in jr)yo&&(Ho=="length"||Xn&&(Ho=="offset"||Ho=="parent")||po&&(Ho=="buffer"||Ho=="byteLength"||Ho=="byteOffset")||$o(Ho,bo))||_o.push(Ho);return _o}function ro(jr,rn,yn){(yn!==void 0&&!Fl(jr[rn],yn)||yn===void 0&&!(rn in jr))&&ao(jr,rn,yn)}function fo(jr,rn,yn){var qn=jr[rn];(!(eo.call(jr,rn)&&Fl(qn,yn))||yn===void 0&&!(rn in jr))&&ao(jr,rn,yn)}function io(jr,rn){for(var yn=jr.length;yn--;)if(Fl(jr[yn][0],rn))return yn;return-1}function ao(jr,rn,yn){rn=="__proto__"&&Jn?Jn(jr,rn,{configurable:!0,enumerable:!0,value:yn,writable:!0}):jr[rn]=yn}var lo=xo();function Ws(jr){return jr==null?jr===void 0?zr:Tr:Xs&&Xs in Object(jr)?ko(jr):Do(jr)}function Qs(jr){return _l(jr)&&Ws(jr)==ar}function _i(jr){if(!$a(jr)||Fo(jr))return!1;var rn=Il(jr)?Xr:Ir;return rn.test(Go(jr))}function Js(jr){return _l(jr)&&Nl(jr.length)&&!!Br[Ws(jr)]}function Ls(jr){if(!$a(jr))return Mo(jr);var rn=Io(jr),yn=[];for(var qn in jr)qn=="constructor"&&(rn||!eo.call(jr,qn))||yn.push(qn);return yn}function Qn(jr,rn,yn,qn,Xn){jr!==rn&&lo(rn,function(po,yo){if(Xn||(Xn=new Bn),$a(po))In(jr,rn,yo,yn,Qn,qn,Xn);else{var _o=qn?qn(Uo(jr,yo),po,yo+"",jr,rn,Xn):void 0;_o===void 0&&(_o=po),ro(jr,yo,_o)}},Ql)}function In(jr,rn,yn,qn,Xn,po,yo){var _o=Uo(jr,yn),bo=Uo(rn,yn),Ho=yo.get(bo);if(Ho){ro(jr,yn,Ho);return}var Vo=po?po(_o,bo,yn+"",jr,rn,yo):void 0,Ko=Vo===void 0;if(Ko){var Jo=Yo(bo),zo=!Jo&&Pl(bo),_c=!Jo&&!zo&&Xl(bo);Vo=bo,Jo||zo||_c?Yo(_o)?Vo=_o:pu(_o)?Vo=ho(_o):zo?(Ko=!1,Vo=Un(bo)):_c?(Ko=!1,Vo=Wn(bo)):Vo=[]:Zl(bo)||Hl(bo)?(Vo=_o,Hl(_o)?Vo=ba(_o):(!$a(_o)||Il(_o))&&(Vo=Lo(bo))):Ko=!1}Ko&&(yo.set(bo,Vo),Xn(Vo,bo,qn,po,yo),yo.delete(bo)),ro(jr,yn,Vo)}function Nn(jr,rn){return Wo(jo(jr,rn,gu),jr+"")}var Vn=Jn?function(jr,rn){return Jn(jr,"toString",{configurable:!0,enumerable:!1,value:Hu(rn),writable:!0})}:gu;function Un(jr,rn){return jr.slice()}function Fn(jr){var rn=new jr.constructor(jr.byteLength);return new ln(rn).set(new ln(jr)),rn}function Wn(jr,rn){var yn=Fn(jr.buffer);return new jr.constructor(yn,jr.byteOffset,jr.length)}function ho(jr,rn){var yn=-1,qn=jr.length;for(rn||(rn=Array(qn));++yn<qn;)rn[yn]=jr[yn];return rn}function wo(jr,rn,yn,qn){var Xn=!yn;yn||(yn={});for(var po=-1,yo=rn.length;++po<yo;){var _o=rn[po],bo=void 0;bo===void 0&&(bo=jr[_o]),Xn?ao(yn,_o,bo):fo(yn,_o,bo)}return yn}function So(jr){return Nn(function(rn,yn){var qn=-1,Xn=yn.length,po=Xn>1?yn[Xn-1]:void 0,yo=Xn>2?yn[2]:void 0;for(po=jr.length>3&&typeof po=="function"?(Xn--,po):void 0,yo&&Co(yn[0],yn[1],yo)&&(po=Xn<3?void 0:po,Xn=1),rn=Object(rn);++qn<Xn;){var _o=yn[qn];_o&&jr(rn,_o,qn,po)}return rn})}function xo(jr){return function(rn,yn,qn){for(var Xn=-1,po=Object(rn),yo=qn(rn),_o=yo.length;_o--;){var bo=yo[++Xn];if(yn(po[bo],bo,po)===!1)break}return rn}}function wn(jr,rn){var yn=jr.__data__;return Oo(rn)?yn[typeof rn=="string"?"string":"hash"]:yn.map}function Ao(jr,rn){var yn=Rn(jr,rn);return _i(yn)?yn:void 0}function ko(jr){var rn=eo.call(jr,Xs),yn=jr[Xs];try{jr[Xs]=void 0;var qn=!0}catch{}var Xn=xn.call(jr);return qn&&(rn?jr[Xs]=yn:delete jr[Xs]),Xn}function Lo(jr){return typeof jr.constructor=="function"&&!Io(jr)?uo(mn(jr)):{}}function $o(jr,rn){var yn=typeof jr;return rn=rn??or,!!rn&&(yn=="number"||yn!="symbol"&&Rr.test(jr))&&jr>-1&&jr%1==0&&jr<rn}function Co(jr,rn,yn){if(!$a(yn))return!1;var qn=typeof rn;return(qn=="number"?Vl(yn)&&$o(rn,yn.length):qn=="string"&&rn in yn)?Fl(yn[rn],jr):!1}function Oo(jr){var rn=typeof jr;return rn=="string"||rn=="number"||rn=="symbol"||rn=="boolean"?jr!=="__proto__":jr===null}function Fo(jr){return!!vn&&vn in jr}function Io(jr){var rn=jr&&jr.constructor,yn=typeof rn=="function"&&rn.prototype||zn;return jr===yn}function Mo(jr){var rn=[];if(jr!=null)for(var yn in Object(jr))rn.push(yn);return rn}function Do(jr){return xn.call(jr)}function jo(jr,rn,yn){return rn=zs(rn===void 0?jr.length-1:rn,0),function(){for(var qn=arguments,Xn=-1,po=zs(qn.length-rn,0),yo=Array(po);++Xn<po;)yo[Xn]=qn[rn+Xn];Xn=-1;for(var _o=Array(rn+1);++Xn<rn;)_o[Xn]=qn[Xn];return _o[rn]=yn(yo),Qr(jr,this,_o)}}function Uo(jr,rn){if(!(rn==="constructor"&&typeof jr[rn]=="function")&&rn!="__proto__")return jr[rn]}var Wo=qo(Vn);function qo(jr){var rn=0,yn=0;return function(){var qn=to(),Xn=sr-(qn-yn);if(yn=qn,Xn>0){if(++rn>=ir)return arguments[0]}else rn=0;return jr.apply(void 0,arguments)}}function Go(jr){if(jr!=null){try{return Kn.call(jr)}catch{}try{return jr+""}catch{}}return""}function Fl(jr,rn){return jr===rn||jr!==jr&&rn!==rn}var Hl=Qs(function(){return arguments}())?Qs:function(jr){return _l(jr)&&eo.call(jr,"callee")&&!An.call(jr,"callee")},Yo=Array.isArray;function Vl(jr){return jr!=null&&Nl(jr.length)&&!Il(jr)}function pu(jr){return _l(jr)&&Vl(jr)}var Pl=no||Vr;function Il(jr){if(!$a(jr))return!1;var rn=Ws(jr);return rn==mr||rn==wr||rn==lr||rn==Nr}function Nl(jr){return typeof jr=="number"&&jr>-1&&jr%1==0&&jr<=or}function $a(jr){var rn=typeof jr;return jr!=null&&(rn=="object"||rn=="function")}function _l(jr){return jr!=null&&typeof jr=="object"}function Zl(jr){if(!_l(jr)||Ws(jr)!=Ar)return!1;var rn=mn(jr);if(rn===null)return!0;var yn=eo.call(rn,"constructor")&&rn.constructor;return typeof yn=="function"&&yn instanceof yn&&Kn.call(yn)==Dn}var Xl=Yr?gn(Yr):Js;function ba(jr){return wo(jr,Ql(jr))}function Ql(jr){return Vl(jr)?co(jr):Ls(jr)}var eu=So(function(jr,rn,yn){Qn(jr,rn,yn)});function Hu(jr){return function(){return jr}}function gu(jr){return jr}function Vr(){return!1}tr.exports=eu})(lodash_merge,lodash_merge.exports);var lodash_mergeExports=lodash_merge.exports;const merge=getDefaultExportFromCjs(lodash_mergeExports);var loglevel$2={exports:{}};(function(tr){(function(er,rr){tr.exports?tr.exports=rr():er.log=rr()})(commonjsGlobal,function(){var er=function(){},rr="undefined",nr=typeof window!==rr&&typeof window.navigator!==rr&&/Trident\/|MSIE /.test(window.navigator.userAgent),ir=["trace","debug","info","warn","error"],sr={},or=null;function ar(xr,Or){var Tr=xr[Or];if(typeof Tr.bind=="function")return Tr.bind(xr);try{return Function.prototype.bind.call(Tr,xr)}catch{return function(){return Function.prototype.apply.apply(Tr,[xr,arguments])}}}function cr(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function lr(xr){return xr==="debug"&&(xr="log"),typeof console===rr?!1:xr==="trace"&&nr?cr:console[xr]!==void 0?ar(console,xr):console.log!==void 0?ar(console,"log"):er}function ur(){for(var xr=this.getLevel(),Or=0;Or<ir.length;Or++){var Tr=ir[Or];this[Tr]=Or<xr?er:this.methodFactory(Tr,xr,this.name)}if(this.log=this.debug,typeof console===rr&&xr<this.levels.SILENT)return"No console available for logging"}function dr(xr){return function(){typeof console!==rr&&(ur.call(this),this[xr].apply(this,arguments))}}function yr(xr,Or,Tr){return lr(xr)||dr.apply(this,arguments)}function mr(xr,Or){var Tr=this,Ar,Nr,Ur,Dr="loglevel";typeof xr=="string"?Dr+=":"+xr:typeof xr=="symbol"&&(Dr=void 0);function Hr(Sr){var pr=(ir[Sr]||"silent").toUpperCase();if(!(typeof window===rr||!Dr)){try{window.localStorage[Dr]=pr;return}catch{}try{window.document.cookie=encodeURIComponent(Dr)+"="+pr+";"}catch{}}}function zr(){var Sr;if(!(typeof window===rr||!Dr)){try{Sr=window.localStorage[Dr]}catch{}if(typeof Sr===rr)try{var pr=window.document.cookie,gr=encodeURIComponent(Dr),fr=pr.indexOf(gr+"=");fr!==-1&&(Sr=/^([^;]+)/.exec(pr.slice(fr+gr.length+1))[1])}catch{}return Tr.levels[Sr]===void 0&&(Sr=void 0),Sr}}function Cr(){if(!(typeof window===rr||!Dr)){try{window.localStorage.removeItem(Dr)}catch{}try{window.document.cookie=encodeURIComponent(Dr)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch{}}}function Mr(Sr){var pr=Sr;if(typeof pr=="string"&&Tr.levels[pr.toUpperCase()]!==void 0&&(pr=Tr.levels[pr.toUpperCase()]),typeof pr=="number"&&pr>=0&&pr<=Tr.levels.SILENT)return pr;throw new TypeError("log.setLevel() called with invalid level: "+Sr)}Tr.name=xr,Tr.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},Tr.methodFactory=Or||yr,Tr.getLevel=function(){return Ur??Nr??Ar},Tr.setLevel=function(Sr,pr){return Ur=Mr(Sr),pr!==!1&&Hr(Ur),ur.call(Tr)},Tr.setDefaultLevel=function(Sr){Nr=Mr(Sr),zr()||Tr.setLevel(Sr,!1)},Tr.resetLevel=function(){Ur=null,Cr(),ur.call(Tr)},Tr.enableAll=function(Sr){Tr.setLevel(Tr.levels.TRACE,Sr)},Tr.disableAll=function(Sr){Tr.setLevel(Tr.levels.SILENT,Sr)},Tr.rebuild=function(){if(or!==Tr&&(Ar=Mr(or.getLevel())),ur.call(Tr),or===Tr)for(var Sr in sr)sr[Sr].rebuild()},Ar=Mr(or?or.getLevel():"WARN");var Pr=zr();Pr!=null&&(Ur=Mr(Pr)),ur.call(Tr)}or=new mr,or.getLogger=function(Or){if(typeof Or!="symbol"&&typeof Or!="string"||Or==="")throw new TypeError("You must supply a name when creating a logger.");var Tr=sr[Or];return Tr||(Tr=sr[Or]=new mr(Or,or.methodFactory)),Tr};var wr=typeof window!==rr?window.log:void 0;return or.noConflict=function(){return typeof window!==rr&&window.log===or&&(window.log=wr),or},or.getLoggers=function(){return sr},or.default=or,or})})(loglevel$2);var loglevelExports=loglevel$2.exports;const log$3=getDefaultExportFromCjs(loglevelExports),log$2=log$3.getLogger("http-helpers");log$2.setLevel(loglevelExports.levels.INFO);let apiKey="torus-default";const gatewayAuthHeader="x-api-key";function setLogLevel(tr){log$2.setLevel(tr)}async function fetchAndTrace(tr,er){let rr=null;try{rr=new URL(tr)}catch{}return fetch(tr,er)}function getApiKeyHeaders(){const tr={};return tr[gatewayAuthHeader]=apiKey,tr}function debugLogResponse(tr){log$2.info(`Response: ${tr.status} ${tr.statusText}`),log$2.info(`Url: ${tr.url}`)}function logTracingHeader(tr){const er=tr.headers.get("x-web3-correlation-id");er&&log$2.info(`Request tracing with traceID = ${er}`)}const promiseTimeout=async(tr,er)=>{let rr=null;try{const nr=new Promise((sr,or)=>{rr=setTimeout(()=>{or(new Error(`Timed out in ${tr}ms`))},tr)}),ir=await Promise.race([er,nr]);return rr!=null&&clearTimeout(rr),ir}catch(nr){throw rr!=null&&clearTimeout(rr),nr}},get$1=async function(tr){let er=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},rr=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const nr={mode:"cors",headers:{}};rr.useAPIKey&&(nr.headers=_objectSpread2(_objectSpread2({},nr.headers),getApiKeyHeaders()));const ir=merge(nr,er,{method:"GET"}),sr=await fetchAndTrace(tr,ir);if(sr.ok){const or=sr.headers.get("content-type");return or!=null&&or.includes("application/json")?sr.json():sr.text()}throw debugLogResponse(sr),sr},post=function(tr){let er=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},rr=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},nr=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const ir={mode:"cors",headers:{"Content-Type":"application/json; charset=utf-8"}};nr.useAPIKey&&(ir.headers=_objectSpread2(_objectSpread2({},ir.headers),getApiKeyHeaders()));const sr=merge(ir,rr,{method:"POST"});return nr.isUrlEncodedData?(sr.body=er,sr.headers["Content-Type"]==="application/json; charset=utf-8"&&delete sr.headers["Content-Type"]):sr.body=JSON.stringify(er),promiseTimeout(nr.timeout||6e4,fetchAndTrace(tr,sr).then(or=>{if(nr.logTracingHeader&&logTracingHeader(or),or.ok){const ar=or.headers.get("content-type");return ar!=null&&ar.includes("application/json")?or.json():or.text()}throw debugLogResponse(or),or}))},patch$4=async function(tr){let er=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},rr=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},nr=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const ir={mode:"cors",headers:{"Content-Type":"application/json; charset=utf-8"}};nr.useAPIKey&&(ir.headers=_objectSpread2(_objectSpread2({},ir.headers),getApiKeyHeaders()));const sr=merge(ir,rr,{method:"PATCH"});nr.isUrlEncodedData?(sr.body=er,sr.headers["Content-Type"]==="application/json; charset=utf-8"&&delete sr.headers["Content-Type"]):sr.body=JSON.stringify(er);const or=await fetchAndTrace(tr,sr);if(or.ok){const ar=or.headers.get("content-type");return ar!=null&&ar.includes("application/json")?or.json():or.text()}throw debugLogResponse(or),or},put=async function(tr){let er=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},rr=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},nr=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const ir={mode:"cors",headers:{"Content-Type":"application/json; charset=utf-8"}};nr.useAPIKey&&(ir.headers=_objectSpread2(_objectSpread2({},ir.headers),getApiKeyHeaders()));const sr=merge(ir,rr,{method:"PUT"});nr.isUrlEncodedData?(sr.body=er,sr.headers["Content-Type"]==="application/json; charset=utf-8"&&delete sr.headers["Content-Type"]):sr.body=JSON.stringify(er);const or=await fetchAndTrace(tr,sr);if(or.ok){const ar=or.headers.get("content-type");return ar!=null&&ar.includes("application/json")?or.json():or.text()}throw debugLogResponse(or),or};function serializeError$1(tr){const er=tr.findIndex(sr=>sr instanceof Error),rr=tr.findIndex(sr=>typeof sr=="string"),nr=tr.findIndex(sr=>sr&&typeof sr=="object"&&"status"in sr&&"type"in sr);let ir;if(nr!==-1){const sr=tr[nr];ir=new Error(`${sr.status} ${sr.type.toString()} ${sr.statusText}`)}else er!==-1?ir=tr.splice(er,1)[0]:rr!==-1?ir=new Error(tr.splice(rr,1)[0]):ir=new Error("Unknown error");return[ir,tr]}class Web3AuthError extends CustomError{constructor(er,rr,nr){super(rr),_defineProperty(this,"code",void 0),_defineProperty(this,"message",void 0),_defineProperty(this,"cause",void 0),this.code=er,this.message=rr||"",this.cause=nr,Object.defineProperty(this,"name",{value:"Web3AuthError"})}toJSON(){return{name:this.name,code:this.code,message:this.message,cause:serializeError$1([this.cause])}}toString(){return JSON.stringify(this.toJSON())}}class WalletInitializationError extends Web3AuthError{constructor(er,rr,nr){super(er,rr,nr),Object.defineProperty(this,"name",{value:"WalletInitializationError"})}static fromCode(er,rr="",nr){return new WalletInitializationError(er,`${WalletInitializationError.messages[er]}, ${rr}`,nr)}static notFound(er="",rr){return WalletInitializationError.fromCode(5001,er,rr)}static notInstalled(er="",rr){return WalletInitializationError.fromCode(5002,er,rr)}static notReady(er="",rr){return WalletInitializationError.fromCode(5003,er,rr)}static windowBlocked(er="",rr){return WalletInitializationError.fromCode(5004,er,rr)}static windowClosed(er="",rr){return WalletInitializationError.fromCode(5005,er,rr)}static incompatibleChainNameSpace(er="",rr){return WalletInitializationError.fromCode(5006,er,rr)}static duplicateAdapterError(er="",rr){return WalletInitializationError.fromCode(5007,er,rr)}static invalidProviderConfigError(er="",rr){return WalletInitializationError.fromCode(5008,er,rr)}static providerNotReadyError(er="",rr){return WalletInitializationError.fromCode(5009,er,rr)}static rpcConnectionError(er="",rr){return WalletInitializationError.fromCode(5010,er,rr)}static invalidParams(er="",rr){return WalletInitializationError.fromCode(5011,er,rr)}static invalidNetwork(er="",rr){return WalletInitializationError.fromCode(5013,er,rr)}}_defineProperty(WalletInitializationError,"messages",{5e3:"Custom",5001:"Wallet is not found",5002:"Wallet is not installed",5003:"Wallet is not ready yet",5004:"Wallet window is blocked",5005:"Wallet window has been closed by the user",5006:"Incompatible chain namespace provided",5007:"Adapter has already been included",5008:"Invalid provider Config",5009:"Provider is not ready yet",5010:"Failed to connect with rpc url",5011:"Invalid params passed in",5013:"Invalid network provided"});class WalletLoginError extends Web3AuthError{constructor(er,rr,nr){super(er,rr,nr),Object.defineProperty(this,"name",{value:"WalletLoginError"})}static fromCode(er,rr="",nr){return new WalletLoginError(er,`${WalletLoginError.messages[er]}. ${rr}`,nr)}static connectionError(er="",rr){return WalletLoginError.fromCode(5111,er,rr)}static disconnectionError(er="",rr){return WalletLoginError.fromCode(5112,er,rr)}static notConnectedError(er="",rr){return WalletLoginError.fromCode(5113,er,rr)}static popupClosed(er="",rr){return WalletLoginError.fromCode(5114,er,rr)}static mfaEnabled(er="",rr){return WalletLoginError.fromCode(5115,er,rr)}static chainConfigNotAdded(er="",rr){return WalletLoginError.fromCode(5116,er,rr)}static unsupportedOperation(er="",rr){return WalletLoginError.fromCode(5117,er,rr)}static coreKitKeyNotFound(er="",rr){return WalletLoginError.fromCode(5118,er,rr)}static userNotLoggedIn(er="",rr){return WalletLoginError.fromCode(5119,er,rr)}}_defineProperty(WalletLoginError,"messages",{5e3:"Custom",5111:"Failed to connect with wallet",5112:"Failed to disconnect from wallet",5113:"Wallet is not connected",5114:"Wallet popup has been closed by the user",5115:"User has already enabled mfa, please use the @web3auth/web3auth-web sdk for login with mfa",5116:"Chain config has not been added. Please add the chain config before calling switchChain",5117:"Unsupported operation",5118:"useCoreKitKey flag is enabled but coreKitKey is not available",5119:"User not logged in."});class WalletOperationsError extends Web3AuthError{constructor(er,rr,nr){super(er,rr,nr),Object.defineProperty(this,"name",{value:"WalletOperationsError"})}static fromCode(er,rr="",nr){return new WalletOperationsError(er,`${WalletOperationsError.messages[er]}, ${rr}`,nr)}static chainIDNotAllowed(er="",rr){return WalletOperationsError.fromCode(5201,er,rr)}static operationNotAllowed(er="",rr){return WalletOperationsError.fromCode(5202,er,rr)}static chainNamespaceNotAllowed(er="",rr){return WalletOperationsError.fromCode(5203,er,rr)}}_defineProperty(WalletOperationsError,"messages",{5e3:"Custom",5201:"Provided chainId is not allowed",5202:"This operation is not allowed"});class WalletProviderError extends Web3AuthError{constructor(er,rr,nr){super(er,rr,nr),Object.defineProperty(this,"name",{value:"WalletProviderError"})}static fromCode(er,rr="",nr){return new WalletOperationsError(er,`${WalletProviderError.messages[er]}, ${rr}`,nr)}static invalidRequestArgs(er="",rr){return WalletOperationsError.fromCode(5301,er,rr)}static invalidRequestMethod(er="",rr){return WalletOperationsError.fromCode(5302,er,rr)}static invalidRequestParams(er="",rr){return WalletOperationsError.fromCode(5303,er,rr)}}_defineProperty(WalletProviderError,"messages",{5e3:"Custom",5301:"Expected a single, non-array, object argument.",5302:"'args.method' must be a non-empty string.",5303:"'args.params' must be an object or array if provided."});const CHAIN_NAMESPACES={EIP155:"eip155",SOLANA:"solana",CASPER:"casper",XRPL:"xrpl",OTHER:"other"},ADAPTER_NAMESPACES={EIP155:"eip155",SOLANA:"solana",CASPER:"casper",XRPL:"xrpl",MULTICHAIN:"multichain"},getDefaultNetworkId=tr=>{if(tr===CHAIN_NAMESPACES.EIP155)return 1;if(tr===CHAIN_NAMESPACES.SOLANA)return 1;if(tr===CHAIN_NAMESPACES.XRPL)return 1;throw WalletInitializationError.invalidParams(`Chain namespace ${tr} is not supported`)},getEvmChainConfig=tr=>{const er=CHAIN_NAMESPACES.EIP155;return tr===1?{logo:"https://images.toruswallet.io/eth.svg",chainNamespace:er,chainId:"0x1",rpcTarget:"https://rpc.ankr.com/eth",displayName:"Ethereum Mainnet",blockExplorerUrl:"https://etherscan.io/",ticker:"ETH",tickerName:"Ethereum",decimals:18}:tr===5?{logo:"https://images.toruswallet.io/eth.svg",chainNamespace:er,chainId:"0x5",rpcTarget:"https://rpc.ankr.com/eth_goerli",displayName:"Goerli Testnet",blockExplorerUrl:"https://goerli.etherscan.io/",ticker:"ETH",tickerName:"Ethereum",decimals:18}:tr===11155111?{logo:"https://images.toruswallet.io/eth.svg",chainNamespace:er,chainId:"0xaa36a7",rpcTarget:"https://rpc.ankr.com/eth_sepolia",displayName:"Sepolia Testnet",blockExplorerUrl:"https://sepolia.etherscan.io/",ticker:"ETH",tickerName:"Ethereum",decimals:18}:tr===137?{logo:"https://images.toruswallet.io/polygon.svg",chainNamespace:er,chainId:"0x89",rpcTarget:"https://rpc.ankr.com/polygon",displayName:"Polygon Mainnet",blockExplorerUrl:"https://polygonscan.com",ticker:"MATIC",tickerName:"Polygon"}:tr===80002?{logo:"https://images.toruswallet.io/polygon.svg",chainNamespace:er,chainId:"0x13882",rpcTarget:"https://rpc.ankr.com/polygon_amoy",displayName:"Polygon Amoy Testnet",blockExplorerUrl:"https://www.oklink.com/amoy",ticker:"MATIC",tickerName:"Polygon",decimals:18}:tr===56?{logo:"https://images.toruswallet.io/bnb.png",chainNamespace:er,chainId:"0x38",rpcTarget:"https://rpc.ankr.com/bsc",displayName:"Binance SmartChain Mainnet",blockExplorerUrl:"https://bscscan.com",ticker:"BNB",tickerName:"Binance SmartChain",decimals:18}:tr===97?{logo:"https://images.toruswallet.io/bnb.png",chainNamespace:er,chainId:"0x61",rpcTarget:"https://rpc.ankr.com/bsc_testnet_chapel",displayName:"Binance SmartChain Testnet",blockExplorerUrl:"https://testnet.bscscan.com",ticker:"BNB",tickerName:"Binance SmartChain",decimals:18}:tr===25?{logo:"https://images.toruswallet.io/cro.svg",chainNamespace:er,chainId:"0x19",rpcTarget:"https://rpc.cronos.org",displayName:"Cronos Mainnet",blockExplorerUrl:"https://cronoscan.com/",ticker:"CRO",tickerName:"Cronos"}:tr===338?{logo:"https://images.toruswallet.io/cro.svg",chainNamespace:er,chainId:"0x152",rpcTarget:"https://rpc-t3.cronos.org/",displayName:"Cronos Testnet",blockExplorerUrl:"https://cronoscan.com/",ticker:"CRO",tickerName:"Cronos",decimals:18}:tr===8217?{logo:"https://images.toruswallet.io/klay.svg",chainNamespace:er,chainId:"0x2019",rpcTarget:"https://public-node-api.klaytnapi.com/v1/cypress",displayName:"Klaytn Mainnet",blockExplorerUrl:"https://scope.klaytn.com",ticker:"KLAY",tickerName:"Klaytn",decimals:18}:null},getSolanaChainConfig=tr=>{const er=CHAIN_NAMESPACES.SOLANA;return tr===1?{logo:"https://images.toruswallet.io/sol.svg",chainNamespace:er,chainId:"0x1",rpcTarget:"https://rpc.ankr.com/solana",displayName:"Solana Mainnet",blockExplorerUrl:"https://explorer.solana.com",ticker:"SOL",tickerName:"Solana",decimals:9}:tr===2?{logo:"https://images.toruswallet.io/sol.svg",chainNamespace:er,chainId:"0x2",rpcTarget:"https://api.testnet.solana.com",displayName:"Solana Testnet",blockExplorerUrl:"https://explorer.solana.com?cluster=testnet",ticker:"SOL",tickerName:"Solana",decimals:9}:tr===3?{logo:"https://images.toruswallet.io/sol.svg",chainNamespace:er,chainId:"0x3",rpcTarget:"https://api.devnet.solana.com",displayName:"Solana Devnet",blockExplorerUrl:"https://explorer.solana.com?cluster=devnet",ticker:"SOL",tickerName:"Solana",decimals:9}:null},getXrplChainConfig=tr=>{const er=CHAIN_NAMESPACES.XRPL;return tr===1?{chainNamespace:er,decimals:15,chainId:"0x1",logo:"https://images.toruswallet.io/XRP.svg",rpcTarget:"https://ripple-node.tor.us",wsTarget:"wss://s2.ripple.com",ticker:"XRP",tickerName:"XRPL",displayName:"xrpl mainnet",blockExplorerUrl:"https://livenet.xrpl.org"}:tr===2?{chainNamespace:er,decimals:15,chainId:"0x2",logo:"https://images.toruswallet.io/XRP.svg",rpcTarget:"https://testnet-ripple-node.tor.us",wsTarget:"wss://s.altnet.rippletest.net",ticker:"XRP",tickerName:"XRPL",displayName:"xrpl testnet",blockExplorerUrl:"https://testnet.xrpl.org",isTestnet:!0}:tr===3?{chainNamespace:er,decimals:15,chainId:"0x3",logo:"https://images.toruswallet.io/XRP.svg",rpcTarget:"https://devnet-ripple-node.tor.us",wsTarget:"wss://s.devnet.rippletest.net/",ticker:"XRP",tickerName:"XRPL",displayName:"xrpl devnet",blockExplorerUrl:"https://devnet.xrpl.org",isTestnet:!0}:null},getChainConfig=(tr,er)=>{if(tr===CHAIN_NAMESPACES.OTHER)return null;const rr=er?typeof er=="number"?er:parseInt(er,16):getDefaultNetworkId(tr);return tr===CHAIN_NAMESPACES.EIP155?getEvmChainConfig(rr):tr===CHAIN_NAMESPACES.SOLANA?getSolanaChainConfig(rr):tr===CHAIN_NAMESPACES.XRPL?getXrplChainConfig(rr):null},MULTI_CHAIN_ADAPTERS={OPENLOGIN:"openlogin",WALLET_CONNECT_V2:"wallet-connect-v2",SFA:"sfa"},SOLANA_ADAPTERS=_objectSpread2({TORUS_SOLANA:"torus-solana",PHANTOM:"phantom",SOLFLARE:"solflare"},MULTI_CHAIN_ADAPTERS),EVM_ADAPTERS=_objectSpread2({TORUS_EVM:"torus-evm",METAMASK:"metamask",COINBASE:"coinbase"},MULTI_CHAIN_ADAPTERS),WALLET_ADAPTERS=_objectSpread2(_objectSpread2({},EVM_ADAPTERS),SOLANA_ADAPTERS),ADAPTER_NAMES={[MULTI_CHAIN_ADAPTERS.OPENLOGIN]:"OpenLogin",[MULTI_CHAIN_ADAPTERS.WALLET_CONNECT_V2]:"Wallet Connect v2",[MULTI_CHAIN_ADAPTERS.SFA]:"SFA",[SOLANA_ADAPTERS.TORUS_SOLANA]:"Torus",[SOLANA_ADAPTERS.PHANTOM]:"Phantom",[SOLANA_ADAPTERS.SOLFLARE]:"Solflare",[EVM_ADAPTERS.TORUS_EVM]:"Torus",[EVM_ADAPTERS.METAMASK]:"Metamask",[EVM_ADAPTERS.COINBASE]:"Coinbase"},WEB3AUTH_NETWORK=OPENLOGIN_NETWORK,ADAPTER_CATEGORY={EXTERNAL:"external",IN_APP:"in_app"},ADAPTER_STATUS={NOT_READY:"not_ready",READY:"ready",CONNECTING:"connecting",CONNECTED:"connected",DISCONNECTED:"disconnected",ERRORED:"errored"},ADAPTER_EVENTS=_objectSpread2(_objectSpread2({},ADAPTER_STATUS),{},{ADAPTER_DATA_UPDATED:"adapter_data_updated",CACHE_CLEAR:"cache_clear"});class BaseAdapter extends SafeEventEmitter{constructor(er={}){super(),_defineProperty(this,"adapterData",{}),_defineProperty(this,"sessionTime",86400),_defineProperty(this,"clientId",void 0),_defineProperty(this,"web3AuthNetwork",OPENLOGIN_NETWORK.MAINNET),_defineProperty(this,"useCoreKitKey",void 0),_defineProperty(this,"rehydrated",!1),_defineProperty(this,"chainConfig",null),_defineProperty(this,"knownChainConfigs",{}),_defineProperty(this,"adapterNamespace",void 0),_defineProperty(this,"currentChainNamespace",void 0),_defineProperty(this,"type",void 0),_defineProperty(this,"name",void 0),_defineProperty(this,"status",void 0),this.setAdapterSettings(er)}get chainConfigProxy(){return this.chainConfig?_objectSpread2({},this.chainConfig):null}get connnected(){return this.status===ADAPTER_STATUS.CONNECTED}setAdapterSettings(er){if(this.status===ADAPTER_STATUS.READY)return;er!=null&&er.sessionTime&&(this.sessionTime=er.sessionTime),er!=null&&er.clientId&&(this.clientId=er.clientId),er!=null&&er.web3AuthNetwork&&(this.web3AuthNetwork=er.web3AuthNetwork),(er==null?void 0:er.useCoreKitKey)!==void 0&&(this.useCoreKitKey=er.useCoreKitKey);const rr=er.chainConfig;if(rr){if(!rr.chainNamespace)throw WalletInitializationError.notReady("ChainNamespace is required while setting chainConfig");this.currentChainNamespace=rr.chainNamespace;const nr=getChainConfig(rr.chainNamespace,rr.chainId),ir=_objectSpread2(_objectSpread2({},nr||{}),rr);this.chainConfig=ir,this.addChainConfig(ir)}}checkConnectionRequirements(){if(!(this.name===WALLET_ADAPTERS.WALLET_CONNECT_V2&&this.status===ADAPTER_STATUS.CONNECTING)){if(this.status===ADAPTER_STATUS.CONNECTING)throw WalletInitializationError.notReady("Already connecting");if(this.status===ADAPTER_STATUS.CONNECTED)throw WalletLoginError.connectionError("Already connected");if(this.status!==ADAPTER_STATUS.READY)throw WalletLoginError.connectionError("Wallet adapter is not ready yet, Please wait for init function to resolve before calling connect/connectTo function")}}checkInitializationRequirements(){if(!this.clientId)throw WalletInitializationError.invalidParams("Please initialize Web3Auth with a valid clientId in constructor");if(!this.chainConfig||!this.chainConfig.rpcTarget&&this.chainConfig.chainNamespace!==CHAIN_NAMESPACES.OTHER)throw WalletInitializationError.invalidParams("rpcTarget is required in chainConfig");if(!this.chainConfig.chainId&&this.chainConfig.chainNamespace!==CHAIN_NAMESPACES.OTHER)throw WalletInitializationError.invalidParams("chainID is required in chainConfig");if(this.status!==ADAPTER_STATUS.NOT_READY){if(this.status===ADAPTER_STATUS.CONNECTED)throw WalletInitializationError.notReady("Already connected");if(this.status===ADAPTER_STATUS.READY)throw WalletInitializationError.notReady("Adapter is already initialized")}}checkDisconnectionRequirements(){if(this.status!==ADAPTER_STATUS.CONNECTED)throw WalletLoginError.disconnectionError("Not connected with wallet")}checkAddChainRequirements(er,rr=!1){if(!rr&&!this.provider)throw WalletLoginError.notConnectedError("Not connected with wallet.");if(this.currentChainNamespace!==er.chainNamespace)throw WalletOperationsError.chainNamespaceNotAllowed("This adapter doesn't support this chainNamespace")}checkSwitchChainRequirements({chainId:er},rr=!1){if(!rr&&!this.provider)throw WalletLoginError.notConnectedError("Not connected with wallet.");if(!this.knownChainConfigs[er])throw WalletLoginError.chainConfigNotAdded("Invalid chainId")}updateAdapterData(er){this.adapterData=er,this.emit(ADAPTER_EVENTS.ADAPTER_DATA_UPDATED,{adapterName:this.name,data:er})}addChainConfig(er){const rr=this.knownChainConfigs[er.chainId];this.knownChainConfigs[er.chainId]=_objectSpread2(_objectSpread2({},rr||{}),er)}getChainConfig(er){return this.knownChainConfigs[er]||null}}function storageAvailable(tr){let er=!1,rr=0,nr;try{nr=window[tr],er=!0,rr=nr.length;const ir="__storage_test__";return nr.setItem(ir,ir),nr.removeItem(ir),!0}catch(ir){const sr=ir;return!!(sr&&(sr.code===22||sr.code===1014||sr.name==="QuotaExceededError"||sr.name==="NS_ERROR_DOM_QUOTA_REACHED")&&er&&rr!==0)}}const isHexStrict=tr=>(typeof tr=="string"||typeof tr=="number")&&/^(-)?0x[0-9a-f]*$/i.test(tr),signerHost=tr=>SIGNER_MAP[tr??WEB3AUTH_NETWORK.SAPPHIRE_MAINNET],fetchProjectConfig=async(tr,er)=>{const rr=new URL(`${signerHost(er)}/api/configuration`);return rr.searchParams.append("project_id",tr),rr.searchParams.append("network",er),rr.searchParams.append("whitelist","true"),await get$1(rr.href)},checkIfTokenIsExpired=tr=>{const er=jwtDecode(tr);return!er.exp||er.exp<Math.floor(Date.now()/1e3)},getSavedToken=(tr,er)=>storageAvailable("localStorage")?localStorage.getItem(`${tr.toLowerCase()}_${er}`):null,saveToken=(tr,er,rr)=>storageAvailable("localStorage")?localStorage.setItem(`${tr.toLowerCase()}_${er}`,rr):null,clearToken=(tr,er)=>storageAvailable("localStorage")?localStorage.removeItem(`${tr.toLowerCase()}_${er}`):null;var loglevel$1=log$3.getLogger("web3auth-logger");class WalletServicesPluginError extends Web3AuthError{constructor(er,rr,nr){super(er,rr,nr),Object.defineProperty(this,"name",{value:"WalletServicesPluginError"})}static fromCode(er,rr="",nr){return new WalletServicesPluginError(er,`${WalletServicesPluginError.messages[er]}${rr}`,nr)}static notInitialized(er="",rr){return WalletServicesPluginError.fromCode(5210,er,rr)}static unsupportedAdapter(er="",rr){return WalletServicesPluginError.fromCode(5211,er,rr)}static providerRequired(er="",rr){return WalletServicesPluginError.fromCode(5212,er,rr)}static web3authRequired(er="",rr){return WalletServicesPluginError.fromCode(5213,er,rr)}static web3AuthNotConnected(er="",rr){return WalletServicesPluginError.fromCode(5214,er,rr)}static alreadyInitialized(er="",rr){return WalletServicesPluginError.fromCode(5216,er,rr)}static unsupportedChainNamespace(er="",rr){return WalletServicesPluginError.fromCode(5218,er,rr)}static differentWeb3AuthNetwork(er="",rr){return WalletServicesPluginError.fromCode(5219,er,rr)}static invalidParams(er="",rr){return WalletServicesPluginError.fromCode(5220,er,rr)}static web3authNotInitialized(er="",rr){return WalletServicesPluginError.fromCode(5221,er,rr)}static invalidSession(er="",rr){return WalletServicesPluginError.fromCode(5222,er,rr)}static walletPluginNotConnected(er="",rr){return WalletServicesPluginError.fromCode(5223,er,rr)}}_defineProperty(WalletServicesPluginError,"messages",{5210:"Wallet Services Plugin is not initialized",5211:"Web3Auth is connected to unsupported adapter. Wallet services connector plugin requires web3auth connected to openlogin adapter.",5212:"Provider is required..",5213:"Web3Auth instance is required while initialization.",5214:"Web3Auth is not connected.",5216:"Plugin is already initialized",5218:"Unsupported chain namespace.",5219:"Plugin network different than web3auth instance network.",5221:"Web3Auth is not initialized",5222:"Invalid session inside wallet services. Please report this issue.",5223:"Wallet plugin is not connected Yet. Please wait for plugin to connect and listen via `connected` event on the plugin"});const PLUGIN_NAMESPACES=_objectSpread2(_objectSpread2({},CHAIN_NAMESPACES),{},{MULTICHAIN:"multichain"}),PLUGIN_STATUS={READY:"ready",CONNECTING:"connecting",CONNECTED:"connected",DISCONNECTED:"disconnected",ERRORED:"errored"},PLUGIN_EVENTS=_objectSpread2({},PLUGIN_STATUS),EVM_PLUGINS={WALLET_SERVICES:"wallet-services"},SOLANA_PLUGINS={SOLANA:"solana"};_objectSpread2(_objectSpread2({},EVM_PLUGINS),SOLANA_PLUGINS);function number$4(tr){if(!Number.isSafeInteger(tr)||tr<0)throw new Error(`positive integer expected, not ${tr}`)}function bool$2(tr){if(typeof tr!="boolean")throw new Error(`boolean expected, not ${tr}`)}function isBytes$3(tr){return tr instanceof Uint8Array||tr!=null&&typeof tr=="object"&&tr.constructor.name==="Uint8Array"}function bytes$5(tr,...er){if(!isBytes$3(tr))throw new Error("Uint8Array expected");if(er.length>0&&!er.includes(tr.length))throw new Error(`Uint8Array expected of length ${er}, not of length=${tr.length}`)}function hash$2(tr){if(typeof tr!="function"||typeof tr.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");number$4(tr.outputLen),number$4(tr.blockLen)}function exists$1(tr,er=!0){if(tr.destroyed)throw new Error("Hash instance has been destroyed");if(er&&tr.finished)throw new Error("Hash#digest() has already been called")}function output$1(tr,er){bytes$5(tr);const rr=er.outputLen;if(tr.length<rr)throw new Error(`digestInto() expects output buffer of length at least ${rr}`)}const assert$9={number:number$4,bool:bool$2,bytes:bytes$5,hash:hash$2,exists:exists$1,output:output$1},_assert$1=Object.freeze(Object.defineProperty({__proto__:null,bool:bool$2,bytes:bytes$5,default:assert$9,exists:exists$1,hash:hash$2,isBytes:isBytes$3,number:number$4,output:output$1},Symbol.toStringTag,{value:"Module"})),crypto$2=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function isBytes$2(tr){return tr instanceof Uint8Array||tr!=null&&typeof tr=="object"&&tr.constructor.name==="Uint8Array"}const u8=tr=>new Uint8Array(tr.buffer,tr.byteOffset,tr.byteLength),u32=tr=>new Uint32Array(tr.buffer,tr.byteOffset,Math.floor(tr.byteLength/4)),createView=tr=>new DataView(tr.buffer,tr.byteOffset,tr.byteLength),rotr=(tr,er)=>tr<<32-er|tr>>>er,rotl=(tr,er)=>tr<<er|tr>>>32-er>>>0,isLE=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68,byteSwap=tr=>tr<<24&4278190080|tr<<8&16711680|tr>>>8&65280|tr>>>24&255,byteSwapIfBE=isLE?tr=>tr:tr=>byteSwap(tr);function byteSwap32(tr){for(let er=0;er<tr.length;er++)tr[er]=byteSwap(tr[er])}const hexes$1=Array.from({length:256},(tr,er)=>er.toString(16).padStart(2,"0"));function bytesToHex$5(tr){bytes$5(tr);let er="";for(let rr=0;rr<tr.length;rr++)er+=hexes$1[tr[rr]];return er}const asciis$1={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function asciiToBase16$1(tr){if(tr>=asciis$1._0&&tr<=asciis$1._9)return tr-asciis$1._0;if(tr>=asciis$1._A&&tr<=asciis$1._F)return tr-(asciis$1._A-10);if(tr>=asciis$1._a&&tr<=asciis$1._f)return tr-(asciis$1._a-10)}function hexToBytes$6(tr){if(typeof tr!="string")throw new Error("hex string expected, got "+typeof tr);const er=tr.length,rr=er/2;if(er%2)throw new Error("padded hex string expected, got unpadded hex of length "+er);const nr=new Uint8Array(rr);for(let ir=0,sr=0;ir<rr;ir++,sr+=2){const or=asciiToBase16$1(tr.charCodeAt(sr)),ar=asciiToBase16$1(tr.charCodeAt(sr+1));if(or===void 0||ar===void 0){const cr=tr[sr]+tr[sr+1];throw new Error('hex string expected, got non-hex character "'+cr+'" at index '+sr)}nr[ir]=or*16+ar}return nr}const nextTick$1=async()=>{};async function asyncLoop(tr,er,rr){let nr=Date.now();for(let ir=0;ir<tr;ir++){rr(ir);const sr=Date.now()-nr;sr>=0&&sr<er||(await nextTick$1(),nr+=sr)}}function utf8ToBytes$3(tr){if(typeof tr!="string")throw new Error(`utf8ToBytes expected string, got ${typeof tr}`);return new Uint8Array(new TextEncoder().encode(tr))}function toBytes$4(tr){return typeof tr=="string"&&(tr=utf8ToBytes$3(tr)),bytes$5(tr),tr}function concatBytes$4(...tr){let er=0;for(let nr=0;nr<tr.length;nr++){const ir=tr[nr];bytes$5(ir),er+=ir.length}const rr=new Uint8Array(er);for(let nr=0,ir=0;nr<tr.length;nr++){const sr=tr[nr];rr.set(sr,ir),ir+=sr.length}return rr}let Hash$7=class{clone(){return this._cloneInto()}};const toStr$5={}.toString;function checkOpts(tr,er){if(er!==void 0&&toStr$5.call(er)!=="[object Object]")throw new Error("Options should be object or undefined");return Object.assign(tr,er)}function wrapConstructor(tr){const er=nr=>tr().update(toBytes$4(nr)).digest(),rr=tr();return er.outputLen=rr.outputLen,er.blockLen=rr.blockLen,er.create=()=>tr(),er}function wrapConstructorWithOpts(tr){const er=(nr,ir)=>tr(ir).update(toBytes$4(nr)).digest(),rr=tr({});return er.outputLen=rr.outputLen,er.blockLen=rr.blockLen,er.create=nr=>tr(nr),er}function wrapXOFConstructorWithOpts(tr){const er=(nr,ir)=>tr(ir).update(toBytes$4(nr)).digest(),rr=tr({});return er.outputLen=rr.outputLen,er.blockLen=rr.blockLen,er.create=nr=>tr(nr),er}function randomBytes$1(tr=32){if(crypto$2&&typeof crypto$2.getRandomValues=="function")return crypto$2.getRandomValues(new Uint8Array(tr));throw new Error("crypto.getRandomValues must be defined")}const utils$6=Object.freeze(Object.defineProperty({__proto__:null,Hash:Hash$7,asyncLoop,byteSwap,byteSwap32,byteSwapIfBE,bytesToHex:bytesToHex$5,checkOpts,concatBytes:concatBytes$4,createView,hexToBytes:hexToBytes$6,isBytes:isBytes$2,isLE,nextTick:nextTick$1,randomBytes:randomBytes$1,rotl,rotr,toBytes:toBytes$4,u32,u8,utf8ToBytes:utf8ToBytes$3,wrapConstructor,wrapConstructorWithOpts,wrapXOFConstructorWithOpts},Symbol.toStringTag,{value:"Module"}));function setBigUint64(tr,er,rr,nr){if(typeof tr.setBigUint64=="function")return tr.setBigUint64(er,rr,nr);const ir=BigInt(32),sr=BigInt(4294967295),or=Number(rr>>ir&sr),ar=Number(rr&sr),cr=nr?4:0,lr=nr?0:4;tr.setUint32(er+cr,or,nr),tr.setUint32(er+lr,ar,nr)}const Chi=(tr,er,rr)=>tr&er^~tr&rr,Maj=(tr,er,rr)=>tr&er^tr&rr^er&rr;class HashMD extends Hash$7{constructor(er,rr,nr,ir){super(),this.blockLen=er,this.outputLen=rr,this.padOffset=nr,this.isLE=ir,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(er),this.view=createView(this.buffer)}update(er){exists$1(this);const{view:rr,buffer:nr,blockLen:ir}=this;er=toBytes$4(er);const sr=er.length;for(let or=0;or<sr;){const ar=Math.min(ir-this.pos,sr-or);if(ar===ir){const cr=createView(er);for(;ir<=sr-or;or+=ir)this.process(cr,or);continue}nr.set(er.subarray(or,or+ar),this.pos),this.pos+=ar,or+=ar,this.pos===ir&&(this.process(rr,0),this.pos=0)}return this.length+=er.length,this.roundClean(),this}digestInto(er){exists$1(this),output$1(er,this),this.finished=!0;const{buffer:rr,view:nr,blockLen:ir,isLE:sr}=this;let{pos:or}=this;rr[or++]=128,this.buffer.subarray(or).fill(0),this.padOffset>ir-or&&(this.process(nr,0),or=0);for(let dr=or;dr<ir;dr++)rr[dr]=0;setBigUint64(nr,ir-8,BigInt(this.length*8),sr),this.process(nr,0);const ar=createView(er),cr=this.outputLen;if(cr%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const lr=cr/4,ur=this.get();if(lr>ur.length)throw new Error("_sha2: outputLen bigger than state");for(let dr=0;dr<lr;dr++)ar.setUint32(4*dr,ur[dr],sr)}digest(){const{buffer:er,outputLen:rr}=this;this.digestInto(er);const nr=er.slice(0,rr);return this.destroy(),nr}_cloneInto(er){er||(er=new this.constructor),er.set(...this.get());const{blockLen:rr,buffer:nr,length:ir,finished:sr,destroyed:or,pos:ar}=this;return er.length=ir,er.pos=ar,er.finished=sr,er.destroyed=or,ir%rr&&er.buffer.set(nr),er}}const SHA256_K=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),SHA256_IV=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),SHA256_W=new Uint32Array(64);class SHA256 extends HashMD{constructor(){super(64,32,8,!1),this.A=SHA256_IV[0]|0,this.B=SHA256_IV[1]|0,this.C=SHA256_IV[2]|0,this.D=SHA256_IV[3]|0,this.E=SHA256_IV[4]|0,this.F=SHA256_IV[5]|0,this.G=SHA256_IV[6]|0,this.H=SHA256_IV[7]|0}get(){const{A:er,B:rr,C:nr,D:ir,E:sr,F:or,G:ar,H:cr}=this;return[er,rr,nr,ir,sr,or,ar,cr]}set(er,rr,nr,ir,sr,or,ar,cr){this.A=er|0,this.B=rr|0,this.C=nr|0,this.D=ir|0,this.E=sr|0,this.F=or|0,this.G=ar|0,this.H=cr|0}process(er,rr){for(let dr=0;dr<16;dr++,rr+=4)SHA256_W[dr]=er.getUint32(rr,!1);for(let dr=16;dr<64;dr++){const yr=SHA256_W[dr-15],mr=SHA256_W[dr-2],wr=rotr(yr,7)^rotr(yr,18)^yr>>>3,xr=rotr(mr,17)^rotr(mr,19)^mr>>>10;SHA256_W[dr]=xr+SHA256_W[dr-7]+wr+SHA256_W[dr-16]|0}let{A:nr,B:ir,C:sr,D:or,E:ar,F:cr,G:lr,H:ur}=this;for(let dr=0;dr<64;dr++){const yr=rotr(ar,6)^rotr(ar,11)^rotr(ar,25),mr=ur+yr+Chi(ar,cr,lr)+SHA256_K[dr]+SHA256_W[dr]|0,xr=(rotr(nr,2)^rotr(nr,13)^rotr(nr,22))+Maj(nr,ir,sr)|0;ur=lr,lr=cr,cr=ar,ar=or+mr|0,or=sr,sr=ir,ir=nr,nr=mr+xr|0}nr=nr+this.A|0,ir=ir+this.B|0,sr=sr+this.C|0,or=or+this.D|0,ar=ar+this.E|0,cr=cr+this.F|0,lr=lr+this.G|0,ur=ur+this.H|0,this.set(nr,ir,sr,or,ar,cr,lr,ur)}roundClean(){SHA256_W.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const sha256$1=wrapConstructor(()=>new SHA256);class HMAC extends Hash$7{constructor(er,rr){super(),this.finished=!1,this.destroyed=!1,hash$2(er);const nr=toBytes$4(rr);if(this.iHash=er.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const ir=this.blockLen,sr=new Uint8Array(ir);sr.set(nr.length>ir?er.create().update(nr).digest():nr);for(let or=0;or<sr.length;or++)sr[or]^=54;this.iHash.update(sr),this.oHash=er.create();for(let or=0;or<sr.length;or++)sr[or]^=106;this.oHash.update(sr),sr.fill(0)}update(er){return exists$1(this),this.iHash.update(er),this}digestInto(er){exists$1(this),bytes$5(er,this.outputLen),this.finished=!0,this.iHash.digestInto(er),this.oHash.update(er),this.oHash.digestInto(er),this.destroy()}digest(){const er=new Uint8Array(this.oHash.outputLen);return this.digestInto(er),er}_cloneInto(er){er||(er=Object.create(Object.getPrototypeOf(this),{}));const{oHash:rr,iHash:nr,finished:ir,destroyed:sr,blockLen:or,outputLen:ar}=this;return er=er,er.finished=ir,er.destroyed=sr,er.blockLen=or,er.outputLen=ar,er.oHash=rr._cloneInto(er.oHash),er.iHash=nr._cloneInto(er.iHash),er}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const hmac=(tr,er,rr)=>new HMAC(tr,er).update(rr).digest();hmac.create=(tr,er)=>new HMAC(tr,er);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const _0n$5=BigInt(0),_1n$5=BigInt(1),_2n$4=BigInt(2);function isBytes$1(tr){return tr instanceof Uint8Array||tr!=null&&typeof tr=="object"&&tr.constructor.name==="Uint8Array"}function abytes(tr){if(!isBytes$1(tr))throw new Error("Uint8Array expected")}const hexes=Array.from({length:256},(tr,er)=>er.toString(16).padStart(2,"0"));function bytesToHex$4(tr){abytes(tr);let er="";for(let rr=0;rr<tr.length;rr++)er+=hexes[tr[rr]];return er}function numberToHexUnpadded(tr){const er=tr.toString(16);return er.length&1?`0${er}`:er}function hexToNumber$2(tr){if(typeof tr!="string")throw new Error("hex string expected, got "+typeof tr);return BigInt(tr===""?"0":`0x${tr}`)}const asciis={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function asciiToBase16(tr){if(tr>=asciis._0&&tr<=asciis._9)return tr-asciis._0;if(tr>=asciis._A&&tr<=asciis._F)return tr-(asciis._A-10);if(tr>=asciis._a&&tr<=asciis._f)return tr-(asciis._a-10)}function hexToBytes$5(tr){if(typeof tr!="string")throw new Error("hex string expected, got "+typeof tr);const er=tr.length,rr=er/2;if(er%2)throw new Error("padded hex string expected, got unpadded hex of length "+er);const nr=new Uint8Array(rr);for(let ir=0,sr=0;ir<rr;ir++,sr+=2){const or=asciiToBase16(tr.charCodeAt(sr)),ar=asciiToBase16(tr.charCodeAt(sr+1));if(or===void 0||ar===void 0){const cr=tr[sr]+tr[sr+1];throw new Error('hex string expected, got non-hex character "'+cr+'" at index '+sr)}nr[ir]=or*16+ar}return nr}function bytesToNumberBE(tr){return hexToNumber$2(bytesToHex$4(tr))}function bytesToNumberLE(tr){return abytes(tr),hexToNumber$2(bytesToHex$4(Uint8Array.from(tr).reverse()))}function numberToBytesBE(tr,er){return hexToBytes$5(tr.toString(16).padStart(er*2,"0"))}function numberToBytesLE(tr,er){return numberToBytesBE(tr,er).reverse()}function numberToVarBytesBE(tr){return hexToBytes$5(numberToHexUnpadded(tr))}function ensureBytes(tr,er,rr){let nr;if(typeof er=="string")try{nr=hexToBytes$5(er)}catch(sr){throw new Error(`${tr} must be valid hex string, got "${er}". Cause: ${sr}`)}else if(isBytes$1(er))nr=Uint8Array.from(er);else throw new Error(`${tr} must be hex string or Uint8Array`);const ir=nr.length;if(typeof rr=="number"&&ir!==rr)throw new Error(`${tr} expected ${rr} bytes, got ${ir}`);return nr}function concatBytes$3(...tr){let er=0;for(let nr=0;nr<tr.length;nr++){const ir=tr[nr];abytes(ir),er+=ir.length}const rr=new Uint8Array(er);for(let nr=0,ir=0;nr<tr.length;nr++){const sr=tr[nr];rr.set(sr,ir),ir+=sr.length}return rr}function equalBytes(tr,er){if(tr.length!==er.length)return!1;let rr=0;for(let nr=0;nr<tr.length;nr++)rr|=tr[nr]^er[nr];return rr===0}function utf8ToBytes$2(tr){if(typeof tr!="string")throw new Error(`utf8ToBytes expected string, got ${typeof tr}`);return new Uint8Array(new TextEncoder().encode(tr))}function bitLen(tr){let er;for(er=0;tr>_0n$5;tr>>=_1n$5,er+=1);return er}function bitGet(tr,er){return tr>>BigInt(er)&_1n$5}function bitSet(tr,er,rr){return tr|(rr?_1n$5:_0n$5)<<BigInt(er)}const bitMask=tr=>(_2n$4<<BigInt(tr-1))-_1n$5,u8n=tr=>new Uint8Array(tr),u8fr=tr=>Uint8Array.from(tr);function createHmacDrbg(tr,er,rr){if(typeof tr!="number"||tr<2)throw new Error("hashLen must be a number");if(typeof er!="number"||er<2)throw new Error("qByteLen must be a number");if(typeof rr!="function")throw new Error("hmacFn must be a function");let nr=u8n(tr),ir=u8n(tr),sr=0;const or=()=>{nr.fill(1),ir.fill(0),sr=0},ar=(...dr)=>rr(ir,nr,...dr),cr=(dr=u8n())=>{ir=ar(u8fr([0]),dr),nr=ar(),dr.length!==0&&(ir=ar(u8fr([1]),dr),nr=ar())},lr=()=>{if(sr++>=1e3)throw new Error("drbg: tried 1000 values");let dr=0;const yr=[];for(;dr<er;){nr=ar();const mr=nr.slice();yr.push(mr),dr+=nr.length}return concatBytes$3(...yr)};return(dr,yr)=>{or(),cr(dr);let mr;for(;!(mr=yr(lr()));)cr();return or(),mr}}const validatorFns={bigint:tr=>typeof tr=="bigint",function:tr=>typeof tr=="function",boolean:tr=>typeof tr=="boolean",string:tr=>typeof tr=="string",stringOrUint8Array:tr=>typeof tr=="string"||isBytes$1(tr),isSafeInteger:tr=>Number.isSafeInteger(tr),array:tr=>Array.isArray(tr),field:(tr,er)=>er.Fp.isValid(tr),hash:tr=>typeof tr=="function"&&Number.isSafeInteger(tr.outputLen)};function validateObject(tr,er,rr={}){const nr=(ir,sr,or)=>{const ar=validatorFns[sr];if(typeof ar!="function")throw new Error(`Invalid validator "${sr}", expected function`);const cr=tr[ir];if(!(or&&cr===void 0)&&!ar(cr,tr))throw new Error(`Invalid param ${String(ir)}=${cr} (${typeof cr}), expected ${sr}`)};for(const[ir,sr]of Object.entries(er))nr(ir,sr,!1);for(const[ir,sr]of Object.entries(rr))nr(ir,sr,!0);return tr}const ut=Object.freeze(Object.defineProperty({__proto__:null,abytes,bitGet,bitLen,bitMask,bitSet,bytesToHex:bytesToHex$4,bytesToNumberBE,bytesToNumberLE,concatBytes:concatBytes$3,createHmacDrbg,ensureBytes,equalBytes,hexToBytes:hexToBytes$5,hexToNumber:hexToNumber$2,isBytes:isBytes$1,numberToBytesBE,numberToBytesLE,numberToHexUnpadded,numberToVarBytesBE,utf8ToBytes:utf8ToBytes$2,validateObject},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const _0n$4=BigInt(0),_1n$4=BigInt(1),_2n$3=BigInt(2),_3n$1=BigInt(3),_4n$1=BigInt(4),_5n=BigInt(5),_8n=BigInt(8);BigInt(9);BigInt(16);function mod(tr,er){const rr=tr%er;return rr>=_0n$4?rr:er+rr}function pow(tr,er,rr){if(rr<=_0n$4||er<_0n$4)throw new Error("Expected power/modulo > 0");if(rr===_1n$4)return _0n$4;let nr=_1n$4;for(;er>_0n$4;)er&_1n$4&&(nr=nr*tr%rr),tr=tr*tr%rr,er>>=_1n$4;return nr}function pow2(tr,er,rr){let nr=tr;for(;er-- >_0n$4;)nr*=nr,nr%=rr;return nr}function invert(tr,er){if(tr===_0n$4||er<=_0n$4)throw new Error(`invert: expected positive integers, got n=${tr} mod=${er}`);let rr=mod(tr,er),nr=er,ir=_0n$4,sr=_1n$4;for(;rr!==_0n$4;){const ar=nr/rr,cr=nr%rr,lr=ir-sr*ar;nr=rr,rr=cr,ir=sr,sr=lr}if(nr!==_1n$4)throw new Error("invert: does not exist");return mod(ir,er)}function tonelliShanks(tr){const er=(tr-_1n$4)/_2n$3;let rr,nr,ir;for(rr=tr-_1n$4,nr=0;rr%_2n$3===_0n$4;rr/=_2n$3,nr++);for(ir=_2n$3;ir<tr&&pow(ir,er,tr)!==tr-_1n$4;ir++);if(nr===1){const or=(tr+_1n$4)/_4n$1;return function(cr,lr){const ur=cr.pow(lr,or);if(!cr.eql(cr.sqr(ur),lr))throw new Error("Cannot find square root");return ur}}const sr=(rr+_1n$4)/_2n$3;return function(ar,cr){if(ar.pow(cr,er)===ar.neg(ar.ONE))throw new Error("Cannot find square root");let lr=nr,ur=ar.pow(ar.mul(ar.ONE,ir),rr),dr=ar.pow(cr,sr),yr=ar.pow(cr,rr);for(;!ar.eql(yr,ar.ONE);){if(ar.eql(yr,ar.ZERO))return ar.ZERO;let mr=1;for(let xr=ar.sqr(yr);mr<lr&&!ar.eql(xr,ar.ONE);mr++)xr=ar.sqr(xr);const wr=ar.pow(ur,_1n$4<<BigInt(lr-mr-1));ur=ar.sqr(wr),dr=ar.mul(dr,wr),yr=ar.mul(yr,ur),lr=mr}return dr}}function FpSqrt(tr){if(tr%_4n$1===_3n$1){const er=(tr+_1n$4)/_4n$1;return function(nr,ir){const sr=nr.pow(ir,er);if(!nr.eql(nr.sqr(sr),ir))throw new Error("Cannot find square root");return sr}}if(tr%_8n===_5n){const er=(tr-_5n)/_8n;return function(nr,ir){const sr=nr.mul(ir,_2n$3),or=nr.pow(sr,er),ar=nr.mul(ir,or),cr=nr.mul(nr.mul(ar,_2n$3),or),lr=nr.mul(ar,nr.sub(cr,nr.ONE));if(!nr.eql(nr.sqr(lr),ir))throw new Error("Cannot find square root");return lr}}return tonelliShanks(tr)}const FIELD_FIELDS=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function validateField(tr){const er={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},rr=FIELD_FIELDS.reduce((nr,ir)=>(nr[ir]="function",nr),er);return validateObject(tr,rr)}function FpPow(tr,er,rr){if(rr<_0n$4)throw new Error("Expected power > 0");if(rr===_0n$4)return tr.ONE;if(rr===_1n$4)return er;let nr=tr.ONE,ir=er;for(;rr>_0n$4;)rr&_1n$4&&(nr=tr.mul(nr,ir)),ir=tr.sqr(ir),rr>>=_1n$4;return nr}function FpInvertBatch(tr,er){const rr=new Array(er.length),nr=er.reduce((sr,or,ar)=>tr.is0(or)?sr:(rr[ar]=sr,tr.mul(sr,or)),tr.ONE),ir=tr.inv(nr);return er.reduceRight((sr,or,ar)=>tr.is0(or)?sr:(rr[ar]=tr.mul(sr,rr[ar]),tr.mul(sr,or)),ir),rr}function nLength(tr,er){const rr=er!==void 0?er:tr.toString(2).length,nr=Math.ceil(rr/8);return{nBitLength:rr,nByteLength:nr}}function Field(tr,er,rr=!1,nr={}){if(tr<=_0n$4)throw new Error(`Expected Field ORDER > 0, got ${tr}`);const{nBitLength:ir,nByteLength:sr}=nLength(tr,er);if(sr>2048)throw new Error("Field lengths over 2048 bytes are not supported");const or=FpSqrt(tr),ar=Object.freeze({ORDER:tr,BITS:ir,BYTES:sr,MASK:bitMask(ir),ZERO:_0n$4,ONE:_1n$4,create:cr=>mod(cr,tr),isValid:cr=>{if(typeof cr!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof cr}`);return _0n$4<=cr&&cr<tr},is0:cr=>cr===_0n$4,isOdd:cr=>(cr&_1n$4)===_1n$4,neg:cr=>mod(-cr,tr),eql:(cr,lr)=>cr===lr,sqr:cr=>mod(cr*cr,tr),add:(cr,lr)=>mod(cr+lr,tr),sub:(cr,lr)=>mod(cr-lr,tr),mul:(cr,lr)=>mod(cr*lr,tr),pow:(cr,lr)=>FpPow(ar,cr,lr),div:(cr,lr)=>mod(cr*invert(lr,tr),tr),sqrN:cr=>cr*cr,addN:(cr,lr)=>cr+lr,subN:(cr,lr)=>cr-lr,mulN:(cr,lr)=>cr*lr,inv:cr=>invert(cr,tr),sqrt:nr.sqrt||(cr=>or(ar,cr)),invertBatch:cr=>FpInvertBatch(ar,cr),cmov:(cr,lr,ur)=>ur?lr:cr,toBytes:cr=>rr?numberToBytesLE(cr,sr):numberToBytesBE(cr,sr),fromBytes:cr=>{if(cr.length!==sr)throw new Error(`Fp.fromBytes: expected ${sr}, got ${cr.length}`);return rr?bytesToNumberLE(cr):bytesToNumberBE(cr)}});return Object.freeze(ar)}function getFieldBytesLength(tr){if(typeof tr!="bigint")throw new Error("field order must be bigint");const er=tr.toString(2).length;return Math.ceil(er/8)}function getMinHashLength(tr){const er=getFieldBytesLength(tr);return er+Math.ceil(er/2)}function mapHashToField(tr,er,rr=!1){const nr=tr.length,ir=getFieldBytesLength(er),sr=getMinHashLength(er);if(nr<16||nr<sr||nr>1024)throw new Error(`expected ${sr}-1024 bytes of input, got ${nr}`);const or=rr?bytesToNumberBE(tr):bytesToNumberLE(tr),ar=mod(or,er-_1n$4)+_1n$4;return rr?numberToBytesLE(ar,ir):numberToBytesBE(ar,ir)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const _0n$3=BigInt(0),_1n$3=BigInt(1);function wNAF(tr,er){const rr=(ir,sr)=>{const or=sr.negate();return ir?or:sr},nr=ir=>{const sr=Math.ceil(er/ir)+1,or=2**(ir-1);return{windows:sr,windowSize:or}};return{constTimeNegate:rr,unsafeLadder(ir,sr){let or=tr.ZERO,ar=ir;for(;sr>_0n$3;)sr&_1n$3&&(or=or.add(ar)),ar=ar.double(),sr>>=_1n$3;return or},precomputeWindow(ir,sr){const{windows:or,windowSize:ar}=nr(sr),cr=[];let lr=ir,ur=lr;for(let dr=0;dr<or;dr++){ur=lr,cr.push(ur);for(let yr=1;yr<ar;yr++)ur=ur.add(lr),cr.push(ur);lr=ur.double()}return cr},wNAF(ir,sr,or){const{windows:ar,windowSize:cr}=nr(ir);let lr=tr.ZERO,ur=tr.BASE;const dr=BigInt(2**ir-1),yr=2**ir,mr=BigInt(ir);for(let wr=0;wr<ar;wr++){const xr=wr*cr;let Or=Number(or&dr);or>>=mr,Or>cr&&(Or-=yr,or+=_1n$3);const Tr=xr,Ar=xr+Math.abs(Or)-1,Nr=wr%2!==0,Ur=Or<0;Or===0?ur=ur.add(rr(Nr,sr[Tr])):lr=lr.add(rr(Ur,sr[Ar]))}return{p:lr,f:ur}},wNAFCached(ir,sr,or,ar){const cr=ir._WINDOW_SIZE||1;let lr=sr.get(ir);return lr||(lr=this.precomputeWindow(ir,cr),cr!==1&&sr.set(ir,ar(lr))),this.wNAF(cr,lr,or)}}}function validateBasic(tr){return validateField(tr.Fp),validateObject(tr,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...nLength(tr.n,tr.nBitLength),...tr,p:tr.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function validatePointOpts(tr){const er=validateBasic(tr);validateObject(er,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:rr,Fp:nr,a:ir}=er;if(rr){if(!nr.eql(ir,nr.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof rr!="object"||typeof rr.beta!="bigint"||typeof rr.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...er})}const{bytesToNumberBE:b2n,hexToBytes:h2b}=ut,DER={Err:class extends Error{constructor(er=""){super(er)}},_parseInt(tr){const{Err:er}=DER;if(tr.length<2||tr[0]!==2)throw new er("Invalid signature integer tag");const rr=tr[1],nr=tr.subarray(2,rr+2);if(!rr||nr.length!==rr)throw new er("Invalid signature integer: wrong length");if(nr[0]&128)throw new er("Invalid signature integer: negative");if(nr[0]===0&&!(nr[1]&128))throw new er("Invalid signature integer: unnecessary leading zero");return{d:b2n(nr),l:tr.subarray(rr+2)}},toSig(tr){const{Err:er}=DER,rr=typeof tr=="string"?h2b(tr):tr;abytes(rr);let nr=rr.length;if(nr<2||rr[0]!=48)throw new er("Invalid signature tag");if(rr[1]!==nr-2)throw new er("Invalid signature: incorrect length");const{d:ir,l:sr}=DER._parseInt(rr.subarray(2)),{d:or,l:ar}=DER._parseInt(sr);if(ar.length)throw new er("Invalid signature: left bytes after parsing");return{r:ir,s:or}},hexFromSig(tr){const er=lr=>Number.parseInt(lr[0],16)&8?"00"+lr:lr,rr=lr=>{const ur=lr.toString(16);return ur.length&1?`0${ur}`:ur},nr=er(rr(tr.s)),ir=er(rr(tr.r)),sr=nr.length/2,or=ir.length/2,ar=rr(sr),cr=rr(or);return`30${rr(or+sr+4)}02${cr}${ir}02${ar}${nr}`}},_0n$2=BigInt(0),_1n$2=BigInt(1),_2n$2=BigInt(2),_3n=BigInt(3),_4n=BigInt(4);function weierstrassPoints(tr){const er=validatePointOpts(tr),{Fp:rr}=er,nr=er.toBytes||((wr,xr,Or)=>{const Tr=xr.toAffine();return concatBytes$3(Uint8Array.from([4]),rr.toBytes(Tr.x),rr.toBytes(Tr.y))}),ir=er.fromBytes||(wr=>{const xr=wr.subarray(1),Or=rr.fromBytes(xr.subarray(0,rr.BYTES)),Tr=rr.fromBytes(xr.subarray(rr.BYTES,2*rr.BYTES));return{x:Or,y:Tr}});function sr(wr){const{a:xr,b:Or}=er,Tr=rr.sqr(wr),Ar=rr.mul(Tr,wr);return rr.add(rr.add(Ar,rr.mul(wr,xr)),Or)}if(!rr.eql(rr.sqr(er.Gy),sr(er.Gx)))throw new Error("bad generator point: equation left != right");function or(wr){return typeof wr=="bigint"&&_0n$2<wr&&wr<er.n}function ar(wr){if(!or(wr))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function cr(wr){const{allowedPrivateKeyLengths:xr,nByteLength:Or,wrapPrivateKey:Tr,n:Ar}=er;if(xr&&typeof wr!="bigint"){if(isBytes$1(wr)&&(wr=bytesToHex$4(wr)),typeof wr!="string"||!xr.includes(wr.length))throw new Error("Invalid key");wr=wr.padStart(Or*2,"0")}let Nr;try{Nr=typeof wr=="bigint"?wr:bytesToNumberBE(ensureBytes("private key",wr,Or))}catch{throw new Error(`private key must be ${Or} bytes, hex or bigint, not ${typeof wr}`)}return Tr&&(Nr=mod(Nr,Ar)),ar(Nr),Nr}const lr=new Map;function ur(wr){if(!(wr instanceof dr))throw new Error("ProjectivePoint expected")}class dr{constructor(xr,Or,Tr){if(this.px=xr,this.py=Or,this.pz=Tr,xr==null||!rr.isValid(xr))throw new Error("x required");if(Or==null||!rr.isValid(Or))throw new Error("y required");if(Tr==null||!rr.isValid(Tr))throw new Error("z required")}static fromAffine(xr){const{x:Or,y:Tr}=xr||{};if(!xr||!rr.isValid(Or)||!rr.isValid(Tr))throw new Error("invalid affine point");if(xr instanceof dr)throw new Error("projective point not allowed");const Ar=Nr=>rr.eql(Nr,rr.ZERO);return Ar(Or)&&Ar(Tr)?dr.ZERO:new dr(Or,Tr,rr.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(xr){const Or=rr.invertBatch(xr.map(Tr=>Tr.pz));return xr.map((Tr,Ar)=>Tr.toAffine(Or[Ar])).map(dr.fromAffine)}static fromHex(xr){const Or=dr.fromAffine(ir(ensureBytes("pointHex",xr)));return Or.assertValidity(),Or}static fromPrivateKey(xr){return dr.BASE.multiply(cr(xr))}_setWindowSize(xr){this._WINDOW_SIZE=xr,lr.delete(this)}assertValidity(){if(this.is0()){if(er.allowInfinityPoint&&!rr.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:xr,y:Or}=this.toAffine();if(!rr.isValid(xr)||!rr.isValid(Or))throw new Error("bad point: x or y not FE");const Tr=rr.sqr(Or),Ar=sr(xr);if(!rr.eql(Tr,Ar))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:xr}=this.toAffine();if(rr.isOdd)return!rr.isOdd(xr);throw new Error("Field doesn't support isOdd")}equals(xr){ur(xr);const{px:Or,py:Tr,pz:Ar}=this,{px:Nr,py:Ur,pz:Dr}=xr,Hr=rr.eql(rr.mul(Or,Dr),rr.mul(Nr,Ar)),zr=rr.eql(rr.mul(Tr,Dr),rr.mul(Ur,Ar));return Hr&&zr}negate(){return new dr(this.px,rr.neg(this.py),this.pz)}double(){const{a:xr,b:Or}=er,Tr=rr.mul(Or,_3n),{px:Ar,py:Nr,pz:Ur}=this;let Dr=rr.ZERO,Hr=rr.ZERO,zr=rr.ZERO,Cr=rr.mul(Ar,Ar),Mr=rr.mul(Nr,Nr),Pr=rr.mul(Ur,Ur),Sr=rr.mul(Ar,Nr);return Sr=rr.add(Sr,Sr),zr=rr.mul(Ar,Ur),zr=rr.add(zr,zr),Dr=rr.mul(xr,zr),Hr=rr.mul(Tr,Pr),Hr=rr.add(Dr,Hr),Dr=rr.sub(Mr,Hr),Hr=rr.add(Mr,Hr),Hr=rr.mul(Dr,Hr),Dr=rr.mul(Sr,Dr),zr=rr.mul(Tr,zr),Pr=rr.mul(xr,Pr),Sr=rr.sub(Cr,Pr),Sr=rr.mul(xr,Sr),Sr=rr.add(Sr,zr),zr=rr.add(Cr,Cr),Cr=rr.add(zr,Cr),Cr=rr.add(Cr,Pr),Cr=rr.mul(Cr,Sr),Hr=rr.add(Hr,Cr),Pr=rr.mul(Nr,Ur),Pr=rr.add(Pr,Pr),Cr=rr.mul(Pr,Sr),Dr=rr.sub(Dr,Cr),zr=rr.mul(Pr,Mr),zr=rr.add(zr,zr),zr=rr.add(zr,zr),new dr(Dr,Hr,zr)}add(xr){ur(xr);const{px:Or,py:Tr,pz:Ar}=this,{px:Nr,py:Ur,pz:Dr}=xr;let Hr=rr.ZERO,zr=rr.ZERO,Cr=rr.ZERO;const Mr=er.a,Pr=rr.mul(er.b,_3n);let Sr=rr.mul(Or,Nr),pr=rr.mul(Tr,Ur),gr=rr.mul(Ar,Dr),fr=rr.add(Or,Tr),hr=rr.add(Nr,Ur);fr=rr.mul(fr,hr),hr=rr.add(Sr,pr),fr=rr.sub(fr,hr),hr=rr.add(Or,Ar);let br=rr.add(Nr,Dr);return hr=rr.mul(hr,br),br=rr.add(Sr,gr),hr=rr.sub(hr,br),br=rr.add(Tr,Ar),Hr=rr.add(Ur,Dr),br=rr.mul(br,Hr),Hr=rr.add(pr,gr),br=rr.sub(br,Hr),Cr=rr.mul(Mr,hr),Hr=rr.mul(Pr,gr),Cr=rr.add(Hr,Cr),Hr=rr.sub(pr,Cr),Cr=rr.add(pr,Cr),zr=rr.mul(Hr,Cr),pr=rr.add(Sr,Sr),pr=rr.add(pr,Sr),gr=rr.mul(Mr,gr),hr=rr.mul(Pr,hr),pr=rr.add(pr,gr),gr=rr.sub(Sr,gr),gr=rr.mul(Mr,gr),hr=rr.add(hr,gr),Sr=rr.mul(pr,hr),zr=rr.add(zr,Sr),Sr=rr.mul(br,hr),Hr=rr.mul(fr,Hr),Hr=rr.sub(Hr,Sr),Sr=rr.mul(fr,pr),Cr=rr.mul(br,Cr),Cr=rr.add(Cr,Sr),new dr(Hr,zr,Cr)}subtract(xr){return this.add(xr.negate())}is0(){return this.equals(dr.ZERO)}wNAF(xr){return mr.wNAFCached(this,lr,xr,Or=>{const Tr=rr.invertBatch(Or.map(Ar=>Ar.pz));return Or.map((Ar,Nr)=>Ar.toAffine(Tr[Nr])).map(dr.fromAffine)})}multiplyUnsafe(xr){const Or=dr.ZERO;if(xr===_0n$2)return Or;if(ar(xr),xr===_1n$2)return this;const{endo:Tr}=er;if(!Tr)return mr.unsafeLadder(this,xr);let{k1neg:Ar,k1:Nr,k2neg:Ur,k2:Dr}=Tr.splitScalar(xr),Hr=Or,zr=Or,Cr=this;for(;Nr>_0n$2||Dr>_0n$2;)Nr&_1n$2&&(Hr=Hr.add(Cr)),Dr&_1n$2&&(zr=zr.add(Cr)),Cr=Cr.double(),Nr>>=_1n$2,Dr>>=_1n$2;return Ar&&(Hr=Hr.negate()),Ur&&(zr=zr.negate()),zr=new dr(rr.mul(zr.px,Tr.beta),zr.py,zr.pz),Hr.add(zr)}multiply(xr){ar(xr);let Or=xr,Tr,Ar;const{endo:Nr}=er;if(Nr){const{k1neg:Ur,k1:Dr,k2neg:Hr,k2:zr}=Nr.splitScalar(Or);let{p:Cr,f:Mr}=this.wNAF(Dr),{p:Pr,f:Sr}=this.wNAF(zr);Cr=mr.constTimeNegate(Ur,Cr),Pr=mr.constTimeNegate(Hr,Pr),Pr=new dr(rr.mul(Pr.px,Nr.beta),Pr.py,Pr.pz),Tr=Cr.add(Pr),Ar=Mr.add(Sr)}else{const{p:Ur,f:Dr}=this.wNAF(Or);Tr=Ur,Ar=Dr}return dr.normalizeZ([Tr,Ar])[0]}multiplyAndAddUnsafe(xr,Or,Tr){const Ar=dr.BASE,Nr=(Dr,Hr)=>Hr===_0n$2||Hr===_1n$2||!Dr.equals(Ar)?Dr.multiplyUnsafe(Hr):Dr.multiply(Hr),Ur=Nr(this,Or).add(Nr(xr,Tr));return Ur.is0()?void 0:Ur}toAffine(xr){const{px:Or,py:Tr,pz:Ar}=this,Nr=this.is0();xr==null&&(xr=Nr?rr.ONE:rr.inv(Ar));const Ur=rr.mul(Or,xr),Dr=rr.mul(Tr,xr),Hr=rr.mul(Ar,xr);if(Nr)return{x:rr.ZERO,y:rr.ZERO};if(!rr.eql(Hr,rr.ONE))throw new Error("invZ was invalid");return{x:Ur,y:Dr}}isTorsionFree(){const{h:xr,isTorsionFree:Or}=er;if(xr===_1n$2)return!0;if(Or)return Or(dr,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:xr,clearCofactor:Or}=er;return xr===_1n$2?this:Or?Or(dr,this):this.multiplyUnsafe(er.h)}toRawBytes(xr=!0){return this.assertValidity(),nr(dr,this,xr)}toHex(xr=!0){return bytesToHex$4(this.toRawBytes(xr))}}dr.BASE=new dr(er.Gx,er.Gy,rr.ONE),dr.ZERO=new dr(rr.ZERO,rr.ONE,rr.ZERO);const yr=er.nBitLength,mr=wNAF(dr,er.endo?Math.ceil(yr/2):yr);return{CURVE:er,ProjectivePoint:dr,normPrivateKeyToScalar:cr,weierstrassEquation:sr,isWithinCurveOrder:or}}function validateOpts(tr){const er=validateBasic(tr);return validateObject(er,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...er})}function weierstrass(tr){const er=validateOpts(tr),{Fp:rr,n:nr}=er,ir=rr.BYTES+1,sr=2*rr.BYTES+1;function or(hr){return _0n$2<hr&&hr<rr.ORDER}function ar(hr){return mod(hr,nr)}function cr(hr){return invert(hr,nr)}const{ProjectivePoint:lr,normPrivateKeyToScalar:ur,weierstrassEquation:dr,isWithinCurveOrder:yr}=weierstrassPoints({...er,toBytes(hr,br,_r){const $r=br.toAffine(),Er=rr.toBytes($r.x),vr=concatBytes$3;return _r?vr(Uint8Array.from([br.hasEvenY()?2:3]),Er):vr(Uint8Array.from([4]),Er,rr.toBytes($r.y))},fromBytes(hr){const br=hr.length,_r=hr[0],$r=hr.subarray(1);if(br===ir&&(_r===2||_r===3)){const Er=bytesToNumberBE($r);if(!or(Er))throw new Error("Point is not on curve");const vr=dr(Er);let Ir;try{Ir=rr.sqrt(vr)}catch(Jr){const Wr=Jr instanceof Error?": "+Jr.message:"";throw new Error("Point is not on curve"+Wr)}const Rr=(Ir&_1n$2)===_1n$2;return(_r&1)===1!==Rr&&(Ir=rr.neg(Ir)),{x:Er,y:Ir}}else if(br===sr&&_r===4){const Er=rr.fromBytes($r.subarray(0,rr.BYTES)),vr=rr.fromBytes($r.subarray(rr.BYTES,2*rr.BYTES));return{x:Er,y:vr}}else throw new Error(`Point of length ${br} was invalid. Expected ${ir} compressed bytes or ${sr} uncompressed bytes`)}}),mr=hr=>bytesToHex$4(numberToBytesBE(hr,er.nByteLength));function wr(hr){const br=nr>>_1n$2;return hr>br}function xr(hr){return wr(hr)?ar(-hr):hr}const Or=(hr,br,_r)=>bytesToNumberBE(hr.slice(br,_r));class Tr{constructor(br,_r,$r){this.r=br,this.s=_r,this.recovery=$r,this.assertValidity()}static fromCompact(br){const _r=er.nByteLength;return br=ensureBytes("compactSignature",br,_r*2),new Tr(Or(br,0,_r),Or(br,_r,2*_r))}static fromDER(br){const{r:_r,s:$r}=DER.toSig(ensureBytes("DER",br));return new Tr(_r,$r)}assertValidity(){if(!yr(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!yr(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(br){return new Tr(this.r,this.s,br)}recoverPublicKey(br){const{r:_r,s:$r,recovery:Er}=this,vr=zr(ensureBytes("msgHash",br));if(Er==null||![0,1,2,3].includes(Er))throw new Error("recovery id invalid");const Ir=Er===2||Er===3?_r+er.n:_r;if(Ir>=rr.ORDER)throw new Error("recovery id 2 or 3 invalid");const Rr=Er&1?"03":"02",Br=lr.fromHex(Rr+mr(Ir)),Jr=cr(Ir),Wr=ar(-vr*Jr),qr=ar($r*Jr),an=lr.BASE.multiplyAndAddUnsafe(Br,Wr,qr);if(!an)throw new Error("point at infinify");return an.assertValidity(),an}hasHighS(){return wr(this.s)}normalizeS(){return this.hasHighS()?new Tr(this.r,ar(-this.s),this.recovery):this}toDERRawBytes(){return hexToBytes$5(this.toDERHex())}toDERHex(){return DER.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return hexToBytes$5(this.toCompactHex())}toCompactHex(){return mr(this.r)+mr(this.s)}}const Ar={isValidPrivateKey(hr){try{return ur(hr),!0}catch{return!1}},normPrivateKeyToScalar:ur,randomPrivateKey:()=>{const hr=getMinHashLength(er.n);return mapHashToField(er.randomBytes(hr),er.n)},precompute(hr=8,br=lr.BASE){return br._setWindowSize(hr),br.multiply(BigInt(3)),br}};function Nr(hr,br=!0){return lr.fromPrivateKey(hr).toRawBytes(br)}function Ur(hr){const br=isBytes$1(hr),_r=typeof hr=="string",$r=(br||_r)&&hr.length;return br?$r===ir||$r===sr:_r?$r===2*ir||$r===2*sr:hr instanceof lr}function Dr(hr,br,_r=!0){if(Ur(hr))throw new Error("first arg must be private key");if(!Ur(br))throw new Error("second arg must be public key");return lr.fromHex(br).multiply(ur(hr)).toRawBytes(_r)}const Hr=er.bits2int||function(hr){const br=bytesToNumberBE(hr),_r=hr.length*8-er.nBitLength;return _r>0?br>>BigInt(_r):br},zr=er.bits2int_modN||function(hr){return ar(Hr(hr))},Cr=bitMask(er.nBitLength);function Mr(hr){if(typeof hr!="bigint")throw new Error("bigint expected");if(!(_0n$2<=hr&&hr<Cr))throw new Error(`bigint expected < 2^${er.nBitLength}`);return numberToBytesBE(hr,er.nByteLength)}function Pr(hr,br,_r=Sr){if(["recovered","canonical"].some(cn=>cn in _r))throw new Error("sign() legacy options not supported");const{hash:$r,randomBytes:Er}=er;let{lowS:vr,prehash:Ir,extraEntropy:Rr}=_r;vr==null&&(vr=!0),hr=ensureBytes("msgHash",hr),Ir&&(hr=ensureBytes("prehashed msgHash",$r(hr)));const Br=zr(hr),Jr=ur(br),Wr=[Mr(Jr),Mr(Br)];if(Rr!=null&&Rr!==!1){const cn=Rr===!0?Er(rr.BYTES):Rr;Wr.push(ensureBytes("extraEntropy",cn))}const qr=concatBytes$3(...Wr),an=Br;function tn(cn){const dn=Hr(cn);if(!yr(dn))return;const Zr=cr(dn),Yr=lr.BASE.multiply(dn).toAffine(),Qr=ar(Yr.x);if(Qr===_0n$2)return;const un=ar(Zr*ar(an+Qr*Jr));if(un===_0n$2)return;let gn=(Yr.x===Qr?0:2)|Number(Yr.y&_1n$2),Rn=un;return vr&&wr(un)&&(Rn=xr(un),gn^=1),new Tr(Qr,Rn,gn)}return{seed:qr,k2sig:tn}}const Sr={lowS:er.lowS,prehash:!1},pr={lowS:er.lowS,prehash:!1};function gr(hr,br,_r=Sr){const{seed:$r,k2sig:Er}=Pr(hr,br,_r),vr=er;return createHmacDrbg(vr.hash.outputLen,vr.nByteLength,vr.hmac)($r,Er)}lr.BASE._setWindowSize(8);function fr(hr,br,_r,$r=pr){var Yr;const Er=hr;if(br=ensureBytes("msgHash",br),_r=ensureBytes("publicKey",_r),"strict"in $r)throw new Error("options.strict was renamed to lowS");const{lowS:vr,prehash:Ir}=$r;let Rr,Br;try{if(typeof Er=="string"||isBytes$1(Er))try{Rr=Tr.fromDER(Er)}catch(Qr){if(!(Qr instanceof DER.Err))throw Qr;Rr=Tr.fromCompact(Er)}else if(typeof Er=="object"&&typeof Er.r=="bigint"&&typeof Er.s=="bigint"){const{r:Qr,s:un}=Er;Rr=new Tr(Qr,un)}else throw new Error("PARSE");Br=lr.fromHex(_r)}catch(Qr){if(Qr.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(vr&&Rr.hasHighS())return!1;Ir&&(br=er.hash(br));const{r:Jr,s:Wr}=Rr,qr=zr(br),an=cr(Wr),tn=ar(qr*an),cn=ar(Jr*an),dn=(Yr=lr.BASE.multiplyAndAddUnsafe(Br,tn,cn))==null?void 0:Yr.toAffine();return dn?ar(dn.x)===Jr:!1}return{CURVE:er,getPublicKey:Nr,getSharedSecret:Dr,sign:gr,verify:fr,ProjectivePoint:lr,Signature:Tr,utils:Ar}}function SWUFpSqrtRatio(tr,er){const rr=tr.ORDER;let nr=_0n$2;for(let wr=rr-_1n$2;wr%_2n$2===_0n$2;wr/=_2n$2)nr+=_1n$2;const ir=nr,sr=_2n$2<<ir-_1n$2-_1n$2,or=sr*_2n$2,ar=(rr-_1n$2)/or,cr=(ar-_1n$2)/_2n$2,lr=or-_1n$2,ur=sr,dr=tr.pow(er,ar),yr=tr.pow(er,(ar+_1n$2)/_2n$2);let mr=(wr,xr)=>{let Or=dr,Tr=tr.pow(xr,lr),Ar=tr.sqr(Tr);Ar=tr.mul(Ar,xr);let Nr=tr.mul(wr,Ar);Nr=tr.pow(Nr,cr),Nr=tr.mul(Nr,Tr),Tr=tr.mul(Nr,xr),Ar=tr.mul(Nr,wr);let Ur=tr.mul(Ar,Tr);Nr=tr.pow(Ur,ur);let Dr=tr.eql(Nr,tr.ONE);Tr=tr.mul(Ar,yr),Nr=tr.mul(Ur,Or),Ar=tr.cmov(Tr,Ar,Dr),Ur=tr.cmov(Nr,Ur,Dr);for(let Hr=ir;Hr>_1n$2;Hr--){let zr=Hr-_2n$2;zr=_2n$2<<zr-_1n$2;let Cr=tr.pow(Ur,zr);const Mr=tr.eql(Cr,tr.ONE);Tr=tr.mul(Ar,Or),Or=tr.mul(Or,Or),Cr=tr.mul(Ur,Or),Ar=tr.cmov(Tr,Ar,Mr),Ur=tr.cmov(Cr,Ur,Mr)}return{isValid:Dr,value:Ar}};if(tr.ORDER%_4n===_3n){const wr=(tr.ORDER-_3n)/_4n,xr=tr.sqrt(tr.neg(er));mr=(Or,Tr)=>{let Ar=tr.sqr(Tr);const Nr=tr.mul(Or,Tr);Ar=tr.mul(Ar,Nr);let Ur=tr.pow(Ar,wr);Ur=tr.mul(Ur,Nr);const Dr=tr.mul(Ur,xr),Hr=tr.mul(tr.sqr(Ur),Tr),zr=tr.eql(Hr,Or);let Cr=tr.cmov(Dr,Ur,zr);return{isValid:zr,value:Cr}}}return mr}function mapToCurveSimpleSWU(tr,er){if(validateField(tr),!tr.isValid(er.A)||!tr.isValid(er.B)||!tr.isValid(er.Z))throw new Error("mapToCurveSimpleSWU: invalid opts");const rr=SWUFpSqrtRatio(tr,er.Z);if(!tr.isOdd)throw new Error("Fp.isOdd is not implemented!");return nr=>{let ir,sr,or,ar,cr,lr,ur,dr;ir=tr.sqr(nr),ir=tr.mul(ir,er.Z),sr=tr.sqr(ir),sr=tr.add(sr,ir),or=tr.add(sr,tr.ONE),or=tr.mul(or,er.B),ar=tr.cmov(er.Z,tr.neg(sr),!tr.eql(sr,tr.ZERO)),ar=tr.mul(ar,er.A),sr=tr.sqr(or),lr=tr.sqr(ar),cr=tr.mul(lr,er.A),sr=tr.add(sr,cr),sr=tr.mul(sr,or),lr=tr.mul(lr,ar),cr=tr.mul(lr,er.B),sr=tr.add(sr,cr),ur=tr.mul(ir,or);const{isValid:yr,value:mr}=rr(sr,lr);dr=tr.mul(ir,nr),dr=tr.mul(dr,mr),ur=tr.cmov(ur,or,yr),dr=tr.cmov(dr,mr,yr);const wr=tr.isOdd(nr)===tr.isOdd(dr);return dr=tr.cmov(tr.neg(dr),dr,wr),ur=tr.div(ur,ar),{x:ur,y:dr}}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function getHash(tr){return{hash:tr,hmac:(er,...rr)=>hmac(tr,er,concatBytes$4(...rr)),randomBytes:randomBytes$1}}function createCurve(tr,er){const rr=nr=>weierstrass({...tr,...getHash(nr)});return Object.freeze({...rr(er),create:rr})}const os2ip=bytesToNumberBE;function i2osp(tr,er){if(tr<0||tr>=1<<8*er)throw new Error(`bad I2OSP call: value=${tr} length=${er}`);const rr=Array.from({length:er}).fill(0);for(let nr=er-1;nr>=0;nr--)rr[nr]=tr&255,tr>>>=8;return new Uint8Array(rr)}function strxor(tr,er){const rr=new Uint8Array(tr.length);for(let nr=0;nr<tr.length;nr++)rr[nr]=tr[nr]^er[nr];return rr}function anum(tr){if(!Number.isSafeInteger(tr))throw new Error("number expected")}function expand_message_xmd(tr,er,rr,nr){abytes(tr),abytes(er),anum(rr),er.length>255&&(er=nr(concatBytes$3(utf8ToBytes$2("H2C-OVERSIZE-DST-"),er)));const{outputLen:ir,blockLen:sr}=nr,or=Math.ceil(rr/ir);if(or>255)throw new Error("Invalid xmd length");const ar=concatBytes$3(er,i2osp(er.length,1)),cr=i2osp(0,sr),lr=i2osp(rr,2),ur=new Array(or),dr=nr(concatBytes$3(cr,tr,lr,i2osp(0,1),ar));ur[0]=nr(concatBytes$3(dr,i2osp(1,1),ar));for(let mr=1;mr<=or;mr++){const wr=[strxor(dr,ur[mr-1]),i2osp(mr+1,1),ar];ur[mr]=nr(concatBytes$3(...wr))}return concatBytes$3(...ur).slice(0,rr)}function expand_message_xof(tr,er,rr,nr,ir){if(abytes(tr),abytes(er),anum(rr),er.length>255){const sr=Math.ceil(2*nr/8);er=ir.create({dkLen:sr}).update(utf8ToBytes$2("H2C-OVERSIZE-DST-")).update(er).digest()}if(rr>65535||er.length>255)throw new Error("expand_message_xof: invalid lenInBytes");return ir.create({dkLen:rr}).update(tr).update(i2osp(rr,2)).update(er).update(i2osp(er.length,1)).digest()}function hash_to_field(tr,er,rr){validateObject(rr,{DST:"stringOrUint8Array",p:"bigint",m:"isSafeInteger",k:"isSafeInteger",hash:"hash"});const{p:nr,k:ir,m:sr,hash:or,expand:ar,DST:cr}=rr;abytes(tr),anum(er);const lr=typeof cr=="string"?utf8ToBytes$2(cr):cr,ur=nr.toString(2).length,dr=Math.ceil((ur+ir)/8),yr=er*sr*dr;let mr;if(ar==="xmd")mr=expand_message_xmd(tr,lr,yr,or);else if(ar==="xof")mr=expand_message_xof(tr,lr,yr,ir,or);else if(ar==="_internal_pass")mr=tr;else throw new Error('expand must be "xmd" or "xof"');const wr=new Array(er);for(let xr=0;xr<er;xr++){const Or=new Array(sr);for(let Tr=0;Tr<sr;Tr++){const Ar=dr*(Tr+xr*sr),Nr=mr.subarray(Ar,Ar+dr);Or[Tr]=mod(os2ip(Nr),nr)}wr[xr]=Or}return wr}function isogenyMap(tr,er){const rr=er.map(nr=>Array.from(nr).reverse());return(nr,ir)=>{const[sr,or,ar,cr]=rr.map(lr=>lr.reduce((ur,dr)=>tr.add(tr.mul(ur,nr),dr)));return nr=tr.div(sr,or),ir=tr.mul(ir,tr.div(ar,cr)),{x:nr,y:ir}}}function createHasher(tr,er,rr){if(typeof er!="function")throw new Error("mapToCurve() must be defined");return{hashToCurve(nr,ir){const sr=hash_to_field(nr,2,{...rr,DST:rr.DST,...ir}),or=tr.fromAffine(er(sr[0])),ar=tr.fromAffine(er(sr[1])),cr=or.add(ar).clearCofactor();return cr.assertValidity(),cr},encodeToCurve(nr,ir){const sr=hash_to_field(nr,1,{...rr,DST:rr.encodeDST,...ir}),or=tr.fromAffine(er(sr[0])).clearCofactor();return or.assertValidity(),or},mapToCurve(nr){if(!Array.isArray(nr))throw new Error("mapToCurve: expected array of bigints");for(const sr of nr)if(typeof sr!="bigint")throw new Error(`mapToCurve: expected array of bigints, got ${sr} in array`);const ir=tr.fromAffine(er(nr)).clearCofactor();return ir.assertValidity(),ir}}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const secp256k1P=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),secp256k1N=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),_1n$1=BigInt(1),_2n$1=BigInt(2),divNearest=(tr,er)=>(tr+er/_2n$1)/er;function sqrtMod(tr){const er=secp256k1P,rr=BigInt(3),nr=BigInt(6),ir=BigInt(11),sr=BigInt(22),or=BigInt(23),ar=BigInt(44),cr=BigInt(88),lr=tr*tr*tr%er,ur=lr*lr*tr%er,dr=pow2(ur,rr,er)*ur%er,yr=pow2(dr,rr,er)*ur%er,mr=pow2(yr,_2n$1,er)*lr%er,wr=pow2(mr,ir,er)*mr%er,xr=pow2(wr,sr,er)*wr%er,Or=pow2(xr,ar,er)*xr%er,Tr=pow2(Or,cr,er)*Or%er,Ar=pow2(Tr,ar,er)*xr%er,Nr=pow2(Ar,rr,er)*ur%er,Ur=pow2(Nr,or,er)*wr%er,Dr=pow2(Ur,nr,er)*lr%er,Hr=pow2(Dr,_2n$1,er);if(!Fp.eql(Fp.sqr(Hr),tr))throw new Error("Cannot find square root");return Hr}const Fp=Field(secp256k1P,void 0,void 0,{sqrt:sqrtMod}),secp256k1$1=createCurve({a:BigInt(0),b:BigInt(7),Fp,n:secp256k1N,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:tr=>{const er=secp256k1N,rr=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),nr=-_1n$1*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),ir=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),sr=rr,or=BigInt("0x100000000000000000000000000000000"),ar=divNearest(sr*tr,er),cr=divNearest(-nr*tr,er);let lr=mod(tr-ar*rr-cr*ir,er),ur=mod(-ar*nr-cr*sr,er);const dr=lr>or,yr=ur>or;if(dr&&(lr=er-lr),yr&&(ur=er-ur),lr>or||ur>or)throw new Error("splitScalar: Endomorphism failed, k="+tr);return{k1neg:dr,k1:lr,k2neg:yr,k2:ur}}}},sha256$1),_0n$1=BigInt(0),fe=tr=>typeof tr=="bigint"&&_0n$1<tr&&tr<secp256k1P,ge=tr=>typeof tr=="bigint"&&_0n$1<tr&&tr<secp256k1N,TAGGED_HASH_PREFIXES={};function taggedHash(tr,...er){let rr=TAGGED_HASH_PREFIXES[tr];if(rr===void 0){const nr=sha256$1(Uint8Array.from(tr,ir=>ir.charCodeAt(0)));rr=concatBytes$3(nr,nr),TAGGED_HASH_PREFIXES[tr]=rr}return sha256$1(concatBytes$3(rr,...er))}const pointToBytes=tr=>tr.toRawBytes(!0).slice(1),numTo32b=tr=>numberToBytesBE(tr,32),modP=tr=>mod(tr,secp256k1P),modN=tr=>mod(tr,secp256k1N),Point=secp256k1$1.ProjectivePoint,GmulAdd=(tr,er,rr)=>Point.BASE.multiplyAndAddUnsafe(tr,er,rr);function schnorrGetExtPubKey(tr){let er=secp256k1$1.utils.normPrivateKeyToScalar(tr),rr=Point.fromPrivateKey(er);return{scalar:rr.hasEvenY()?er:modN(-er),bytes:pointToBytes(rr)}}function lift_x(tr){if(!fe(tr))throw new Error("bad x: need 0 < x < p");const er=modP(tr*tr),rr=modP(er*tr+BigInt(7));let nr=sqrtMod(rr);nr%_2n$1!==_0n$1&&(nr=modP(-nr));const ir=new Point(tr,nr,_1n$1);return ir.assertValidity(),ir}function challenge(...tr){return modN(bytesToNumberBE(taggedHash("BIP0340/challenge",...tr)))}function schnorrGetPublicKey(tr){return schnorrGetExtPubKey(tr).bytes}function schnorrSign(tr,er,rr=randomBytes$1(32)){const nr=ensureBytes("message",tr),{bytes:ir,scalar:sr}=schnorrGetExtPubKey(er),or=ensureBytes("auxRand",rr,32),ar=numTo32b(sr^bytesToNumberBE(taggedHash("BIP0340/aux",or))),cr=taggedHash("BIP0340/nonce",ar,ir,nr),lr=modN(bytesToNumberBE(cr));if(lr===_0n$1)throw new Error("sign failed: k is zero");const{bytes:ur,scalar:dr}=schnorrGetExtPubKey(lr),yr=challenge(ur,ir,nr),mr=new Uint8Array(64);if(mr.set(ur,0),mr.set(numTo32b(modN(dr+yr*sr)),32),!schnorrVerify(mr,nr,ir))throw new Error("sign: Invalid signature produced");return mr}function schnorrVerify(tr,er,rr){const nr=ensureBytes("signature",tr,64),ir=ensureBytes("message",er),sr=ensureBytes("publicKey",rr,32);try{const or=lift_x(bytesToNumberBE(sr)),ar=bytesToNumberBE(nr.subarray(0,32));if(!fe(ar))return!1;const cr=bytesToNumberBE(nr.subarray(32,64));if(!ge(cr))return!1;const lr=challenge(numTo32b(ar),pointToBytes(or),ir),ur=GmulAdd(or,cr,modN(-lr));return!(!ur||!ur.hasEvenY()||ur.toAffine().x!==ar)}catch{return!1}}const schnorr={getPublicKey:schnorrGetPublicKey,sign:schnorrSign,verify:schnorrVerify,utils:{randomPrivateKey:secp256k1$1.utils.randomPrivateKey,lift_x,pointToBytes,numberToBytesBE,bytesToNumberBE,taggedHash,mod}},isoMap=isogenyMap(Fp,[["0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa8c7","0x7d3d4c80bc321d5b9f315cea7fd44c5d595d2fc0bf63b92dfff1044f17c6581","0x534c328d23f234e6e2a413deca25caece4506144037c40314ecbd0b53d9dd262","0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa88c"],["0xd35771193d94918a9ca34ccbb7b640dd86cd409542f8487d9fe6b745781eb49b","0xedadc6f64383dc1df7c4b2d51b54225406d36b641f5e41bbc52a56612a8c6d14","0x0000000000000000000000000000000000000000000000000000000000000001"],["0x4bda12f684bda12f684bda12f684bda12f684bda12f684bda12f684b8e38e23c","0xc75e0c32d5cb7c0fa9d0a54b12a0a6d5647ab046d686da6fdffc90fc201d71a3","0x29a6194691f91a73715209ef6512e576722830a201be2018a765e85a9ecee931","0x2f684bda12f684bda12f684bda12f684bda12f684bda12f684bda12f38e38d84"],["0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffff93b","0x7a06534bb8bdb49fd5e9e6632722c2989467c1bfc8e8d978dfb425d2685c2573","0x6484aa716545ca2cf3a70c3fa8fe337e0a3d21162f0d6299a7bf8192bfd2a76f","0x0000000000000000000000000000000000000000000000000000000000000001"]].map(tr=>tr.map(er=>BigInt(er)))),mapSWU=mapToCurveSimpleSWU(Fp,{A:BigInt("0x3f8731abdd661adca08a5558f0f5d272e953d363cb6f0e5d405447c01a444533"),B:BigInt("1771"),Z:Fp.create(BigInt("-11"))}),htf=createHasher(secp256k1$1.ProjectivePoint,tr=>{const{x:er,y:rr}=mapSWU(Fp.create(tr[0]));return isoMap(er,rr)},{DST:"secp256k1_XMD:SHA-256_SSWU_RO_",encodeDST:"secp256k1_XMD:SHA-256_SSWU_NU_",p:Fp.ORDER,m:1,k:128,expand:"xmd",hash:sha256$1}),hashToCurve=htf.hashToCurve,encodeToCurve=htf.encodeToCurve,secp256k1$2=Object.freeze(Object.defineProperty({__proto__:null,encodeToCurve,hashToCurve,schnorr,secp256k1:secp256k1$1},Symbol.toStringTag,{value:"Module"}));assert$9.bool;assert$9.bytes;function equalsBytes(tr,er){if(tr.length!==er.length)return!1;for(let rr=0;rr<tr.length;rr++)if(tr[rr]!==er[rr])return!1;return!0}function wrapHash(tr){return er=>(assert$9.bytes(er),tr(er))}(()=>{const tr=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0,er=typeof module<"u"&&typeof module.require=="function"&&module.require.bind(module);return{node:er&&!tr?er("crypto"):void 0,web:tr}})();function isHexPrefixed$4(tr){if(typeof tr!="string")throw new Error(`[isHexPrefixed] input must be type 'string', received type ${typeof tr}`);return tr[0]==="0"&&tr[1]==="x"}const stripHexPrefix$5=tr=>{if(typeof tr!="string")throw new Error(`[stripHexPrefix] input must be type 'string', received ${typeof tr}`);return isHexPrefixed$4(tr)?tr.slice(2):tr};function padToEven$6(tr){let er=tr;if(typeof er!="string")throw new Error(`[padToEven] value must be type 'string', received ${typeof er}`);return er.length%2&&(er=`0${er}`),er}function isHexString$5(tr,er){return!(typeof tr!="string"||!tr.match(/^0x[0-9A-Fa-f]*$/))}const assertIsBytes=function(tr){if(!(tr instanceof Uint8Array)){const er=`This method only supports Uint8Array but input was: ${tr}`;throw new Error(er)}},assertIsString$1=function(tr){if(typeof tr!="string"){const er=`This method only supports strings but input was: ${tr}`;throw new Error(er)}},BIGINT_0$2=BigInt(0),hexToBytesMapFirstKey$2={},hexToBytesMapSecondKey$2={};for(let tr=0;tr<16;tr++){const er=tr,rr=tr*16,nr=tr.toString(16).toLowerCase();hexToBytesMapSecondKey$2[nr]=er,hexToBytesMapSecondKey$2[nr.toUpperCase()]=er,hexToBytesMapFirstKey$2[nr]=rr,hexToBytesMapFirstKey$2[nr.toUpperCase()]=rr}function _unprefixedHexToBytes$2(tr){const er=tr.length,rr=new Uint8Array(er/2);for(let nr=0;nr<er;nr+=2)rr[nr/2]=hexToBytesMapFirstKey$2[tr[nr]]+hexToBytesMapSecondKey$2[tr[nr+1]];return rr}const unprefixedHexToBytes$1=tr=>{if(tr.slice(0,2)==="0x")throw new Error("hex string is prefixed with 0x, should be unprefixed");return _unprefixedHexToBytes$2(padToEven$6(tr))},hexByByte$1=Array.from({length:256},(tr,er)=>er.toString(16).padStart(2,"0")),bytesToHex$3=tr=>{let er="0x";if(tr===void 0||tr.length===0)return er;for(const rr of tr)er+=hexByByte$1[rr];return er},BIGINT_CACHE$1=[];for(let tr=0;tr<=256*256-1;tr++)BIGINT_CACHE$1[tr]=BigInt(tr);const bytesToBigInt$1=(tr,er=!1)=>{er&&tr.reverse();const rr=bytesToHex$3(tr);return rr==="0x"?BIGINT_0$2:rr.length===4?BIGINT_CACHE$1[tr[0]]:rr.length===6?BIGINT_CACHE$1[tr[0]*256+tr[1]]:BigInt(rr)},hexToBytes$4=tr=>{if(typeof tr!="string")throw new Error(`hex argument type ${typeof tr} must be of type string`);if(!/^0x[0-9a-fA-F]*$/.test(tr))throw new Error(`Input must be a 0x-prefixed hexadecimal string, got ${tr}`);return tr=tr.slice(2),tr.length%2!==0&&(tr=padToEven$6(tr)),_unprefixedHexToBytes$2(tr)},intToHex$2=tr=>{if(!Number.isSafeInteger(tr)||tr<0)throw new Error(`Received an invalid integer type: ${tr}`);return`0x${tr.toString(16)}`},intToBytes$2=tr=>{const er=intToHex$2(tr);return hexToBytes$4(er)},bigIntToBytes$1=(tr,er=!1)=>{const rr=toBytes$3("0x"+padToEven$6(tr.toString(16)));return er?rr.reverse():rr},zeros$1=tr=>new Uint8Array(tr),setLength$1=(tr,er,rr)=>tr.length<er?new Uint8Array([...zeros$1(er-tr.length),...tr]):tr.subarray(-er),setLengthLeft=(tr,er)=>(assertIsBytes(tr),setLength$1(tr,er)),stripZeros=tr=>{let er=tr[0];for(;tr.length>0&&er.toString()==="0";)tr=tr.slice(1),er=tr[0];return tr},unpadBytes=tr=>(assertIsBytes(tr),stripZeros(tr)),toBytes$3=tr=>{if(tr==null)return new Uint8Array;if(Array.isArray(tr)||tr instanceof Uint8Array)return Uint8Array.from(tr);if(typeof tr=="string"){if(!isHexString$5(tr))throw new Error(`Cannot convert string to Uint8Array. toBytes only supports 0x-prefixed hex strings and this string was given: ${tr}`);return hexToBytes$4(tr)}if(typeof tr=="number")return intToBytes$2(tr);if(typeof tr=="bigint"){if(tr<BIGINT_0$2)throw new Error(`Cannot convert negative bigint to Uint8Array. Given: ${tr}`);let er=tr.toString(16);return er.length%2&&(er="0"+er),unprefixedHexToBytes$1(er)}if(tr.toBytes!==void 0)return tr.toBytes();throw new Error("invalid type")},addHexPrefix$2=tr=>typeof tr!="string"||isHexPrefixed$4(tr)?tr:"0x"+tr,validateNoLeadingZeroes=tr=>{for(const[er,rr]of Object.entries(tr))if(rr!==void 0&&rr.length>0&&rr[0]===0)throw new Error(`${er} cannot have leading zeroes, received: ${bytesToHex$3(rr)}`)},bigIntToHex$3=tr=>"0x"+tr.toString(16),bigIntToUnpaddedBytes=tr=>unpadBytes(bigIntToBytes$1(tr)),concatBytes$2=(...tr)=>{if(tr.length===1)return tr[0];const er=tr.reduce((nr,ir)=>nr+ir.length,0),rr=new Uint8Array(er);for(let nr=0,ir=0;nr<tr.length;nr++){const sr=tr[nr];rr.set(sr,ir),ir+=sr.length}return rr},MAX_UINT64=BigInt("0xffffffffffffffff"),MAX_INTEGER=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");BigInt("115792089237316195423570985008687907853269984665640564039457584007913129639935");secp256k1$1.CURVE.n;const SECP256K1_ORDER_DIV_2=secp256k1$1.CURVE.n/BigInt(2);BigInt("0x10000000000000000000000000000000000000000000000000000000000000000");const KECCAK256_NULL_S$2="0xc5d2460186f7233c927e7db2dcc703c0e500b653ca82273b7bfad8045d85a470";hexToBytes$4(KECCAK256_NULL_S$2);const KECCAK256_RLP_ARRAY_S$2="0x1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347";hexToBytes$4(KECCAK256_RLP_ARRAY_S$2);const KECCAK256_RLP_S$2="0x56e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421";hexToBytes$4(KECCAK256_RLP_S$2);Uint8Array.from([128]);BigInt(-1);const BIGINT_0$1=BigInt(0),BIGINT_1=BigInt(1),BIGINT_2=BigInt(2);BigInt(3);BigInt(7);const BIGINT_8=BigInt(8),BIGINT_27=BigInt(27);BigInt(28);BigInt(31);BigInt(32);BigInt(64);BigInt(128);BigInt(255);BigInt(256);BigInt(96);BigInt(100);BigInt(160);BigInt(224);BigInt(7922816251426434e13);BigInt(1461501637330903e33);BigInt(2695994666715064e52);BigInt(1e9);function encode$3(tr){if(Array.isArray(tr)){const rr=[];let nr=0;for(let ir=0;ir<tr.length;ir++){const sr=encode$3(tr[ir]);rr.push(sr),nr+=sr.length}return concatBytes$1(encodeLength$1(nr,192),...rr)}const er=toBytes$2(tr);return er.length===1&&er[0]<128?er:concatBytes$1(encodeLength$1(er.length,128),er)}function safeSlice$1(tr,er,rr){if(rr>tr.length)throw new Error("invalid RLP (safeSlice): end slice of Uint8Array out-of-bounds");return tr.slice(er,rr)}function decodeLength$1(tr){if(tr[0]===0)throw new Error("invalid RLP: extra zeros");return parseHexByte$1(bytesToHex$2(tr))}function encodeLength$1(tr,er){if(tr<56)return Uint8Array.from([tr+er]);const rr=numberToHex$3(tr),nr=rr.length/2,ir=numberToHex$3(er+55+nr);return Uint8Array.from(hexToBytes$3(ir+rr))}function decode$3(tr,er=!1){if(typeof tr>"u"||tr===null||tr.length===0)return Uint8Array.from([]);const rr=toBytes$2(tr),nr=_decode$1(rr);if(er)return{data:nr.data,remainder:nr.remainder.slice()};if(nr.remainder.length!==0)throw new Error("invalid RLP: remainder must be zero");return nr.data}function _decode$1(tr){let er,rr,nr,ir,sr;const or=[],ar=tr[0];if(ar<=127)return{data:tr.slice(0,1),remainder:tr.subarray(1)};if(ar<=183){if(er=ar-127,ar===128?nr=Uint8Array.from([]):nr=safeSlice$1(tr,1,er),er===2&&nr[0]<128)throw new Error("invalid RLP encoding: invalid prefix, single byte < 0x80 are not prefixed");return{data:nr,remainder:tr.subarray(er)}}else if(ar<=191){if(rr=ar-182,tr.length-1<rr)throw new Error("invalid RLP: not enough bytes for string length");if(er=decodeLength$1(safeSlice$1(tr,1,rr)),er<=55)throw new Error("invalid RLP: expected string length to be greater than 55");return nr=safeSlice$1(tr,rr,er+rr),{data:nr,remainder:tr.subarray(er+rr)}}else if(ar<=247){for(er=ar-191,ir=safeSlice$1(tr,1,er);ir.length;)sr=_decode$1(ir),or.push(sr.data),ir=sr.remainder;return{data:or,remainder:tr.subarray(er)}}else{if(rr=ar-246,er=decodeLength$1(safeSlice$1(tr,1,rr)),er<56)throw new Error("invalid RLP: encoded list too short");const cr=rr+er;if(cr>tr.length)throw new Error("invalid RLP: total length is larger than the data");for(ir=safeSlice$1(tr,rr,cr);ir.length;)sr=_decode$1(ir),or.push(sr.data),ir=sr.remainder;return{data:or,remainder:tr.subarray(cr)}}}const cachedHexes$1=Array.from({length:256},(tr,er)=>er.toString(16).padStart(2,"0"));function bytesToHex$2(tr){let er="";for(let rr=0;rr<tr.length;rr++)er+=cachedHexes$1[tr[rr]];return er}function parseHexByte$1(tr){const er=Number.parseInt(tr,16);if(Number.isNaN(er))throw new Error("Invalid byte sequence");return er}function hexToBytes$3(tr){if(typeof tr!="string")throw new TypeError("hexToBytes: expected string, got "+typeof tr);if(tr.length%2)throw new Error("hexToBytes: received invalid unpadded hex");const er=new Uint8Array(tr.length/2);for(let rr=0;rr<er.length;rr++){const nr=rr*2;er[rr]=parseHexByte$1(tr.slice(nr,nr+2))}return er}function concatBytes$1(...tr){if(tr.length===1)return tr[0];const er=tr.reduce((nr,ir)=>nr+ir.length,0),rr=new Uint8Array(er);for(let nr=0,ir=0;nr<tr.length;nr++){const sr=tr[nr];rr.set(sr,ir),ir+=sr.length}return rr}function utf8ToBytes$1(tr){return new TextEncoder().encode(tr)}function numberToHex$3(tr){if(tr<0)throw new Error("Invalid integer as argument, must be unsigned!");const er=tr.toString(16);return er.length%2?`0${er}`:er}function padToEven$5(tr){return tr.length%2?`0${tr}`:tr}function isHexPrefixed$3(tr){return tr.length>=2&&tr[0]==="0"&&tr[1]==="x"}function stripHexPrefix$4(tr){return typeof tr!="string"?tr:isHexPrefixed$3(tr)?tr.slice(2):tr}function toBytes$2(tr){if(tr instanceof Uint8Array)return tr;if(typeof tr=="string")return isHexPrefixed$3(tr)?hexToBytes$3(padToEven$5(stripHexPrefix$4(tr))):utf8ToBytes$1(tr);if(typeof tr=="number"||typeof tr=="bigint")return tr?hexToBytes$3(numberToHex$3(tr)):Uint8Array.from([]);if(tr==null)return Uint8Array.from([]);throw new Error("toBytes: received unsupported type "+typeof tr)}const RLP={encode:encode$3,decode:decode$3};var sha3={},_assert={};Object.defineProperty(_assert,"__esModule",{value:!0});_assert.output=_assert.exists=_assert.hash=_assert.bytes=_assert.bool=_assert.number=_assert.isBytes=void 0;function number$3(tr){if(!Number.isSafeInteger(tr)||tr<0)throw new Error(`positive integer expected, not ${tr}`)}_assert.number=number$3;function bool$1(tr){if(typeof tr!="boolean")throw new Error(`boolean expected, not ${tr}`)}_assert.bool=bool$1;function isBytes(tr){return tr instanceof Uint8Array||tr!=null&&typeof tr=="object"&&tr.constructor.name==="Uint8Array"}_assert.isBytes=isBytes;function bytes$4(tr,...er){if(!isBytes(tr))throw new Error("Uint8Array expected");if(er.length>0&&!er.includes(tr.length))throw new Error(`Uint8Array expected of length ${er}, not of length=${tr.length}`)}_assert.bytes=bytes$4;function hash$1(tr){if(typeof tr!="function"||typeof tr.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");number$3(tr.outputLen),number$3(tr.blockLen)}_assert.hash=hash$1;function exists(tr,er=!0){if(tr.destroyed)throw new Error("Hash instance has been destroyed");if(er&&tr.finished)throw new Error("Hash#digest() has already been called")}_assert.exists=exists;function output(tr,er){bytes$4(tr);const rr=er.outputLen;if(tr.length<rr)throw new Error(`digestInto() expects output buffer of length at least ${rr}`)}_assert.output=output;const assert$8={number:number$3,bool:bool$1,bytes:bytes$4,hash:hash$1,exists,output};_assert.default=assert$8;var _u64={};Object.defineProperty(_u64,"__esModule",{value:!0});_u64.add5L=_u64.add5H=_u64.add4H=_u64.add4L=_u64.add3H=_u64.add3L=_u64.add=_u64.rotlBL=_u64.rotlBH=_u64.rotlSL=_u64.rotlSH=_u64.rotr32L=_u64.rotr32H=_u64.rotrBL=_u64.rotrBH=_u64.rotrSL=_u64.rotrSH=_u64.shrSL=_u64.shrSH=_u64.toBig=_u64.split=_u64.fromBig=void 0;const U32_MASK64=BigInt(2**32-1),_32n=BigInt(32);function fromBig(tr,er=!1){return er?{h:Number(tr&U32_MASK64),l:Number(tr>>_32n&U32_MASK64)}:{h:Number(tr>>_32n&U32_MASK64)|0,l:Number(tr&U32_MASK64)|0}}_u64.fromBig=fromBig;function split(tr,er=!1){let rr=new Uint32Array(tr.length),nr=new Uint32Array(tr.length);for(let ir=0;ir<tr.length;ir++){const{h:sr,l:or}=fromBig(tr[ir],er);[rr[ir],nr[ir]]=[sr,or]}return[rr,nr]}_u64.split=split;const toBig=(tr,er)=>BigInt(tr>>>0)<<_32n|BigInt(er>>>0);_u64.toBig=toBig;const shrSH=(tr,er,rr)=>tr>>>rr;_u64.shrSH=shrSH;const shrSL=(tr,er,rr)=>tr<<32-rr|er>>>rr;_u64.shrSL=shrSL;const rotrSH=(tr,er,rr)=>tr>>>rr|er<<32-rr;_u64.rotrSH=rotrSH;const rotrSL=(tr,er,rr)=>tr<<32-rr|er>>>rr;_u64.rotrSL=rotrSL;const rotrBH=(tr,er,rr)=>tr<<64-rr|er>>>rr-32;_u64.rotrBH=rotrBH;const rotrBL=(tr,er,rr)=>tr>>>rr-32|er<<64-rr;_u64.rotrBL=rotrBL;const rotr32H=(tr,er)=>er;_u64.rotr32H=rotr32H;const rotr32L=(tr,er)=>tr;_u64.rotr32L=rotr32L;const rotlSH=(tr,er,rr)=>tr<<rr|er>>>32-rr;_u64.rotlSH=rotlSH;const rotlSL=(tr,er,rr)=>er<<rr|tr>>>32-rr;_u64.rotlSL=rotlSL;const rotlBH=(tr,er,rr)=>er<<rr-32|tr>>>64-rr;_u64.rotlBH=rotlBH;const rotlBL=(tr,er,rr)=>tr<<rr-32|er>>>64-rr;_u64.rotlBL=rotlBL;function add(tr,er,rr,nr){const ir=(er>>>0)+(nr>>>0);return{h:tr+rr+(ir/2**32|0)|0,l:ir|0}}_u64.add=add;const add3L=(tr,er,rr)=>(tr>>>0)+(er>>>0)+(rr>>>0);_u64.add3L=add3L;const add3H=(tr,er,rr,nr)=>er+rr+nr+(tr/2**32|0)|0;_u64.add3H=add3H;const add4L=(tr,er,rr,nr)=>(tr>>>0)+(er>>>0)+(rr>>>0)+(nr>>>0);_u64.add4L=add4L;const add4H=(tr,er,rr,nr,ir)=>er+rr+nr+ir+(tr/2**32|0)|0;_u64.add4H=add4H;const add5L=(tr,er,rr,nr,ir)=>(tr>>>0)+(er>>>0)+(rr>>>0)+(nr>>>0)+(ir>>>0);_u64.add5L=add5L;const add5H=(tr,er,rr,nr,ir,sr)=>er+rr+nr+ir+sr+(tr/2**32|0)|0;_u64.add5H=add5H;const u64={fromBig,split,toBig,shrSH,shrSL,rotrSH,rotrSL,rotrBH,rotrBL,rotr32H,rotr32L,rotlSH,rotlSL,rotlBH,rotlBL,add,add3L,add3H,add4L,add4H,add5H,add5L};_u64.default=u64;var utils$5={},crypto$1={};Object.defineProperty(crypto$1,"__esModule",{value:!0});crypto$1.crypto=void 0;crypto$1.crypto=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;(function(tr){/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */Object.defineProperty(tr,"__esModule",{value:!0}),tr.randomBytes=tr.wrapXOFConstructorWithOpts=tr.wrapConstructorWithOpts=tr.wrapConstructor=tr.checkOpts=tr.Hash=tr.concatBytes=tr.toBytes=tr.utf8ToBytes=tr.asyncLoop=tr.nextTick=tr.hexToBytes=tr.bytesToHex=tr.byteSwap32=tr.byteSwapIfBE=tr.byteSwap=tr.isLE=tr.rotl=tr.rotr=tr.createView=tr.u32=tr.u8=tr.isBytes=void 0;const er=crypto$1,rr=_assert;function nr(pr){return pr instanceof Uint8Array||pr!=null&&typeof pr=="object"&&pr.constructor.name==="Uint8Array"}tr.isBytes=nr;const ir=pr=>new Uint8Array(pr.buffer,pr.byteOffset,pr.byteLength);tr.u8=ir;const sr=pr=>new Uint32Array(pr.buffer,pr.byteOffset,Math.floor(pr.byteLength/4));tr.u32=sr;const or=pr=>new DataView(pr.buffer,pr.byteOffset,pr.byteLength);tr.createView=or;const ar=(pr,gr)=>pr<<32-gr|pr>>>gr;tr.rotr=ar;const cr=(pr,gr)=>pr<<gr|pr>>>32-gr>>>0;tr.rotl=cr,tr.isLE=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;const lr=pr=>pr<<24&4278190080|pr<<8&16711680|pr>>>8&65280|pr>>>24&255;tr.byteSwap=lr,tr.byteSwapIfBE=tr.isLE?pr=>pr:pr=>(0,tr.byteSwap)(pr);function ur(pr){for(let gr=0;gr<pr.length;gr++)pr[gr]=(0,tr.byteSwap)(pr[gr])}tr.byteSwap32=ur;const dr=Array.from({length:256},(pr,gr)=>gr.toString(16).padStart(2,"0"));function yr(pr){(0,rr.bytes)(pr);let gr="";for(let fr=0;fr<pr.length;fr++)gr+=dr[pr[fr]];return gr}tr.bytesToHex=yr;const mr={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function wr(pr){if(pr>=mr._0&&pr<=mr._9)return pr-mr._0;if(pr>=mr._A&&pr<=mr._F)return pr-(mr._A-10);if(pr>=mr._a&&pr<=mr._f)return pr-(mr._a-10)}function xr(pr){if(typeof pr!="string")throw new Error("hex string expected, got "+typeof pr);const gr=pr.length,fr=gr/2;if(gr%2)throw new Error("padded hex string expected, got unpadded hex of length "+gr);const hr=new Uint8Array(fr);for(let br=0,_r=0;br<fr;br++,_r+=2){const $r=wr(pr.charCodeAt(_r)),Er=wr(pr.charCodeAt(_r+1));if($r===void 0||Er===void 0){const vr=pr[_r]+pr[_r+1];throw new Error('hex string expected, got non-hex character "'+vr+'" at index '+_r)}hr[br]=$r*16+Er}return hr}tr.hexToBytes=xr;const Or=async()=>{};tr.nextTick=Or;async function Tr(pr,gr,fr){let hr=Date.now();for(let br=0;br<pr;br++){fr(br);const _r=Date.now()-hr;_r>=0&&_r<gr||(await(0,tr.nextTick)(),hr+=_r)}}tr.asyncLoop=Tr;function Ar(pr){if(typeof pr!="string")throw new Error(`utf8ToBytes expected string, got ${typeof pr}`);return new Uint8Array(new TextEncoder().encode(pr))}tr.utf8ToBytes=Ar;function Nr(pr){return typeof pr=="string"&&(pr=Ar(pr)),(0,rr.bytes)(pr),pr}tr.toBytes=Nr;function Ur(...pr){let gr=0;for(let hr=0;hr<pr.length;hr++){const br=pr[hr];(0,rr.bytes)(br),gr+=br.length}const fr=new Uint8Array(gr);for(let hr=0,br=0;hr<pr.length;hr++){const _r=pr[hr];fr.set(_r,br),br+=_r.length}return fr}tr.concatBytes=Ur;class Dr{clone(){return this._cloneInto()}}tr.Hash=Dr;const Hr={}.toString;function zr(pr,gr){if(gr!==void 0&&Hr.call(gr)!=="[object Object]")throw new Error("Options should be object or undefined");return Object.assign(pr,gr)}tr.checkOpts=zr;function Cr(pr){const gr=hr=>pr().update(Nr(hr)).digest(),fr=pr();return gr.outputLen=fr.outputLen,gr.blockLen=fr.blockLen,gr.create=()=>pr(),gr}tr.wrapConstructor=Cr;function Mr(pr){const gr=(hr,br)=>pr(br).update(Nr(hr)).digest(),fr=pr({});return gr.outputLen=fr.outputLen,gr.blockLen=fr.blockLen,gr.create=hr=>pr(hr),gr}tr.wrapConstructorWithOpts=Mr;function Pr(pr){const gr=(hr,br)=>pr(br).update(Nr(hr)).digest(),fr=pr({});return gr.outputLen=fr.outputLen,gr.blockLen=fr.blockLen,gr.create=hr=>pr(hr),gr}tr.wrapXOFConstructorWithOpts=Pr;function Sr(pr=32){if(er.crypto&&typeof er.crypto.getRandomValues=="function")return er.crypto.getRandomValues(new Uint8Array(pr));throw new Error("crypto.getRandomValues must be defined")}tr.randomBytes=Sr})(utils$5);Object.defineProperty(sha3,"__esModule",{value:!0});sha3.shake256=sha3.shake128=sha3.keccak_512=sha3.keccak_384=keccak_256=sha3.keccak_256=sha3.keccak_224=sha3.sha3_512=sha3.sha3_384=sha3.sha3_256=sha3.sha3_224=sha3.Keccak=sha3.keccakP=void 0;const _assert_js_1=_assert,_u64_js_1=_u64,utils_js_1$4=utils$5,SHA3_PI=[],SHA3_ROTL=[],_SHA3_IOTA=[],_0n=BigInt(0),_1n=BigInt(1),_2n=BigInt(2),_7n=BigInt(7),_256n=BigInt(256),_0x71n=BigInt(113);for(let tr=0,er=_1n,rr=1,nr=0;tr<24;tr++){[rr,nr]=[nr,(2*rr+3*nr)%5],SHA3_PI.push(2*(5*nr+rr)),SHA3_ROTL.push((tr+1)*(tr+2)/2%64);let ir=_0n;for(let sr=0;sr<7;sr++)er=(er<<_1n^(er>>_7n)*_0x71n)%_256n,er&_2n&&(ir^=_1n<<(_1n<<BigInt(sr))-_1n);_SHA3_IOTA.push(ir)}const[SHA3_IOTA_H,SHA3_IOTA_L]=(0,_u64_js_1.split)(_SHA3_IOTA,!0),rotlH=(tr,er,rr)=>rr>32?(0,_u64_js_1.rotlBH)(tr,er,rr):(0,_u64_js_1.rotlSH)(tr,er,rr),rotlL=(tr,er,rr)=>rr>32?(0,_u64_js_1.rotlBL)(tr,er,rr):(0,_u64_js_1.rotlSL)(tr,er,rr);function keccakP(tr,er=24){const rr=new Uint32Array(10);for(let nr=24-er;nr<24;nr++){for(let or=0;or<10;or++)rr[or]=tr[or]^tr[or+10]^tr[or+20]^tr[or+30]^tr[or+40];for(let or=0;or<10;or+=2){const ar=(or+8)%10,cr=(or+2)%10,lr=rr[cr],ur=rr[cr+1],dr=rotlH(lr,ur,1)^rr[ar],yr=rotlL(lr,ur,1)^rr[ar+1];for(let mr=0;mr<50;mr+=10)tr[or+mr]^=dr,tr[or+mr+1]^=yr}let ir=tr[2],sr=tr[3];for(let or=0;or<24;or++){const ar=SHA3_ROTL[or],cr=rotlH(ir,sr,ar),lr=rotlL(ir,sr,ar),ur=SHA3_PI[or];ir=tr[ur],sr=tr[ur+1],tr[ur]=cr,tr[ur+1]=lr}for(let or=0;or<50;or+=10){for(let ar=0;ar<10;ar++)rr[ar]=tr[or+ar];for(let ar=0;ar<10;ar++)tr[or+ar]^=~rr[(ar+2)%10]&rr[(ar+4)%10]}tr[0]^=SHA3_IOTA_H[nr],tr[1]^=SHA3_IOTA_L[nr]}rr.fill(0)}sha3.keccakP=keccakP;let Keccak$1=class S0 extends utils_js_1$4.Hash{constructor(er,rr,nr,ir=!1,sr=24){if(super(),this.blockLen=er,this.suffix=rr,this.outputLen=nr,this.enableXOF=ir,this.rounds=sr,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,(0,_assert_js_1.number)(nr),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=(0,utils_js_1$4.u32)(this.state)}keccak(){utils_js_1$4.isLE||(0,utils_js_1$4.byteSwap32)(this.state32),keccakP(this.state32,this.rounds),utils_js_1$4.isLE||(0,utils_js_1$4.byteSwap32)(this.state32),this.posOut=0,this.pos=0}update(er){(0,_assert_js_1.exists)(this);const{blockLen:rr,state:nr}=this;er=(0,utils_js_1$4.toBytes)(er);const ir=er.length;for(let sr=0;sr<ir;){const or=Math.min(rr-this.pos,ir-sr);for(let ar=0;ar<or;ar++)nr[this.pos++]^=er[sr++];this.pos===rr&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:er,suffix:rr,pos:nr,blockLen:ir}=this;er[nr]^=rr,rr&128&&nr===ir-1&&this.keccak(),er[ir-1]^=128,this.keccak()}writeInto(er){(0,_assert_js_1.exists)(this,!1),(0,_assert_js_1.bytes)(er),this.finish();const rr=this.state,{blockLen:nr}=this;for(let ir=0,sr=er.length;ir<sr;){this.posOut>=nr&&this.keccak();const or=Math.min(nr-this.posOut,sr-ir);er.set(rr.subarray(this.posOut,this.posOut+or),ir),this.posOut+=or,ir+=or}return er}xofInto(er){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(er)}xof(er){return(0,_assert_js_1.number)(er),this.xofInto(new Uint8Array(er))}digestInto(er){if((0,_assert_js_1.output)(er,this),this.finished)throw new Error("digest() was already called");return this.writeInto(er),this.destroy(),er}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(er){const{blockLen:rr,suffix:nr,outputLen:ir,rounds:sr,enableXOF:or}=this;return er||(er=new S0(rr,nr,ir,or,sr)),er.state32.set(this.state32),er.pos=this.pos,er.posOut=this.posOut,er.finished=this.finished,er.rounds=sr,er.suffix=nr,er.outputLen=ir,er.enableXOF=or,er.destroyed=this.destroyed,er}};sha3.Keccak=Keccak$1;const gen=(tr,er,rr)=>(0,utils_js_1$4.wrapConstructor)(()=>new Keccak$1(er,tr,rr));sha3.sha3_224=gen(6,144,224/8);sha3.sha3_256=gen(6,136,256/8);sha3.sha3_384=gen(6,104,384/8);sha3.sha3_512=gen(6,72,512/8);sha3.keccak_224=gen(1,144,224/8);var keccak_256=sha3.keccak_256=gen(1,136,256/8);sha3.keccak_384=gen(1,104,384/8);sha3.keccak_512=gen(1,72,512/8);const genShake=(tr,er,rr)=>(0,utils_js_1$4.wrapXOFConstructorWithOpts)((nr={})=>new Keccak$1(er,tr,nr.dkLen===void 0?rr:nr.dkLen,!0));sha3.shake128=genShake(31,168,128/8);sha3.shake256=genShake(31,136,256/8);const keccak256$2=(()=>{const tr=wrapHash(keccak_256);return tr.create=keccak_256.create,tr})(),isValidAddress=function(tr){try{assertIsString$1(tr)}catch{return!1}return/^0x[0-9a-fA-F]{40}$/.test(tr)},generateAddress=function(tr,er){return assertIsBytes(tr),assertIsBytes(er),bytesToBigInt$1(er)===BIGINT_0$1?keccak256$2(RLP.encode([tr,Uint8Array.from([])])).subarray(-20):keccak256$2(RLP.encode([tr,er])).subarray(-20)},generateAddress2=function(tr,er,rr){if(assertIsBytes(tr),assertIsBytes(er),assertIsBytes(rr),tr.length!==20)throw new Error("Expected from to be of length 20");if(er.length!==32)throw new Error("Expected salt to be of length 32");return keccak256$2(concatBytes$2(hexToBytes$4("0xff"),tr,er,keccak256$2(rr))).subarray(-20)},pubToAddress=function(tr,er=!1){if(assertIsBytes(tr),er&&tr.length!==64&&(tr=secp256k1$1.ProjectivePoint.fromHex(tr).toRawBytes(!1).slice(1)),tr.length!==64)throw new Error("Expected pubKey to be of length 64");return keccak256$2(tr).subarray(-20)},publicToAddress=pubToAddress,privateToPublic=function(tr){return assertIsBytes(tr),secp256k1$1.ProjectivePoint.fromPrivateKey(tr).toRawBytes(!1).slice(1)},privateToAddress=function(tr){return publicToAddress(privateToPublic(tr))};var KeyEncoding$2;(function(tr){tr.String="string",tr.Bytes="view",tr.Number="number"})(KeyEncoding$2||(KeyEncoding$2={}));var ValueEncoding$2;(function(tr){tr.String="string",tr.Bytes="view",tr.JSON="json"})(ValueEncoding$2||(ValueEncoding$2={}));var TypeOutput$2;(function(tr){tr[tr.Number=0]="Number",tr[tr.BigInt=1]="BigInt",tr[tr.Uint8Array=2]="Uint8Array",tr[tr.PrefixedHexString=3]="PrefixedHexString"})(TypeOutput$2||(TypeOutput$2={}));function toType(tr,er){if(tr===null)return null;if(tr===void 0)return;if(typeof tr=="string"&&!isHexString$5(tr))throw new Error(`A string must be provided with a 0x-prefix, given: ${tr}`);if(typeof tr=="number"&&!Number.isSafeInteger(tr))throw new Error("The provided number is greater than MAX_SAFE_INTEGER (please use an alternative input type)");const rr=toBytes$3(tr);switch(er){case TypeOutput$2.Uint8Array:return rr;case TypeOutput$2.BigInt:return bytesToBigInt$1(rr);case TypeOutput$2.Number:{const nr=bytesToBigInt$1(rr);if(nr>BigInt(Number.MAX_SAFE_INTEGER))throw new Error("The provided number is greater than MAX_SAFE_INTEGER (please use an alternative output type)");return Number(nr)}case TypeOutput$2.PrefixedHexString:return bytesToHex$3(rr);default:throw new Error("unknown outputType")}}function isHexPrefixed$2(tr){if(typeof tr!="string")throw new Error(`[isHexPrefixed] input must be type 'string', received type ${typeof tr}`);return tr[0]==="0"&&tr[1]==="x"}const stripHexPrefix$3=tr=>{if(typeof tr!="string")throw new Error(`[stripHexPrefix] input must be type 'string', received ${typeof tr}`);return isHexPrefixed$2(tr)?tr.slice(2):tr};function padToEven$4(tr){let er=tr;if(typeof er!="string")throw new Error(`[padToEven] value must be type 'string', received ${typeof er}`);return er.length%2&&(er=`0${er}`),er}function isHexString$4(tr,er){return!(typeof tr!="string"||!tr.match(/^0x[0-9A-Fa-f]*$/))}const BIGINT_0=BigInt(0),hexToBytesMapFirstKey$1={},hexToBytesMapSecondKey$1={};for(let tr=0;tr<16;tr++){const er=tr,rr=tr*16,nr=tr.toString(16).toLowerCase();hexToBytesMapSecondKey$1[nr]=er,hexToBytesMapSecondKey$1[nr.toUpperCase()]=er,hexToBytesMapFirstKey$1[nr]=rr,hexToBytesMapFirstKey$1[nr.toUpperCase()]=rr}function _unprefixedHexToBytes$1(tr){const er=tr.length,rr=new Uint8Array(er/2);for(let nr=0;nr<er;nr+=2)rr[nr/2]=hexToBytesMapFirstKey$1[tr[nr]]+hexToBytesMapSecondKey$1[tr[nr+1]];return rr}const unprefixedHexToBytes=tr=>{if(tr.slice(0,2)==="0x")throw new Error("hex string is prefixed with 0x, should be unprefixed");return _unprefixedHexToBytes$1(padToEven$4(tr))},hexByByte=Array.from({length:256},(tr,er)=>er.toString(16).padStart(2,"0")),bytesToHex$1=tr=>{let er="0x";if(tr===void 0||tr.length===0)return er;for(const rr of tr)er+=hexByByte[rr];return er},BIGINT_CACHE=[];for(let tr=0;tr<=256*256-1;tr++)BIGINT_CACHE[tr]=BigInt(tr);const bytesToBigInt=(tr,er=!1)=>{er&&tr.reverse();const rr=bytesToHex$1(tr);return rr==="0x"?BIGINT_0:rr.length===4?BIGINT_CACHE[tr[0]]:rr.length===6?BIGINT_CACHE[tr[0]*256+tr[1]]:BigInt(rr)},hexToBytes$2=tr=>{if(typeof tr!="string")throw new Error(`hex argument type ${typeof tr} must be of type string`);if(!/^0x[0-9a-fA-F]*$/.test(tr))throw new Error(`Input must be a 0x-prefixed hexadecimal string, got ${tr}`);return tr=tr.slice(2),tr.length%2!==0&&(tr=padToEven$4(tr)),_unprefixedHexToBytes$1(tr)},intToHex$1=tr=>{if(!Number.isSafeInteger(tr)||tr<0)throw new Error(`Received an invalid integer type: ${tr}`);return`0x${tr.toString(16)}`},intToBytes$1=tr=>{const er=intToHex$1(tr);return hexToBytes$2(er)},bigIntToBytes=(tr,er=!1)=>{const rr=toBytes$1("0x"+padToEven$4(tr.toString(16)));return er?rr.reverse():rr},toBytes$1=tr=>{if(tr==null)return new Uint8Array;if(Array.isArray(tr)||tr instanceof Uint8Array)return Uint8Array.from(tr);if(typeof tr=="string"){if(!isHexString$4(tr))throw new Error(`Cannot convert string to Uint8Array. toBytes only supports 0x-prefixed hex strings and this string was given: ${tr}`);return hexToBytes$2(tr)}if(typeof tr=="number")return intToBytes$1(tr);if(typeof tr=="bigint"){if(tr<BIGINT_0)throw new Error(`Cannot convert negative bigint to Uint8Array. Given: ${tr}`);let er=tr.toString(16);return er.length%2&&(er="0"+er),unprefixedHexToBytes(er)}if(tr.toBytes!==void 0)return tr.toBytes();throw new Error("invalid type")},fromSigned=tr=>BigInt.asIntN(256,bytesToBigInt(tr)),toUnsigned=tr=>bigIntToBytes(BigInt.asUintN(256,tr)),addHexPrefix$1=tr=>typeof tr!="string"||isHexPrefixed$2(tr)?tr:"0x"+tr,bigIntToHex$2=tr=>"0x"+tr.toString(16);BigInt("0xffffffffffffffff");BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");BigInt("115792089237316195423570985008687907853269984665640564039457584007913129639935");secp256k1$1.CURVE.n;secp256k1$1.CURVE.n/BigInt(2);BigInt("0x10000000000000000000000000000000000000000000000000000000000000000");const KECCAK256_NULL_S$1="0xc5d2460186f7233c927e7db2dcc703c0e500b653ca82273b7bfad8045d85a470";hexToBytes$2(KECCAK256_NULL_S$1);const KECCAK256_RLP_ARRAY_S$1="0x1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347";hexToBytes$2(KECCAK256_RLP_ARRAY_S$1);const KECCAK256_RLP_S$1="0x56e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421";hexToBytes$2(KECCAK256_RLP_S$1);Uint8Array.from([128]);BigInt(-1);BigInt(0);BigInt(1);BigInt(2);BigInt(3);BigInt(7);BigInt(8);BigInt(27);BigInt(28);BigInt(31);BigInt(32);BigInt(64);BigInt(128);BigInt(255);BigInt(256);BigInt(96);BigInt(100);BigInt(160);BigInt(224);BigInt(7922816251426434e13);BigInt(1461501637330903e33);BigInt(2695994666715064e52);BigInt(1e9);Array.from({length:256},(tr,er)=>er.toString(16).padStart(2,"0"));var KeyEncoding$1;(function(tr){tr.String="string",tr.Bytes="view",tr.Number="number"})(KeyEncoding$1||(KeyEncoding$1={}));var ValueEncoding$1;(function(tr){tr.String="string",tr.Bytes="view",tr.JSON="json"})(ValueEncoding$1||(ValueEncoding$1={}));var TypeOutput$1;(function(tr){tr[tr.Number=0]="Number",tr[tr.BigInt=1]="BigInt",tr[tr.Uint8Array=2]="Uint8Array",tr[tr.PrefixedHexString=3]="PrefixedHexString"})(TypeOutput$1||(TypeOutput$1={}));function ecsign$1(tr,er,rr){const nr=secp256k1$1.sign(tr,er),ir=nr.toCompactRawBytes(),sr=ir.slice(0,32),or=ir.slice(32,64),ar=BigInt(nr.recovery+27);return{r:sr,s:or,v:ar}}var isNumeric=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,mathceil=Math.ceil,mathfloor=Math.floor,bignumberError="[BigNumber Error] ",tooManyDigits=bignumberError+"Number primitive has more than 15 significant digits: ",BASE=1e14,LOG_BASE=14,MAX_SAFE_INTEGER$4=9007199254740991,POWS_TEN=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],SQRT_BASE=1e7,MAX=1e9;function clone(tr){var er,rr,nr,ir=Ar.prototype={constructor:Ar,toString:null,valueOf:null},sr=new Ar(1),or=20,ar=4,cr=-7,lr=21,ur=-1e7,dr=1e7,yr=!1,mr=1,wr=0,xr={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"",suffix:""},Or="0123456789abcdefghijklmnopqrstuvwxyz",Tr=!0;function Ar(Cr,Mr){var Pr,Sr,pr,gr,fr,hr,br,_r,$r=this;if(!($r instanceof Ar))return new Ar(Cr,Mr);if(Mr==null){if(Cr&&Cr._isBigNumber===!0){$r.s=Cr.s,!Cr.c||Cr.e>dr?$r.c=$r.e=null:Cr.e<ur?$r.c=[$r.e=0]:($r.e=Cr.e,$r.c=Cr.c.slice());return}if((hr=typeof Cr=="number")&&Cr*0==0){if($r.s=1/Cr<0?(Cr=-Cr,-1):1,Cr===~~Cr){for(gr=0,fr=Cr;fr>=10;fr/=10,gr++);gr>dr?$r.c=$r.e=null:($r.e=gr,$r.c=[Cr]);return}_r=String(Cr)}else{if(!isNumeric.test(_r=String(Cr)))return nr($r,_r,hr);$r.s=_r.charCodeAt(0)==45?(_r=_r.slice(1),-1):1}(gr=_r.indexOf("."))>-1&&(_r=_r.replace(".","")),(fr=_r.search(/e/i))>0?(gr<0&&(gr=fr),gr+=+_r.slice(fr+1),_r=_r.substring(0,fr)):gr<0&&(gr=_r.length)}else{if(intCheck(Mr,2,Or.length,"Base"),Mr==10&&Tr)return $r=new Ar(Cr),Hr($r,or+$r.e+1,ar);if(_r=String(Cr),hr=typeof Cr=="number"){if(Cr*0!=0)return nr($r,_r,hr,Mr);if($r.s=1/Cr<0?(_r=_r.slice(1),-1):1,Ar.DEBUG&&_r.replace(/^0\.0*|\./,"").length>15)throw Error(tooManyDigits+Cr)}else $r.s=_r.charCodeAt(0)===45?(_r=_r.slice(1),-1):1;for(Pr=Or.slice(0,Mr),gr=fr=0,br=_r.length;fr<br;fr++)if(Pr.indexOf(Sr=_r.charAt(fr))<0){if(Sr=="."){if(fr>gr){gr=br;continue}}else if(!pr&&(_r==_r.toUpperCase()&&(_r=_r.toLowerCase())||_r==_r.toLowerCase()&&(_r=_r.toUpperCase()))){pr=!0,fr=-1,gr=0;continue}return nr($r,String(Cr),hr,Mr)}hr=!1,_r=rr(_r,Mr,10,$r.s),(gr=_r.indexOf("."))>-1?_r=_r.replace(".",""):gr=_r.length}for(fr=0;_r.charCodeAt(fr)===48;fr++);for(br=_r.length;_r.charCodeAt(--br)===48;);if(_r=_r.slice(fr,++br)){if(br-=fr,hr&&Ar.DEBUG&&br>15&&(Cr>MAX_SAFE_INTEGER$4||Cr!==mathfloor(Cr)))throw Error(tooManyDigits+$r.s*Cr);if((gr=gr-fr-1)>dr)$r.c=$r.e=null;else if(gr<ur)$r.c=[$r.e=0];else{if($r.e=gr,$r.c=[],fr=(gr+1)%LOG_BASE,gr<0&&(fr+=LOG_BASE),fr<br){for(fr&&$r.c.push(+_r.slice(0,fr)),br-=LOG_BASE;fr<br;)$r.c.push(+_r.slice(fr,fr+=LOG_BASE));fr=LOG_BASE-(_r=_r.slice(fr)).length}else fr-=br;for(;fr--;_r+="0");$r.c.push(+_r)}}else $r.c=[$r.e=0]}Ar.clone=clone,Ar.ROUND_UP=0,Ar.ROUND_DOWN=1,Ar.ROUND_CEIL=2,Ar.ROUND_FLOOR=3,Ar.ROUND_HALF_UP=4,Ar.ROUND_HALF_DOWN=5,Ar.ROUND_HALF_EVEN=6,Ar.ROUND_HALF_CEIL=7,Ar.ROUND_HALF_FLOOR=8,Ar.EUCLID=9,Ar.config=Ar.set=function(Cr){var Mr,Pr;if(Cr!=null)if(typeof Cr=="object"){if(Cr.hasOwnProperty(Mr="DECIMAL_PLACES")&&(Pr=Cr[Mr],intCheck(Pr,0,MAX,Mr),or=Pr),Cr.hasOwnProperty(Mr="ROUNDING_MODE")&&(Pr=Cr[Mr],intCheck(Pr,0,8,Mr),ar=Pr),Cr.hasOwnProperty(Mr="EXPONENTIAL_AT")&&(Pr=Cr[Mr],Pr&&Pr.pop?(intCheck(Pr[0],-MAX,0,Mr),intCheck(Pr[1],0,MAX,Mr),cr=Pr[0],lr=Pr[1]):(intCheck(Pr,-MAX,MAX,Mr),cr=-(lr=Pr<0?-Pr:Pr))),Cr.hasOwnProperty(Mr="RANGE"))if(Pr=Cr[Mr],Pr&&Pr.pop)intCheck(Pr[0],-MAX,-1,Mr),intCheck(Pr[1],1,MAX,Mr),ur=Pr[0],dr=Pr[1];else if(intCheck(Pr,-MAX,MAX,Mr),Pr)ur=-(dr=Pr<0?-Pr:Pr);else throw Error(bignumberError+Mr+" cannot be zero: "+Pr);if(Cr.hasOwnProperty(Mr="CRYPTO"))if(Pr=Cr[Mr],Pr===!!Pr)if(Pr)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))yr=Pr;else throw yr=!Pr,Error(bignumberError+"crypto unavailable");else yr=Pr;else throw Error(bignumberError+Mr+" not true or false: "+Pr);if(Cr.hasOwnProperty(Mr="MODULO_MODE")&&(Pr=Cr[Mr],intCheck(Pr,0,9,Mr),mr=Pr),Cr.hasOwnProperty(Mr="POW_PRECISION")&&(Pr=Cr[Mr],intCheck(Pr,0,MAX,Mr),wr=Pr),Cr.hasOwnProperty(Mr="FORMAT"))if(Pr=Cr[Mr],typeof Pr=="object")xr=Pr;else throw Error(bignumberError+Mr+" not an object: "+Pr);if(Cr.hasOwnProperty(Mr="ALPHABET"))if(Pr=Cr[Mr],typeof Pr=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(Pr))Tr=Pr.slice(0,10)=="0123456789",Or=Pr;else throw Error(bignumberError+Mr+" invalid: "+Pr)}else throw Error(bignumberError+"Object expected: "+Cr);return{DECIMAL_PLACES:or,ROUNDING_MODE:ar,EXPONENTIAL_AT:[cr,lr],RANGE:[ur,dr],CRYPTO:yr,MODULO_MODE:mr,POW_PRECISION:wr,FORMAT:xr,ALPHABET:Or}},Ar.isBigNumber=function(Cr){if(!Cr||Cr._isBigNumber!==!0)return!1;if(!Ar.DEBUG)return!0;var Mr,Pr,Sr=Cr.c,pr=Cr.e,gr=Cr.s;e:if({}.toString.call(Sr)=="[object Array]"){if((gr===1||gr===-1)&&pr>=-MAX&&pr<=MAX&&pr===mathfloor(pr)){if(Sr[0]===0){if(pr===0&&Sr.length===1)return!0;break e}if(Mr=(pr+1)%LOG_BASE,Mr<1&&(Mr+=LOG_BASE),String(Sr[0]).length==Mr){for(Mr=0;Mr<Sr.length;Mr++)if(Pr=Sr[Mr],Pr<0||Pr>=BASE||Pr!==mathfloor(Pr))break e;if(Pr!==0)return!0}}}else if(Sr===null&&pr===null&&(gr===null||gr===1||gr===-1))return!0;throw Error(bignumberError+"Invalid BigNumber: "+Cr)},Ar.maximum=Ar.max=function(){return Ur(arguments,-1)},Ar.minimum=Ar.min=function(){return Ur(arguments,1)},Ar.random=function(){var Cr=9007199254740992,Mr=Math.random()*Cr&2097151?function(){return mathfloor(Math.random()*Cr)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(Pr){var Sr,pr,gr,fr,hr,br=0,_r=[],$r=new Ar(sr);if(Pr==null?Pr=or:intCheck(Pr,0,MAX),fr=mathceil(Pr/LOG_BASE),yr)if(crypto.getRandomValues){for(Sr=crypto.getRandomValues(new Uint32Array(fr*=2));br<fr;)hr=Sr[br]*131072+(Sr[br+1]>>>11),hr>=9e15?(pr=crypto.getRandomValues(new Uint32Array(2)),Sr[br]=pr[0],Sr[br+1]=pr[1]):(_r.push(hr%1e14),br+=2);br=fr/2}else if(crypto.randomBytes){for(Sr=crypto.randomBytes(fr*=7);br<fr;)hr=(Sr[br]&31)*281474976710656+Sr[br+1]*1099511627776+Sr[br+2]*4294967296+Sr[br+3]*16777216+(Sr[br+4]<<16)+(Sr[br+5]<<8)+Sr[br+6],hr>=9e15?crypto.randomBytes(7).copy(Sr,br):(_r.push(hr%1e14),br+=7);br=fr/7}else throw yr=!1,Error(bignumberError+"crypto unavailable");if(!yr)for(;br<fr;)hr=Mr(),hr<9e15&&(_r[br++]=hr%1e14);for(fr=_r[--br],Pr%=LOG_BASE,fr&&Pr&&(hr=POWS_TEN[LOG_BASE-Pr],_r[br]=mathfloor(fr/hr)*hr);_r[br]===0;_r.pop(),br--);if(br<0)_r=[gr=0];else{for(gr=-1;_r[0]===0;_r.splice(0,1),gr-=LOG_BASE);for(br=1,hr=_r[0];hr>=10;hr/=10,br++);br<LOG_BASE&&(gr-=LOG_BASE-br)}return $r.e=gr,$r.c=_r,$r}}(),Ar.sum=function(){for(var Cr=1,Mr=arguments,Pr=new Ar(Mr[0]);Cr<Mr.length;)Pr=Pr.plus(Mr[Cr++]);return Pr},rr=function(){var Cr="0123456789";function Mr(Pr,Sr,pr,gr){for(var fr,hr=[0],br,_r=0,$r=Pr.length;_r<$r;){for(br=hr.length;br--;hr[br]*=Sr);for(hr[0]+=gr.indexOf(Pr.charAt(_r++)),fr=0;fr<hr.length;fr++)hr[fr]>pr-1&&(hr[fr+1]==null&&(hr[fr+1]=0),hr[fr+1]+=hr[fr]/pr|0,hr[fr]%=pr)}return hr.reverse()}return function(Pr,Sr,pr,gr,fr){var hr,br,_r,$r,Er,vr,Ir,Rr,Br=Pr.indexOf("."),Jr=or,Wr=ar;for(Br>=0&&($r=wr,wr=0,Pr=Pr.replace(".",""),Rr=new Ar(Sr),vr=Rr.pow(Pr.length-Br),wr=$r,Rr.c=Mr(toFixedPoint(coeffToString(vr.c),vr.e,"0"),10,pr,Cr),Rr.e=Rr.c.length),Ir=Mr(Pr,Sr,pr,fr?(hr=Or,Cr):(hr=Cr,Or)),_r=$r=Ir.length;Ir[--$r]==0;Ir.pop());if(!Ir[0])return hr.charAt(0);if(Br<0?--_r:(vr.c=Ir,vr.e=_r,vr.s=gr,vr=er(vr,Rr,Jr,Wr,pr),Ir=vr.c,Er=vr.r,_r=vr.e),br=_r+Jr+1,Br=Ir[br],$r=pr/2,Er=Er||br<0||Ir[br+1]!=null,Er=Wr<4?(Br!=null||Er)&&(Wr==0||Wr==(vr.s<0?3:2)):Br>$r||Br==$r&&(Wr==4||Er||Wr==6&&Ir[br-1]&1||Wr==(vr.s<0?8:7)),br<1||!Ir[0])Pr=Er?toFixedPoint(hr.charAt(1),-Jr,hr.charAt(0)):hr.charAt(0);else{if(Ir.length=br,Er)for(--pr;++Ir[--br]>pr;)Ir[br]=0,br||(++_r,Ir=[1].concat(Ir));for($r=Ir.length;!Ir[--$r];);for(Br=0,Pr="";Br<=$r;Pr+=hr.charAt(Ir[Br++]));Pr=toFixedPoint(Pr,_r,hr.charAt(0))}return Pr}}(),er=function(){function Cr(Sr,pr,gr){var fr,hr,br,_r,$r=0,Er=Sr.length,vr=pr%SQRT_BASE,Ir=pr/SQRT_BASE|0;for(Sr=Sr.slice();Er--;)br=Sr[Er]%SQRT_BASE,_r=Sr[Er]/SQRT_BASE|0,fr=Ir*br+_r*vr,hr=vr*br+fr%SQRT_BASE*SQRT_BASE+$r,$r=(hr/gr|0)+(fr/SQRT_BASE|0)+Ir*_r,Sr[Er]=hr%gr;return $r&&(Sr=[$r].concat(Sr)),Sr}function Mr(Sr,pr,gr,fr){var hr,br;if(gr!=fr)br=gr>fr?1:-1;else for(hr=br=0;hr<gr;hr++)if(Sr[hr]!=pr[hr]){br=Sr[hr]>pr[hr]?1:-1;break}return br}function Pr(Sr,pr,gr,fr){for(var hr=0;gr--;)Sr[gr]-=hr,hr=Sr[gr]<pr[gr]?1:0,Sr[gr]=hr*fr+Sr[gr]-pr[gr];for(;!Sr[0]&&Sr.length>1;Sr.splice(0,1));}return function(Sr,pr,gr,fr,hr){var br,_r,$r,Er,vr,Ir,Rr,Br,Jr,Wr,qr,an,tn,cn,dn,Zr,Yr,Qr=Sr.s==pr.s?1:-1,un=Sr.c,gn=pr.c;if(!un||!un[0]||!gn||!gn[0])return new Ar(!Sr.s||!pr.s||(un?gn&&un[0]==gn[0]:!gn)?NaN:un&&un[0]==0||!gn?Qr*0:Qr/0);for(Br=new Ar(Qr),Jr=Br.c=[],_r=Sr.e-pr.e,Qr=gr+_r+1,hr||(hr=BASE,_r=bitFloor(Sr.e/LOG_BASE)-bitFloor(pr.e/LOG_BASE),Qr=Qr/LOG_BASE|0),$r=0;gn[$r]==(un[$r]||0);$r++);if(gn[$r]>(un[$r]||0)&&_r--,Qr<0)Jr.push(1),Er=!0;else{for(cn=un.length,Zr=gn.length,$r=0,Qr+=2,vr=mathfloor(hr/(gn[0]+1)),vr>1&&(gn=Cr(gn,vr,hr),un=Cr(un,vr,hr),Zr=gn.length,cn=un.length),tn=Zr,Wr=un.slice(0,Zr),qr=Wr.length;qr<Zr;Wr[qr++]=0);Yr=gn.slice(),Yr=[0].concat(Yr),dn=gn[0],gn[1]>=hr/2&&dn++;do{if(vr=0,br=Mr(gn,Wr,Zr,qr),br<0){if(an=Wr[0],Zr!=qr&&(an=an*hr+(Wr[1]||0)),vr=mathfloor(an/dn),vr>1)for(vr>=hr&&(vr=hr-1),Ir=Cr(gn,vr,hr),Rr=Ir.length,qr=Wr.length;Mr(Ir,Wr,Rr,qr)==1;)vr--,Pr(Ir,Zr<Rr?Yr:gn,Rr,hr),Rr=Ir.length,br=1;else vr==0&&(br=vr=1),Ir=gn.slice(),Rr=Ir.length;if(Rr<qr&&(Ir=[0].concat(Ir)),Pr(Wr,Ir,qr,hr),qr=Wr.length,br==-1)for(;Mr(gn,Wr,Zr,qr)<1;)vr++,Pr(Wr,Zr<qr?Yr:gn,qr,hr),qr=Wr.length}else br===0&&(vr++,Wr=[0]);Jr[$r++]=vr,Wr[0]?Wr[qr++]=un[tn]||0:(Wr=[un[tn]],qr=1)}while((tn++<cn||Wr[0]!=null)&&Qr--);Er=Wr[0]!=null,Jr[0]||Jr.splice(0,1)}if(hr==BASE){for($r=1,Qr=Jr[0];Qr>=10;Qr/=10,$r++);Hr(Br,gr+(Br.e=$r+_r*LOG_BASE-1)+1,fr,Er)}else Br.e=_r,Br.r=+Er;return Br}}();function Nr(Cr,Mr,Pr,Sr){var pr,gr,fr,hr,br;if(Pr==null?Pr=ar:intCheck(Pr,0,8),!Cr.c)return Cr.toString();if(pr=Cr.c[0],fr=Cr.e,Mr==null)br=coeffToString(Cr.c),br=Sr==1||Sr==2&&(fr<=cr||fr>=lr)?toExponential(br,fr):toFixedPoint(br,fr,"0");else if(Cr=Hr(new Ar(Cr),Mr,Pr),gr=Cr.e,br=coeffToString(Cr.c),hr=br.length,Sr==1||Sr==2&&(Mr<=gr||gr<=cr)){for(;hr<Mr;br+="0",hr++);br=toExponential(br,gr)}else if(Mr-=fr,br=toFixedPoint(br,gr,"0"),gr+1>hr){if(--Mr>0)for(br+=".";Mr--;br+="0");}else if(Mr+=gr-hr,Mr>0)for(gr+1==hr&&(br+=".");Mr--;br+="0");return Cr.s<0&&pr?"-"+br:br}function Ur(Cr,Mr){for(var Pr,Sr,pr=1,gr=new Ar(Cr[0]);pr<Cr.length;pr++)Sr=new Ar(Cr[pr]),(!Sr.s||(Pr=compare$p(gr,Sr))===Mr||Pr===0&&gr.s===Mr)&&(gr=Sr);return gr}function Dr(Cr,Mr,Pr){for(var Sr=1,pr=Mr.length;!Mr[--pr];Mr.pop());for(pr=Mr[0];pr>=10;pr/=10,Sr++);return(Pr=Sr+Pr*LOG_BASE-1)>dr?Cr.c=Cr.e=null:Pr<ur?Cr.c=[Cr.e=0]:(Cr.e=Pr,Cr.c=Mr),Cr}nr=function(){var Cr=/^(-?)0([xbo])(?=\w[\w.]*$)/i,Mr=/^([^.]+)\.$/,Pr=/^\.([^.]+)$/,Sr=/^-?(Infinity|NaN)$/,pr=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(gr,fr,hr,br){var _r,$r=hr?fr:fr.replace(pr,"");if(Sr.test($r))gr.s=isNaN($r)?null:$r<0?-1:1;else{if(!hr&&($r=$r.replace(Cr,function(Er,vr,Ir){return _r=(Ir=Ir.toLowerCase())=="x"?16:Ir=="b"?2:8,!br||br==_r?vr:Er}),br&&(_r=br,$r=$r.replace(Mr,"$1").replace(Pr,"0.$1")),fr!=$r))return new Ar($r,_r);if(Ar.DEBUG)throw Error(bignumberError+"Not a"+(br?" base "+br:"")+" number: "+fr);gr.s=null}gr.c=gr.e=null}}();function Hr(Cr,Mr,Pr,Sr){var pr,gr,fr,hr,br,_r,$r,Er=Cr.c,vr=POWS_TEN;if(Er){e:{for(pr=1,hr=Er[0];hr>=10;hr/=10,pr++);if(gr=Mr-pr,gr<0)gr+=LOG_BASE,fr=Mr,br=Er[_r=0],$r=mathfloor(br/vr[pr-fr-1]%10);else if(_r=mathceil((gr+1)/LOG_BASE),_r>=Er.length)if(Sr){for(;Er.length<=_r;Er.push(0));br=$r=0,pr=1,gr%=LOG_BASE,fr=gr-LOG_BASE+1}else break e;else{for(br=hr=Er[_r],pr=1;hr>=10;hr/=10,pr++);gr%=LOG_BASE,fr=gr-LOG_BASE+pr,$r=fr<0?0:mathfloor(br/vr[pr-fr-1]%10)}if(Sr=Sr||Mr<0||Er[_r+1]!=null||(fr<0?br:br%vr[pr-fr-1]),Sr=Pr<4?($r||Sr)&&(Pr==0||Pr==(Cr.s<0?3:2)):$r>5||$r==5&&(Pr==4||Sr||Pr==6&&(gr>0?fr>0?br/vr[pr-fr]:0:Er[_r-1])%10&1||Pr==(Cr.s<0?8:7)),Mr<1||!Er[0])return Er.length=0,Sr?(Mr-=Cr.e+1,Er[0]=vr[(LOG_BASE-Mr%LOG_BASE)%LOG_BASE],Cr.e=-Mr||0):Er[0]=Cr.e=0,Cr;if(gr==0?(Er.length=_r,hr=1,_r--):(Er.length=_r+1,hr=vr[LOG_BASE-gr],Er[_r]=fr>0?mathfloor(br/vr[pr-fr]%vr[fr])*hr:0),Sr)for(;;)if(_r==0){for(gr=1,fr=Er[0];fr>=10;fr/=10,gr++);for(fr=Er[0]+=hr,hr=1;fr>=10;fr/=10,hr++);gr!=hr&&(Cr.e++,Er[0]==BASE&&(Er[0]=1));break}else{if(Er[_r]+=hr,Er[_r]!=BASE)break;Er[_r--]=0,hr=1}for(gr=Er.length;Er[--gr]===0;Er.pop());}Cr.e>dr?Cr.c=Cr.e=null:Cr.e<ur&&(Cr.c=[Cr.e=0])}return Cr}function zr(Cr){var Mr,Pr=Cr.e;return Pr===null?Cr.toString():(Mr=coeffToString(Cr.c),Mr=Pr<=cr||Pr>=lr?toExponential(Mr,Pr):toFixedPoint(Mr,Pr,"0"),Cr.s<0?"-"+Mr:Mr)}return ir.absoluteValue=ir.abs=function(){var Cr=new Ar(this);return Cr.s<0&&(Cr.s=1),Cr},ir.comparedTo=function(Cr,Mr){return compare$p(this,new Ar(Cr,Mr))},ir.decimalPlaces=ir.dp=function(Cr,Mr){var Pr,Sr,pr,gr=this;if(Cr!=null)return intCheck(Cr,0,MAX),Mr==null?Mr=ar:intCheck(Mr,0,8),Hr(new Ar(gr),Cr+gr.e+1,Mr);if(!(Pr=gr.c))return null;if(Sr=((pr=Pr.length-1)-bitFloor(this.e/LOG_BASE))*LOG_BASE,pr=Pr[pr])for(;pr%10==0;pr/=10,Sr--);return Sr<0&&(Sr=0),Sr},ir.dividedBy=ir.div=function(Cr,Mr){return er(this,new Ar(Cr,Mr),or,ar)},ir.dividedToIntegerBy=ir.idiv=function(Cr,Mr){return er(this,new Ar(Cr,Mr),0,1)},ir.exponentiatedBy=ir.pow=function(Cr,Mr){var Pr,Sr,pr,gr,fr,hr,br,_r,$r,Er=this;if(Cr=new Ar(Cr),Cr.c&&!Cr.isInteger())throw Error(bignumberError+"Exponent not an integer: "+zr(Cr));if(Mr!=null&&(Mr=new Ar(Mr)),hr=Cr.e>14,!Er.c||!Er.c[0]||Er.c[0]==1&&!Er.e&&Er.c.length==1||!Cr.c||!Cr.c[0])return $r=new Ar(Math.pow(+zr(Er),hr?Cr.s*(2-isOdd(Cr)):+zr(Cr))),Mr?$r.mod(Mr):$r;if(br=Cr.s<0,Mr){if(Mr.c?!Mr.c[0]:!Mr.s)return new Ar(NaN);Sr=!br&&Er.isInteger()&&Mr.isInteger(),Sr&&(Er=Er.mod(Mr))}else{if(Cr.e>9&&(Er.e>0||Er.e<-1||(Er.e==0?Er.c[0]>1||hr&&Er.c[1]>=24e7:Er.c[0]<8e13||hr&&Er.c[0]<=9999975e7)))return gr=Er.s<0&&isOdd(Cr)?-0:0,Er.e>-1&&(gr=1/gr),new Ar(br?1/gr:gr);wr&&(gr=mathceil(wr/LOG_BASE+2))}for(hr?(Pr=new Ar(.5),br&&(Cr.s=1),_r=isOdd(Cr)):(pr=Math.abs(+zr(Cr)),_r=pr%2),$r=new Ar(sr);;){if(_r){if($r=$r.times(Er),!$r.c)break;gr?$r.c.length>gr&&($r.c.length=gr):Sr&&($r=$r.mod(Mr))}if(pr){if(pr=mathfloor(pr/2),pr===0)break;_r=pr%2}else if(Cr=Cr.times(Pr),Hr(Cr,Cr.e+1,1),Cr.e>14)_r=isOdd(Cr);else{if(pr=+zr(Cr),pr===0)break;_r=pr%2}Er=Er.times(Er),gr?Er.c&&Er.c.length>gr&&(Er.c.length=gr):Sr&&(Er=Er.mod(Mr))}return Sr?$r:(br&&($r=sr.div($r)),Mr?$r.mod(Mr):gr?Hr($r,wr,ar,fr):$r)},ir.integerValue=function(Cr){var Mr=new Ar(this);return Cr==null?Cr=ar:intCheck(Cr,0,8),Hr(Mr,Mr.e+1,Cr)},ir.isEqualTo=ir.eq=function(Cr,Mr){return compare$p(this,new Ar(Cr,Mr))===0},ir.isFinite=function(){return!!this.c},ir.isGreaterThan=ir.gt=function(Cr,Mr){return compare$p(this,new Ar(Cr,Mr))>0},ir.isGreaterThanOrEqualTo=ir.gte=function(Cr,Mr){return(Mr=compare$p(this,new Ar(Cr,Mr)))===1||Mr===0},ir.isInteger=function(){return!!this.c&&bitFloor(this.e/LOG_BASE)>this.c.length-2},ir.isLessThan=ir.lt=function(Cr,Mr){return compare$p(this,new Ar(Cr,Mr))<0},ir.isLessThanOrEqualTo=ir.lte=function(Cr,Mr){return(Mr=compare$p(this,new Ar(Cr,Mr)))===-1||Mr===0},ir.isNaN=function(){return!this.s},ir.isNegative=function(){return this.s<0},ir.isPositive=function(){return this.s>0},ir.isZero=function(){return!!this.c&&this.c[0]==0},ir.minus=function(Cr,Mr){var Pr,Sr,pr,gr,fr=this,hr=fr.s;if(Cr=new Ar(Cr,Mr),Mr=Cr.s,!hr||!Mr)return new Ar(NaN);if(hr!=Mr)return Cr.s=-Mr,fr.plus(Cr);var br=fr.e/LOG_BASE,_r=Cr.e/LOG_BASE,$r=fr.c,Er=Cr.c;if(!br||!_r){if(!$r||!Er)return $r?(Cr.s=-Mr,Cr):new Ar(Er?fr:NaN);if(!$r[0]||!Er[0])return Er[0]?(Cr.s=-Mr,Cr):new Ar($r[0]?fr:ar==3?-0:0)}if(br=bitFloor(br),_r=bitFloor(_r),$r=$r.slice(),hr=br-_r){for((gr=hr<0)?(hr=-hr,pr=$r):(_r=br,pr=Er),pr.reverse(),Mr=hr;Mr--;pr.push(0));pr.reverse()}else for(Sr=(gr=(hr=$r.length)<(Mr=Er.length))?hr:Mr,hr=Mr=0;Mr<Sr;Mr++)if($r[Mr]!=Er[Mr]){gr=$r[Mr]<Er[Mr];break}if(gr&&(pr=$r,$r=Er,Er=pr,Cr.s=-Cr.s),Mr=(Sr=Er.length)-(Pr=$r.length),Mr>0)for(;Mr--;$r[Pr++]=0);for(Mr=BASE-1;Sr>hr;){if($r[--Sr]<Er[Sr]){for(Pr=Sr;Pr&&!$r[--Pr];$r[Pr]=Mr);--$r[Pr],$r[Sr]+=BASE}$r[Sr]-=Er[Sr]}for(;$r[0]==0;$r.splice(0,1),--_r);return $r[0]?Dr(Cr,$r,_r):(Cr.s=ar==3?-1:1,Cr.c=[Cr.e=0],Cr)},ir.modulo=ir.mod=function(Cr,Mr){var Pr,Sr,pr=this;return Cr=new Ar(Cr,Mr),!pr.c||!Cr.s||Cr.c&&!Cr.c[0]?new Ar(NaN):!Cr.c||pr.c&&!pr.c[0]?new Ar(pr):(mr==9?(Sr=Cr.s,Cr.s=1,Pr=er(pr,Cr,0,3),Cr.s=Sr,Pr.s*=Sr):Pr=er(pr,Cr,0,mr),Cr=pr.minus(Pr.times(Cr)),!Cr.c[0]&&mr==1&&(Cr.s=pr.s),Cr)},ir.multipliedBy=ir.times=function(Cr,Mr){var Pr,Sr,pr,gr,fr,hr,br,_r,$r,Er,vr,Ir,Rr,Br,Jr,Wr=this,qr=Wr.c,an=(Cr=new Ar(Cr,Mr)).c;if(!qr||!an||!qr[0]||!an[0])return!Wr.s||!Cr.s||qr&&!qr[0]&&!an||an&&!an[0]&&!qr?Cr.c=Cr.e=Cr.s=null:(Cr.s*=Wr.s,!qr||!an?Cr.c=Cr.e=null:(Cr.c=[0],Cr.e=0)),Cr;for(Sr=bitFloor(Wr.e/LOG_BASE)+bitFloor(Cr.e/LOG_BASE),Cr.s*=Wr.s,br=qr.length,Er=an.length,br<Er&&(Rr=qr,qr=an,an=Rr,pr=br,br=Er,Er=pr),pr=br+Er,Rr=[];pr--;Rr.push(0));for(Br=BASE,Jr=SQRT_BASE,pr=Er;--pr>=0;){for(Pr=0,vr=an[pr]%Jr,Ir=an[pr]/Jr|0,fr=br,gr=pr+fr;gr>pr;)_r=qr[--fr]%Jr,$r=qr[fr]/Jr|0,hr=Ir*_r+$r*vr,_r=vr*_r+hr%Jr*Jr+Rr[gr]+Pr,Pr=(_r/Br|0)+(hr/Jr|0)+Ir*$r,Rr[gr--]=_r%Br;Rr[gr]=Pr}return Pr?++Sr:Rr.splice(0,1),Dr(Cr,Rr,Sr)},ir.negated=function(){var Cr=new Ar(this);return Cr.s=-Cr.s||null,Cr},ir.plus=function(Cr,Mr){var Pr,Sr=this,pr=Sr.s;if(Cr=new Ar(Cr,Mr),Mr=Cr.s,!pr||!Mr)return new Ar(NaN);if(pr!=Mr)return Cr.s=-Mr,Sr.minus(Cr);var gr=Sr.e/LOG_BASE,fr=Cr.e/LOG_BASE,hr=Sr.c,br=Cr.c;if(!gr||!fr){if(!hr||!br)return new Ar(pr/0);if(!hr[0]||!br[0])return br[0]?Cr:new Ar(hr[0]?Sr:pr*0)}if(gr=bitFloor(gr),fr=bitFloor(fr),hr=hr.slice(),pr=gr-fr){for(pr>0?(fr=gr,Pr=br):(pr=-pr,Pr=hr),Pr.reverse();pr--;Pr.push(0));Pr.reverse()}for(pr=hr.length,Mr=br.length,pr-Mr<0&&(Pr=br,br=hr,hr=Pr,Mr=pr),pr=0;Mr;)pr=(hr[--Mr]=hr[Mr]+br[Mr]+pr)/BASE|0,hr[Mr]=BASE===hr[Mr]?0:hr[Mr]%BASE;return pr&&(hr=[pr].concat(hr),++fr),Dr(Cr,hr,fr)},ir.precision=ir.sd=function(Cr,Mr){var Pr,Sr,pr,gr=this;if(Cr!=null&&Cr!==!!Cr)return intCheck(Cr,1,MAX),Mr==null?Mr=ar:intCheck(Mr,0,8),Hr(new Ar(gr),Cr,Mr);if(!(Pr=gr.c))return null;if(pr=Pr.length-1,Sr=pr*LOG_BASE+1,pr=Pr[pr]){for(;pr%10==0;pr/=10,Sr--);for(pr=Pr[0];pr>=10;pr/=10,Sr++);}return Cr&&gr.e+1>Sr&&(Sr=gr.e+1),Sr},ir.shiftedBy=function(Cr){return intCheck(Cr,-MAX_SAFE_INTEGER$4,MAX_SAFE_INTEGER$4),this.times("1e"+Cr)},ir.squareRoot=ir.sqrt=function(){var Cr,Mr,Pr,Sr,pr,gr=this,fr=gr.c,hr=gr.s,br=gr.e,_r=or+4,$r=new Ar("0.5");if(hr!==1||!fr||!fr[0])return new Ar(!hr||hr<0&&(!fr||fr[0])?NaN:fr?gr:1/0);if(hr=Math.sqrt(+zr(gr)),hr==0||hr==1/0?(Mr=coeffToString(fr),(Mr.length+br)%2==0&&(Mr+="0"),hr=Math.sqrt(+Mr),br=bitFloor((br+1)/2)-(br<0||br%2),hr==1/0?Mr="5e"+br:(Mr=hr.toExponential(),Mr=Mr.slice(0,Mr.indexOf("e")+1)+br),Pr=new Ar(Mr)):Pr=new Ar(hr+""),Pr.c[0]){for(br=Pr.e,hr=br+_r,hr<3&&(hr=0);;)if(pr=Pr,Pr=$r.times(pr.plus(er(gr,pr,_r,1))),coeffToString(pr.c).slice(0,hr)===(Mr=coeffToString(Pr.c)).slice(0,hr))if(Pr.e<br&&--hr,Mr=Mr.slice(hr-3,hr+1),Mr=="9999"||!Sr&&Mr=="4999"){if(!Sr&&(Hr(pr,pr.e+or+2,0),pr.times(pr).eq(gr))){Pr=pr;break}_r+=4,hr+=4,Sr=1}else{(!+Mr||!+Mr.slice(1)&&Mr.charAt(0)=="5")&&(Hr(Pr,Pr.e+or+2,1),Cr=!Pr.times(Pr).eq(gr));break}}return Hr(Pr,Pr.e+or+1,ar,Cr)},ir.toExponential=function(Cr,Mr){return Cr!=null&&(intCheck(Cr,0,MAX),Cr++),Nr(this,Cr,Mr,1)},ir.toFixed=function(Cr,Mr){return Cr!=null&&(intCheck(Cr,0,MAX),Cr=Cr+this.e+1),Nr(this,Cr,Mr)},ir.toFormat=function(Cr,Mr,Pr){var Sr,pr=this;if(Pr==null)Cr!=null&&Mr&&typeof Mr=="object"?(Pr=Mr,Mr=null):Cr&&typeof Cr=="object"?(Pr=Cr,Cr=Mr=null):Pr=xr;else if(typeof Pr!="object")throw Error(bignumberError+"Argument not an object: "+Pr);if(Sr=pr.toFixed(Cr,Mr),pr.c){var gr,fr=Sr.split("."),hr=+Pr.groupSize,br=+Pr.secondaryGroupSize,_r=Pr.groupSeparator||"",$r=fr[0],Er=fr[1],vr=pr.s<0,Ir=vr?$r.slice(1):$r,Rr=Ir.length;if(br&&(gr=hr,hr=br,br=gr,Rr-=gr),hr>0&&Rr>0){for(gr=Rr%hr||hr,$r=Ir.substr(0,gr);gr<Rr;gr+=hr)$r+=_r+Ir.substr(gr,hr);br>0&&($r+=_r+Ir.slice(gr)),vr&&($r="-"+$r)}Sr=Er?$r+(Pr.decimalSeparator||"")+((br=+Pr.fractionGroupSize)?Er.replace(new RegExp("\\d{"+br+"}\\B","g"),"$&"+(Pr.fractionGroupSeparator||"")):Er):$r}return(Pr.prefix||"")+Sr+(Pr.suffix||"")},ir.toFraction=function(Cr){var Mr,Pr,Sr,pr,gr,fr,hr,br,_r,$r,Er,vr,Ir=this,Rr=Ir.c;if(Cr!=null&&(hr=new Ar(Cr),!hr.isInteger()&&(hr.c||hr.s!==1)||hr.lt(sr)))throw Error(bignumberError+"Argument "+(hr.isInteger()?"out of range: ":"not an integer: ")+zr(hr));if(!Rr)return new Ar(Ir);for(Mr=new Ar(sr),_r=Pr=new Ar(sr),Sr=br=new Ar(sr),vr=coeffToString(Rr),gr=Mr.e=vr.length-Ir.e-1,Mr.c[0]=POWS_TEN[(fr=gr%LOG_BASE)<0?LOG_BASE+fr:fr],Cr=!Cr||hr.comparedTo(Mr)>0?gr>0?Mr:_r:hr,fr=dr,dr=1/0,hr=new Ar(vr),br.c[0]=0;$r=er(hr,Mr,0,1),pr=Pr.plus($r.times(Sr)),pr.comparedTo(Cr)!=1;)Pr=Sr,Sr=pr,_r=br.plus($r.times(pr=_r)),br=pr,Mr=hr.minus($r.times(pr=Mr)),hr=pr;return pr=er(Cr.minus(Pr),Sr,0,1),br=br.plus(pr.times(_r)),Pr=Pr.plus(pr.times(Sr)),br.s=_r.s=Ir.s,gr=gr*2,Er=er(_r,Sr,gr,ar).minus(Ir).abs().comparedTo(er(br,Pr,gr,ar).minus(Ir).abs())<1?[_r,Sr]:[br,Pr],dr=fr,Er},ir.toNumber=function(){return+zr(this)},ir.toPrecision=function(Cr,Mr){return Cr!=null&&intCheck(Cr,1,MAX),Nr(this,Cr,Mr,2)},ir.toString=function(Cr){var Mr,Pr=this,Sr=Pr.s,pr=Pr.e;return pr===null?Sr?(Mr="Infinity",Sr<0&&(Mr="-"+Mr)):Mr="NaN":(Cr==null?Mr=pr<=cr||pr>=lr?toExponential(coeffToString(Pr.c),pr):toFixedPoint(coeffToString(Pr.c),pr,"0"):Cr===10&&Tr?(Pr=Hr(new Ar(Pr),or+pr+1,ar),Mr=toFixedPoint(coeffToString(Pr.c),Pr.e,"0")):(intCheck(Cr,2,Or.length,"Base"),Mr=rr(toFixedPoint(coeffToString(Pr.c),pr,"0"),10,Cr,Sr,!0)),Sr<0&&Pr.c[0]&&(Mr="-"+Mr)),Mr},ir.valueOf=ir.toJSON=function(){return zr(this)},ir._isBigNumber=!0,ir[Symbol.toStringTag]="BigNumber",ir[Symbol.for("nodejs.util.inspect.custom")]=ir.valueOf,tr!=null&&Ar.set(tr),Ar}function bitFloor(tr){var er=tr|0;return tr>0||tr===er?er:er-1}function coeffToString(tr){for(var er,rr,nr=1,ir=tr.length,sr=tr[0]+"";nr<ir;){for(er=tr[nr++]+"",rr=LOG_BASE-er.length;rr--;er="0"+er);sr+=er}for(ir=sr.length;sr.charCodeAt(--ir)===48;);return sr.slice(0,ir+1||1)}function compare$p(tr,er){var rr,nr,ir=tr.c,sr=er.c,or=tr.s,ar=er.s,cr=tr.e,lr=er.e;if(!or||!ar)return null;if(rr=ir&&!ir[0],nr=sr&&!sr[0],rr||nr)return rr?nr?0:-ar:or;if(or!=ar)return or;if(rr=or<0,nr=cr==lr,!ir||!sr)return nr?0:!ir^rr?1:-1;if(!nr)return cr>lr^rr?1:-1;for(ar=(cr=ir.length)<(lr=sr.length)?cr:lr,or=0;or<ar;or++)if(ir[or]!=sr[or])return ir[or]>sr[or]^rr?1:-1;return cr==lr?0:cr>lr^rr?1:-1}function intCheck(tr,er,rr,nr){if(tr<er||tr>rr||tr!==mathfloor(tr))throw Error(bignumberError+(nr||"Argument")+(typeof tr=="number"?tr<er||tr>rr?" out of range: ":" not an integer: ":" not a primitive number: ")+String(tr))}function isOdd(tr){var er=tr.c.length-1;return bitFloor(tr.e/LOG_BASE)==er&&tr.c[er]%2!=0}function toExponential(tr,er){return(tr.length>1?tr.charAt(0)+"."+tr.slice(1):tr)+(er<0?"e":"e+")+er}function toFixedPoint(tr,er,rr){var nr,ir;if(er<0){for(ir=rr+".";++er;ir+=rr);tr=ir+tr}else if(nr=tr.length,++er>nr){for(ir=rr,er-=nr;--er;ir+=rr);tr+=ir}else er<nr&&(tr=tr.slice(0,er)+"."+tr.slice(er));return tr}var BigNumber=clone();const PACKET_TYPES=Object.create(null);PACKET_TYPES.open="0";PACKET_TYPES.close="1";PACKET_TYPES.ping="2";PACKET_TYPES.pong="3";PACKET_TYPES.message="4";PACKET_TYPES.upgrade="5";PACKET_TYPES.noop="6";const PACKET_TYPES_REVERSE=Object.create(null);Object.keys(PACKET_TYPES).forEach(tr=>{PACKET_TYPES_REVERSE[PACKET_TYPES[tr]]=tr});const ERROR_PACKET={type:"error",data:"parser error"},withNativeBlob$1=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",withNativeArrayBuffer$2=typeof ArrayBuffer=="function",isView$1=tr=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(tr):tr&&tr.buffer instanceof ArrayBuffer,encodePacket=({type:tr,data:er},rr,nr)=>withNativeBlob$1&&er instanceof Blob?rr?nr(er):encodeBlobAsBase64(er,nr):withNativeArrayBuffer$2&&(er instanceof ArrayBuffer||isView$1(er))?rr?nr(er):encodeBlobAsBase64(new Blob([er]),nr):nr(PACKET_TYPES[tr]+(er||"")),encodeBlobAsBase64=(tr,er)=>{const rr=new FileReader;return rr.onload=function(){const nr=rr.result.split(",")[1];er("b"+(nr||""))},rr.readAsDataURL(tr)};function toArray(tr){return tr instanceof Uint8Array?tr:tr instanceof ArrayBuffer?new Uint8Array(tr):new Uint8Array(tr.buffer,tr.byteOffset,tr.byteLength)}let TEXT_ENCODER;function encodePacketToBinary(tr,er){if(withNativeBlob$1&&tr.data instanceof Blob)return tr.data.arrayBuffer().then(toArray).then(er);if(withNativeArrayBuffer$2&&(tr.data instanceof ArrayBuffer||isView$1(tr.data)))return er(toArray(tr.data));encodePacket(tr,!1,rr=>{TEXT_ENCODER||(TEXT_ENCODER=new TextEncoder),er(TEXT_ENCODER.encode(rr))})}const chars$1="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",lookup$1=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let tr=0;tr<chars$1.length;tr++)lookup$1[chars$1.charCodeAt(tr)]=tr;const decode$2=tr=>{let er=tr.length*.75,rr=tr.length,nr,ir=0,sr,or,ar,cr;tr[tr.length-1]==="="&&(er--,tr[tr.length-2]==="="&&er--);const lr=new ArrayBuffer(er),ur=new Uint8Array(lr);for(nr=0;nr<rr;nr+=4)sr=lookup$1[tr.charCodeAt(nr)],or=lookup$1[tr.charCodeAt(nr+1)],ar=lookup$1[tr.charCodeAt(nr+2)],cr=lookup$1[tr.charCodeAt(nr+3)],ur[ir++]=sr<<2|or>>4,ur[ir++]=(or&15)<<4|ar>>2,ur[ir++]=(ar&3)<<6|cr&63;return lr},withNativeArrayBuffer$1=typeof ArrayBuffer=="function",decodePacket=(tr,er)=>{if(typeof tr!="string")return{type:"message",data:mapBinary(tr,er)};const rr=tr.charAt(0);return rr==="b"?{type:"message",data:decodeBase64Packet(tr.substring(1),er)}:PACKET_TYPES_REVERSE[rr]?tr.length>1?{type:PACKET_TYPES_REVERSE[rr],data:tr.substring(1)}:{type:PACKET_TYPES_REVERSE[rr]}:ERROR_PACKET},decodeBase64Packet=(tr,er)=>{if(withNativeArrayBuffer$1){const rr=decode$2(tr);return mapBinary(rr,er)}else return{base64:!0,data:tr}},mapBinary=(tr,er)=>{switch(er){case"blob":return tr instanceof Blob?tr:new Blob([tr]);case"arraybuffer":default:return tr instanceof ArrayBuffer?tr:tr.buffer}},SEPARATOR="",encodePayload=(tr,er)=>{const rr=tr.length,nr=new Array(rr);let ir=0;tr.forEach((sr,or)=>{encodePacket(sr,!1,ar=>{nr[or]=ar,++ir===rr&&er(nr.join(SEPARATOR))})})},decodePayload=(tr,er)=>{const rr=tr.split(SEPARATOR),nr=[];for(let ir=0;ir<rr.length;ir++){const sr=decodePacket(rr[ir],er);if(nr.push(sr),sr.type==="error")break}return nr};function createPacketEncoderStream(){return new TransformStream({transform(tr,er){encodePacketToBinary(tr,rr=>{const nr=rr.length;let ir;if(nr<126)ir=new Uint8Array(1),new DataView(ir.buffer).setUint8(0,nr);else if(nr<65536){ir=new Uint8Array(3);const sr=new DataView(ir.buffer);sr.setUint8(0,126),sr.setUint16(1,nr)}else{ir=new Uint8Array(9);const sr=new DataView(ir.buffer);sr.setUint8(0,127),sr.setBigUint64(1,BigInt(nr))}tr.data&&typeof tr.data!="string"&&(ir[0]|=128),er.enqueue(ir),er.enqueue(rr)})}})}let TEXT_DECODER;function totalLength(tr){return tr.reduce((er,rr)=>er+rr.length,0)}function concatChunks(tr,er){if(tr[0].length===er)return tr.shift();const rr=new Uint8Array(er);let nr=0;for(let ir=0;ir<er;ir++)rr[ir]=tr[0][nr++],nr===tr[0].length&&(tr.shift(),nr=0);return tr.length&&nr<tr[0].length&&(tr[0]=tr[0].slice(nr)),rr}function createPacketDecoderStream(tr,er){TEXT_DECODER||(TEXT_DECODER=new TextDecoder);const rr=[];let nr=0,ir=-1,sr=!1;return new TransformStream({transform(or,ar){for(rr.push(or);;){if(nr===0){if(totalLength(rr)<1)break;const cr=concatChunks(rr,1);sr=(cr[0]&128)===128,ir=cr[0]&127,ir<126?nr=3:ir===126?nr=1:nr=2}else if(nr===1){if(totalLength(rr)<2)break;const cr=concatChunks(rr,2);ir=new DataView(cr.buffer,cr.byteOffset,cr.length).getUint16(0),nr=3}else if(nr===2){if(totalLength(rr)<8)break;const cr=concatChunks(rr,8),lr=new DataView(cr.buffer,cr.byteOffset,cr.length),ur=lr.getUint32(0);if(ur>Math.pow(2,21)-1){ar.enqueue(ERROR_PACKET);break}ir=ur*Math.pow(2,32)+lr.getUint32(4),nr=3}else{if(totalLength(rr)<ir)break;const cr=concatChunks(rr,ir);ar.enqueue(decodePacket(sr?cr:TEXT_DECODER.decode(cr),er)),nr=0}if(ir===0||ir>tr){ar.enqueue(ERROR_PACKET);break}}}})}const protocol$1=4;function Emitter(tr){if(tr)return mixin(tr)}function mixin(tr){for(var er in Emitter.prototype)tr[er]=Emitter.prototype[er];return tr}Emitter.prototype.on=Emitter.prototype.addEventListener=function(tr,er){return this._callbacks=this._callbacks||{},(this._callbacks["$"+tr]=this._callbacks["$"+tr]||[]).push(er),this};Emitter.prototype.once=function(tr,er){function rr(){this.off(tr,rr),er.apply(this,arguments)}return rr.fn=er,this.on(tr,rr),this};Emitter.prototype.off=Emitter.prototype.removeListener=Emitter.prototype.removeAllListeners=Emitter.prototype.removeEventListener=function(tr,er){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var rr=this._callbacks["$"+tr];if(!rr)return this;if(arguments.length==1)return delete this._callbacks["$"+tr],this;for(var nr,ir=0;ir<rr.length;ir++)if(nr=rr[ir],nr===er||nr.fn===er){rr.splice(ir,1);break}return rr.length===0&&delete this._callbacks["$"+tr],this};Emitter.prototype.emit=function(tr){this._callbacks=this._callbacks||{};for(var er=new Array(arguments.length-1),rr=this._callbacks["$"+tr],nr=1;nr<arguments.length;nr++)er[nr-1]=arguments[nr];if(rr){rr=rr.slice(0);for(var nr=0,ir=rr.length;nr<ir;++nr)rr[nr].apply(this,er)}return this};Emitter.prototype.emitReserved=Emitter.prototype.emit;Emitter.prototype.listeners=function(tr){return this._callbacks=this._callbacks||{},this._callbacks["$"+tr]||[]};Emitter.prototype.hasListeners=function(tr){return!!this.listeners(tr).length};const globalThisShim=typeof self<"u"?self:typeof window<"u"?window:Function("return this")();function pick(tr,...er){return er.reduce((rr,nr)=>(tr.hasOwnProperty(nr)&&(rr[nr]=tr[nr]),rr),{})}const NATIVE_SET_TIMEOUT=globalThisShim.setTimeout,NATIVE_CLEAR_TIMEOUT=globalThisShim.clearTimeout;function installTimerFunctions(tr,er){er.useNativeTimers?(tr.setTimeoutFn=NATIVE_SET_TIMEOUT.bind(globalThisShim),tr.clearTimeoutFn=NATIVE_CLEAR_TIMEOUT.bind(globalThisShim)):(tr.setTimeoutFn=globalThisShim.setTimeout.bind(globalThisShim),tr.clearTimeoutFn=globalThisShim.clearTimeout.bind(globalThisShim))}const BASE64_OVERHEAD=1.33;function byteLength(tr){return typeof tr=="string"?utf8Length(tr):Math.ceil((tr.byteLength||tr.size)*BASE64_OVERHEAD)}function utf8Length(tr){let er=0,rr=0;for(let nr=0,ir=tr.length;nr<ir;nr++)er=tr.charCodeAt(nr),er<128?rr+=1:er<2048?rr+=2:er<55296||er>=57344?rr+=3:(nr++,rr+=4);return rr}function encode$2(tr){let er="";for(let rr in tr)tr.hasOwnProperty(rr)&&(er.length&&(er+="&"),er+=encodeURIComponent(rr)+"="+encodeURIComponent(tr[rr]));return er}function decode$1(tr){let er={},rr=tr.split("&");for(let nr=0,ir=rr.length;nr<ir;nr++){let sr=rr[nr].split("=");er[decodeURIComponent(sr[0])]=decodeURIComponent(sr[1])}return er}class TransportError extends Error{constructor(er,rr,nr){super(er),this.description=rr,this.context=nr,this.type="TransportError"}}class Transport extends Emitter{constructor(er){super(),this.writable=!1,installTimerFunctions(this,er),this.opts=er,this.query=er.query,this.socket=er.socket}onError(er,rr,nr){return super.emitReserved("error",new TransportError(er,rr,nr)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(er){this.readyState==="open"&&this.write(er)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(er){const rr=decodePacket(er,this.socket.binaryType);this.onPacket(rr)}onPacket(er){super.emitReserved("packet",er)}onClose(er){this.readyState="closed",super.emitReserved("close",er)}pause(er){}createUri(er,rr={}){return er+"://"+this._hostname()+this._port()+this.opts.path+this._query(rr)}_hostname(){const er=this.opts.hostname;return er.indexOf(":")===-1?er:"["+er+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(er){const rr=encode$2(er);return rr.length?"?"+rr:""}}const alphabet="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),length=64,map={};let seed=0,i$2=0,prev;function encode$1(tr){let er="";do er=alphabet[tr%length]+er,tr=Math.floor(tr/length);while(tr>0);return er}function yeast(){const tr=encode$1(+new Date);return tr!==prev?(seed=0,prev=tr):tr+"."+encode$1(seed++)}for(;i$2<length;i$2++)map[alphabet[i$2]]=i$2;let value=!1;try{value=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch(tr){}const hasCORS=value;function XHR(tr){const er=tr.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!er||hasCORS))return new XMLHttpRequest}catch{}if(!er)try{return new globalThisShim[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}function createCookieJar(){}function empty$1(){}const hasXHR2=function(){return new XHR({xdomain:!1}).responseType!=null}();class Polling extends Transport{constructor(er){if(super(er),this.polling=!1,typeof location<"u"){const nr=location.protocol==="https:";let ir=location.port;ir||(ir=nr?"443":"80"),this.xd=typeof location<"u"&&er.hostname!==location.hostname||ir!==er.port}const rr=er&&er.forceBase64;this.supportsBinary=hasXHR2&&!rr,this.opts.withCredentials&&(this.cookieJar=void 0)}get name(){return"polling"}doOpen(){this.poll()}pause(er){this.readyState="pausing";const rr=()=>{this.readyState="paused",er()};if(this.polling||!this.writable){let nr=0;this.polling&&(nr++,this.once("pollComplete",function(){--nr||rr()})),this.writable||(nr++,this.once("drain",function(){--nr||rr()}))}else rr()}poll(){this.polling=!0,this.doPoll(),this.emitReserved("poll")}onData(er){const rr=nr=>{if(this.readyState==="opening"&&nr.type==="open"&&this.onOpen(),nr.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(nr)};decodePayload(er,this.socket.binaryType).forEach(rr),this.readyState!=="closed"&&(this.polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this.poll())}doClose(){const er=()=>{this.write([{type:"close"}])};this.readyState==="open"?er():this.once("open",er)}write(er){this.writable=!1,encodePayload(er,rr=>{this.doWrite(rr,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const er=this.opts.secure?"https":"http",rr=this.query||{};return this.opts.timestampRequests!==!1&&(rr[this.opts.timestampParam]=yeast()),!this.supportsBinary&&!rr.sid&&(rr.b64=1),this.createUri(er,rr)}request(er={}){return Object.assign(er,{xd:this.xd,cookieJar:this.cookieJar},this.opts),new Request$1(this.uri(),er)}doWrite(er,rr){const nr=this.request({method:"POST",data:er});nr.on("success",rr),nr.on("error",(ir,sr)=>{this.onError("xhr post error",ir,sr)})}doPoll(){const er=this.request();er.on("data",this.onData.bind(this)),er.on("error",(rr,nr)=>{this.onError("xhr poll error",rr,nr)}),this.pollXhr=er}}let Request$1=class r0 extends Emitter{constructor(er,rr){super(),installTimerFunctions(this,rr),this.opts=rr,this.method=rr.method||"GET",this.uri=er,this.data=rr.data!==void 0?rr.data:null,this.create()}create(){var er;const rr=pick(this.opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");rr.xdomain=!!this.opts.xd;const nr=this.xhr=new XHR(rr);try{nr.open(this.method,this.uri,!0);try{if(this.opts.extraHeaders){nr.setDisableHeaderCheck&&nr.setDisableHeaderCheck(!0);for(let ir in this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(ir)&&nr.setRequestHeader(ir,this.opts.extraHeaders[ir])}}catch{}if(this.method==="POST")try{nr.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{nr.setRequestHeader("Accept","*/*")}catch{}(er=this.opts.cookieJar)===null||er===void 0||er.addCookies(nr),"withCredentials"in nr&&(nr.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(nr.timeout=this.opts.requestTimeout),nr.onreadystatechange=()=>{var ir;nr.readyState===3&&((ir=this.opts.cookieJar)===null||ir===void 0||ir.parseCookies(nr)),nr.readyState===4&&(nr.status===200||nr.status===1223?this.onLoad():this.setTimeoutFn(()=>{this.onError(typeof nr.status=="number"?nr.status:0)},0))},nr.send(this.data)}catch(ir){this.setTimeoutFn(()=>{this.onError(ir)},0);return}typeof document<"u"&&(this.index=r0.requestsCount++,r0.requests[this.index]=this)}onError(er){this.emitReserved("error",er,this.xhr),this.cleanup(!0)}cleanup(er){if(!(typeof this.xhr>"u"||this.xhr===null)){if(this.xhr.onreadystatechange=empty$1,er)try{this.xhr.abort()}catch{}typeof document<"u"&&delete r0.requests[this.index],this.xhr=null}}onLoad(){const er=this.xhr.responseText;er!==null&&(this.emitReserved("data",er),this.emitReserved("success"),this.cleanup())}abort(){this.cleanup()}};Request$1.requestsCount=0;Request$1.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",unloadHandler);else if(typeof addEventListener=="function"){const tr="onpagehide"in globalThisShim?"pagehide":"unload";addEventListener(tr,unloadHandler,!1)}}function unloadHandler(){for(let tr in Request$1.requests)Request$1.requests.hasOwnProperty(tr)&&Request$1.requests[tr].abort()}const nextTick=typeof Promise=="function"&&typeof Promise.resolve=="function"?er=>Promise.resolve().then(er):(er,rr)=>rr(er,0),WebSocket$1=globalThisShim.WebSocket||globalThisShim.MozWebSocket,usingBrowserWebSocket=!0,defaultBinaryType="arraybuffer",isReactNative=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class WS extends Transport{constructor(er){super(er),this.supportsBinary=!er.forceBase64}get name(){return"websocket"}doOpen(){if(!this.check())return;const er=this.uri(),rr=this.opts.protocols,nr=isReactNative?{}:pick(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(nr.headers=this.opts.extraHeaders);try{this.ws=usingBrowserWebSocket&&!isReactNative?rr?new WebSocket$1(er,rr):new WebSocket$1(er):new WebSocket$1(er,rr,nr)}catch(ir){return this.emitReserved("error",ir)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=er=>this.onClose({description:"websocket connection closed",context:er}),this.ws.onmessage=er=>this.onData(er.data),this.ws.onerror=er=>this.onError("websocket error",er)}write(er){this.writable=!1;for(let rr=0;rr<er.length;rr++){const nr=er[rr],ir=rr===er.length-1;encodePacket(nr,this.supportsBinary,sr=>{const or={};try{usingBrowserWebSocket&&this.ws.send(sr)}catch{}ir&&nextTick(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.close(),this.ws=null)}uri(){const er=this.opts.secure?"wss":"ws",rr=this.query||{};return this.opts.timestampRequests&&(rr[this.opts.timestampParam]=yeast()),this.supportsBinary||(rr.b64=1),this.createUri(er,rr)}check(){return!!WebSocket$1}}class WT extends Transport{get name(){return"webtransport"}doOpen(){typeof WebTransport=="function"&&(this.transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name]),this.transport.closed.then(()=>{this.onClose()}).catch(er=>{this.onError("webtransport error",er)}),this.transport.ready.then(()=>{this.transport.createBidirectionalStream().then(er=>{const rr=createPacketDecoderStream(Number.MAX_SAFE_INTEGER,this.socket.binaryType),nr=er.readable.pipeThrough(rr).getReader(),ir=createPacketEncoderStream();ir.readable.pipeTo(er.writable),this.writer=ir.writable.getWriter();const sr=()=>{nr.read().then(({done:ar,value:cr})=>{ar||(this.onPacket(cr),sr())}).catch(ar=>{})};sr();const or={type:"open"};this.query.sid&&(or.data=`{"sid":"${this.query.sid}"}`),this.writer.write(or).then(()=>this.onOpen())})}))}write(er){this.writable=!1;for(let rr=0;rr<er.length;rr++){const nr=er[rr],ir=rr===er.length-1;this.writer.write(nr).then(()=>{ir&&nextTick(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var er;(er=this.transport)===null||er===void 0||er.close()}}const transports={websocket:WS,webtransport:WT,polling:Polling},re$6=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,parts=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function parse$f(tr){if(tr.length>2e3)throw"URI too long";const er=tr,rr=tr.indexOf("["),nr=tr.indexOf("]");rr!=-1&&nr!=-1&&(tr=tr.substring(0,rr)+tr.substring(rr,nr).replace(/:/g,";")+tr.substring(nr,tr.length));let ir=re$6.exec(tr||""),sr={},or=14;for(;or--;)sr[parts[or]]=ir[or]||"";return rr!=-1&&nr!=-1&&(sr.source=er,sr.host=sr.host.substring(1,sr.host.length-1).replace(/;/g,":"),sr.authority=sr.authority.replace("[","").replace("]","").replace(/;/g,":"),sr.ipv6uri=!0),sr.pathNames=pathNames(sr,sr.path),sr.queryKey=queryKey(sr,sr.query),sr}function pathNames(tr,er){const rr=/\/{2,9}/g,nr=er.replace(rr,"/").split("/");return(er.slice(0,1)=="/"||er.length===0)&&nr.splice(0,1),er.slice(-1)=="/"&&nr.splice(nr.length-1,1),nr}function queryKey(tr,er){const rr={};return er.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(nr,ir,sr){ir&&(rr[ir]=sr)}),rr}let Socket$1=class mu extends Emitter{constructor(er,rr={}){super(),this.binaryType=defaultBinaryType,this.writeBuffer=[],er&&typeof er=="object"&&(rr=er,er=null),er?(er=parse$f(er),rr.hostname=er.host,rr.secure=er.protocol==="https"||er.protocol==="wss",rr.port=er.port,er.query&&(rr.query=er.query)):rr.host&&(rr.hostname=parse$f(rr.host).host),installTimerFunctions(this,rr),this.secure=rr.secure!=null?rr.secure:typeof location<"u"&&location.protocol==="https:",rr.hostname&&!rr.port&&(rr.port=this.secure?"443":"80"),this.hostname=rr.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=rr.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=rr.transports||["polling","websocket","webtransport"],this.writeBuffer=[],this.prevBufferLen=0,this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},rr),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=decode$1(this.opts.query)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingTimeoutTimer=null,typeof addEventListener=="function"&&(this.opts.closeOnBeforeunload&&(this.beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this.beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this.offlineEventListener=()=>{this.onClose("transport close",{description:"network connection lost"})},addEventListener("offline",this.offlineEventListener,!1))),this.open()}createTransport(er){const rr=Object.assign({},this.opts.query);rr.EIO=protocol$1,rr.transport=er,this.id&&(rr.sid=this.id);const nr=Object.assign({},this.opts,{query:rr,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[er]);return new transports[er](nr)}open(){let er;if(this.opts.rememberUpgrade&&mu.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1)er="websocket";else if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}else er=this.transports[0];this.readyState="opening";try{er=this.createTransport(er)}catch{this.transports.shift(),this.open();return}er.open(),this.setTransport(er)}setTransport(er){this.transport&&this.transport.removeAllListeners(),this.transport=er,er.on("drain",this.onDrain.bind(this)).on("packet",this.onPacket.bind(this)).on("error",this.onError.bind(this)).on("close",rr=>this.onClose("transport close",rr))}probe(er){let rr=this.createTransport(er),nr=!1;mu.priorWebsocketSuccess=!1;const ir=()=>{nr||(rr.send([{type:"ping",data:"probe"}]),rr.once("packet",dr=>{if(!nr)if(dr.type==="pong"&&dr.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",rr),!rr)return;mu.priorWebsocketSuccess=rr.name==="websocket",this.transport.pause(()=>{nr||this.readyState!=="closed"&&(ur(),this.setTransport(rr),rr.send([{type:"upgrade"}]),this.emitReserved("upgrade",rr),rr=null,this.upgrading=!1,this.flush())})}else{const yr=new Error("probe error");yr.transport=rr.name,this.emitReserved("upgradeError",yr)}}))};function sr(){nr||(nr=!0,ur(),rr.close(),rr=null)}const or=dr=>{const yr=new Error("probe error: "+dr);yr.transport=rr.name,sr(),this.emitReserved("upgradeError",yr)};function ar(){or("transport closed")}function cr(){or("socket closed")}function lr(dr){rr&&dr.name!==rr.name&&sr()}const ur=()=>{rr.removeListener("open",ir),rr.removeListener("error",or),rr.removeListener("close",ar),this.off("close",cr),this.off("upgrading",lr)};rr.once("open",ir),rr.once("error",or),rr.once("close",ar),this.once("close",cr),this.once("upgrading",lr),this.upgrades.indexOf("webtransport")!==-1&&er!=="webtransport"?this.setTimeoutFn(()=>{nr||rr.open()},200):rr.open()}onOpen(){if(this.readyState="open",mu.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush(),this.readyState==="open"&&this.opts.upgrade){let er=0;const rr=this.upgrades.length;for(;er<rr;er++)this.probe(this.upgrades[er])}}onPacket(er){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",er),this.emitReserved("heartbeat"),this.resetPingTimeout(),er.type){case"open":this.onHandshake(JSON.parse(er.data));break;case"ping":this.sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong");break;case"error":const rr=new Error("server error");rr.code=er.data,this.onError(rr);break;case"message":this.emitReserved("data",er.data),this.emitReserved("message",er.data);break}}onHandshake(er){this.emitReserved("handshake",er),this.id=er.sid,this.transport.query.sid=er.sid,this.upgrades=this.filterUpgrades(er.upgrades),this.pingInterval=er.pingInterval,this.pingTimeout=er.pingTimeout,this.maxPayload=er.maxPayload,this.onOpen(),this.readyState!=="closed"&&this.resetPingTimeout()}resetPingTimeout(){this.clearTimeoutFn(this.pingTimeoutTimer),this.pingTimeoutTimer=this.setTimeoutFn(()=>{this.onClose("ping timeout")},this.pingInterval+this.pingTimeout),this.opts.autoUnref&&this.pingTimeoutTimer.unref()}onDrain(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const er=this.getWritablePackets();this.transport.send(er),this.prevBufferLen=er.length,this.emitReserved("flush")}}getWritablePackets(){if(!(this.maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let rr=1;for(let nr=0;nr<this.writeBuffer.length;nr++){const ir=this.writeBuffer[nr].data;if(ir&&(rr+=byteLength(ir)),nr>0&&rr>this.maxPayload)return this.writeBuffer.slice(0,nr);rr+=2}return this.writeBuffer}write(er,rr,nr){return this.sendPacket("message",er,rr,nr),this}send(er,rr,nr){return this.sendPacket("message",er,rr,nr),this}sendPacket(er,rr,nr,ir){if(typeof rr=="function"&&(ir=rr,rr=void 0),typeof nr=="function"&&(ir=nr,nr=null),this.readyState==="closing"||this.readyState==="closed")return;nr=nr||{},nr.compress=nr.compress!==!1;const sr={type:er,data:rr,options:nr};this.emitReserved("packetCreate",sr),this.writeBuffer.push(sr),ir&&this.once("flush",ir),this.flush()}close(){const er=()=>{this.onClose("forced close"),this.transport.close()},rr=()=>{this.off("upgrade",rr),this.off("upgradeError",rr),er()},nr=()=>{this.once("upgrade",rr),this.once("upgradeError",rr)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?nr():er()}):this.upgrading?nr():er()),this}onError(er){mu.priorWebsocketSuccess=!1,this.emitReserved("error",er),this.onClose("transport error",er)}onClose(er,rr){(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")&&(this.clearTimeoutFn(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),typeof removeEventListener=="function"&&(removeEventListener("beforeunload",this.beforeunloadEventListener,!1),removeEventListener("offline",this.offlineEventListener,!1)),this.readyState="closed",this.id=null,this.emitReserved("close",er,rr),this.writeBuffer=[],this.prevBufferLen=0)}filterUpgrades(er){const rr=[];let nr=0;const ir=er.length;for(;nr<ir;nr++)~this.transports.indexOf(er[nr])&&rr.push(er[nr]);return rr}};Socket$1.protocol=protocol$1;function url(tr,er="",rr){let nr=tr;rr=rr||typeof location<"u"&&location,tr==null&&(tr=rr.protocol+"//"+rr.host),typeof tr=="string"&&(tr.charAt(0)==="/"&&(tr.charAt(1)==="/"?tr=rr.protocol+tr:tr=rr.host+tr),/^(https?|wss?):\/\//.test(tr)||(typeof rr<"u"?tr=rr.protocol+"//"+tr:tr="https://"+tr),nr=parse$f(tr)),nr.port||(/^(http|ws)$/.test(nr.protocol)?nr.port="80":/^(http|ws)s$/.test(nr.protocol)&&(nr.port="443")),nr.path=nr.path||"/";const sr=nr.host.indexOf(":")!==-1?"["+nr.host+"]":nr.host;return nr.id=nr.protocol+"://"+sr+":"+nr.port+er,nr.href=nr.protocol+"://"+sr+(rr&&rr.port===nr.port?"":":"+nr.port),nr}const withNativeArrayBuffer=typeof ArrayBuffer=="function",isView=tr=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(tr):tr.buffer instanceof ArrayBuffer,toString=Object.prototype.toString,withNativeBlob=typeof Blob=="function"||typeof Blob<"u"&&toString.call(Blob)==="[object BlobConstructor]",withNativeFile=typeof File=="function"||typeof File<"u"&&toString.call(File)==="[object FileConstructor]";function isBinary(tr){return withNativeArrayBuffer&&(tr instanceof ArrayBuffer||isView(tr))||withNativeBlob&&tr instanceof Blob||withNativeFile&&tr instanceof File}function hasBinary(tr,er){if(!tr||typeof tr!="object")return!1;if(Array.isArray(tr)){for(let rr=0,nr=tr.length;rr<nr;rr++)if(hasBinary(tr[rr]))return!0;return!1}if(isBinary(tr))return!0;if(tr.toJSON&&typeof tr.toJSON=="function"&&arguments.length===1)return hasBinary(tr.toJSON(),!0);for(const rr in tr)if(Object.prototype.hasOwnProperty.call(tr,rr)&&hasBinary(tr[rr]))return!0;return!1}function deconstructPacket(tr){const er=[],rr=tr.data,nr=tr;return nr.data=_deconstructPacket(rr,er),nr.attachments=er.length,{packet:nr,buffers:er}}function _deconstructPacket(tr,er){if(!tr)return tr;if(isBinary(tr)){const rr={_placeholder:!0,num:er.length};return er.push(tr),rr}else if(Array.isArray(tr)){const rr=new Array(tr.length);for(let nr=0;nr<tr.length;nr++)rr[nr]=_deconstructPacket(tr[nr],er);return rr}else if(typeof tr=="object"&&!(tr instanceof Date)){const rr={};for(const nr in tr)Object.prototype.hasOwnProperty.call(tr,nr)&&(rr[nr]=_deconstructPacket(tr[nr],er));return rr}return tr}function reconstructPacket(tr,er){return tr.data=_reconstructPacket(tr.data,er),delete tr.attachments,tr}function _reconstructPacket(tr,er){if(!tr)return tr;if(tr&&tr._placeholder===!0){if(typeof tr.num=="number"&&tr.num>=0&&tr.num<er.length)return er[tr.num];throw new Error("illegal attachments")}else if(Array.isArray(tr))for(let rr=0;rr<tr.length;rr++)tr[rr]=_reconstructPacket(tr[rr],er);else if(typeof tr=="object")for(const rr in tr)Object.prototype.hasOwnProperty.call(tr,rr)&&(tr[rr]=_reconstructPacket(tr[rr],er));return tr}const RESERVED_EVENTS$1=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],protocol=5;var PacketType;(function(tr){tr[tr.CONNECT=0]="CONNECT",tr[tr.DISCONNECT=1]="DISCONNECT",tr[tr.EVENT=2]="EVENT",tr[tr.ACK=3]="ACK",tr[tr.CONNECT_ERROR=4]="CONNECT_ERROR",tr[tr.BINARY_EVENT=5]="BINARY_EVENT",tr[tr.BINARY_ACK=6]="BINARY_ACK"})(PacketType||(PacketType={}));class Encoder{constructor(er){this.replacer=er}encode(er){return(er.type===PacketType.EVENT||er.type===PacketType.ACK)&&hasBinary(er)?this.encodeAsBinary({type:er.type===PacketType.EVENT?PacketType.BINARY_EVENT:PacketType.BINARY_ACK,nsp:er.nsp,data:er.data,id:er.id}):[this.encodeAsString(er)]}encodeAsString(er){let rr=""+er.type;return(er.type===PacketType.BINARY_EVENT||er.type===PacketType.BINARY_ACK)&&(rr+=er.attachments+"-"),er.nsp&&er.nsp!=="/"&&(rr+=er.nsp+","),er.id!=null&&(rr+=er.id),er.data!=null&&(rr+=JSON.stringify(er.data,this.replacer)),rr}encodeAsBinary(er){const rr=deconstructPacket(er),nr=this.encodeAsString(rr.packet),ir=rr.buffers;return ir.unshift(nr),ir}}function isObject$2(tr){return Object.prototype.toString.call(tr)==="[object Object]"}class Decoder extends Emitter{constructor(er){super(),this.reviver=er}add(er){let rr;if(typeof er=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");rr=this.decodeString(er);const nr=rr.type===PacketType.BINARY_EVENT;nr||rr.type===PacketType.BINARY_ACK?(rr.type=nr?PacketType.EVENT:PacketType.ACK,this.reconstructor=new BinaryReconstructor(rr),rr.attachments===0&&super.emitReserved("decoded",rr)):super.emitReserved("decoded",rr)}else if(isBinary(er)||er.base64)if(this.reconstructor)rr=this.reconstructor.takeBinaryData(er),rr&&(this.reconstructor=null,super.emitReserved("decoded",rr));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+er)}decodeString(er){let rr=0;const nr={type:Number(er.charAt(0))};if(PacketType[nr.type]===void 0)throw new Error("unknown packet type "+nr.type);if(nr.type===PacketType.BINARY_EVENT||nr.type===PacketType.BINARY_ACK){const sr=rr+1;for(;er.charAt(++rr)!=="-"&&rr!=er.length;);const or=er.substring(sr,rr);if(or!=Number(or)||er.charAt(rr)!=="-")throw new Error("Illegal attachments");nr.attachments=Number(or)}if(er.charAt(rr+1)==="/"){const sr=rr+1;for(;++rr&&!(er.charAt(rr)===","||rr===er.length););nr.nsp=er.substring(sr,rr)}else nr.nsp="/";const ir=er.charAt(rr+1);if(ir!==""&&Number(ir)==ir){const sr=rr+1;for(;++rr;){const or=er.charAt(rr);if(or==null||Number(or)!=or){--rr;break}if(rr===er.length)break}nr.id=Number(er.substring(sr,rr+1))}if(er.charAt(++rr)){const sr=this.tryParse(er.substr(rr));if(Decoder.isPayloadValid(nr.type,sr))nr.data=sr;else throw new Error("invalid payload")}return nr}tryParse(er){try{return JSON.parse(er,this.reviver)}catch{return!1}}static isPayloadValid(er,rr){switch(er){case PacketType.CONNECT:return isObject$2(rr);case PacketType.DISCONNECT:return rr===void 0;case PacketType.CONNECT_ERROR:return typeof rr=="string"||isObject$2(rr);case PacketType.EVENT:case PacketType.BINARY_EVENT:return Array.isArray(rr)&&(typeof rr[0]=="number"||typeof rr[0]=="string"&&RESERVED_EVENTS$1.indexOf(rr[0])===-1);case PacketType.ACK:case PacketType.BINARY_ACK:return Array.isArray(rr)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class BinaryReconstructor{constructor(er){this.packet=er,this.buffers=[],this.reconPack=er}takeBinaryData(er){if(this.buffers.push(er),this.buffers.length===this.reconPack.attachments){const rr=reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),rr}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const parser$1=Object.freeze(Object.defineProperty({__proto__:null,Decoder,Encoder,get PacketType(){return PacketType},protocol},Symbol.toStringTag,{value:"Module"}));function on(tr,er,rr){return tr.on(er,rr),function(){tr.off(er,rr)}}const RESERVED_EVENTS=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class Socket extends Emitter{constructor(er,rr,nr){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=er,this.nsp=rr,nr&&nr.auth&&(this.auth=nr.auth),this._opts=Object.assign({},nr),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const er=this.io;this.subs=[on(er,"open",this.onopen.bind(this)),on(er,"packet",this.onpacket.bind(this)),on(er,"error",this.onerror.bind(this)),on(er,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...er){return er.unshift("message"),this.emit.apply(this,er),this}emit(er,...rr){if(RESERVED_EVENTS.hasOwnProperty(er))throw new Error('"'+er.toString()+'" is a reserved event name');if(rr.unshift(er),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(rr),this;const nr={type:PacketType.EVENT,data:rr};if(nr.options={},nr.options.compress=this.flags.compress!==!1,typeof rr[rr.length-1]=="function"){const or=this.ids++,ar=rr.pop();this._registerAckCallback(or,ar),nr.id=or}const ir=this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable;return this.flags.volatile&&(!ir||!this.connected)||(this.connected?(this.notifyOutgoingListeners(nr),this.packet(nr)):this.sendBuffer.push(nr)),this.flags={},this}_registerAckCallback(er,rr){var nr;const ir=(nr=this.flags.timeout)!==null&&nr!==void 0?nr:this._opts.ackTimeout;if(ir===void 0){this.acks[er]=rr;return}const sr=this.io.setTimeoutFn(()=>{delete this.acks[er];for(let ar=0;ar<this.sendBuffer.length;ar++)this.sendBuffer[ar].id===er&&this.sendBuffer.splice(ar,1);rr.call(this,new Error("operation has timed out"))},ir),or=(...ar)=>{this.io.clearTimeoutFn(sr),rr.apply(this,ar)};or.withError=!0,this.acks[er]=or}emitWithAck(er,...rr){return new Promise((nr,ir)=>{const sr=(or,ar)=>or?ir(or):nr(ar);sr.withError=!0,rr.push(sr),this.emit(er,...rr)})}_addToQueue(er){let rr;typeof er[er.length-1]=="function"&&(rr=er.pop());const nr={id:this._queueSeq++,tryCount:0,pending:!1,args:er,flags:Object.assign({fromQueue:!0},this.flags)};er.push((ir,...sr)=>nr!==this._queue[0]?void 0:(ir!==null?nr.tryCount>this._opts.retries&&(this._queue.shift(),rr&&rr(ir)):(this._queue.shift(),rr&&rr(null,...sr)),nr.pending=!1,this._drainQueue())),this._queue.push(nr),this._drainQueue()}_drainQueue(er=!1){if(!this.connected||this._queue.length===0)return;const rr=this._queue[0];rr.pending&&!er||(rr.pending=!0,rr.tryCount++,this.flags=rr.flags,this.emit.apply(this,rr.args))}packet(er){er.nsp=this.nsp,this.io._packet(er)}onopen(){typeof this.auth=="function"?this.auth(er=>{this._sendConnectPacket(er)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(er){this.packet({type:PacketType.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},er):er})}onerror(er){this.connected||this.emitReserved("connect_error",er)}onclose(er,rr){this.connected=!1,delete this.id,this.emitReserved("disconnect",er,rr),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(er=>{if(!this.sendBuffer.some(nr=>String(nr.id)===er)){const nr=this.acks[er];delete this.acks[er],nr.withError&&nr.call(this,new Error("socket has been disconnected"))}})}onpacket(er){if(er.nsp===this.nsp)switch(er.type){case PacketType.CONNECT:er.data&&er.data.sid?this.onconnect(er.data.sid,er.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case PacketType.EVENT:case PacketType.BINARY_EVENT:this.onevent(er);break;case PacketType.ACK:case PacketType.BINARY_ACK:this.onack(er);break;case PacketType.DISCONNECT:this.ondisconnect();break;case PacketType.CONNECT_ERROR:this.destroy();const nr=new Error(er.data.message);nr.data=er.data.data,this.emitReserved("connect_error",nr);break}}onevent(er){const rr=er.data||[];er.id!=null&&rr.push(this.ack(er.id)),this.connected?this.emitEvent(rr):this.receiveBuffer.push(Object.freeze(rr))}emitEvent(er){if(this._anyListeners&&this._anyListeners.length){const rr=this._anyListeners.slice();for(const nr of rr)nr.apply(this,er)}super.emit.apply(this,er),this._pid&&er.length&&typeof er[er.length-1]=="string"&&(this._lastOffset=er[er.length-1])}ack(er){const rr=this;let nr=!1;return function(...ir){nr||(nr=!0,rr.packet({type:PacketType.ACK,id:er,data:ir}))}}onack(er){const rr=this.acks[er.id];typeof rr=="function"&&(delete this.acks[er.id],rr.withError&&er.data.unshift(null),rr.apply(this,er.data))}onconnect(er,rr){this.id=er,this.recovered=rr&&this._pid===rr,this._pid=rr,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(er=>this.emitEvent(er)),this.receiveBuffer=[],this.sendBuffer.forEach(er=>{this.notifyOutgoingListeners(er),this.packet(er)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(er=>er()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:PacketType.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(er){return this.flags.compress=er,this}get volatile(){return this.flags.volatile=!0,this}timeout(er){return this.flags.timeout=er,this}onAny(er){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(er),this}prependAny(er){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(er),this}offAny(er){if(!this._anyListeners)return this;if(er){const rr=this._anyListeners;for(let nr=0;nr<rr.length;nr++)if(er===rr[nr])return rr.splice(nr,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(er){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(er),this}prependAnyOutgoing(er){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(er),this}offAnyOutgoing(er){if(!this._anyOutgoingListeners)return this;if(er){const rr=this._anyOutgoingListeners;for(let nr=0;nr<rr.length;nr++)if(er===rr[nr])return rr.splice(nr,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(er){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const rr=this._anyOutgoingListeners.slice();for(const nr of rr)nr.apply(this,er.data)}}}function Backoff(tr){tr=tr||{},this.ms=tr.min||100,this.max=tr.max||1e4,this.factor=tr.factor||2,this.jitter=tr.jitter>0&&tr.jitter<=1?tr.jitter:0,this.attempts=0}Backoff.prototype.duration=function(){var tr=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var er=Math.random(),rr=Math.floor(er*this.jitter*tr);tr=Math.floor(er*10)&1?tr+rr:tr-rr}return Math.min(tr,this.max)|0};Backoff.prototype.reset=function(){this.attempts=0};Backoff.prototype.setMin=function(tr){this.ms=tr};Backoff.prototype.setMax=function(tr){this.max=tr};Backoff.prototype.setJitter=function(tr){this.jitter=tr};class Manager extends Emitter{constructor(er,rr){var nr;super(),this.nsps={},this.subs=[],er&&typeof er=="object"&&(rr=er,er=void 0),rr=rr||{},rr.path=rr.path||"/socket.io",this.opts=rr,installTimerFunctions(this,rr),this.reconnection(rr.reconnection!==!1),this.reconnectionAttempts(rr.reconnectionAttempts||1/0),this.reconnectionDelay(rr.reconnectionDelay||1e3),this.reconnectionDelayMax(rr.reconnectionDelayMax||5e3),this.randomizationFactor((nr=rr.randomizationFactor)!==null&&nr!==void 0?nr:.5),this.backoff=new Backoff({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(rr.timeout==null?2e4:rr.timeout),this._readyState="closed",this.uri=er;const ir=rr.parser||parser$1;this.encoder=new ir.Encoder,this.decoder=new ir.Decoder,this._autoConnect=rr.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(er){return arguments.length?(this._reconnection=!!er,this):this._reconnection}reconnectionAttempts(er){return er===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=er,this)}reconnectionDelay(er){var rr;return er===void 0?this._reconnectionDelay:(this._reconnectionDelay=er,(rr=this.backoff)===null||rr===void 0||rr.setMin(er),this)}randomizationFactor(er){var rr;return er===void 0?this._randomizationFactor:(this._randomizationFactor=er,(rr=this.backoff)===null||rr===void 0||rr.setJitter(er),this)}reconnectionDelayMax(er){var rr;return er===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=er,(rr=this.backoff)===null||rr===void 0||rr.setMax(er),this)}timeout(er){return arguments.length?(this._timeout=er,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(er){if(~this._readyState.indexOf("open"))return this;this.engine=new Socket$1(this.uri,this.opts);const rr=this.engine,nr=this;this._readyState="opening",this.skipReconnect=!1;const ir=on(rr,"open",function(){nr.onopen(),er&&er()}),sr=ar=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",ar),er?er(ar):this.maybeReconnectOnOpen()},or=on(rr,"error",sr);if(this._timeout!==!1){const ar=this._timeout,cr=this.setTimeoutFn(()=>{ir(),sr(new Error("timeout")),rr.close()},ar);this.opts.autoUnref&&cr.unref(),this.subs.push(()=>{this.clearTimeoutFn(cr)})}return this.subs.push(ir),this.subs.push(or),this}connect(er){return this.open(er)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const er=this.engine;this.subs.push(on(er,"ping",this.onping.bind(this)),on(er,"data",this.ondata.bind(this)),on(er,"error",this.onerror.bind(this)),on(er,"close",this.onclose.bind(this)),on(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(er){try{this.decoder.add(er)}catch(rr){this.onclose("parse error",rr)}}ondecoded(er){nextTick(()=>{this.emitReserved("packet",er)},this.setTimeoutFn)}onerror(er){this.emitReserved("error",er)}socket(er,rr){let nr=this.nsps[er];return nr?this._autoConnect&&!nr.active&&nr.connect():(nr=new Socket(this,er,rr),this.nsps[er]=nr),nr}_destroy(er){const rr=Object.keys(this.nsps);for(const nr of rr)if(this.nsps[nr].active)return;this._close()}_packet(er){const rr=this.encoder.encode(er);for(let nr=0;nr<rr.length;nr++)this.engine.write(rr[nr],er.options)}cleanup(){this.subs.forEach(er=>er()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close"),this.engine&&this.engine.close()}disconnect(){return this._close()}onclose(er,rr){this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",er,rr),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const er=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const rr=this.backoff.duration();this._reconnecting=!0;const nr=this.setTimeoutFn(()=>{er.skipReconnect||(this.emitReserved("reconnect_attempt",er.backoff.attempts),!er.skipReconnect&&er.open(ir=>{ir?(er._reconnecting=!1,er.reconnect(),this.emitReserved("reconnect_error",ir)):er.onreconnect()}))},rr);this.opts.autoUnref&&nr.unref(),this.subs.push(()=>{this.clearTimeoutFn(nr)})}}onreconnect(){const er=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",er)}}const cache$1={};function lookup(tr,er){typeof tr=="object"&&(er=tr,tr=void 0),er=er||{};const rr=url(tr,er.path||"/socket.io"),nr=rr.source,ir=rr.id,sr=rr.path,or=cache$1[ir]&&sr in cache$1[ir].nsps,ar=er.forceNew||er["force new connection"]||er.multiplex===!1||or;let cr;return ar?cr=new Manager(nr,er):(cache$1[ir]||(cache$1[ir]=new Manager(nr,er)),cr=cache$1[ir]),rr.query&&!er.query&&(er.query=rr.queryKey),cr.socket(rr.path,er)}Object.assign(lookup,{Manager,Socket,io:lookup,connect:lookup});const ec$1=new elliptic.ec("secp256k1"),browserCrypto=globalThis.crypto||globalThis.msCrypto||{},subtle=browserCrypto.subtle||browserCrypto.webkitSubtle,EC_GROUP_ORDER=Buffer.from("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141","hex"),ZERO32=Buffer.alloc(32,0);function assert$7(tr,er){if(!tr)throw new Error(er||"Assertion failed")}function isScalar(tr){return Buffer.isBuffer(tr)&&tr.length===32}function isValidPrivateKey(tr){return isScalar(tr)?tr.compare(ZERO32)>0&&tr.compare(EC_GROUP_ORDER)<0:!1}function equalConstTime(tr,er){if(tr.length!==er.length)return!1;let rr=0;for(let nr=0;nr<tr.length;nr++)rr|=tr[nr]^er[nr];return rr===0}function randomBytes(tr){const er=new Uint8Array(tr);return typeof browserCrypto.getRandomValues>"u"?Buffer.from(nodeCrypto.randomBytes(tr)):(browserCrypto.getRandomValues(er),Buffer.from(er))}async function sha512$1(tr){if(subtle){const nr=await subtle.digest("SHA-512",tr);return new Uint8Array(nr)}const rr=nodeCrypto.createHash("sha512").update(tr).digest();return new Uint8Array(rr)}function getAes(tr){return async function(er,rr,nr){if(subtle){const ir={name:"AES-CBC"},sr=await subtle.importKey("raw",rr,ir,!1,[tr]),or={name:"AES-CBC",iv:er},ar=await subtle[tr](or,sr,nr);return Buffer.from(new Uint8Array(ar))}else if(tr==="encrypt"){const ir=nodeCrypto.createCipheriv("aes-256-cbc",rr,er),sr=ir.update(nr),or=ir.final();return Buffer.concat([sr,or])}else if(tr==="decrypt"){const ir=nodeCrypto.createDecipheriv("aes-256-cbc",rr,er),sr=ir.update(nr),or=ir.final();return Buffer.concat([sr,or])}throw new Error(`Unsupported operation: ${tr}`)}}const aesCbcEncrypt=getAes("encrypt"),aesCbcDecrypt=getAes("decrypt");async function hmacSha256Sign(tr,er){if(subtle){const ir={name:"HMAC",hash:{name:"SHA-256"}},sr=await subtle.importKey("raw",new Uint8Array(tr),ir,!1,["sign","verify"]),or=await subtle.sign("HMAC",sr,er);return Buffer.from(new Uint8Array(or))}const rr=nodeCrypto.createHmac("sha256",Buffer.from(tr));return rr.update(er),rr.digest()}async function hmacSha256Verify(tr,er,rr){const nr=await hmacSha256Sign(tr,er);return equalConstTime(nr,rr)}const generatePrivate=function(){let tr=randomBytes(32);for(;!isValidPrivateKey(tr);)tr=randomBytes(32);return tr},getPublic=function(tr){return assert$7(tr.length===32,"Bad private key"),assert$7(isValidPrivateKey(tr),"Bad private key"),Buffer.from(ec$1.keyFromPrivate(tr).getPublic("array"))},sign=async function(tr,er){return assert$7(tr.length===32,"Bad private key"),assert$7(isValidPrivateKey(tr),"Bad private key"),assert$7(er.length>0,"Message should not be empty"),assert$7(er.length<=32,"Message is too long"),Buffer.from(ec$1.sign(er,tr,{canonical:!0}).toDER())},derive=async function(tr,er){assert$7(Buffer.isBuffer(tr),"Bad private key"),assert$7(Buffer.isBuffer(er),"Bad public key"),assert$7(tr.length===32,"Bad private key"),assert$7(isValidPrivateKey(tr),"Bad private key"),assert$7(er.length===65||er.length===33,"Bad public key"),er.length===65&&assert$7(er[0]===4,"Bad public key"),er.length===33&&assert$7(er[0]===2||er[0]===3,"Bad public key");const rr=ec$1.keyFromPrivate(tr),nr=ec$1.keyFromPublic(er),ir=rr.derive(nr.getPublic());return Buffer.from(ir.toArray())},deriveUnpadded=derive,derivePadded=async function(tr,er){assert$7(Buffer.isBuffer(tr),"Bad private key"),assert$7(Buffer.isBuffer(er),"Bad public key"),assert$7(tr.length===32,"Bad private key"),assert$7(isValidPrivateKey(tr),"Bad private key"),assert$7(er.length===65||er.length===33,"Bad public key"),er.length===65&&assert$7(er[0]===4,"Bad public key"),er.length===33&&assert$7(er[0]===2||er[0]===3,"Bad public key");const rr=ec$1.keyFromPrivate(tr),nr=ec$1.keyFromPublic(er),ir=rr.derive(nr.getPublic());return Buffer.from(ir.toString(16,64),"hex")},encrypt$2=async function(tr,er,rr){rr=rr||{};let nr=rr.ephemPrivateKey||randomBytes(32);for(;!isValidPrivateKey(nr);)nr=rr.ephemPrivateKey||randomBytes(32);const ir=getPublic(nr),sr=await deriveUnpadded(nr,tr),or=await sha512$1(sr),ar=rr.iv||randomBytes(16),cr=or.slice(0,32),lr=or.slice(32),dr=await aesCbcEncrypt(ar,Buffer.from(cr),er),yr=Buffer.concat([ar,ir,dr]),mr=await hmacSha256Sign(Buffer.from(lr),yr);return{iv:ar,ephemPublicKey:ir,ciphertext:dr,mac:mr}},decrypt$2=async function(tr,er,rr){const nr=rr??!1,sr=await(nr?derivePadded:deriveUnpadded)(tr,er.ephemPublicKey),or=await sha512$1(sr),ar=or.slice(0,32),cr=or.slice(32),lr=Buffer.concat([er.iv,er.ephemPublicKey,er.ciphertext]),ur=await hmacSha256Verify(Buffer.from(cr),lr,er.mac);if(!ur&&nr===!1)return decrypt$2(tr,er,!0);if(!ur&&nr===!0)throw new Error("bad MAC after trying padded");const dr=await aesCbcDecrypt(er.iv,Buffer.from(ar),er.ciphertext);return Buffer.from(new Uint8Array(dr))};var jsonify={},parse$e,hasRequiredParse;function requireParse(){if(hasRequiredParse)return parse$e;hasRequiredParse=1;var tr,er,rr={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:`
`,r:"\r",t:"	"},nr;function ir(mr){throw{name:"SyntaxError",message:mr,at:tr,text:nr}}function sr(mr){return mr&&mr!==er&&ir("Expected '"+mr+"' instead of '"+er+"'"),er=nr.charAt(tr),tr+=1,er}function or(){var mr,wr="";for(er==="-"&&(wr="-",sr("-"));er>="0"&&er<="9";)wr+=er,sr();if(er===".")for(wr+=".";sr()&&er>="0"&&er<="9";)wr+=er;if(er==="e"||er==="E")for(wr+=er,sr(),(er==="-"||er==="+")&&(wr+=er,sr());er>="0"&&er<="9";)wr+=er,sr();return mr=Number(wr),isFinite(mr)||ir("Bad number"),mr}function ar(){var mr,wr,xr="",Or;if(er==='"')for(;sr();){if(er==='"')return sr(),xr;if(er==="\\")if(sr(),er==="u"){for(Or=0,wr=0;wr<4&&(mr=parseInt(sr(),16),!!isFinite(mr));wr+=1)Or=Or*16+mr;xr+=String.fromCharCode(Or)}else if(typeof rr[er]=="string")xr+=rr[er];else break;else xr+=er}ir("Bad string")}function cr(){for(;er&&er<=" ";)sr()}function lr(){switch(er){case"t":return sr("t"),sr("r"),sr("u"),sr("e"),!0;case"f":return sr("f"),sr("a"),sr("l"),sr("s"),sr("e"),!1;case"n":return sr("n"),sr("u"),sr("l"),sr("l"),null;default:ir("Unexpected '"+er+"'")}}function ur(){var mr=[];if(er==="["){if(sr("["),cr(),er==="]")return sr("]"),mr;for(;er;){if(mr.push(yr()),cr(),er==="]")return sr("]"),mr;sr(","),cr()}}ir("Bad array")}function dr(){var mr,wr={};if(er==="{"){if(sr("{"),cr(),er==="}")return sr("}"),wr;for(;er;){if(mr=ar(),cr(),sr(":"),Object.prototype.hasOwnProperty.call(wr,mr)&&ir('Duplicate key "'+mr+'"'),wr[mr]=yr(),cr(),er==="}")return sr("}"),wr;sr(","),cr()}}ir("Bad object")}function yr(){switch(cr(),er){case"{":return dr();case"[":return ur();case'"':return ar();case"-":return or();default:return er>="0"&&er<="9"?or():lr()}}return parse$e=function(mr,wr){var xr;return nr=mr,tr=0,er=" ",xr=yr(),cr(),er&&ir("Syntax error"),typeof wr=="function"?function Or(Tr,Ar){var Nr,Ur,Dr=Tr[Ar];if(Dr&&typeof Dr=="object")for(Nr in yr)Object.prototype.hasOwnProperty.call(Dr,Nr)&&(Ur=Or(Dr,Nr),typeof Ur>"u"?delete Dr[Nr]:Dr[Nr]=Ur);return wr.call(Tr,Ar,Dr)}({"":xr},""):xr},parse$e}var stringify,hasRequiredStringify;function requireStringify(){if(hasRequiredStringify)return stringify;hasRequiredStringify=1;var tr=/[\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,er,rr,nr={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},ir;function sr(ar){return tr.lastIndex=0,tr.test(ar)?'"'+ar.replace(tr,function(cr){var lr=nr[cr];return typeof lr=="string"?lr:"\\u"+("0000"+cr.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+ar+'"'}function or(ar,cr){var lr,ur,dr,yr,mr=er,wr,xr=cr[ar];switch(xr&&typeof xr=="object"&&typeof xr.toJSON=="function"&&(xr=xr.toJSON(ar)),typeof ir=="function"&&(xr=ir.call(cr,ar,xr)),typeof xr){case"string":return sr(xr);case"number":return isFinite(xr)?String(xr):"null";case"boolean":case"null":return String(xr);case"object":if(!xr)return"null";if(er+=rr,wr=[],Object.prototype.toString.apply(xr)==="[object Array]"){for(yr=xr.length,lr=0;lr<yr;lr+=1)wr[lr]=or(lr,xr)||"null";return dr=wr.length===0?"[]":er?`[
`+er+wr.join(`,
`+er)+`
`+mr+"]":"["+wr.join(",")+"]",er=mr,dr}if(ir&&typeof ir=="object")for(yr=ir.length,lr=0;lr<yr;lr+=1)ur=ir[lr],typeof ur=="string"&&(dr=or(ur,xr),dr&&wr.push(sr(ur)+(er?": ":":")+dr));else for(ur in xr)Object.prototype.hasOwnProperty.call(xr,ur)&&(dr=or(ur,xr),dr&&wr.push(sr(ur)+(er?": ":":")+dr));return dr=wr.length===0?"{}":er?`{
`+er+wr.join(`,
`+er)+`
`+mr+"}":"{"+wr.join(",")+"}",er=mr,dr}}return stringify=function(ar,cr,lr){var ur;if(er="",rr="",typeof lr=="number")for(ur=0;ur<lr;ur+=1)rr+=" ";else typeof lr=="string"&&(rr=lr);if(ir=cr,cr&&typeof cr!="function"&&(typeof cr!="object"||typeof cr.length!="number"))throw new Error("JSON.stringify");return or("",{"":ar})},stringify}var hasRequiredJsonify;function requireJsonify(){return hasRequiredJsonify||(hasRequiredJsonify=1,jsonify.parse=requireParse(),jsonify.stringify=requireStringify()),jsonify}var toStr$4=Object.prototype.toString,isArguments$1=function tr(er){var rr=toStr$4.call(er),nr=rr==="[object Arguments]";return nr||(nr=rr!=="[object Array]"&&er!==null&&typeof er=="object"&&typeof er.length=="number"&&er.length>=0&&toStr$4.call(er.callee)==="[object Function]"),nr},implementation$7,hasRequiredImplementation$1;function requireImplementation$1(){if(hasRequiredImplementation$1)return implementation$7;hasRequiredImplementation$1=1;var tr;if(!Object.keys){var er=Object.prototype.hasOwnProperty,rr=Object.prototype.toString,nr=isArguments$1,ir=Object.prototype.propertyIsEnumerable,sr=!ir.call({toString:null},"toString"),or=ir.call(function(){},"prototype"),ar=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],cr=function(yr){var mr=yr.constructor;return mr&&mr.prototype===yr},lr={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},ur=function(){if(typeof window>"u")return!1;for(var yr in window)try{if(!lr["$"+yr]&&er.call(window,yr)&&window[yr]!==null&&typeof window[yr]=="object")try{cr(window[yr])}catch{return!0}}catch{return!0}return!1}(),dr=function(yr){if(typeof window>"u"||!ur)return cr(yr);try{return cr(yr)}catch{return!1}};tr=function(mr){var wr=mr!==null&&typeof mr=="object",xr=rr.call(mr)==="[object Function]",Or=nr(mr),Tr=wr&&rr.call(mr)==="[object String]",Ar=[];if(!wr&&!xr&&!Or)throw new TypeError("Object.keys called on a non-object");var Nr=or&&xr;if(Tr&&mr.length>0&&!er.call(mr,0))for(var Ur=0;Ur<mr.length;++Ur)Ar.push(String(Ur));if(Or&&mr.length>0)for(var Dr=0;Dr<mr.length;++Dr)Ar.push(String(Dr));else for(var Hr in mr)!(Nr&&Hr==="prototype")&&er.call(mr,Hr)&&Ar.push(String(Hr));if(sr)for(var zr=dr(mr),Cr=0;Cr<ar.length;++Cr)!(zr&&ar[Cr]==="constructor")&&er.call(mr,ar[Cr])&&Ar.push(ar[Cr]);return Ar}}return implementation$7=tr,implementation$7}var slice=Array.prototype.slice,isArgs=isArguments$1,origKeys=Object.keys,keysShim=origKeys?function tr(er){return origKeys(er)}:requireImplementation$1(),originalKeys=Object.keys;keysShim.shim=function tr(){if(Object.keys){var er=function(){var rr=Object.keys(arguments);return rr&&rr.length===arguments.length}(1,2);er||(Object.keys=function(nr){return isArgs(nr)?originalKeys(slice.call(nr)):originalKeys(nr)})}else Object.keys=keysShim;return Object.keys||keysShim};var objectKeys$1=keysShim,callBind$2={exports:{}},ERROR_MESSAGE="Function.prototype.bind called on incompatible ",toStr$3=Object.prototype.toString,max$1=Math.max,funcType="[object Function]",concatty=function tr(er,rr){for(var nr=[],ir=0;ir<er.length;ir+=1)nr[ir]=er[ir];for(var sr=0;sr<rr.length;sr+=1)nr[sr+er.length]=rr[sr];return nr},slicy=function tr(er,rr){for(var nr=[],ir=rr,sr=0;ir<er.length;ir+=1,sr+=1)nr[sr]=er[ir];return nr},joiny=function(tr,er){for(var rr="",nr=0;nr<tr.length;nr+=1)rr+=tr[nr],nr+1<tr.length&&(rr+=er);return rr},implementation$6=function tr(er){var rr=this;if(typeof rr!="function"||toStr$3.apply(rr)!==funcType)throw new TypeError(ERROR_MESSAGE+rr);for(var nr=slicy(arguments,1),ir,sr=function(){if(this instanceof ir){var ur=rr.apply(this,concatty(nr,arguments));return Object(ur)===ur?ur:this}return rr.apply(er,concatty(nr,arguments))},or=max$1(0,rr.length-nr.length),ar=[],cr=0;cr<or;cr++)ar[cr]="$"+cr;if(ir=Function("binder","return function ("+joiny(ar,",")+"){ return binder.apply(this,arguments); }")(sr),rr.prototype){var lr=function(){};lr.prototype=rr.prototype,ir.prototype=new lr,lr.prototype=null}return ir},implementation$5=implementation$6,functionBind=Function.prototype.bind||implementation$5,esErrors=Error,_eval=EvalError,range$3=RangeError,ref=ReferenceError,syntax=SyntaxError,type$1=TypeError,uri$1=URIError,shams$1=function tr(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var er={},rr=Symbol("test"),nr=Object(rr);if(typeof rr=="string"||Object.prototype.toString.call(rr)!=="[object Symbol]"||Object.prototype.toString.call(nr)!=="[object Symbol]")return!1;var ir=42;er[rr]=ir;for(rr in er)return!1;if(typeof Object.keys=="function"&&Object.keys(er).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(er).length!==0)return!1;var sr=Object.getOwnPropertySymbols(er);if(sr.length!==1||sr[0]!==rr||!Object.prototype.propertyIsEnumerable.call(er,rr))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var or=Object.getOwnPropertyDescriptor(er,rr);if(or.value!==ir||or.enumerable!==!0)return!1}return!0},origSymbol=typeof Symbol<"u"&&Symbol,hasSymbolSham=shams$1,hasSymbols$3=function tr(){return typeof origSymbol!="function"||typeof Symbol!="function"||typeof origSymbol("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:hasSymbolSham()},test={__proto__:null,foo:{}},$Object=Object,hasProto$1=function tr(){return{__proto__:test}.foo===test.foo&&!(test instanceof $Object)},call$1=Function.prototype.call,$hasOwn=Object.prototype.hasOwnProperty,bind$1=functionBind,hasown=bind$1.call(call$1,$hasOwn),undefined$1,$Error=esErrors,$EvalError=_eval,$RangeError=range$3,$ReferenceError=ref,$SyntaxError$1=syntax,$TypeError$2=type$1,$URIError=uri$1,$Function=Function,getEvalledConstructor=function(tr){try{return $Function('"use strict"; return ('+tr+").constructor;")()}catch{}},$gOPD$1=Object.getOwnPropertyDescriptor;if($gOPD$1)try{$gOPD$1({},"")}catch{$gOPD$1=null}var throwTypeError=function(){throw new $TypeError$2},ThrowTypeError=$gOPD$1?function(){try{return arguments.callee,throwTypeError}catch{try{return $gOPD$1(arguments,"callee").get}catch{return throwTypeError}}}():throwTypeError,hasSymbols$2=hasSymbols$3(),hasProto=hasProto$1(),getProto$1=Object.getPrototypeOf||(hasProto?function(tr){return tr.__proto__}:null),needsEval={},TypedArray=typeof Uint8Array>"u"||!getProto$1?undefined$1:getProto$1(Uint8Array),INTRINSICS={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?undefined$1:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?undefined$1:ArrayBuffer,"%ArrayIteratorPrototype%":hasSymbols$2&&getProto$1?getProto$1([][Symbol.iterator]()):undefined$1,"%AsyncFromSyncIteratorPrototype%":undefined$1,"%AsyncFunction%":needsEval,"%AsyncGenerator%":needsEval,"%AsyncGeneratorFunction%":needsEval,"%AsyncIteratorPrototype%":needsEval,"%Atomics%":typeof Atomics>"u"?undefined$1:Atomics,"%BigInt%":typeof BigInt>"u"?undefined$1:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?undefined$1:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?undefined$1:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?undefined$1:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":$Error,"%eval%":eval,"%EvalError%":$EvalError,"%Float32Array%":typeof Float32Array>"u"?undefined$1:Float32Array,"%Float64Array%":typeof Float64Array>"u"?undefined$1:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?undefined$1:FinalizationRegistry,"%Function%":$Function,"%GeneratorFunction%":needsEval,"%Int8Array%":typeof Int8Array>"u"?undefined$1:Int8Array,"%Int16Array%":typeof Int16Array>"u"?undefined$1:Int16Array,"%Int32Array%":typeof Int32Array>"u"?undefined$1:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":hasSymbols$2&&getProto$1?getProto$1(getProto$1([][Symbol.iterator]())):undefined$1,"%JSON%":typeof JSON=="object"?JSON:undefined$1,"%Map%":typeof Map>"u"?undefined$1:Map,"%MapIteratorPrototype%":typeof Map>"u"||!hasSymbols$2||!getProto$1?undefined$1:getProto$1(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?undefined$1:Promise,"%Proxy%":typeof Proxy>"u"?undefined$1:Proxy,"%RangeError%":$RangeError,"%ReferenceError%":$ReferenceError,"%Reflect%":typeof Reflect>"u"?undefined$1:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?undefined$1:Set,"%SetIteratorPrototype%":typeof Set>"u"||!hasSymbols$2||!getProto$1?undefined$1:getProto$1(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?undefined$1:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":hasSymbols$2&&getProto$1?getProto$1(""[Symbol.iterator]()):undefined$1,"%Symbol%":hasSymbols$2?Symbol:undefined$1,"%SyntaxError%":$SyntaxError$1,"%ThrowTypeError%":ThrowTypeError,"%TypedArray%":TypedArray,"%TypeError%":$TypeError$2,"%Uint8Array%":typeof Uint8Array>"u"?undefined$1:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?undefined$1:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?undefined$1:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?undefined$1:Uint32Array,"%URIError%":$URIError,"%WeakMap%":typeof WeakMap>"u"?undefined$1:WeakMap,"%WeakRef%":typeof WeakRef>"u"?undefined$1:WeakRef,"%WeakSet%":typeof WeakSet>"u"?undefined$1:WeakSet};if(getProto$1)try{null.error}catch(tr){var errorProto=getProto$1(getProto$1(tr));INTRINSICS["%Error.prototype%"]=errorProto}var doEval=function tr(er){var rr;if(er==="%AsyncFunction%")rr=getEvalledConstructor("async function () {}");else if(er==="%GeneratorFunction%")rr=getEvalledConstructor("function* () {}");else if(er==="%AsyncGeneratorFunction%")rr=getEvalledConstructor("async function* () {}");else if(er==="%AsyncGenerator%"){var nr=tr("%AsyncGeneratorFunction%");nr&&(rr=nr.prototype)}else if(er==="%AsyncIteratorPrototype%"){var ir=tr("%AsyncGenerator%");ir&&getProto$1&&(rr=getProto$1(ir.prototype))}return INTRINSICS[er]=rr,rr},LEGACY_ALIASES={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},bind=functionBind,hasOwn=hasown,$concat=bind.call(Function.call,Array.prototype.concat),$spliceApply=bind.call(Function.apply,Array.prototype.splice),$replace=bind.call(Function.call,String.prototype.replace),$strSlice=bind.call(Function.call,String.prototype.slice),$exec=bind.call(Function.call,RegExp.prototype.exec),rePropName=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,reEscapeChar=/\\(\\)?/g,stringToPath=function tr(er){var rr=$strSlice(er,0,1),nr=$strSlice(er,-1);if(rr==="%"&&nr!=="%")throw new $SyntaxError$1("invalid intrinsic syntax, expected closing `%`");if(nr==="%"&&rr!=="%")throw new $SyntaxError$1("invalid intrinsic syntax, expected opening `%`");var ir=[];return $replace(er,rePropName,function(sr,or,ar,cr){ir[ir.length]=ar?$replace(cr,reEscapeChar,"$1"):or||sr}),ir},getBaseIntrinsic=function tr(er,rr){var nr=er,ir;if(hasOwn(LEGACY_ALIASES,nr)&&(ir=LEGACY_ALIASES[nr],nr="%"+ir[0]+"%"),hasOwn(INTRINSICS,nr)){var sr=INTRINSICS[nr];if(sr===needsEval&&(sr=doEval(nr)),typeof sr>"u"&&!rr)throw new $TypeError$2("intrinsic "+er+" exists, but is not available. Please file an issue!");return{alias:ir,name:nr,value:sr}}throw new $SyntaxError$1("intrinsic "+er+" does not exist!")},getIntrinsic=function tr(er,rr){if(typeof er!="string"||er.length===0)throw new $TypeError$2("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof rr!="boolean")throw new $TypeError$2('"allowMissing" argument must be a boolean');if($exec(/^%?[^%]*%?$/,er)===null)throw new $SyntaxError$1("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var nr=stringToPath(er),ir=nr.length>0?nr[0]:"",sr=getBaseIntrinsic("%"+ir+"%",rr),or=sr.name,ar=sr.value,cr=!1,lr=sr.alias;lr&&(ir=lr[0],$spliceApply(nr,$concat([0,1],lr)));for(var ur=1,dr=!0;ur<nr.length;ur+=1){var yr=nr[ur],mr=$strSlice(yr,0,1),wr=$strSlice(yr,-1);if((mr==='"'||mr==="'"||mr==="`"||wr==='"'||wr==="'"||wr==="`")&&mr!==wr)throw new $SyntaxError$1("property names with quotes must have matching quotes");if((yr==="constructor"||!dr)&&(cr=!0),ir+="."+yr,or="%"+ir+"%",hasOwn(INTRINSICS,or))ar=INTRINSICS[or];else if(ar!=null){if(!(yr in ar)){if(!rr)throw new $TypeError$2("base intrinsic for "+er+" exists, but the property is not available.");return}if($gOPD$1&&ur+1>=nr.length){var xr=$gOPD$1(ar,yr);dr=!!xr,dr&&"get"in xr&&!("originalValue"in xr.get)?ar=xr.get:ar=ar[yr]}else dr=hasOwn(ar,yr),ar=ar[yr];dr&&!cr&&(INTRINSICS[or]=ar)}}return ar},esDefineProperty,hasRequiredEsDefineProperty;function requireEsDefineProperty(){if(hasRequiredEsDefineProperty)return esDefineProperty;hasRequiredEsDefineProperty=1;var tr=getIntrinsic,er=tr("%Object.defineProperty%",!0)||!1;if(er)try{er({},"a",{value:1})}catch{er=!1}return esDefineProperty=er,esDefineProperty}var GetIntrinsic$2=getIntrinsic,$gOPD=GetIntrinsic$2("%Object.getOwnPropertyDescriptor%",!0);if($gOPD)try{$gOPD([],"length")}catch{$gOPD=null}var gopd$1=$gOPD,$defineProperty$1=requireEsDefineProperty(),$SyntaxError=syntax,$TypeError$1=type$1,gopd=gopd$1,defineDataProperty=function tr(er,rr,nr){if(!er||typeof er!="object"&&typeof er!="function")throw new $TypeError$1("`obj` must be an object or a function`");if(typeof rr!="string"&&typeof rr!="symbol")throw new $TypeError$1("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new $TypeError$1("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new $TypeError$1("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new $TypeError$1("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new $TypeError$1("`loose`, if provided, must be a boolean");var ir=arguments.length>3?arguments[3]:null,sr=arguments.length>4?arguments[4]:null,or=arguments.length>5?arguments[5]:null,ar=arguments.length>6?arguments[6]:!1,cr=!!gopd&&gopd(er,rr);if($defineProperty$1)$defineProperty$1(er,rr,{configurable:or===null&&cr?cr.configurable:!or,enumerable:ir===null&&cr?cr.enumerable:!ir,value:nr,writable:sr===null&&cr?cr.writable:!sr});else if(ar||!ir&&!sr&&!or)er[rr]=nr;else throw new $SyntaxError("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")},$defineProperty=requireEsDefineProperty(),hasPropertyDescriptors=function tr(){return!!$defineProperty};hasPropertyDescriptors.hasArrayLengthDefineBug=function tr(){if(!$defineProperty)return null;try{return $defineProperty([],"length",{value:1}).length!==1}catch{return!0}};var hasPropertyDescriptors_1=hasPropertyDescriptors,GetIntrinsic$1=getIntrinsic,define=defineDataProperty,hasDescriptors=hasPropertyDescriptors_1(),gOPD$1=gopd$1,$TypeError=type$1,$floor=GetIntrinsic$1("%Math.floor%"),setFunctionLength=function tr(er,rr){if(typeof er!="function")throw new $TypeError("`fn` is not a function");if(typeof rr!="number"||rr<0||rr>4294967295||$floor(rr)!==rr)throw new $TypeError("`length` must be a positive 32-bit integer");var nr=arguments.length>2&&!!arguments[2],ir=!0,sr=!0;if("length"in er&&gOPD$1){var or=gOPD$1(er,"length");or&&!or.configurable&&(ir=!1),or&&!or.writable&&(sr=!1)}return(ir||sr||!nr)&&(hasDescriptors?define(er,"length",rr,!0,!0):define(er,"length",rr)),er};(function(tr){var er=functionBind,rr=getIntrinsic,nr=setFunctionLength,ir=type$1,sr=rr("%Function.prototype.apply%"),or=rr("%Function.prototype.call%"),ar=rr("%Reflect.apply%",!0)||er.call(or,sr),cr=requireEsDefineProperty(),lr=rr("%Math.max%");tr.exports=function(yr){if(typeof yr!="function")throw new ir("a function is required");var mr=ar(er,or,arguments);return nr(mr,1+lr(0,yr.length-(arguments.length-1)),!0)};var ur=function(){return ar(er,sr,arguments)};cr?cr(tr.exports,"apply",{value:ur}):tr.exports.apply=ur})(callBind$2);var callBindExports=callBind$2.exports,GetIntrinsic=getIntrinsic,callBind$1=callBindExports,$indexOf$1=callBind$1(GetIntrinsic("String.prototype.indexOf")),callBound$4=function tr(er,rr){var nr=GetIntrinsic(er,!!rr);return typeof nr=="function"&&$indexOf$1(er,".prototype.")>-1?callBind$1(nr):nr};(typeof JSON<"u"?JSON:requireJsonify()).stringify;var callBound$3=callBound$4;callBound$3("Array.prototype.join");callBound$3("Array.prototype.push");var keccak$3={};function commonjsRequire(tr){throw new Error('Could not dynamically require "'+tr+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var utils$4={exports:{}};const require$$0$3=getAugmentedNamespace(_assert$1),require$$1$2=getAugmentedNamespace(utils$6);utils$4.exports;(function(tr,er){var rr=commonjsGlobal&&commonjsGlobal.__importDefault||function(yr){return yr&&yr.__esModule?yr:{default:yr}};Object.defineProperty(er,"__esModule",{value:!0}),er.crypto=er.utf8ToBytes=er.createView=er.concatBytes=er.toHex=er.bytesToHex=er.assertBytes=er.assertBool=void 0,er.bytesToUtf8=cr,er.hexToBytes=lr,er.equalsBytes=ur,er.wrapHash=dr;const nr=rr(require$$0$3),ir=require$$1$2,sr=nr.default.bool;er.assertBool=sr;const or=nr.default.bytes;er.assertBytes=or;var ar=require$$1$2;Object.defineProperty(er,"bytesToHex",{enumerable:!0,get:function(){return ar.bytesToHex}}),Object.defineProperty(er,"toHex",{enumerable:!0,get:function(){return ar.bytesToHex}}),Object.defineProperty(er,"concatBytes",{enumerable:!0,get:function(){return ar.concatBytes}}),Object.defineProperty(er,"createView",{enumerable:!0,get:function(){return ar.createView}}),Object.defineProperty(er,"utf8ToBytes",{enumerable:!0,get:function(){return ar.utf8ToBytes}});function cr(yr){if(!(yr instanceof Uint8Array))throw new TypeError(`bytesToUtf8 expected Uint8Array, got ${typeof yr}`);return new TextDecoder().decode(yr)}function lr(yr){const mr=yr.startsWith("0x")?yr.substring(2):yr;return(0,ir.hexToBytes)(mr)}function ur(yr,mr){if(yr.length!==mr.length)return!1;for(let wr=0;wr<yr.length;wr++)if(yr[wr]!==mr[wr])return!1;return!0}function dr(yr){return mr=>(nr.default.bytes(mr),yr(mr))}er.crypto=(()=>{const yr=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0,mr=typeof commonjsRequire=="function"&&commonjsRequire.bind(tr);return{node:mr&&!yr?mr("crypto"):void 0,web:yr}})()})(utils$4,utils$4.exports);var utilsExports=utils$4.exports;Object.defineProperty(keccak$3,"__esModule",{value:!0});keccak$3.keccak512=keccak$3.keccak384=keccak256$1=keccak$3.keccak256=keccak$3.keccak224=void 0;const sha3_1=sha3,utils_js_1$3=utilsExports;keccak$3.keccak224=(0,utils_js_1$3.wrapHash)(sha3_1.keccak_224);var keccak256$1=keccak$3.keccak256=(()=>{const tr=(0,utils_js_1$3.wrapHash)(sha3_1.keccak_256);return tr.create=sha3_1.keccak_256.create,tr})();keccak$3.keccak384=(0,utils_js_1$3.wrapHash)(sha3_1.keccak_384);keccak$3.keccak512=(0,utils_js_1$3.wrapHash)(sha3_1.keccak_512);function keccak256(tr){return Buffer.from(keccak256$1(tr))}const ec=new elliptic.ec("secp256k1");function encParamsHexToBuf(tr){return{iv:Buffer.from(tr.iv,"hex"),ephemPublicKey:Buffer.from(tr.ephemPublicKey,"hex"),ciphertext:Buffer.from(tr.ciphertext,"hex"),mac:Buffer.from(tr.mac,"hex")}}function encParamsBufToHex(tr){return{iv:Buffer.from(tr.iv).toString("hex"),ephemPublicKey:Buffer.from(tr.ephemPublicKey).toString("hex"),ciphertext:Buffer.from(tr.ciphertext).toString("hex"),mac:Buffer.from(tr.mac).toString("hex")}}async function encryptData(tr,er){const rr=JSON.stringify(er),nr=Buffer.from(rr,"utf-8"),ir=await encrypt$2(getPublic(Buffer.from(tr,"hex")),nr),sr=encParamsBufToHex(ir);return JSON.stringify(sr)}async function decryptData(tr,er){const rr=JSON.parse(er),nr=encParamsHexToBuf(rr),ir=ec.keyFromPrivate(tr),or=(await decrypt$2(Buffer.from(ir.getPrivate().toString("hex",64),"hex"),nr)).toString("utf-8");return JSON.parse(or)}const BROWSER_ALIASES_MAP={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},BROWSER_MAP={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},PLATFORMS_MAP={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},OS_MAP={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},ENGINE_MAP={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"};class Utils{static getFirstMatch(er,rr){const nr=rr.match(er);return nr&&nr.length>0&&nr[1]||""}static getSecondMatch(er,rr){const nr=rr.match(er);return nr&&nr.length>1&&nr[2]||""}static matchAndReturnConst(er,rr,nr){if(er.test(rr))return nr}static getWindowsVersionName(er){switch(er){case"NT":return"NT";case"XP":return"XP";case"NT 5.0":return"2000";case"NT 5.1":return"XP";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}}static getMacOSVersionName(er){const rr=er.split(".").splice(0,2).map(nr=>parseInt(nr,10)||0);if(rr.push(0),rr[0]===10)switch(rr[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}}static getAndroidVersionName(er){const rr=er.split(".").splice(0,2).map(nr=>parseInt(nr,10)||0);if(rr.push(0),!(rr[0]===1&&rr[1]<5)){if(rr[0]===1&&rr[1]<6)return"Cupcake";if(rr[0]===1&&rr[1]>=6)return"Donut";if(rr[0]===2&&rr[1]<2)return"Eclair";if(rr[0]===2&&rr[1]===2)return"Froyo";if(rr[0]===2&&rr[1]>2)return"Gingerbread";if(rr[0]===3)return"Honeycomb";if(rr[0]===4&&rr[1]<1)return"Ice Cream Sandwich";if(rr[0]===4&&rr[1]<4)return"Jelly Bean";if(rr[0]===4&&rr[1]>=4)return"KitKat";if(rr[0]===5)return"Lollipop";if(rr[0]===6)return"Marshmallow";if(rr[0]===7)return"Nougat";if(rr[0]===8)return"Oreo";if(rr[0]===9)return"Pie"}}static getVersionPrecision(er){return er.split(".").length}static compareVersions(er,rr,nr=!1){const ir=Utils.getVersionPrecision(er),sr=Utils.getVersionPrecision(rr);let or=Math.max(ir,sr),ar=0;const cr=Utils.map([er,rr],lr=>{const ur=or-Utils.getVersionPrecision(lr),dr=lr+new Array(ur+1).join(".0");return Utils.map(dr.split("."),yr=>new Array(20-yr.length).join("0")+yr).reverse()});for(nr&&(ar=or-Math.min(ir,sr)),or-=1;or>=ar;){if(cr[0][or]>cr[1][or])return 1;if(cr[0][or]===cr[1][or]){if(or===ar)return 0;or-=1}else if(cr[0][or]<cr[1][or])return-1}}static map(er,rr){const nr=[];let ir;if(Array.prototype.map)return Array.prototype.map.call(er,rr);for(ir=0;ir<er.length;ir+=1)nr.push(rr(er[ir]));return nr}static find(er,rr){let nr,ir;if(Array.prototype.find)return Array.prototype.find.call(er,rr);for(nr=0,ir=er.length;nr<ir;nr+=1){const sr=er[nr];if(rr(sr,nr))return sr}}static assign(er,...rr){const nr=er;let ir,sr;if(Object.assign)return Object.assign(er,...rr);for(ir=0,sr=rr.length;ir<sr;ir+=1){const or=rr[ir];typeof or=="object"&&or!==null&&Object.keys(or).forEach(cr=>{nr[cr]=or[cr]})}return er}static getBrowserAlias(er){return BROWSER_ALIASES_MAP[er]}static getBrowserTypeByAlias(er){return BROWSER_MAP[er]||""}}const commonVersionIdentifier=/version\/(\d+(\.?_?\d+)+)/i,browsersList=[{test:[/googlebot/i],describe(tr){const er={name:"Googlebot"},rr=Utils.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,tr)||Utils.getFirstMatch(commonVersionIdentifier,tr);return rr&&(er.version=rr),er}},{test:[/opera/i],describe(tr){const er={name:"Opera"},rr=Utils.getFirstMatch(commonVersionIdentifier,tr)||Utils.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,tr);return rr&&(er.version=rr),er}},{test:[/opr\/|opios/i],describe(tr){const er={name:"Opera"},rr=Utils.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,tr)||Utils.getFirstMatch(commonVersionIdentifier,tr);return rr&&(er.version=rr),er}},{test:[/SamsungBrowser/i],describe(tr){const er={name:"Samsung Internet for Android"},rr=Utils.getFirstMatch(commonVersionIdentifier,tr)||Utils.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,tr);return rr&&(er.version=rr),er}},{test:[/Whale/i],describe(tr){const er={name:"NAVER Whale Browser"},rr=Utils.getFirstMatch(commonVersionIdentifier,tr)||Utils.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,tr);return rr&&(er.version=rr),er}},{test:[/MZBrowser/i],describe(tr){const er={name:"MZ Browser"},rr=Utils.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,tr)||Utils.getFirstMatch(commonVersionIdentifier,tr);return rr&&(er.version=rr),er}},{test:[/focus/i],describe(tr){const er={name:"Focus"},rr=Utils.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,tr)||Utils.getFirstMatch(commonVersionIdentifier,tr);return rr&&(er.version=rr),er}},{test:[/swing/i],describe(tr){const er={name:"Swing"},rr=Utils.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,tr)||Utils.getFirstMatch(commonVersionIdentifier,tr);return rr&&(er.version=rr),er}},{test:[/coast/i],describe(tr){const er={name:"Opera Coast"},rr=Utils.getFirstMatch(commonVersionIdentifier,tr)||Utils.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,tr);return rr&&(er.version=rr),er}},{test:[/opt\/\d+(?:.?_?\d+)+/i],describe(tr){const er={name:"Opera Touch"},rr=Utils.getFirstMatch(/(?:opt)[\s/](\d+(\.?_?\d+)+)/i,tr)||Utils.getFirstMatch(commonVersionIdentifier,tr);return rr&&(er.version=rr),er}},{test:[/yabrowser/i],describe(tr){const er={name:"Yandex Browser"},rr=Utils.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,tr)||Utils.getFirstMatch(commonVersionIdentifier,tr);return rr&&(er.version=rr),er}},{test:[/ucbrowser/i],describe(tr){const er={name:"UC Browser"},rr=Utils.getFirstMatch(commonVersionIdentifier,tr)||Utils.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,tr);return rr&&(er.version=rr),er}},{test:[/Maxthon|mxios/i],describe(tr){const er={name:"Maxthon"},rr=Utils.getFirstMatch(commonVersionIdentifier,tr)||Utils.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,tr);return rr&&(er.version=rr),er}},{test:[/epiphany/i],describe(tr){const er={name:"Epiphany"},rr=Utils.getFirstMatch(commonVersionIdentifier,tr)||Utils.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,tr);return rr&&(er.version=rr),er}},{test:[/puffin/i],describe(tr){const er={name:"Puffin"},rr=Utils.getFirstMatch(commonVersionIdentifier,tr)||Utils.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,tr);return rr&&(er.version=rr),er}},{test:[/sleipnir/i],describe(tr){const er={name:"Sleipnir"},rr=Utils.getFirstMatch(commonVersionIdentifier,tr)||Utils.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,tr);return rr&&(er.version=rr),er}},{test:[/k-meleon/i],describe(tr){const er={name:"K-Meleon"},rr=Utils.getFirstMatch(commonVersionIdentifier,tr)||Utils.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,tr);return rr&&(er.version=rr),er}},{test:[/micromessenger/i],describe(tr){const er={name:"WeChat"},rr=Utils.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,tr)||Utils.getFirstMatch(commonVersionIdentifier,tr);return rr&&(er.version=rr),er}},{test:[/qqbrowser/i],describe(tr){const er={name:/qqbrowserlite/i.test(tr)?"QQ Browser Lite":"QQ Browser"},rr=Utils.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,tr)||Utils.getFirstMatch(commonVersionIdentifier,tr);return rr&&(er.version=rr),er}},{test:[/msie|trident/i],describe(tr){const er={name:"Internet Explorer"},rr=Utils.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,tr);return rr&&(er.version=rr),er}},{test:[/\sedg\//i],describe(tr){const er={name:"Microsoft Edge"},rr=Utils.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,tr);return rr&&(er.version=rr),er}},{test:[/edg([ea]|ios)/i],describe(tr){const er={name:"Microsoft Edge"},rr=Utils.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,tr);return rr&&(er.version=rr),er}},{test:[/vivaldi/i],describe(tr){const er={name:"Vivaldi"},rr=Utils.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,tr);return rr&&(er.version=rr),er}},{test:[/seamonkey/i],describe(tr){const er={name:"SeaMonkey"},rr=Utils.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,tr);return rr&&(er.version=rr),er}},{test:[/sailfish/i],describe(tr){const er={name:"Sailfish"},rr=Utils.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,tr);return rr&&(er.version=rr),er}},{test:[/silk/i],describe(tr){const er={name:"Amazon Silk"},rr=Utils.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,tr);return rr&&(er.version=rr),er}},{test:[/phantom/i],describe(tr){const er={name:"PhantomJS"},rr=Utils.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,tr);return rr&&(er.version=rr),er}},{test:[/slimerjs/i],describe(tr){const er={name:"SlimerJS"},rr=Utils.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,tr);return rr&&(er.version=rr),er}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe(tr){const er={name:"BlackBerry"},rr=Utils.getFirstMatch(commonVersionIdentifier,tr)||Utils.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,tr);return rr&&(er.version=rr),er}},{test:[/(web|hpw)[o0]s/i],describe(tr){const er={name:"WebOS Browser"},rr=Utils.getFirstMatch(commonVersionIdentifier,tr)||Utils.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,tr);return rr&&(er.version=rr),er}},{test:[/bada/i],describe(tr){const er={name:"Bada"},rr=Utils.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,tr);return rr&&(er.version=rr),er}},{test:[/tizen/i],describe(tr){const er={name:"Tizen"},rr=Utils.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,tr)||Utils.getFirstMatch(commonVersionIdentifier,tr);return rr&&(er.version=rr),er}},{test:[/qupzilla/i],describe(tr){const er={name:"QupZilla"},rr=Utils.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,tr)||Utils.getFirstMatch(commonVersionIdentifier,tr);return rr&&(er.version=rr),er}},{test:[/firefox|iceweasel|fxios/i],describe(tr){const er={name:"Firefox"},rr=Utils.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,tr);return rr&&(er.version=rr),er}},{test:[/electron/i],describe(tr){const er={name:"Electron"},rr=Utils.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,tr);return rr&&(er.version=rr),er}},{test:[/MiuiBrowser/i],describe(tr){const er={name:"Miui"},rr=Utils.getFirstMatch(/(?:MiuiBrowser)[\s/](\d+(\.?_?\d+)+)/i,tr);return rr&&(er.version=rr),er}},{test:[/chromium/i],describe(tr){const er={name:"Chromium"},rr=Utils.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,tr)||Utils.getFirstMatch(commonVersionIdentifier,tr);return rr&&(er.version=rr),er}},{test:[/chrome|crios|crmo/i],describe(tr){const er={name:"Chrome"},rr=Utils.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,tr);return rr&&(er.version=rr),er}},{test:[/GSA/i],describe(tr){const er={name:"Google Search"},rr=Utils.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,tr);return rr&&(er.version=rr),er}},{test(tr){const er=!tr.test(/like android/i),rr=tr.test(/android/i);return er&&rr},describe(tr){const er={name:"Android Browser"},rr=Utils.getFirstMatch(commonVersionIdentifier,tr);return rr&&(er.version=rr),er}},{test:[/playstation 4/i],describe(tr){const er={name:"PlayStation 4"},rr=Utils.getFirstMatch(commonVersionIdentifier,tr);return rr&&(er.version=rr),er}},{test:[/safari|applewebkit/i],describe(tr){const er={name:"Safari"},rr=Utils.getFirstMatch(commonVersionIdentifier,tr);return rr&&(er.version=rr),er}},{test:[/.*/i],describe(tr){const er=/^(.*)\/(.*) /,rr=/^(.*)\/(.*)[ \t]\((.*)/,ir=tr.search("\\(")!==-1?rr:er;return{name:Utils.getFirstMatch(ir,tr),version:Utils.getSecondMatch(ir,tr)}}}],osParsersList=[{test:[/Roku\/DVP/],describe(tr){const er=Utils.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,tr);return{name:OS_MAP.Roku,version:er}}},{test:[/windows phone/i],describe(tr){const er=Utils.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,tr);return{name:OS_MAP.WindowsPhone,version:er}}},{test:[/windows /i],describe(tr){const er=Utils.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,tr),rr=Utils.getWindowsVersionName(er);return{name:OS_MAP.Windows,version:er,versionName:rr}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe(tr){const er={name:OS_MAP.iOS},rr=Utils.getSecondMatch(/(Version\/)(\d[\d.]+)/,tr);return rr&&(er.version=rr),er}},{test:[/macintosh/i],describe(tr){const er=Utils.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,tr).replace(/[_\s]/g,"."),rr=Utils.getMacOSVersionName(er),nr={name:OS_MAP.MacOS,version:er};return rr&&(nr.versionName=rr),nr}},{test:[/(ipod|iphone|ipad)/i],describe(tr){const er=Utils.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,tr).replace(/[_\s]/g,".");return{name:OS_MAP.iOS,version:er}}},{test(tr){const er=!tr.test(/like android/i),rr=tr.test(/android/i);return er&&rr},describe(tr){const er=Utils.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,tr),rr=Utils.getAndroidVersionName(er),nr={name:OS_MAP.Android,version:er};return rr&&(nr.versionName=rr),nr}},{test:[/(web|hpw)[o0]s/i],describe(tr){const er=Utils.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,tr),rr={name:OS_MAP.WebOS};return er&&er.length&&(rr.version=er),rr}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe(tr){const er=Utils.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,tr)||Utils.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,tr)||Utils.getFirstMatch(/\bbb(\d+)/i,tr);return{name:OS_MAP.BlackBerry,version:er}}},{test:[/bada/i],describe(tr){const er=Utils.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,tr);return{name:OS_MAP.Bada,version:er}}},{test:[/tizen/i],describe(tr){const er=Utils.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,tr);return{name:OS_MAP.Tizen,version:er}}},{test:[/linux/i],describe(){return{name:OS_MAP.Linux}}},{test:[/CrOS/],describe(){return{name:OS_MAP.ChromeOS}}},{test:[/PlayStation 4/],describe(tr){const er=Utils.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,tr);return{name:OS_MAP.PlayStation4,version:er}}}],platformParsersList=[{test:[/googlebot/i],describe(){return{type:"bot",vendor:"Google"}}},{test:[/huawei/i],describe(tr){const er=Utils.getFirstMatch(/(can-l01)/i,tr)&&"Nova",rr={type:PLATFORMS_MAP.mobile,vendor:"Huawei"};return er&&(rr.model=er),rr}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe(){return{type:PLATFORMS_MAP.tablet,vendor:"Nexus"}}},{test:[/ipad/i],describe(){return{type:PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe(){return{type:PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/kftt build/i],describe(){return{type:PLATFORMS_MAP.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"}}},{test:[/silk/i],describe(){return{type:PLATFORMS_MAP.tablet,vendor:"Amazon"}}},{test:[/tablet(?! pc)/i],describe(){return{type:PLATFORMS_MAP.tablet}}},{test(tr){const er=tr.test(/ipod|iphone/i),rr=tr.test(/like (ipod|iphone)/i);return er&&!rr},describe(tr){const er=Utils.getFirstMatch(/(ipod|iphone)/i,tr);return{type:PLATFORMS_MAP.mobile,vendor:"Apple",model:er}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe(){return{type:PLATFORMS_MAP.mobile,vendor:"Nexus"}}},{test:[/[^-]mobi/i],describe(){return{type:PLATFORMS_MAP.mobile}}},{test(tr){return tr.getBrowserName(!0)==="blackberry"},describe(){return{type:PLATFORMS_MAP.mobile,vendor:"BlackBerry"}}},{test(tr){return tr.getBrowserName(!0)==="bada"},describe(){return{type:PLATFORMS_MAP.mobile}}},{test(tr){return tr.getBrowserName()==="windows phone"},describe(){return{type:PLATFORMS_MAP.mobile,vendor:"Microsoft"}}},{test(tr){const er=Number(String(tr.getOSVersion()).split(".")[0]);return tr.getOSName(!0)==="android"&&er>=3},describe(){return{type:PLATFORMS_MAP.tablet}}},{test(tr){return tr.getOSName(!0)==="android"},describe(){return{type:PLATFORMS_MAP.mobile}}},{test(tr){return tr.getOSName(!0)==="macos"},describe(){return{type:PLATFORMS_MAP.desktop,vendor:"Apple"}}},{test(tr){return tr.getOSName(!0)==="windows"},describe(){return{type:PLATFORMS_MAP.desktop}}},{test(tr){return tr.getOSName(!0)==="linux"},describe(){return{type:PLATFORMS_MAP.desktop}}},{test(tr){return tr.getOSName(!0)==="playstation 4"},describe(){return{type:PLATFORMS_MAP.tv}}},{test(tr){return tr.getOSName(!0)==="roku"},describe(){return{type:PLATFORMS_MAP.tv}}}],enginesParsersList=[{test(tr){return tr.getBrowserName(!0)==="microsoft edge"},describe(tr){if(/\sedg\//i.test(tr))return{name:ENGINE_MAP.Blink};const rr=Utils.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,tr);return{name:ENGINE_MAP.EdgeHTML,version:rr}}},{test:[/trident/i],describe(tr){const er={name:ENGINE_MAP.Trident},rr=Utils.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,tr);return rr&&(er.version=rr),er}},{test(tr){return tr.test(/presto/i)},describe(tr){const er={name:ENGINE_MAP.Presto},rr=Utils.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,tr);return rr&&(er.version=rr),er}},{test(tr){const er=tr.test(/gecko/i),rr=tr.test(/like gecko/i);return er&&!rr},describe(tr){const er={name:ENGINE_MAP.Gecko},rr=Utils.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,tr);return rr&&(er.version=rr),er}},{test:[/(apple)?webkit\/537\.36/i],describe(){return{name:ENGINE_MAP.Blink}}},{test:[/(apple)?webkit/i],describe(tr){const er={name:ENGINE_MAP.WebKit},rr=Utils.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,tr);return rr&&(er.version=rr),er}}];class Parser{constructor(er,rr=!1){if(er==null||er==="")throw new Error("UserAgent parameter can't be empty");this._ua=er,this.parsedResult={},rr!==!0&&this.parse()}getUA(){return this._ua}test(er){return er.test(this._ua)}parseBrowser(){this.parsedResult.browser={};const er=Utils.find(browsersList,rr=>{if(typeof rr.test=="function")return rr.test(this);if(rr.test instanceof Array)return rr.test.some(nr=>this.test(nr));throw new Error("Browser's test function is not valid")});return er&&(this.parsedResult.browser=er.describe(this.getUA())),this.parsedResult.browser}getBrowser(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()}getBrowserName(er){return er?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""}getBrowserVersion(){return this.getBrowser().version}getOS(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()}parseOS(){this.parsedResult.os={};const er=Utils.find(osParsersList,rr=>{if(typeof rr.test=="function")return rr.test(this);if(rr.test instanceof Array)return rr.test.some(nr=>this.test(nr));throw new Error("Browser's test function is not valid")});return er&&(this.parsedResult.os=er.describe(this.getUA())),this.parsedResult.os}getOSName(er){const{name:rr}=this.getOS();return er?String(rr).toLowerCase()||"":rr||""}getOSVersion(){return this.getOS().version}getPlatform(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()}getPlatformType(er=!1){const{type:rr}=this.getPlatform();return er?String(rr).toLowerCase()||"":rr||""}parsePlatform(){this.parsedResult.platform={};const er=Utils.find(platformParsersList,rr=>{if(typeof rr.test=="function")return rr.test(this);if(rr.test instanceof Array)return rr.test.some(nr=>this.test(nr));throw new Error("Browser's test function is not valid")});return er&&(this.parsedResult.platform=er.describe(this.getUA())),this.parsedResult.platform}getEngine(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()}getEngineName(er){return er?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""}parseEngine(){this.parsedResult.engine={};const er=Utils.find(enginesParsersList,rr=>{if(typeof rr.test=="function")return rr.test(this);if(rr.test instanceof Array)return rr.test.some(nr=>this.test(nr));throw new Error("Browser's test function is not valid")});return er&&(this.parsedResult.engine=er.describe(this.getUA())),this.parsedResult.engine}parse(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this}getResult(){return Utils.assign({},this.parsedResult)}satisfies(er){const rr={};let nr=0;const ir={};let sr=0;if(Object.keys(er).forEach(ar=>{const cr=er[ar];typeof cr=="string"?(ir[ar]=cr,sr+=1):typeof cr=="object"&&(rr[ar]=cr,nr+=1)}),nr>0){const ar=Object.keys(rr),cr=Utils.find(ar,ur=>this.isOS(ur));if(cr){const ur=this.satisfies(rr[cr]);if(ur!==void 0)return ur}const lr=Utils.find(ar,ur=>this.isPlatform(ur));if(lr){const ur=this.satisfies(rr[lr]);if(ur!==void 0)return ur}}if(sr>0){const ar=Object.keys(ir),cr=Utils.find(ar,lr=>this.isBrowser(lr,!0));if(cr!==void 0)return this.compareVersion(ir[cr])}}isBrowser(er,rr=!1){const nr=this.getBrowserName().toLowerCase();let ir=er.toLowerCase();const sr=Utils.getBrowserTypeByAlias(ir);return rr&&sr&&(ir=sr.toLowerCase()),ir===nr}compareVersion(er){let rr=[0],nr=er,ir=!1;const sr=this.getBrowserVersion();if(typeof sr=="string")return er[0]===">"||er[0]==="<"?(nr=er.substr(1),er[1]==="="?(ir=!0,nr=er.substr(2)):rr=[],er[0]===">"?rr.push(1):rr.push(-1)):er[0]==="="?nr=er.substr(1):er[0]==="~"&&(ir=!0,nr=er.substr(1)),rr.indexOf(Utils.compareVersions(sr,nr,ir))>-1}isOS(er){return this.getOSName(!0)===String(er).toLowerCase()}isPlatform(er){return this.getPlatformType(!0)===String(er).toLowerCase()}isEngine(er){return this.getEngineName(!0)===String(er).toLowerCase()}is(er,rr=!1){return this.isBrowser(er,rr)||this.isOS(er)||this.isPlatform(er)}some(er=[]){return er.some(rr=>this.is(rr))}}/*!
 * Bowser - a browser detector
 * https://github.com/lancedikson/bowser
 * MIT License | (c) Dustin Diaz 2012-2015
 * MIT License | (c) Denis Demchenko 2015-2019
 */class Bowser{static getParser(er,rr=!1){if(typeof er!="string")throw new Error("UserAgent should be a string");return new Parser(er,rr)}static parse(er){return new Parser(er).getResult()}static get BROWSER_MAP(){return BROWSER_MAP}static get ENGINE_MAP(){return ENGINE_MAP}static get OS_MAP(){return OS_MAP}static get PLATFORMS_MAP(){return PLATFORMS_MAP}}class BaseController extends SafeEventEmitter{constructor({config:er={},state:rr={}}){super(),_defineProperty(this,"defaultConfig",{}),_defineProperty(this,"defaultState",{}),_defineProperty(this,"disabled",!1),_defineProperty(this,"name","BaseController"),_defineProperty(this,"initialConfig",void 0),_defineProperty(this,"initialState",void 0),_defineProperty(this,"internalConfig",this.defaultConfig),_defineProperty(this,"internalState",this.defaultState),this.initialState=rr,this.initialConfig=er}get config(){return this.internalConfig}get state(){return this.internalState}configure(er,rr=!1,nr=!0){if(nr){this.internalConfig=rr?er:Object.assign(this.internalConfig,er);for(const ir in this.internalConfig)typeof this.internalConfig[ir]<"u"&&(this[ir]=this.internalConfig[ir])}else for(const ir in er)typeof this.internalConfig[ir]<"u"&&(this.internalConfig[ir]=er[ir],this[ir]=er[ir])}update(er,rr=!1){this.internalState=_objectSpread2(rr?{}:_objectSpread2({},this.internalState),er),this.emit("store",this.internalState)}initialize(){return this.internalState=this.defaultState,this.internalConfig=this.defaultConfig,this.configure(this.initialConfig),this.update(this.initialState),this}}const filterNoop=()=>!0,internalEvents=["newListener","removeListener"],externalEventFilter=tr=>!internalEvents.includes(tr);function getRawListeners(tr,er){return typeof tr.rawListeners<"u"?tr.rawListeners(er):tr.listeners(er)}function createEventEmitterProxy(tr,er){let nr={}.eventFilter||filterNoop;if(typeof nr=="string"&&nr==="skipInternal"&&(nr=externalEventFilter),typeof nr!="function")throw new Error("createEventEmitterProxy - Invalid eventFilter");let ir=tr,sr=ar=>{const cr=ir;ir=ar,cr.eventNames().filter(nr).forEach(lr=>{getRawListeners(cr,lr).forEach(ur=>{ar.on(lr,ur)})}),cr.removeAllListeners()};return new Proxy({},{get:(ar,cr)=>cr==="setTarget"?sr:ir[cr],set:(ar,cr,lr)=>cr==="setTarget"?(sr=lr,!0):(ir[cr]=lr,!0)})}const FEATURES_PROVIDER_CHANGE_WINDOW={height:660,width:375},FEATURES_DEFAULT_POPUP_WINDOW={height:700,width:1200},FEATURES_CONFIRM_WINDOW={height:700,width:450},SETUP_COMPLETE="setup_complete",COMMUNICATION_NOTIFICATIONS={IFRAME_STATUS:"iframe_status",CLOSE_WINDOW:"close_window",USER_LOGGED_IN:"user_logged_in",USER_LOGGED_OUT:"user_logged_out"},COMMUNICATION_JRPC_METHODS={LOGOUT:"logout",WALLET_INSTANCE_ID:"wallet_instance_id",USER_INFO:"user_info",SET_PROVIDER:"set_provider",TOPUP:"topup",IFRAME_STATUS:"iframe_status",CLOSED_WINDOW:"closed_window",WINDOW_BLOCKED:"window_blocked",GET_PROVIDER_STATE:"get_provider_state",LOGIN_WITH_PRIVATE_KEY:"login_with_private_key",SHOW_WALLET_CONNECT:"show_wallet_connect",SHOW_CHECKOUT:"show_checkout",SHOW_WALLET_UI:"show_wallet_ui",LOGIN_WITH_SESSION_ID:"login_with_session_id"},PROVIDER_JRPC_METHODS={GET_PROVIDER_STATE:"wallet_get_provider_state"},PROVIDER_NOTIFICATIONS={ACCOUNTS_CHANGED:"wallet_accounts_changed",CHAIN_CHANGED:"wallet_chain_changed",UNLOCK_STATE_CHANGED:"wallet_unlock_state_changed"},CONFIRMATION_STRATEGY={POPUP:"popup",MODAL:"modal",AUTO_APPROVE:"auto-approve",DEFAULT:"default"},authServer="https://authjs.web3auth.io",signChallenge=async(tr,er)=>{const sr={payload:tr,header:{t:er==="solana"?"sip99":"eip191"},network:er==="solana"?"solana":"ethereum"},or=await post(`${authServer}/siww/get`,sr);if(!or.success)throw new Error("Failed to authenticate user, Please reach out to Web3Auth Support team");return or.challenge},verifySignedChallenge=async(tr,er,rr,nr,ir,sr,or,ar,cr)=>{var lr;const dr=_objectSpread2({signature:{s:er,t:tr==="solana"?"sip99":"eip191"},message:rr,issuer:nr,audience:typeof window<"u"&&((lr=window.location)===null||lr===void 0?void 0:lr.hostname)||"com://reactnative",timeout:ir},{}),yr=await post(`${authServer}/siww/verify`,dr,{headers:{client_id:sr,wallet_provider:nr,web3auth_network:or}});if(!yr.success)throw log$3.error("Failed to authenticate user, ,message verification failed",yr.error),new Error("Failed to authenticate user, ,message verification failed");return yr.token},randomId=()=>Math.random().toString(36).slice(2);function padWithZeroes$1(tr,er){if(tr!==""&&!/^[a-f0-9]+$/iu.test(tr))throw new Error(`Expected an unprefixed hex string. Received: ${tr}`);return String.prototype.padStart.call(tr,er,"0")}function concatSig$1(tr,er,rr){const nr=fromSigned(er),ir=fromSigned(rr),sr=bytesToBigInt(tr),or=padWithZeroes$1(Buffer.from(toUnsigned(nr)).toString("hex"),64),ar=padWithZeroes$1(Buffer.from(toUnsigned(ir)).toString("hex"),64),cr=stripHexPrefix$3(bigIntToHex$2(sr));return addHexPrefix$1(or.concat(ar,cr))}const signMessage=async(tr,er)=>{const rr=Buffer.from(tr,"hex"),nr=stripHexPrefix$3(er),ir=ecsign$1(Buffer.from(nr,"hex"),rr);return concatSig$1(Buffer.from(bigIntToBytes(ir.v)),Buffer.from(ir.r),Buffer.from(ir.s))};function getPopupFeatures$1({width:tr,height:er}){const rr=window.screenLeft!==void 0?window.screenLeft:window.screenX,nr=window.screenTop!==void 0?window.screenTop:window.screenY,ir=window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:window.screen.width,sr=window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:window.screen.height,or=1,ar=Math.abs((ir-tr)/2/or+rr),cr=Math.abs((sr-er)/2/or+nr);return`titlebar=0,toolbar=0,status=0,location=0,menubar=0,height=${er/or},width=${tr/or},top=${cr},left=${ar}`}const RETRIABLE_ERRORS=["Gateway timeout","ETIMEDOUT","failed to parse response body","Failed to fetch"];function checkForHttpErrors(tr){switch(tr.status){case 405:throw rpcErrors.methodNotFound();case 418:throw rpcErrors.internal({message:"Request is being rate limited.",data:{cause:tr}});case 503:case 504:throw rpcErrors.internal({message:"Gateway timeout. The request took too long to process.This can happen when querying over too wide a block range."})}}function timeout(tr){return new Promise(er=>{setTimeout(er,tr)})}function parseResponse(tr,er){if(tr.status!==200)throw rpcErrors.internal({message:`Non-200 status code: '${tr.status}'`,data:er});if(er.error)throw rpcErrors.internal({data:er.error});return er.result}function createFetchConfigFromReq({req:tr,rpcTarget:er,originHttpHeaderKey:rr}){const nr=new URL(er),ir={id:tr.id,jsonrpc:tr.jsonrpc,method:tr.method,params:tr.params},sr=tr.origin,or=JSON.stringify(ir),ar={method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:or};return rr&&sr&&(ar.headers[rr]=sr),{fetchUrl:nr.href,fetchParams:ar}}function createFetchMiddleware({rpcTarget:tr,originHttpHeaderKey:er}){return createAsyncMiddleware(async(rr,nr,ir)=>{const{fetchUrl:sr,fetchParams:or}=createFetchConfigFromReq({req:rr,rpcTarget:tr,originHttpHeaderKey:er}),ar=5,cr=1e3;for(let lr=0;lr<ar;lr++){try{const ur=await fetch(sr,or);checkForHttpErrors(ur);const dr=await ur.json(),yr=parseResponse(ur,dr);nr.result=yr;return}catch(ur){const dr=(ur.message||ur).toString();if(!RETRIABLE_ERRORS.some(mr=>dr.includes(mr)))throw ur}await timeout(cr)}})}function createLoggerMiddleware(tr){return function(rr,nr,ir){ir(sr=>{nr.error&&log$3.warn(`Error in RPC response:
`,nr),!rr.isTorusInternal&&(log$3.info(`RPC (${tr.origin}):`,rr,"->",nr),sr())})}}var jsonRpcRandomId=IdIterator;function IdIterator(tr){tr=tr||{};var er=tr.max||Number.MAX_SAFE_INTEGER,rr=typeof tr.start<"u"?tr.start:Math.floor(Math.random()*er);return function(){return rr=rr%er,rr++}}const getCreateRandomId=getDefaultExportFromCjs(jsonRpcRandomId);let BaseProvider$1=class extends BaseController{constructor({config:er,state:rr}){if(super({config:er,state:rr}),_defineProperty(this,"_providerEngineProxy",null),!er.chainConfig)throw WalletInitializationError.invalidProviderConfigError("Please provide chainConfig");if(!er.chainConfig.chainId)throw WalletInitializationError.invalidProviderConfigError("Please provide chainId inside chainConfig");if(!er.chainConfig.rpcTarget)throw WalletInitializationError.invalidProviderConfigError("Please provide rpcTarget inside chainConfig");this.defaultState={chainId:"loading"},this.defaultConfig={chainConfig:er.chainConfig,networks:{[er.chainConfig.chainId]:er.chainConfig}},super.initialize()}get currentChainConfig(){return this.config.chainConfig}get provider(){return this._providerEngineProxy}get chainId(){return this.state.chainId}set provider(er){throw new Error("Method not implemented.")}async request(er){var rr;if(!er||typeof er!="object"||Array.isArray(er))throw rpcErrors.invalidRequest({message:WalletProviderError.invalidRequestArgs().message,data:_objectSpread2(_objectSpread2({},er||{}),{},{cause:WalletProviderError.invalidRequestArgs().message})});const{method:nr,params:ir}=er;if(typeof nr!="string"||nr.length===0)throw rpcErrors.invalidRequest({message:WalletProviderError.invalidRequestMethod().message,data:_objectSpread2(_objectSpread2({},er||{}),{},{cause:WalletProviderError.invalidRequestMethod().message})});if(ir!==void 0&&!Array.isArray(ir)&&(typeof ir!="object"||ir===null))throw rpcErrors.invalidRequest({message:WalletProviderError.invalidRequestParams().message,data:_objectSpread2(_objectSpread2({},er||{}),{},{cause:WalletProviderError.invalidRequestParams().message})});return(rr=this.provider)===null||rr===void 0?void 0:rr.request(er)}sendAsync(er,rr){return rr?this.send(er,rr):this.request(er)}send(er,rr){this.request(er).then(nr=>rr(null,{result:nr})).catch(nr=>rr(nr,null))}addChain(er){if(!er.chainId||!er.rpcTarget)throw rpcErrors.invalidParams("chainId is required");this.configure({networks:_objectSpread2(_objectSpread2({},this.config.networks),{},{[er.chainId]:er})})}getChainConfig(er){var rr;const nr=(rr=this.config.networks)===null||rr===void 0?void 0:rr[er];if(!nr)throw rpcErrors.invalidRequest(`Chain ${er} is not supported, please add chainConfig for it`);return nr}updateProviderEngineProxy(er){this._providerEngineProxy?this._providerEngineProxy.setTarget(er):this._providerEngineProxy=createEventEmitterProxy(er)}getProviderEngineProxy(){return this._providerEngineProxy}};function createChainIdMiddleware$1(tr){return(er,rr,nr,ir)=>er.method==="chainId"?(rr.result=tr,ir()):nr()}function createProviderConfigMiddleware$1(tr){return(er,rr,nr,ir)=>er.method==="provider_config"?(rr.result=tr,ir()):nr()}function createJsonRpcClient$1(tr){const{chainId:er,rpcTarget:rr}=tr,nr=createFetchMiddleware({rpcTarget:rr});return{networkMiddleware:mergeMiddleware([createChainIdMiddleware$1(er),createProviderConfigMiddleware$1(tr),nr]),fetchMiddleware:nr}}var _CommonJRPCProvider;class CommonJRPCProvider extends BaseProvider$1{constructor({config:er,state:rr}){super({config:er,state:rr})}async setupProvider(){const{networkMiddleware:er}=createJsonRpcClient$1(this.config.chainConfig),rr=new JRPCEngine;rr.push(er);const nr=providerFromEngine(rr);this.updateProviderEngineProxy(nr);const ir=this.config.chainConfig.chainId;this.state.chainId!==ir&&(this.emit("chainChanged",ir),this.emit("connect",{chainId:ir})),this.update({chainId:this.config.chainConfig.chainId})}async switchChain(er){if(!this._providerEngineProxy)throw providerErrors.custom({message:"Provider is not initialized",code:4902});const rr=this.getChainConfig(er.chainId);this.update({chainId:"loading"}),this.configure({chainConfig:rr}),await this.setupProvider()}updateProviderEngineProxy(er){this._providerEngineProxy?this._providerEngineProxy.setTarget(er):this._providerEngineProxy=createEventEmitterProxy(er)}getProviderEngineProxy(){return this._providerEngineProxy}lookupNetwork(){throw new Error("Method not implemented.")}}_CommonJRPCProvider=CommonJRPCProvider;_defineProperty(CommonJRPCProvider,"getProviderInstance",async tr=>{const er=new _CommonJRPCProvider({config:{chainConfig:tr.chainConfig}});return await er.setupProvider(),er});var _CommonPrivateKeyProvider;class CommonPrivateKeyProvider extends BaseProvider$1{constructor({config:er,state:rr}){super({config:er,state:rr}),_defineProperty(this,"_providerEngineProxy",null)}get provider(){return this._providerEngineProxy}set provider(er){throw new Error("Method not implemented.")}addChain(er){throw new Error("Method not implemented.")}async setupProvider(er){const rr=this.getPrivKeyMiddleware(er),nr=new JRPCEngine;nr.push(rr);const ir=providerFromEngine(nr);this.updateProviderEngineProxy(ir)}updateProviderEngineProxy(er){this._providerEngineProxy?this._providerEngineProxy.setTarget(er):this._providerEngineProxy=createEventEmitterProxy(er)}async switchChain(er){return Promise.resolve()}getProviderEngineProxy(){return this._providerEngineProxy}async lookupNetwork(){return Promise.resolve("")}getPrivKeyMiddleware(er){const rr={getPrivatekey:async()=>er};return this.createPrivKeyMiddleware(rr)}createPrivKeyMiddleware({getPrivatekey:er}){async function rr(nr,ir){ir.result=await er()}return createScaffoldMiddleware({private_key:createAsyncMiddleware(rr)})}}_CommonPrivateKeyProvider=CommonPrivateKeyProvider;_defineProperty(CommonPrivateKeyProvider,"getProviderInstance",async tr=>{const er=new _CommonPrivateKeyProvider({config:{chainConfig:tr.chainConfig}});return await er.setupProvider(tr.privKey),er});getCreateRandomId();var dist$8={},personalSign$1={},dist$7={},constants$7={},secp256k1={};const require$$0$2=getAugmentedNamespace(secp256k1$2);(function(tr){Object.defineProperty(tr,"__esModule",{value:!0}),tr.secp256k1=void 0;var er=require$$0$2;Object.defineProperty(tr,"secp256k1",{enumerable:!0,get:function(){return er.secp256k1}})})(secp256k1);(function(tr){Object.defineProperty(tr,"__esModule",{value:!0}),tr.MAX_WITHDRAWALS_PER_PAYLOAD=tr.RLP_EMPTY_STRING=tr.KECCAK256_RLP=tr.KECCAK256_RLP_S=tr.KECCAK256_RLP_ARRAY=tr.KECCAK256_RLP_ARRAY_S=tr.KECCAK256_NULL=tr.KECCAK256_NULL_S=tr.TWO_POW256=tr.SECP256K1_ORDER_DIV_2=tr.SECP256K1_ORDER=tr.MAX_INTEGER_BIGINT=tr.MAX_INTEGER=tr.MAX_UINT64=void 0;const er=buffer$1,rr=secp256k1;tr.MAX_UINT64=BigInt("0xffffffffffffffff"),tr.MAX_INTEGER=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),tr.MAX_INTEGER_BIGINT=BigInt("115792089237316195423570985008687907853269984665640564039457584007913129639935"),tr.SECP256K1_ORDER=rr.secp256k1.CURVE.n,tr.SECP256K1_ORDER_DIV_2=rr.secp256k1.CURVE.n/BigInt(2),tr.TWO_POW256=BigInt("0x10000000000000000000000000000000000000000000000000000000000000000"),tr.KECCAK256_NULL_S="c5d2460186f7233c927e7db2dcc703c0e500b653ca82273b7bfad8045d85a470",tr.KECCAK256_NULL=er.Buffer.from(tr.KECCAK256_NULL_S,"hex"),tr.KECCAK256_RLP_ARRAY_S="1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347",tr.KECCAK256_RLP_ARRAY=er.Buffer.from(tr.KECCAK256_RLP_ARRAY_S,"hex"),tr.KECCAK256_RLP_S="56e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421",tr.KECCAK256_RLP=er.Buffer.from(tr.KECCAK256_RLP_S,"hex"),tr.RLP_EMPTY_STRING=er.Buffer.from([128]),tr.MAX_WITHDRAWALS_PER_PAYLOAD=16})(constants$7);var units={};Object.defineProperty(units,"__esModule",{value:!0});units.GWEI_TO_WEI=void 0;units.GWEI_TO_WEI=BigInt(1e9);var account={},dist$6={};Object.defineProperty(dist$6,"__esModule",{value:!0});dist$6.RLP=dist$6.utils=dist$6.decode=dist$6.encode=void 0;function encode(tr){if(Array.isArray(tr)){const rr=[];let nr=0;for(let ir=0;ir<tr.length;ir++){const sr=encode(tr[ir]);rr.push(sr),nr+=sr.length}return concatBytes(encodeLength(nr,192),...rr)}const er=toBytes(tr);return er.length===1&&er[0]<128?er:concatBytes(encodeLength(er.length,128),er)}dist$6.encode=encode;function safeSlice(tr,er,rr){if(rr>tr.length)throw new Error("invalid RLP (safeSlice): end slice of Uint8Array out-of-bounds");return tr.slice(er,rr)}function decodeLength(tr){if(tr[0]===0)throw new Error("invalid RLP: extra zeros");return parseHexByte(bytesToHex(tr))}function encodeLength(tr,er){if(tr<56)return Uint8Array.from([tr+er]);const rr=numberToHex$2(tr),nr=rr.length/2,ir=numberToHex$2(er+55+nr);return Uint8Array.from(hexToBytes$1(ir+rr))}function decode(tr,er=!1){if(typeof tr>"u"||tr===null||tr.length===0)return Uint8Array.from([]);const rr=toBytes(tr),nr=_decode(rr);if(er)return nr;if(nr.remainder.length!==0)throw new Error("invalid RLP: remainder must be zero");return nr.data}dist$6.decode=decode;function _decode(tr){let er,rr,nr,ir,sr;const or=[],ar=tr[0];if(ar<=127)return{data:tr.slice(0,1),remainder:tr.slice(1)};if(ar<=183){if(er=ar-127,ar===128?nr=Uint8Array.from([]):nr=safeSlice(tr,1,er),er===2&&nr[0]<128)throw new Error("invalid RLP encoding: invalid prefix, single byte < 0x80 are not prefixed");return{data:nr,remainder:tr.slice(er)}}else if(ar<=191){if(rr=ar-182,tr.length-1<rr)throw new Error("invalid RLP: not enough bytes for string length");if(er=decodeLength(safeSlice(tr,1,rr)),er<=55)throw new Error("invalid RLP: expected string length to be greater than 55");return nr=safeSlice(tr,rr,er+rr),{data:nr,remainder:tr.slice(er+rr)}}else if(ar<=247){for(er=ar-191,ir=safeSlice(tr,1,er);ir.length;)sr=_decode(ir),or.push(sr.data),ir=sr.remainder;return{data:or,remainder:tr.slice(er)}}else{if(rr=ar-246,er=decodeLength(safeSlice(tr,1,rr)),er<56)throw new Error("invalid RLP: encoded list too short");const cr=rr+er;if(cr>tr.length)throw new Error("invalid RLP: total length is larger than the data");for(ir=safeSlice(tr,rr,cr);ir.length;)sr=_decode(ir),or.push(sr.data),ir=sr.remainder;return{data:or,remainder:tr.slice(cr)}}}const cachedHexes=Array.from({length:256},(tr,er)=>er.toString(16).padStart(2,"0"));function bytesToHex(tr){let er="";for(let rr=0;rr<tr.length;rr++)er+=cachedHexes[tr[rr]];return er}function parseHexByte(tr){const er=Number.parseInt(tr,16);if(Number.isNaN(er))throw new Error("Invalid byte sequence");return er}function hexToBytes$1(tr){if(typeof tr!="string")throw new TypeError("hexToBytes: expected string, got "+typeof tr);if(tr.length%2)throw new Error("hexToBytes: received invalid unpadded hex");const er=new Uint8Array(tr.length/2);for(let rr=0;rr<er.length;rr++){const nr=rr*2;er[rr]=parseHexByte(tr.slice(nr,nr+2))}return er}function concatBytes(...tr){if(tr.length===1)return tr[0];const er=tr.reduce((nr,ir)=>nr+ir.length,0),rr=new Uint8Array(er);for(let nr=0,ir=0;nr<tr.length;nr++){const sr=tr[nr];rr.set(sr,ir),ir+=sr.length}return rr}function utf8ToBytes(tr){return new TextEncoder().encode(tr)}function numberToHex$2(tr){if(tr<0)throw new Error("Invalid integer as argument, must be unsigned!");const er=tr.toString(16);return er.length%2?`0${er}`:er}function padToEven$3(tr){return tr.length%2?`0${tr}`:tr}function isHexPrefixed$1(tr){return tr.length>=2&&tr[0]==="0"&&tr[1]==="x"}function stripHexPrefix$2(tr){return typeof tr!="string"?tr:isHexPrefixed$1(tr)?tr.slice(2):tr}function toBytes(tr){if(tr instanceof Uint8Array)return tr;if(typeof tr=="string")return isHexPrefixed$1(tr)?hexToBytes$1(padToEven$3(stripHexPrefix$2(tr))):utf8ToBytes(tr);if(typeof tr=="number"||typeof tr=="bigint")return tr?hexToBytes$1(numberToHex$2(tr)):Uint8Array.from([]);if(tr==null)return Uint8Array.from([]);throw new Error("toBytes: received unsupported type "+typeof tr)}dist$6.utils={bytesToHex,concatBytes,hexToBytes:hexToBytes$1,utf8ToBytes};dist$6.RLP={encode,decode};var bytes$3={},helpers$5={},internal={};Object.defineProperty(internal,"__esModule",{value:!0});internal.isHexString=internal.getKeys=internal.fromAscii=internal.fromUtf8=internal.toAscii=internal.arrayContainsArray=internal.getBinarySize=internal.padToEven=internal.stripHexPrefix=internal.isHexPrefixed=void 0;function isHexPrefixed(tr){if(typeof tr!="string")throw new Error(`[isHexPrefixed] input must be type 'string', received type ${typeof tr}`);return tr[0]==="0"&&tr[1]==="x"}internal.isHexPrefixed=isHexPrefixed;const stripHexPrefix$1=tr=>{if(typeof tr!="string")throw new Error(`[stripHexPrefix] input must be type 'string', received ${typeof tr}`);return isHexPrefixed(tr)?tr.slice(2):tr};internal.stripHexPrefix=stripHexPrefix$1;function padToEven$2(tr){let er=tr;if(typeof er!="string")throw new Error(`[padToEven] value must be type 'string', received ${typeof er}`);return er.length%2&&(er=`0${er}`),er}internal.padToEven=padToEven$2;function getBinarySize(tr){if(typeof tr!="string")throw new Error(`[getBinarySize] method requires input type 'string', received ${typeof tr}`);return Buffer.byteLength(tr,"utf8")}internal.getBinarySize=getBinarySize;function arrayContainsArray(tr,er,rr){if(Array.isArray(tr)!==!0)throw new Error(`[arrayContainsArray] method requires input 'superset' to be an array, got type '${typeof tr}'`);if(Array.isArray(er)!==!0)throw new Error(`[arrayContainsArray] method requires input 'subset' to be an array, got type '${typeof er}'`);return er[rr===!0?"some":"every"](nr=>tr.indexOf(nr)>=0)}internal.arrayContainsArray=arrayContainsArray;function toAscii(tr){let er="",rr=0;const nr=tr.length;for(tr.substring(0,2)==="0x"&&(rr=2);rr<nr;rr+=2){const ir=parseInt(tr.substr(rr,2),16);er+=String.fromCharCode(ir)}return er}internal.toAscii=toAscii;function fromUtf8(tr){const er=Buffer.from(tr,"utf8");return`0x${padToEven$2(er.toString("hex")).replace(/^0+|0+$/g,"")}`}internal.fromUtf8=fromUtf8;function fromAscii(tr){let er="";for(let rr=0;rr<tr.length;rr++){const ir=tr.charCodeAt(rr).toString(16);er+=ir.length<2?`0${ir}`:ir}return`0x${er}`}internal.fromAscii=fromAscii;function getKeys$1(tr,er,rr){if(!Array.isArray(tr))throw new Error(`[getKeys] method expects input 'params' to be an array, got ${typeof tr}`);if(typeof er!="string")throw new Error(`[getKeys] method expects input 'key' to be type 'string', got ${typeof tr}`);const nr=[];for(let ir=0;ir<tr.length;ir++){let sr=tr[ir][er];if(rr===!0&&!sr)sr="";else if(typeof sr!="string")throw new Error(`invalid abi - expected type 'string', received ${typeof sr}`);nr.push(sr)}return nr}internal.getKeys=getKeys$1;function isHexString$3(tr,er){return!(typeof tr!="string"||!tr.match(/^0x[0-9A-Fa-f]*$/)||typeof er<"u"&&er>0&&tr.length!==2+2*er)}internal.isHexString=isHexString$3;Object.defineProperty(helpers$5,"__esModule",{value:!0});helpers$5.assertIsString=helpers$5.assertIsArray=helpers$5.assertIsBuffer=helpers$5.assertIsHexString=void 0;const internal_1=internal,assertIsHexString=function(tr){if(!(0,internal_1.isHexString)(tr)){const er=`This method only supports 0x-prefixed hex strings but input was: ${tr}`;throw new Error(er)}};helpers$5.assertIsHexString=assertIsHexString;const assertIsBuffer=function(tr){if(!Buffer.isBuffer(tr)){const er=`This method only supports Buffer but input was: ${tr}`;throw new Error(er)}};helpers$5.assertIsBuffer=assertIsBuffer;const assertIsArray=function(tr){if(!Array.isArray(tr)){const er=`This method only supports number arrays but input was: ${tr}`;throw new Error(er)}};helpers$5.assertIsArray=assertIsArray;const assertIsString=function(tr){if(typeof tr!="string"){const er=`This method only supports strings but input was: ${tr}`;throw new Error(er)}};helpers$5.assertIsString=assertIsString;(function(tr){Object.defineProperty(tr,"__esModule",{value:!0}),tr.intToUnpaddedBuffer=tr.bigIntToUnpaddedBuffer=tr.bigIntToHex=tr.bufArrToArr=tr.arrToBufArr=tr.validateNoLeadingZeroes=tr.baToJSON=tr.toUtf8=tr.short=tr.addHexPrefix=tr.toUnsigned=tr.fromSigned=tr.bufferToInt=tr.bigIntToBuffer=tr.bufferToBigInt=tr.bufferToHex=tr.toBuffer=tr.unpadHexString=tr.unpadArray=tr.unpadBuffer=tr.setLengthRight=tr.setLengthLeft=tr.zeros=tr.intToBuffer=tr.intToHex=void 0;const er=helpers$5,rr=internal,nr=function(fr){if(!Number.isSafeInteger(fr)||fr<0)throw new Error(`Received an invalid integer type: ${fr}`);return`0x${fr.toString(16)}`};tr.intToHex=nr;const ir=function(fr){const hr=(0,tr.intToHex)(fr);return Buffer.from((0,rr.padToEven)(hr.slice(2)),"hex")};tr.intToBuffer=ir;const sr=function(fr){return Buffer.allocUnsafe(fr).fill(0)};tr.zeros=sr;const or=function(fr,hr,br){const _r=(0,tr.zeros)(hr);return br?fr.length<hr?(fr.copy(_r),_r):fr.slice(0,hr):fr.length<hr?(fr.copy(_r,hr-fr.length),_r):fr.slice(-hr)},ar=function(fr,hr){return(0,er.assertIsBuffer)(fr),or(fr,hr,!1)};tr.setLengthLeft=ar;const cr=function(fr,hr){return(0,er.assertIsBuffer)(fr),or(fr,hr,!0)};tr.setLengthRight=cr;const lr=function(fr){let hr=fr[0];for(;fr.length>0&&hr.toString()==="0";)fr=fr.slice(1),hr=fr[0];return fr},ur=function(fr){return(0,er.assertIsBuffer)(fr),lr(fr)};tr.unpadBuffer=ur;const dr=function(fr){return(0,er.assertIsArray)(fr),lr(fr)};tr.unpadArray=dr;const yr=function(fr){return(0,er.assertIsHexString)(fr),fr=(0,rr.stripHexPrefix)(fr),"0x"+lr(fr)};tr.unpadHexString=yr;const mr=function(fr){if(fr==null)return Buffer.allocUnsafe(0);if(Buffer.isBuffer(fr)||Array.isArray(fr)||fr instanceof Uint8Array)return Buffer.from(fr);if(typeof fr=="string"){if(!(0,rr.isHexString)(fr))throw new Error(`Cannot convert string to buffer. toBuffer only supports 0x-prefixed hex strings and this string was given: ${fr}`);return Buffer.from((0,rr.padToEven)((0,rr.stripHexPrefix)(fr)),"hex")}if(typeof fr=="number")return(0,tr.intToBuffer)(fr);if(typeof fr=="bigint"){if(fr<BigInt(0))throw new Error(`Cannot convert negative bigint to buffer. Given: ${fr}`);let hr=fr.toString(16);return hr.length%2&&(hr="0"+hr),Buffer.from(hr,"hex")}if(fr.toArray)return Buffer.from(fr.toArray());if(fr.toBuffer)return Buffer.from(fr.toBuffer());throw new Error("invalid type")};tr.toBuffer=mr;const wr=function(fr){return fr=(0,tr.toBuffer)(fr),"0x"+fr.toString("hex")};tr.bufferToHex=wr;function xr(fr){const hr=(0,tr.bufferToHex)(fr);return BigInt(hr==="0x"?0:hr)}tr.bufferToBigInt=xr;function Or(fr){return(0,tr.toBuffer)("0x"+fr.toString(16))}tr.bigIntToBuffer=Or;const Tr=function(fr){const hr=Number(xr(fr));if(!Number.isSafeInteger(hr))throw new Error("Number exceeds 53 bits");return hr};tr.bufferToInt=Tr;const Ar=function(fr){return BigInt.asIntN(256,xr(fr))};tr.fromSigned=Ar;const Nr=function(fr){return Or(BigInt.asUintN(256,fr))};tr.toUnsigned=Nr;const Ur=function(fr){return typeof fr!="string"||(0,rr.isHexPrefixed)(fr)?fr:"0x"+fr};tr.addHexPrefix=Ur;function Dr(fr,hr=50){const br=Buffer.isBuffer(fr)?fr.toString("hex"):fr;return br.length<=hr?br:br.slice(0,hr)+""}tr.short=Dr;const Hr=function(fr){const hr=/^(00)+|(00)+$/g;if(fr=(0,rr.stripHexPrefix)(fr),fr.length%2!==0)throw new Error("Invalid non-even hex string input for toUtf8() provided");return Buffer.from(fr.replace(hr,""),"hex").toString("utf8")};tr.toUtf8=Hr;const zr=function(fr){if(Buffer.isBuffer(fr))return`0x${fr.toString("hex")}`;if(fr instanceof Array){const hr=[];for(let br=0;br<fr.length;br++)hr.push((0,tr.baToJSON)(fr[br]));return hr}};tr.baToJSON=zr;const Cr=function(fr){for(const[hr,br]of Object.entries(fr))if(br!==void 0&&br.length>0&&br[0]===0)throw new Error(`${hr} cannot have leading zeroes, received: ${br.toString("hex")}`)};tr.validateNoLeadingZeroes=Cr;function Mr(fr){return Array.isArray(fr)?fr.map(hr=>Mr(hr)):Buffer.from(fr)}tr.arrToBufArr=Mr;function Pr(fr){return Array.isArray(fr)?fr.map(hr=>Pr(hr)):Uint8Array.from(fr??[])}tr.bufArrToArr=Pr;const Sr=fr=>"0x"+fr.toString(16);tr.bigIntToHex=Sr;function pr(fr){return(0,tr.unpadBuffer)(Or(fr))}tr.bigIntToUnpaddedBuffer=pr;function gr(fr){return(0,tr.unpadBuffer)((0,tr.intToBuffer)(fr))}tr.intToUnpaddedBuffer=gr})(bytes$3);(function(tr){Object.defineProperty(tr,"__esModule",{value:!0}),tr.accountBodyToRLP=tr.accountBodyToSlim=tr.accountBodyFromSlim=tr.isZeroAddress=tr.zeroAddress=tr.importPublic=tr.privateToAddress=tr.privateToPublic=tr.publicToAddress=tr.pubToAddress=tr.isValidPublic=tr.isValidPrivate=tr.generateAddress2=tr.generateAddress=tr.isValidChecksumAddress=tr.toChecksumAddress=tr.isValidAddress=tr.Account=void 0;const er=dist$6,rr=keccak$3,nr=secp256k1,ir=utilsExports,sr=bytes$3,or=constants$7,ar=helpers$5,cr=internal,lr=BigInt(0);class ur{constructor(gr=lr,fr=lr,hr=or.KECCAK256_RLP,br=or.KECCAK256_NULL){this.nonce=gr,this.balance=fr,this.storageRoot=hr,this.codeHash=br,this._validate()}static fromAccountData(gr){const{nonce:fr,balance:hr,storageRoot:br,codeHash:_r}=gr;return new ur(fr!==void 0?(0,sr.bufferToBigInt)((0,sr.toBuffer)(fr)):void 0,hr!==void 0?(0,sr.bufferToBigInt)((0,sr.toBuffer)(hr)):void 0,br!==void 0?(0,sr.toBuffer)(br):void 0,_r!==void 0?(0,sr.toBuffer)(_r):void 0)}static fromRlpSerializedAccount(gr){const fr=(0,sr.arrToBufArr)(er.RLP.decode(Uint8Array.from(gr)));if(!Array.isArray(fr))throw new Error("Invalid serialized account input. Must be array");return this.fromValuesArray(fr)}static fromValuesArray(gr){const[fr,hr,br,_r]=gr;return new ur((0,sr.bufferToBigInt)(fr),(0,sr.bufferToBigInt)(hr),br,_r)}_validate(){if(this.nonce<lr)throw new Error("nonce must be greater than zero");if(this.balance<lr)throw new Error("balance must be greater than zero");if(this.storageRoot.length!==32)throw new Error("storageRoot must have a length of 32");if(this.codeHash.length!==32)throw new Error("codeHash must have a length of 32")}raw(){return[(0,sr.bigIntToUnpaddedBuffer)(this.nonce),(0,sr.bigIntToUnpaddedBuffer)(this.balance),this.storageRoot,this.codeHash]}serialize(){return Buffer.from(er.RLP.encode((0,sr.bufArrToArr)(this.raw())))}isContract(){return!this.codeHash.equals(or.KECCAK256_NULL)}isEmpty(){return this.balance===lr&&this.nonce===lr&&this.codeHash.equals(or.KECCAK256_NULL)}}tr.Account=ur;const dr=function(pr){try{(0,ar.assertIsString)(pr)}catch{return!1}return/^0x[0-9a-fA-F]{40}$/.test(pr)};tr.isValidAddress=dr;const yr=function(pr,gr){(0,ar.assertIsHexString)(pr);const fr=(0,cr.stripHexPrefix)(pr).toLowerCase();let hr="";gr!==void 0&&(hr=(0,sr.bufferToBigInt)((0,sr.toBuffer)(gr)).toString()+"0x");const br=Buffer.from(hr+fr,"utf8"),_r=(0,ir.bytesToHex)((0,rr.keccak256)(br));let $r="0x";for(let Er=0;Er<fr.length;Er++)parseInt(_r[Er],16)>=8?$r+=fr[Er].toUpperCase():$r+=fr[Er];return $r};tr.toChecksumAddress=yr;const mr=function(pr,gr){return(0,tr.isValidAddress)(pr)&&(0,tr.toChecksumAddress)(pr,gr)===pr};tr.isValidChecksumAddress=mr;const wr=function(pr,gr){return(0,ar.assertIsBuffer)(pr),(0,ar.assertIsBuffer)(gr),(0,sr.bufferToBigInt)(gr)===BigInt(0)?Buffer.from((0,rr.keccak256)(er.RLP.encode((0,sr.bufArrToArr)([pr,null])))).slice(-20):Buffer.from((0,rr.keccak256)(er.RLP.encode((0,sr.bufArrToArr)([pr,gr])))).slice(-20)};tr.generateAddress=wr;const xr=function(pr,gr,fr){if((0,ar.assertIsBuffer)(pr),(0,ar.assertIsBuffer)(gr),(0,ar.assertIsBuffer)(fr),pr.length!==20)throw new Error("Expected from to be of length 20");if(gr.length!==32)throw new Error("Expected salt to be of length 32");const hr=(0,rr.keccak256)(Buffer.concat([Buffer.from("ff","hex"),pr,gr,(0,rr.keccak256)(fr)]));return(0,sr.toBuffer)(hr).slice(-20)};tr.generateAddress2=xr;const Or=function(pr){return nr.secp256k1.utils.isValidPrivateKey(pr)};tr.isValidPrivate=Or;const Tr=function(pr,gr=!1){if((0,ar.assertIsBuffer)(pr),pr.length===64)try{return nr.secp256k1.ProjectivePoint.fromHex(Buffer.concat([Buffer.from([4]),pr])),!0}catch{return!1}if(!gr)return!1;try{return nr.secp256k1.ProjectivePoint.fromHex(pr),!0}catch{return!1}};tr.isValidPublic=Tr;const Ar=function(pr,gr=!1){if((0,ar.assertIsBuffer)(pr),gr&&pr.length!==64&&(pr=Buffer.from(nr.secp256k1.ProjectivePoint.fromHex(pr).toRawBytes(!1).slice(1))),pr.length!==64)throw new Error("Expected pubKey to be of length 64");return Buffer.from((0,rr.keccak256)(pr)).slice(-20)};tr.pubToAddress=Ar,tr.publicToAddress=tr.pubToAddress;const Nr=function(pr){return(0,ar.assertIsBuffer)(pr),Buffer.from(nr.secp256k1.ProjectivePoint.fromPrivateKey(pr).toRawBytes(!1).slice(1))};tr.privateToPublic=Nr;const Ur=function(pr){return(0,tr.publicToAddress)((0,tr.privateToPublic)(pr))};tr.privateToAddress=Ur;const Dr=function(pr){return(0,ar.assertIsBuffer)(pr),pr.length!==64&&(pr=Buffer.from(nr.secp256k1.ProjectivePoint.fromHex(pr).toRawBytes(!1).slice(1))),pr};tr.importPublic=Dr;const Hr=function(){const gr=(0,sr.zeros)(20);return(0,sr.bufferToHex)(gr)};tr.zeroAddress=Hr;const zr=function(pr){try{(0,ar.assertIsString)(pr)}catch{return!1}return(0,tr.zeroAddress)()===pr};tr.isZeroAddress=zr;function Cr(pr){const[gr,fr,hr,br]=pr;return[gr,fr,(0,sr.arrToBufArr)(hr).length===0?or.KECCAK256_RLP:hr,(0,sr.arrToBufArr)(br).length===0?or.KECCAK256_NULL:br]}tr.accountBodyFromSlim=Cr;const Mr=new Uint8Array(0);function Pr(pr){const[gr,fr,hr,br]=pr;return[gr,fr,(0,sr.arrToBufArr)(hr).equals(or.KECCAK256_RLP)?Mr:hr,(0,sr.arrToBufArr)(br).equals(or.KECCAK256_NULL)?Mr:br]}tr.accountBodyToSlim=Pr;function Sr(pr,gr=!0){const fr=gr?Cr(pr):pr;return(0,sr.arrToBufArr)(er.RLP.encode(fr))}tr.accountBodyToRLP=Sr})(account);var address$1={};Object.defineProperty(address$1,"__esModule",{value:!0});address$1.Address=void 0;const account_1=account,bytes_1$5=bytes$3;class Address{constructor(er){if(er.length!==20)throw new Error("Invalid address length");this.buf=er}static zero(){return new Address((0,bytes_1$5.zeros)(20))}static fromString(er){if(!(0,account_1.isValidAddress)(er))throw new Error("Invalid address");return new Address((0,bytes_1$5.toBuffer)(er))}static fromPublicKey(er){if(!Buffer.isBuffer(er))throw new Error("Public key should be Buffer");const rr=(0,account_1.pubToAddress)(er);return new Address(rr)}static fromPrivateKey(er){if(!Buffer.isBuffer(er))throw new Error("Private key should be Buffer");const rr=(0,account_1.privateToAddress)(er);return new Address(rr)}static generate(er,rr){if(typeof rr!="bigint")throw new Error("Expected nonce to be a bigint");return new Address((0,account_1.generateAddress)(er.buf,(0,bytes_1$5.bigIntToBuffer)(rr)))}static generate2(er,rr,nr){if(!Buffer.isBuffer(rr))throw new Error("Expected salt to be a Buffer");if(!Buffer.isBuffer(nr))throw new Error("Expected initCode to be a Buffer");return new Address((0,account_1.generateAddress2)(er.buf,rr,nr))}equals(er){return this.buf.equals(er.buf)}isZero(){return this.equals(Address.zero())}isPrecompileOrSystemAddress(){const er=(0,bytes_1$5.bufferToBigInt)(this.buf),rr=BigInt(0),nr=BigInt("0xffff");return er>=rr&&er<=nr}toString(){return"0x"+this.buf.toString("hex")}toBuffer(){return Buffer.from(this.buf)}}address$1.Address=Address;var withdrawal={},types$4={};(function(tr){Object.defineProperty(tr,"__esModule",{value:!0}),tr.toType=tr.TypeOutput=void 0;const er=bytes$3,rr=internal;var nr;(function(sr){sr[sr.Number=0]="Number",sr[sr.BigInt=1]="BigInt",sr[sr.Buffer=2]="Buffer",sr[sr.PrefixedHexString=3]="PrefixedHexString"})(nr=tr.TypeOutput||(tr.TypeOutput={}));function ir(sr,or){if(sr===null)return null;if(sr===void 0)return;if(typeof sr=="string"&&!(0,rr.isHexString)(sr))throw new Error(`A string must be provided with a 0x-prefix, given: ${sr}`);if(typeof sr=="number"&&!Number.isSafeInteger(sr))throw new Error("The provided number is greater than MAX_SAFE_INTEGER (please use an alternative input type)");const ar=(0,er.toBuffer)(sr);switch(or){case nr.Buffer:return ar;case nr.BigInt:return(0,er.bufferToBigInt)(ar);case nr.Number:{const cr=(0,er.bufferToBigInt)(ar);if(cr>BigInt(Number.MAX_SAFE_INTEGER))throw new Error("The provided number is greater than MAX_SAFE_INTEGER (please use an alternative output type)");return Number(cr)}case nr.PrefixedHexString:return(0,er.bufferToHex)(ar);default:throw new Error("unknown outputType")}}tr.toType=ir})(types$4);Object.defineProperty(withdrawal,"__esModule",{value:!0});withdrawal.Withdrawal=void 0;const address_1=address$1,bytes_1$4=bytes$3,types_1=types$4;class Withdrawal{constructor(er,rr,nr,ir){this.index=er,this.validatorIndex=rr,this.address=nr,this.amount=ir}static fromWithdrawalData(er){const{index:rr,validatorIndex:nr,address:ir,amount:sr}=er,or=(0,types_1.toType)(rr,types_1.TypeOutput.BigInt),ar=(0,types_1.toType)(nr,types_1.TypeOutput.BigInt),cr=new address_1.Address((0,types_1.toType)(ir,types_1.TypeOutput.Buffer)),lr=(0,types_1.toType)(sr,types_1.TypeOutput.BigInt);return new Withdrawal(or,ar,cr,lr)}static fromValuesArray(er){if(er.length!==4)throw Error(`Invalid withdrawalArray length expected=4 actual=${er.length}`);const[rr,nr,ir,sr]=er;return Withdrawal.fromWithdrawalData({index:rr,validatorIndex:nr,address:ir,amount:sr})}static toBufferArray(er){const{index:rr,validatorIndex:nr,address:ir,amount:sr}=er,or=(0,types_1.toType)(rr,types_1.TypeOutput.BigInt)===BigInt(0)?Buffer.alloc(0):(0,types_1.toType)(rr,types_1.TypeOutput.Buffer),ar=(0,types_1.toType)(nr,types_1.TypeOutput.BigInt)===BigInt(0)?Buffer.alloc(0):(0,types_1.toType)(nr,types_1.TypeOutput.Buffer);let cr;ir instanceof address_1.Address?cr=ir.buf:cr=(0,types_1.toType)(ir,types_1.TypeOutput.Buffer);const lr=(0,types_1.toType)(sr,types_1.TypeOutput.BigInt)===BigInt(0)?Buffer.alloc(0):(0,types_1.toType)(sr,types_1.TypeOutput.Buffer);return[or,ar,cr,lr]}raw(){return Withdrawal.toBufferArray(this)}toValue(){return{index:this.index,validatorIndex:this.validatorIndex,address:this.address.buf,amount:this.amount}}toJSON(){return{index:(0,bytes_1$4.bigIntToHex)(this.index),validatorIndex:(0,bytes_1$4.bigIntToHex)(this.validatorIndex),address:"0x"+this.address.buf.toString("hex"),amount:(0,bytes_1$4.bigIntToHex)(this.amount)}}}withdrawal.Withdrawal=Withdrawal;var signature={};Object.defineProperty(signature,"__esModule",{value:!0});signature.hashPersonalMessage=signature.isValidSignature=signature.fromRpcSig=signature.toCompactSig=signature.toRpcSig=signature.ecrecover=signature.ecsign=void 0;const keccak_1=keccak$3,secp256k1_1=secp256k1,bytes_1$3=bytes$3,constants_1$7=constants$7,helpers_1=helpers$5;function ecsign(tr,er,rr){const nr=secp256k1_1.secp256k1.sign(tr,er),ir=nr.toCompactRawBytes(),sr=Buffer.from(ir.slice(0,32)),or=Buffer.from(ir.slice(32,64)),ar=rr===void 0?BigInt(nr.recovery+27):BigInt(nr.recovery+35)+BigInt(rr)*BigInt(2);return{r:sr,s:or,v:ar}}signature.ecsign=ecsign;function calculateSigRecovery(tr,er){return tr===BigInt(0)||tr===BigInt(1)?tr:er===void 0?tr-BigInt(27):tr-(er*BigInt(2)+BigInt(35))}function isValidSigRecovery(tr){return tr===BigInt(0)||tr===BigInt(1)}const ecrecover=function(tr,er,rr,nr,ir){const sr=Buffer.concat([(0,bytes_1$3.setLengthLeft)(rr,32),(0,bytes_1$3.setLengthLeft)(nr,32)],64),or=calculateSigRecovery(er,ir);if(!isValidSigRecovery(or))throw new Error("Invalid signature v value");const cr=secp256k1_1.secp256k1.Signature.fromCompact(sr).addRecoveryBit(Number(or)).recoverPublicKey(tr);return Buffer.from(cr.toRawBytes(!1).slice(1))};signature.ecrecover=ecrecover;const toRpcSig=function(tr,er,rr,nr){const ir=calculateSigRecovery(tr,nr);if(!isValidSigRecovery(ir))throw new Error("Invalid signature v value");return(0,bytes_1$3.bufferToHex)(Buffer.concat([(0,bytes_1$3.setLengthLeft)(er,32),(0,bytes_1$3.setLengthLeft)(rr,32),(0,bytes_1$3.toBuffer)(tr)]))};signature.toRpcSig=toRpcSig;const toCompactSig=function(tr,er,rr,nr){const ir=calculateSigRecovery(tr,nr);if(!isValidSigRecovery(ir))throw new Error("Invalid signature v value");let sr=rr;return(tr>BigInt(28)&&tr%BigInt(2)===BigInt(1)||tr===BigInt(1)||tr===BigInt(28))&&(sr=Buffer.from(rr),sr[0]|=128),(0,bytes_1$3.bufferToHex)(Buffer.concat([(0,bytes_1$3.setLengthLeft)(er,32),(0,bytes_1$3.setLengthLeft)(sr,32)]))};signature.toCompactSig=toCompactSig;const fromRpcSig=function(tr){const er=(0,bytes_1$3.toBuffer)(tr);let rr,nr,ir;if(er.length>=65)rr=er.slice(0,32),nr=er.slice(32,64),ir=(0,bytes_1$3.bufferToBigInt)(er.slice(64));else if(er.length===64)rr=er.slice(0,32),nr=er.slice(32,64),ir=BigInt((0,bytes_1$3.bufferToInt)(er.slice(32,33))>>7),nr[0]&=127;else throw new Error("Invalid signature length");return ir<27&&(ir=ir+BigInt(27)),{v:ir,r:rr,s:nr}};signature.fromRpcSig=fromRpcSig;const isValidSignature=function(tr,er,rr,nr=!0,ir){if(er.length!==32||rr.length!==32||!isValidSigRecovery(calculateSigRecovery(tr,ir)))return!1;const sr=(0,bytes_1$3.bufferToBigInt)(er),or=(0,bytes_1$3.bufferToBigInt)(rr);return!(sr===BigInt(0)||sr>=constants_1$7.SECP256K1_ORDER||or===BigInt(0)||or>=constants_1$7.SECP256K1_ORDER||nr&&or>=constants_1$7.SECP256K1_ORDER_DIV_2)};signature.isValidSignature=isValidSignature;const hashPersonalMessage=function(tr){(0,helpers_1.assertIsBuffer)(tr);const er=Buffer.from(`Ethereum Signed Message:
${tr.length}`,"utf-8");return Buffer.from((0,keccak_1.keccak256)(Buffer.concat([er,tr])))};signature.hashPersonalMessage=hashPersonalMessage;var encoding={};(function(tr){Object.defineProperty(tr,"__esModule",{value:!0}),tr.compactBytesToNibbles=tr.bytesToNibbles=tr.nibblesToCompactBytes=tr.nibblesToBytes=tr.hasTerminator=void 0;const er=or=>or.length>0&&or[or.length-1]===16;tr.hasTerminator=er;const rr=(or,ar)=>{for(let cr=0,lr=0;lr<or.length;cr+=1,lr+=2)ar[cr]=or[lr]<<4|or[lr+1]};tr.nibblesToBytes=rr;const nr=or=>{let ar=0;(0,tr.hasTerminator)(or)&&(ar=1,or=or.subarray(0,or.length-1));const cr=new Uint8Array(or.length/2+1);return cr[0]=ar<<5,(or.length&1)===1&&(cr[0]|=16,cr[0]|=or[0],or=or.subarray(1)),(0,tr.nibblesToBytes)(or,cr.subarray(1)),cr};tr.nibblesToCompactBytes=nr;const ir=or=>{const ar=or.length*2+1,cr=new Uint8Array(ar);for(let lr=0;lr<or.length;lr++){const ur=or[lr];cr[lr*2]=ur/16,cr[lr*2+1]=ur%16}return cr[ar-1]=16,cr};tr.bytesToNibbles=ir;const sr=or=>{if(or.length===0)return or;let ar=(0,tr.bytesToNibbles)(or);ar[0]<2&&(ar=ar.subarray(0,ar.length-1));const cr=2-(ar[0]&1);return ar.subarray(cr)};tr.compactBytesToNibbles=sr})(encoding);var asyncEventEmitter={};Object.defineProperty(asyncEventEmitter,"__esModule",{value:!0});asyncEventEmitter.AsyncEventEmitter=void 0;const events_1=eventsExports;async function runInSeries(tr,er,rr){let nr;for await(const ir of er)try{ir.length<2?ir.call(tr,rr):await new Promise((sr,or)=>{ir.call(tr,rr,ar=>{ar?or(ar):sr()})})}catch(sr){nr=sr}if(nr)throw nr}class AsyncEventEmitter extends events_1.EventEmitter{emit(er,...rr){let[nr,ir]=rr;const sr=this;let or=sr._events[er]??[];return ir===void 0&&typeof nr=="function"&&(ir=nr,nr=void 0),(er==="newListener"||er==="removeListener")&&(nr={event:nr,fn:ir},ir=void 0),or=Array.isArray(or)?or:[or],runInSeries(sr,or.slice(),nr).then(ir).catch(ir),sr.listenerCount(er)>0}once(er,rr){const nr=this;let ir;if(typeof rr!="function")throw new TypeError("listener must be a function");return rr.length>=2?ir=function(sr,or){nr.removeListener(er,ir),rr(sr,or)}:ir=function(sr){nr.removeListener(er,ir),rr(sr,ir)},nr.on(er,ir),nr}first(er,rr){let nr=this._events[er]??[];if(typeof rr!="function")throw new TypeError("listener must be a function");return Array.isArray(nr)||(this._events[er]=nr=[nr]),nr.unshift(rr),this}before(er,rr,nr){return this.beforeOrAfter(er,rr,nr)}after(er,rr,nr){return this.beforeOrAfter(er,rr,nr,"after")}beforeOrAfter(er,rr,nr,ir){let sr=this._events[er]??[],or,ar;const cr=ir==="after"?1:0;if(typeof nr!="function")throw new TypeError("listener must be a function");if(typeof rr!="function")throw new TypeError("target must be a function");for(Array.isArray(sr)||(this._events[er]=sr=[sr]),ar=sr.length,or=sr.length;or--;)if(sr[or]===rr){ar=or+cr;break}return sr.splice(ar,0,nr),this}on(er,rr){return super.on(er,rr)}addListener(er,rr){return super.addListener(er,rr)}prependListener(er,rr){return super.prependListener(er,rr)}prependOnceListener(er,rr){return super.prependOnceListener(er,rr)}removeAllListeners(er){return super.removeAllListeners(er)}removeListener(er,rr){return super.removeListener(er,rr)}eventNames(){return super.eventNames()}listeners(er){return super.listeners(er)}listenerCount(er){return super.listenerCount(er)}getMaxListeners(){return super.getMaxListeners()}setMaxListeners(er){return super.setMaxListeners(er)}}asyncEventEmitter.AsyncEventEmitter=AsyncEventEmitter;var lock={};Object.defineProperty(lock,"__esModule",{value:!0});lock.Lock=void 0;class Lock{constructor(){this.permits=1,this.promiseResolverQueue=[]}async acquire(){return this.permits>0?(this.permits-=1,Promise.resolve(!0)):new Promise(er=>this.promiseResolverQueue.push(er))}release(){if(this.permits+=1,this.permits>1&&this.promiseResolverQueue.length>0)console.warn("Lock.permits should never be > 0 when there is someone waiting.");else if(this.permits===1&&this.promiseResolverQueue.length>0){this.permits-=1;const er=this.promiseResolverQueue.shift();er&&er(!0)}}}lock.Lock=Lock;var provider$1={},microFtch={},util$7={},types$3={},hasSymbols$1=shams$1,shams=function tr(){return hasSymbols$1()&&!!Symbol.toStringTag},hasToStringTag$3=shams(),callBound$2=callBound$4,$toString$1=callBound$2("Object.prototype.toString"),isStandardArguments=function tr(er){return hasToStringTag$3&&er&&typeof er=="object"&&Symbol.toStringTag in er?!1:$toString$1(er)==="[object Arguments]"},isLegacyArguments=function tr(er){return isStandardArguments(er)?!0:er!==null&&typeof er=="object"&&typeof er.length=="number"&&er.length>=0&&$toString$1(er)!=="[object Array]"&&$toString$1(er.callee)==="[object Function]"},supportsStandardArguments=function(){return isStandardArguments(arguments)}();isStandardArguments.isLegacyArguments=isLegacyArguments;var isArguments=supportsStandardArguments?isStandardArguments:isLegacyArguments,toStr$2=Object.prototype.toString,fnToStr$1=Function.prototype.toString,isFnRegex=/^\s*(?:function)?\*/,hasToStringTag$2=shams(),getProto=Object.getPrototypeOf,getGeneratorFunc=function(){if(!hasToStringTag$2)return!1;try{return Function("return function*() {}")()}catch{}},GeneratorFunction,isGeneratorFunction=function tr(er){if(typeof er!="function")return!1;if(isFnRegex.test(fnToStr$1.call(er)))return!0;if(!hasToStringTag$2){var rr=toStr$2.call(er);return rr==="[object GeneratorFunction]"}if(!getProto)return!1;if(typeof GeneratorFunction>"u"){var nr=getGeneratorFunc();GeneratorFunction=nr?getProto(nr):!1}return getProto(er)===GeneratorFunction},fnToStr=Function.prototype.toString,reflectApply=typeof Reflect=="object"&&Reflect!==null&&Reflect.apply,badArrayLike,isCallableMarker;if(typeof reflectApply=="function"&&typeof Object.defineProperty=="function")try{badArrayLike=Object.defineProperty({},"length",{get:function(){throw isCallableMarker}}),isCallableMarker={},reflectApply(function(){throw 42},null,badArrayLike)}catch(tr){tr!==isCallableMarker&&(reflectApply=null)}else reflectApply=null;var constructorRegex=/^\s*class\b/,isES6ClassFn=function tr(er){try{var rr=fnToStr.call(er);return constructorRegex.test(rr)}catch{return!1}},tryFunctionObject=function tr(er){try{return isES6ClassFn(er)?!1:(fnToStr.call(er),!0)}catch{return!1}},toStr$1=Object.prototype.toString,objectClass="[object Object]",fnClass="[object Function]",genClass="[object GeneratorFunction]",ddaClass="[object HTMLAllCollection]",ddaClass2="[object HTML document.all class]",ddaClass3="[object HTMLCollection]",hasToStringTag$1=typeof Symbol=="function"&&!!Symbol.toStringTag,isIE68=!(0 in[,]),isDDA=function tr(){return!1};if(typeof document=="object"){var all=document.all;toStr$1.call(all)===toStr$1.call(document.all)&&(isDDA=function(er){if((isIE68||!er)&&(typeof er>"u"||typeof er=="object"))try{var rr=toStr$1.call(er);return(rr===ddaClass||rr===ddaClass2||rr===ddaClass3||rr===objectClass)&&er("")==null}catch{}return!1})}var isCallable$1=reflectApply?function tr(er){if(isDDA(er))return!0;if(!er||typeof er!="function"&&typeof er!="object")return!1;try{reflectApply(er,null,badArrayLike)}catch(rr){if(rr!==isCallableMarker)return!1}return!isES6ClassFn(er)&&tryFunctionObject(er)}:function tr(er){if(isDDA(er))return!0;if(!er||typeof er!="function"&&typeof er!="object")return!1;if(hasToStringTag$1)return tryFunctionObject(er);if(isES6ClassFn(er))return!1;var rr=toStr$1.call(er);return rr!==fnClass&&rr!==genClass&&!/^\[object HTML/.test(rr)?!1:tryFunctionObject(er)},isCallable=isCallable$1,toStr=Object.prototype.toString,hasOwnProperty$1=Object.prototype.hasOwnProperty,forEachArray=function tr(er,rr,nr){for(var ir=0,sr=er.length;ir<sr;ir++)hasOwnProperty$1.call(er,ir)&&(nr==null?rr(er[ir],ir,er):rr.call(nr,er[ir],ir,er))},forEachString=function tr(er,rr,nr){for(var ir=0,sr=er.length;ir<sr;ir++)nr==null?rr(er.charAt(ir),ir,er):rr.call(nr,er.charAt(ir),ir,er)},forEachObject=function tr(er,rr,nr){for(var ir in er)hasOwnProperty$1.call(er,ir)&&(nr==null?rr(er[ir],ir,er):rr.call(nr,er[ir],ir,er))},forEach$1=function tr(er,rr,nr){if(!isCallable(rr))throw new TypeError("iterator must be a function");var ir;arguments.length>=3&&(ir=nr),toStr.call(er)==="[object Array]"?forEachArray(er,rr,ir):typeof er=="string"?forEachString(er,rr,ir):forEachObject(er,rr,ir)},forEach_1=forEach$1,possibleTypedArrayNames=["Float32Array","Float64Array","Int8Array","Int16Array","Int32Array","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array"],possibleNames=possibleTypedArrayNames,g$3=globalThis,availableTypedArrays$1=function tr(){for(var er=[],rr=0;rr<possibleNames.length;rr++)typeof g$3[possibleNames[rr]]=="function"&&(er[er.length]=possibleNames[rr]);return er},forEach=forEach_1,availableTypedArrays=availableTypedArrays$1,callBind=callBindExports,callBound$1=callBound$4,gOPD=gopd$1,$toString=callBound$1("Object.prototype.toString"),hasToStringTag=shams(),g$2=globalThis,typedArrays=availableTypedArrays(),$slice=callBound$1("String.prototype.slice"),getPrototypeOf=Object.getPrototypeOf,$indexOf=callBound$1("Array.prototype.indexOf",!0)||function tr(er,rr){for(var nr=0;nr<er.length;nr+=1)if(er[nr]===rr)return nr;return-1},cache={__proto__:null};hasToStringTag&&gOPD&&getPrototypeOf?forEach(typedArrays,function(tr){var er=new g$2[tr];if(Symbol.toStringTag in er){var rr=getPrototypeOf(er),nr=gOPD(rr,Symbol.toStringTag);if(!nr){var ir=getPrototypeOf(rr);nr=gOPD(ir,Symbol.toStringTag)}cache["$"+tr]=callBind(nr.get)}}):forEach(typedArrays,function(tr){var er=new g$2[tr],rr=er.slice||er.set;rr&&(cache["$"+tr]=callBind(rr))});var tryTypedArrays=function tr(er){var rr=!1;return forEach(cache,function(nr,ir){if(!rr)try{"$"+nr(er)===ir&&(rr=$slice(ir,1))}catch{}}),rr},trySlices=function tr(er){var rr=!1;return forEach(cache,function(nr,ir){if(!rr)try{nr(er),rr=$slice(ir,1)}catch{}}),rr},whichTypedArray$1=function tr(er){if(!er||typeof er!="object")return!1;if(!hasToStringTag){var rr=$slice($toString(er),8,-1);return $indexOf(typedArrays,rr)>-1?rr:rr!=="Object"?!1:trySlices(er)}return gOPD?tryTypedArrays(er):null},whichTypedArray=whichTypedArray$1,isTypedArray=function tr(er){return!!whichTypedArray(er)};(function(tr){var er=isArguments,rr=isGeneratorFunction,nr=whichTypedArray$1,ir=isTypedArray;function sr(Sn){return Sn.call.bind(Sn)}var or=typeof BigInt<"u",ar=typeof Symbol<"u",cr=sr(Object.prototype.toString),lr=sr(Number.prototype.valueOf),ur=sr(String.prototype.valueOf),dr=sr(Boolean.prototype.valueOf);if(or)var yr=sr(BigInt.prototype.valueOf);if(ar)var mr=sr(Symbol.prototype.valueOf);function wr(Sn,zn){if(typeof Sn!="object")return!1;try{return zn(Sn),!0}catch{return!1}}tr.isArgumentsObject=er,tr.isGeneratorFunction=rr,tr.isTypedArray=ir;function xr(Sn){return typeof Promise<"u"&&Sn instanceof Promise||Sn!==null&&typeof Sn=="object"&&typeof Sn.then=="function"&&typeof Sn.catch=="function"}tr.isPromise=xr;function Or(Sn){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?ArrayBuffer.isView(Sn):ir(Sn)||Br(Sn)}tr.isArrayBufferView=Or;function Tr(Sn){return nr(Sn)==="Uint8Array"}tr.isUint8Array=Tr;function Ar(Sn){return nr(Sn)==="Uint8ClampedArray"}tr.isUint8ClampedArray=Ar;function Nr(Sn){return nr(Sn)==="Uint16Array"}tr.isUint16Array=Nr;function Ur(Sn){return nr(Sn)==="Uint32Array"}tr.isUint32Array=Ur;function Dr(Sn){return nr(Sn)==="Int8Array"}tr.isInt8Array=Dr;function Hr(Sn){return nr(Sn)==="Int16Array"}tr.isInt16Array=Hr;function zr(Sn){return nr(Sn)==="Int32Array"}tr.isInt32Array=zr;function Cr(Sn){return nr(Sn)==="Float32Array"}tr.isFloat32Array=Cr;function Mr(Sn){return nr(Sn)==="Float64Array"}tr.isFloat64Array=Mr;function Pr(Sn){return nr(Sn)==="BigInt64Array"}tr.isBigInt64Array=Pr;function Sr(Sn){return nr(Sn)==="BigUint64Array"}tr.isBigUint64Array=Sr;function pr(Sn){return cr(Sn)==="[object Map]"}pr.working=typeof Map<"u"&&pr(new Map);function gr(Sn){return typeof Map>"u"?!1:pr.working?pr(Sn):Sn instanceof Map}tr.isMap=gr;function fr(Sn){return cr(Sn)==="[object Set]"}fr.working=typeof Set<"u"&&fr(new Set);function hr(Sn){return typeof Set>"u"?!1:fr.working?fr(Sn):Sn instanceof Set}tr.isSet=hr;function br(Sn){return cr(Sn)==="[object WeakMap]"}br.working=typeof WeakMap<"u"&&br(new WeakMap);function _r(Sn){return typeof WeakMap>"u"?!1:br.working?br(Sn):Sn instanceof WeakMap}tr.isWeakMap=_r;function $r(Sn){return cr(Sn)==="[object WeakSet]"}$r.working=typeof WeakSet<"u"&&$r(new WeakSet);function Er(Sn){return $r(Sn)}tr.isWeakSet=Er;function vr(Sn){return cr(Sn)==="[object ArrayBuffer]"}vr.working=typeof ArrayBuffer<"u"&&vr(new ArrayBuffer);function Ir(Sn){return typeof ArrayBuffer>"u"?!1:vr.working?vr(Sn):Sn instanceof ArrayBuffer}tr.isArrayBuffer=Ir;function Rr(Sn){return cr(Sn)==="[object DataView]"}Rr.working=typeof ArrayBuffer<"u"&&typeof DataView<"u"&&Rr(new DataView(new ArrayBuffer(1),0,1));function Br(Sn){return typeof DataView>"u"?!1:Rr.working?Rr(Sn):Sn instanceof DataView}tr.isDataView=Br;var Jr=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:void 0;function Wr(Sn){return cr(Sn)==="[object SharedArrayBuffer]"}function qr(Sn){return typeof Jr>"u"?!1:(typeof Wr.working>"u"&&(Wr.working=Wr(new Jr)),Wr.working?Wr(Sn):Sn instanceof Jr)}tr.isSharedArrayBuffer=qr;function an(Sn){return cr(Sn)==="[object AsyncFunction]"}tr.isAsyncFunction=an;function tn(Sn){return cr(Sn)==="[object Map Iterator]"}tr.isMapIterator=tn;function cn(Sn){return cr(Sn)==="[object Set Iterator]"}tr.isSetIterator=cn;function dn(Sn){return cr(Sn)==="[object Generator]"}tr.isGeneratorObject=dn;function Zr(Sn){return cr(Sn)==="[object WebAssembly.Module]"}tr.isWebAssemblyCompiledModule=Zr;function Yr(Sn){return wr(Sn,lr)}tr.isNumberObject=Yr;function Qr(Sn){return wr(Sn,ur)}tr.isStringObject=Qr;function un(Sn){return wr(Sn,dr)}tr.isBooleanObject=un;function gn(Sn){return or&&wr(Sn,yr)}tr.isBigIntObject=gn;function Rn(Sn){return ar&&wr(Sn,mr)}tr.isSymbolObject=Rn;function Pn(Sn){return Yr(Sn)||Qr(Sn)||un(Sn)||gn(Sn)||Rn(Sn)}tr.isBoxedPrimitive=Pn;function Cn(Sn){return typeof Uint8Array<"u"&&(Ir(Sn)||qr(Sn))}tr.isAnyArrayBuffer=Cn,["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(Sn){Object.defineProperty(tr,Sn,{enumerable:!1,value:function(){throw new Error(Sn+" is not supported in userland")}})})})(types$3);var isBufferBrowser=function tr(er){return er&&typeof er=="object"&&typeof er.copy=="function"&&typeof er.fill=="function"&&typeof er.readUInt8=="function"};(function(tr){var er={},rr=Object.getOwnPropertyDescriptors||function(Jr){for(var Wr=Object.keys(Jr),qr={},an=0;an<Wr.length;an++)qr[Wr[an]]=Object.getOwnPropertyDescriptor(Jr,Wr[an]);return qr},nr=/%[sdj%]/g;tr.format=function(Br){if(!Hr(Br)){for(var Jr=[],Wr=0;Wr<arguments.length;Wr++)Jr.push(ar(arguments[Wr]));return Jr.join(" ")}for(var Wr=1,qr=arguments,an=qr.length,tn=String(Br).replace(nr,function(dn){if(dn==="%%")return"%";if(Wr>=an)return dn;switch(dn){case"%s":return String(qr[Wr++]);case"%d":return Number(qr[Wr++]);case"%j":try{return JSON.stringify(qr[Wr++])}catch{return"[Circular]"}default:return dn}}),cn=qr[Wr];Wr<an;cn=qr[++Wr])Nr(cn)||!Pr(cn)?tn+=" "+cn:tn+=" "+ar(cn);return tn},tr.deprecate=function(Br,Jr){if(typeof process<"u"&&process.noDeprecation===!0)return Br;if(typeof process>"u")return function(){return tr.deprecate(Br,Jr).apply(this,arguments)};var Wr=!1;function qr(){if(!Wr){if(process.throwDeprecation)throw new Error(Jr);process.traceDeprecation?console.trace(Jr):console.error(Jr),Wr=!0}return Br.apply(this,arguments)}return qr};var ir={},sr=/^$/;if(er.NODE_DEBUG){var or=er.NODE_DEBUG;or=or.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),sr=new RegExp("^"+or+"$","i")}tr.debuglog=function(Br){if(Br=Br.toUpperCase(),!ir[Br])if(sr.test(Br)){var Jr=process.pid;ir[Br]=function(){var Wr=tr.format.apply(tr,arguments);console.error("%s %d: %s",Br,Jr,Wr)}}else ir[Br]=function(){};return ir[Br]};function ar(Br,Jr){var Wr={seen:[],stylize:lr};return arguments.length>=3&&(Wr.depth=arguments[2]),arguments.length>=4&&(Wr.colors=arguments[3]),Ar(Jr)?Wr.showHidden=Jr:Jr&&tr._extend(Wr,Jr),Cr(Wr.showHidden)&&(Wr.showHidden=!1),Cr(Wr.depth)&&(Wr.depth=2),Cr(Wr.colors)&&(Wr.colors=!1),Cr(Wr.customInspect)&&(Wr.customInspect=!0),Wr.colors&&(Wr.stylize=cr),dr(Wr,Br,Wr.depth)}tr.inspect=ar,ar.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},ar.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function cr(Br,Jr){var Wr=ar.styles[Jr];return Wr?"\x1B["+ar.colors[Wr][0]+"m"+Br+"\x1B["+ar.colors[Wr][1]+"m":Br}function lr(Br,Jr){return Br}function ur(Br){var Jr={};return Br.forEach(function(Wr,qr){Jr[Wr]=!0}),Jr}function dr(Br,Jr,Wr){if(Br.customInspect&&Jr&&gr(Jr.inspect)&&Jr.inspect!==tr.inspect&&!(Jr.constructor&&Jr.constructor.prototype===Jr)){var qr=Jr.inspect(Wr,Br);return Hr(qr)||(qr=dr(Br,qr,Wr)),qr}var an=yr(Br,Jr);if(an)return an;var tn=Object.keys(Jr),cn=ur(tn);if(Br.showHidden&&(tn=Object.getOwnPropertyNames(Jr)),pr(Jr)&&(tn.indexOf("message")>=0||tn.indexOf("description")>=0))return mr(Jr);if(tn.length===0){if(gr(Jr)){var dn=Jr.name?": "+Jr.name:"";return Br.stylize("[Function"+dn+"]","special")}if(Mr(Jr))return Br.stylize(RegExp.prototype.toString.call(Jr),"regexp");if(Sr(Jr))return Br.stylize(Date.prototype.toString.call(Jr),"date");if(pr(Jr))return mr(Jr)}var Zr="",Yr=!1,Qr=["{","}"];if(Tr(Jr)&&(Yr=!0,Qr=["[","]"]),gr(Jr)){var un=Jr.name?": "+Jr.name:"";Zr=" [Function"+un+"]"}if(Mr(Jr)&&(Zr=" "+RegExp.prototype.toString.call(Jr)),Sr(Jr)&&(Zr=" "+Date.prototype.toUTCString.call(Jr)),pr(Jr)&&(Zr=" "+mr(Jr)),tn.length===0&&(!Yr||Jr.length==0))return Qr[0]+Zr+Qr[1];if(Wr<0)return Mr(Jr)?Br.stylize(RegExp.prototype.toString.call(Jr),"regexp"):Br.stylize("[Object]","special");Br.seen.push(Jr);var gn;return Yr?gn=wr(Br,Jr,Wr,cn,tn):gn=tn.map(function(Rn){return xr(Br,Jr,Wr,cn,Rn,Yr)}),Br.seen.pop(),Or(gn,Zr,Qr)}function yr(Br,Jr){if(Cr(Jr))return Br.stylize("undefined","undefined");if(Hr(Jr)){var Wr="'"+JSON.stringify(Jr).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return Br.stylize(Wr,"string")}if(Dr(Jr))return Br.stylize(""+Jr,"number");if(Ar(Jr))return Br.stylize(""+Jr,"boolean");if(Nr(Jr))return Br.stylize("null","null")}function mr(Br){return"["+Error.prototype.toString.call(Br)+"]"}function wr(Br,Jr,Wr,qr,an){for(var tn=[],cn=0,dn=Jr.length;cn<dn;++cn)Er(Jr,String(cn))?tn.push(xr(Br,Jr,Wr,qr,String(cn),!0)):tn.push("");return an.forEach(function(Zr){Zr.match(/^\d+$/)||tn.push(xr(Br,Jr,Wr,qr,Zr,!0))}),tn}function xr(Br,Jr,Wr,qr,an,tn){var cn,dn,Zr;if(Zr=Object.getOwnPropertyDescriptor(Jr,an)||{value:Jr[an]},Zr.get?Zr.set?dn=Br.stylize("[Getter/Setter]","special"):dn=Br.stylize("[Getter]","special"):Zr.set&&(dn=Br.stylize("[Setter]","special")),Er(qr,an)||(cn="["+an+"]"),dn||(Br.seen.indexOf(Zr.value)<0?(Nr(Wr)?dn=dr(Br,Zr.value,null):dn=dr(Br,Zr.value,Wr-1),dn.indexOf(`
`)>-1&&(tn?dn=dn.split(`
`).map(function(Yr){return"  "+Yr}).join(`
`).slice(2):dn=`
`+dn.split(`
`).map(function(Yr){return"   "+Yr}).join(`
`))):dn=Br.stylize("[Circular]","special")),Cr(cn)){if(tn&&an.match(/^\d+$/))return dn;cn=JSON.stringify(""+an),cn.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(cn=cn.slice(1,-1),cn=Br.stylize(cn,"name")):(cn=cn.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),cn=Br.stylize(cn,"string"))}return cn+": "+dn}function Or(Br,Jr,Wr){var qr=Br.reduce(function(an,tn){return tn.indexOf(`
`)>=0,an+tn.replace(/\u001b\[\d\d?m/g,"").length+1},0);return qr>60?Wr[0]+(Jr===""?"":Jr+`
 `)+" "+Br.join(`,
  `)+" "+Wr[1]:Wr[0]+Jr+" "+Br.join(", ")+" "+Wr[1]}tr.types=types$3;function Tr(Br){return Array.isArray(Br)}tr.isArray=Tr;function Ar(Br){return typeof Br=="boolean"}tr.isBoolean=Ar;function Nr(Br){return Br===null}tr.isNull=Nr;function Ur(Br){return Br==null}tr.isNullOrUndefined=Ur;function Dr(Br){return typeof Br=="number"}tr.isNumber=Dr;function Hr(Br){return typeof Br=="string"}tr.isString=Hr;function zr(Br){return typeof Br=="symbol"}tr.isSymbol=zr;function Cr(Br){return Br===void 0}tr.isUndefined=Cr;function Mr(Br){return Pr(Br)&&hr(Br)==="[object RegExp]"}tr.isRegExp=Mr,tr.types.isRegExp=Mr;function Pr(Br){return typeof Br=="object"&&Br!==null}tr.isObject=Pr;function Sr(Br){return Pr(Br)&&hr(Br)==="[object Date]"}tr.isDate=Sr,tr.types.isDate=Sr;function pr(Br){return Pr(Br)&&(hr(Br)==="[object Error]"||Br instanceof Error)}tr.isError=pr,tr.types.isNativeError=pr;function gr(Br){return typeof Br=="function"}tr.isFunction=gr;function fr(Br){return Br===null||typeof Br=="boolean"||typeof Br=="number"||typeof Br=="string"||typeof Br=="symbol"||typeof Br>"u"}tr.isPrimitive=fr,tr.isBuffer=isBufferBrowser;function hr(Br){return Object.prototype.toString.call(Br)}function br(Br){return Br<10?"0"+Br.toString(10):Br.toString(10)}var _r=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function $r(){var Br=new Date,Jr=[br(Br.getHours()),br(Br.getMinutes()),br(Br.getSeconds())].join(":");return[Br.getDate(),_r[Br.getMonth()],Jr].join(" ")}tr.log=function(){console.log("%s - %s",$r(),tr.format.apply(tr,arguments))},tr.inherits=inherits_browserExports,tr._extend=function(Br,Jr){if(!Jr||!Pr(Jr))return Br;for(var Wr=Object.keys(Jr),qr=Wr.length;qr--;)Br[Wr[qr]]=Jr[Wr[qr]];return Br};function Er(Br,Jr){return Object.prototype.hasOwnProperty.call(Br,Jr)}var vr=typeof Symbol<"u"?Symbol("util.promisify.custom"):void 0;tr.promisify=function(Jr){if(typeof Jr!="function")throw new TypeError('The "original" argument must be of type Function');if(vr&&Jr[vr]){var Wr=Jr[vr];if(typeof Wr!="function")throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(Wr,vr,{value:Wr,enumerable:!1,writable:!1,configurable:!0}),Wr}function Wr(){for(var qr,an,tn=new Promise(function(Zr,Yr){qr=Zr,an=Yr}),cn=[],dn=0;dn<arguments.length;dn++)cn.push(arguments[dn]);cn.push(function(Zr,Yr){Zr?an(Zr):qr(Yr)});try{Jr.apply(this,cn)}catch(Zr){an(Zr)}return tn}return Object.setPrototypeOf(Wr,Object.getPrototypeOf(Jr)),vr&&Object.defineProperty(Wr,vr,{value:Wr,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(Wr,rr(Jr))},tr.promisify.custom=vr;function Ir(Br,Jr){if(!Br){var Wr=new Error("Promise was rejected with a falsy value");Wr.reason=Br,Br=Wr}return Jr(Br)}function Rr(Br){if(typeof Br!="function")throw new TypeError('The "original" argument must be of type Function');function Jr(){for(var Wr=[],qr=0;qr<arguments.length;qr++)Wr.push(arguments[qr]);var an=Wr.pop();if(typeof an!="function")throw new TypeError("The last argument must be of type Function");var tn=this,cn=function(){return an.apply(tn,arguments)};Br.apply(this,Wr).then(function(dn){process.nextTick(cn.bind(null,null,dn))},function(dn){process.nextTick(Ir.bind(null,dn,cn))})}return Object.setPrototypeOf(Jr,Object.getPrototypeOf(Br)),Object.defineProperties(Jr,rr(Br)),Jr}tr.callbackify=Rr})(util$7);Object.defineProperty(microFtch,"__esModule",{value:!0});microFtch.InvalidStatusCodeError=microFtch.InvalidCertError=void 0;const DEFAULT_OPT=Object.freeze({redirect:!0,expectStatusCode:200,headers:{},full:!1,keepAlive:!0,cors:!1,referrer:!1,sslAllowSelfSigned:!1,_redirectCount:0});class InvalidCertError extends Error{constructor(er,rr){super(er),this.fingerprint256=rr}}microFtch.InvalidCertError=InvalidCertError;class InvalidStatusCodeError extends Error{constructor(er){super(`Request Failed. Status Code: ${er}`),this.statusCode=er}}microFtch.InvalidStatusCodeError=InvalidStatusCodeError;function detectType(tr,er){if(!er||er==="text"||er==="json")try{let rr=new TextDecoder("utf8",{fatal:!0}).decode(tr);if(er==="text")return rr;try{return JSON.parse(rr)}catch(nr){if(er==="json")throw nr;return rr}}catch(rr){if(er==="text"||er==="json")throw rr}return tr}let agents={};function fetchNode(tr,er){var yr;let rr={...DEFAULT_OPT,...er};const nr=require$$3,ir=require$$3,sr=require$$3,{promisify:or}=util$7,{resolve:ar}=require$$3,cr=!!/^https/.test(tr);let lr={method:rr.method||"GET",headers:{"Accept-Encoding":"gzip, deflate, br"}};const ur=mr=>mr.replace(/:| /g,"").toLowerCase();if(rr.keepAlive){const mr={keepAlive:!0,keepAliveMsecs:3e4,maxFreeSockets:1024,maxCachedSessions:1024},wr=[cr,cr&&((yr=rr.sslPinnedCertificates)==null?void 0:yr.map(xr=>ur(xr)).sort())].join();lr.agent=agents[wr]||(agents[wr]=new(cr?ir:nr).Agent(mr))}rr.type==="json"&&(lr.headers["Content-Type"]="application/json"),rr.data&&(rr.method||(lr.method="POST"),lr.body=rr.type==="json"?JSON.stringify(rr.data):rr.data),lr.headers={...lr.headers,...rr.headers},rr.sslAllowSelfSigned&&(lr.rejectUnauthorized=!1);const dr=async mr=>{const wr=mr.statusCode;if(rr.redirect&&300<=wr&&wr<400&&mr.headers.location){if(rr._redirectCount==10)throw new Error("Request failed. Too much redirects.");return rr._redirectCount+=1,await fetchNode(ar(tr,mr.headers.location),rr)}if(rr.expectStatusCode&&wr!==rr.expectStatusCode)throw mr.resume(),new InvalidStatusCodeError(wr);let xr=[];for await(const Nr of mr)xr.push(Nr);let Or=Buffer.concat(xr);const Tr=mr.headers["content-encoding"];Tr==="br"&&(Or=await or(sr.brotliDecompress)(Or)),(Tr==="gzip"||Tr==="deflate")&&(Or=await or(sr.unzip)(Or));const Ar=detectType(Or,rr.type);return rr.full?{headers:mr.headers,status:wr,body:Ar}:Ar};return new Promise((mr,wr)=>{var Nr;const xr=async Ur=>{if(Ur&&Ur.code==="DEPTH_ZERO_SELF_SIGNED_CERT")try{await fetchNode(tr,{...rr,sslAllowSelfSigned:!0,sslPinnedCertificates:[]})}catch(Dr){Dr&&Dr.fingerprint256&&(Ur=new InvalidCertError(`Self-signed SSL certificate: ${Dr.fingerprint256}`,Dr.fingerprint256))}wr(Ur)},Or=(cr?ir:nr).request(tr,lr,Ur=>{Ur.on("error",xr),(async()=>{try{mr(await dr(Ur))}catch(Dr){wr(Dr)}})()});Or.on("error",xr);const Tr=(Nr=rr.sslPinnedCertificates)==null?void 0:Nr.map(Ur=>ur(Ur)),Ar=Ur=>{var Hr;const Dr=ur(((Hr=Ur.getPeerCertificate())==null?void 0:Hr.fingerprint256)||"");if(!(!Dr&&Ur.isSessionReused())&&!Tr.includes(Dr))return Or.emit("error",new InvalidCertError(`Invalid SSL certificate: ${Dr} Expected: ${Tr}`,Dr)),Or.abort()};rr.sslPinnedCertificates&&Or.on("socket",Ur=>{Ur.listeners("secureConnect").map(Hr=>(Hr.name||"").replace("bound ","")).includes("mfetchSecureConnect")||Ur.on("secureConnect",Ar.bind(null,Ur))}),rr.keepAlive&&Or.setNoDelay(!0),lr.body&&Or.write(lr.body),Or.end()})}const SAFE_HEADERS=new Set(["Accept","Accept-Language","Content-Language","Content-Type"].map(tr=>tr.toLowerCase())),FORBIDDEN_HEADERS=new Set(["Accept-Charset","Accept-Encoding","Access-Control-Request-Headers","Access-Control-Request-Method","Connection","Content-Length","Cookie","Cookie2","Date","DNT","Expect","Host","Keep-Alive","Origin","Referer","TE","Trailer","Transfer-Encoding","Upgrade","Via"].map(tr=>tr.toLowerCase()));async function fetchBrowser(tr,er){let rr={...DEFAULT_OPT,...er};const nr=new Headers;rr.type==="json"&&nr.set("Content-Type","application/json");let ir=new URL(tr);if(ir.username){const cr=btoa(`${ir.username}:${ir.password}`);nr.set("Authorization",`Basic ${cr}`),ir.username="",ir.password=""}tr=""+ir;for(let cr in rr.headers){const lr=cr.toLowerCase();(SAFE_HEADERS.has(lr)||rr.cors&&!FORBIDDEN_HEADERS.has(lr))&&nr.set(cr,rr.headers[cr])}let sr={headers:nr,redirect:rr.redirect?"follow":"manual"};rr.referrer||(sr.referrerPolicy="no-referrer"),rr.cors&&(sr.mode="cors"),rr.data&&(rr.method||(sr.method="POST"),sr.body=rr.type==="json"?JSON.stringify(rr.data):rr.data);const or=await fetch(tr,sr);if(rr.expectStatusCode&&or.status!==rr.expectStatusCode)throw new InvalidStatusCodeError(or.status);const ar=detectType(new Uint8Array(await or.arrayBuffer()),rr.type);return rr.full?{headers:Object.fromEntries(or.headers.entries()),status:or.status,body:ar}:ar}const IS_NODE=!!(typeof process=="object"&&process.versions&&process.versions.node&&process.versions.v8);function fetchUrl(tr,er){return(IS_NODE?fetchNode:fetchBrowser)(tr,er)}microFtch.default=fetchUrl;Object.defineProperty(provider$1,"__esModule",{value:!0});provider$1.getProvider=provider$1.fetchFromProvider=void 0;const micro_ftch_1=microFtch,fetchFromProvider=async(tr,er)=>(await(0,micro_ftch_1.default)(tr,{headers:{"content-type":"application/json"},type:"json",data:{method:er.method,params:er.params,jsonrpc:"2.0",id:1}})).result;provider$1.fetchFromProvider=fetchFromProvider;const getProvider=tr=>{var er;if(typeof tr=="string")return tr;if(((er=tr==null?void 0:tr.connection)==null?void 0:er.url)!==void 0)return tr.connection.url;throw new Error("Must provide valid provider URL or Web3Provider")};provider$1.getProvider=getProvider;(function(tr){var er=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(ir,sr,or,ar){ar===void 0&&(ar=or);var cr=Object.getOwnPropertyDescriptor(sr,or);(!cr||("get"in cr?!sr.__esModule:cr.writable||cr.configurable))&&(cr={enumerable:!0,get:function(){return sr[or]}}),Object.defineProperty(ir,ar,cr)}:function(ir,sr,or,ar){ar===void 0&&(ar=or),ir[ar]=sr[or]}),rr=commonjsGlobal&&commonjsGlobal.__exportStar||function(ir,sr){for(var or in ir)or!=="default"&&!Object.prototype.hasOwnProperty.call(sr,or)&&er(sr,ir,or)};Object.defineProperty(tr,"__esModule",{value:!0}),tr.toAscii=tr.stripHexPrefix=tr.padToEven=tr.isHexString=tr.isHexPrefixed=tr.getKeys=tr.getBinarySize=tr.fromUtf8=tr.fromAscii=tr.arrayContainsArray=void 0,rr(constants$7,tr),rr(units,tr),rr(account,tr),rr(address$1,tr),rr(withdrawal,tr),rr(signature,tr),rr(bytes$3,tr),rr(types$4,tr),rr(encoding,tr),rr(asyncEventEmitter,tr);var nr=internal;Object.defineProperty(tr,"arrayContainsArray",{enumerable:!0,get:function(){return nr.arrayContainsArray}}),Object.defineProperty(tr,"fromAscii",{enumerable:!0,get:function(){return nr.fromAscii}}),Object.defineProperty(tr,"fromUtf8",{enumerable:!0,get:function(){return nr.fromUtf8}}),Object.defineProperty(tr,"getBinarySize",{enumerable:!0,get:function(){return nr.getBinarySize}}),Object.defineProperty(tr,"getKeys",{enumerable:!0,get:function(){return nr.getKeys}}),Object.defineProperty(tr,"isHexPrefixed",{enumerable:!0,get:function(){return nr.isHexPrefixed}}),Object.defineProperty(tr,"isHexString",{enumerable:!0,get:function(){return nr.isHexString}}),Object.defineProperty(tr,"padToEven",{enumerable:!0,get:function(){return nr.padToEven}}),Object.defineProperty(tr,"stripHexPrefix",{enumerable:!0,get:function(){return nr.stripHexPrefix}}),Object.defineProperty(tr,"toAscii",{enumerable:!0,get:function(){return nr.toAscii}}),rr(lock,tr),rr(provider$1,tr)})(dist$7);var utils$3={},dist$5={},assert$6={},dist$4={},error$1={};Object.defineProperty(error$1,"__esModule",{value:!0});error$1.StructError=void 0;class StructError extends TypeError{constructor(er,rr){let nr;const{message:ir,explanation:sr,...or}=er,{path:ar}=er,cr=ar.length===0?ir:`At path: ${ar.join(".")} -- ${ir}`;super(sr??cr),sr!=null&&(this.cause=cr),Object.assign(this,or),this.name=this.constructor.name,this.failures=()=>nr??(nr=[er,...rr()])}}error$1.StructError=StructError;var struct={},utils$2={};Object.defineProperty(utils$2,"__esModule",{value:!0});utils$2.run=utils$2.toFailures=utils$2.toFailure=utils$2.shiftIterator=utils$2.print=utils$2.isPlainObject=utils$2.isObject=void 0;function isIterable(tr){return isObject$1(tr)&&typeof tr[Symbol.iterator]=="function"}function isObject$1(tr){return typeof tr=="object"&&tr!==null}utils$2.isObject=isObject$1;function isPlainObject(tr){if(Object.prototype.toString.call(tr)!=="[object Object]")return!1;const er=Object.getPrototypeOf(tr);return er===null||er===Object.prototype}utils$2.isPlainObject=isPlainObject;function print(tr){return typeof tr=="symbol"?tr.toString():typeof tr=="string"?JSON.stringify(tr):`${tr}`}utils$2.print=print;function shiftIterator(tr){const{done:er,value:rr}=tr.next();return er?void 0:rr}utils$2.shiftIterator=shiftIterator;function toFailure(tr,er,rr,nr){if(tr===!0)return;tr===!1?tr={}:typeof tr=="string"&&(tr={message:tr});const{path:ir,branch:sr}=er,{type:or}=rr,{refinement:ar,message:cr=`Expected a value of type \`${or}\`${ar?` with refinement \`${ar}\``:""}, but received: \`${print(nr)}\``}=tr;return{value:nr,type:or,refinement:ar,key:ir[ir.length-1],path:ir,branch:sr,...tr,message:cr}}utils$2.toFailure=toFailure;function*toFailures(tr,er,rr,nr){isIterable(tr)||(tr=[tr]);for(const ir of tr){const sr=toFailure(ir,er,rr,nr);sr&&(yield sr)}}utils$2.toFailures=toFailures;function*run(tr,er,rr={}){const{path:nr=[],branch:ir=[tr],coerce:sr=!1,mask:or=!1}=rr,ar={path:nr,branch:ir};if(sr&&(tr=er.coercer(tr,ar),or&&er.type!=="type"&&isObject$1(er.schema)&&isObject$1(tr)&&!Array.isArray(tr)))for(const lr in tr)er.schema[lr]===void 0&&delete tr[lr];let cr="valid";for(const lr of er.validator(tr,ar))lr.explanation=rr.message,cr="not_valid",yield[lr,void 0];for(let[lr,ur,dr]of er.entries(tr,ar)){const yr=run(ur,dr,{path:lr===void 0?nr:[...nr,lr],branch:lr===void 0?ir:[...ir,ur],coerce:sr,mask:or,message:rr.message});for(const mr of yr)mr[0]?(cr=mr[0].refinement===null||mr[0].refinement===void 0?"not_valid":"not_refined",yield[mr[0],void 0]):sr&&(ur=mr[1],lr===void 0?tr=ur:tr instanceof Map?tr.set(lr,ur):tr instanceof Set?tr.add(ur):isObject$1(tr)&&(ur!==void 0||lr in tr)&&(tr[lr]=ur))}if(cr!=="not_valid")for(const lr of er.refiner(tr,ar))lr.explanation=rr.message,cr="not_refined",yield[lr,void 0];cr==="valid"&&(yield[void 0,tr])}utils$2.run=run;Object.defineProperty(struct,"__esModule",{value:!0});struct.validate=struct.is=struct.mask=struct.create=struct.assert=struct.Struct=void 0;const error_js_1=error$1,utils_js_1$2=utils$2;class Struct{constructor(er){const{type:rr,schema:nr,validator:ir,refiner:sr,coercer:or=cr=>cr,entries:ar=function*(){}}=er;this.type=rr,this.schema=nr,this.entries=ar,this.coercer=or,ir?this.validator=(cr,lr)=>{const ur=ir(cr,lr);return(0,utils_js_1$2.toFailures)(ur,lr,this,cr)}:this.validator=()=>[],sr?this.refiner=(cr,lr)=>{const ur=sr(cr,lr);return(0,utils_js_1$2.toFailures)(ur,lr,this,cr)}:this.refiner=()=>[]}assert(er,rr){return assert$5(er,this,rr)}create(er,rr){return create(er,this,rr)}is(er){return is(er,this)}mask(er,rr){return mask(er,this,rr)}validate(er,rr={}){return validate$1(er,this,rr)}}struct.Struct=Struct;function assert$5(tr,er,rr){const nr=validate$1(tr,er,{message:rr});if(nr[0])throw nr[0]}struct.assert=assert$5;function create(tr,er,rr){const nr=validate$1(tr,er,{coerce:!0,message:rr});if(nr[0])throw nr[0];return nr[1]}struct.create=create;function mask(tr,er,rr){const nr=validate$1(tr,er,{coerce:!0,mask:!0,message:rr});if(nr[0])throw nr[0];return nr[1]}struct.mask=mask;function is(tr,er){return!validate$1(tr,er)[0]}struct.is=is;function validate$1(tr,er,rr={}){const nr=(0,utils_js_1$2.run)(tr,er,rr),ir=(0,utils_js_1$2.shiftIterator)(nr);return ir[0]?[new error_js_1.StructError(ir[0],function*(){for(const ar of nr)ar[0]&&(yield ar[0])}),void 0]:[void 0,ir[1]]}struct.validate=validate$1;var coercions={},types$2={},utilities={},hasRequiredUtilities;function requireUtilities(){if(hasRequiredUtilities)return utilities;hasRequiredUtilities=1,Object.defineProperty(utilities,"__esModule",{value:!0}),utilities.pick=utilities.partial=utilities.omit=utilities.lazy=utilities.dynamic=utilities.deprecated=utilities.define=utilities.assign=void 0;const tr=struct,er=requireTypes();function rr(...ur){var wr;const dr=((wr=ur[0])==null?void 0:wr.type)==="type",yr=ur.map(({schema:xr})=>xr),mr=Object.assign({},...yr);return dr?(0,er.type)(mr):(0,er.object)(mr)}utilities.assign=rr;function nr(ur,dr){return new tr.Struct({type:ur,schema:null,validator:dr})}utilities.define=nr;function ir(ur,dr){return new tr.Struct({...ur,refiner:(yr,mr)=>yr===void 0||ur.refiner(yr,mr),validator(yr,mr){return yr===void 0?!0:(dr(yr,mr),ur.validator(yr,mr))}})}utilities.deprecated=ir;function sr(ur){return new tr.Struct({type:"dynamic",schema:null,*entries(dr,yr){yield*ur(dr,yr).entries(dr,yr)},validator(dr,yr){return ur(dr,yr).validator(dr,yr)},coercer(dr,yr){return ur(dr,yr).coercer(dr,yr)},refiner(dr,yr){return ur(dr,yr).refiner(dr,yr)}})}utilities.dynamic=sr;function or(ur){let dr;return new tr.Struct({type:"lazy",schema:null,*entries(yr,mr){dr??(dr=ur()),yield*dr.entries(yr,mr)},validator(yr,mr){return dr??(dr=ur()),dr.validator(yr,mr)},coercer(yr,mr){return dr??(dr=ur()),dr.coercer(yr,mr)},refiner(yr,mr){return dr??(dr=ur()),dr.refiner(yr,mr)}})}utilities.lazy=or;function ar(ur,dr){const{schema:yr}=ur,mr={...yr};for(const wr of dr)delete mr[wr];switch(ur.type){case"type":return(0,er.type)(mr);default:return(0,er.object)(mr)}}utilities.omit=ar;function cr(ur){const dr=ur instanceof tr.Struct,yr=dr?{...ur.schema}:{...ur};for(const mr in yr)yr[mr]=(0,er.optional)(yr[mr]);return dr&&ur.type==="type"?(0,er.type)(yr):(0,er.object)(yr)}utilities.partial=cr;function lr(ur,dr){const{schema:yr}=ur,mr={};for(const wr of dr)mr[wr]=yr[wr];switch(ur.type){case"type":return(0,er.type)(mr);default:return(0,er.object)(mr)}}return utilities.pick=lr,utilities}var hasRequiredTypes;function requireTypes(){if(hasRequiredTypes)return types$2;hasRequiredTypes=1,Object.defineProperty(types$2,"__esModule",{value:!0}),types$2.unknown=types$2.union=types$2.type=types$2.tuple=types$2.string=types$2.set=types$2.regexp=types$2.record=types$2.optional=types$2.object=types$2.number=types$2.nullable=types$2.never=types$2.map=types$2.literal=types$2.intersection=types$2.integer=types$2.instance=types$2.func=types$2.enums=types$2.date=types$2.boolean=types$2.bigint=types$2.array=types$2.any=void 0;const tr=struct,er=utils$2,rr=requireUtilities();function nr(){return(0,rr.define)("any",()=>!0)}types$2.any=nr;function ir(pr){return new tr.Struct({type:"array",schema:pr,*entries(gr){if(pr&&Array.isArray(gr))for(const[fr,hr]of gr.entries())yield[fr,hr,pr]},coercer(gr){return Array.isArray(gr)?gr.slice():gr},validator(gr){return Array.isArray(gr)||`Expected an array value, but received: ${(0,er.print)(gr)}`}})}types$2.array=ir;function sr(){return(0,rr.define)("bigint",pr=>typeof pr=="bigint")}types$2.bigint=sr;function or(){return(0,rr.define)("boolean",pr=>typeof pr=="boolean")}types$2.boolean=or;function ar(){return(0,rr.define)("date",pr=>pr instanceof Date&&!isNaN(pr.getTime())||`Expected a valid \`Date\` object, but received: ${(0,er.print)(pr)}`)}types$2.date=ar;function cr(pr){const gr={},fr=pr.map(hr=>(0,er.print)(hr)).join();for(const hr of pr)gr[hr]=hr;return new tr.Struct({type:"enums",schema:gr,validator(hr){return pr.includes(hr)||`Expected one of \`${fr}\`, but received: ${(0,er.print)(hr)}`}})}types$2.enums=cr;function lr(){return(0,rr.define)("func",pr=>typeof pr=="function"||`Expected a function, but received: ${(0,er.print)(pr)}`)}types$2.func=lr;function ur(pr){return(0,rr.define)("instance",gr=>gr instanceof pr||`Expected a \`${pr.name}\` instance, but received: ${(0,er.print)(gr)}`)}types$2.instance=ur;function dr(){return(0,rr.define)("integer",pr=>typeof pr=="number"&&!isNaN(pr)&&Number.isInteger(pr)||`Expected an integer, but received: ${(0,er.print)(pr)}`)}types$2.integer=dr;function yr(pr){return new tr.Struct({type:"intersection",schema:null,*entries(gr,fr){for(const{entries:hr}of pr)yield*hr(gr,fr)},*validator(gr,fr){for(const{validator:hr}of pr)yield*hr(gr,fr)},*refiner(gr,fr){for(const{refiner:hr}of pr)yield*hr(gr,fr)}})}types$2.intersection=yr;function mr(pr){const gr=(0,er.print)(pr),fr=typeof pr;return new tr.Struct({type:"literal",schema:fr==="string"||fr==="number"||fr==="boolean"?pr:null,validator(hr){return hr===pr||`Expected the literal \`${gr}\`, but received: ${(0,er.print)(hr)}`}})}types$2.literal=mr;function wr(pr,gr){return new tr.Struct({type:"map",schema:null,*entries(fr){if(pr&&gr&&fr instanceof Map)for(const[hr,br]of fr.entries())yield[hr,hr,pr],yield[hr,br,gr]},coercer(fr){return fr instanceof Map?new Map(fr):fr},validator(fr){return fr instanceof Map||`Expected a \`Map\` object, but received: ${(0,er.print)(fr)}`}})}types$2.map=wr;function xr(){return(0,rr.define)("never",()=>!1)}types$2.never=xr;function Or(pr){return new tr.Struct({...pr,validator:(gr,fr)=>gr===null||pr.validator(gr,fr),refiner:(gr,fr)=>gr===null||pr.refiner(gr,fr)})}types$2.nullable=Or;function Tr(){return(0,rr.define)("number",pr=>typeof pr=="number"&&!isNaN(pr)||`Expected a number, but received: ${(0,er.print)(pr)}`)}types$2.number=Tr;function Ar(pr){const gr=pr?Object.keys(pr):[],fr=xr();return new tr.Struct({type:"object",schema:pr??null,*entries(hr){if(pr&&(0,er.isObject)(hr)){const br=new Set(Object.keys(hr));for(const _r of gr)br.delete(_r),yield[_r,hr[_r],pr[_r]];for(const _r of br)yield[_r,hr[_r],fr]}},validator(hr){return(0,er.isObject)(hr)||`Expected an object, but received: ${(0,er.print)(hr)}`},coercer(hr){return(0,er.isObject)(hr)?{...hr}:hr}})}types$2.object=Ar;function Nr(pr){return new tr.Struct({...pr,validator:(gr,fr)=>gr===void 0||pr.validator(gr,fr),refiner:(gr,fr)=>gr===void 0||pr.refiner(gr,fr)})}types$2.optional=Nr;function Ur(pr,gr){return new tr.Struct({type:"record",schema:null,*entries(fr){if((0,er.isObject)(fr))for(const hr in fr){const br=fr[hr];yield[hr,hr,pr],yield[hr,br,gr]}},validator(fr){return(0,er.isObject)(fr)||`Expected an object, but received: ${(0,er.print)(fr)}`}})}types$2.record=Ur;function Dr(){return(0,rr.define)("regexp",pr=>pr instanceof RegExp)}types$2.regexp=Dr;function Hr(pr){return new tr.Struct({type:"set",schema:null,*entries(gr){if(pr&&gr instanceof Set)for(const fr of gr)yield[fr,fr,pr]},coercer(gr){return gr instanceof Set?new Set(gr):gr},validator(gr){return gr instanceof Set||`Expected a \`Set\` object, but received: ${(0,er.print)(gr)}`}})}types$2.set=Hr;function zr(){return(0,rr.define)("string",pr=>typeof pr=="string"||`Expected a string, but received: ${(0,er.print)(pr)}`)}types$2.string=zr;function Cr(pr){const gr=xr();return new tr.Struct({type:"tuple",schema:null,*entries(fr){if(Array.isArray(fr)){const hr=Math.max(pr.length,fr.length);for(let br=0;br<hr;br++)yield[br,fr[br],pr[br]||gr]}},validator(fr){return Array.isArray(fr)||`Expected an array, but received: ${(0,er.print)(fr)}`}})}types$2.tuple=Cr;function Mr(pr){const gr=Object.keys(pr);return new tr.Struct({type:"type",schema:pr,*entries(fr){if((0,er.isObject)(fr))for(const hr of gr)yield[hr,fr[hr],pr[hr]]},validator(fr){return(0,er.isObject)(fr)||`Expected an object, but received: ${(0,er.print)(fr)}`},coercer(fr){return(0,er.isObject)(fr)?{...fr}:fr}})}types$2.type=Mr;function Pr(pr){const gr=pr.map(fr=>fr.type).join(" | ");return new tr.Struct({type:"union",schema:null,coercer(fr){for(const hr of pr){const[br,_r]=hr.validate(fr,{coerce:!0});if(!br)return _r}return fr},validator(fr,hr){const br=[];for(const _r of pr){const[...$r]=(0,er.run)(fr,_r,hr),[Er]=$r;if(!(Er!=null&&Er[0]))return[];for(const[vr]of $r)vr&&br.push(vr)}return[`Expected the value to satisfy a union of \`${gr}\`, but received: ${(0,er.print)(fr)}`,...br]}})}types$2.union=Pr;function Sr(){return(0,rr.define)("unknown",()=>!0)}return types$2.unknown=Sr,types$2}Object.defineProperty(coercions,"__esModule",{value:!0});coercions.trimmed=coercions.defaulted=coercions.coerce=void 0;const struct_js_1$1=struct,utils_js_1$1=utils$2,types_js_1=requireTypes();function coerce$4(tr,er,rr){return new struct_js_1$1.Struct({...tr,coercer:(nr,ir)=>(0,struct_js_1$1.is)(nr,er)?tr.coercer(rr(nr,ir),ir):tr.coercer(nr,ir)})}coercions.coerce=coerce$4;function defaulted(tr,er,rr={}){return coerce$4(tr,(0,types_js_1.unknown)(),nr=>{const ir=typeof er=="function"?er():er;if(nr===void 0)return ir;if(!rr.strict&&(0,utils_js_1$1.isPlainObject)(nr)&&(0,utils_js_1$1.isPlainObject)(ir)){const sr={...nr};let or=!1;for(const ar in ir)sr[ar]===void 0&&(sr[ar]=ir[ar],or=!0);if(or)return sr}return nr})}coercions.defaulted=defaulted;function trimmed(tr){return coerce$4(tr,(0,types_js_1.string)(),er=>er.trim())}coercions.trimmed=trimmed;var refinements={};Object.defineProperty(refinements,"__esModule",{value:!0});refinements.refine=refinements.size=refinements.pattern=refinements.nonempty=refinements.min=refinements.max=refinements.empty=void 0;const struct_js_1=struct,utils_js_1=utils$2;function empty(tr){return refine(tr,"empty",er=>{const rr=getSize(er);return rr===0||`Expected an empty ${tr.type} but received one with a size of \`${rr}\``})}refinements.empty=empty;function getSize(tr){return tr instanceof Map||tr instanceof Set?tr.size:tr.length}function max(tr,er,rr={}){const{exclusive:nr}=rr;return refine(tr,"max",ir=>nr?ir<er:ir<=er||`Expected a ${tr.type} less than ${nr?"":"or equal to "}${er} but received \`${ir}\``)}refinements.max=max;function min(tr,er,rr={}){const{exclusive:nr}=rr;return refine(tr,"min",ir=>nr?ir>er:ir>=er||`Expected a ${tr.type} greater than ${nr?"":"or equal to "}${er} but received \`${ir}\``)}refinements.min=min;function nonempty(tr){return refine(tr,"nonempty",er=>getSize(er)>0||`Expected a nonempty ${tr.type} but received an empty one`)}refinements.nonempty=nonempty;function pattern(tr,er){return refine(tr,"pattern",rr=>er.test(rr)||`Expected a ${tr.type} matching \`/${er.source}/\` but received "${rr}"`)}refinements.pattern=pattern;function size(tr,er,rr=er){const nr=`Expected a ${tr.type}`,ir=er===rr?`of \`${er}\``:`between \`${er}\` and \`${rr}\``;return refine(tr,"size",sr=>{if(typeof sr=="number"||sr instanceof Date)return er<=sr&&sr<=rr||`${nr} ${ir} but received \`${sr}\``;if(sr instanceof Map||sr instanceof Set){const{size:ar}=sr;return er<=ar&&ar<=rr||`${nr} with a size ${ir} but received one with a size of \`${ar}\``}const{length:or}=sr;return er<=or&&or<=rr||`${nr} with a length ${ir} but received one with a length of \`${or}\``})}refinements.size=size;function refine(tr,er,rr){return new struct_js_1.Struct({...tr,*refiner(nr,ir){yield*tr.refiner(nr,ir);const sr=rr(nr,ir),or=(0,utils_js_1.toFailures)(sr,ir,tr,nr);for(const ar of or)yield{...ar,refinement:er}}})}refinements.refine=refine;(function(tr){var er=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(nr,ir,sr,or){or===void 0&&(or=sr);var ar=Object.getOwnPropertyDescriptor(ir,sr);(!ar||("get"in ar?!ir.__esModule:ar.writable||ar.configurable))&&(ar={enumerable:!0,get:function(){return ir[sr]}}),Object.defineProperty(nr,or,ar)}:function(nr,ir,sr,or){or===void 0&&(or=sr),nr[or]=ir[sr]}),rr=commonjsGlobal&&commonjsGlobal.__exportStar||function(nr,ir){for(var sr in nr)sr!=="default"&&!Object.prototype.hasOwnProperty.call(ir,sr)&&er(ir,nr,sr)};Object.defineProperty(tr,"__esModule",{value:!0}),rr(error$1,tr),rr(struct,tr),rr(coercions,tr),rr(refinements,tr),rr(requireTypes(),tr),rr(requireUtilities(),tr)})(dist$4);var errors$4={};let ErrorWithCause$1=class A0 extends Error{constructor(er,{cause:rr}={}){super(er),this.name=A0.name,rr&&(this.cause=rr),this.message=er}};const errorWithCause=Object.freeze(Object.defineProperty({__proto__:null,ErrorWithCause:ErrorWithCause$1},Symbol.toStringTag,{value:"Module"})),require$$0$1=getAugmentedNamespace(errorWithCause),findCauseByReference$1=(tr,er)=>{if(!tr||!er||!(tr instanceof Error)||!(er.prototype instanceof Error)&&er!==Error)return;const rr=new Set;let nr=tr;for(;nr&&!rr.has(nr);){if(rr.add(nr),nr instanceof er)return nr;nr=getErrorCause$1(nr)}},getErrorCause$1=tr=>{if(!(!tr||typeof tr!="object"||!("cause"in tr)))if(typeof tr.cause=="function"){const er=tr.cause();return er instanceof Error?er:void 0}else return tr.cause instanceof Error?tr.cause:void 0},_stackWithCauses=(tr,er)=>{if(!(tr instanceof Error))return"";const rr=tr.stack||"";if(er.has(tr))return rr+`
causes have become circular...`;const nr=getErrorCause$1(tr);return nr?(er.add(tr),rr+`
caused by: `+_stackWithCauses(nr,er)):rr},stackWithCauses$1=tr=>_stackWithCauses(tr,new Set),_messageWithCauses=(tr,er,rr)=>{if(!(tr instanceof Error))return"";const nr=rr?"":tr.message||"";if(er.has(tr))return nr+": ...";const ir=getErrorCause$1(tr);if(ir){er.add(tr);const sr="cause"in tr&&typeof tr.cause=="function";return nr+(sr?"":": ")+_messageWithCauses(ir,er,sr)}else return nr},messageWithCauses$1=tr=>_messageWithCauses(tr,new Set),helpers$4=Object.freeze(Object.defineProperty({__proto__:null,findCauseByReference:findCauseByReference$1,getErrorCause:getErrorCause$1,messageWithCauses:messageWithCauses$1,stackWithCauses:stackWithCauses$1},Symbol.toStringTag,{value:"Module"})),require$$1$1=getAugmentedNamespace(helpers$4),{ErrorWithCause}=require$$0$1,{findCauseByReference,getErrorCause,messageWithCauses,stackWithCauses}=require$$1$1;var ponyCause={ErrorWithCause,findCauseByReference,getErrorCause,stackWithCauses,messageWithCauses},misc$1={};(function(tr){Object.defineProperty(tr,"__esModule",{value:!0}),tr.calculateNumberSize=tr.calculateStringSize=tr.isASCII=tr.isPlainObject=tr.ESCAPE_CHARACTERS_REGEXP=tr.JsonSize=tr.getKnownPropertyNames=tr.hasProperty=tr.isObject=tr.isNullOrUndefined=tr.isNonEmptyArray=void 0;function er(ur){return Array.isArray(ur)&&ur.length>0}tr.isNonEmptyArray=er;function rr(ur){return ur==null}tr.isNullOrUndefined=rr;function nr(ur){return!!ur&&typeof ur=="object"&&!Array.isArray(ur)}tr.isObject=nr;const ir=(ur,dr)=>Object.hasOwnProperty.call(ur,dr);tr.hasProperty=ir;function sr(ur){return Object.getOwnPropertyNames(ur)}tr.getKnownPropertyNames=sr,function(ur){ur[ur.Null=4]="Null",ur[ur.Comma=1]="Comma",ur[ur.Wrapper=1]="Wrapper",ur[ur.True=4]="True",ur[ur.False=5]="False",ur[ur.Quote=1]="Quote",ur[ur.Colon=1]="Colon",ur[ur.Date=24]="Date"}(tr.JsonSize||(tr.JsonSize={})),tr.ESCAPE_CHARACTERS_REGEXP=/"|\\|\n|\r|\t/gu;function or(ur){if(typeof ur!="object"||ur===null)return!1;try{let dr=ur;for(;Object.getPrototypeOf(dr)!==null;)dr=Object.getPrototypeOf(dr);return Object.getPrototypeOf(ur)===dr}catch{return!1}}tr.isPlainObject=or;function ar(ur){return ur.charCodeAt(0)<=127}tr.isASCII=ar;function cr(ur){return ur.split("").reduce((yr,mr)=>ar(mr)?yr+1:yr+2,0)+(ur.match(tr.ESCAPE_CHARACTERS_REGEXP)??[]).length}tr.calculateStringSize=cr;function lr(ur){return ur.toString().length}tr.calculateNumberSize=lr})(misc$1);Object.defineProperty(errors$4,"__esModule",{value:!0});errors$4.wrapError=errors$4.getErrorMessage=errors$4.isErrorWithStack=errors$4.isErrorWithMessage=errors$4.isErrorWithCode=void 0;const pony_cause_1$1=ponyCause,misc_1$1=misc$1;function isError$1(tr){return tr instanceof Error||(0,misc_1$1.isObject)(tr)&&tr.constructor.name==="Error"}function isErrorWithCode$1(tr){return typeof tr=="object"&&tr!==null&&"code"in tr}errors$4.isErrorWithCode=isErrorWithCode$1;function isErrorWithMessage$1(tr){return typeof tr=="object"&&tr!==null&&"message"in tr}errors$4.isErrorWithMessage=isErrorWithMessage$1;function isErrorWithStack$1(tr){return typeof tr=="object"&&tr!==null&&"stack"in tr}errors$4.isErrorWithStack=isErrorWithStack$1;function getErrorMessage$1(tr){return isErrorWithMessage$1(tr)&&typeof tr.message=="string"?tr.message:(0,misc_1$1.isNullOrUndefined)(tr)?"":String(tr)}errors$4.getErrorMessage=getErrorMessage$1;function wrapError$1(tr,er){if(isError$1(tr)){let rr;return Error.length===2?rr=new Error(er,{cause:tr}):rr=new pony_cause_1$1.ErrorWithCause(er,{cause:tr}),isErrorWithCode$1(tr)&&(rr.code=tr.code),rr}return er.length>0?new Error(`${String(tr)}: ${er}`):new Error(String(tr))}errors$4.wrapError=wrapError$1;Object.defineProperty(assert$6,"__esModule",{value:!0});assert$6.assertExhaustive=assert$6.assertStruct=assert$6.assert=assert$6.AssertionError=void 0;const superstruct_1$7=dist$4,errors_1$1=errors$4;function isConstructable$1(tr){var er,rr;return typeof((rr=(er=tr==null?void 0:tr.prototype)==null?void 0:er.constructor)==null?void 0:rr.name)=="string"}function getErrorMessageWithoutTrailingPeriod$1(tr){return(0,errors_1$1.getErrorMessage)(tr).replace(/\.$/u,"")}function getError$1(tr,er){return isConstructable$1(tr)?new tr({message:er}):tr({message:er})}let AssertionError$1=class extends Error{constructor(er){super(er.message),this.code="ERR_ASSERTION"}};assert$6.AssertionError=AssertionError$1;function assert$4(tr,er="Assertion failed.",rr=AssertionError$1){if(!tr)throw er instanceof Error?er:getError$1(rr,er)}assert$6.assert=assert$4;function assertStruct$1(tr,er,rr="Assertion failed",nr=AssertionError$1){try{(0,superstruct_1$7.assert)(tr,er)}catch(ir){throw getError$1(nr,`${rr}: ${getErrorMessageWithoutTrailingPeriod$1(ir)}.`)}}assert$6.assertStruct=assertStruct$1;function assertExhaustive$1(tr){throw new Error("Invalid branch reached. Should be detected during compilation.")}assert$6.assertExhaustive=assertExhaustive$1;var base64$3={};Object.defineProperty(base64$3,"__esModule",{value:!0});base64$3.base64=void 0;const superstruct_1$6=dist$4,assert_1$5=assert$6,base64$2=(tr,er={})=>{const rr=er.paddingRequired??!1,nr=er.characterSet??"base64";let ir;nr==="base64"?ir=String.raw`[A-Za-z0-9+\/]`:((0,assert_1$5.assert)(nr==="base64url"),ir=String.raw`[-_A-Za-z0-9]`);let sr;return rr?sr=new RegExp(`^(?:${ir}{4})*(?:${ir}{3}=|${ir}{2}==)?$`,"u"):sr=new RegExp(`^(?:${ir}{4})*(?:${ir}{2,3}|${ir}{3}=|${ir}{2}==)?$`,"u"),(0,superstruct_1$6.pattern)(tr,sr)};base64$3.base64=base64$2;var bytes$2={},lib$1={};(function(tr){/*! scure-base - MIT License (c) 2022 Paul Miller (paulmillr.com) */Object.defineProperty(tr,"__esModule",{value:!0}),tr.bytes=tr.stringToBytes=tr.str=tr.bytesToString=tr.hex=tr.utf8=tr.bech32m=tr.bech32=tr.base58check=tr.createBase58check=tr.base58xmr=tr.base58xrp=tr.base58flickr=tr.base58=tr.base64urlnopad=tr.base64url=tr.base64nopad=tr.base64=tr.base32crockford=tr.base32hexnopad=tr.base32hex=tr.base32nopad=tr.base32=tr.base16=tr.utils=tr.assertNumber=void 0;function er(pr){if(!Number.isSafeInteger(pr))throw new Error(`Wrong integer: ${pr}`)}tr.assertNumber=er;function rr(pr){return pr instanceof Uint8Array||pr!=null&&typeof pr=="object"&&pr.constructor.name==="Uint8Array"}function nr(...pr){const gr=_r=>_r,fr=(_r,$r)=>Er=>_r($r(Er)),hr=pr.map(_r=>_r.encode).reduceRight(fr,gr),br=pr.map(_r=>_r.decode).reduce(fr,gr);return{encode:hr,decode:br}}function ir(pr){return{encode:gr=>{if(!Array.isArray(gr)||gr.length&&typeof gr[0]!="number")throw new Error("alphabet.encode input should be an array of numbers");return gr.map(fr=>{if(fr<0||fr>=pr.length)throw new Error(`Digit index outside alphabet: ${fr} (alphabet: ${pr.length})`);return pr[fr]})},decode:gr=>{if(!Array.isArray(gr)||gr.length&&typeof gr[0]!="string")throw new Error("alphabet.decode input should be array of strings");return gr.map(fr=>{if(typeof fr!="string")throw new Error(`alphabet.decode: not string element=${fr}`);const hr=pr.indexOf(fr);if(hr===-1)throw new Error(`Unknown letter: "${fr}". Allowed: ${pr}`);return hr})}}}function sr(pr=""){if(typeof pr!="string")throw new Error("join separator should be string");return{encode:gr=>{if(!Array.isArray(gr)||gr.length&&typeof gr[0]!="string")throw new Error("join.encode input should be array of strings");for(let fr of gr)if(typeof fr!="string")throw new Error(`join.encode: non-string input=${fr}`);return gr.join(pr)},decode:gr=>{if(typeof gr!="string")throw new Error("join.decode input should be string");return gr.split(pr)}}}function or(pr,gr="="){if(typeof gr!="string")throw new Error("padding chr should be string");return{encode(fr){if(!Array.isArray(fr)||fr.length&&typeof fr[0]!="string")throw new Error("padding.encode input should be array of strings");for(let hr of fr)if(typeof hr!="string")throw new Error(`padding.encode: non-string input=${hr}`);for(;fr.length*pr%8;)fr.push(gr);return fr},decode(fr){if(!Array.isArray(fr)||fr.length&&typeof fr[0]!="string")throw new Error("padding.encode input should be array of strings");for(let br of fr)if(typeof br!="string")throw new Error(`padding.decode: non-string input=${br}`);let hr=fr.length;if(hr*pr%8)throw new Error("Invalid padding: string should have whole number of bytes");for(;hr>0&&fr[hr-1]===gr;hr--)if(!((hr-1)*pr%8))throw new Error("Invalid padding: string has too much padding");return fr.slice(0,hr)}}}function ar(pr){if(typeof pr!="function")throw new Error("normalize fn should be function");return{encode:gr=>gr,decode:gr=>pr(gr)}}function cr(pr,gr,fr){if(gr<2)throw new Error(`convertRadix: wrong from=${gr}, base cannot be less than 2`);if(fr<2)throw new Error(`convertRadix: wrong to=${fr}, base cannot be less than 2`);if(!Array.isArray(pr))throw new Error("convertRadix: data should be array");if(!pr.length)return[];let hr=0;const br=[],_r=Array.from(pr);for(_r.forEach($r=>{if($r<0||$r>=gr)throw new Error(`Wrong integer: ${$r}`)});;){let $r=0,Er=!0;for(let vr=hr;vr<_r.length;vr++){const Ir=_r[vr],Rr=gr*$r+Ir;if(!Number.isSafeInteger(Rr)||gr*$r/gr!==$r||Rr-Ir!==gr*$r)throw new Error("convertRadix: carry overflow");$r=Rr%fr;const Br=Math.floor(Rr/fr);if(_r[vr]=Br,!Number.isSafeInteger(Br)||Br*fr+$r!==Rr)throw new Error("convertRadix: carry overflow");if(Er)Br?Er=!1:hr=vr;else continue}if(br.push($r),Er)break}for(let $r=0;$r<pr.length-1&&pr[$r]===0;$r++)br.push(0);return br.reverse()}const lr=(pr,gr)=>gr?lr(gr,pr%gr):pr,ur=(pr,gr)=>pr+(gr-lr(pr,gr));function dr(pr,gr,fr,hr){if(!Array.isArray(pr))throw new Error("convertRadix2: data should be array");if(gr<=0||gr>32)throw new Error(`convertRadix2: wrong from=${gr}`);if(fr<=0||fr>32)throw new Error(`convertRadix2: wrong to=${fr}`);if(ur(gr,fr)>32)throw new Error(`convertRadix2: carry overflow from=${gr} to=${fr} carryBits=${ur(gr,fr)}`);let br=0,_r=0;const $r=2**fr-1,Er=[];for(const vr of pr){if(vr>=2**gr)throw new Error(`convertRadix2: invalid data word=${vr} from=${gr}`);if(br=br<<gr|vr,_r+gr>32)throw new Error(`convertRadix2: carry overflow pos=${_r} from=${gr}`);for(_r+=gr;_r>=fr;_r-=fr)Er.push((br>>_r-fr&$r)>>>0);br&=2**_r-1}if(br=br<<fr-_r&$r,!hr&&_r>=gr)throw new Error("Excess padding");if(!hr&&br)throw new Error(`Non-zero padding: ${br}`);return hr&&_r>0&&Er.push(br>>>0),Er}function yr(pr){return{encode:gr=>{if(!rr(gr))throw new Error("radix.encode input should be Uint8Array");return cr(Array.from(gr),2**8,pr)},decode:gr=>{if(!Array.isArray(gr)||gr.length&&typeof gr[0]!="number")throw new Error("radix.decode input should be array of numbers");return Uint8Array.from(cr(gr,pr,2**8))}}}function mr(pr,gr=!1){if(pr<=0||pr>32)throw new Error("radix2: bits should be in (0..32]");if(ur(8,pr)>32||ur(pr,8)>32)throw new Error("radix2: carry overflow");return{encode:fr=>{if(!rr(fr))throw new Error("radix2.encode input should be Uint8Array");return dr(Array.from(fr),8,pr,!gr)},decode:fr=>{if(!Array.isArray(fr)||fr.length&&typeof fr[0]!="number")throw new Error("radix2.decode input should be array of numbers");return Uint8Array.from(dr(fr,pr,8,gr))}}}function wr(pr){if(typeof pr!="function")throw new Error("unsafeWrapper fn should be function");return function(...gr){try{return pr.apply(null,gr)}catch{}}}function xr(pr,gr){if(typeof gr!="function")throw new Error("checksum fn should be function");return{encode(fr){if(!rr(fr))throw new Error("checksum.encode: input should be Uint8Array");const hr=gr(fr).slice(0,pr),br=new Uint8Array(fr.length+pr);return br.set(fr),br.set(hr,fr.length),br},decode(fr){if(!rr(fr))throw new Error("checksum.decode: input should be Uint8Array");const hr=fr.slice(0,-pr),br=gr(hr).slice(0,pr),_r=fr.slice(-pr);for(let $r=0;$r<pr;$r++)if(br[$r]!==_r[$r])throw new Error("Invalid checksum");return hr}}}tr.utils={alphabet:ir,chain:nr,checksum:xr,convertRadix:cr,convertRadix2:dr,radix:yr,radix2:mr,join:sr,padding:or},tr.base16=nr(mr(4),ir("0123456789ABCDEF"),sr("")),tr.base32=nr(mr(5),ir("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),or(5),sr("")),tr.base32nopad=nr(mr(5),ir("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),sr("")),tr.base32hex=nr(mr(5),ir("0123456789ABCDEFGHIJKLMNOPQRSTUV"),or(5),sr("")),tr.base32hexnopad=nr(mr(5),ir("0123456789ABCDEFGHIJKLMNOPQRSTUV"),sr("")),tr.base32crockford=nr(mr(5),ir("0123456789ABCDEFGHJKMNPQRSTVWXYZ"),sr(""),ar(pr=>pr.toUpperCase().replace(/O/g,"0").replace(/[IL]/g,"1"))),tr.base64=nr(mr(6),ir("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),or(6),sr("")),tr.base64nopad=nr(mr(6),ir("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),sr("")),tr.base64url=nr(mr(6),ir("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),or(6),sr("")),tr.base64urlnopad=nr(mr(6),ir("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),sr(""));const Or=pr=>nr(yr(58),ir(pr),sr(""));tr.base58=Or("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"),tr.base58flickr=Or("123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"),tr.base58xrp=Or("rpshnaf39wBUDNEGHJKLM4PQRST7VWXYZ2bcdeCg65jkm8oFqi1tuvAxyz");const Tr=[0,2,3,5,6,7,9,10,11];tr.base58xmr={encode(pr){let gr="";for(let fr=0;fr<pr.length;fr+=8){const hr=pr.subarray(fr,fr+8);gr+=tr.base58.encode(hr).padStart(Tr[hr.length],"1")}return gr},decode(pr){let gr=[];for(let fr=0;fr<pr.length;fr+=11){const hr=pr.slice(fr,fr+11),br=Tr.indexOf(hr.length),_r=tr.base58.decode(hr);for(let $r=0;$r<_r.length-br;$r++)if(_r[$r]!==0)throw new Error("base58xmr: wrong padding");gr=gr.concat(Array.from(_r.slice(_r.length-br)))}return Uint8Array.from(gr)}};const Ar=pr=>nr(xr(4,gr=>pr(pr(gr))),tr.base58);tr.createBase58check=Ar,tr.base58check=tr.createBase58check;const Nr=nr(ir("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),sr("")),Ur=[996825010,642813549,513874426,1027748829,705979059];function Dr(pr){const gr=pr>>25;let fr=(pr&33554431)<<5;for(let hr=0;hr<Ur.length;hr++)(gr>>hr&1)===1&&(fr^=Ur[hr]);return fr}function Hr(pr,gr,fr=1){const hr=pr.length;let br=1;for(let _r=0;_r<hr;_r++){const $r=pr.charCodeAt(_r);if($r<33||$r>126)throw new Error(`Invalid prefix (${pr})`);br=Dr(br)^$r>>5}br=Dr(br);for(let _r=0;_r<hr;_r++)br=Dr(br)^pr.charCodeAt(_r)&31;for(let _r of gr)br=Dr(br)^_r;for(let _r=0;_r<6;_r++)br=Dr(br);return br^=fr,Nr.encode(dr([br%2**30],30,5,!1))}function zr(pr){const gr=pr==="bech32"?1:734539939,fr=mr(5),hr=fr.decode,br=fr.encode,_r=wr(hr);function $r(Rr,Br,Jr=90){if(typeof Rr!="string")throw new Error(`bech32.encode prefix should be string, not ${typeof Rr}`);if(!Array.isArray(Br)||Br.length&&typeof Br[0]!="number")throw new Error(`bech32.encode words should be array of numbers, not ${typeof Br}`);if(Rr.length===0)throw new TypeError(`Invalid prefix length ${Rr.length}`);const Wr=Rr.length+7+Br.length;if(Jr!==!1&&Wr>Jr)throw new TypeError(`Length ${Wr} exceeds limit ${Jr}`);const qr=Rr.toLowerCase(),an=Hr(qr,Br,gr);return`${qr}1${Nr.encode(Br)}${an}`}function Er(Rr,Br=90){if(typeof Rr!="string")throw new Error(`bech32.decode input should be string, not ${typeof Rr}`);if(Rr.length<8||Br!==!1&&Rr.length>Br)throw new TypeError(`Wrong string length: ${Rr.length} (${Rr}). Expected (8..${Br})`);const Jr=Rr.toLowerCase();if(Rr!==Jr&&Rr!==Rr.toUpperCase())throw new Error("String must be lowercase or uppercase");const Wr=Jr.lastIndexOf("1");if(Wr===0||Wr===-1)throw new Error('Letter "1" must be present between prefix and data only');const qr=Jr.slice(0,Wr),an=Jr.slice(Wr+1);if(an.length<6)throw new Error("Data must be at least 6 characters long");const tn=Nr.decode(an).slice(0,-6),cn=Hr(qr,tn,gr);if(!an.endsWith(cn))throw new Error(`Invalid checksum in ${Rr}: expected "${cn}"`);return{prefix:qr,words:tn}}const vr=wr(Er);function Ir(Rr){const{prefix:Br,words:Jr}=Er(Rr,!1);return{prefix:Br,words:Jr,bytes:hr(Jr)}}return{encode:$r,decode:Er,decodeToBytes:Ir,decodeUnsafe:vr,fromWords:hr,fromWordsUnsafe:_r,toWords:br}}tr.bech32=zr("bech32"),tr.bech32m=zr("bech32m"),tr.utf8={encode:pr=>new TextDecoder().decode(pr),decode:pr=>new TextEncoder().encode(pr)},tr.hex=nr(mr(4),ir("0123456789abcdef"),sr(""),ar(pr=>{if(typeof pr!="string"||pr.length%2)throw new TypeError(`hex.decode: expected string, got ${typeof pr} with length ${pr.length}`);return pr.toLowerCase()}));const Cr={utf8:tr.utf8,hex:tr.hex,base16:tr.base16,base32:tr.base32,base64:tr.base64,base64url:tr.base64url,base58:tr.base58,base58xmr:tr.base58xmr},Mr="Invalid encoding type. Available types: utf8, hex, base16, base32, base64, base64url, base58, base58xmr",Pr=(pr,gr)=>{if(typeof pr!="string"||!Cr.hasOwnProperty(pr))throw new TypeError(Mr);if(!rr(gr))throw new TypeError("bytesToString() expects Uint8Array");return Cr[pr].encode(gr)};tr.bytesToString=Pr,tr.str=tr.bytesToString;const Sr=(pr,gr)=>{if(!Cr.hasOwnProperty(pr))throw new TypeError(Mr);if(typeof gr!="string")throw new TypeError("stringToBytes() expects string");return Cr[pr].decode(gr)};tr.stringToBytes=Sr,tr.bytes=tr.stringToBytes})(lib$1);var hex$1={},hasRequiredHex$1;function requireHex$1(){return hasRequiredHex$1||(hasRequiredHex$1=1,function(tr){Object.defineProperty(tr,"__esModule",{value:!0}),tr.remove0x=tr.add0x=tr.isValidChecksumAddress=tr.getChecksumAddress=tr.isValidHexAddress=tr.assertIsStrictHexString=tr.assertIsHexString=tr.isStrictHexString=tr.isHexString=tr.HexChecksumAddressStruct=tr.HexAddressStruct=tr.StrictHexStruct=tr.HexStruct=void 0;const er=dist$4,rr=sha3,nr=assert$6,ir=requireBytes$1();tr.HexStruct=(0,er.pattern)((0,er.string)(),/^(?:0x)?[0-9a-f]+$/iu),tr.StrictHexStruct=(0,er.pattern)((0,er.string)(),/^0x[0-9a-f]+$/iu),tr.HexAddressStruct=(0,er.pattern)((0,er.string)(),/^0x[0-9a-f]{40}$/u),tr.HexChecksumAddressStruct=(0,er.pattern)((0,er.string)(),/^0x[0-9a-fA-F]{40}$/u);function sr(wr){return(0,er.is)(wr,tr.HexStruct)}tr.isHexString=sr;function or(wr){return(0,er.is)(wr,tr.StrictHexStruct)}tr.isStrictHexString=or;function ar(wr){(0,nr.assert)(sr(wr),"Value must be a hexadecimal string.")}tr.assertIsHexString=ar;function cr(wr){(0,nr.assert)(or(wr),'Value must be a hexadecimal string, starting with "0x".')}tr.assertIsStrictHexString=cr;function lr(wr){return(0,er.is)(wr,tr.HexAddressStruct)||dr(wr)}tr.isValidHexAddress=lr;function ur(wr){(0,nr.assert)((0,er.is)(wr,tr.HexChecksumAddressStruct),"Invalid hex address.");const xr=mr(wr.toLowerCase()),Or=mr((0,ir.bytesToHex)((0,rr.keccak_256)(xr)));return`0x${xr.split("").map((Tr,Ar)=>{const Nr=Or[Ar];return(0,nr.assert)((0,er.is)(Nr,(0,er.string)()),"Hash shorter than address."),parseInt(Nr,16)>7?Tr.toUpperCase():Tr}).join("")}`}tr.getChecksumAddress=ur;function dr(wr){return(0,er.is)(wr,tr.HexChecksumAddressStruct)?ur(wr)===wr:!1}tr.isValidChecksumAddress=dr;function yr(wr){return wr.startsWith("0x")?wr:wr.startsWith("0X")?`0x${wr.substring(2)}`:`0x${wr}`}tr.add0x=yr;function mr(wr){return wr.startsWith("0x")||wr.startsWith("0X")?wr.substring(2):wr}tr.remove0x=mr}(hex$1)),hex$1}var hasRequiredBytes$1;function requireBytes$1(){if(hasRequiredBytes$1)return bytes$2;hasRequiredBytes$1=1,Object.defineProperty(bytes$2,"__esModule",{value:!0}),bytes$2.createDataView=bytes$2.concatBytes=bytes$2.valueToBytes=bytes$2.base64ToBytes=bytes$2.stringToBytes=bytes$2.numberToBytes=bytes$2.signedBigIntToBytes=bytes$2.bigIntToBytes=bytes$2.hexToBytes=bytes$2.bytesToBase64=bytes$2.bytesToString=bytes$2.bytesToNumber=bytes$2.bytesToSignedBigInt=bytes$2.bytesToBigInt=bytes$2.bytesToHex=bytes$2.assertIsBytes=bytes$2.isBytes=void 0;const tr=lib$1,er=assert$6,rr=requireHex$1(),nr=48,ir=58,sr=87;function or(){const Pr=[];return()=>{if(Pr.length===0)for(let Sr=0;Sr<256;Sr++)Pr.push(Sr.toString(16).padStart(2,"0"));return Pr}}const ar=or();function cr(Pr){return Pr instanceof Uint8Array}bytes$2.isBytes=cr;function lr(Pr){(0,er.assert)(cr(Pr),"Value must be a Uint8Array.")}bytes$2.assertIsBytes=lr;function ur(Pr){if(lr(Pr),Pr.length===0)return"0x";const Sr=ar(),pr=new Array(Pr.length);for(let gr=0;gr<Pr.length;gr++)pr[gr]=Sr[Pr[gr]];return(0,rr.add0x)(pr.join(""))}bytes$2.bytesToHex=ur;function dr(Pr){lr(Pr);const Sr=ur(Pr);return BigInt(Sr)}bytes$2.bytesToBigInt=dr;function yr(Pr){lr(Pr);let Sr=BigInt(0);for(const pr of Pr)Sr=(Sr<<BigInt(8))+BigInt(pr);return BigInt.asIntN(Pr.length*8,Sr)}bytes$2.bytesToSignedBigInt=yr;function mr(Pr){lr(Pr);const Sr=dr(Pr);return(0,er.assert)(Sr<=BigInt(Number.MAX_SAFE_INTEGER),"Number is not a safe integer. Use `bytesToBigInt` instead."),Number(Sr)}bytes$2.bytesToNumber=mr;function wr(Pr){return lr(Pr),new TextDecoder().decode(Pr)}bytes$2.bytesToString=wr;function xr(Pr){return lr(Pr),tr.base64.encode(Pr)}bytes$2.bytesToBase64=xr;function Or(Pr){var fr;if(((fr=Pr==null?void 0:Pr.toLowerCase)==null?void 0:fr.call(Pr))==="0x")return new Uint8Array;(0,rr.assertIsHexString)(Pr);const Sr=(0,rr.remove0x)(Pr).toLowerCase(),pr=Sr.length%2===0?Sr:`0${Sr}`,gr=new Uint8Array(pr.length/2);for(let hr=0;hr<gr.length;hr++){const br=pr.charCodeAt(hr*2),_r=pr.charCodeAt(hr*2+1),$r=br-(br<ir?nr:sr),Er=_r-(_r<ir?nr:sr);gr[hr]=$r*16+Er}return gr}bytes$2.hexToBytes=Or;function Tr(Pr){(0,er.assert)(typeof Pr=="bigint","Value must be a bigint."),(0,er.assert)(Pr>=BigInt(0),"Value must be a non-negative bigint.");const Sr=Pr.toString(16);return Or(Sr)}bytes$2.bigIntToBytes=Tr;function Ar(Pr,Sr){(0,er.assert)(Sr>0);const pr=Pr>>BigInt(31);return!((~Pr&pr)+(Pr&~pr)>>BigInt(Sr*8+-1))}function Nr(Pr,Sr){(0,er.assert)(typeof Pr=="bigint","Value must be a bigint."),(0,er.assert)(typeof Sr=="number","Byte length must be a number."),(0,er.assert)(Sr>0,"Byte length must be greater than 0."),(0,er.assert)(Ar(Pr,Sr),"Byte length is too small to represent the given value.");let pr=Pr;const gr=new Uint8Array(Sr);for(let fr=0;fr<gr.length;fr++)gr[fr]=Number(BigInt.asUintN(8,pr)),pr>>=BigInt(8);return gr.reverse()}bytes$2.signedBigIntToBytes=Nr;function Ur(Pr){(0,er.assert)(typeof Pr=="number","Value must be a number."),(0,er.assert)(Pr>=0,"Value must be a non-negative number."),(0,er.assert)(Number.isSafeInteger(Pr),"Value is not a safe integer. Use `bigIntToBytes` instead.");const Sr=Pr.toString(16);return Or(Sr)}bytes$2.numberToBytes=Ur;function Dr(Pr){return(0,er.assert)(typeof Pr=="string","Value must be a string."),new TextEncoder().encode(Pr)}bytes$2.stringToBytes=Dr;function Hr(Pr){return(0,er.assert)(typeof Pr=="string","Value must be a string."),tr.base64.decode(Pr)}bytes$2.base64ToBytes=Hr;function zr(Pr){if(typeof Pr=="bigint")return Tr(Pr);if(typeof Pr=="number")return Ur(Pr);if(typeof Pr=="string")return Pr.startsWith("0x")?Or(Pr):Dr(Pr);if(cr(Pr))return Pr;throw new TypeError(`Unsupported value type: "${typeof Pr}".`)}bytes$2.valueToBytes=zr;function Cr(Pr){const Sr=new Array(Pr.length);let pr=0;for(let fr=0;fr<Pr.length;fr++){const hr=zr(Pr[fr]);Sr[fr]=hr,pr+=hr.length}const gr=new Uint8Array(pr);for(let fr=0,hr=0;fr<Sr.length;fr++)gr.set(Sr[fr],hr),hr+=Sr[fr].length;return gr}bytes$2.concatBytes=Cr;function Mr(Pr){if(typeof Buffer<"u"&&Pr instanceof Buffer){const Sr=Pr.buffer.slice(Pr.byteOffset,Pr.byteOffset+Pr.byteLength);return new DataView(Sr)}return new DataView(Pr.buffer,Pr.byteOffset,Pr.byteLength)}return bytes$2.createDataView=Mr,bytes$2}var caipTypes$1={};(function(tr){Object.defineProperty(tr,"__esModule",{value:!0}),tr.toCaipChainId=tr.parseCaipAccountId=tr.parseCaipChainId=tr.isCaipAccountAddress=tr.isCaipAccountId=tr.isCaipReference=tr.isCaipNamespace=tr.isCaipChainId=tr.KnownCaipNamespace=tr.CaipAccountAddressStruct=tr.CaipAccountIdStruct=tr.CaipReferenceStruct=tr.CaipNamespaceStruct=tr.CaipChainIdStruct=tr.CAIP_ACCOUNT_ADDRESS_REGEX=tr.CAIP_ACCOUNT_ID_REGEX=tr.CAIP_REFERENCE_REGEX=tr.CAIP_NAMESPACE_REGEX=tr.CAIP_CHAIN_ID_REGEX=void 0;const er=dist$4;tr.CAIP_CHAIN_ID_REGEX=/^(?<namespace>[-a-z0-9]{3,8}):(?<reference>[-_a-zA-Z0-9]{1,32})$/u,tr.CAIP_NAMESPACE_REGEX=/^[-a-z0-9]{3,8}$/u,tr.CAIP_REFERENCE_REGEX=/^[-_a-zA-Z0-9]{1,32}$/u,tr.CAIP_ACCOUNT_ID_REGEX=/^(?<chainId>(?<namespace>[-a-z0-9]{3,8}):(?<reference>[-_a-zA-Z0-9]{1,32})):(?<accountAddress>[-.%a-zA-Z0-9]{1,128})$/u,tr.CAIP_ACCOUNT_ADDRESS_REGEX=/^[-.%a-zA-Z0-9]{1,128}$/u,tr.CaipChainIdStruct=(0,er.pattern)((0,er.string)(),tr.CAIP_CHAIN_ID_REGEX),tr.CaipNamespaceStruct=(0,er.pattern)((0,er.string)(),tr.CAIP_NAMESPACE_REGEX),tr.CaipReferenceStruct=(0,er.pattern)((0,er.string)(),tr.CAIP_REFERENCE_REGEX),tr.CaipAccountIdStruct=(0,er.pattern)((0,er.string)(),tr.CAIP_ACCOUNT_ID_REGEX),tr.CaipAccountAddressStruct=(0,er.pattern)((0,er.string)(),tr.CAIP_ACCOUNT_ADDRESS_REGEX),function(ur){ur.Eip155="eip155"}(tr.KnownCaipNamespace||(tr.KnownCaipNamespace={}));function rr(ur){return(0,er.is)(ur,tr.CaipChainIdStruct)}tr.isCaipChainId=rr;function nr(ur){return(0,er.is)(ur,tr.CaipNamespaceStruct)}tr.isCaipNamespace=nr;function ir(ur){return(0,er.is)(ur,tr.CaipReferenceStruct)}tr.isCaipReference=ir;function sr(ur){return(0,er.is)(ur,tr.CaipAccountIdStruct)}tr.isCaipAccountId=sr;function or(ur){return(0,er.is)(ur,tr.CaipAccountAddressStruct)}tr.isCaipAccountAddress=or;function ar(ur){const dr=tr.CAIP_CHAIN_ID_REGEX.exec(ur);if(!(dr!=null&&dr.groups))throw new Error("Invalid CAIP chain ID.");return{namespace:dr.groups.namespace,reference:dr.groups.reference}}tr.parseCaipChainId=ar;function cr(ur){const dr=tr.CAIP_ACCOUNT_ID_REGEX.exec(ur);if(!(dr!=null&&dr.groups))throw new Error("Invalid CAIP account ID.");return{address:dr.groups.accountAddress,chainId:dr.groups.chainId,chain:{namespace:dr.groups.namespace,reference:dr.groups.reference}}}tr.parseCaipAccountId=cr;function lr(ur,dr){if(!nr(ur))throw new Error(`Invalid "namespace", must match: ${tr.CAIP_NAMESPACE_REGEX.toString()}`);if(!ir(dr))throw new Error(`Invalid "reference", must match: ${tr.CAIP_REFERENCE_REGEX.toString()}`);return`${ur}:${dr}`}tr.toCaipChainId=lr})(caipTypes$1);var checksum$1={};Object.defineProperty(checksum$1,"__esModule",{value:!0});checksum$1.ChecksumStruct=void 0;const superstruct_1$5=dist$4,base64_1$1=base64$3;checksum$1.ChecksumStruct=(0,superstruct_1$5.size)((0,base64_1$1.base64)((0,superstruct_1$5.string)(),{paddingRequired:!0}),44,44);var coercers$1={};Object.defineProperty(coercers$1,"__esModule",{value:!0});coercers$1.createHex=coercers$1.createBytes=coercers$1.createBigInt=coercers$1.createNumber=void 0;const superstruct_1$4=dist$4,assert_1$4=assert$6,bytes_1$2=requireBytes$1(),hex_1$3=requireHex$1(),NumberLikeStruct$1=(0,superstruct_1$4.union)([(0,superstruct_1$4.number)(),(0,superstruct_1$4.bigint)(),(0,superstruct_1$4.string)(),hex_1$3.StrictHexStruct]),NumberCoercer$1=(0,superstruct_1$4.coerce)((0,superstruct_1$4.number)(),NumberLikeStruct$1,Number),BigIntCoercer$1=(0,superstruct_1$4.coerce)((0,superstruct_1$4.bigint)(),NumberLikeStruct$1,BigInt);(0,superstruct_1$4.union)([hex_1$3.StrictHexStruct,(0,superstruct_1$4.instance)(Uint8Array)]);const BytesCoercer$1=(0,superstruct_1$4.coerce)((0,superstruct_1$4.instance)(Uint8Array),(0,superstruct_1$4.union)([hex_1$3.StrictHexStruct]),bytes_1$2.hexToBytes),HexCoercer$1=(0,superstruct_1$4.coerce)(hex_1$3.StrictHexStruct,(0,superstruct_1$4.instance)(Uint8Array),bytes_1$2.bytesToHex);function createNumber$1(tr){try{const er=(0,superstruct_1$4.create)(tr,NumberCoercer$1);return(0,assert_1$4.assert)(Number.isFinite(er),`Expected a number-like value, got "${tr}".`),er}catch(er){throw er instanceof superstruct_1$4.StructError?new Error(`Expected a number-like value, got "${tr}".`):er}}coercers$1.createNumber=createNumber$1;function createBigInt$1(tr){try{return(0,superstruct_1$4.create)(tr,BigIntCoercer$1)}catch(er){throw er instanceof superstruct_1$4.StructError?new Error(`Expected a number-like value, got "${String(er.value)}".`):er}}coercers$1.createBigInt=createBigInt$1;function createBytes$1(tr){if(typeof tr=="string"&&tr.toLowerCase()==="0x")return new Uint8Array;try{return(0,superstruct_1$4.create)(tr,BytesCoercer$1)}catch(er){throw er instanceof superstruct_1$4.StructError?new Error(`Expected a bytes-like value, got "${String(er.value)}".`):er}}coercers$1.createBytes=createBytes$1;function createHex$1(tr){if(tr instanceof Uint8Array&&tr.length===0||typeof tr=="string"&&tr.toLowerCase()==="0x")return"0x";try{return(0,superstruct_1$4.create)(tr,HexCoercer$1)}catch(er){throw er instanceof superstruct_1$4.StructError?new Error(`Expected a bytes-like value, got "${String(er.value)}".`):er}}coercers$1.createHex=createHex$1;var collections$1={},__classPrivateFieldGet$1=commonjsGlobal&&commonjsGlobal.__classPrivateFieldGet||function(tr,er,rr,nr){if(rr==="a"&&!nr)throw new TypeError("Private accessor was defined without a getter");if(typeof er=="function"?tr!==er||!nr:!er.has(tr))throw new TypeError("Cannot read private member from an object whose class did not declare it");return rr==="m"?nr:rr==="a"?nr.call(tr):nr?nr.value:er.get(tr)},__classPrivateFieldSet$1=commonjsGlobal&&commonjsGlobal.__classPrivateFieldSet||function(tr,er,rr,nr,ir){if(nr==="m")throw new TypeError("Private method is not writable");if(nr==="a"&&!ir)throw new TypeError("Private accessor was defined without a setter");if(typeof er=="function"?tr!==er||!ir:!er.has(tr))throw new TypeError("Cannot write private member to an object whose class did not declare it");return nr==="a"?ir.call(tr,rr):ir?ir.value=rr:er.set(tr,rr),rr},_FrozenMap_map$1,_FrozenSet_set$1;Object.defineProperty(collections$1,"__esModule",{value:!0});collections$1.FrozenSet=collections$1.FrozenMap=void 0;let FrozenMap$1=class{get size(){return __classPrivateFieldGet$1(this,_FrozenMap_map$1,"f").size}[(_FrozenMap_map$1=new WeakMap,Symbol.iterator)](){return __classPrivateFieldGet$1(this,_FrozenMap_map$1,"f")[Symbol.iterator]()}constructor(er){_FrozenMap_map$1.set(this,void 0),__classPrivateFieldSet$1(this,_FrozenMap_map$1,new Map(er),"f"),Object.freeze(this)}entries(){return __classPrivateFieldGet$1(this,_FrozenMap_map$1,"f").entries()}forEach(er,rr){return __classPrivateFieldGet$1(this,_FrozenMap_map$1,"f").forEach((nr,ir,sr)=>er.call(rr,nr,ir,this))}get(er){return __classPrivateFieldGet$1(this,_FrozenMap_map$1,"f").get(er)}has(er){return __classPrivateFieldGet$1(this,_FrozenMap_map$1,"f").has(er)}keys(){return __classPrivateFieldGet$1(this,_FrozenMap_map$1,"f").keys()}values(){return __classPrivateFieldGet$1(this,_FrozenMap_map$1,"f").values()}toString(){return`FrozenMap(${this.size}) {${this.size>0?` ${[...this.entries()].map(([er,rr])=>`${String(er)} => ${String(rr)}`).join(", ")} `:""}}`}};collections$1.FrozenMap=FrozenMap$1;let FrozenSet$1=class{get size(){return __classPrivateFieldGet$1(this,_FrozenSet_set$1,"f").size}[(_FrozenSet_set$1=new WeakMap,Symbol.iterator)](){return __classPrivateFieldGet$1(this,_FrozenSet_set$1,"f")[Symbol.iterator]()}constructor(er){_FrozenSet_set$1.set(this,void 0),__classPrivateFieldSet$1(this,_FrozenSet_set$1,new Set(er),"f"),Object.freeze(this)}entries(){return __classPrivateFieldGet$1(this,_FrozenSet_set$1,"f").entries()}forEach(er,rr){return __classPrivateFieldGet$1(this,_FrozenSet_set$1,"f").forEach((nr,ir,sr)=>er.call(rr,nr,ir,this))}has(er){return __classPrivateFieldGet$1(this,_FrozenSet_set$1,"f").has(er)}keys(){return __classPrivateFieldGet$1(this,_FrozenSet_set$1,"f").keys()}values(){return __classPrivateFieldGet$1(this,_FrozenSet_set$1,"f").values()}toString(){return`FrozenSet(${this.size}) {${this.size>0?` ${[...this.values()].map(er=>String(er)).join(", ")} `:""}}`}};collections$1.FrozenSet=FrozenSet$1;Object.freeze(FrozenMap$1);Object.freeze(FrozenMap$1.prototype);Object.freeze(FrozenSet$1);Object.freeze(FrozenSet$1.prototype);var encryptionTypes$1={};Object.defineProperty(encryptionTypes$1,"__esModule",{value:!0});var json$1={};(function(tr){Object.defineProperty(tr,"__esModule",{value:!0}),tr.getJsonRpcIdValidator=tr.assertIsJsonRpcError=tr.isJsonRpcError=tr.assertIsJsonRpcFailure=tr.isJsonRpcFailure=tr.assertIsJsonRpcSuccess=tr.isJsonRpcSuccess=tr.assertIsJsonRpcResponse=tr.isJsonRpcResponse=tr.assertIsPendingJsonRpcResponse=tr.isPendingJsonRpcResponse=tr.JsonRpcResponseStruct=tr.JsonRpcFailureStruct=tr.JsonRpcSuccessStruct=tr.PendingJsonRpcResponseStruct=tr.assertIsJsonRpcRequest=tr.isJsonRpcRequest=tr.assertIsJsonRpcNotification=tr.isJsonRpcNotification=tr.JsonRpcNotificationStruct=tr.JsonRpcRequestStruct=tr.JsonRpcParamsStruct=tr.JsonRpcErrorStruct=tr.JsonRpcIdStruct=tr.JsonRpcVersionStruct=tr.jsonrpc2=tr.getJsonSize=tr.getSafeJson=tr.isValidJson=tr.JsonStruct=tr.UnsafeJsonStruct=tr.exactOptional=tr.object=void 0;const er=dist$4,rr=assert$6,nr=misc$1,ir=Pr=>(0,er.object)(Pr);tr.object=ir;function sr({path:Pr,branch:Sr}){const pr=Pr[Pr.length-1];return(0,nr.hasProperty)(Sr[Sr.length-2],pr)}function or(Pr){return new er.Struct({...Pr,type:`optional ${Pr.type}`,validator:(Sr,pr)=>!sr(pr)||Pr.validator(Sr,pr),refiner:(Sr,pr)=>!sr(pr)||Pr.refiner(Sr,pr)})}tr.exactOptional=or;const ar=()=>(0,er.define)("finite number",Pr=>(0,er.is)(Pr,(0,er.number)())&&Number.isFinite(Pr));tr.UnsafeJsonStruct=(0,er.union)([(0,er.literal)(null),(0,er.boolean)(),ar(),(0,er.string)(),(0,er.array)((0,er.lazy)(()=>tr.UnsafeJsonStruct)),(0,er.record)((0,er.string)(),(0,er.lazy)(()=>tr.UnsafeJsonStruct))]),tr.JsonStruct=(0,er.coerce)(tr.UnsafeJsonStruct,(0,er.any)(),Pr=>((0,rr.assertStruct)(Pr,tr.UnsafeJsonStruct),JSON.parse(JSON.stringify(Pr,(Sr,pr)=>{if(!(Sr==="__proto__"||Sr==="constructor"))return pr}))));function cr(Pr){try{return lr(Pr),!0}catch{return!1}}tr.isValidJson=cr;function lr(Pr){return(0,er.create)(Pr,tr.JsonStruct)}tr.getSafeJson=lr;function ur(Pr){(0,rr.assertStruct)(Pr,tr.JsonStruct,"Invalid JSON value");const Sr=JSON.stringify(Pr);return new TextEncoder().encode(Sr).byteLength}tr.getJsonSize=ur,tr.jsonrpc2="2.0",tr.JsonRpcVersionStruct=(0,er.literal)(tr.jsonrpc2),tr.JsonRpcIdStruct=(0,er.nullable)((0,er.union)([(0,er.number)(),(0,er.string)()])),tr.JsonRpcErrorStruct=(0,tr.object)({code:(0,er.integer)(),message:(0,er.string)(),data:or(tr.JsonStruct),stack:or((0,er.string)())}),tr.JsonRpcParamsStruct=(0,er.union)([(0,er.record)((0,er.string)(),tr.JsonStruct),(0,er.array)(tr.JsonStruct)]),tr.JsonRpcRequestStruct=(0,tr.object)({id:tr.JsonRpcIdStruct,jsonrpc:tr.JsonRpcVersionStruct,method:(0,er.string)(),params:or(tr.JsonRpcParamsStruct)}),tr.JsonRpcNotificationStruct=(0,tr.object)({jsonrpc:tr.JsonRpcVersionStruct,method:(0,er.string)(),params:or(tr.JsonRpcParamsStruct)});function dr(Pr){return(0,er.is)(Pr,tr.JsonRpcNotificationStruct)}tr.isJsonRpcNotification=dr;function yr(Pr,Sr){(0,rr.assertStruct)(Pr,tr.JsonRpcNotificationStruct,"Invalid JSON-RPC notification",Sr)}tr.assertIsJsonRpcNotification=yr;function mr(Pr){return(0,er.is)(Pr,tr.JsonRpcRequestStruct)}tr.isJsonRpcRequest=mr;function wr(Pr,Sr){(0,rr.assertStruct)(Pr,tr.JsonRpcRequestStruct,"Invalid JSON-RPC request",Sr)}tr.assertIsJsonRpcRequest=wr,tr.PendingJsonRpcResponseStruct=(0,er.object)({id:tr.JsonRpcIdStruct,jsonrpc:tr.JsonRpcVersionStruct,result:(0,er.optional)((0,er.unknown)()),error:(0,er.optional)(tr.JsonRpcErrorStruct)}),tr.JsonRpcSuccessStruct=(0,tr.object)({id:tr.JsonRpcIdStruct,jsonrpc:tr.JsonRpcVersionStruct,result:tr.JsonStruct}),tr.JsonRpcFailureStruct=(0,tr.object)({id:tr.JsonRpcIdStruct,jsonrpc:tr.JsonRpcVersionStruct,error:tr.JsonRpcErrorStruct}),tr.JsonRpcResponseStruct=(0,er.union)([tr.JsonRpcSuccessStruct,tr.JsonRpcFailureStruct]);function xr(Pr){return(0,er.is)(Pr,tr.PendingJsonRpcResponseStruct)}tr.isPendingJsonRpcResponse=xr;function Or(Pr,Sr){(0,rr.assertStruct)(Pr,tr.PendingJsonRpcResponseStruct,"Invalid pending JSON-RPC response",Sr)}tr.assertIsPendingJsonRpcResponse=Or;function Tr(Pr){return(0,er.is)(Pr,tr.JsonRpcResponseStruct)}tr.isJsonRpcResponse=Tr;function Ar(Pr,Sr){(0,rr.assertStruct)(Pr,tr.JsonRpcResponseStruct,"Invalid JSON-RPC response",Sr)}tr.assertIsJsonRpcResponse=Ar;function Nr(Pr){return(0,er.is)(Pr,tr.JsonRpcSuccessStruct)}tr.isJsonRpcSuccess=Nr;function Ur(Pr,Sr){(0,rr.assertStruct)(Pr,tr.JsonRpcSuccessStruct,"Invalid JSON-RPC success response",Sr)}tr.assertIsJsonRpcSuccess=Ur;function Dr(Pr){return(0,er.is)(Pr,tr.JsonRpcFailureStruct)}tr.isJsonRpcFailure=Dr;function Hr(Pr,Sr){(0,rr.assertStruct)(Pr,tr.JsonRpcFailureStruct,"Invalid JSON-RPC failure response",Sr)}tr.assertIsJsonRpcFailure=Hr;function zr(Pr){return(0,er.is)(Pr,tr.JsonRpcErrorStruct)}tr.isJsonRpcError=zr;function Cr(Pr,Sr){(0,rr.assertStruct)(Pr,tr.JsonRpcErrorStruct,"Invalid JSON-RPC error",Sr)}tr.assertIsJsonRpcError=Cr;function Mr(Pr){const{permitEmptyString:Sr,permitFractions:pr,permitNull:gr}={permitEmptyString:!0,permitFractions:!1,permitNull:!0,...Pr};return hr=>!!(typeof hr=="number"&&(pr||Number.isInteger(hr))||typeof hr=="string"&&(Sr||hr.length>0)||gr&&hr===null)}tr.getJsonRpcIdValidator=Mr})(json$1);var keyring$1={};Object.defineProperty(keyring$1,"__esModule",{value:!0});var logging$1={},browser$1={exports:{}},ms,hasRequiredMs;function requireMs(){if(hasRequiredMs)return ms;hasRequiredMs=1;var tr=1e3,er=tr*60,rr=er*60,nr=rr*24,ir=nr*7,sr=nr*365.25;ms=function(ur,dr){dr=dr||{};var yr=typeof ur;if(yr==="string"&&ur.length>0)return or(ur);if(yr==="number"&&isFinite(ur))return dr.long?cr(ur):ar(ur);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(ur))};function or(ur){if(ur=String(ur),!(ur.length>100)){var dr=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(ur);if(dr){var yr=parseFloat(dr[1]),mr=(dr[2]||"ms").toLowerCase();switch(mr){case"years":case"year":case"yrs":case"yr":case"y":return yr*sr;case"weeks":case"week":case"w":return yr*ir;case"days":case"day":case"d":return yr*nr;case"hours":case"hour":case"hrs":case"hr":case"h":return yr*rr;case"minutes":case"minute":case"mins":case"min":case"m":return yr*er;case"seconds":case"second":case"secs":case"sec":case"s":return yr*tr;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return yr;default:return}}}}function ar(ur){var dr=Math.abs(ur);return dr>=nr?Math.round(ur/nr)+"d":dr>=rr?Math.round(ur/rr)+"h":dr>=er?Math.round(ur/er)+"m":dr>=tr?Math.round(ur/tr)+"s":ur+"ms"}function cr(ur){var dr=Math.abs(ur);return dr>=nr?lr(ur,dr,nr,"day"):dr>=rr?lr(ur,dr,rr,"hour"):dr>=er?lr(ur,dr,er,"minute"):dr>=tr?lr(ur,dr,tr,"second"):ur+" ms"}function lr(ur,dr,yr,mr){var wr=dr>=yr*1.5;return Math.round(ur/yr)+" "+mr+(wr?"s":"")}return ms}function setup(tr){rr.debug=rr,rr.default=rr,rr.coerce=cr,rr.disable=sr,rr.enable=ir,rr.enabled=or,rr.humanize=requireMs(),rr.destroy=lr,Object.keys(tr).forEach(ur=>{rr[ur]=tr[ur]}),rr.names=[],rr.skips=[],rr.formatters={};function er(ur){let dr=0;for(let yr=0;yr<ur.length;yr++)dr=(dr<<5)-dr+ur.charCodeAt(yr),dr|=0;return rr.colors[Math.abs(dr)%rr.colors.length]}rr.selectColor=er;function rr(ur){let dr,yr=null,mr,wr;function xr(...Or){if(!xr.enabled)return;const Tr=xr,Ar=Number(new Date),Nr=Ar-(dr||Ar);Tr.diff=Nr,Tr.prev=dr,Tr.curr=Ar,dr=Ar,Or[0]=rr.coerce(Or[0]),typeof Or[0]!="string"&&Or.unshift("%O");let Ur=0;Or[0]=Or[0].replace(/%([a-zA-Z%])/g,(Hr,zr)=>{if(Hr==="%%")return"%";Ur++;const Cr=rr.formatters[zr];if(typeof Cr=="function"){const Mr=Or[Ur];Hr=Cr.call(Tr,Mr),Or.splice(Ur,1),Ur--}return Hr}),rr.formatArgs.call(Tr,Or),(Tr.log||rr.log).apply(Tr,Or)}return xr.namespace=ur,xr.useColors=rr.useColors(),xr.color=rr.selectColor(ur),xr.extend=nr,xr.destroy=rr.destroy,Object.defineProperty(xr,"enabled",{enumerable:!0,configurable:!1,get:()=>yr!==null?yr:(mr!==rr.namespaces&&(mr=rr.namespaces,wr=rr.enabled(ur)),wr),set:Or=>{yr=Or}}),typeof rr.init=="function"&&rr.init(xr),xr}function nr(ur,dr){const yr=rr(this.namespace+(typeof dr>"u"?":":dr)+ur);return yr.log=this.log,yr}function ir(ur){rr.save(ur),rr.namespaces=ur,rr.names=[],rr.skips=[];let dr;const yr=(typeof ur=="string"?ur:"").split(/[\s,]+/),mr=yr.length;for(dr=0;dr<mr;dr++)yr[dr]&&(ur=yr[dr].replace(/\*/g,".*?"),ur[0]==="-"?rr.skips.push(new RegExp("^"+ur.slice(1)+"$")):rr.names.push(new RegExp("^"+ur+"$")))}function sr(){const ur=[...rr.names.map(ar),...rr.skips.map(ar).map(dr=>"-"+dr)].join(",");return rr.enable(""),ur}function or(ur){if(ur[ur.length-1]==="*")return!0;let dr,yr;for(dr=0,yr=rr.skips.length;dr<yr;dr++)if(rr.skips[dr].test(ur))return!1;for(dr=0,yr=rr.names.length;dr<yr;dr++)if(rr.names[dr].test(ur))return!0;return!1}function ar(ur){return ur.toString().substring(2,ur.toString().length-2).replace(/\.\*\?$/,"*")}function cr(ur){return ur instanceof Error?ur.stack||ur.message:ur}function lr(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return rr.enable(rr.load()),rr}var common=setup;(function(tr,er){var rr={};er.formatArgs=ir,er.save=sr,er.load=or,er.useColors=nr,er.storage=ar(),er.destroy=(()=>{let lr=!1;return()=>{lr||(lr=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),er.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function nr(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let lr;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(lr=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(lr[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function ir(lr){if(lr[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+lr[0]+(this.useColors?"%c ":" ")+"+"+tr.exports.humanize(this.diff),!this.useColors)return;const ur="color: "+this.color;lr.splice(1,0,ur,"color: inherit");let dr=0,yr=0;lr[0].replace(/%[a-zA-Z%]/g,mr=>{mr!=="%%"&&(dr++,mr==="%c"&&(yr=dr))}),lr.splice(yr,0,ur)}er.log=console.debug||console.log||(()=>{});function sr(lr){try{lr?er.storage.setItem("debug",lr):er.storage.removeItem("debug")}catch{}}function or(){let lr;try{lr=er.storage.getItem("debug")}catch{}return!lr&&typeof process<"u"&&"env"in process&&(lr=rr.DEBUG),lr}function ar(){try{return localStorage}catch{}}tr.exports=common(er);const{formatters:cr}=tr.exports;cr.j=function(lr){try{return JSON.stringify(lr)}catch(ur){return"[UnexpectedJSONParseError]: "+ur.message}}})(browser$1,browser$1.exports);var browserExports=browser$1.exports,__importDefault$5=commonjsGlobal&&commonjsGlobal.__importDefault||function(tr){return tr&&tr.__esModule?tr:{default:tr}};Object.defineProperty(logging$1,"__esModule",{value:!0});logging$1.createModuleLogger=logging$1.createProjectLogger=void 0;const debug_1$3=__importDefault$5(browserExports),globalLogger$1=(0,debug_1$3.default)("metamask");function createProjectLogger$1(tr){return globalLogger$1.extend(tr)}logging$1.createProjectLogger=createProjectLogger$1;function createModuleLogger$1(tr,er){return tr.extend(er)}logging$1.createModuleLogger=createModuleLogger$1;var number$2={};Object.defineProperty(number$2,"__esModule",{value:!0});number$2.hexToBigInt=number$2.hexToNumber=number$2.bigIntToHex=number$2.numberToHex=void 0;const assert_1$3=assert$6,hex_1$2=requireHex$1(),numberToHex$1=tr=>((0,assert_1$3.assert)(typeof tr=="number","Value must be a number."),(0,assert_1$3.assert)(tr>=0,"Value must be a non-negative number."),(0,assert_1$3.assert)(Number.isSafeInteger(tr),"Value is not a safe integer. Use `bigIntToHex` instead."),(0,hex_1$2.add0x)(tr.toString(16)));number$2.numberToHex=numberToHex$1;const bigIntToHex$1=tr=>((0,assert_1$3.assert)(typeof tr=="bigint","Value must be a bigint."),(0,assert_1$3.assert)(tr>=0,"Value must be a non-negative bigint."),(0,hex_1$2.add0x)(tr.toString(16)));number$2.bigIntToHex=bigIntToHex$1;const hexToNumber$1=tr=>{(0,hex_1$2.assertIsHexString)(tr);const er=parseInt(tr,16);return(0,assert_1$3.assert)(Number.isSafeInteger(er),"Value is not a safe integer. Use `hexToBigInt` instead."),er};number$2.hexToNumber=hexToNumber$1;const hexToBigInt$1=tr=>((0,hex_1$2.assertIsHexString)(tr),BigInt((0,hex_1$2.add0x)(tr)));number$2.hexToBigInt=hexToBigInt$1;var opaque$1={};Object.defineProperty(opaque$1,"__esModule",{value:!0});var promise$1={};Object.defineProperty(promise$1,"__esModule",{value:!0});promise$1.createDeferredPromise=void 0;function createDeferredPromise$1({suppressUnhandledRejection:tr=!1}={}){let er,rr;const nr=new Promise((ir,sr)=>{er=ir,rr=sr});return tr&&nr.catch(ir=>{}),{promise:nr,resolve:er,reject:rr}}promise$1.createDeferredPromise=createDeferredPromise$1;var time$1={};(function(tr){Object.defineProperty(tr,"__esModule",{value:!0}),tr.timeSince=tr.inMilliseconds=tr.Duration=void 0,function(sr){sr[sr.Millisecond=1]="Millisecond",sr[sr.Second=1e3]="Second",sr[sr.Minute=6e4]="Minute",sr[sr.Hour=36e5]="Hour",sr[sr.Day=864e5]="Day",sr[sr.Week=6048e5]="Week",sr[sr.Year=31536e6]="Year"}(tr.Duration||(tr.Duration={}));const er=sr=>Number.isInteger(sr)&&sr>=0,rr=(sr,or)=>{if(!er(sr))throw new Error(`"${or}" must be a non-negative integer. Received: "${sr}".`)};function nr(sr,or){return rr(sr,"count"),sr*or}tr.inMilliseconds=nr;function ir(sr){return rr(sr,"timestamp"),Date.now()-sr}tr.timeSince=ir})(time$1);var transactionTypes$1={};Object.defineProperty(transactionTypes$1,"__esModule",{value:!0});var versions$1={},re$5={exports:{}};const SEMVER_SPEC_VERSION$1="2.0.0",MAX_LENGTH$3=256,MAX_SAFE_INTEGER$3=Number.MAX_SAFE_INTEGER||9007199254740991,MAX_SAFE_COMPONENT_LENGTH$1=16,MAX_SAFE_BUILD_LENGTH$1=MAX_LENGTH$3-6,RELEASE_TYPES$1=["major","premajor","minor","preminor","patch","prepatch","prerelease"];var constants$6={MAX_LENGTH:MAX_LENGTH$3,MAX_SAFE_COMPONENT_LENGTH:MAX_SAFE_COMPONENT_LENGTH$1,MAX_SAFE_BUILD_LENGTH:MAX_SAFE_BUILD_LENGTH$1,MAX_SAFE_INTEGER:MAX_SAFE_INTEGER$3,RELEASE_TYPES:RELEASE_TYPES$1,SEMVER_SPEC_VERSION:SEMVER_SPEC_VERSION$1,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2},define_process_env_default$1={};const debug$3=typeof process=="object"&&define_process_env_default$1&&define_process_env_default$1.NODE_DEBUG&&/\bsemver\b/i.test(define_process_env_default$1.NODE_DEBUG)?(...tr)=>console.error("SEMVER",...tr):()=>{};var debug_1$2=debug$3;(function(tr,er){const{MAX_SAFE_COMPONENT_LENGTH:rr,MAX_SAFE_BUILD_LENGTH:nr,MAX_LENGTH:ir}=constants$6,sr=debug_1$2;er=tr.exports={};const or=er.re=[],ar=er.safeRe=[],cr=er.src=[],lr=er.t={};let ur=0;const dr="[a-zA-Z0-9-]",yr=[["\\s",1],["\\d",ir],[dr,nr]],mr=xr=>{for(const[Or,Tr]of yr)xr=xr.split(`${Or}*`).join(`${Or}{0,${Tr}}`).split(`${Or}+`).join(`${Or}{1,${Tr}}`);return xr},wr=(xr,Or,Tr)=>{const Ar=mr(Or),Nr=ur++;sr(xr,Nr,Or),lr[xr]=Nr,cr[Nr]=Or,or[Nr]=new RegExp(Or,Tr?"g":void 0),ar[Nr]=new RegExp(Ar,Tr?"g":void 0)};wr("NUMERICIDENTIFIER","0|[1-9]\\d*"),wr("NUMERICIDENTIFIERLOOSE","\\d+"),wr("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${dr}*`),wr("MAINVERSION",`(${cr[lr.NUMERICIDENTIFIER]})\\.(${cr[lr.NUMERICIDENTIFIER]})\\.(${cr[lr.NUMERICIDENTIFIER]})`),wr("MAINVERSIONLOOSE",`(${cr[lr.NUMERICIDENTIFIERLOOSE]})\\.(${cr[lr.NUMERICIDENTIFIERLOOSE]})\\.(${cr[lr.NUMERICIDENTIFIERLOOSE]})`),wr("PRERELEASEIDENTIFIER",`(?:${cr[lr.NUMERICIDENTIFIER]}|${cr[lr.NONNUMERICIDENTIFIER]})`),wr("PRERELEASEIDENTIFIERLOOSE",`(?:${cr[lr.NUMERICIDENTIFIERLOOSE]}|${cr[lr.NONNUMERICIDENTIFIER]})`),wr("PRERELEASE",`(?:-(${cr[lr.PRERELEASEIDENTIFIER]}(?:\\.${cr[lr.PRERELEASEIDENTIFIER]})*))`),wr("PRERELEASELOOSE",`(?:-?(${cr[lr.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${cr[lr.PRERELEASEIDENTIFIERLOOSE]})*))`),wr("BUILDIDENTIFIER",`${dr}+`),wr("BUILD",`(?:\\+(${cr[lr.BUILDIDENTIFIER]}(?:\\.${cr[lr.BUILDIDENTIFIER]})*))`),wr("FULLPLAIN",`v?${cr[lr.MAINVERSION]}${cr[lr.PRERELEASE]}?${cr[lr.BUILD]}?`),wr("FULL",`^${cr[lr.FULLPLAIN]}$`),wr("LOOSEPLAIN",`[v=\\s]*${cr[lr.MAINVERSIONLOOSE]}${cr[lr.PRERELEASELOOSE]}?${cr[lr.BUILD]}?`),wr("LOOSE",`^${cr[lr.LOOSEPLAIN]}$`),wr("GTLT","((?:<|>)?=?)"),wr("XRANGEIDENTIFIERLOOSE",`${cr[lr.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),wr("XRANGEIDENTIFIER",`${cr[lr.NUMERICIDENTIFIER]}|x|X|\\*`),wr("XRANGEPLAIN",`[v=\\s]*(${cr[lr.XRANGEIDENTIFIER]})(?:\\.(${cr[lr.XRANGEIDENTIFIER]})(?:\\.(${cr[lr.XRANGEIDENTIFIER]})(?:${cr[lr.PRERELEASE]})?${cr[lr.BUILD]}?)?)?`),wr("XRANGEPLAINLOOSE",`[v=\\s]*(${cr[lr.XRANGEIDENTIFIERLOOSE]})(?:\\.(${cr[lr.XRANGEIDENTIFIERLOOSE]})(?:\\.(${cr[lr.XRANGEIDENTIFIERLOOSE]})(?:${cr[lr.PRERELEASELOOSE]})?${cr[lr.BUILD]}?)?)?`),wr("XRANGE",`^${cr[lr.GTLT]}\\s*${cr[lr.XRANGEPLAIN]}$`),wr("XRANGELOOSE",`^${cr[lr.GTLT]}\\s*${cr[lr.XRANGEPLAINLOOSE]}$`),wr("COERCEPLAIN",`(^|[^\\d])(\\d{1,${rr}})(?:\\.(\\d{1,${rr}}))?(?:\\.(\\d{1,${rr}}))?`),wr("COERCE",`${cr[lr.COERCEPLAIN]}(?:$|[^\\d])`),wr("COERCEFULL",cr[lr.COERCEPLAIN]+`(?:${cr[lr.PRERELEASE]})?(?:${cr[lr.BUILD]})?(?:$|[^\\d])`),wr("COERCERTL",cr[lr.COERCE],!0),wr("COERCERTLFULL",cr[lr.COERCEFULL],!0),wr("LONETILDE","(?:~>?)"),wr("TILDETRIM",`(\\s*)${cr[lr.LONETILDE]}\\s+`,!0),er.tildeTrimReplace="$1~",wr("TILDE",`^${cr[lr.LONETILDE]}${cr[lr.XRANGEPLAIN]}$`),wr("TILDELOOSE",`^${cr[lr.LONETILDE]}${cr[lr.XRANGEPLAINLOOSE]}$`),wr("LONECARET","(?:\\^)"),wr("CARETTRIM",`(\\s*)${cr[lr.LONECARET]}\\s+`,!0),er.caretTrimReplace="$1^",wr("CARET",`^${cr[lr.LONECARET]}${cr[lr.XRANGEPLAIN]}$`),wr("CARETLOOSE",`^${cr[lr.LONECARET]}${cr[lr.XRANGEPLAINLOOSE]}$`),wr("COMPARATORLOOSE",`^${cr[lr.GTLT]}\\s*(${cr[lr.LOOSEPLAIN]})$|^$`),wr("COMPARATOR",`^${cr[lr.GTLT]}\\s*(${cr[lr.FULLPLAIN]})$|^$`),wr("COMPARATORTRIM",`(\\s*)${cr[lr.GTLT]}\\s*(${cr[lr.LOOSEPLAIN]}|${cr[lr.XRANGEPLAIN]})`,!0),er.comparatorTrimReplace="$1$2$3",wr("HYPHENRANGE",`^\\s*(${cr[lr.XRANGEPLAIN]})\\s+-\\s+(${cr[lr.XRANGEPLAIN]})\\s*$`),wr("HYPHENRANGELOOSE",`^\\s*(${cr[lr.XRANGEPLAINLOOSE]})\\s+-\\s+(${cr[lr.XRANGEPLAINLOOSE]})\\s*$`),wr("STAR","(<|>)?=?\\s*\\*"),wr("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),wr("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(re$5,re$5.exports);var reExports$1=re$5.exports;const looseOption$1=Object.freeze({loose:!0}),emptyOpts$1=Object.freeze({}),parseOptions$3=tr=>tr?typeof tr!="object"?looseOption$1:tr:emptyOpts$1;var parseOptions_1$1=parseOptions$3;const numeric$1=/^[0-9]+$/,compareIdentifiers$3=(tr,er)=>{const rr=numeric$1.test(tr),nr=numeric$1.test(er);return rr&&nr&&(tr=+tr,er=+er),tr===er?0:rr&&!nr?-1:nr&&!rr?1:tr<er?-1:1},rcompareIdentifiers$1=(tr,er)=>compareIdentifiers$3(er,tr);var identifiers$3={compareIdentifiers:compareIdentifiers$3,rcompareIdentifiers:rcompareIdentifiers$1};const debug$2=debug_1$2,{MAX_LENGTH:MAX_LENGTH$2,MAX_SAFE_INTEGER:MAX_SAFE_INTEGER$2}=constants$6,{safeRe:re$4,t:t$5}=reExports$1,parseOptions$2=parseOptions_1$1,{compareIdentifiers:compareIdentifiers$2}=identifiers$3;let SemVer$r=class El{constructor(er,rr){if(rr=parseOptions$2(rr),er instanceof El){if(er.loose===!!rr.loose&&er.includePrerelease===!!rr.includePrerelease)return er;er=er.version}else if(typeof er!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof er}".`);if(er.length>MAX_LENGTH$2)throw new TypeError(`version is longer than ${MAX_LENGTH$2} characters`);debug$2("SemVer",er,rr),this.options=rr,this.loose=!!rr.loose,this.includePrerelease=!!rr.includePrerelease;const nr=er.trim().match(rr.loose?re$4[t$5.LOOSE]:re$4[t$5.FULL]);if(!nr)throw new TypeError(`Invalid Version: ${er}`);if(this.raw=er,this.major=+nr[1],this.minor=+nr[2],this.patch=+nr[3],this.major>MAX_SAFE_INTEGER$2||this.major<0)throw new TypeError("Invalid major version");if(this.minor>MAX_SAFE_INTEGER$2||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>MAX_SAFE_INTEGER$2||this.patch<0)throw new TypeError("Invalid patch version");nr[4]?this.prerelease=nr[4].split(".").map(ir=>{if(/^[0-9]+$/.test(ir)){const sr=+ir;if(sr>=0&&sr<MAX_SAFE_INTEGER$2)return sr}return ir}):this.prerelease=[],this.build=nr[5]?nr[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(er){if(debug$2("SemVer.compare",this.version,this.options,er),!(er instanceof El)){if(typeof er=="string"&&er===this.version)return 0;er=new El(er,this.options)}return er.version===this.version?0:this.compareMain(er)||this.comparePre(er)}compareMain(er){return er instanceof El||(er=new El(er,this.options)),compareIdentifiers$2(this.major,er.major)||compareIdentifiers$2(this.minor,er.minor)||compareIdentifiers$2(this.patch,er.patch)}comparePre(er){if(er instanceof El||(er=new El(er,this.options)),this.prerelease.length&&!er.prerelease.length)return-1;if(!this.prerelease.length&&er.prerelease.length)return 1;if(!this.prerelease.length&&!er.prerelease.length)return 0;let rr=0;do{const nr=this.prerelease[rr],ir=er.prerelease[rr];if(debug$2("prerelease compare",rr,nr,ir),nr===void 0&&ir===void 0)return 0;if(ir===void 0)return 1;if(nr===void 0)return-1;if(nr===ir)continue;return compareIdentifiers$2(nr,ir)}while(++rr)}compareBuild(er){er instanceof El||(er=new El(er,this.options));let rr=0;do{const nr=this.build[rr],ir=er.build[rr];if(debug$2("build compare",rr,nr,ir),nr===void 0&&ir===void 0)return 0;if(ir===void 0)return 1;if(nr===void 0)return-1;if(nr===ir)continue;return compareIdentifiers$2(nr,ir)}while(++rr)}inc(er,rr,nr){switch(er){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",rr,nr);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",rr,nr);break;case"prepatch":this.prerelease.length=0,this.inc("patch",rr,nr),this.inc("pre",rr,nr);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",rr,nr),this.inc("pre",rr,nr);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const ir=Number(nr)?1:0;if(!rr&&nr===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[ir];else{let sr=this.prerelease.length;for(;--sr>=0;)typeof this.prerelease[sr]=="number"&&(this.prerelease[sr]++,sr=-2);if(sr===-1){if(rr===this.prerelease.join(".")&&nr===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(ir)}}if(rr){let sr=[rr,ir];nr===!1&&(sr=[rr]),compareIdentifiers$2(this.prerelease[0],rr)===0?isNaN(this.prerelease[1])&&(this.prerelease=sr):this.prerelease=sr}break}default:throw new Error(`invalid increment argument: ${er}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};var semver$3=SemVer$r;const SemVer$q=semver$3,parse$d=(tr,er,rr=!1)=>{if(tr instanceof SemVer$q)return tr;try{return new SemVer$q(tr,er)}catch(nr){if(!rr)return null;throw nr}};var parse_1$1=parse$d;const parse$c=parse_1$1,valid$5=(tr,er)=>{const rr=parse$c(tr,er);return rr?rr.version:null};var valid_1$1=valid$5;const parse$b=parse_1$1,clean$3=(tr,er)=>{const rr=parse$b(tr.trim().replace(/^[=v]+/,""),er);return rr?rr.version:null};var clean_1$1=clean$3;const SemVer$p=semver$3,inc$3=(tr,er,rr,nr,ir)=>{typeof rr=="string"&&(ir=nr,nr=rr,rr=void 0);try{return new SemVer$p(tr instanceof SemVer$p?tr.version:tr,rr).inc(er,nr,ir).version}catch{return null}};var inc_1$1=inc$3;const parse$a=parse_1$1,diff$3=(tr,er)=>{const rr=parse$a(tr,null,!0),nr=parse$a(er,null,!0),ir=rr.compare(nr);if(ir===0)return null;const sr=ir>0,or=sr?rr:nr,ar=sr?nr:rr,cr=!!or.prerelease.length;if(!!ar.prerelease.length&&!cr)return!ar.patch&&!ar.minor?"major":or.patch?"patch":or.minor?"minor":"major";const ur=cr?"pre":"";return rr.major!==nr.major?ur+"major":rr.minor!==nr.minor?ur+"minor":rr.patch!==nr.patch?ur+"patch":"prerelease"};var diff_1$1=diff$3;const SemVer$o=semver$3,major$3=(tr,er)=>new SemVer$o(tr,er).major;var major_1$1=major$3;const SemVer$n=semver$3,minor$3=(tr,er)=>new SemVer$n(tr,er).minor;var minor_1$1=minor$3;const SemVer$m=semver$3,patch$3=(tr,er)=>new SemVer$m(tr,er).patch;var patch_1$1=patch$3;const parse$9=parse_1$1,prerelease$3=(tr,er)=>{const rr=parse$9(tr,er);return rr&&rr.prerelease.length?rr.prerelease:null};var prerelease_1$1=prerelease$3;const SemVer$l=semver$3,compare$o=(tr,er,rr)=>new SemVer$l(tr,rr).compare(new SemVer$l(er,rr));var compare_1$1=compare$o;const compare$n=compare_1$1,rcompare$3=(tr,er,rr)=>compare$n(er,tr,rr);var rcompare_1$1=rcompare$3;const compare$m=compare_1$1,compareLoose$3=(tr,er)=>compare$m(tr,er,!0);var compareLoose_1$1=compareLoose$3;const SemVer$k=semver$3,compareBuild$7=(tr,er,rr)=>{const nr=new SemVer$k(tr,rr),ir=new SemVer$k(er,rr);return nr.compare(ir)||nr.compareBuild(ir)};var compareBuild_1$1=compareBuild$7;const compareBuild$6=compareBuild_1$1,sort$3=(tr,er)=>tr.sort((rr,nr)=>compareBuild$6(rr,nr,er));var sort_1$1=sort$3;const compareBuild$5=compareBuild_1$1,rsort$3=(tr,er)=>tr.sort((rr,nr)=>compareBuild$5(nr,rr,er));var rsort_1$1=rsort$3;const compare$l=compare_1$1,gt$9=(tr,er,rr)=>compare$l(tr,er,rr)>0;var gt_1$1=gt$9;const compare$k=compare_1$1,lt$7=(tr,er,rr)=>compare$k(tr,er,rr)<0;var lt_1$1=lt$7;const compare$j=compare_1$1,eq$5=(tr,er,rr)=>compare$j(tr,er,rr)===0;var eq_1$1=eq$5;const compare$i=compare_1$1,neq$5=(tr,er,rr)=>compare$i(tr,er,rr)!==0;var neq_1$1=neq$5;const compare$h=compare_1$1,gte$7=(tr,er,rr)=>compare$h(tr,er,rr)>=0;var gte_1$1=gte$7;const compare$g=compare_1$1,lte$7=(tr,er,rr)=>compare$g(tr,er,rr)<=0;var lte_1$1=lte$7;const eq$4=eq_1$1,neq$4=neq_1$1,gt$8=gt_1$1,gte$6=gte_1$1,lt$6=lt_1$1,lte$6=lte_1$1,cmp$3=(tr,er,rr,nr)=>{switch(er){case"===":return typeof tr=="object"&&(tr=tr.version),typeof rr=="object"&&(rr=rr.version),tr===rr;case"!==":return typeof tr=="object"&&(tr=tr.version),typeof rr=="object"&&(rr=rr.version),tr!==rr;case"":case"=":case"==":return eq$4(tr,rr,nr);case"!=":return neq$4(tr,rr,nr);case">":return gt$8(tr,rr,nr);case">=":return gte$6(tr,rr,nr);case"<":return lt$6(tr,rr,nr);case"<=":return lte$6(tr,rr,nr);default:throw new TypeError(`Invalid operator: ${er}`)}};var cmp_1$1=cmp$3;const SemVer$j=semver$3,parse$8=parse_1$1,{safeRe:re$3,t:t$4}=reExports$1,coerce$3=(tr,er)=>{if(tr instanceof SemVer$j)return tr;if(typeof tr=="number"&&(tr=String(tr)),typeof tr!="string")return null;er=er||{};let rr=null;if(!er.rtl)rr=tr.match(er.includePrerelease?re$3[t$4.COERCEFULL]:re$3[t$4.COERCE]);else{const cr=er.includePrerelease?re$3[t$4.COERCERTLFULL]:re$3[t$4.COERCERTL];let lr;for(;(lr=cr.exec(tr))&&(!rr||rr.index+rr[0].length!==tr.length);)(!rr||lr.index+lr[0].length!==rr.index+rr[0].length)&&(rr=lr),cr.lastIndex=lr.index+lr[1].length+lr[2].length;cr.lastIndex=-1}if(rr===null)return null;const nr=rr[2],ir=rr[3]||"0",sr=rr[4]||"0",or=er.includePrerelease&&rr[5]?`-${rr[5]}`:"",ar=er.includePrerelease&&rr[6]?`+${rr[6]}`:"";return parse$8(`${nr}.${ir}.${sr}${or}${ar}`,er)};var coerce_1$1=coerce$3;let LRUCache$1=class{constructor(){this.max=1e3,this.map=new Map}get(er){const rr=this.map.get(er);if(rr!==void 0)return this.map.delete(er),this.map.set(er,rr),rr}delete(er){return this.map.delete(er)}set(er,rr){if(!this.delete(er)&&rr!==void 0){if(this.map.size>=this.max){const ir=this.map.keys().next().value;this.delete(ir)}this.map.set(er,rr)}return this}};var lrucache$1=LRUCache$1,range$2,hasRequiredRange$1;function requireRange$1(){if(hasRequiredRange$1)return range$2;hasRequiredRange$1=1;const tr=/\s+/g;class er{constructor(hr,br){if(br=ir(br),hr instanceof er)return hr.loose===!!br.loose&&hr.includePrerelease===!!br.includePrerelease?hr:new er(hr.raw,br);if(hr instanceof sr)return this.raw=hr.value,this.set=[[hr]],this.formatted=void 0,this;if(this.options=br,this.loose=!!br.loose,this.includePrerelease=!!br.includePrerelease,this.raw=hr.trim().replace(tr," "),this.set=this.raw.split("||").map(_r=>this.parseRange(_r.trim())).filter(_r=>_r.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const _r=this.set[0];if(this.set=this.set.filter($r=>!xr($r[0])),this.set.length===0)this.set=[_r];else if(this.set.length>1){for(const $r of this.set)if($r.length===1&&Or($r[0])){this.set=[$r];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let hr=0;hr<this.set.length;hr++){hr>0&&(this.formatted+="||");const br=this.set[hr];for(let _r=0;_r<br.length;_r++)_r>0&&(this.formatted+=" "),this.formatted+=br[_r].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(hr){const _r=((this.options.includePrerelease&&mr)|(this.options.loose&&wr))+":"+hr,$r=nr.get(_r);if($r)return $r;const Er=this.options.loose,vr=Er?cr[lr.HYPHENRANGELOOSE]:cr[lr.HYPHENRANGE];hr=hr.replace(vr,pr(this.options.includePrerelease)),or("hyphen replace",hr),hr=hr.replace(cr[lr.COMPARATORTRIM],ur),or("comparator trim",hr),hr=hr.replace(cr[lr.TILDETRIM],dr),or("tilde trim",hr),hr=hr.replace(cr[lr.CARETTRIM],yr),or("caret trim",hr);let Ir=hr.split(" ").map(Wr=>Ar(Wr,this.options)).join(" ").split(/\s+/).map(Wr=>Sr(Wr,this.options));Er&&(Ir=Ir.filter(Wr=>(or("loose invalid filter",Wr,this.options),!!Wr.match(cr[lr.COMPARATORLOOSE])))),or("range list",Ir);const Rr=new Map,Br=Ir.map(Wr=>new sr(Wr,this.options));for(const Wr of Br){if(xr(Wr))return[Wr];Rr.set(Wr.value,Wr)}Rr.size>1&&Rr.has("")&&Rr.delete("");const Jr=[...Rr.values()];return nr.set(_r,Jr),Jr}intersects(hr,br){if(!(hr instanceof er))throw new TypeError("a Range is required");return this.set.some(_r=>Tr(_r,br)&&hr.set.some($r=>Tr($r,br)&&_r.every(Er=>$r.every(vr=>Er.intersects(vr,br)))))}test(hr){if(!hr)return!1;if(typeof hr=="string")try{hr=new ar(hr,this.options)}catch{return!1}for(let br=0;br<this.set.length;br++)if(gr(this.set[br],hr,this.options))return!0;return!1}}range$2=er;const rr=lrucache$1,nr=new rr,ir=parseOptions_1$1,sr=requireComparator$1(),or=debug_1$2,ar=semver$3,{safeRe:cr,t:lr,comparatorTrimReplace:ur,tildeTrimReplace:dr,caretTrimReplace:yr}=reExports$1,{FLAG_INCLUDE_PRERELEASE:mr,FLAG_LOOSE:wr}=constants$6,xr=fr=>fr.value==="<0.0.0-0",Or=fr=>fr.value==="",Tr=(fr,hr)=>{let br=!0;const _r=fr.slice();let $r=_r.pop();for(;br&&_r.length;)br=_r.every(Er=>$r.intersects(Er,hr)),$r=_r.pop();return br},Ar=(fr,hr)=>(or("comp",fr,hr),fr=Hr(fr,hr),or("caret",fr),fr=Ur(fr,hr),or("tildes",fr),fr=Cr(fr,hr),or("xrange",fr),fr=Pr(fr,hr),or("stars",fr),fr),Nr=fr=>!fr||fr.toLowerCase()==="x"||fr==="*",Ur=(fr,hr)=>fr.trim().split(/\s+/).map(br=>Dr(br,hr)).join(" "),Dr=(fr,hr)=>{const br=hr.loose?cr[lr.TILDELOOSE]:cr[lr.TILDE];return fr.replace(br,(_r,$r,Er,vr,Ir)=>{or("tilde",fr,_r,$r,Er,vr,Ir);let Rr;return Nr($r)?Rr="":Nr(Er)?Rr=`>=${$r}.0.0 <${+$r+1}.0.0-0`:Nr(vr)?Rr=`>=${$r}.${Er}.0 <${$r}.${+Er+1}.0-0`:Ir?(or("replaceTilde pr",Ir),Rr=`>=${$r}.${Er}.${vr}-${Ir} <${$r}.${+Er+1}.0-0`):Rr=`>=${$r}.${Er}.${vr} <${$r}.${+Er+1}.0-0`,or("tilde return",Rr),Rr})},Hr=(fr,hr)=>fr.trim().split(/\s+/).map(br=>zr(br,hr)).join(" "),zr=(fr,hr)=>{or("caret",fr,hr);const br=hr.loose?cr[lr.CARETLOOSE]:cr[lr.CARET],_r=hr.includePrerelease?"-0":"";return fr.replace(br,($r,Er,vr,Ir,Rr)=>{or("caret",fr,$r,Er,vr,Ir,Rr);let Br;return Nr(Er)?Br="":Nr(vr)?Br=`>=${Er}.0.0${_r} <${+Er+1}.0.0-0`:Nr(Ir)?Er==="0"?Br=`>=${Er}.${vr}.0${_r} <${Er}.${+vr+1}.0-0`:Br=`>=${Er}.${vr}.0${_r} <${+Er+1}.0.0-0`:Rr?(or("replaceCaret pr",Rr),Er==="0"?vr==="0"?Br=`>=${Er}.${vr}.${Ir}-${Rr} <${Er}.${vr}.${+Ir+1}-0`:Br=`>=${Er}.${vr}.${Ir}-${Rr} <${Er}.${+vr+1}.0-0`:Br=`>=${Er}.${vr}.${Ir}-${Rr} <${+Er+1}.0.0-0`):(or("no pr"),Er==="0"?vr==="0"?Br=`>=${Er}.${vr}.${Ir}${_r} <${Er}.${vr}.${+Ir+1}-0`:Br=`>=${Er}.${vr}.${Ir}${_r} <${Er}.${+vr+1}.0-0`:Br=`>=${Er}.${vr}.${Ir} <${+Er+1}.0.0-0`),or("caret return",Br),Br})},Cr=(fr,hr)=>(or("replaceXRanges",fr,hr),fr.split(/\s+/).map(br=>Mr(br,hr)).join(" ")),Mr=(fr,hr)=>{fr=fr.trim();const br=hr.loose?cr[lr.XRANGELOOSE]:cr[lr.XRANGE];return fr.replace(br,(_r,$r,Er,vr,Ir,Rr)=>{or("xRange",fr,_r,$r,Er,vr,Ir,Rr);const Br=Nr(Er),Jr=Br||Nr(vr),Wr=Jr||Nr(Ir),qr=Wr;return $r==="="&&qr&&($r=""),Rr=hr.includePrerelease?"-0":"",Br?$r===">"||$r==="<"?_r="<0.0.0-0":_r="*":$r&&qr?(Jr&&(vr=0),Ir=0,$r===">"?($r=">=",Jr?(Er=+Er+1,vr=0,Ir=0):(vr=+vr+1,Ir=0)):$r==="<="&&($r="<",Jr?Er=+Er+1:vr=+vr+1),$r==="<"&&(Rr="-0"),_r=`${$r+Er}.${vr}.${Ir}${Rr}`):Jr?_r=`>=${Er}.0.0${Rr} <${+Er+1}.0.0-0`:Wr&&(_r=`>=${Er}.${vr}.0${Rr} <${Er}.${+vr+1}.0-0`),or("xRange return",_r),_r})},Pr=(fr,hr)=>(or("replaceStars",fr,hr),fr.trim().replace(cr[lr.STAR],"")),Sr=(fr,hr)=>(or("replaceGTE0",fr,hr),fr.trim().replace(cr[hr.includePrerelease?lr.GTE0PRE:lr.GTE0],"")),pr=fr=>(hr,br,_r,$r,Er,vr,Ir,Rr,Br,Jr,Wr,qr)=>(Nr(_r)?br="":Nr($r)?br=`>=${_r}.0.0${fr?"-0":""}`:Nr(Er)?br=`>=${_r}.${$r}.0${fr?"-0":""}`:vr?br=`>=${br}`:br=`>=${br}${fr?"-0":""}`,Nr(Br)?Rr="":Nr(Jr)?Rr=`<${+Br+1}.0.0-0`:Nr(Wr)?Rr=`<${Br}.${+Jr+1}.0-0`:qr?Rr=`<=${Br}.${Jr}.${Wr}-${qr}`:fr?Rr=`<${Br}.${Jr}.${+Wr+1}-0`:Rr=`<=${Rr}`,`${br} ${Rr}`.trim()),gr=(fr,hr,br)=>{for(let _r=0;_r<fr.length;_r++)if(!fr[_r].test(hr))return!1;if(hr.prerelease.length&&!br.includePrerelease){for(let _r=0;_r<fr.length;_r++)if(or(fr[_r].semver),fr[_r].semver!==sr.ANY&&fr[_r].semver.prerelease.length>0){const $r=fr[_r].semver;if($r.major===hr.major&&$r.minor===hr.minor&&$r.patch===hr.patch)return!0}return!1}return!0};return range$2}var comparator$1,hasRequiredComparator$1;function requireComparator$1(){if(hasRequiredComparator$1)return comparator$1;hasRequiredComparator$1=1;const tr=Symbol("SemVer ANY");class er{static get ANY(){return tr}constructor(ur,dr){if(dr=rr(dr),ur instanceof er){if(ur.loose===!!dr.loose)return ur;ur=ur.value}ur=ur.trim().split(/\s+/).join(" "),or("comparator",ur,dr),this.options=dr,this.loose=!!dr.loose,this.parse(ur),this.semver===tr?this.value="":this.value=this.operator+this.semver.version,or("comp",this)}parse(ur){const dr=this.options.loose?nr[ir.COMPARATORLOOSE]:nr[ir.COMPARATOR],yr=ur.match(dr);if(!yr)throw new TypeError(`Invalid comparator: ${ur}`);this.operator=yr[1]!==void 0?yr[1]:"",this.operator==="="&&(this.operator=""),yr[2]?this.semver=new ar(yr[2],this.options.loose):this.semver=tr}toString(){return this.value}test(ur){if(or("Comparator.test",ur,this.options.loose),this.semver===tr||ur===tr)return!0;if(typeof ur=="string")try{ur=new ar(ur,this.options)}catch{return!1}return sr(ur,this.operator,this.semver,this.options)}intersects(ur,dr){if(!(ur instanceof er))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new cr(ur.value,dr).test(this.value):ur.operator===""?ur.value===""?!0:new cr(this.value,dr).test(ur.semver):(dr=rr(dr),dr.includePrerelease&&(this.value==="<0.0.0-0"||ur.value==="<0.0.0-0")||!dr.includePrerelease&&(this.value.startsWith("<0.0.0")||ur.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&ur.operator.startsWith(">")||this.operator.startsWith("<")&&ur.operator.startsWith("<")||this.semver.version===ur.semver.version&&this.operator.includes("=")&&ur.operator.includes("=")||sr(this.semver,"<",ur.semver,dr)&&this.operator.startsWith(">")&&ur.operator.startsWith("<")||sr(this.semver,">",ur.semver,dr)&&this.operator.startsWith("<")&&ur.operator.startsWith(">")))}}comparator$1=er;const rr=parseOptions_1$1,{safeRe:nr,t:ir}=reExports$1,sr=cmp_1$1,or=debug_1$2,ar=semver$3,cr=requireRange$1();return comparator$1}const Range$j=requireRange$1(),satisfies$9=(tr,er,rr)=>{try{er=new Range$j(er,rr)}catch{return!1}return er.test(tr)};var satisfies_1$1=satisfies$9;const Range$i=requireRange$1(),toComparators$3=(tr,er)=>new Range$i(tr,er).set.map(rr=>rr.map(nr=>nr.value).join(" ").trim().split(" "));var toComparators_1$1=toComparators$3;const SemVer$i=semver$3,Range$h=requireRange$1(),maxSatisfying$3=(tr,er,rr)=>{let nr=null,ir=null,sr=null;try{sr=new Range$h(er,rr)}catch{return null}return tr.forEach(or=>{sr.test(or)&&(!nr||ir.compare(or)===-1)&&(nr=or,ir=new SemVer$i(nr,rr))}),nr};var maxSatisfying_1$1=maxSatisfying$3;const SemVer$h=semver$3,Range$g=requireRange$1(),minSatisfying$3=(tr,er,rr)=>{let nr=null,ir=null,sr=null;try{sr=new Range$g(er,rr)}catch{return null}return tr.forEach(or=>{sr.test(or)&&(!nr||ir.compare(or)===1)&&(nr=or,ir=new SemVer$h(nr,rr))}),nr};var minSatisfying_1$1=minSatisfying$3;const SemVer$g=semver$3,Range$f=requireRange$1(),gt$7=gt_1$1,minVersion$3=(tr,er)=>{tr=new Range$f(tr,er);let rr=new SemVer$g("0.0.0");if(tr.test(rr)||(rr=new SemVer$g("0.0.0-0"),tr.test(rr)))return rr;rr=null;for(let nr=0;nr<tr.set.length;++nr){const ir=tr.set[nr];let sr=null;ir.forEach(or=>{const ar=new SemVer$g(or.semver.version);switch(or.operator){case">":ar.prerelease.length===0?ar.patch++:ar.prerelease.push(0),ar.raw=ar.format();case"":case">=":(!sr||gt$7(ar,sr))&&(sr=ar);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${or.operator}`)}}),sr&&(!rr||gt$7(rr,sr))&&(rr=sr)}return rr&&tr.test(rr)?rr:null};var minVersion_1$1=minVersion$3;const Range$e=requireRange$1(),validRange$3=(tr,er)=>{try{return new Range$e(tr,er).range||"*"}catch{return null}};var valid$4=validRange$3;const SemVer$f=semver$3,Comparator$5=requireComparator$1(),{ANY:ANY$3}=Comparator$5,Range$d=requireRange$1(),satisfies$8=satisfies_1$1,gt$6=gt_1$1,lt$5=lt_1$1,lte$5=lte_1$1,gte$5=gte_1$1,outside$7=(tr,er,rr,nr)=>{tr=new SemVer$f(tr,nr),er=new Range$d(er,nr);let ir,sr,or,ar,cr;switch(rr){case">":ir=gt$6,sr=lte$5,or=lt$5,ar=">",cr=">=";break;case"<":ir=lt$5,sr=gte$5,or=gt$6,ar="<",cr="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(satisfies$8(tr,er,nr))return!1;for(let lr=0;lr<er.set.length;++lr){const ur=er.set[lr];let dr=null,yr=null;if(ur.forEach(mr=>{mr.semver===ANY$3&&(mr=new Comparator$5(">=0.0.0")),dr=dr||mr,yr=yr||mr,ir(mr.semver,dr.semver,nr)?dr=mr:or(mr.semver,yr.semver,nr)&&(yr=mr)}),dr.operator===ar||dr.operator===cr||(!yr.operator||yr.operator===ar)&&sr(tr,yr.semver))return!1;if(yr.operator===cr&&or(tr,yr.semver))return!1}return!0};var outside_1$1=outside$7;const outside$6=outside_1$1,gtr$3=(tr,er,rr)=>outside$6(tr,er,">",rr);var gtr_1$1=gtr$3;const outside$5=outside_1$1,ltr$3=(tr,er,rr)=>outside$5(tr,er,"<",rr);var ltr_1$1=ltr$3;const Range$c=requireRange$1(),intersects$3=(tr,er,rr)=>(tr=new Range$c(tr,rr),er=new Range$c(er,rr),tr.intersects(er,rr));var intersects_1$1=intersects$3;const satisfies$7=satisfies_1$1,compare$f=compare_1$1;var simplify$1=(tr,er,rr)=>{const nr=[];let ir=null,sr=null;const or=tr.sort((ur,dr)=>compare$f(ur,dr,rr));for(const ur of or)satisfies$7(ur,er,rr)?(sr=ur,ir||(ir=ur)):(sr&&nr.push([ir,sr]),sr=null,ir=null);ir&&nr.push([ir,null]);const ar=[];for(const[ur,dr]of nr)ur===dr?ar.push(ur):!dr&&ur===or[0]?ar.push("*"):dr?ur===or[0]?ar.push(`<=${dr}`):ar.push(`${ur} - ${dr}`):ar.push(`>=${ur}`);const cr=ar.join(" || "),lr=typeof er.raw=="string"?er.raw:String(er);return cr.length<lr.length?cr:er};const Range$b=requireRange$1(),Comparator$4=requireComparator$1(),{ANY:ANY$2}=Comparator$4,satisfies$6=satisfies_1$1,compare$e=compare_1$1,subset$3=(tr,er,rr={})=>{if(tr===er)return!0;tr=new Range$b(tr,rr),er=new Range$b(er,rr);let nr=!1;e:for(const ir of tr.set){for(const sr of er.set){const or=simpleSubset$1(ir,sr,rr);if(nr=nr||or!==null,or)continue e}if(nr)return!1}return!0},minimumVersionWithPreRelease$1=[new Comparator$4(">=0.0.0-0")],minimumVersion$1=[new Comparator$4(">=0.0.0")],simpleSubset$1=(tr,er,rr)=>{if(tr===er)return!0;if(tr.length===1&&tr[0].semver===ANY$2){if(er.length===1&&er[0].semver===ANY$2)return!0;rr.includePrerelease?tr=minimumVersionWithPreRelease$1:tr=minimumVersion$1}if(er.length===1&&er[0].semver===ANY$2){if(rr.includePrerelease)return!0;er=minimumVersion$1}const nr=new Set;let ir,sr;for(const mr of tr)mr.operator===">"||mr.operator===">="?ir=higherGT$1(ir,mr,rr):mr.operator==="<"||mr.operator==="<="?sr=lowerLT$1(sr,mr,rr):nr.add(mr.semver);if(nr.size>1)return null;let or;if(ir&&sr){if(or=compare$e(ir.semver,sr.semver,rr),or>0)return null;if(or===0&&(ir.operator!==">="||sr.operator!=="<="))return null}for(const mr of nr){if(ir&&!satisfies$6(mr,String(ir),rr)||sr&&!satisfies$6(mr,String(sr),rr))return null;for(const wr of er)if(!satisfies$6(mr,String(wr),rr))return!1;return!0}let ar,cr,lr,ur,dr=sr&&!rr.includePrerelease&&sr.semver.prerelease.length?sr.semver:!1,yr=ir&&!rr.includePrerelease&&ir.semver.prerelease.length?ir.semver:!1;dr&&dr.prerelease.length===1&&sr.operator==="<"&&dr.prerelease[0]===0&&(dr=!1);for(const mr of er){if(ur=ur||mr.operator===">"||mr.operator===">=",lr=lr||mr.operator==="<"||mr.operator==="<=",ir){if(yr&&mr.semver.prerelease&&mr.semver.prerelease.length&&mr.semver.major===yr.major&&mr.semver.minor===yr.minor&&mr.semver.patch===yr.patch&&(yr=!1),mr.operator===">"||mr.operator===">="){if(ar=higherGT$1(ir,mr,rr),ar===mr&&ar!==ir)return!1}else if(ir.operator===">="&&!satisfies$6(ir.semver,String(mr),rr))return!1}if(sr){if(dr&&mr.semver.prerelease&&mr.semver.prerelease.length&&mr.semver.major===dr.major&&mr.semver.minor===dr.minor&&mr.semver.patch===dr.patch&&(dr=!1),mr.operator==="<"||mr.operator==="<="){if(cr=lowerLT$1(sr,mr,rr),cr===mr&&cr!==sr)return!1}else if(sr.operator==="<="&&!satisfies$6(sr.semver,String(mr),rr))return!1}if(!mr.operator&&(sr||ir)&&or!==0)return!1}return!(ir&&lr&&!sr&&or!==0||sr&&ur&&!ir&&or!==0||yr||dr)},higherGT$1=(tr,er,rr)=>{if(!tr)return er;const nr=compare$e(tr.semver,er.semver,rr);return nr>0?tr:nr<0||er.operator===">"&&tr.operator===">="?er:tr},lowerLT$1=(tr,er,rr)=>{if(!tr)return er;const nr=compare$e(tr.semver,er.semver,rr);return nr<0?tr:nr>0||er.operator==="<"&&tr.operator==="<="?er:tr};var subset_1$1=subset$3;const internalRe$1=reExports$1,constants$5=constants$6,SemVer$e=semver$3,identifiers$2=identifiers$3,parse$7=parse_1$1,valid$3=valid_1$1,clean$2=clean_1$1,inc$2=inc_1$1,diff$2=diff_1$1,major$2=major_1$1,minor$2=minor_1$1,patch$2=patch_1$1,prerelease$2=prerelease_1$1,compare$d=compare_1$1,rcompare$2=rcompare_1$1,compareLoose$2=compareLoose_1$1,compareBuild$4=compareBuild_1$1,sort$2=sort_1$1,rsort$2=rsort_1$1,gt$5=gt_1$1,lt$4=lt_1$1,eq$3=eq_1$1,neq$3=neq_1$1,gte$4=gte_1$1,lte$4=lte_1$1,cmp$2=cmp_1$1,coerce$2=coerce_1$1,Comparator$3=requireComparator$1(),Range$a=requireRange$1(),satisfies$5=satisfies_1$1,toComparators$2=toComparators_1$1,maxSatisfying$2=maxSatisfying_1$1,minSatisfying$2=minSatisfying_1$1,minVersion$2=minVersion_1$1,validRange$2=valid$4,outside$4=outside_1$1,gtr$2=gtr_1$1,ltr$2=ltr_1$1,intersects$2=intersects_1$1,simplifyRange$1=simplify$1,subset$2=subset_1$1;var semver$2={parse:parse$7,valid:valid$3,clean:clean$2,inc:inc$2,diff:diff$2,major:major$2,minor:minor$2,patch:patch$2,prerelease:prerelease$2,compare:compare$d,rcompare:rcompare$2,compareLoose:compareLoose$2,compareBuild:compareBuild$4,sort:sort$2,rsort:rsort$2,gt:gt$5,lt:lt$4,eq:eq$3,neq:neq$3,gte:gte$4,lte:lte$4,cmp:cmp$2,coerce:coerce$2,Comparator:Comparator$3,Range:Range$a,satisfies:satisfies$5,toComparators:toComparators$2,maxSatisfying:maxSatisfying$2,minSatisfying:minSatisfying$2,minVersion:minVersion$2,validRange:validRange$2,outside:outside$4,gtr:gtr$2,ltr:ltr$2,intersects:intersects$2,simplifyRange:simplifyRange$1,subset:subset$2,SemVer:SemVer$e,re:internalRe$1.re,src:internalRe$1.src,tokens:internalRe$1.t,SEMVER_SPEC_VERSION:constants$5.SEMVER_SPEC_VERSION,RELEASE_TYPES:constants$5.RELEASE_TYPES,compareIdentifiers:identifiers$2.compareIdentifiers,rcompareIdentifiers:identifiers$2.rcompareIdentifiers};(function(tr){Object.defineProperty(tr,"__esModule",{value:!0}),tr.satisfiesVersionRange=tr.gtRange=tr.gtVersion=tr.assertIsSemVerRange=tr.assertIsSemVerVersion=tr.isValidSemVerRange=tr.isValidSemVerVersion=tr.VersionRangeStruct=tr.VersionStruct=void 0;const er=dist$4,rr=semver$2,nr=assert$6;tr.VersionStruct=(0,er.refine)((0,er.string)(),"Version",dr=>(0,rr.valid)(dr)===null?`Expected SemVer version, got "${dr}"`:!0),tr.VersionRangeStruct=(0,er.refine)((0,er.string)(),"Version range",dr=>(0,rr.validRange)(dr)===null?`Expected SemVer range, got "${dr}"`:!0);function ir(dr){return(0,er.is)(dr,tr.VersionStruct)}tr.isValidSemVerVersion=ir;function sr(dr){return(0,er.is)(dr,tr.VersionRangeStruct)}tr.isValidSemVerRange=sr;function or(dr){(0,nr.assertStruct)(dr,tr.VersionStruct)}tr.assertIsSemVerVersion=or;function ar(dr){(0,nr.assertStruct)(dr,tr.VersionRangeStruct)}tr.assertIsSemVerRange=ar;function cr(dr,yr){return(0,rr.gt)(dr,yr)}tr.gtVersion=cr;function lr(dr,yr){return(0,rr.gtr)(dr,yr)}tr.gtRange=lr;function ur(dr,yr){return(0,rr.satisfies)(dr,yr,{includePrerelease:!0})}tr.satisfiesVersionRange=ur})(versions$1);(function(tr){var er=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(nr,ir,sr,or){or===void 0&&(or=sr);var ar=Object.getOwnPropertyDescriptor(ir,sr);(!ar||("get"in ar?!ir.__esModule:ar.writable||ar.configurable))&&(ar={enumerable:!0,get:function(){return ir[sr]}}),Object.defineProperty(nr,or,ar)}:function(nr,ir,sr,or){or===void 0&&(or=sr),nr[or]=ir[sr]}),rr=commonjsGlobal&&commonjsGlobal.__exportStar||function(nr,ir){for(var sr in nr)sr!=="default"&&!Object.prototype.hasOwnProperty.call(ir,sr)&&er(ir,nr,sr)};Object.defineProperty(tr,"__esModule",{value:!0}),rr(assert$6,tr),rr(base64$3,tr),rr(requireBytes$1(),tr),rr(caipTypes$1,tr),rr(checksum$1,tr),rr(coercers$1,tr),rr(collections$1,tr),rr(encryptionTypes$1,tr),rr(errors$4,tr),rr(requireHex$1(),tr),rr(json$1,tr),rr(keyring$1,tr),rr(logging$1,tr),rr(misc$1,tr),rr(number$2,tr),rr(opaque$1,tr),rr(promise$1,tr),rr(time$1,tr),rr(transactionTypes$1,tr),rr(versions$1,tr)})(dist$5);Object.defineProperty(utils$3,"__esModule",{value:!0});utils$3.normalize=utils$3.recoverPublicKey=utils$3.concatSig=utils$3.legacyToBuffer=utils$3.isNullish=utils$3.padWithZeroes=void 0;const util_1$d=dist$7,utils_1$8=dist$5;function padWithZeroes(tr,er){if(tr!==""&&!/^[a-f0-9]+$/iu.test(tr))throw new Error(`Expected an unprefixed hex string. Received: ${tr}`);if(er<0)throw new Error(`Expected a non-negative integer target length. Received: ${er}`);return String.prototype.padStart.call(tr,er,"0")}utils$3.padWithZeroes=padWithZeroes;function isNullish(tr){return tr==null}utils$3.isNullish=isNullish;function legacyToBuffer(tr){return typeof tr=="string"&&!(0,util_1$d.isHexString)(tr)?Buffer.from(tr):(0,util_1$d.toBuffer)(tr)}utils$3.legacyToBuffer=legacyToBuffer;function concatSig(tr,er,rr){const nr=(0,util_1$d.fromSigned)(er),ir=(0,util_1$d.fromSigned)(rr),sr=(0,util_1$d.bufferToInt)(tr),or=padWithZeroes((0,util_1$d.toUnsigned)(nr).toString("hex"),64),ar=padWithZeroes((0,util_1$d.toUnsigned)(ir).toString("hex"),64),cr=(0,utils_1$8.remove0x)((0,utils_1$8.numberToHex)(sr));return(0,utils_1$8.add0x)(or.concat(ar,cr))}utils$3.concatSig=concatSig;function recoverPublicKey(tr,er){const rr=(0,util_1$d.fromRpcSig)(er);return(0,util_1$d.ecrecover)(tr,rr.v,rr.r,rr.s)}utils$3.recoverPublicKey=recoverPublicKey;function normalize(tr){if(!isNullish(tr)){if(typeof tr=="number"){if(tr<0)return"0x";const er=(0,utils_1$8.numberToBytes)(tr);tr=(0,utils_1$8.bytesToHex)(er)}if(typeof tr!="string"){let er="eth-sig-util.normalize() requires hex string or integer input.";throw er+=` received ${typeof tr}: ${tr}`,new Error(er)}return(0,utils_1$8.add0x)(tr.toLowerCase())}}utils$3.normalize=normalize;Object.defineProperty(personalSign$1,"__esModule",{value:!0});personalSign$1.extractPublicKey=personalSign$1.recoverPersonalSignature=personalSign$1.personalSign=void 0;const util_1$c=dist$7,utils_1$7=utils$3;function personalSign({privateKey:tr,data:er}){if((0,utils_1$7.isNullish)(er))throw new Error("Missing data parameter");if((0,utils_1$7.isNullish)(tr))throw new Error("Missing privateKey parameter");const rr=(0,utils_1$7.legacyToBuffer)(er),nr=(0,util_1$c.hashPersonalMessage)(rr),ir=(0,util_1$c.ecsign)(nr,tr);return(0,utils_1$7.concatSig)((0,util_1$c.toBuffer)(ir.v),ir.r,ir.s)}personalSign$1.personalSign=personalSign;function recoverPersonalSignature({data:tr,signature:er}){if((0,utils_1$7.isNullish)(tr))throw new Error("Missing data parameter");if((0,utils_1$7.isNullish)(er))throw new Error("Missing signature parameter");const rr=getPublicKeyFor(tr,er),nr=(0,util_1$c.publicToAddress)(rr);return(0,util_1$c.bufferToHex)(nr)}personalSign$1.recoverPersonalSignature=recoverPersonalSignature;function extractPublicKey({data:tr,signature:er}){if((0,utils_1$7.isNullish)(tr))throw new Error("Missing data parameter");if((0,utils_1$7.isNullish)(er))throw new Error("Missing signature parameter");return`0x${getPublicKeyFor(tr,er).toString("hex")}`}personalSign$1.extractPublicKey=extractPublicKey;function getPublicKeyFor(tr,er){const rr=(0,util_1$c.hashPersonalMessage)((0,utils_1$7.legacyToBuffer)(tr));return(0,utils_1$7.recoverPublicKey)(rr,er)}var signTypedData={},dist$3={},abi$3={},dist$2={},assert$3={},errors$3={},misc={};(function(tr){Object.defineProperty(tr,"__esModule",{value:!0}),tr.calculateNumberSize=tr.calculateStringSize=tr.isASCII=tr.isPlainObject=tr.ESCAPE_CHARACTERS_REGEXP=tr.JsonSize=tr.getKnownPropertyNames=tr.hasProperty=tr.isObject=tr.isNullOrUndefined=tr.isNonEmptyArray=void 0;function er(ur){return Array.isArray(ur)&&ur.length>0}tr.isNonEmptyArray=er;function rr(ur){return ur==null}tr.isNullOrUndefined=rr;function nr(ur){return!!ur&&typeof ur=="object"&&!Array.isArray(ur)}tr.isObject=nr;const ir=(ur,dr)=>Object.hasOwnProperty.call(ur,dr);tr.hasProperty=ir;function sr(ur){return Object.getOwnPropertyNames(ur)}tr.getKnownPropertyNames=sr,function(ur){ur[ur.Null=4]="Null",ur[ur.Comma=1]="Comma",ur[ur.Wrapper=1]="Wrapper",ur[ur.True=4]="True",ur[ur.False=5]="False",ur[ur.Quote=1]="Quote",ur[ur.Colon=1]="Colon",ur[ur.Date=24]="Date"}(tr.JsonSize||(tr.JsonSize={})),tr.ESCAPE_CHARACTERS_REGEXP=/"|\\|\n|\r|\t/gu;function or(ur){if(typeof ur!="object"||ur===null)return!1;try{let dr=ur;for(;Object.getPrototypeOf(dr)!==null;)dr=Object.getPrototypeOf(dr);return Object.getPrototypeOf(ur)===dr}catch{return!1}}tr.isPlainObject=or;function ar(ur){return ur.charCodeAt(0)<=127}tr.isASCII=ar;function cr(ur){return ur.split("").reduce((yr,mr)=>ar(mr)?yr+1:yr+2,0)+(ur.match(tr.ESCAPE_CHARACTERS_REGEXP)??[]).length}tr.calculateStringSize=cr;function lr(ur){return ur.toString().length}tr.calculateNumberSize=lr})(misc);Object.defineProperty(errors$3,"__esModule",{value:!0});errors$3.wrapError=errors$3.getErrorMessage=errors$3.isErrorWithStack=errors$3.isErrorWithMessage=errors$3.isErrorWithCode=void 0;const pony_cause_1=ponyCause,misc_1=misc;function isError(tr){return tr instanceof Error||(0,misc_1.isObject)(tr)&&tr.constructor.name==="Error"}function isErrorWithCode(tr){return typeof tr=="object"&&tr!==null&&"code"in tr}errors$3.isErrorWithCode=isErrorWithCode;function isErrorWithMessage(tr){return typeof tr=="object"&&tr!==null&&"message"in tr}errors$3.isErrorWithMessage=isErrorWithMessage;function isErrorWithStack(tr){return typeof tr=="object"&&tr!==null&&"stack"in tr}errors$3.isErrorWithStack=isErrorWithStack;function getErrorMessage(tr){return isErrorWithMessage(tr)&&typeof tr.message=="string"?tr.message:(0,misc_1.isNullOrUndefined)(tr)?"":String(tr)}errors$3.getErrorMessage=getErrorMessage;function wrapError(tr,er){if(isError(tr)){let rr;return Error.length===2?rr=new Error(er,{cause:tr}):rr=new pony_cause_1.ErrorWithCause(er,{cause:tr}),isErrorWithCode(tr)&&(rr.code=tr.code),rr}return er.length>0?new Error(`${String(tr)}: ${er}`):new Error(String(tr))}errors$3.wrapError=wrapError;Object.defineProperty(assert$3,"__esModule",{value:!0});assert$3.assertExhaustive=assert$3.assertStruct=assert$3.assert=assert$3.AssertionError=void 0;const superstruct_1$3=dist$4,errors_1=errors$3;function isConstructable(tr){var er,rr;return typeof((rr=(er=tr==null?void 0:tr.prototype)==null?void 0:er.constructor)==null?void 0:rr.name)=="string"}function getErrorMessageWithoutTrailingPeriod(tr){return(0,errors_1.getErrorMessage)(tr).replace(/\.$/u,"")}function getError(tr,er){return isConstructable(tr)?new tr({message:er}):tr({message:er})}class AssertionError extends Error{constructor(er){super(er.message),this.code="ERR_ASSERTION"}}assert$3.AssertionError=AssertionError;function assert$2(tr,er="Assertion failed.",rr=AssertionError){if(!tr)throw er instanceof Error?er:getError(rr,er)}assert$3.assert=assert$2;function assertStruct(tr,er,rr="Assertion failed",nr=AssertionError){try{(0,superstruct_1$3.assert)(tr,er)}catch(ir){throw getError(nr,`${rr}: ${getErrorMessageWithoutTrailingPeriod(ir)}.`)}}assert$3.assertStruct=assertStruct;function assertExhaustive(tr){throw new Error("Invalid branch reached. Should be detected during compilation.")}assert$3.assertExhaustive=assertExhaustive;var base64$1={};Object.defineProperty(base64$1,"__esModule",{value:!0});base64$1.base64=void 0;const superstruct_1$2=dist$4,assert_1$2=assert$3,base64=(tr,er={})=>{const rr=er.paddingRequired??!1,nr=er.characterSet??"base64";let ir;nr==="base64"?ir=String.raw`[A-Za-z0-9+\/]`:((0,assert_1$2.assert)(nr==="base64url"),ir=String.raw`[-_A-Za-z0-9]`);let sr;return rr?sr=new RegExp(`^(?:${ir}{4})*(?:${ir}{3}=|${ir}{2}==)?$`,"u"):sr=new RegExp(`^(?:${ir}{4})*(?:${ir}{2,3}|${ir}{3}=|${ir}{2}==)?$`,"u"),(0,superstruct_1$2.pattern)(tr,sr)};base64$1.base64=base64;var bytes$1={},hex={},hasRequiredHex;function requireHex(){return hasRequiredHex||(hasRequiredHex=1,function(tr){Object.defineProperty(tr,"__esModule",{value:!0}),tr.remove0x=tr.add0x=tr.isValidChecksumAddress=tr.getChecksumAddress=tr.isValidHexAddress=tr.assertIsStrictHexString=tr.assertIsHexString=tr.isStrictHexString=tr.isHexString=tr.HexChecksumAddressStruct=tr.HexAddressStruct=tr.StrictHexStruct=tr.HexStruct=void 0;const er=dist$4,rr=sha3,nr=assert$3,ir=requireBytes();tr.HexStruct=(0,er.pattern)((0,er.string)(),/^(?:0x)?[0-9a-f]+$/iu),tr.StrictHexStruct=(0,er.pattern)((0,er.string)(),/^0x[0-9a-f]+$/iu),tr.HexAddressStruct=(0,er.pattern)((0,er.string)(),/^0x[0-9a-f]{40}$/u),tr.HexChecksumAddressStruct=(0,er.pattern)((0,er.string)(),/^0x[0-9a-fA-F]{40}$/u);function sr(wr){return(0,er.is)(wr,tr.HexStruct)}tr.isHexString=sr;function or(wr){return(0,er.is)(wr,tr.StrictHexStruct)}tr.isStrictHexString=or;function ar(wr){(0,nr.assert)(sr(wr),"Value must be a hexadecimal string.")}tr.assertIsHexString=ar;function cr(wr){(0,nr.assert)(or(wr),'Value must be a hexadecimal string, starting with "0x".')}tr.assertIsStrictHexString=cr;function lr(wr){return(0,er.is)(wr,tr.HexAddressStruct)||dr(wr)}tr.isValidHexAddress=lr;function ur(wr){(0,nr.assert)((0,er.is)(wr,tr.HexChecksumAddressStruct),"Invalid hex address.");const xr=mr(wr.toLowerCase()),Or=mr((0,ir.bytesToHex)((0,rr.keccak_256)(xr)));return`0x${xr.split("").map((Tr,Ar)=>{const Nr=Or[Ar];return(0,nr.assert)((0,er.is)(Nr,(0,er.string)()),"Hash shorter than address."),parseInt(Nr,16)>7?Tr.toUpperCase():Tr}).join("")}`}tr.getChecksumAddress=ur;function dr(wr){return(0,er.is)(wr,tr.HexChecksumAddressStruct)?ur(wr)===wr:!1}tr.isValidChecksumAddress=dr;function yr(wr){return wr.startsWith("0x")?wr:wr.startsWith("0X")?`0x${wr.substring(2)}`:`0x${wr}`}tr.add0x=yr;function mr(wr){return wr.startsWith("0x")||wr.startsWith("0X")?wr.substring(2):wr}tr.remove0x=mr}(hex)),hex}var hasRequiredBytes;function requireBytes(){if(hasRequiredBytes)return bytes$1;hasRequiredBytes=1,Object.defineProperty(bytes$1,"__esModule",{value:!0}),bytes$1.createDataView=bytes$1.concatBytes=bytes$1.valueToBytes=bytes$1.base64ToBytes=bytes$1.stringToBytes=bytes$1.numberToBytes=bytes$1.signedBigIntToBytes=bytes$1.bigIntToBytes=bytes$1.hexToBytes=bytes$1.bytesToBase64=bytes$1.bytesToString=bytes$1.bytesToNumber=bytes$1.bytesToSignedBigInt=bytes$1.bytesToBigInt=bytes$1.bytesToHex=bytes$1.assertIsBytes=bytes$1.isBytes=void 0;const tr=lib$1,er=assert$3,rr=requireHex(),nr=48,ir=58,sr=87;function or(){const Pr=[];return()=>{if(Pr.length===0)for(let Sr=0;Sr<256;Sr++)Pr.push(Sr.toString(16).padStart(2,"0"));return Pr}}const ar=or();function cr(Pr){return Pr instanceof Uint8Array}bytes$1.isBytes=cr;function lr(Pr){(0,er.assert)(cr(Pr),"Value must be a Uint8Array.")}bytes$1.assertIsBytes=lr;function ur(Pr){if(lr(Pr),Pr.length===0)return"0x";const Sr=ar(),pr=new Array(Pr.length);for(let gr=0;gr<Pr.length;gr++)pr[gr]=Sr[Pr[gr]];return(0,rr.add0x)(pr.join(""))}bytes$1.bytesToHex=ur;function dr(Pr){lr(Pr);const Sr=ur(Pr);return BigInt(Sr)}bytes$1.bytesToBigInt=dr;function yr(Pr){lr(Pr);let Sr=BigInt(0);for(const pr of Pr)Sr=(Sr<<BigInt(8))+BigInt(pr);return BigInt.asIntN(Pr.length*8,Sr)}bytes$1.bytesToSignedBigInt=yr;function mr(Pr){lr(Pr);const Sr=dr(Pr);return(0,er.assert)(Sr<=BigInt(Number.MAX_SAFE_INTEGER),"Number is not a safe integer. Use `bytesToBigInt` instead."),Number(Sr)}bytes$1.bytesToNumber=mr;function wr(Pr){return lr(Pr),new TextDecoder().decode(Pr)}bytes$1.bytesToString=wr;function xr(Pr){return lr(Pr),tr.base64.encode(Pr)}bytes$1.bytesToBase64=xr;function Or(Pr){var fr;if(((fr=Pr==null?void 0:Pr.toLowerCase)==null?void 0:fr.call(Pr))==="0x")return new Uint8Array;(0,rr.assertIsHexString)(Pr);const Sr=(0,rr.remove0x)(Pr).toLowerCase(),pr=Sr.length%2===0?Sr:`0${Sr}`,gr=new Uint8Array(pr.length/2);for(let hr=0;hr<gr.length;hr++){const br=pr.charCodeAt(hr*2),_r=pr.charCodeAt(hr*2+1),$r=br-(br<ir?nr:sr),Er=_r-(_r<ir?nr:sr);gr[hr]=$r*16+Er}return gr}bytes$1.hexToBytes=Or;function Tr(Pr){(0,er.assert)(typeof Pr=="bigint","Value must be a bigint."),(0,er.assert)(Pr>=BigInt(0),"Value must be a non-negative bigint.");const Sr=Pr.toString(16);return Or(Sr)}bytes$1.bigIntToBytes=Tr;function Ar(Pr,Sr){(0,er.assert)(Sr>0);const pr=Pr>>BigInt(31);return!((~Pr&pr)+(Pr&~pr)>>BigInt(Sr*8+-1))}function Nr(Pr,Sr){(0,er.assert)(typeof Pr=="bigint","Value must be a bigint."),(0,er.assert)(typeof Sr=="number","Byte length must be a number."),(0,er.assert)(Sr>0,"Byte length must be greater than 0."),(0,er.assert)(Ar(Pr,Sr),"Byte length is too small to represent the given value.");let pr=Pr;const gr=new Uint8Array(Sr);for(let fr=0;fr<gr.length;fr++)gr[fr]=Number(BigInt.asUintN(8,pr)),pr>>=BigInt(8);return gr.reverse()}bytes$1.signedBigIntToBytes=Nr;function Ur(Pr){(0,er.assert)(typeof Pr=="number","Value must be a number."),(0,er.assert)(Pr>=0,"Value must be a non-negative number."),(0,er.assert)(Number.isSafeInteger(Pr),"Value is not a safe integer. Use `bigIntToBytes` instead.");const Sr=Pr.toString(16);return Or(Sr)}bytes$1.numberToBytes=Ur;function Dr(Pr){return(0,er.assert)(typeof Pr=="string","Value must be a string."),new TextEncoder().encode(Pr)}bytes$1.stringToBytes=Dr;function Hr(Pr){return(0,er.assert)(typeof Pr=="string","Value must be a string."),tr.base64.decode(Pr)}bytes$1.base64ToBytes=Hr;function zr(Pr){if(typeof Pr=="bigint")return Tr(Pr);if(typeof Pr=="number")return Ur(Pr);if(typeof Pr=="string")return Pr.startsWith("0x")?Or(Pr):Dr(Pr);if(cr(Pr))return Pr;throw new TypeError(`Unsupported value type: "${typeof Pr}".`)}bytes$1.valueToBytes=zr;function Cr(Pr){const Sr=new Array(Pr.length);let pr=0;for(let fr=0;fr<Pr.length;fr++){const hr=zr(Pr[fr]);Sr[fr]=hr,pr+=hr.length}const gr=new Uint8Array(pr);for(let fr=0,hr=0;fr<Sr.length;fr++)gr.set(Sr[fr],hr),hr+=Sr[fr].length;return gr}bytes$1.concatBytes=Cr;function Mr(Pr){if(typeof Buffer<"u"&&Pr instanceof Buffer){const Sr=Pr.buffer.slice(Pr.byteOffset,Pr.byteOffset+Pr.byteLength);return new DataView(Sr)}return new DataView(Pr.buffer,Pr.byteOffset,Pr.byteLength)}return bytes$1.createDataView=Mr,bytes$1}var caipTypes={};(function(tr){Object.defineProperty(tr,"__esModule",{value:!0}),tr.toCaipChainId=tr.parseCaipAccountId=tr.parseCaipChainId=tr.isCaipAccountAddress=tr.isCaipAccountId=tr.isCaipReference=tr.isCaipNamespace=tr.isCaipChainId=tr.KnownCaipNamespace=tr.CaipAccountAddressStruct=tr.CaipAccountIdStruct=tr.CaipReferenceStruct=tr.CaipNamespaceStruct=tr.CaipChainIdStruct=tr.CAIP_ACCOUNT_ADDRESS_REGEX=tr.CAIP_ACCOUNT_ID_REGEX=tr.CAIP_REFERENCE_REGEX=tr.CAIP_NAMESPACE_REGEX=tr.CAIP_CHAIN_ID_REGEX=void 0;const er=dist$4;tr.CAIP_CHAIN_ID_REGEX=/^(?<namespace>[-a-z0-9]{3,8}):(?<reference>[-_a-zA-Z0-9]{1,32})$/u,tr.CAIP_NAMESPACE_REGEX=/^[-a-z0-9]{3,8}$/u,tr.CAIP_REFERENCE_REGEX=/^[-_a-zA-Z0-9]{1,32}$/u,tr.CAIP_ACCOUNT_ID_REGEX=/^(?<chainId>(?<namespace>[-a-z0-9]{3,8}):(?<reference>[-_a-zA-Z0-9]{1,32})):(?<accountAddress>[-.%a-zA-Z0-9]{1,128})$/u,tr.CAIP_ACCOUNT_ADDRESS_REGEX=/^[-.%a-zA-Z0-9]{1,128}$/u,tr.CaipChainIdStruct=(0,er.pattern)((0,er.string)(),tr.CAIP_CHAIN_ID_REGEX),tr.CaipNamespaceStruct=(0,er.pattern)((0,er.string)(),tr.CAIP_NAMESPACE_REGEX),tr.CaipReferenceStruct=(0,er.pattern)((0,er.string)(),tr.CAIP_REFERENCE_REGEX),tr.CaipAccountIdStruct=(0,er.pattern)((0,er.string)(),tr.CAIP_ACCOUNT_ID_REGEX),tr.CaipAccountAddressStruct=(0,er.pattern)((0,er.string)(),tr.CAIP_ACCOUNT_ADDRESS_REGEX),function(ur){ur.Eip155="eip155"}(tr.KnownCaipNamespace||(tr.KnownCaipNamespace={}));function rr(ur){return(0,er.is)(ur,tr.CaipChainIdStruct)}tr.isCaipChainId=rr;function nr(ur){return(0,er.is)(ur,tr.CaipNamespaceStruct)}tr.isCaipNamespace=nr;function ir(ur){return(0,er.is)(ur,tr.CaipReferenceStruct)}tr.isCaipReference=ir;function sr(ur){return(0,er.is)(ur,tr.CaipAccountIdStruct)}tr.isCaipAccountId=sr;function or(ur){return(0,er.is)(ur,tr.CaipAccountAddressStruct)}tr.isCaipAccountAddress=or;function ar(ur){const dr=tr.CAIP_CHAIN_ID_REGEX.exec(ur);if(!(dr!=null&&dr.groups))throw new Error("Invalid CAIP chain ID.");return{namespace:dr.groups.namespace,reference:dr.groups.reference}}tr.parseCaipChainId=ar;function cr(ur){const dr=tr.CAIP_ACCOUNT_ID_REGEX.exec(ur);if(!(dr!=null&&dr.groups))throw new Error("Invalid CAIP account ID.");return{address:dr.groups.accountAddress,chainId:dr.groups.chainId,chain:{namespace:dr.groups.namespace,reference:dr.groups.reference}}}tr.parseCaipAccountId=cr;function lr(ur,dr){if(!nr(ur))throw new Error(`Invalid "namespace", must match: ${tr.CAIP_NAMESPACE_REGEX.toString()}`);if(!ir(dr))throw new Error(`Invalid "reference", must match: ${tr.CAIP_REFERENCE_REGEX.toString()}`);return`${ur}:${dr}`}tr.toCaipChainId=lr})(caipTypes);var checksum={};Object.defineProperty(checksum,"__esModule",{value:!0});checksum.ChecksumStruct=void 0;const superstruct_1$1=dist$4,base64_1=base64$1;checksum.ChecksumStruct=(0,superstruct_1$1.size)((0,base64_1.base64)((0,superstruct_1$1.string)(),{paddingRequired:!0}),44,44);var coercers={};Object.defineProperty(coercers,"__esModule",{value:!0});coercers.createHex=coercers.createBytes=coercers.createBigInt=coercers.createNumber=void 0;const superstruct_1=dist$4,assert_1$1=assert$3,bytes_1$1=requireBytes(),hex_1$1=requireHex(),NumberLikeStruct=(0,superstruct_1.union)([(0,superstruct_1.number)(),(0,superstruct_1.bigint)(),(0,superstruct_1.string)(),hex_1$1.StrictHexStruct]),NumberCoercer=(0,superstruct_1.coerce)((0,superstruct_1.number)(),NumberLikeStruct,Number),BigIntCoercer=(0,superstruct_1.coerce)((0,superstruct_1.bigint)(),NumberLikeStruct,BigInt);(0,superstruct_1.union)([hex_1$1.StrictHexStruct,(0,superstruct_1.instance)(Uint8Array)]);const BytesCoercer=(0,superstruct_1.coerce)((0,superstruct_1.instance)(Uint8Array),(0,superstruct_1.union)([hex_1$1.StrictHexStruct]),bytes_1$1.hexToBytes),HexCoercer=(0,superstruct_1.coerce)(hex_1$1.StrictHexStruct,(0,superstruct_1.instance)(Uint8Array),bytes_1$1.bytesToHex);function createNumber(tr){try{const er=(0,superstruct_1.create)(tr,NumberCoercer);return(0,assert_1$1.assert)(Number.isFinite(er),`Expected a number-like value, got "${tr}".`),er}catch(er){throw er instanceof superstruct_1.StructError?new Error(`Expected a number-like value, got "${tr}".`):er}}coercers.createNumber=createNumber;function createBigInt(tr){try{return(0,superstruct_1.create)(tr,BigIntCoercer)}catch(er){throw er instanceof superstruct_1.StructError?new Error(`Expected a number-like value, got "${String(er.value)}".`):er}}coercers.createBigInt=createBigInt;function createBytes(tr){if(typeof tr=="string"&&tr.toLowerCase()==="0x")return new Uint8Array;try{return(0,superstruct_1.create)(tr,BytesCoercer)}catch(er){throw er instanceof superstruct_1.StructError?new Error(`Expected a bytes-like value, got "${String(er.value)}".`):er}}coercers.createBytes=createBytes;function createHex(tr){if(tr instanceof Uint8Array&&tr.length===0||typeof tr=="string"&&tr.toLowerCase()==="0x")return"0x";try{return(0,superstruct_1.create)(tr,HexCoercer)}catch(er){throw er instanceof superstruct_1.StructError?new Error(`Expected a bytes-like value, got "${String(er.value)}".`):er}}coercers.createHex=createHex;var collections={},__classPrivateFieldGet=commonjsGlobal&&commonjsGlobal.__classPrivateFieldGet||function(tr,er,rr,nr){if(rr==="a"&&!nr)throw new TypeError("Private accessor was defined without a getter");if(typeof er=="function"?tr!==er||!nr:!er.has(tr))throw new TypeError("Cannot read private member from an object whose class did not declare it");return rr==="m"?nr:rr==="a"?nr.call(tr):nr?nr.value:er.get(tr)},__classPrivateFieldSet=commonjsGlobal&&commonjsGlobal.__classPrivateFieldSet||function(tr,er,rr,nr,ir){if(nr==="m")throw new TypeError("Private method is not writable");if(nr==="a"&&!ir)throw new TypeError("Private accessor was defined without a setter");if(typeof er=="function"?tr!==er||!ir:!er.has(tr))throw new TypeError("Cannot write private member to an object whose class did not declare it");return nr==="a"?ir.call(tr,rr):ir?ir.value=rr:er.set(tr,rr),rr},_FrozenMap_map,_FrozenSet_set;Object.defineProperty(collections,"__esModule",{value:!0});collections.FrozenSet=collections.FrozenMap=void 0;class FrozenMap{get size(){return __classPrivateFieldGet(this,_FrozenMap_map,"f").size}[(_FrozenMap_map=new WeakMap,Symbol.iterator)](){return __classPrivateFieldGet(this,_FrozenMap_map,"f")[Symbol.iterator]()}constructor(er){_FrozenMap_map.set(this,void 0),__classPrivateFieldSet(this,_FrozenMap_map,new Map(er),"f"),Object.freeze(this)}entries(){return __classPrivateFieldGet(this,_FrozenMap_map,"f").entries()}forEach(er,rr){return __classPrivateFieldGet(this,_FrozenMap_map,"f").forEach((nr,ir,sr)=>er.call(rr,nr,ir,this))}get(er){return __classPrivateFieldGet(this,_FrozenMap_map,"f").get(er)}has(er){return __classPrivateFieldGet(this,_FrozenMap_map,"f").has(er)}keys(){return __classPrivateFieldGet(this,_FrozenMap_map,"f").keys()}values(){return __classPrivateFieldGet(this,_FrozenMap_map,"f").values()}toString(){return`FrozenMap(${this.size}) {${this.size>0?` ${[...this.entries()].map(([er,rr])=>`${String(er)} => ${String(rr)}`).join(", ")} `:""}}`}}collections.FrozenMap=FrozenMap;class FrozenSet{get size(){return __classPrivateFieldGet(this,_FrozenSet_set,"f").size}[(_FrozenSet_set=new WeakMap,Symbol.iterator)](){return __classPrivateFieldGet(this,_FrozenSet_set,"f")[Symbol.iterator]()}constructor(er){_FrozenSet_set.set(this,void 0),__classPrivateFieldSet(this,_FrozenSet_set,new Set(er),"f"),Object.freeze(this)}entries(){return __classPrivateFieldGet(this,_FrozenSet_set,"f").entries()}forEach(er,rr){return __classPrivateFieldGet(this,_FrozenSet_set,"f").forEach((nr,ir,sr)=>er.call(rr,nr,ir,this))}has(er){return __classPrivateFieldGet(this,_FrozenSet_set,"f").has(er)}keys(){return __classPrivateFieldGet(this,_FrozenSet_set,"f").keys()}values(){return __classPrivateFieldGet(this,_FrozenSet_set,"f").values()}toString(){return`FrozenSet(${this.size}) {${this.size>0?` ${[...this.values()].map(er=>String(er)).join(", ")} `:""}}`}}collections.FrozenSet=FrozenSet;Object.freeze(FrozenMap);Object.freeze(FrozenMap.prototype);Object.freeze(FrozenSet);Object.freeze(FrozenSet.prototype);var encryptionTypes={};Object.defineProperty(encryptionTypes,"__esModule",{value:!0});var json={};(function(tr){Object.defineProperty(tr,"__esModule",{value:!0}),tr.getJsonRpcIdValidator=tr.assertIsJsonRpcError=tr.isJsonRpcError=tr.assertIsJsonRpcFailure=tr.isJsonRpcFailure=tr.assertIsJsonRpcSuccess=tr.isJsonRpcSuccess=tr.assertIsJsonRpcResponse=tr.isJsonRpcResponse=tr.assertIsPendingJsonRpcResponse=tr.isPendingJsonRpcResponse=tr.JsonRpcResponseStruct=tr.JsonRpcFailureStruct=tr.JsonRpcSuccessStruct=tr.PendingJsonRpcResponseStruct=tr.assertIsJsonRpcRequest=tr.isJsonRpcRequest=tr.assertIsJsonRpcNotification=tr.isJsonRpcNotification=tr.JsonRpcNotificationStruct=tr.JsonRpcRequestStruct=tr.JsonRpcParamsStruct=tr.JsonRpcErrorStruct=tr.JsonRpcIdStruct=tr.JsonRpcVersionStruct=tr.jsonrpc2=tr.getJsonSize=tr.getSafeJson=tr.isValidJson=tr.JsonStruct=tr.UnsafeJsonStruct=tr.exactOptional=tr.object=void 0;const er=dist$4,rr=assert$3,nr=misc,ir=Pr=>(0,er.object)(Pr);tr.object=ir;function sr({path:Pr,branch:Sr}){const pr=Pr[Pr.length-1];return(0,nr.hasProperty)(Sr[Sr.length-2],pr)}function or(Pr){return new er.Struct({...Pr,type:`optional ${Pr.type}`,validator:(Sr,pr)=>!sr(pr)||Pr.validator(Sr,pr),refiner:(Sr,pr)=>!sr(pr)||Pr.refiner(Sr,pr)})}tr.exactOptional=or;const ar=()=>(0,er.define)("finite number",Pr=>(0,er.is)(Pr,(0,er.number)())&&Number.isFinite(Pr));tr.UnsafeJsonStruct=(0,er.union)([(0,er.literal)(null),(0,er.boolean)(),ar(),(0,er.string)(),(0,er.array)((0,er.lazy)(()=>tr.UnsafeJsonStruct)),(0,er.record)((0,er.string)(),(0,er.lazy)(()=>tr.UnsafeJsonStruct))]),tr.JsonStruct=(0,er.coerce)(tr.UnsafeJsonStruct,(0,er.any)(),Pr=>((0,rr.assertStruct)(Pr,tr.UnsafeJsonStruct),JSON.parse(JSON.stringify(Pr,(Sr,pr)=>{if(!(Sr==="__proto__"||Sr==="constructor"))return pr}))));function cr(Pr){try{return lr(Pr),!0}catch{return!1}}tr.isValidJson=cr;function lr(Pr){return(0,er.create)(Pr,tr.JsonStruct)}tr.getSafeJson=lr;function ur(Pr){(0,rr.assertStruct)(Pr,tr.JsonStruct,"Invalid JSON value");const Sr=JSON.stringify(Pr);return new TextEncoder().encode(Sr).byteLength}tr.getJsonSize=ur,tr.jsonrpc2="2.0",tr.JsonRpcVersionStruct=(0,er.literal)(tr.jsonrpc2),tr.JsonRpcIdStruct=(0,er.nullable)((0,er.union)([(0,er.number)(),(0,er.string)()])),tr.JsonRpcErrorStruct=(0,tr.object)({code:(0,er.integer)(),message:(0,er.string)(),data:or(tr.JsonStruct),stack:or((0,er.string)())}),tr.JsonRpcParamsStruct=(0,er.union)([(0,er.record)((0,er.string)(),tr.JsonStruct),(0,er.array)(tr.JsonStruct)]),tr.JsonRpcRequestStruct=(0,tr.object)({id:tr.JsonRpcIdStruct,jsonrpc:tr.JsonRpcVersionStruct,method:(0,er.string)(),params:or(tr.JsonRpcParamsStruct)}),tr.JsonRpcNotificationStruct=(0,tr.object)({jsonrpc:tr.JsonRpcVersionStruct,method:(0,er.string)(),params:or(tr.JsonRpcParamsStruct)});function dr(Pr){return(0,er.is)(Pr,tr.JsonRpcNotificationStruct)}tr.isJsonRpcNotification=dr;function yr(Pr,Sr){(0,rr.assertStruct)(Pr,tr.JsonRpcNotificationStruct,"Invalid JSON-RPC notification",Sr)}tr.assertIsJsonRpcNotification=yr;function mr(Pr){return(0,er.is)(Pr,tr.JsonRpcRequestStruct)}tr.isJsonRpcRequest=mr;function wr(Pr,Sr){(0,rr.assertStruct)(Pr,tr.JsonRpcRequestStruct,"Invalid JSON-RPC request",Sr)}tr.assertIsJsonRpcRequest=wr,tr.PendingJsonRpcResponseStruct=(0,er.object)({id:tr.JsonRpcIdStruct,jsonrpc:tr.JsonRpcVersionStruct,result:(0,er.optional)((0,er.unknown)()),error:(0,er.optional)(tr.JsonRpcErrorStruct)}),tr.JsonRpcSuccessStruct=(0,tr.object)({id:tr.JsonRpcIdStruct,jsonrpc:tr.JsonRpcVersionStruct,result:tr.JsonStruct}),tr.JsonRpcFailureStruct=(0,tr.object)({id:tr.JsonRpcIdStruct,jsonrpc:tr.JsonRpcVersionStruct,error:tr.JsonRpcErrorStruct}),tr.JsonRpcResponseStruct=(0,er.union)([tr.JsonRpcSuccessStruct,tr.JsonRpcFailureStruct]);function xr(Pr){return(0,er.is)(Pr,tr.PendingJsonRpcResponseStruct)}tr.isPendingJsonRpcResponse=xr;function Or(Pr,Sr){(0,rr.assertStruct)(Pr,tr.PendingJsonRpcResponseStruct,"Invalid pending JSON-RPC response",Sr)}tr.assertIsPendingJsonRpcResponse=Or;function Tr(Pr){return(0,er.is)(Pr,tr.JsonRpcResponseStruct)}tr.isJsonRpcResponse=Tr;function Ar(Pr,Sr){(0,rr.assertStruct)(Pr,tr.JsonRpcResponseStruct,"Invalid JSON-RPC response",Sr)}tr.assertIsJsonRpcResponse=Ar;function Nr(Pr){return(0,er.is)(Pr,tr.JsonRpcSuccessStruct)}tr.isJsonRpcSuccess=Nr;function Ur(Pr,Sr){(0,rr.assertStruct)(Pr,tr.JsonRpcSuccessStruct,"Invalid JSON-RPC success response",Sr)}tr.assertIsJsonRpcSuccess=Ur;function Dr(Pr){return(0,er.is)(Pr,tr.JsonRpcFailureStruct)}tr.isJsonRpcFailure=Dr;function Hr(Pr,Sr){(0,rr.assertStruct)(Pr,tr.JsonRpcFailureStruct,"Invalid JSON-RPC failure response",Sr)}tr.assertIsJsonRpcFailure=Hr;function zr(Pr){return(0,er.is)(Pr,tr.JsonRpcErrorStruct)}tr.isJsonRpcError=zr;function Cr(Pr,Sr){(0,rr.assertStruct)(Pr,tr.JsonRpcErrorStruct,"Invalid JSON-RPC error",Sr)}tr.assertIsJsonRpcError=Cr;function Mr(Pr){const{permitEmptyString:Sr,permitFractions:pr,permitNull:gr}={permitEmptyString:!0,permitFractions:!1,permitNull:!0,...Pr};return hr=>!!(typeof hr=="number"&&(pr||Number.isInteger(hr))||typeof hr=="string"&&(Sr||hr.length>0)||gr&&hr===null)}tr.getJsonRpcIdValidator=Mr})(json);var keyring={};Object.defineProperty(keyring,"__esModule",{value:!0});var logging={},__importDefault$4=commonjsGlobal&&commonjsGlobal.__importDefault||function(tr){return tr&&tr.__esModule?tr:{default:tr}};Object.defineProperty(logging,"__esModule",{value:!0});logging.createModuleLogger=logging.createProjectLogger=void 0;const debug_1$1=__importDefault$4(browserExports),globalLogger=(0,debug_1$1.default)("metamask");function createProjectLogger(tr){return globalLogger.extend(tr)}logging.createProjectLogger=createProjectLogger;function createModuleLogger(tr,er){return tr.extend(er)}logging.createModuleLogger=createModuleLogger;var number$1={};Object.defineProperty(number$1,"__esModule",{value:!0});number$1.hexToBigInt=number$1.hexToNumber=number$1.bigIntToHex=number$1.numberToHex=void 0;const assert_1=assert$3,hex_1=requireHex(),numberToHex=tr=>((0,assert_1.assert)(typeof tr=="number","Value must be a number."),(0,assert_1.assert)(tr>=0,"Value must be a non-negative number."),(0,assert_1.assert)(Number.isSafeInteger(tr),"Value is not a safe integer. Use `bigIntToHex` instead."),(0,hex_1.add0x)(tr.toString(16)));number$1.numberToHex=numberToHex;const bigIntToHex=tr=>((0,assert_1.assert)(typeof tr=="bigint","Value must be a bigint."),(0,assert_1.assert)(tr>=0,"Value must be a non-negative bigint."),(0,hex_1.add0x)(tr.toString(16)));number$1.bigIntToHex=bigIntToHex;const hexToNumber=tr=>{(0,hex_1.assertIsHexString)(tr);const er=parseInt(tr,16);return(0,assert_1.assert)(Number.isSafeInteger(er),"Value is not a safe integer. Use `hexToBigInt` instead."),er};number$1.hexToNumber=hexToNumber;const hexToBigInt=tr=>((0,hex_1.assertIsHexString)(tr),BigInt((0,hex_1.add0x)(tr)));number$1.hexToBigInt=hexToBigInt;var opaque={};Object.defineProperty(opaque,"__esModule",{value:!0});var promise={};Object.defineProperty(promise,"__esModule",{value:!0});promise.createDeferredPromise=void 0;function createDeferredPromise({suppressUnhandledRejection:tr=!1}={}){let er,rr;const nr=new Promise((ir,sr)=>{er=ir,rr=sr});return tr&&nr.catch(ir=>{}),{promise:nr,resolve:er,reject:rr}}promise.createDeferredPromise=createDeferredPromise;var time={};(function(tr){Object.defineProperty(tr,"__esModule",{value:!0}),tr.timeSince=tr.inMilliseconds=tr.Duration=void 0,function(sr){sr[sr.Millisecond=1]="Millisecond",sr[sr.Second=1e3]="Second",sr[sr.Minute=6e4]="Minute",sr[sr.Hour=36e5]="Hour",sr[sr.Day=864e5]="Day",sr[sr.Week=6048e5]="Week",sr[sr.Year=31536e6]="Year"}(tr.Duration||(tr.Duration={}));const er=sr=>Number.isInteger(sr)&&sr>=0,rr=(sr,or)=>{if(!er(sr))throw new Error(`"${or}" must be a non-negative integer. Received: "${sr}".`)};function nr(sr,or){return rr(sr,"count"),sr*or}tr.inMilliseconds=nr;function ir(sr){return rr(sr,"timestamp"),Date.now()-sr}tr.timeSince=ir})(time);var transactionTypes={};Object.defineProperty(transactionTypes,"__esModule",{value:!0});var versions={},re$2={exports:{}};const SEMVER_SPEC_VERSION="2.0.0",MAX_LENGTH$1=256,MAX_SAFE_INTEGER$1=Number.MAX_SAFE_INTEGER||9007199254740991,MAX_SAFE_COMPONENT_LENGTH=16,MAX_SAFE_BUILD_LENGTH=MAX_LENGTH$1-6,RELEASE_TYPES=["major","premajor","minor","preminor","patch","prepatch","prerelease"];var constants$4={MAX_LENGTH:MAX_LENGTH$1,MAX_SAFE_COMPONENT_LENGTH,MAX_SAFE_BUILD_LENGTH,MAX_SAFE_INTEGER:MAX_SAFE_INTEGER$1,RELEASE_TYPES,SEMVER_SPEC_VERSION,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2},define_process_env_default={};const debug$1=typeof process=="object"&&define_process_env_default&&define_process_env_default.NODE_DEBUG&&/\bsemver\b/i.test(define_process_env_default.NODE_DEBUG)?(...tr)=>console.error("SEMVER",...tr):()=>{};var debug_1=debug$1;(function(tr,er){const{MAX_SAFE_COMPONENT_LENGTH:rr,MAX_SAFE_BUILD_LENGTH:nr,MAX_LENGTH:ir}=constants$4,sr=debug_1;er=tr.exports={};const or=er.re=[],ar=er.safeRe=[],cr=er.src=[],lr=er.t={};let ur=0;const dr="[a-zA-Z0-9-]",yr=[["\\s",1],["\\d",ir],[dr,nr]],mr=xr=>{for(const[Or,Tr]of yr)xr=xr.split(`${Or}*`).join(`${Or}{0,${Tr}}`).split(`${Or}+`).join(`${Or}{1,${Tr}}`);return xr},wr=(xr,Or,Tr)=>{const Ar=mr(Or),Nr=ur++;sr(xr,Nr,Or),lr[xr]=Nr,cr[Nr]=Or,or[Nr]=new RegExp(Or,Tr?"g":void 0),ar[Nr]=new RegExp(Ar,Tr?"g":void 0)};wr("NUMERICIDENTIFIER","0|[1-9]\\d*"),wr("NUMERICIDENTIFIERLOOSE","\\d+"),wr("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${dr}*`),wr("MAINVERSION",`(${cr[lr.NUMERICIDENTIFIER]})\\.(${cr[lr.NUMERICIDENTIFIER]})\\.(${cr[lr.NUMERICIDENTIFIER]})`),wr("MAINVERSIONLOOSE",`(${cr[lr.NUMERICIDENTIFIERLOOSE]})\\.(${cr[lr.NUMERICIDENTIFIERLOOSE]})\\.(${cr[lr.NUMERICIDENTIFIERLOOSE]})`),wr("PRERELEASEIDENTIFIER",`(?:${cr[lr.NUMERICIDENTIFIER]}|${cr[lr.NONNUMERICIDENTIFIER]})`),wr("PRERELEASEIDENTIFIERLOOSE",`(?:${cr[lr.NUMERICIDENTIFIERLOOSE]}|${cr[lr.NONNUMERICIDENTIFIER]})`),wr("PRERELEASE",`(?:-(${cr[lr.PRERELEASEIDENTIFIER]}(?:\\.${cr[lr.PRERELEASEIDENTIFIER]})*))`),wr("PRERELEASELOOSE",`(?:-?(${cr[lr.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${cr[lr.PRERELEASEIDENTIFIERLOOSE]})*))`),wr("BUILDIDENTIFIER",`${dr}+`),wr("BUILD",`(?:\\+(${cr[lr.BUILDIDENTIFIER]}(?:\\.${cr[lr.BUILDIDENTIFIER]})*))`),wr("FULLPLAIN",`v?${cr[lr.MAINVERSION]}${cr[lr.PRERELEASE]}?${cr[lr.BUILD]}?`),wr("FULL",`^${cr[lr.FULLPLAIN]}$`),wr("LOOSEPLAIN",`[v=\\s]*${cr[lr.MAINVERSIONLOOSE]}${cr[lr.PRERELEASELOOSE]}?${cr[lr.BUILD]}?`),wr("LOOSE",`^${cr[lr.LOOSEPLAIN]}$`),wr("GTLT","((?:<|>)?=?)"),wr("XRANGEIDENTIFIERLOOSE",`${cr[lr.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),wr("XRANGEIDENTIFIER",`${cr[lr.NUMERICIDENTIFIER]}|x|X|\\*`),wr("XRANGEPLAIN",`[v=\\s]*(${cr[lr.XRANGEIDENTIFIER]})(?:\\.(${cr[lr.XRANGEIDENTIFIER]})(?:\\.(${cr[lr.XRANGEIDENTIFIER]})(?:${cr[lr.PRERELEASE]})?${cr[lr.BUILD]}?)?)?`),wr("XRANGEPLAINLOOSE",`[v=\\s]*(${cr[lr.XRANGEIDENTIFIERLOOSE]})(?:\\.(${cr[lr.XRANGEIDENTIFIERLOOSE]})(?:\\.(${cr[lr.XRANGEIDENTIFIERLOOSE]})(?:${cr[lr.PRERELEASELOOSE]})?${cr[lr.BUILD]}?)?)?`),wr("XRANGE",`^${cr[lr.GTLT]}\\s*${cr[lr.XRANGEPLAIN]}$`),wr("XRANGELOOSE",`^${cr[lr.GTLT]}\\s*${cr[lr.XRANGEPLAINLOOSE]}$`),wr("COERCEPLAIN",`(^|[^\\d])(\\d{1,${rr}})(?:\\.(\\d{1,${rr}}))?(?:\\.(\\d{1,${rr}}))?`),wr("COERCE",`${cr[lr.COERCEPLAIN]}(?:$|[^\\d])`),wr("COERCEFULL",cr[lr.COERCEPLAIN]+`(?:${cr[lr.PRERELEASE]})?(?:${cr[lr.BUILD]})?(?:$|[^\\d])`),wr("COERCERTL",cr[lr.COERCE],!0),wr("COERCERTLFULL",cr[lr.COERCEFULL],!0),wr("LONETILDE","(?:~>?)"),wr("TILDETRIM",`(\\s*)${cr[lr.LONETILDE]}\\s+`,!0),er.tildeTrimReplace="$1~",wr("TILDE",`^${cr[lr.LONETILDE]}${cr[lr.XRANGEPLAIN]}$`),wr("TILDELOOSE",`^${cr[lr.LONETILDE]}${cr[lr.XRANGEPLAINLOOSE]}$`),wr("LONECARET","(?:\\^)"),wr("CARETTRIM",`(\\s*)${cr[lr.LONECARET]}\\s+`,!0),er.caretTrimReplace="$1^",wr("CARET",`^${cr[lr.LONECARET]}${cr[lr.XRANGEPLAIN]}$`),wr("CARETLOOSE",`^${cr[lr.LONECARET]}${cr[lr.XRANGEPLAINLOOSE]}$`),wr("COMPARATORLOOSE",`^${cr[lr.GTLT]}\\s*(${cr[lr.LOOSEPLAIN]})$|^$`),wr("COMPARATOR",`^${cr[lr.GTLT]}\\s*(${cr[lr.FULLPLAIN]})$|^$`),wr("COMPARATORTRIM",`(\\s*)${cr[lr.GTLT]}\\s*(${cr[lr.LOOSEPLAIN]}|${cr[lr.XRANGEPLAIN]})`,!0),er.comparatorTrimReplace="$1$2$3",wr("HYPHENRANGE",`^\\s*(${cr[lr.XRANGEPLAIN]})\\s+-\\s+(${cr[lr.XRANGEPLAIN]})\\s*$`),wr("HYPHENRANGELOOSE",`^\\s*(${cr[lr.XRANGEPLAINLOOSE]})\\s+-\\s+(${cr[lr.XRANGEPLAINLOOSE]})\\s*$`),wr("STAR","(<|>)?=?\\s*\\*"),wr("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),wr("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(re$2,re$2.exports);var reExports=re$2.exports;const looseOption=Object.freeze({loose:!0}),emptyOpts=Object.freeze({}),parseOptions$1=tr=>tr?typeof tr!="object"?looseOption:tr:emptyOpts;var parseOptions_1=parseOptions$1;const numeric=/^[0-9]+$/,compareIdentifiers$1=(tr,er)=>{const rr=numeric.test(tr),nr=numeric.test(er);return rr&&nr&&(tr=+tr,er=+er),tr===er?0:rr&&!nr?-1:nr&&!rr?1:tr<er?-1:1},rcompareIdentifiers=(tr,er)=>compareIdentifiers$1(er,tr);var identifiers$1={compareIdentifiers:compareIdentifiers$1,rcompareIdentifiers};const debug=debug_1,{MAX_LENGTH,MAX_SAFE_INTEGER}=constants$4,{safeRe:re$1,t:t$3}=reExports,parseOptions=parseOptions_1,{compareIdentifiers}=identifiers$1;let SemVer$d=class xl{constructor(er,rr){if(rr=parseOptions(rr),er instanceof xl){if(er.loose===!!rr.loose&&er.includePrerelease===!!rr.includePrerelease)return er;er=er.version}else if(typeof er!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof er}".`);if(er.length>MAX_LENGTH)throw new TypeError(`version is longer than ${MAX_LENGTH} characters`);debug("SemVer",er,rr),this.options=rr,this.loose=!!rr.loose,this.includePrerelease=!!rr.includePrerelease;const nr=er.trim().match(rr.loose?re$1[t$3.LOOSE]:re$1[t$3.FULL]);if(!nr)throw new TypeError(`Invalid Version: ${er}`);if(this.raw=er,this.major=+nr[1],this.minor=+nr[2],this.patch=+nr[3],this.major>MAX_SAFE_INTEGER||this.major<0)throw new TypeError("Invalid major version");if(this.minor>MAX_SAFE_INTEGER||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>MAX_SAFE_INTEGER||this.patch<0)throw new TypeError("Invalid patch version");nr[4]?this.prerelease=nr[4].split(".").map(ir=>{if(/^[0-9]+$/.test(ir)){const sr=+ir;if(sr>=0&&sr<MAX_SAFE_INTEGER)return sr}return ir}):this.prerelease=[],this.build=nr[5]?nr[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(er){if(debug("SemVer.compare",this.version,this.options,er),!(er instanceof xl)){if(typeof er=="string"&&er===this.version)return 0;er=new xl(er,this.options)}return er.version===this.version?0:this.compareMain(er)||this.comparePre(er)}compareMain(er){return er instanceof xl||(er=new xl(er,this.options)),compareIdentifiers(this.major,er.major)||compareIdentifiers(this.minor,er.minor)||compareIdentifiers(this.patch,er.patch)}comparePre(er){if(er instanceof xl||(er=new xl(er,this.options)),this.prerelease.length&&!er.prerelease.length)return-1;if(!this.prerelease.length&&er.prerelease.length)return 1;if(!this.prerelease.length&&!er.prerelease.length)return 0;let rr=0;do{const nr=this.prerelease[rr],ir=er.prerelease[rr];if(debug("prerelease compare",rr,nr,ir),nr===void 0&&ir===void 0)return 0;if(ir===void 0)return 1;if(nr===void 0)return-1;if(nr===ir)continue;return compareIdentifiers(nr,ir)}while(++rr)}compareBuild(er){er instanceof xl||(er=new xl(er,this.options));let rr=0;do{const nr=this.build[rr],ir=er.build[rr];if(debug("build compare",rr,nr,ir),nr===void 0&&ir===void 0)return 0;if(ir===void 0)return 1;if(nr===void 0)return-1;if(nr===ir)continue;return compareIdentifiers(nr,ir)}while(++rr)}inc(er,rr,nr){switch(er){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",rr,nr);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",rr,nr);break;case"prepatch":this.prerelease.length=0,this.inc("patch",rr,nr),this.inc("pre",rr,nr);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",rr,nr),this.inc("pre",rr,nr);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const ir=Number(nr)?1:0;if(!rr&&nr===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[ir];else{let sr=this.prerelease.length;for(;--sr>=0;)typeof this.prerelease[sr]=="number"&&(this.prerelease[sr]++,sr=-2);if(sr===-1){if(rr===this.prerelease.join(".")&&nr===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(ir)}}if(rr){let sr=[rr,ir];nr===!1&&(sr=[rr]),compareIdentifiers(this.prerelease[0],rr)===0?isNaN(this.prerelease[1])&&(this.prerelease=sr):this.prerelease=sr}break}default:throw new Error(`invalid increment argument: ${er}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};var semver$1=SemVer$d;const SemVer$c=semver$1,parse$6=(tr,er,rr=!1)=>{if(tr instanceof SemVer$c)return tr;try{return new SemVer$c(tr,er)}catch(nr){if(!rr)return null;throw nr}};var parse_1=parse$6;const parse$5=parse_1,valid$2=(tr,er)=>{const rr=parse$5(tr,er);return rr?rr.version:null};var valid_1=valid$2;const parse$4=parse_1,clean$1=(tr,er)=>{const rr=parse$4(tr.trim().replace(/^[=v]+/,""),er);return rr?rr.version:null};var clean_1=clean$1;const SemVer$b=semver$1,inc$1=(tr,er,rr,nr,ir)=>{typeof rr=="string"&&(ir=nr,nr=rr,rr=void 0);try{return new SemVer$b(tr instanceof SemVer$b?tr.version:tr,rr).inc(er,nr,ir).version}catch{return null}};var inc_1=inc$1;const parse$3=parse_1,diff$1=(tr,er)=>{const rr=parse$3(tr,null,!0),nr=parse$3(er,null,!0),ir=rr.compare(nr);if(ir===0)return null;const sr=ir>0,or=sr?rr:nr,ar=sr?nr:rr,cr=!!or.prerelease.length;if(!!ar.prerelease.length&&!cr)return!ar.patch&&!ar.minor?"major":or.patch?"patch":or.minor?"minor":"major";const ur=cr?"pre":"";return rr.major!==nr.major?ur+"major":rr.minor!==nr.minor?ur+"minor":rr.patch!==nr.patch?ur+"patch":"prerelease"};var diff_1=diff$1;const SemVer$a=semver$1,major$1=(tr,er)=>new SemVer$a(tr,er).major;var major_1=major$1;const SemVer$9=semver$1,minor$1=(tr,er)=>new SemVer$9(tr,er).minor;var minor_1=minor$1;const SemVer$8=semver$1,patch$1=(tr,er)=>new SemVer$8(tr,er).patch;var patch_1=patch$1;const parse$2=parse_1,prerelease$1=(tr,er)=>{const rr=parse$2(tr,er);return rr&&rr.prerelease.length?rr.prerelease:null};var prerelease_1=prerelease$1;const SemVer$7=semver$1,compare$c=(tr,er,rr)=>new SemVer$7(tr,rr).compare(new SemVer$7(er,rr));var compare_1=compare$c;const compare$b=compare_1,rcompare$1=(tr,er,rr)=>compare$b(er,tr,rr);var rcompare_1=rcompare$1;const compare$a=compare_1,compareLoose$1=(tr,er)=>compare$a(tr,er,!0);var compareLoose_1=compareLoose$1;const SemVer$6=semver$1,compareBuild$3=(tr,er,rr)=>{const nr=new SemVer$6(tr,rr),ir=new SemVer$6(er,rr);return nr.compare(ir)||nr.compareBuild(ir)};var compareBuild_1=compareBuild$3;const compareBuild$2=compareBuild_1,sort$1=(tr,er)=>tr.sort((rr,nr)=>compareBuild$2(rr,nr,er));var sort_1=sort$1;const compareBuild$1=compareBuild_1,rsort$1=(tr,er)=>tr.sort((rr,nr)=>compareBuild$1(nr,rr,er));var rsort_1=rsort$1;const compare$9=compare_1,gt$4=(tr,er,rr)=>compare$9(tr,er,rr)>0;var gt_1=gt$4;const compare$8=compare_1,lt$3=(tr,er,rr)=>compare$8(tr,er,rr)<0;var lt_1=lt$3;const compare$7=compare_1,eq$2=(tr,er,rr)=>compare$7(tr,er,rr)===0;var eq_1=eq$2;const compare$6=compare_1,neq$2=(tr,er,rr)=>compare$6(tr,er,rr)!==0;var neq_1=neq$2;const compare$5=compare_1,gte$3=(tr,er,rr)=>compare$5(tr,er,rr)>=0;var gte_1=gte$3;const compare$4=compare_1,lte$3=(tr,er,rr)=>compare$4(tr,er,rr)<=0;var lte_1=lte$3;const eq$1=eq_1,neq$1=neq_1,gt$3=gt_1,gte$2=gte_1,lt$2=lt_1,lte$2=lte_1,cmp$1=(tr,er,rr,nr)=>{switch(er){case"===":return typeof tr=="object"&&(tr=tr.version),typeof rr=="object"&&(rr=rr.version),tr===rr;case"!==":return typeof tr=="object"&&(tr=tr.version),typeof rr=="object"&&(rr=rr.version),tr!==rr;case"":case"=":case"==":return eq$1(tr,rr,nr);case"!=":return neq$1(tr,rr,nr);case">":return gt$3(tr,rr,nr);case">=":return gte$2(tr,rr,nr);case"<":return lt$2(tr,rr,nr);case"<=":return lte$2(tr,rr,nr);default:throw new TypeError(`Invalid operator: ${er}`)}};var cmp_1=cmp$1;const SemVer$5=semver$1,parse$1=parse_1,{safeRe:re,t:t$2}=reExports,coerce$1=(tr,er)=>{if(tr instanceof SemVer$5)return tr;if(typeof tr=="number"&&(tr=String(tr)),typeof tr!="string")return null;er=er||{};let rr=null;if(!er.rtl)rr=tr.match(er.includePrerelease?re[t$2.COERCEFULL]:re[t$2.COERCE]);else{const cr=er.includePrerelease?re[t$2.COERCERTLFULL]:re[t$2.COERCERTL];let lr;for(;(lr=cr.exec(tr))&&(!rr||rr.index+rr[0].length!==tr.length);)(!rr||lr.index+lr[0].length!==rr.index+rr[0].length)&&(rr=lr),cr.lastIndex=lr.index+lr[1].length+lr[2].length;cr.lastIndex=-1}if(rr===null)return null;const nr=rr[2],ir=rr[3]||"0",sr=rr[4]||"0",or=er.includePrerelease&&rr[5]?`-${rr[5]}`:"",ar=er.includePrerelease&&rr[6]?`+${rr[6]}`:"";return parse$1(`${nr}.${ir}.${sr}${or}${ar}`,er)};var coerce_1=coerce$1;class LRUCache{constructor(){this.max=1e3,this.map=new Map}get(er){const rr=this.map.get(er);if(rr!==void 0)return this.map.delete(er),this.map.set(er,rr),rr}delete(er){return this.map.delete(er)}set(er,rr){if(!this.delete(er)&&rr!==void 0){if(this.map.size>=this.max){const ir=this.map.keys().next().value;this.delete(ir)}this.map.set(er,rr)}return this}}var lrucache=LRUCache,range$1,hasRequiredRange;function requireRange(){if(hasRequiredRange)return range$1;hasRequiredRange=1;const tr=/\s+/g;class er{constructor(hr,br){if(br=ir(br),hr instanceof er)return hr.loose===!!br.loose&&hr.includePrerelease===!!br.includePrerelease?hr:new er(hr.raw,br);if(hr instanceof sr)return this.raw=hr.value,this.set=[[hr]],this.formatted=void 0,this;if(this.options=br,this.loose=!!br.loose,this.includePrerelease=!!br.includePrerelease,this.raw=hr.trim().replace(tr," "),this.set=this.raw.split("||").map(_r=>this.parseRange(_r.trim())).filter(_r=>_r.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const _r=this.set[0];if(this.set=this.set.filter($r=>!xr($r[0])),this.set.length===0)this.set=[_r];else if(this.set.length>1){for(const $r of this.set)if($r.length===1&&Or($r[0])){this.set=[$r];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let hr=0;hr<this.set.length;hr++){hr>0&&(this.formatted+="||");const br=this.set[hr];for(let _r=0;_r<br.length;_r++)_r>0&&(this.formatted+=" "),this.formatted+=br[_r].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(hr){const _r=((this.options.includePrerelease&&mr)|(this.options.loose&&wr))+":"+hr,$r=nr.get(_r);if($r)return $r;const Er=this.options.loose,vr=Er?cr[lr.HYPHENRANGELOOSE]:cr[lr.HYPHENRANGE];hr=hr.replace(vr,pr(this.options.includePrerelease)),or("hyphen replace",hr),hr=hr.replace(cr[lr.COMPARATORTRIM],ur),or("comparator trim",hr),hr=hr.replace(cr[lr.TILDETRIM],dr),or("tilde trim",hr),hr=hr.replace(cr[lr.CARETTRIM],yr),or("caret trim",hr);let Ir=hr.split(" ").map(Wr=>Ar(Wr,this.options)).join(" ").split(/\s+/).map(Wr=>Sr(Wr,this.options));Er&&(Ir=Ir.filter(Wr=>(or("loose invalid filter",Wr,this.options),!!Wr.match(cr[lr.COMPARATORLOOSE])))),or("range list",Ir);const Rr=new Map,Br=Ir.map(Wr=>new sr(Wr,this.options));for(const Wr of Br){if(xr(Wr))return[Wr];Rr.set(Wr.value,Wr)}Rr.size>1&&Rr.has("")&&Rr.delete("");const Jr=[...Rr.values()];return nr.set(_r,Jr),Jr}intersects(hr,br){if(!(hr instanceof er))throw new TypeError("a Range is required");return this.set.some(_r=>Tr(_r,br)&&hr.set.some($r=>Tr($r,br)&&_r.every(Er=>$r.every(vr=>Er.intersects(vr,br)))))}test(hr){if(!hr)return!1;if(typeof hr=="string")try{hr=new ar(hr,this.options)}catch{return!1}for(let br=0;br<this.set.length;br++)if(gr(this.set[br],hr,this.options))return!0;return!1}}range$1=er;const rr=lrucache,nr=new rr,ir=parseOptions_1,sr=requireComparator(),or=debug_1,ar=semver$1,{safeRe:cr,t:lr,comparatorTrimReplace:ur,tildeTrimReplace:dr,caretTrimReplace:yr}=reExports,{FLAG_INCLUDE_PRERELEASE:mr,FLAG_LOOSE:wr}=constants$4,xr=fr=>fr.value==="<0.0.0-0",Or=fr=>fr.value==="",Tr=(fr,hr)=>{let br=!0;const _r=fr.slice();let $r=_r.pop();for(;br&&_r.length;)br=_r.every(Er=>$r.intersects(Er,hr)),$r=_r.pop();return br},Ar=(fr,hr)=>(or("comp",fr,hr),fr=Hr(fr,hr),or("caret",fr),fr=Ur(fr,hr),or("tildes",fr),fr=Cr(fr,hr),or("xrange",fr),fr=Pr(fr,hr),or("stars",fr),fr),Nr=fr=>!fr||fr.toLowerCase()==="x"||fr==="*",Ur=(fr,hr)=>fr.trim().split(/\s+/).map(br=>Dr(br,hr)).join(" "),Dr=(fr,hr)=>{const br=hr.loose?cr[lr.TILDELOOSE]:cr[lr.TILDE];return fr.replace(br,(_r,$r,Er,vr,Ir)=>{or("tilde",fr,_r,$r,Er,vr,Ir);let Rr;return Nr($r)?Rr="":Nr(Er)?Rr=`>=${$r}.0.0 <${+$r+1}.0.0-0`:Nr(vr)?Rr=`>=${$r}.${Er}.0 <${$r}.${+Er+1}.0-0`:Ir?(or("replaceTilde pr",Ir),Rr=`>=${$r}.${Er}.${vr}-${Ir} <${$r}.${+Er+1}.0-0`):Rr=`>=${$r}.${Er}.${vr} <${$r}.${+Er+1}.0-0`,or("tilde return",Rr),Rr})},Hr=(fr,hr)=>fr.trim().split(/\s+/).map(br=>zr(br,hr)).join(" "),zr=(fr,hr)=>{or("caret",fr,hr);const br=hr.loose?cr[lr.CARETLOOSE]:cr[lr.CARET],_r=hr.includePrerelease?"-0":"";return fr.replace(br,($r,Er,vr,Ir,Rr)=>{or("caret",fr,$r,Er,vr,Ir,Rr);let Br;return Nr(Er)?Br="":Nr(vr)?Br=`>=${Er}.0.0${_r} <${+Er+1}.0.0-0`:Nr(Ir)?Er==="0"?Br=`>=${Er}.${vr}.0${_r} <${Er}.${+vr+1}.0-0`:Br=`>=${Er}.${vr}.0${_r} <${+Er+1}.0.0-0`:Rr?(or("replaceCaret pr",Rr),Er==="0"?vr==="0"?Br=`>=${Er}.${vr}.${Ir}-${Rr} <${Er}.${vr}.${+Ir+1}-0`:Br=`>=${Er}.${vr}.${Ir}-${Rr} <${Er}.${+vr+1}.0-0`:Br=`>=${Er}.${vr}.${Ir}-${Rr} <${+Er+1}.0.0-0`):(or("no pr"),Er==="0"?vr==="0"?Br=`>=${Er}.${vr}.${Ir}${_r} <${Er}.${vr}.${+Ir+1}-0`:Br=`>=${Er}.${vr}.${Ir}${_r} <${Er}.${+vr+1}.0-0`:Br=`>=${Er}.${vr}.${Ir} <${+Er+1}.0.0-0`),or("caret return",Br),Br})},Cr=(fr,hr)=>(or("replaceXRanges",fr,hr),fr.split(/\s+/).map(br=>Mr(br,hr)).join(" ")),Mr=(fr,hr)=>{fr=fr.trim();const br=hr.loose?cr[lr.XRANGELOOSE]:cr[lr.XRANGE];return fr.replace(br,(_r,$r,Er,vr,Ir,Rr)=>{or("xRange",fr,_r,$r,Er,vr,Ir,Rr);const Br=Nr(Er),Jr=Br||Nr(vr),Wr=Jr||Nr(Ir),qr=Wr;return $r==="="&&qr&&($r=""),Rr=hr.includePrerelease?"-0":"",Br?$r===">"||$r==="<"?_r="<0.0.0-0":_r="*":$r&&qr?(Jr&&(vr=0),Ir=0,$r===">"?($r=">=",Jr?(Er=+Er+1,vr=0,Ir=0):(vr=+vr+1,Ir=0)):$r==="<="&&($r="<",Jr?Er=+Er+1:vr=+vr+1),$r==="<"&&(Rr="-0"),_r=`${$r+Er}.${vr}.${Ir}${Rr}`):Jr?_r=`>=${Er}.0.0${Rr} <${+Er+1}.0.0-0`:Wr&&(_r=`>=${Er}.${vr}.0${Rr} <${Er}.${+vr+1}.0-0`),or("xRange return",_r),_r})},Pr=(fr,hr)=>(or("replaceStars",fr,hr),fr.trim().replace(cr[lr.STAR],"")),Sr=(fr,hr)=>(or("replaceGTE0",fr,hr),fr.trim().replace(cr[hr.includePrerelease?lr.GTE0PRE:lr.GTE0],"")),pr=fr=>(hr,br,_r,$r,Er,vr,Ir,Rr,Br,Jr,Wr,qr)=>(Nr(_r)?br="":Nr($r)?br=`>=${_r}.0.0${fr?"-0":""}`:Nr(Er)?br=`>=${_r}.${$r}.0${fr?"-0":""}`:vr?br=`>=${br}`:br=`>=${br}${fr?"-0":""}`,Nr(Br)?Rr="":Nr(Jr)?Rr=`<${+Br+1}.0.0-0`:Nr(Wr)?Rr=`<${Br}.${+Jr+1}.0-0`:qr?Rr=`<=${Br}.${Jr}.${Wr}-${qr}`:fr?Rr=`<${Br}.${Jr}.${+Wr+1}-0`:Rr=`<=${Rr}`,`${br} ${Rr}`.trim()),gr=(fr,hr,br)=>{for(let _r=0;_r<fr.length;_r++)if(!fr[_r].test(hr))return!1;if(hr.prerelease.length&&!br.includePrerelease){for(let _r=0;_r<fr.length;_r++)if(or(fr[_r].semver),fr[_r].semver!==sr.ANY&&fr[_r].semver.prerelease.length>0){const $r=fr[_r].semver;if($r.major===hr.major&&$r.minor===hr.minor&&$r.patch===hr.patch)return!0}return!1}return!0};return range$1}var comparator,hasRequiredComparator;function requireComparator(){if(hasRequiredComparator)return comparator;hasRequiredComparator=1;const tr=Symbol("SemVer ANY");class er{static get ANY(){return tr}constructor(ur,dr){if(dr=rr(dr),ur instanceof er){if(ur.loose===!!dr.loose)return ur;ur=ur.value}ur=ur.trim().split(/\s+/).join(" "),or("comparator",ur,dr),this.options=dr,this.loose=!!dr.loose,this.parse(ur),this.semver===tr?this.value="":this.value=this.operator+this.semver.version,or("comp",this)}parse(ur){const dr=this.options.loose?nr[ir.COMPARATORLOOSE]:nr[ir.COMPARATOR],yr=ur.match(dr);if(!yr)throw new TypeError(`Invalid comparator: ${ur}`);this.operator=yr[1]!==void 0?yr[1]:"",this.operator==="="&&(this.operator=""),yr[2]?this.semver=new ar(yr[2],this.options.loose):this.semver=tr}toString(){return this.value}test(ur){if(or("Comparator.test",ur,this.options.loose),this.semver===tr||ur===tr)return!0;if(typeof ur=="string")try{ur=new ar(ur,this.options)}catch{return!1}return sr(ur,this.operator,this.semver,this.options)}intersects(ur,dr){if(!(ur instanceof er))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new cr(ur.value,dr).test(this.value):ur.operator===""?ur.value===""?!0:new cr(this.value,dr).test(ur.semver):(dr=rr(dr),dr.includePrerelease&&(this.value==="<0.0.0-0"||ur.value==="<0.0.0-0")||!dr.includePrerelease&&(this.value.startsWith("<0.0.0")||ur.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&ur.operator.startsWith(">")||this.operator.startsWith("<")&&ur.operator.startsWith("<")||this.semver.version===ur.semver.version&&this.operator.includes("=")&&ur.operator.includes("=")||sr(this.semver,"<",ur.semver,dr)&&this.operator.startsWith(">")&&ur.operator.startsWith("<")||sr(this.semver,">",ur.semver,dr)&&this.operator.startsWith("<")&&ur.operator.startsWith(">")))}}comparator=er;const rr=parseOptions_1,{safeRe:nr,t:ir}=reExports,sr=cmp_1,or=debug_1,ar=semver$1,cr=requireRange();return comparator}const Range$9=requireRange(),satisfies$4=(tr,er,rr)=>{try{er=new Range$9(er,rr)}catch{return!1}return er.test(tr)};var satisfies_1=satisfies$4;const Range$8=requireRange(),toComparators$1=(tr,er)=>new Range$8(tr,er).set.map(rr=>rr.map(nr=>nr.value).join(" ").trim().split(" "));var toComparators_1=toComparators$1;const SemVer$4=semver$1,Range$7=requireRange(),maxSatisfying$1=(tr,er,rr)=>{let nr=null,ir=null,sr=null;try{sr=new Range$7(er,rr)}catch{return null}return tr.forEach(or=>{sr.test(or)&&(!nr||ir.compare(or)===-1)&&(nr=or,ir=new SemVer$4(nr,rr))}),nr};var maxSatisfying_1=maxSatisfying$1;const SemVer$3=semver$1,Range$6=requireRange(),minSatisfying$1=(tr,er,rr)=>{let nr=null,ir=null,sr=null;try{sr=new Range$6(er,rr)}catch{return null}return tr.forEach(or=>{sr.test(or)&&(!nr||ir.compare(or)===1)&&(nr=or,ir=new SemVer$3(nr,rr))}),nr};var minSatisfying_1=minSatisfying$1;const SemVer$2=semver$1,Range$5=requireRange(),gt$2=gt_1,minVersion$1=(tr,er)=>{tr=new Range$5(tr,er);let rr=new SemVer$2("0.0.0");if(tr.test(rr)||(rr=new SemVer$2("0.0.0-0"),tr.test(rr)))return rr;rr=null;for(let nr=0;nr<tr.set.length;++nr){const ir=tr.set[nr];let sr=null;ir.forEach(or=>{const ar=new SemVer$2(or.semver.version);switch(or.operator){case">":ar.prerelease.length===0?ar.patch++:ar.prerelease.push(0),ar.raw=ar.format();case"":case">=":(!sr||gt$2(ar,sr))&&(sr=ar);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${or.operator}`)}}),sr&&(!rr||gt$2(rr,sr))&&(rr=sr)}return rr&&tr.test(rr)?rr:null};var minVersion_1=minVersion$1;const Range$4=requireRange(),validRange$1=(tr,er)=>{try{return new Range$4(tr,er).range||"*"}catch{return null}};var valid$1=validRange$1;const SemVer$1=semver$1,Comparator$2=requireComparator(),{ANY:ANY$1}=Comparator$2,Range$3=requireRange(),satisfies$3=satisfies_1,gt$1=gt_1,lt$1=lt_1,lte$1=lte_1,gte$1=gte_1,outside$3=(tr,er,rr,nr)=>{tr=new SemVer$1(tr,nr),er=new Range$3(er,nr);let ir,sr,or,ar,cr;switch(rr){case">":ir=gt$1,sr=lte$1,or=lt$1,ar=">",cr=">=";break;case"<":ir=lt$1,sr=gte$1,or=gt$1,ar="<",cr="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(satisfies$3(tr,er,nr))return!1;for(let lr=0;lr<er.set.length;++lr){const ur=er.set[lr];let dr=null,yr=null;if(ur.forEach(mr=>{mr.semver===ANY$1&&(mr=new Comparator$2(">=0.0.0")),dr=dr||mr,yr=yr||mr,ir(mr.semver,dr.semver,nr)?dr=mr:or(mr.semver,yr.semver,nr)&&(yr=mr)}),dr.operator===ar||dr.operator===cr||(!yr.operator||yr.operator===ar)&&sr(tr,yr.semver))return!1;if(yr.operator===cr&&or(tr,yr.semver))return!1}return!0};var outside_1=outside$3;const outside$2=outside_1,gtr$1=(tr,er,rr)=>outside$2(tr,er,">",rr);var gtr_1=gtr$1;const outside$1=outside_1,ltr$1=(tr,er,rr)=>outside$1(tr,er,"<",rr);var ltr_1=ltr$1;const Range$2=requireRange(),intersects$1=(tr,er,rr)=>(tr=new Range$2(tr,rr),er=new Range$2(er,rr),tr.intersects(er,rr));var intersects_1=intersects$1;const satisfies$2=satisfies_1,compare$3=compare_1;var simplify=(tr,er,rr)=>{const nr=[];let ir=null,sr=null;const or=tr.sort((ur,dr)=>compare$3(ur,dr,rr));for(const ur of or)satisfies$2(ur,er,rr)?(sr=ur,ir||(ir=ur)):(sr&&nr.push([ir,sr]),sr=null,ir=null);ir&&nr.push([ir,null]);const ar=[];for(const[ur,dr]of nr)ur===dr?ar.push(ur):!dr&&ur===or[0]?ar.push("*"):dr?ur===or[0]?ar.push(`<=${dr}`):ar.push(`${ur} - ${dr}`):ar.push(`>=${ur}`);const cr=ar.join(" || "),lr=typeof er.raw=="string"?er.raw:String(er);return cr.length<lr.length?cr:er};const Range$1=requireRange(),Comparator$1=requireComparator(),{ANY}=Comparator$1,satisfies$1=satisfies_1,compare$2=compare_1,subset$1=(tr,er,rr={})=>{if(tr===er)return!0;tr=new Range$1(tr,rr),er=new Range$1(er,rr);let nr=!1;e:for(const ir of tr.set){for(const sr of er.set){const or=simpleSubset(ir,sr,rr);if(nr=nr||or!==null,or)continue e}if(nr)return!1}return!0},minimumVersionWithPreRelease=[new Comparator$1(">=0.0.0-0")],minimumVersion=[new Comparator$1(">=0.0.0")],simpleSubset=(tr,er,rr)=>{if(tr===er)return!0;if(tr.length===1&&tr[0].semver===ANY){if(er.length===1&&er[0].semver===ANY)return!0;rr.includePrerelease?tr=minimumVersionWithPreRelease:tr=minimumVersion}if(er.length===1&&er[0].semver===ANY){if(rr.includePrerelease)return!0;er=minimumVersion}const nr=new Set;let ir,sr;for(const mr of tr)mr.operator===">"||mr.operator===">="?ir=higherGT(ir,mr,rr):mr.operator==="<"||mr.operator==="<="?sr=lowerLT(sr,mr,rr):nr.add(mr.semver);if(nr.size>1)return null;let or;if(ir&&sr){if(or=compare$2(ir.semver,sr.semver,rr),or>0)return null;if(or===0&&(ir.operator!==">="||sr.operator!=="<="))return null}for(const mr of nr){if(ir&&!satisfies$1(mr,String(ir),rr)||sr&&!satisfies$1(mr,String(sr),rr))return null;for(const wr of er)if(!satisfies$1(mr,String(wr),rr))return!1;return!0}let ar,cr,lr,ur,dr=sr&&!rr.includePrerelease&&sr.semver.prerelease.length?sr.semver:!1,yr=ir&&!rr.includePrerelease&&ir.semver.prerelease.length?ir.semver:!1;dr&&dr.prerelease.length===1&&sr.operator==="<"&&dr.prerelease[0]===0&&(dr=!1);for(const mr of er){if(ur=ur||mr.operator===">"||mr.operator===">=",lr=lr||mr.operator==="<"||mr.operator==="<=",ir){if(yr&&mr.semver.prerelease&&mr.semver.prerelease.length&&mr.semver.major===yr.major&&mr.semver.minor===yr.minor&&mr.semver.patch===yr.patch&&(yr=!1),mr.operator===">"||mr.operator===">="){if(ar=higherGT(ir,mr,rr),ar===mr&&ar!==ir)return!1}else if(ir.operator===">="&&!satisfies$1(ir.semver,String(mr),rr))return!1}if(sr){if(dr&&mr.semver.prerelease&&mr.semver.prerelease.length&&mr.semver.major===dr.major&&mr.semver.minor===dr.minor&&mr.semver.patch===dr.patch&&(dr=!1),mr.operator==="<"||mr.operator==="<="){if(cr=lowerLT(sr,mr,rr),cr===mr&&cr!==sr)return!1}else if(sr.operator==="<="&&!satisfies$1(sr.semver,String(mr),rr))return!1}if(!mr.operator&&(sr||ir)&&or!==0)return!1}return!(ir&&lr&&!sr&&or!==0||sr&&ur&&!ir&&or!==0||yr||dr)},higherGT=(tr,er,rr)=>{if(!tr)return er;const nr=compare$2(tr.semver,er.semver,rr);return nr>0?tr:nr<0||er.operator===">"&&tr.operator===">="?er:tr},lowerLT=(tr,er,rr)=>{if(!tr)return er;const nr=compare$2(tr.semver,er.semver,rr);return nr<0?tr:nr>0||er.operator==="<"&&tr.operator==="<="?er:tr};var subset_1=subset$1;const internalRe=reExports,constants$3=constants$4,SemVer=semver$1,identifiers=identifiers$1,parse=parse_1,valid=valid_1,clean=clean_1,inc=inc_1,diff=diff_1,major=major_1,minor=minor_1,patch=patch_1,prerelease=prerelease_1,compare$1=compare_1,rcompare=rcompare_1,compareLoose=compareLoose_1,compareBuild=compareBuild_1,sort=sort_1,rsort=rsort_1,gt=gt_1,lt=lt_1,eq=eq_1,neq=neq_1,gte=gte_1,lte=lte_1,cmp=cmp_1,coerce=coerce_1,Comparator=requireComparator(),Range=requireRange(),satisfies=satisfies_1,toComparators=toComparators_1,maxSatisfying=maxSatisfying_1,minSatisfying=minSatisfying_1,minVersion=minVersion_1,validRange=valid$1,outside=outside_1,gtr=gtr_1,ltr=ltr_1,intersects=intersects_1,simplifyRange=simplify,subset=subset_1;var semver={parse,valid,clean,inc,diff,major,minor,patch,prerelease,compare:compare$1,rcompare,compareLoose,compareBuild,sort,rsort,gt,lt,eq,neq,gte,lte,cmp,coerce,Comparator,Range,satisfies,toComparators,maxSatisfying,minSatisfying,minVersion,validRange,outside,gtr,ltr,intersects,simplifyRange,subset,SemVer,re:internalRe.re,src:internalRe.src,tokens:internalRe.t,SEMVER_SPEC_VERSION:constants$3.SEMVER_SPEC_VERSION,RELEASE_TYPES:constants$3.RELEASE_TYPES,compareIdentifiers:identifiers.compareIdentifiers,rcompareIdentifiers:identifiers.rcompareIdentifiers};(function(tr){Object.defineProperty(tr,"__esModule",{value:!0}),tr.satisfiesVersionRange=tr.gtRange=tr.gtVersion=tr.assertIsSemVerRange=tr.assertIsSemVerVersion=tr.isValidSemVerRange=tr.isValidSemVerVersion=tr.VersionRangeStruct=tr.VersionStruct=void 0;const er=dist$4,rr=semver,nr=assert$3;tr.VersionStruct=(0,er.refine)((0,er.string)(),"Version",dr=>(0,rr.valid)(dr)===null?`Expected SemVer version, got "${dr}"`:!0),tr.VersionRangeStruct=(0,er.refine)((0,er.string)(),"Version range",dr=>(0,rr.validRange)(dr)===null?`Expected SemVer range, got "${dr}"`:!0);function ir(dr){return(0,er.is)(dr,tr.VersionStruct)}tr.isValidSemVerVersion=ir;function sr(dr){return(0,er.is)(dr,tr.VersionRangeStruct)}tr.isValidSemVerRange=sr;function or(dr){(0,nr.assertStruct)(dr,tr.VersionStruct)}tr.assertIsSemVerVersion=or;function ar(dr){(0,nr.assertStruct)(dr,tr.VersionRangeStruct)}tr.assertIsSemVerRange=ar;function cr(dr,yr){return(0,rr.gt)(dr,yr)}tr.gtVersion=cr;function lr(dr,yr){return(0,rr.gtr)(dr,yr)}tr.gtRange=lr;function ur(dr,yr){return(0,rr.satisfies)(dr,yr,{includePrerelease:!0})}tr.satisfiesVersionRange=ur})(versions);(function(tr){var er=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(nr,ir,sr,or){or===void 0&&(or=sr);var ar=Object.getOwnPropertyDescriptor(ir,sr);(!ar||("get"in ar?!ir.__esModule:ar.writable||ar.configurable))&&(ar={enumerable:!0,get:function(){return ir[sr]}}),Object.defineProperty(nr,or,ar)}:function(nr,ir,sr,or){or===void 0&&(or=sr),nr[or]=ir[sr]}),rr=commonjsGlobal&&commonjsGlobal.__exportStar||function(nr,ir){for(var sr in nr)sr!=="default"&&!Object.prototype.hasOwnProperty.call(ir,sr)&&er(ir,nr,sr)};Object.defineProperty(tr,"__esModule",{value:!0}),rr(assert$3,tr),rr(base64$1,tr),rr(requireBytes(),tr),rr(caipTypes,tr),rr(checksum,tr),rr(coercers,tr),rr(collections,tr),rr(encryptionTypes,tr),rr(errors$3,tr),rr(requireHex(),tr),rr(json,tr),rr(keyring,tr),rr(logging,tr),rr(misc,tr),rr(number$1,tr),rr(opaque,tr),rr(promise,tr),rr(time,tr),rr(transactionTypes,tr),rr(versions,tr)})(dist$2);var errors$2={};(function(tr){Object.defineProperty(tr,"__esModule",{value:!0}),tr.ParserError=tr.getErrorStack=tr.getErrorMessage=void 0;const er=dist$2,rr=sr=>typeof sr=="string"?sr:sr instanceof Error||(0,er.isObject)(sr)&&(0,er.hasProperty)(sr,"message")&&typeof sr.message=="string"?sr.message:"Unknown error.";tr.getErrorMessage=rr;const nr=sr=>{if(sr instanceof Error)return sr.stack};tr.getErrorStack=nr;class ir extends Error{constructor(or,ar){super(or),this.name="ParserError";const cr=(0,tr.getErrorStack)(ar);cr&&(this.stack=cr)}}tr.ParserError=ir})(errors$2);var packer={},iterator={};Object.defineProperty(iterator,"__esModule",{value:!0});iterator.iterate=void 0;const utils_1$6=dist$2,iterate=function*(tr,er=32){for(let rr=0;rr<tr.length;rr+=er){const nr=sr=>{(0,utils_1$6.assert)(sr>=0,"Cannot skip a negative number of bytes."),(0,utils_1$6.assert)(sr%er===0,"Length must be a multiple of the size."),rr+=sr},ir=tr.subarray(rr);yield{skip:nr,value:ir}}return{skip:()=>{},value:new Uint8Array}};iterator.iterate=iterate;var parsers={},address={},utils$1={},buffer={};Object.defineProperty(buffer,"__esModule",{value:!0});buffer.padEnd=buffer.padStart=buffer.set=void 0;const utils_1$5=dist$2,BUFFER_WIDTH=32,set=(tr,er,rr)=>(0,utils_1$5.concatBytes)([tr.subarray(0,rr),er,tr.subarray(rr+er.length)]);buffer.set=set;const padStart=(tr,er=BUFFER_WIDTH)=>{const rr=new Uint8Array(Math.max(er-tr.length,0)).fill(0);return(0,utils_1$5.concatBytes)([rr,tr])};buffer.padStart=padStart;const padEnd=(tr,er=BUFFER_WIDTH)=>{const rr=new Uint8Array(Math.max(er-tr.length,0)).fill(0);return(0,utils_1$5.concatBytes)([tr,rr])};buffer.padEnd=padEnd;(function(tr){var er=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(nr,ir,sr,or){or===void 0&&(or=sr);var ar=Object.getOwnPropertyDescriptor(ir,sr);(!ar||("get"in ar?!ir.__esModule:ar.writable||ar.configurable))&&(ar={enumerable:!0,get:function(){return ir[sr]}}),Object.defineProperty(nr,or,ar)}:function(nr,ir,sr,or){or===void 0&&(or=sr),nr[or]=ir[sr]}),rr=commonjsGlobal&&commonjsGlobal.__exportStar||function(nr,ir){for(var sr in nr)sr!=="default"&&!Object.prototype.hasOwnProperty.call(ir,sr)&&er(ir,nr,sr)};Object.defineProperty(tr,"__esModule",{value:!0}),rr(buffer,tr)})(utils$1);(function(tr){Object.defineProperty(tr,"__esModule",{value:!0}),tr.address=tr.getAddress=void 0;const er=dist$2,rr=errors$2,nr=utils$1,ir=sr=>{const or=(0,er.createBytes)(sr);return(0,er.assert)(or.length<=20,new rr.ParserError(`Invalid address value. Expected address to be 20 bytes long, but received ${or.length} bytes.`)),(0,nr.padStart)(or,20)};tr.getAddress=ir,tr.address={isDynamic:!1,isType:sr=>sr==="address",getByteLength(){return 32},encode({buffer:sr,value:or,packed:ar}){const cr=(0,tr.getAddress)(or);if(ar)return(0,er.concatBytes)([sr,cr]);const lr=(0,nr.padStart)(cr);return(0,er.concatBytes)([sr,lr])},decode({value:sr}){return(0,er.add0x)((0,er.bytesToHex)(sr.slice(12,32)))}}})(address);var array={},fixedBytes={};(function(tr){Object.defineProperty(tr,"__esModule",{value:!0}),tr.fixedBytes=tr.getByteLength=void 0;const er=dist$2,rr=errors$2,nr=utils$1,ir=/^bytes([0-9]{1,2})$/u,sr=or=>{var lr;const ar=(lr=or.match(ir))==null?void 0:lr[1];(0,er.assert)(ar,`Invalid byte length. Expected a number between 1 and 32, but received "${or}".`);const cr=Number(ar);return(0,er.assert)(cr>0&&cr<=32,new rr.ParserError(`Invalid byte length. Expected a number between 1 and 32, but received "${or}".`)),cr};tr.getByteLength=sr,tr.fixedBytes={isDynamic:!1,isType(or){return ir.test(or)},getByteLength(){return 32},encode({type:or,buffer:ar,value:cr,packed:lr}){const ur=(0,tr.getByteLength)(or),dr=(0,er.createBytes)(cr);return(0,er.assert)(dr.length<=ur,new rr.ParserError(`Expected a value of length ${ur}, but received a value of length ${dr.length}.`)),lr?(0,er.concatBytes)([ar,(0,nr.padEnd)(dr,ur)]):(0,er.concatBytes)([ar,(0,nr.padEnd)(dr)])},decode({type:or,value:ar}){const cr=(0,tr.getByteLength)(or);return ar.slice(0,cr)}}})(fixedBytes);var tuple={},hasRequiredTuple;function requireTuple(){return hasRequiredTuple||(hasRequiredTuple=1,function(tr){Object.defineProperty(tr,"__esModule",{value:!0}),tr.tuple=tr.getTupleElements=void 0;const er=dist$2,rr=errors$2,nr=requirePacker(),ir=/^\((.+)\)$/u,sr=ar=>ir.test(ar),or=ar=>{(0,er.assert)(ar.startsWith("(")&&ar.endsWith(")"),new rr.ParserError(`Invalid tuple type. Expected tuple type, but received "${ar}".`));const cr=[];let lr="",ur=0;for(let dr=1;dr<ar.length-1;dr++){const yr=ar[dr];yr===","&&ur===0?(cr.push(lr.trim()),lr=""):(lr+=yr,yr==="("?ur+=1:yr===")"&&(ur-=1))}return lr.trim()&&cr.push(lr.trim()),cr};tr.getTupleElements=or,tr.tuple={isDynamic(ar){return(0,tr.getTupleElements)(ar).some(lr=>{const ur=(0,nr.getParser)(lr);return(0,nr.isDynamicParser)(ur,lr)})},isType(ar){return sr(ar)},getByteLength(ar){return(0,nr.isDynamicParser)(this,ar)?32:(0,tr.getTupleElements)(ar).reduce((lr,ur)=>lr+(0,nr.getParser)(ur).getByteLength(ur),0)},encode({type:ar,buffer:cr,value:lr,packed:ur,tight:dr}){const yr=(0,tr.getTupleElements)(ar);return(0,nr.pack)({types:yr,values:lr,byteArray:cr,packed:ur,tight:dr})},decode({type:ar,value:cr,skip:lr}){const ur=(0,tr.getTupleElements)(ar),dr=this.getByteLength(ar)-32;return lr(dr),(0,nr.unpack)(ur,cr)}}}(tuple)),tuple}var hasRequiredArray;function requireArray(){return hasRequiredArray||(hasRequiredArray=1,function(tr){Object.defineProperty(tr,"__esModule",{value:!0}),tr.array=tr.getTupleType=tr.getArrayType=tr.isArrayType=void 0;const er=dist$2,rr=errors$2,nr=requirePacker(),ir=utils$1,sr=fixedBytes,or=requireTuple(),ar=/^(?<type>.*)\[(?<length>\d*?)\]$/u,cr=dr=>ar.test(dr);tr.isArrayType=cr;const lr=dr=>{var mr;const yr=dr.match(ar);return(0,er.assert)((mr=yr==null?void 0:yr.groups)==null?void 0:mr.type,new rr.ParserError(`Invalid array type. Expected an array type, but received "${dr}".`)),[yr.groups.type,yr.groups.length?parseInt(yr.groups.length,10):void 0]};tr.getArrayType=lr;const ur=(dr,yr)=>`(${new Array(yr).fill(dr).join(",")})`;tr.getTupleType=ur,tr.array={isDynamic(dr){const[yr,mr]=(0,tr.getArrayType)(dr);return mr===void 0||(0,nr.isDynamicParser)((0,nr.getParser)(yr),yr)},isType(dr){return(0,tr.isArrayType)(dr)},getByteLength(dr){(0,er.assert)((0,tr.isArrayType)(dr),new rr.ParserError(`Expected an array type, but received "${dr}".`));const[yr,mr]=(0,tr.getArrayType)(dr);return!(0,nr.isDynamicParser)(this,dr)&&mr!==void 0?or.tuple.getByteLength((0,tr.getTupleType)(yr,mr)):32},encode({type:dr,buffer:yr,value:mr,packed:wr,tight:xr}){const[Or,Tr]=(0,tr.getArrayType)(dr);if((0,er.assert)(!wr||!(0,tr.isArrayType)(Or),new rr.ParserError("Cannot pack nested arrays.")),wr&&(0,nr.isDynamicParser)((0,nr.getParser)(Or),Or))return(0,nr.pack)({types:new Array(mr.length).fill(Or),values:mr,byteArray:yr,packed:wr,arrayPacked:!0,tight:xr});if(Tr)return(0,er.assert)(Tr===mr.length,new rr.ParserError(`Array length does not match type length. Expected a length of ${Tr}, but received ${mr.length}.`)),or.tuple.encode({type:(0,tr.getTupleType)(Or,Tr),buffer:yr,value:mr,packed:sr.fixedBytes.isType(Or)&&xr,tight:xr});if(wr)return(0,nr.pack)({types:new Array(mr.length).fill(Or),values:mr,byteArray:yr,packed:sr.fixedBytes.isType(Or)&&xr,arrayPacked:!0,tight:xr});const Ar=(0,ir.padStart)((0,er.numberToBytes)(mr.length));return(0,nr.pack)({types:new Array(mr.length).fill(Or),values:mr,byteArray:(0,er.concatBytes)([yr,Ar]),packed:wr,tight:xr})},decode({type:dr,value:yr,...mr}){const[wr,xr]=(0,tr.getArrayType)(dr);if(xr){const Tr=or.tuple.decode({type:(0,tr.getTupleType)(wr,xr),value:yr,...mr});return(0,er.assert)(Tr.length===xr,new rr.ParserError(`Array length does not match type length. Expected a length of ${xr}, but received ${Tr.length}.`)),Tr}const Or=(0,er.bytesToNumber)(yr.subarray(0,32));return(0,nr.unpack)(new Array(Or).fill(wr),yr.subarray(32))}}}(array)),array}var bool={},number={};(function(tr){Object.defineProperty(tr,"__esModule",{value:!0}),tr.number=tr.getBigInt=tr.assertNumberLength=tr.getLength=tr.isSigned=void 0;const er=dist$2,rr=errors$2,nr=utils$1,ir=/^u?int(?<length>[0-9]*)?$/u,sr=lr=>!lr.startsWith("u");tr.isSigned=sr;const or=lr=>{var yr;if(lr==="int"||lr==="uint")return 256;const ur=lr.match(ir);(0,er.assert)((yr=ur==null?void 0:ur.groups)==null?void 0:yr.length,new rr.ParserError(`Invalid number type. Expected a number type, but received "${lr}".`));const dr=parseInt(ur.groups.length,10);return(0,er.assert)(dr>=8&&dr<=256,new rr.ParserError(`Invalid number length. Expected a number between 8 and 256, but received "${lr}".`)),(0,er.assert)(dr%8===0,new rr.ParserError(`Invalid number length. Expected a multiple of 8, but received "${lr}".`)),dr};tr.getLength=or;const ar=(lr,ur)=>{const dr=(0,tr.getLength)(ur),yr=BigInt(2)**BigInt(dr-((0,tr.isSigned)(ur)?1:0))-BigInt(1);if((0,tr.isSigned)(ur)){(0,er.assert)(lr>=-(yr+BigInt(1))&&lr<=yr,new rr.ParserError(`Number "${lr}" is out of range for type "${ur}".`));return}(0,er.assert)(lr<=yr,new rr.ParserError(`Number "${lr}" is out of range for type "${ur}".`))};tr.assertNumberLength=ar;const cr=lr=>{try{return(0,er.createBigInt)(lr)}catch{throw new rr.ParserError(`Invalid number. Expected a valid number value, but received "${lr}".`)}};tr.getBigInt=cr,tr.number={isDynamic:!1,isType(lr){return ir.test(lr)},getByteLength(){return 32},encode({type:lr,buffer:ur,value:dr,packed:yr}){const mr=(0,tr.getBigInt)(dr);if((0,tr.assertNumberLength)(mr,lr),(0,tr.isSigned)(lr)){if(yr){const wr=(0,tr.getLength)(lr)/8;return(0,er.concatBytes)([ur,(0,er.signedBigIntToBytes)(mr,wr)])}return(0,er.concatBytes)([ur,(0,nr.padStart)((0,er.signedBigIntToBytes)(mr,32))])}if(yr){const wr=(0,tr.getLength)(lr)/8;return(0,er.concatBytes)([ur,(0,nr.padStart)((0,er.bigIntToBytes)(mr),wr)])}return(0,er.concatBytes)([ur,(0,nr.padStart)((0,er.bigIntToBytes)(mr))])},decode({type:lr,value:ur}){const dr=ur.subarray(0,32);if((0,tr.isSigned)(lr)){const mr=(0,er.bytesToSignedBigInt)(dr);return(0,tr.assertNumberLength)(mr,lr),mr}const yr=(0,er.bytesToBigInt)(dr);return(0,tr.assertNumberLength)(yr,lr),yr}}})(number);(function(tr){Object.defineProperty(tr,"__esModule",{value:!0}),tr.bool=tr.getBooleanValue=void 0;const er=dist$4,rr=dist$2,nr=errors$2,ir=number,sr=(0,er.coerce)((0,er.boolean)(),(0,er.union)([(0,er.literal)("true"),(0,er.literal)("false")]),ar=>ar==="true"),or=ar=>{try{return(0,er.create)(ar,sr)?BigInt(1):BigInt(0)}catch{throw new nr.ParserError(`Invalid boolean value. Expected a boolean literal, or the string "true" or "false", but received "${ar}".`)}};tr.getBooleanValue=or,tr.bool={isDynamic:!1,isType:ar=>ar==="bool",getByteLength(){return 32},encode({buffer:ar,value:cr,packed:lr,tight:ur}){const dr=(0,tr.getBooleanValue)(cr);return lr?(0,rr.concatBytes)([ar,(0,rr.bigIntToBytes)(dr)]):ir.number.encode({type:"uint256",buffer:ar,value:dr,packed:lr,tight:ur})},decode(ar){return ir.number.decode({...ar,type:"uint256"})===BigInt(1)}}})(bool);var bytes={};Object.defineProperty(bytes,"__esModule",{value:!0});bytes.bytes=void 0;const utils_1$4=dist$2,utils_2=utils$1;bytes.bytes={isDynamic:!0,isType:tr=>tr==="bytes",getByteLength(){return 32},encode({buffer:tr,value:er,packed:rr}){const nr=(0,utils_1$4.createBytes)(er);if(rr)return(0,utils_1$4.concatBytes)([tr,nr]);const ir=Math.ceil(nr.byteLength/32)*32;return(0,utils_1$4.concatBytes)([tr,(0,utils_2.padStart)((0,utils_1$4.numberToBytes)(nr.byteLength)),(0,utils_2.padEnd)(nr,ir)])},decode({value:tr}){const er=tr.subarray(0,32),rr=(0,utils_1$4.bytesToNumber)(er);return tr.slice(32,32+rr)}};var _function={};(function(tr){Object.defineProperty(tr,"__esModule",{value:!0}),tr.fn=tr.getFunction=void 0;const er=dist$4,rr=dist$2,nr=errors$2,ir=fixedBytes,sr=(0,er.coerce)((0,er.object)({address:rr.StrictHexStruct,selector:rr.StrictHexStruct}),(0,er.union)([rr.StrictHexStruct,(0,er.instance)(Uint8Array)]),ar=>{const cr=(0,rr.createBytes)(ar);return(0,rr.assert)(cr.length===24,new nr.ParserError(`Invalid Solidity function. Expected function to be 24 bytes long, but received ${cr.length} bytes.`)),{address:(0,rr.bytesToHex)(cr.subarray(0,20)),selector:(0,rr.bytesToHex)(cr.subarray(20,24))}}),or=ar=>{const cr=(0,er.create)(ar,sr);return(0,rr.concatBytes)([(0,rr.hexToBytes)(cr.address),(0,rr.hexToBytes)(cr.selector)])};tr.getFunction=or,tr.fn={isDynamic:!1,isType:ar=>ar==="function",getByteLength(){return 32},encode({buffer:ar,value:cr,packed:lr,tight:ur}){const dr=(0,tr.getFunction)(cr);return ir.fixedBytes.encode({type:"bytes24",buffer:ar,value:dr,packed:lr,tight:ur})},decode({value:ar}){return{address:(0,rr.bytesToHex)(ar.slice(0,20)),selector:(0,rr.bytesToHex)(ar.slice(20,24))}}}})(_function);var parser={};Object.defineProperty(parser,"__esModule",{value:!0});var string={};Object.defineProperty(string,"__esModule",{value:!0});string.string=void 0;const utils_1$3=dist$2,bytes_1=bytes;string.string={isDynamic:!0,isType:tr=>tr==="string",getByteLength(){return 32},encode({buffer:tr,value:er,packed:rr,tight:nr}){return bytes_1.bytes.encode({type:"bytes",buffer:tr,value:(0,utils_1$3.stringToBytes)(er),packed:rr,tight:nr})},decode(tr){return(0,utils_1$3.bytesToString)(bytes_1.bytes.decode(tr))}};var hasRequiredParsers;function requireParsers(){return hasRequiredParsers||(hasRequiredParsers=1,function(tr){var er=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(nr,ir,sr,or){or===void 0&&(or=sr);var ar=Object.getOwnPropertyDescriptor(ir,sr);(!ar||("get"in ar?!ir.__esModule:ar.writable||ar.configurable))&&(ar={enumerable:!0,get:function(){return ir[sr]}}),Object.defineProperty(nr,or,ar)}:function(nr,ir,sr,or){or===void 0&&(or=sr),nr[or]=ir[sr]}),rr=commonjsGlobal&&commonjsGlobal.__exportStar||function(nr,ir){for(var sr in nr)sr!=="default"&&!Object.prototype.hasOwnProperty.call(ir,sr)&&er(ir,nr,sr)};Object.defineProperty(tr,"__esModule",{value:!0}),rr(address,tr),rr(requireArray(),tr),rr(bool,tr),rr(bytes,tr),rr(fixedBytes,tr),rr(_function,tr),rr(number,tr),rr(parser,tr),rr(string,tr),rr(requireTuple(),tr)}(parsers)),parsers}var hasRequiredPacker;function requirePacker(){return hasRequiredPacker||(hasRequiredPacker=1,function(tr){Object.defineProperty(tr,"__esModule",{value:!0}),tr.unpack=tr.pack=tr.isDynamicParser=tr.getParser=void 0;const er=dist$2,rr=errors$2,nr=iterator,ir=requireParsers(),sr=utils$1,or=ur=>{const dr={address:ir.address,array:ir.array,bool:ir.bool,bytes:ir.bytes,fixedBytes:ir.fixedBytes,function:ir.fn,number:ir.number,string:ir.string,tuple:ir.tuple},yr=dr[ur];if(yr)return yr;const mr=Object.values(dr).find(wr=>wr.isType(ur));if(mr)return mr;throw new rr.ParserError(`The type "${ur}" is not supported.`)};tr.getParser=or;const ar=(ur,dr)=>{const{isDynamic:yr}=ur;return typeof yr=="function"?yr(dr):yr};tr.isDynamicParser=ar;const cr=({types:ur,values:dr,packed:yr=!1,tight:mr=!1,arrayPacked:wr=!1,byteArray:xr=new Uint8Array})=>{(0,er.assert)(ur.length===dr.length,new rr.ParserError(`The number of types (${ur.length}) does not match the number of values (${dr.length}).`));const{staticBuffer:Or,dynamicBuffer:Tr,pointers:Ar}=ur.reduce(({staticBuffer:Dr,dynamicBuffer:Hr,pointers:zr},Cr,Mr)=>{const Pr=(0,tr.getParser)(Cr),Sr=dr[Mr];if(yr||wr||!(0,tr.isDynamicParser)(Pr,Cr))return{staticBuffer:Pr.encode({buffer:Dr,value:Sr,type:Cr,packed:yr,tight:mr}),dynamicBuffer:Hr,pointers:zr};const pr=(0,er.concatBytes)([Dr,new Uint8Array(32)]),gr=Pr.encode({buffer:Hr,value:Sr,type:Cr,packed:yr,tight:mr});return{staticBuffer:pr,dynamicBuffer:gr,pointers:[...zr,{position:Dr.length,pointer:Hr.length}]}},{staticBuffer:new Uint8Array,dynamicBuffer:new Uint8Array,pointers:[]});(0,er.assert)(!yr&&!wr||Tr.length===0,new rr.ParserError("Invalid pack state."));const Nr=Or.length,Ur=Ar.reduce((Dr,{pointer:Hr,position:zr})=>{const Cr=(0,sr.padStart)((0,er.numberToBytes)(Nr+Hr));return(0,sr.set)(Dr,Cr,zr)},Or);return(0,er.concatBytes)([xr,Ur,Tr])};tr.pack=cr;const lr=(ur,dr)=>{const yr=(0,nr.iterate)(dr);return ur.map(mr=>{const{value:{value:wr,skip:xr},done:Or}=yr.next();(0,er.assert)(!Or,new rr.ParserError(`The encoded value is invalid for the provided types. Reached end of buffer while attempting to parse "${mr}".`));const Tr=(0,tr.getParser)(mr);if((0,tr.isDynamicParser)(Tr,mr)){const Nr=(0,er.bytesToNumber)(wr.subarray(0,32)),Ur=dr.subarray(Nr);return Tr.decode({type:mr,value:Ur,skip:xr})}return Tr.decode({type:mr,value:wr,skip:xr})})};tr.unpack=lr}(packer)),packer}(function(tr){Object.defineProperty(tr,"__esModule",{value:!0}),tr.decodeSingle=tr.decode=tr.encodePacked=tr.encodeSingle=tr.encode=void 0;const er=dist$2,rr=errors$2,nr=requirePacker(),ir=(lr,ur,dr,yr)=>{try{return(0,nr.pack)({types:lr,values:ur,packed:dr,tight:yr})}catch(mr){throw mr instanceof rr.ParserError?new rr.ParserError(`Unable to encode value: ${mr.message}`,mr):new rr.ParserError(`An unexpected error occurred: ${(0,rr.getErrorMessage)(mr)}`,mr)}};tr.encode=ir;const sr=(lr,ur)=>(0,tr.encode)([lr],[ur]);tr.encodeSingle=sr;const or=(lr,ur,dr)=>(0,tr.encode)(lr,ur,!0,dr);tr.encodePacked=or;const ar=(lr,ur)=>{const dr=(0,er.createBytes)(ur);try{return(0,nr.unpack)(lr,dr)}catch(yr){throw yr instanceof rr.ParserError?new rr.ParserError(`Unable to decode value: ${yr.message}`,yr):new rr.ParserError(`An unexpected error occurred: ${(0,rr.getErrorMessage)(yr)}`,yr)}};tr.decode=ar;const cr=(lr,ur)=>{const dr=(0,tr.decode)([lr],ur);return(0,er.assert)(dr.length===1,new rr.ParserError("Decoded value array has unexpected length.")),dr[0]};tr.decodeSingle=cr})(abi$3);var types$1={},abi$2={};Object.defineProperty(abi$2,"__esModule",{value:!0});(function(tr){var er=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(nr,ir,sr,or){or===void 0&&(or=sr);var ar=Object.getOwnPropertyDescriptor(ir,sr);(!ar||("get"in ar?!ir.__esModule:ar.writable||ar.configurable))&&(ar={enumerable:!0,get:function(){return ir[sr]}}),Object.defineProperty(nr,or,ar)}:function(nr,ir,sr,or){or===void 0&&(or=sr),nr[or]=ir[sr]}),rr=commonjsGlobal&&commonjsGlobal.__exportStar||function(nr,ir){for(var sr in nr)sr!=="default"&&!Object.prototype.hasOwnProperty.call(ir,sr)&&er(ir,nr,sr)};Object.defineProperty(tr,"__esModule",{value:!0}),rr(abi$2,tr)})(types$1);(function(tr){var er=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(nr,ir,sr,or){or===void 0&&(or=sr);var ar=Object.getOwnPropertyDescriptor(ir,sr);(!ar||("get"in ar?!ir.__esModule:ar.writable||ar.configurable))&&(ar={enumerable:!0,get:function(){return ir[sr]}}),Object.defineProperty(nr,or,ar)}:function(nr,ir,sr,or){or===void 0&&(or=sr),nr[or]=ir[sr]}),rr=commonjsGlobal&&commonjsGlobal.__exportStar||function(nr,ir){for(var sr in nr)sr!=="default"&&!Object.prototype.hasOwnProperty.call(ir,sr)&&er(ir,nr,sr)};Object.defineProperty(tr,"__esModule",{value:!0}),rr(abi$3,tr),rr(errors$2,tr),rr(types$1,tr)})(dist$3);(function(tr){Object.defineProperty(tr,"__esModule",{value:!0}),tr.recoverTypedSignature=tr.signTypedData=tr.typedSignatureHash=tr.TypedDataUtils=tr.TYPED_MESSAGE_SCHEMA=tr.SignTypedDataVersion=void 0;const er=dist$7,rr=dist$3,nr=requireParsers(),ir=utils$1,sr=dist$5,or=keccak$3,ar=utils$3;var cr;(function(pr){pr.V1="V1",pr.V3="V3",pr.V4="V4"})(cr=tr.SignTypedDataVersion||(tr.SignTypedDataVersion={})),tr.TYPED_MESSAGE_SCHEMA={type:"object",properties:{types:{type:"object",additionalProperties:{type:"array",items:{type:"object",properties:{name:{type:"string"},type:{type:"string"}},required:["name","type"]}}},primaryType:{type:"string"},domain:{type:"object"},message:{type:"object"}},required:["types","primaryType","domain","message"]};function lr(pr,gr){if(Object.keys(cr).includes(pr)){if(gr&&!gr.includes(pr))throw new Error(`SignTypedDataVersion not allowed: '${pr}'. Allowed versions are: ${gr.join(", ")}`)}else throw new Error(`Invalid version: '${pr}'`)}function ur(pr,gr){(0,sr.assert)(gr!==null,`Unable to encode value: Invalid number. Expected a valid number value, but received "${gr}".`);const fr=BigInt(gr),hr=(0,nr.getLength)(pr),br=BigInt(2)**BigInt(hr)-BigInt(1);return(0,sr.assert)(fr>=-br&&fr<=br,`Unable to encode value: Number "${gr}" is out of range for type "${pr}".`),fr}function dr(pr){let gr=BigInt(0);for(let fr=0;fr<pr.length;fr++){const hr=BigInt(pr.charCodeAt(fr)-48);gr*=BigInt(10),hr>=49?gr+=hr-BigInt(49)+BigInt(10):hr>=17?gr+=hr-BigInt(17)+BigInt(10):gr+=hr}return(0,ir.padStart)((0,sr.bigIntToBytes)(gr),20)}function yr(pr,gr,fr,hr,br){if(lr(br,[cr.V3,cr.V4]),pr[fr]!==void 0)return["bytes32",br===cr.V4&&hr==null?"0x0000000000000000000000000000000000000000000000000000000000000000":(0,er.arrToBufArr)((0,or.keccak256)(mr(fr,hr,pr,br)))];if(fr==="function")throw new Error('Unsupported or invalid type: "function"');if(hr===void 0)throw new Error(`missing value for field ${gr} of type ${fr}`);if(fr==="address"){if(typeof hr=="number")return["address",(0,ir.padStart)((0,sr.numberToBytes)(hr),20)];if((0,sr.isStrictHexString)(hr))return["address",(0,sr.add0x)(hr)];if(typeof hr=="string")return["address",dr(hr).subarray(0,20)]}if(fr==="bool")return["bool",!!hr];if(fr==="bytes")return typeof hr=="number"?hr=(0,sr.numberToBytes)(hr):(0,sr.isStrictHexString)(hr)||hr==="0x"?hr=(0,sr.hexToBytes)(hr):typeof hr=="string"&&(hr=(0,sr.stringToBytes)(hr)),["bytes32",(0,er.arrToBufArr)((0,or.keccak256)(hr))];if(fr.startsWith("bytes")&&fr!=="bytes"&&!fr.includes("["))return typeof hr=="number"?hr<0?["bytes32",new Uint8Array(32)]:["bytes32",(0,sr.bigIntToBytes)(BigInt(hr))]:(0,sr.isStrictHexString)(hr)?["bytes32",(0,sr.hexToBytes)(hr)]:["bytes32",hr];if(fr.startsWith("int")&&!fr.includes("[")){const _r=ur(fr,hr);return _r>=BigInt(0)?["uint256",_r]:["int256",_r]}if(fr==="string")return typeof hr=="number"?hr=(0,sr.numberToBytes)(hr):hr=(0,sr.stringToBytes)(hr??""),["bytes32",(0,er.arrToBufArr)((0,or.keccak256)(hr))];if(fr.endsWith("]")){if(br===cr.V3)throw new Error("Arrays are unimplemented in encodeData; use V4 extension");const _r=fr.slice(0,fr.lastIndexOf("[")),$r=hr.map(Er=>yr(pr,gr,_r,Er,br));return["bytes32",(0,er.arrToBufArr)((0,or.keccak256)((0,rr.encode)($r.map(([Er])=>Er),$r.map(([,Er])=>Er))))]}return[fr,hr]}function mr(pr,gr,fr,hr){lr(hr,[cr.V3,cr.V4]);const br=["bytes32"],_r=[Tr(pr,fr)];for(const $r of fr[pr]){if(hr===cr.V3&&gr[$r.name]===void 0)continue;const[Er,vr]=yr(fr,$r.name,$r.type,gr[$r.name],hr);br.push(Er),_r.push(vr)}return(0,er.arrToBufArr)((0,rr.encode)(br,_r))}function wr(pr,gr){let fr="";const hr=xr(pr,gr);hr.delete(pr);const br=[pr,...Array.from(hr).sort()];for(const _r of br){if(!gr[_r])throw new Error(`No type definition specified: ${_r}`);fr+=`${_r}(${gr[_r].map(({name:Er,type:vr})=>`${vr} ${Er}`).join(",")})`}return fr}function xr(pr,gr,fr=new Set){if(typeof pr!="string")throw new Error(`Invalid findTypeDependencies input ${JSON.stringify(pr)}`);if([pr]=pr.match(/^\w*/u),fr.has(pr)||gr[pr]===void 0)return fr;fr.add(pr);for(const br of gr[pr])xr(br.type,gr,fr);return fr}function Or(pr,gr,fr,hr){lr(hr,[cr.V3,cr.V4]);const br=mr(pr,gr,fr,hr),_r=(0,or.keccak256)(br);return(0,er.arrToBufArr)(_r)}function Tr(pr,gr){const fr=(0,sr.stringToBytes)(wr(pr,gr));return(0,er.arrToBufArr)((0,or.keccak256)(fr))}function Ar(pr){const gr={};for(const fr in tr.TYPED_MESSAGE_SCHEMA.properties)pr[fr]&&(gr[fr]=pr[fr]);return"types"in gr&&(gr.types=Object.assign({EIP712Domain:[]},gr.types)),gr}function Nr(pr,gr){lr(gr,[cr.V3,cr.V4]);const fr=Ar(pr),{domain:hr}=fr,br={EIP712Domain:fr.types.EIP712Domain};return Or("EIP712Domain",hr,br,gr)}function Ur(pr,gr){lr(gr,[cr.V3,cr.V4]);const fr=Ar(pr),hr=[(0,sr.hexToBytes)("1901")];return hr.push(Nr(pr,gr)),fr.primaryType!=="EIP712Domain"&&hr.push(Or(fr.primaryType,fr.message,fr.types,gr)),(0,er.arrToBufArr)((0,or.keccak256)((0,sr.concatBytes)(hr)))}tr.TypedDataUtils={encodeData:mr,encodeType:wr,findTypeDependencies:xr,hashStruct:Or,hashType:Tr,sanitizeData:Ar,eip712Hash:Ur,eip712DomainHash:Nr};function Dr(pr){const gr=Mr(pr);return(0,sr.bytesToHex)(gr)}tr.typedSignatureHash=Dr;function Hr(pr,gr){if((0,nr.isArrayType)(pr)&&Array.isArray(gr)){const[fr]=(0,nr.getArrayType)(pr);return gr.map(hr=>Hr(fr,hr))}if(pr==="address"){if(typeof gr=="number")return(0,ir.padStart)((0,sr.numberToBytes)(gr),20);if((0,sr.isStrictHexString)(gr))return(0,ir.padStart)((0,sr.hexToBytes)(gr).subarray(0,20),20);if(gr instanceof Uint8Array)return(0,ir.padStart)(gr.subarray(0,20),20)}if(pr==="bool")return!!gr;if(pr.startsWith("bytes")&&pr!=="bytes"){const fr=(0,nr.getByteLength)(pr);if(typeof gr=="number")return gr<0?new Uint8Array:(0,sr.numberToBytes)(gr).subarray(0,fr);if((0,sr.isStrictHexString)(gr))return(0,sr.hexToBytes)(gr).subarray(0,fr);if(gr instanceof Uint8Array)return gr.subarray(0,fr)}if(pr.startsWith("uint")&&typeof gr=="number")return Math.abs(gr);if(pr.startsWith("int")&&typeof gr=="number"){const fr=(0,nr.getLength)(pr);return BigInt.asIntN(fr,BigInt(gr))}return gr}function zr(pr){return pr.map(gr=>typeof gr=="number"?(0,ir.padStart)((0,sr.numberToBytes)(gr),32):(0,sr.isStrictHexString)(gr)?(0,ir.padStart)((0,sr.hexToBytes)(gr).subarray(0,32),32):gr instanceof Uint8Array?(0,ir.padStart)(gr.subarray(0,32),32):gr)}function Cr(pr,gr){return gr.map(fr=>{if(typeof fr=="string"||typeof fr=="number"||typeof fr=="bigint"){const hr=ur(pr,fr);if(hr>=BigInt(0))return(0,ir.padStart)((0,sr.bigIntToBytes)(hr),32);const br=(0,nr.getLength)(pr),_r=BigInt.asIntN(br,hr);return(0,sr.signedBigIntToBytes)(_r,32)}return fr})}function Mr(pr){const gr=new Error("Expect argument to be non-empty array");if(typeof pr!="object"||!("length"in pr)||!pr.length)throw gr;const fr=pr.map(({name:$r,type:Er,value:vr})=>{if(Er==="address[]")return{name:$r,type:"bytes32[]",value:zr(vr)};if(Er.startsWith("int")&&(0,nr.isArrayType)(Er)){const[Ir,Rr]=(0,nr.getArrayType)(Er);return{name:$r,type:`bytes32[${Rr??""}]`,value:Cr(Ir,vr)}}return{name:$r,type:Er,value:Hr(Er,vr)}}),hr=fr.map($r=>$r.type!=="bytes"?$r.value:(0,ar.legacyToBuffer)($r.value)),br=fr.map($r=>{if($r.type==="function")throw new Error('Unsupported or invalid type: "function"');return $r.type}),_r=pr.map($r=>{if(!$r.name)throw gr;return`${$r.type} ${$r.name}`});return(0,er.arrToBufArr)((0,or.keccak256)((0,rr.encodePacked)(["bytes32","bytes32"],[(0,or.keccak256)((0,rr.encodePacked)(["string[]"],[_r],!0)),(0,or.keccak256)((0,rr.encodePacked)(br,hr,!0))])))}function Pr({privateKey:pr,data:gr,version:fr}){if(lr(fr),(0,ar.isNullish)(gr))throw new Error("Missing data parameter");if((0,ar.isNullish)(pr))throw new Error("Missing private key parameter");const hr=fr===cr.V1?Mr(gr):tr.TypedDataUtils.eip712Hash(gr,fr),br=(0,er.ecsign)(hr,pr);return(0,ar.concatSig)((0,er.arrToBufArr)((0,sr.bigIntToBytes)(br.v)),br.r,br.s)}tr.signTypedData=Pr;function Sr({data:pr,signature:gr,version:fr}){if(lr(fr),(0,ar.isNullish)(pr))throw new Error("Missing data parameter");if((0,ar.isNullish)(gr))throw new Error("Missing signature parameter");const hr=fr===cr.V1?Mr(pr):tr.TypedDataUtils.eip712Hash(pr,fr),br=(0,ar.recoverPublicKey)(hr,gr),_r=(0,er.publicToAddress)(br);return(0,sr.bytesToHex)(_r)}tr.recoverTypedSignature=Sr})(signTypedData);var encryption={},naclFast={exports:{}};(function(tr){(function(er){var rr=function(Gr){var nn,sn=new Float64Array(16);if(Gr)for(nn=0;nn<Gr.length;nn++)sn[nn]=Gr[nn];return sn},nr=function(){throw new Error("no PRNG")},ir=new Uint8Array(16),sr=new Uint8Array(32);sr[0]=9;var or=rr(),ar=rr([1]),cr=rr([56129,1]),lr=rr([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),ur=rr([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),dr=rr([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),yr=rr([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),mr=rr([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function wr(Gr,nn,sn,kr){Gr[nn]=sn>>24&255,Gr[nn+1]=sn>>16&255,Gr[nn+2]=sn>>8&255,Gr[nn+3]=sn&255,Gr[nn+4]=kr>>24&255,Gr[nn+5]=kr>>16&255,Gr[nn+6]=kr>>8&255,Gr[nn+7]=kr&255}function xr(Gr,nn,sn,kr,fn){var En,$n=0;for(En=0;En<fn;En++)$n|=Gr[nn+En]^sn[kr+En];return(1&$n-1>>>8)-1}function Or(Gr,nn,sn,kr){return xr(Gr,nn,sn,kr,16)}function Tr(Gr,nn,sn,kr){return xr(Gr,nn,sn,kr,32)}function Ar(Gr,nn,sn,kr){for(var fn=kr[0]&255|(kr[1]&255)<<8|(kr[2]&255)<<16|(kr[3]&255)<<24,En=sn[0]&255|(sn[1]&255)<<8|(sn[2]&255)<<16|(sn[3]&255)<<24,$n=sn[4]&255|(sn[5]&255)<<8|(sn[6]&255)<<16|(sn[7]&255)<<24,Tn=sn[8]&255|(sn[9]&255)<<8|(sn[10]&255)<<16|(sn[11]&255)<<24,Bn=sn[12]&255|(sn[13]&255)<<8|(sn[14]&255)<<16|(sn[15]&255)<<24,jn=kr[4]&255|(kr[5]&255)<<8|(kr[6]&255)<<16|(kr[7]&255)<<24,Hn=nn[0]&255|(nn[1]&255)<<8|(nn[2]&255)<<16|(nn[3]&255)<<24,go=nn[4]&255|(nn[5]&255)<<8|(nn[6]&255)<<16|(nn[7]&255)<<24,Yn=nn[8]&255|(nn[9]&255)<<8|(nn[10]&255)<<16|(nn[11]&255)<<24,oo=nn[12]&255|(nn[13]&255)<<8|(nn[14]&255)<<16|(nn[15]&255)<<24,co=kr[8]&255|(kr[9]&255)<<8|(kr[10]&255)<<16|(kr[11]&255)<<24,ro=sn[16]&255|(sn[17]&255)<<8|(sn[18]&255)<<16|(sn[19]&255)<<24,fo=sn[20]&255|(sn[21]&255)<<8|(sn[22]&255)<<16|(sn[23]&255)<<24,io=sn[24]&255|(sn[25]&255)<<8|(sn[26]&255)<<16|(sn[27]&255)<<24,ao=sn[28]&255|(sn[29]&255)<<8|(sn[30]&255)<<16|(sn[31]&255)<<24,lo=kr[12]&255|(kr[13]&255)<<8|(kr[14]&255)<<16|(kr[15]&255)<<24,Ws=fn,Qs=En,_i=$n,Js=Tn,Ls=Bn,Qn=jn,In=Hn,Nn=go,Vn=Yn,Un=oo,Fn=co,Wn=ro,ho=fo,wo=io,So=ao,xo=lo,wn,Ao=0;Ao<20;Ao+=2)wn=Ws+ho|0,Ls^=wn<<7|wn>>>25,wn=Ls+Ws|0,Vn^=wn<<9|wn>>>23,wn=Vn+Ls|0,ho^=wn<<13|wn>>>19,wn=ho+Vn|0,Ws^=wn<<18|wn>>>14,wn=Qn+Qs|0,Un^=wn<<7|wn>>>25,wn=Un+Qn|0,wo^=wn<<9|wn>>>23,wn=wo+Un|0,Qs^=wn<<13|wn>>>19,wn=Qs+wo|0,Qn^=wn<<18|wn>>>14,wn=Fn+In|0,So^=wn<<7|wn>>>25,wn=So+Fn|0,_i^=wn<<9|wn>>>23,wn=_i+So|0,In^=wn<<13|wn>>>19,wn=In+_i|0,Fn^=wn<<18|wn>>>14,wn=xo+Wn|0,Js^=wn<<7|wn>>>25,wn=Js+xo|0,Nn^=wn<<9|wn>>>23,wn=Nn+Js|0,Wn^=wn<<13|wn>>>19,wn=Wn+Nn|0,xo^=wn<<18|wn>>>14,wn=Ws+Js|0,Qs^=wn<<7|wn>>>25,wn=Qs+Ws|0,_i^=wn<<9|wn>>>23,wn=_i+Qs|0,Js^=wn<<13|wn>>>19,wn=Js+_i|0,Ws^=wn<<18|wn>>>14,wn=Qn+Ls|0,In^=wn<<7|wn>>>25,wn=In+Qn|0,Nn^=wn<<9|wn>>>23,wn=Nn+In|0,Ls^=wn<<13|wn>>>19,wn=Ls+Nn|0,Qn^=wn<<18|wn>>>14,wn=Fn+Un|0,Wn^=wn<<7|wn>>>25,wn=Wn+Fn|0,Vn^=wn<<9|wn>>>23,wn=Vn+Wn|0,Un^=wn<<13|wn>>>19,wn=Un+Vn|0,Fn^=wn<<18|wn>>>14,wn=xo+So|0,ho^=wn<<7|wn>>>25,wn=ho+xo|0,wo^=wn<<9|wn>>>23,wn=wo+ho|0,So^=wn<<13|wn>>>19,wn=So+wo|0,xo^=wn<<18|wn>>>14;Ws=Ws+fn|0,Qs=Qs+En|0,_i=_i+$n|0,Js=Js+Tn|0,Ls=Ls+Bn|0,Qn=Qn+jn|0,In=In+Hn|0,Nn=Nn+go|0,Vn=Vn+Yn|0,Un=Un+oo|0,Fn=Fn+co|0,Wn=Wn+ro|0,ho=ho+fo|0,wo=wo+io|0,So=So+ao|0,xo=xo+lo|0,Gr[0]=Ws>>>0&255,Gr[1]=Ws>>>8&255,Gr[2]=Ws>>>16&255,Gr[3]=Ws>>>24&255,Gr[4]=Qs>>>0&255,Gr[5]=Qs>>>8&255,Gr[6]=Qs>>>16&255,Gr[7]=Qs>>>24&255,Gr[8]=_i>>>0&255,Gr[9]=_i>>>8&255,Gr[10]=_i>>>16&255,Gr[11]=_i>>>24&255,Gr[12]=Js>>>0&255,Gr[13]=Js>>>8&255,Gr[14]=Js>>>16&255,Gr[15]=Js>>>24&255,Gr[16]=Ls>>>0&255,Gr[17]=Ls>>>8&255,Gr[18]=Ls>>>16&255,Gr[19]=Ls>>>24&255,Gr[20]=Qn>>>0&255,Gr[21]=Qn>>>8&255,Gr[22]=Qn>>>16&255,Gr[23]=Qn>>>24&255,Gr[24]=In>>>0&255,Gr[25]=In>>>8&255,Gr[26]=In>>>16&255,Gr[27]=In>>>24&255,Gr[28]=Nn>>>0&255,Gr[29]=Nn>>>8&255,Gr[30]=Nn>>>16&255,Gr[31]=Nn>>>24&255,Gr[32]=Vn>>>0&255,Gr[33]=Vn>>>8&255,Gr[34]=Vn>>>16&255,Gr[35]=Vn>>>24&255,Gr[36]=Un>>>0&255,Gr[37]=Un>>>8&255,Gr[38]=Un>>>16&255,Gr[39]=Un>>>24&255,Gr[40]=Fn>>>0&255,Gr[41]=Fn>>>8&255,Gr[42]=Fn>>>16&255,Gr[43]=Fn>>>24&255,Gr[44]=Wn>>>0&255,Gr[45]=Wn>>>8&255,Gr[46]=Wn>>>16&255,Gr[47]=Wn>>>24&255,Gr[48]=ho>>>0&255,Gr[49]=ho>>>8&255,Gr[50]=ho>>>16&255,Gr[51]=ho>>>24&255,Gr[52]=wo>>>0&255,Gr[53]=wo>>>8&255,Gr[54]=wo>>>16&255,Gr[55]=wo>>>24&255,Gr[56]=So>>>0&255,Gr[57]=So>>>8&255,Gr[58]=So>>>16&255,Gr[59]=So>>>24&255,Gr[60]=xo>>>0&255,Gr[61]=xo>>>8&255,Gr[62]=xo>>>16&255,Gr[63]=xo>>>24&255}function Nr(Gr,nn,sn,kr){for(var fn=kr[0]&255|(kr[1]&255)<<8|(kr[2]&255)<<16|(kr[3]&255)<<24,En=sn[0]&255|(sn[1]&255)<<8|(sn[2]&255)<<16|(sn[3]&255)<<24,$n=sn[4]&255|(sn[5]&255)<<8|(sn[6]&255)<<16|(sn[7]&255)<<24,Tn=sn[8]&255|(sn[9]&255)<<8|(sn[10]&255)<<16|(sn[11]&255)<<24,Bn=sn[12]&255|(sn[13]&255)<<8|(sn[14]&255)<<16|(sn[15]&255)<<24,jn=kr[4]&255|(kr[5]&255)<<8|(kr[6]&255)<<16|(kr[7]&255)<<24,Hn=nn[0]&255|(nn[1]&255)<<8|(nn[2]&255)<<16|(nn[3]&255)<<24,go=nn[4]&255|(nn[5]&255)<<8|(nn[6]&255)<<16|(nn[7]&255)<<24,Yn=nn[8]&255|(nn[9]&255)<<8|(nn[10]&255)<<16|(nn[11]&255)<<24,oo=nn[12]&255|(nn[13]&255)<<8|(nn[14]&255)<<16|(nn[15]&255)<<24,co=kr[8]&255|(kr[9]&255)<<8|(kr[10]&255)<<16|(kr[11]&255)<<24,ro=sn[16]&255|(sn[17]&255)<<8|(sn[18]&255)<<16|(sn[19]&255)<<24,fo=sn[20]&255|(sn[21]&255)<<8|(sn[22]&255)<<16|(sn[23]&255)<<24,io=sn[24]&255|(sn[25]&255)<<8|(sn[26]&255)<<16|(sn[27]&255)<<24,ao=sn[28]&255|(sn[29]&255)<<8|(sn[30]&255)<<16|(sn[31]&255)<<24,lo=kr[12]&255|(kr[13]&255)<<8|(kr[14]&255)<<16|(kr[15]&255)<<24,Ws=fn,Qs=En,_i=$n,Js=Tn,Ls=Bn,Qn=jn,In=Hn,Nn=go,Vn=Yn,Un=oo,Fn=co,Wn=ro,ho=fo,wo=io,So=ao,xo=lo,wn,Ao=0;Ao<20;Ao+=2)wn=Ws+ho|0,Ls^=wn<<7|wn>>>25,wn=Ls+Ws|0,Vn^=wn<<9|wn>>>23,wn=Vn+Ls|0,ho^=wn<<13|wn>>>19,wn=ho+Vn|0,Ws^=wn<<18|wn>>>14,wn=Qn+Qs|0,Un^=wn<<7|wn>>>25,wn=Un+Qn|0,wo^=wn<<9|wn>>>23,wn=wo+Un|0,Qs^=wn<<13|wn>>>19,wn=Qs+wo|0,Qn^=wn<<18|wn>>>14,wn=Fn+In|0,So^=wn<<7|wn>>>25,wn=So+Fn|0,_i^=wn<<9|wn>>>23,wn=_i+So|0,In^=wn<<13|wn>>>19,wn=In+_i|0,Fn^=wn<<18|wn>>>14,wn=xo+Wn|0,Js^=wn<<7|wn>>>25,wn=Js+xo|0,Nn^=wn<<9|wn>>>23,wn=Nn+Js|0,Wn^=wn<<13|wn>>>19,wn=Wn+Nn|0,xo^=wn<<18|wn>>>14,wn=Ws+Js|0,Qs^=wn<<7|wn>>>25,wn=Qs+Ws|0,_i^=wn<<9|wn>>>23,wn=_i+Qs|0,Js^=wn<<13|wn>>>19,wn=Js+_i|0,Ws^=wn<<18|wn>>>14,wn=Qn+Ls|0,In^=wn<<7|wn>>>25,wn=In+Qn|0,Nn^=wn<<9|wn>>>23,wn=Nn+In|0,Ls^=wn<<13|wn>>>19,wn=Ls+Nn|0,Qn^=wn<<18|wn>>>14,wn=Fn+Un|0,Wn^=wn<<7|wn>>>25,wn=Wn+Fn|0,Vn^=wn<<9|wn>>>23,wn=Vn+Wn|0,Un^=wn<<13|wn>>>19,wn=Un+Vn|0,Fn^=wn<<18|wn>>>14,wn=xo+So|0,ho^=wn<<7|wn>>>25,wn=ho+xo|0,wo^=wn<<9|wn>>>23,wn=wo+ho|0,So^=wn<<13|wn>>>19,wn=So+wo|0,xo^=wn<<18|wn>>>14;Gr[0]=Ws>>>0&255,Gr[1]=Ws>>>8&255,Gr[2]=Ws>>>16&255,Gr[3]=Ws>>>24&255,Gr[4]=Qn>>>0&255,Gr[5]=Qn>>>8&255,Gr[6]=Qn>>>16&255,Gr[7]=Qn>>>24&255,Gr[8]=Fn>>>0&255,Gr[9]=Fn>>>8&255,Gr[10]=Fn>>>16&255,Gr[11]=Fn>>>24&255,Gr[12]=xo>>>0&255,Gr[13]=xo>>>8&255,Gr[14]=xo>>>16&255,Gr[15]=xo>>>24&255,Gr[16]=In>>>0&255,Gr[17]=In>>>8&255,Gr[18]=In>>>16&255,Gr[19]=In>>>24&255,Gr[20]=Nn>>>0&255,Gr[21]=Nn>>>8&255,Gr[22]=Nn>>>16&255,Gr[23]=Nn>>>24&255,Gr[24]=Vn>>>0&255,Gr[25]=Vn>>>8&255,Gr[26]=Vn>>>16&255,Gr[27]=Vn>>>24&255,Gr[28]=Un>>>0&255,Gr[29]=Un>>>8&255,Gr[30]=Un>>>16&255,Gr[31]=Un>>>24&255}function Ur(Gr,nn,sn,kr){Ar(Gr,nn,sn,kr)}function Dr(Gr,nn,sn,kr){Nr(Gr,nn,sn,kr)}var Hr=new Uint8Array([101,120,112,97,110,100,32,51,50,45,98,121,116,101,32,107]);function zr(Gr,nn,sn,kr,fn,En,$n){var Tn=new Uint8Array(16),Bn=new Uint8Array(64),jn,Hn;for(Hn=0;Hn<16;Hn++)Tn[Hn]=0;for(Hn=0;Hn<8;Hn++)Tn[Hn]=En[Hn];for(;fn>=64;){for(Ur(Bn,Tn,$n,Hr),Hn=0;Hn<64;Hn++)Gr[nn+Hn]=sn[kr+Hn]^Bn[Hn];for(jn=1,Hn=8;Hn<16;Hn++)jn=jn+(Tn[Hn]&255)|0,Tn[Hn]=jn&255,jn>>>=8;fn-=64,nn+=64,kr+=64}if(fn>0)for(Ur(Bn,Tn,$n,Hr),Hn=0;Hn<fn;Hn++)Gr[nn+Hn]=sn[kr+Hn]^Bn[Hn];return 0}function Cr(Gr,nn,sn,kr,fn){var En=new Uint8Array(16),$n=new Uint8Array(64),Tn,Bn;for(Bn=0;Bn<16;Bn++)En[Bn]=0;for(Bn=0;Bn<8;Bn++)En[Bn]=kr[Bn];for(;sn>=64;){for(Ur($n,En,fn,Hr),Bn=0;Bn<64;Bn++)Gr[nn+Bn]=$n[Bn];for(Tn=1,Bn=8;Bn<16;Bn++)Tn=Tn+(En[Bn]&255)|0,En[Bn]=Tn&255,Tn>>>=8;sn-=64,nn+=64}if(sn>0)for(Ur($n,En,fn,Hr),Bn=0;Bn<sn;Bn++)Gr[nn+Bn]=$n[Bn];return 0}function Mr(Gr,nn,sn,kr,fn){var En=new Uint8Array(32);Dr(En,kr,fn,Hr);for(var $n=new Uint8Array(8),Tn=0;Tn<8;Tn++)$n[Tn]=kr[Tn+16];return Cr(Gr,nn,sn,$n,En)}function Pr(Gr,nn,sn,kr,fn,En,$n){var Tn=new Uint8Array(32);Dr(Tn,En,$n,Hr);for(var Bn=new Uint8Array(8),jn=0;jn<8;jn++)Bn[jn]=En[jn+16];return zr(Gr,nn,sn,kr,fn,Bn,Tn)}var Sr=function(Gr){this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.leftover=0,this.fin=0;var nn,sn,kr,fn,En,$n,Tn,Bn;nn=Gr[0]&255|(Gr[1]&255)<<8,this.r[0]=nn&8191,sn=Gr[2]&255|(Gr[3]&255)<<8,this.r[1]=(nn>>>13|sn<<3)&8191,kr=Gr[4]&255|(Gr[5]&255)<<8,this.r[2]=(sn>>>10|kr<<6)&7939,fn=Gr[6]&255|(Gr[7]&255)<<8,this.r[3]=(kr>>>7|fn<<9)&8191,En=Gr[8]&255|(Gr[9]&255)<<8,this.r[4]=(fn>>>4|En<<12)&255,this.r[5]=En>>>1&8190,$n=Gr[10]&255|(Gr[11]&255)<<8,this.r[6]=(En>>>14|$n<<2)&8191,Tn=Gr[12]&255|(Gr[13]&255)<<8,this.r[7]=($n>>>11|Tn<<5)&8065,Bn=Gr[14]&255|(Gr[15]&255)<<8,this.r[8]=(Tn>>>8|Bn<<8)&8191,this.r[9]=Bn>>>5&127,this.pad[0]=Gr[16]&255|(Gr[17]&255)<<8,this.pad[1]=Gr[18]&255|(Gr[19]&255)<<8,this.pad[2]=Gr[20]&255|(Gr[21]&255)<<8,this.pad[3]=Gr[22]&255|(Gr[23]&255)<<8,this.pad[4]=Gr[24]&255|(Gr[25]&255)<<8,this.pad[5]=Gr[26]&255|(Gr[27]&255)<<8,this.pad[6]=Gr[28]&255|(Gr[29]&255)<<8,this.pad[7]=Gr[30]&255|(Gr[31]&255)<<8};Sr.prototype.blocks=function(Gr,nn,sn){for(var kr=this.fin?0:2048,fn,En,$n,Tn,Bn,jn,Hn,go,Yn,oo,co,ro,fo,io,ao,lo,Ws,Qs,_i,Js=this.h[0],Ls=this.h[1],Qn=this.h[2],In=this.h[3],Nn=this.h[4],Vn=this.h[5],Un=this.h[6],Fn=this.h[7],Wn=this.h[8],ho=this.h[9],wo=this.r[0],So=this.r[1],xo=this.r[2],wn=this.r[3],Ao=this.r[4],ko=this.r[5],Lo=this.r[6],$o=this.r[7],Co=this.r[8],Oo=this.r[9];sn>=16;)fn=Gr[nn+0]&255|(Gr[nn+1]&255)<<8,Js+=fn&8191,En=Gr[nn+2]&255|(Gr[nn+3]&255)<<8,Ls+=(fn>>>13|En<<3)&8191,$n=Gr[nn+4]&255|(Gr[nn+5]&255)<<8,Qn+=(En>>>10|$n<<6)&8191,Tn=Gr[nn+6]&255|(Gr[nn+7]&255)<<8,In+=($n>>>7|Tn<<9)&8191,Bn=Gr[nn+8]&255|(Gr[nn+9]&255)<<8,Nn+=(Tn>>>4|Bn<<12)&8191,Vn+=Bn>>>1&8191,jn=Gr[nn+10]&255|(Gr[nn+11]&255)<<8,Un+=(Bn>>>14|jn<<2)&8191,Hn=Gr[nn+12]&255|(Gr[nn+13]&255)<<8,Fn+=(jn>>>11|Hn<<5)&8191,go=Gr[nn+14]&255|(Gr[nn+15]&255)<<8,Wn+=(Hn>>>8|go<<8)&8191,ho+=go>>>5|kr,Yn=0,oo=Yn,oo+=Js*wo,oo+=Ls*(5*Oo),oo+=Qn*(5*Co),oo+=In*(5*$o),oo+=Nn*(5*Lo),Yn=oo>>>13,oo&=8191,oo+=Vn*(5*ko),oo+=Un*(5*Ao),oo+=Fn*(5*wn),oo+=Wn*(5*xo),oo+=ho*(5*So),Yn+=oo>>>13,oo&=8191,co=Yn,co+=Js*So,co+=Ls*wo,co+=Qn*(5*Oo),co+=In*(5*Co),co+=Nn*(5*$o),Yn=co>>>13,co&=8191,co+=Vn*(5*Lo),co+=Un*(5*ko),co+=Fn*(5*Ao),co+=Wn*(5*wn),co+=ho*(5*xo),Yn+=co>>>13,co&=8191,ro=Yn,ro+=Js*xo,ro+=Ls*So,ro+=Qn*wo,ro+=In*(5*Oo),ro+=Nn*(5*Co),Yn=ro>>>13,ro&=8191,ro+=Vn*(5*$o),ro+=Un*(5*Lo),ro+=Fn*(5*ko),ro+=Wn*(5*Ao),ro+=ho*(5*wn),Yn+=ro>>>13,ro&=8191,fo=Yn,fo+=Js*wn,fo+=Ls*xo,fo+=Qn*So,fo+=In*wo,fo+=Nn*(5*Oo),Yn=fo>>>13,fo&=8191,fo+=Vn*(5*Co),fo+=Un*(5*$o),fo+=Fn*(5*Lo),fo+=Wn*(5*ko),fo+=ho*(5*Ao),Yn+=fo>>>13,fo&=8191,io=Yn,io+=Js*Ao,io+=Ls*wn,io+=Qn*xo,io+=In*So,io+=Nn*wo,Yn=io>>>13,io&=8191,io+=Vn*(5*Oo),io+=Un*(5*Co),io+=Fn*(5*$o),io+=Wn*(5*Lo),io+=ho*(5*ko),Yn+=io>>>13,io&=8191,ao=Yn,ao+=Js*ko,ao+=Ls*Ao,ao+=Qn*wn,ao+=In*xo,ao+=Nn*So,Yn=ao>>>13,ao&=8191,ao+=Vn*wo,ao+=Un*(5*Oo),ao+=Fn*(5*Co),ao+=Wn*(5*$o),ao+=ho*(5*Lo),Yn+=ao>>>13,ao&=8191,lo=Yn,lo+=Js*Lo,lo+=Ls*ko,lo+=Qn*Ao,lo+=In*wn,lo+=Nn*xo,Yn=lo>>>13,lo&=8191,lo+=Vn*So,lo+=Un*wo,lo+=Fn*(5*Oo),lo+=Wn*(5*Co),lo+=ho*(5*$o),Yn+=lo>>>13,lo&=8191,Ws=Yn,Ws+=Js*$o,Ws+=Ls*Lo,Ws+=Qn*ko,Ws+=In*Ao,Ws+=Nn*wn,Yn=Ws>>>13,Ws&=8191,Ws+=Vn*xo,Ws+=Un*So,Ws+=Fn*wo,Ws+=Wn*(5*Oo),Ws+=ho*(5*Co),Yn+=Ws>>>13,Ws&=8191,Qs=Yn,Qs+=Js*Co,Qs+=Ls*$o,Qs+=Qn*Lo,Qs+=In*ko,Qs+=Nn*Ao,Yn=Qs>>>13,Qs&=8191,Qs+=Vn*wn,Qs+=Un*xo,Qs+=Fn*So,Qs+=Wn*wo,Qs+=ho*(5*Oo),Yn+=Qs>>>13,Qs&=8191,_i=Yn,_i+=Js*Oo,_i+=Ls*Co,_i+=Qn*$o,_i+=In*Lo,_i+=Nn*ko,Yn=_i>>>13,_i&=8191,_i+=Vn*Ao,_i+=Un*wn,_i+=Fn*xo,_i+=Wn*So,_i+=ho*wo,Yn+=_i>>>13,_i&=8191,Yn=(Yn<<2)+Yn|0,Yn=Yn+oo|0,oo=Yn&8191,Yn=Yn>>>13,co+=Yn,Js=oo,Ls=co,Qn=ro,In=fo,Nn=io,Vn=ao,Un=lo,Fn=Ws,Wn=Qs,ho=_i,nn+=16,sn-=16;this.h[0]=Js,this.h[1]=Ls,this.h[2]=Qn,this.h[3]=In,this.h[4]=Nn,this.h[5]=Vn,this.h[6]=Un,this.h[7]=Fn,this.h[8]=Wn,this.h[9]=ho},Sr.prototype.finish=function(Gr,nn){var sn=new Uint16Array(10),kr,fn,En,$n;if(this.leftover){for($n=this.leftover,this.buffer[$n++]=1;$n<16;$n++)this.buffer[$n]=0;this.fin=1,this.blocks(this.buffer,0,16)}for(kr=this.h[1]>>>13,this.h[1]&=8191,$n=2;$n<10;$n++)this.h[$n]+=kr,kr=this.h[$n]>>>13,this.h[$n]&=8191;for(this.h[0]+=kr*5,kr=this.h[0]>>>13,this.h[0]&=8191,this.h[1]+=kr,kr=this.h[1]>>>13,this.h[1]&=8191,this.h[2]+=kr,sn[0]=this.h[0]+5,kr=sn[0]>>>13,sn[0]&=8191,$n=1;$n<10;$n++)sn[$n]=this.h[$n]+kr,kr=sn[$n]>>>13,sn[$n]&=8191;for(sn[9]-=8192,fn=(kr^1)-1,$n=0;$n<10;$n++)sn[$n]&=fn;for(fn=~fn,$n=0;$n<10;$n++)this.h[$n]=this.h[$n]&fn|sn[$n];for(this.h[0]=(this.h[0]|this.h[1]<<13)&65535,this.h[1]=(this.h[1]>>>3|this.h[2]<<10)&65535,this.h[2]=(this.h[2]>>>6|this.h[3]<<7)&65535,this.h[3]=(this.h[3]>>>9|this.h[4]<<4)&65535,this.h[4]=(this.h[4]>>>12|this.h[5]<<1|this.h[6]<<14)&65535,this.h[5]=(this.h[6]>>>2|this.h[7]<<11)&65535,this.h[6]=(this.h[7]>>>5|this.h[8]<<8)&65535,this.h[7]=(this.h[8]>>>8|this.h[9]<<5)&65535,En=this.h[0]+this.pad[0],this.h[0]=En&65535,$n=1;$n<8;$n++)En=(this.h[$n]+this.pad[$n]|0)+(En>>>16)|0,this.h[$n]=En&65535;Gr[nn+0]=this.h[0]>>>0&255,Gr[nn+1]=this.h[0]>>>8&255,Gr[nn+2]=this.h[1]>>>0&255,Gr[nn+3]=this.h[1]>>>8&255,Gr[nn+4]=this.h[2]>>>0&255,Gr[nn+5]=this.h[2]>>>8&255,Gr[nn+6]=this.h[3]>>>0&255,Gr[nn+7]=this.h[3]>>>8&255,Gr[nn+8]=this.h[4]>>>0&255,Gr[nn+9]=this.h[4]>>>8&255,Gr[nn+10]=this.h[5]>>>0&255,Gr[nn+11]=this.h[5]>>>8&255,Gr[nn+12]=this.h[6]>>>0&255,Gr[nn+13]=this.h[6]>>>8&255,Gr[nn+14]=this.h[7]>>>0&255,Gr[nn+15]=this.h[7]>>>8&255},Sr.prototype.update=function(Gr,nn,sn){var kr,fn;if(this.leftover){for(fn=16-this.leftover,fn>sn&&(fn=sn),kr=0;kr<fn;kr++)this.buffer[this.leftover+kr]=Gr[nn+kr];if(sn-=fn,nn+=fn,this.leftover+=fn,this.leftover<16)return;this.blocks(this.buffer,0,16),this.leftover=0}if(sn>=16&&(fn=sn-sn%16,this.blocks(Gr,nn,fn),nn+=fn,sn-=fn),sn){for(kr=0;kr<sn;kr++)this.buffer[this.leftover+kr]=Gr[nn+kr];this.leftover+=sn}};function pr(Gr,nn,sn,kr,fn,En){var $n=new Sr(En);return $n.update(sn,kr,fn),$n.finish(Gr,nn),0}function gr(Gr,nn,sn,kr,fn,En){var $n=new Uint8Array(16);return pr($n,0,sn,kr,fn,En),Or(Gr,nn,$n,0)}function fr(Gr,nn,sn,kr,fn){var En;if(sn<32)return-1;for(Pr(Gr,0,nn,0,sn,kr,fn),pr(Gr,16,Gr,32,sn-32,Gr),En=0;En<16;En++)Gr[En]=0;return 0}function hr(Gr,nn,sn,kr,fn){var En,$n=new Uint8Array(32);if(sn<32||(Mr($n,0,32,kr,fn),gr(nn,16,nn,32,sn-32,$n)!==0))return-1;for(Pr(Gr,0,nn,0,sn,kr,fn),En=0;En<32;En++)Gr[En]=0;return 0}function br(Gr,nn){var sn;for(sn=0;sn<16;sn++)Gr[sn]=nn[sn]|0}function _r(Gr){var nn,sn,kr=1;for(nn=0;nn<16;nn++)sn=Gr[nn]+kr+65535,kr=Math.floor(sn/65536),Gr[nn]=sn-kr*65536;Gr[0]+=kr-1+37*(kr-1)}function $r(Gr,nn,sn){for(var kr,fn=~(sn-1),En=0;En<16;En++)kr=fn&(Gr[En]^nn[En]),Gr[En]^=kr,nn[En]^=kr}function Er(Gr,nn){var sn,kr,fn,En=rr(),$n=rr();for(sn=0;sn<16;sn++)$n[sn]=nn[sn];for(_r($n),_r($n),_r($n),kr=0;kr<2;kr++){for(En[0]=$n[0]-65517,sn=1;sn<15;sn++)En[sn]=$n[sn]-65535-(En[sn-1]>>16&1),En[sn-1]&=65535;En[15]=$n[15]-32767-(En[14]>>16&1),fn=En[15]>>16&1,En[14]&=65535,$r($n,En,1-fn)}for(sn=0;sn<16;sn++)Gr[2*sn]=$n[sn]&255,Gr[2*sn+1]=$n[sn]>>8}function vr(Gr,nn){var sn=new Uint8Array(32),kr=new Uint8Array(32);return Er(sn,Gr),Er(kr,nn),Tr(sn,0,kr,0)}function Ir(Gr){var nn=new Uint8Array(32);return Er(nn,Gr),nn[0]&1}function Rr(Gr,nn){var sn;for(sn=0;sn<16;sn++)Gr[sn]=nn[2*sn]+(nn[2*sn+1]<<8);Gr[15]&=32767}function Br(Gr,nn,sn){for(var kr=0;kr<16;kr++)Gr[kr]=nn[kr]+sn[kr]}function Jr(Gr,nn,sn){for(var kr=0;kr<16;kr++)Gr[kr]=nn[kr]-sn[kr]}function Wr(Gr,nn,sn){var kr,fn,En=0,$n=0,Tn=0,Bn=0,jn=0,Hn=0,go=0,Yn=0,oo=0,co=0,ro=0,fo=0,io=0,ao=0,lo=0,Ws=0,Qs=0,_i=0,Js=0,Ls=0,Qn=0,In=0,Nn=0,Vn=0,Un=0,Fn=0,Wn=0,ho=0,wo=0,So=0,xo=0,wn=sn[0],Ao=sn[1],ko=sn[2],Lo=sn[3],$o=sn[4],Co=sn[5],Oo=sn[6],Fo=sn[7],Io=sn[8],Mo=sn[9],Do=sn[10],jo=sn[11],Uo=sn[12],Wo=sn[13],qo=sn[14],Go=sn[15];kr=nn[0],En+=kr*wn,$n+=kr*Ao,Tn+=kr*ko,Bn+=kr*Lo,jn+=kr*$o,Hn+=kr*Co,go+=kr*Oo,Yn+=kr*Fo,oo+=kr*Io,co+=kr*Mo,ro+=kr*Do,fo+=kr*jo,io+=kr*Uo,ao+=kr*Wo,lo+=kr*qo,Ws+=kr*Go,kr=nn[1],$n+=kr*wn,Tn+=kr*Ao,Bn+=kr*ko,jn+=kr*Lo,Hn+=kr*$o,go+=kr*Co,Yn+=kr*Oo,oo+=kr*Fo,co+=kr*Io,ro+=kr*Mo,fo+=kr*Do,io+=kr*jo,ao+=kr*Uo,lo+=kr*Wo,Ws+=kr*qo,Qs+=kr*Go,kr=nn[2],Tn+=kr*wn,Bn+=kr*Ao,jn+=kr*ko,Hn+=kr*Lo,go+=kr*$o,Yn+=kr*Co,oo+=kr*Oo,co+=kr*Fo,ro+=kr*Io,fo+=kr*Mo,io+=kr*Do,ao+=kr*jo,lo+=kr*Uo,Ws+=kr*Wo,Qs+=kr*qo,_i+=kr*Go,kr=nn[3],Bn+=kr*wn,jn+=kr*Ao,Hn+=kr*ko,go+=kr*Lo,Yn+=kr*$o,oo+=kr*Co,co+=kr*Oo,ro+=kr*Fo,fo+=kr*Io,io+=kr*Mo,ao+=kr*Do,lo+=kr*jo,Ws+=kr*Uo,Qs+=kr*Wo,_i+=kr*qo,Js+=kr*Go,kr=nn[4],jn+=kr*wn,Hn+=kr*Ao,go+=kr*ko,Yn+=kr*Lo,oo+=kr*$o,co+=kr*Co,ro+=kr*Oo,fo+=kr*Fo,io+=kr*Io,ao+=kr*Mo,lo+=kr*Do,Ws+=kr*jo,Qs+=kr*Uo,_i+=kr*Wo,Js+=kr*qo,Ls+=kr*Go,kr=nn[5],Hn+=kr*wn,go+=kr*Ao,Yn+=kr*ko,oo+=kr*Lo,co+=kr*$o,ro+=kr*Co,fo+=kr*Oo,io+=kr*Fo,ao+=kr*Io,lo+=kr*Mo,Ws+=kr*Do,Qs+=kr*jo,_i+=kr*Uo,Js+=kr*Wo,Ls+=kr*qo,Qn+=kr*Go,kr=nn[6],go+=kr*wn,Yn+=kr*Ao,oo+=kr*ko,co+=kr*Lo,ro+=kr*$o,fo+=kr*Co,io+=kr*Oo,ao+=kr*Fo,lo+=kr*Io,Ws+=kr*Mo,Qs+=kr*Do,_i+=kr*jo,Js+=kr*Uo,Ls+=kr*Wo,Qn+=kr*qo,In+=kr*Go,kr=nn[7],Yn+=kr*wn,oo+=kr*Ao,co+=kr*ko,ro+=kr*Lo,fo+=kr*$o,io+=kr*Co,ao+=kr*Oo,lo+=kr*Fo,Ws+=kr*Io,Qs+=kr*Mo,_i+=kr*Do,Js+=kr*jo,Ls+=kr*Uo,Qn+=kr*Wo,In+=kr*qo,Nn+=kr*Go,kr=nn[8],oo+=kr*wn,co+=kr*Ao,ro+=kr*ko,fo+=kr*Lo,io+=kr*$o,ao+=kr*Co,lo+=kr*Oo,Ws+=kr*Fo,Qs+=kr*Io,_i+=kr*Mo,Js+=kr*Do,Ls+=kr*jo,Qn+=kr*Uo,In+=kr*Wo,Nn+=kr*qo,Vn+=kr*Go,kr=nn[9],co+=kr*wn,ro+=kr*Ao,fo+=kr*ko,io+=kr*Lo,ao+=kr*$o,lo+=kr*Co,Ws+=kr*Oo,Qs+=kr*Fo,_i+=kr*Io,Js+=kr*Mo,Ls+=kr*Do,Qn+=kr*jo,In+=kr*Uo,Nn+=kr*Wo,Vn+=kr*qo,Un+=kr*Go,kr=nn[10],ro+=kr*wn,fo+=kr*Ao,io+=kr*ko,ao+=kr*Lo,lo+=kr*$o,Ws+=kr*Co,Qs+=kr*Oo,_i+=kr*Fo,Js+=kr*Io,Ls+=kr*Mo,Qn+=kr*Do,In+=kr*jo,Nn+=kr*Uo,Vn+=kr*Wo,Un+=kr*qo,Fn+=kr*Go,kr=nn[11],fo+=kr*wn,io+=kr*Ao,ao+=kr*ko,lo+=kr*Lo,Ws+=kr*$o,Qs+=kr*Co,_i+=kr*Oo,Js+=kr*Fo,Ls+=kr*Io,Qn+=kr*Mo,In+=kr*Do,Nn+=kr*jo,Vn+=kr*Uo,Un+=kr*Wo,Fn+=kr*qo,Wn+=kr*Go,kr=nn[12],io+=kr*wn,ao+=kr*Ao,lo+=kr*ko,Ws+=kr*Lo,Qs+=kr*$o,_i+=kr*Co,Js+=kr*Oo,Ls+=kr*Fo,Qn+=kr*Io,In+=kr*Mo,Nn+=kr*Do,Vn+=kr*jo,Un+=kr*Uo,Fn+=kr*Wo,Wn+=kr*qo,ho+=kr*Go,kr=nn[13],ao+=kr*wn,lo+=kr*Ao,Ws+=kr*ko,Qs+=kr*Lo,_i+=kr*$o,Js+=kr*Co,Ls+=kr*Oo,Qn+=kr*Fo,In+=kr*Io,Nn+=kr*Mo,Vn+=kr*Do,Un+=kr*jo,Fn+=kr*Uo,Wn+=kr*Wo,ho+=kr*qo,wo+=kr*Go,kr=nn[14],lo+=kr*wn,Ws+=kr*Ao,Qs+=kr*ko,_i+=kr*Lo,Js+=kr*$o,Ls+=kr*Co,Qn+=kr*Oo,In+=kr*Fo,Nn+=kr*Io,Vn+=kr*Mo,Un+=kr*Do,Fn+=kr*jo,Wn+=kr*Uo,ho+=kr*Wo,wo+=kr*qo,So+=kr*Go,kr=nn[15],Ws+=kr*wn,Qs+=kr*Ao,_i+=kr*ko,Js+=kr*Lo,Ls+=kr*$o,Qn+=kr*Co,In+=kr*Oo,Nn+=kr*Fo,Vn+=kr*Io,Un+=kr*Mo,Fn+=kr*Do,Wn+=kr*jo,ho+=kr*Uo,wo+=kr*Wo,So+=kr*qo,xo+=kr*Go,En+=38*Qs,$n+=38*_i,Tn+=38*Js,Bn+=38*Ls,jn+=38*Qn,Hn+=38*In,go+=38*Nn,Yn+=38*Vn,oo+=38*Un,co+=38*Fn,ro+=38*Wn,fo+=38*ho,io+=38*wo,ao+=38*So,lo+=38*xo,fn=1,kr=En+fn+65535,fn=Math.floor(kr/65536),En=kr-fn*65536,kr=$n+fn+65535,fn=Math.floor(kr/65536),$n=kr-fn*65536,kr=Tn+fn+65535,fn=Math.floor(kr/65536),Tn=kr-fn*65536,kr=Bn+fn+65535,fn=Math.floor(kr/65536),Bn=kr-fn*65536,kr=jn+fn+65535,fn=Math.floor(kr/65536),jn=kr-fn*65536,kr=Hn+fn+65535,fn=Math.floor(kr/65536),Hn=kr-fn*65536,kr=go+fn+65535,fn=Math.floor(kr/65536),go=kr-fn*65536,kr=Yn+fn+65535,fn=Math.floor(kr/65536),Yn=kr-fn*65536,kr=oo+fn+65535,fn=Math.floor(kr/65536),oo=kr-fn*65536,kr=co+fn+65535,fn=Math.floor(kr/65536),co=kr-fn*65536,kr=ro+fn+65535,fn=Math.floor(kr/65536),ro=kr-fn*65536,kr=fo+fn+65535,fn=Math.floor(kr/65536),fo=kr-fn*65536,kr=io+fn+65535,fn=Math.floor(kr/65536),io=kr-fn*65536,kr=ao+fn+65535,fn=Math.floor(kr/65536),ao=kr-fn*65536,kr=lo+fn+65535,fn=Math.floor(kr/65536),lo=kr-fn*65536,kr=Ws+fn+65535,fn=Math.floor(kr/65536),Ws=kr-fn*65536,En+=fn-1+37*(fn-1),fn=1,kr=En+fn+65535,fn=Math.floor(kr/65536),En=kr-fn*65536,kr=$n+fn+65535,fn=Math.floor(kr/65536),$n=kr-fn*65536,kr=Tn+fn+65535,fn=Math.floor(kr/65536),Tn=kr-fn*65536,kr=Bn+fn+65535,fn=Math.floor(kr/65536),Bn=kr-fn*65536,kr=jn+fn+65535,fn=Math.floor(kr/65536),jn=kr-fn*65536,kr=Hn+fn+65535,fn=Math.floor(kr/65536),Hn=kr-fn*65536,kr=go+fn+65535,fn=Math.floor(kr/65536),go=kr-fn*65536,kr=Yn+fn+65535,fn=Math.floor(kr/65536),Yn=kr-fn*65536,kr=oo+fn+65535,fn=Math.floor(kr/65536),oo=kr-fn*65536,kr=co+fn+65535,fn=Math.floor(kr/65536),co=kr-fn*65536,kr=ro+fn+65535,fn=Math.floor(kr/65536),ro=kr-fn*65536,kr=fo+fn+65535,fn=Math.floor(kr/65536),fo=kr-fn*65536,kr=io+fn+65535,fn=Math.floor(kr/65536),io=kr-fn*65536,kr=ao+fn+65535,fn=Math.floor(kr/65536),ao=kr-fn*65536,kr=lo+fn+65535,fn=Math.floor(kr/65536),lo=kr-fn*65536,kr=Ws+fn+65535,fn=Math.floor(kr/65536),Ws=kr-fn*65536,En+=fn-1+37*(fn-1),Gr[0]=En,Gr[1]=$n,Gr[2]=Tn,Gr[3]=Bn,Gr[4]=jn,Gr[5]=Hn,Gr[6]=go,Gr[7]=Yn,Gr[8]=oo,Gr[9]=co,Gr[10]=ro,Gr[11]=fo,Gr[12]=io,Gr[13]=ao,Gr[14]=lo,Gr[15]=Ws}function qr(Gr,nn){Wr(Gr,nn,nn)}function an(Gr,nn){var sn=rr(),kr;for(kr=0;kr<16;kr++)sn[kr]=nn[kr];for(kr=253;kr>=0;kr--)qr(sn,sn),kr!==2&&kr!==4&&Wr(sn,sn,nn);for(kr=0;kr<16;kr++)Gr[kr]=sn[kr]}function tn(Gr,nn){var sn=rr(),kr;for(kr=0;kr<16;kr++)sn[kr]=nn[kr];for(kr=250;kr>=0;kr--)qr(sn,sn),kr!==1&&Wr(sn,sn,nn);for(kr=0;kr<16;kr++)Gr[kr]=sn[kr]}function cn(Gr,nn,sn){var kr=new Uint8Array(32),fn=new Float64Array(80),En,$n,Tn=rr(),Bn=rr(),jn=rr(),Hn=rr(),go=rr(),Yn=rr();for($n=0;$n<31;$n++)kr[$n]=nn[$n];for(kr[31]=nn[31]&127|64,kr[0]&=248,Rr(fn,sn),$n=0;$n<16;$n++)Bn[$n]=fn[$n],Hn[$n]=Tn[$n]=jn[$n]=0;for(Tn[0]=Hn[0]=1,$n=254;$n>=0;--$n)En=kr[$n>>>3]>>>($n&7)&1,$r(Tn,Bn,En),$r(jn,Hn,En),Br(go,Tn,jn),Jr(Tn,Tn,jn),Br(jn,Bn,Hn),Jr(Bn,Bn,Hn),qr(Hn,go),qr(Yn,Tn),Wr(Tn,jn,Tn),Wr(jn,Bn,go),Br(go,Tn,jn),Jr(Tn,Tn,jn),qr(Bn,Tn),Jr(jn,Hn,Yn),Wr(Tn,jn,cr),Br(Tn,Tn,Hn),Wr(jn,jn,Tn),Wr(Tn,Hn,Yn),Wr(Hn,Bn,fn),qr(Bn,go),$r(Tn,Bn,En),$r(jn,Hn,En);for($n=0;$n<16;$n++)fn[$n+16]=Tn[$n],fn[$n+32]=jn[$n],fn[$n+48]=Bn[$n],fn[$n+64]=Hn[$n];var oo=fn.subarray(32),co=fn.subarray(16);return an(oo,oo),Wr(co,co,oo),Er(Gr,co),0}function dn(Gr,nn){return cn(Gr,nn,sr)}function Zr(Gr,nn){return nr(nn,32),dn(Gr,nn)}function Yr(Gr,nn,sn){var kr=new Uint8Array(32);return cn(kr,sn,nn),Dr(Gr,ir,kr,Hr)}var Qr=fr,un=hr;function gn(Gr,nn,sn,kr,fn,En){var $n=new Uint8Array(32);return Yr($n,fn,En),Qr(Gr,nn,sn,kr,$n)}function Rn(Gr,nn,sn,kr,fn,En){var $n=new Uint8Array(32);return Yr($n,fn,En),un(Gr,nn,sn,kr,$n)}var Pn=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function Cn(Gr,nn,sn,kr){for(var fn=new Int32Array(16),En=new Int32Array(16),$n,Tn,Bn,jn,Hn,go,Yn,oo,co,ro,fo,io,ao,lo,Ws,Qs,_i,Js,Ls,Qn,In,Nn,Vn,Un,Fn,Wn,ho=Gr[0],wo=Gr[1],So=Gr[2],xo=Gr[3],wn=Gr[4],Ao=Gr[5],ko=Gr[6],Lo=Gr[7],$o=nn[0],Co=nn[1],Oo=nn[2],Fo=nn[3],Io=nn[4],Mo=nn[5],Do=nn[6],jo=nn[7],Uo=0;kr>=128;){for(Ls=0;Ls<16;Ls++)Qn=8*Ls+Uo,fn[Ls]=sn[Qn+0]<<24|sn[Qn+1]<<16|sn[Qn+2]<<8|sn[Qn+3],En[Ls]=sn[Qn+4]<<24|sn[Qn+5]<<16|sn[Qn+6]<<8|sn[Qn+7];for(Ls=0;Ls<80;Ls++)if($n=ho,Tn=wo,Bn=So,jn=xo,Hn=wn,go=Ao,Yn=ko,oo=Lo,co=$o,ro=Co,fo=Oo,io=Fo,ao=Io,lo=Mo,Ws=Do,Qs=jo,In=Lo,Nn=jo,Vn=Nn&65535,Un=Nn>>>16,Fn=In&65535,Wn=In>>>16,In=(wn>>>14|Io<<18)^(wn>>>18|Io<<14)^(Io>>>9|wn<<23),Nn=(Io>>>14|wn<<18)^(Io>>>18|wn<<14)^(wn>>>9|Io<<23),Vn+=Nn&65535,Un+=Nn>>>16,Fn+=In&65535,Wn+=In>>>16,In=wn&Ao^~wn&ko,Nn=Io&Mo^~Io&Do,Vn+=Nn&65535,Un+=Nn>>>16,Fn+=In&65535,Wn+=In>>>16,In=Pn[Ls*2],Nn=Pn[Ls*2+1],Vn+=Nn&65535,Un+=Nn>>>16,Fn+=In&65535,Wn+=In>>>16,In=fn[Ls%16],Nn=En[Ls%16],Vn+=Nn&65535,Un+=Nn>>>16,Fn+=In&65535,Wn+=In>>>16,Un+=Vn>>>16,Fn+=Un>>>16,Wn+=Fn>>>16,_i=Fn&65535|Wn<<16,Js=Vn&65535|Un<<16,In=_i,Nn=Js,Vn=Nn&65535,Un=Nn>>>16,Fn=In&65535,Wn=In>>>16,In=(ho>>>28|$o<<4)^($o>>>2|ho<<30)^($o>>>7|ho<<25),Nn=($o>>>28|ho<<4)^(ho>>>2|$o<<30)^(ho>>>7|$o<<25),Vn+=Nn&65535,Un+=Nn>>>16,Fn+=In&65535,Wn+=In>>>16,In=ho&wo^ho&So^wo&So,Nn=$o&Co^$o&Oo^Co&Oo,Vn+=Nn&65535,Un+=Nn>>>16,Fn+=In&65535,Wn+=In>>>16,Un+=Vn>>>16,Fn+=Un>>>16,Wn+=Fn>>>16,oo=Fn&65535|Wn<<16,Qs=Vn&65535|Un<<16,In=jn,Nn=io,Vn=Nn&65535,Un=Nn>>>16,Fn=In&65535,Wn=In>>>16,In=_i,Nn=Js,Vn+=Nn&65535,Un+=Nn>>>16,Fn+=In&65535,Wn+=In>>>16,Un+=Vn>>>16,Fn+=Un>>>16,Wn+=Fn>>>16,jn=Fn&65535|Wn<<16,io=Vn&65535|Un<<16,wo=$n,So=Tn,xo=Bn,wn=jn,Ao=Hn,ko=go,Lo=Yn,ho=oo,Co=co,Oo=ro,Fo=fo,Io=io,Mo=ao,Do=lo,jo=Ws,$o=Qs,Ls%16===15)for(Qn=0;Qn<16;Qn++)In=fn[Qn],Nn=En[Qn],Vn=Nn&65535,Un=Nn>>>16,Fn=In&65535,Wn=In>>>16,In=fn[(Qn+9)%16],Nn=En[(Qn+9)%16],Vn+=Nn&65535,Un+=Nn>>>16,Fn+=In&65535,Wn+=In>>>16,_i=fn[(Qn+1)%16],Js=En[(Qn+1)%16],In=(_i>>>1|Js<<31)^(_i>>>8|Js<<24)^_i>>>7,Nn=(Js>>>1|_i<<31)^(Js>>>8|_i<<24)^(Js>>>7|_i<<25),Vn+=Nn&65535,Un+=Nn>>>16,Fn+=In&65535,Wn+=In>>>16,_i=fn[(Qn+14)%16],Js=En[(Qn+14)%16],In=(_i>>>19|Js<<13)^(Js>>>29|_i<<3)^_i>>>6,Nn=(Js>>>19|_i<<13)^(_i>>>29|Js<<3)^(Js>>>6|_i<<26),Vn+=Nn&65535,Un+=Nn>>>16,Fn+=In&65535,Wn+=In>>>16,Un+=Vn>>>16,Fn+=Un>>>16,Wn+=Fn>>>16,fn[Qn]=Fn&65535|Wn<<16,En[Qn]=Vn&65535|Un<<16;In=ho,Nn=$o,Vn=Nn&65535,Un=Nn>>>16,Fn=In&65535,Wn=In>>>16,In=Gr[0],Nn=nn[0],Vn+=Nn&65535,Un+=Nn>>>16,Fn+=In&65535,Wn+=In>>>16,Un+=Vn>>>16,Fn+=Un>>>16,Wn+=Fn>>>16,Gr[0]=ho=Fn&65535|Wn<<16,nn[0]=$o=Vn&65535|Un<<16,In=wo,Nn=Co,Vn=Nn&65535,Un=Nn>>>16,Fn=In&65535,Wn=In>>>16,In=Gr[1],Nn=nn[1],Vn+=Nn&65535,Un+=Nn>>>16,Fn+=In&65535,Wn+=In>>>16,Un+=Vn>>>16,Fn+=Un>>>16,Wn+=Fn>>>16,Gr[1]=wo=Fn&65535|Wn<<16,nn[1]=Co=Vn&65535|Un<<16,In=So,Nn=Oo,Vn=Nn&65535,Un=Nn>>>16,Fn=In&65535,Wn=In>>>16,In=Gr[2],Nn=nn[2],Vn+=Nn&65535,Un+=Nn>>>16,Fn+=In&65535,Wn+=In>>>16,Un+=Vn>>>16,Fn+=Un>>>16,Wn+=Fn>>>16,Gr[2]=So=Fn&65535|Wn<<16,nn[2]=Oo=Vn&65535|Un<<16,In=xo,Nn=Fo,Vn=Nn&65535,Un=Nn>>>16,Fn=In&65535,Wn=In>>>16,In=Gr[3],Nn=nn[3],Vn+=Nn&65535,Un+=Nn>>>16,Fn+=In&65535,Wn+=In>>>16,Un+=Vn>>>16,Fn+=Un>>>16,Wn+=Fn>>>16,Gr[3]=xo=Fn&65535|Wn<<16,nn[3]=Fo=Vn&65535|Un<<16,In=wn,Nn=Io,Vn=Nn&65535,Un=Nn>>>16,Fn=In&65535,Wn=In>>>16,In=Gr[4],Nn=nn[4],Vn+=Nn&65535,Un+=Nn>>>16,Fn+=In&65535,Wn+=In>>>16,Un+=Vn>>>16,Fn+=Un>>>16,Wn+=Fn>>>16,Gr[4]=wn=Fn&65535|Wn<<16,nn[4]=Io=Vn&65535|Un<<16,In=Ao,Nn=Mo,Vn=Nn&65535,Un=Nn>>>16,Fn=In&65535,Wn=In>>>16,In=Gr[5],Nn=nn[5],Vn+=Nn&65535,Un+=Nn>>>16,Fn+=In&65535,Wn+=In>>>16,Un+=Vn>>>16,Fn+=Un>>>16,Wn+=Fn>>>16,Gr[5]=Ao=Fn&65535|Wn<<16,nn[5]=Mo=Vn&65535|Un<<16,In=ko,Nn=Do,Vn=Nn&65535,Un=Nn>>>16,Fn=In&65535,Wn=In>>>16,In=Gr[6],Nn=nn[6],Vn+=Nn&65535,Un+=Nn>>>16,Fn+=In&65535,Wn+=In>>>16,Un+=Vn>>>16,Fn+=Un>>>16,Wn+=Fn>>>16,Gr[6]=ko=Fn&65535|Wn<<16,nn[6]=Do=Vn&65535|Un<<16,In=Lo,Nn=jo,Vn=Nn&65535,Un=Nn>>>16,Fn=In&65535,Wn=In>>>16,In=Gr[7],Nn=nn[7],Vn+=Nn&65535,Un+=Nn>>>16,Fn+=In&65535,Wn+=In>>>16,Un+=Vn>>>16,Fn+=Un>>>16,Wn+=Fn>>>16,Gr[7]=Lo=Fn&65535|Wn<<16,nn[7]=jo=Vn&65535|Un<<16,Uo+=128,kr-=128}return kr}function Sn(Gr,nn,sn){var kr=new Int32Array(8),fn=new Int32Array(8),En=new Uint8Array(256),$n,Tn=sn;for(kr[0]=1779033703,kr[1]=3144134277,kr[2]=1013904242,kr[3]=2773480762,kr[4]=1359893119,kr[5]=2600822924,kr[6]=528734635,kr[7]=1541459225,fn[0]=4089235720,fn[1]=2227873595,fn[2]=4271175723,fn[3]=1595750129,fn[4]=2917565137,fn[5]=725511199,fn[6]=4215389547,fn[7]=327033209,Cn(kr,fn,nn,sn),sn%=128,$n=0;$n<sn;$n++)En[$n]=nn[Tn-sn+$n];for(En[sn]=128,sn=256-128*(sn<112?1:0),En[sn-9]=0,wr(En,sn-8,Tn/536870912|0,Tn<<3),Cn(kr,fn,En,sn),$n=0;$n<8;$n++)wr(Gr,8*$n,kr[$n],fn[$n]);return 0}function zn(Gr,nn){var sn=rr(),kr=rr(),fn=rr(),En=rr(),$n=rr(),Tn=rr(),Bn=rr(),jn=rr(),Hn=rr();Jr(sn,Gr[1],Gr[0]),Jr(Hn,nn[1],nn[0]),Wr(sn,sn,Hn),Br(kr,Gr[0],Gr[1]),Br(Hn,nn[0],nn[1]),Wr(kr,kr,Hn),Wr(fn,Gr[3],nn[3]),Wr(fn,fn,ur),Wr(En,Gr[2],nn[2]),Br(En,En,En),Jr($n,kr,sn),Jr(Tn,En,fn),Br(Bn,En,fn),Br(jn,kr,sn),Wr(Gr[0],$n,Tn),Wr(Gr[1],jn,Bn),Wr(Gr[2],Bn,Tn),Wr(Gr[3],$n,jn)}function Zn(Gr,nn,sn){var kr;for(kr=0;kr<4;kr++)$r(Gr[kr],nn[kr],sn)}function Kn(Gr,nn){var sn=rr(),kr=rr(),fn=rr();an(fn,nn[2]),Wr(sn,nn[0],fn),Wr(kr,nn[1],fn),Er(Gr,kr),Gr[31]^=Ir(sn)<<7}function eo(Gr,nn,sn){var kr,fn;for(br(Gr[0],or),br(Gr[1],ar),br(Gr[2],ar),br(Gr[3],or),fn=255;fn>=0;--fn)kr=sn[fn/8|0]>>(fn&7)&1,Zn(Gr,nn,kr),zn(nn,Gr),zn(Gr,Gr),Zn(Gr,nn,kr)}function vn(Gr,nn){var sn=[rr(),rr(),rr(),rr()];br(sn[0],dr),br(sn[1],yr),br(sn[2],ar),Wr(sn[3],dr,yr),eo(Gr,sn,nn)}function xn(Gr,nn,sn){var kr=new Uint8Array(64),fn=[rr(),rr(),rr(),rr()],En;for(sn||nr(nn,32),Sn(kr,nn,32),kr[0]&=248,kr[31]&=127,kr[31]|=64,vn(fn,kr),Kn(Gr,fn),En=0;En<32;En++)nn[En+32]=Gr[En];return 0}var Dn=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function Xr(Gr,nn){var sn,kr,fn,En;for(kr=63;kr>=32;--kr){for(sn=0,fn=kr-32,En=kr-12;fn<En;++fn)nn[fn]+=sn-16*nn[kr]*Dn[fn-(kr-32)],sn=Math.floor((nn[fn]+128)/256),nn[fn]-=sn*256;nn[fn]+=sn,nn[kr]=0}for(sn=0,fn=0;fn<32;fn++)nn[fn]+=sn-(nn[31]>>4)*Dn[fn],sn=nn[fn]>>8,nn[fn]&=255;for(fn=0;fn<32;fn++)nn[fn]-=sn*Dn[fn];for(kr=0;kr<32;kr++)nn[kr+1]+=nn[kr]>>8,Gr[kr]=nn[kr]&255}function Lr(Gr){var nn=new Float64Array(64),sn;for(sn=0;sn<64;sn++)nn[sn]=Gr[sn];for(sn=0;sn<64;sn++)Gr[sn]=0;Xr(Gr,nn)}function Fr(Gr,nn,sn,kr){var fn=new Uint8Array(64),En=new Uint8Array(64),$n=new Uint8Array(64),Tn,Bn,jn=new Float64Array(64),Hn=[rr(),rr(),rr(),rr()];Sn(fn,kr,32),fn[0]&=248,fn[31]&=127,fn[31]|=64;var go=sn+64;for(Tn=0;Tn<sn;Tn++)Gr[64+Tn]=nn[Tn];for(Tn=0;Tn<32;Tn++)Gr[32+Tn]=fn[32+Tn];for(Sn($n,Gr.subarray(32),sn+32),Lr($n),vn(Hn,$n),Kn(Gr,Hn),Tn=32;Tn<64;Tn++)Gr[Tn]=kr[Tn];for(Sn(En,Gr,sn+64),Lr(En),Tn=0;Tn<64;Tn++)jn[Tn]=0;for(Tn=0;Tn<32;Tn++)jn[Tn]=$n[Tn];for(Tn=0;Tn<32;Tn++)for(Bn=0;Bn<32;Bn++)jn[Tn+Bn]+=En[Tn]*fn[Bn];return Xr(Gr.subarray(32),jn),go}function ln(Gr,nn){var sn=rr(),kr=rr(),fn=rr(),En=rr(),$n=rr(),Tn=rr(),Bn=rr();return br(Gr[2],ar),Rr(Gr[1],nn),qr(fn,Gr[1]),Wr(En,fn,lr),Jr(fn,fn,Gr[2]),Br(En,Gr[2],En),qr($n,En),qr(Tn,$n),Wr(Bn,Tn,$n),Wr(sn,Bn,fn),Wr(sn,sn,En),tn(sn,sn),Wr(sn,sn,fn),Wr(sn,sn,En),Wr(sn,sn,En),Wr(Gr[0],sn,En),qr(kr,Gr[0]),Wr(kr,kr,En),vr(kr,fn)&&Wr(Gr[0],Gr[0],mr),qr(kr,Gr[0]),Wr(kr,kr,En),vr(kr,fn)?-1:(Ir(Gr[0])===nn[31]>>7&&Jr(Gr[0],or,Gr[0]),Wr(Gr[3],Gr[0],Gr[1]),0)}function mn(Gr,nn,sn,kr){var fn,En=new Uint8Array(32),$n=new Uint8Array(64),Tn=[rr(),rr(),rr(),rr()],Bn=[rr(),rr(),rr(),rr()];if(sn<64||ln(Bn,kr))return-1;for(fn=0;fn<sn;fn++)Gr[fn]=nn[fn];for(fn=0;fn<32;fn++)Gr[fn+32]=kr[fn];if(Sn($n,Gr,sn),Lr($n),eo(Tn,Bn,$n),vn(Bn,nn.subarray(32)),zn(Tn,Bn),Kn(En,Tn),sn-=64,Tr(nn,0,En,0)){for(fn=0;fn<sn;fn++)Gr[fn]=0;return-1}for(fn=0;fn<sn;fn++)Gr[fn]=nn[fn+64];return sn}var _n=32,An=24,Gn=32,Xs=16,Jn=32,no=32,zs=32,to=32,No=32,Ro=An,uo=Gn,To=Xs,Eo=64,so=32,Po=64,hn=32,pn=64;er.lowlevel={crypto_core_hsalsa20:Dr,crypto_stream_xor:Pr,crypto_stream:Mr,crypto_stream_salsa20_xor:zr,crypto_stream_salsa20:Cr,crypto_onetimeauth:pr,crypto_onetimeauth_verify:gr,crypto_verify_16:Or,crypto_verify_32:Tr,crypto_secretbox:fr,crypto_secretbox_open:hr,crypto_scalarmult:cn,crypto_scalarmult_base:dn,crypto_box_beforenm:Yr,crypto_box_afternm:Qr,crypto_box:gn,crypto_box_open:Rn,crypto_box_keypair:Zr,crypto_hash:Sn,crypto_sign:Fr,crypto_sign_keypair:xn,crypto_sign_open:mn,crypto_secretbox_KEYBYTES:_n,crypto_secretbox_NONCEBYTES:An,crypto_secretbox_ZEROBYTES:Gn,crypto_secretbox_BOXZEROBYTES:Xs,crypto_scalarmult_BYTES:Jn,crypto_scalarmult_SCALARBYTES:no,crypto_box_PUBLICKEYBYTES:zs,crypto_box_SECRETKEYBYTES:to,crypto_box_BEFORENMBYTES:No,crypto_box_NONCEBYTES:Ro,crypto_box_ZEROBYTES:uo,crypto_box_BOXZEROBYTES:To,crypto_sign_BYTES:Eo,crypto_sign_PUBLICKEYBYTES:so,crypto_sign_SECRETKEYBYTES:Po,crypto_sign_SEEDBYTES:hn,crypto_hash_BYTES:pn,gf:rr,D:lr,L:Dn,pack25519:Er,unpack25519:Rr,M:Wr,A:Br,S:qr,Z:Jr,pow2523:tn,add:zn,set25519:br,modL:Xr,scalarmult:eo,scalarbase:vn};function kn(Gr,nn){if(Gr.length!==_n)throw new Error("bad key size");if(nn.length!==An)throw new Error("bad nonce size")}function Mn(Gr,nn){if(Gr.length!==zs)throw new Error("bad public key size");if(nn.length!==to)throw new Error("bad secret key size")}function Ln(){for(var Gr=0;Gr<arguments.length;Gr++)if(!(arguments[Gr]instanceof Uint8Array))throw new TypeError("unexpected type, use Uint8Array")}function vo(Gr){for(var nn=0;nn<Gr.length;nn++)Gr[nn]=0}er.randomBytes=function(Gr){var nn=new Uint8Array(Gr);return nr(nn,Gr),nn},er.secretbox=function(Gr,nn,sn){Ln(Gr,nn,sn),kn(sn,nn);for(var kr=new Uint8Array(Gn+Gr.length),fn=new Uint8Array(kr.length),En=0;En<Gr.length;En++)kr[En+Gn]=Gr[En];return fr(fn,kr,kr.length,nn,sn),fn.subarray(Xs)},er.secretbox.open=function(Gr,nn,sn){Ln(Gr,nn,sn),kn(sn,nn);for(var kr=new Uint8Array(Xs+Gr.length),fn=new Uint8Array(kr.length),En=0;En<Gr.length;En++)kr[En+Xs]=Gr[En];return kr.length<32||hr(fn,kr,kr.length,nn,sn)!==0?null:fn.subarray(Gn)},er.secretbox.keyLength=_n,er.secretbox.nonceLength=An,er.secretbox.overheadLength=Xs,er.scalarMult=function(Gr,nn){if(Ln(Gr,nn),Gr.length!==no)throw new Error("bad n size");if(nn.length!==Jn)throw new Error("bad p size");var sn=new Uint8Array(Jn);return cn(sn,Gr,nn),sn},er.scalarMult.base=function(Gr){if(Ln(Gr),Gr.length!==no)throw new Error("bad n size");var nn=new Uint8Array(Jn);return dn(nn,Gr),nn},er.scalarMult.scalarLength=no,er.scalarMult.groupElementLength=Jn,er.box=function(Gr,nn,sn,kr){var fn=er.box.before(sn,kr);return er.secretbox(Gr,nn,fn)},er.box.before=function(Gr,nn){Ln(Gr,nn),Mn(Gr,nn);var sn=new Uint8Array(No);return Yr(sn,Gr,nn),sn},er.box.after=er.secretbox,er.box.open=function(Gr,nn,sn,kr){var fn=er.box.before(sn,kr);return er.secretbox.open(Gr,nn,fn)},er.box.open.after=er.secretbox.open,er.box.keyPair=function(){var Gr=new Uint8Array(zs),nn=new Uint8Array(to);return Zr(Gr,nn),{publicKey:Gr,secretKey:nn}},er.box.keyPair.fromSecretKey=function(Gr){if(Ln(Gr),Gr.length!==to)throw new Error("bad secret key size");var nn=new Uint8Array(zs);return dn(nn,Gr),{publicKey:nn,secretKey:new Uint8Array(Gr)}},er.box.publicKeyLength=zs,er.box.secretKeyLength=to,er.box.sharedKeyLength=No,er.box.nonceLength=Ro,er.box.overheadLength=er.secretbox.overheadLength,er.sign=function(Gr,nn){if(Ln(Gr,nn),nn.length!==Po)throw new Error("bad secret key size");var sn=new Uint8Array(Eo+Gr.length);return Fr(sn,Gr,Gr.length,nn),sn},er.sign.open=function(Gr,nn){if(Ln(Gr,nn),nn.length!==so)throw new Error("bad public key size");var sn=new Uint8Array(Gr.length),kr=mn(sn,Gr,Gr.length,nn);if(kr<0)return null;for(var fn=new Uint8Array(kr),En=0;En<fn.length;En++)fn[En]=sn[En];return fn},er.sign.detached=function(Gr,nn){for(var sn=er.sign(Gr,nn),kr=new Uint8Array(Eo),fn=0;fn<kr.length;fn++)kr[fn]=sn[fn];return kr},er.sign.detached.verify=function(Gr,nn,sn){if(Ln(Gr,nn,sn),nn.length!==Eo)throw new Error("bad signature size");if(sn.length!==so)throw new Error("bad public key size");var kr=new Uint8Array(Eo+Gr.length),fn=new Uint8Array(Eo+Gr.length),En;for(En=0;En<Eo;En++)kr[En]=nn[En];for(En=0;En<Gr.length;En++)kr[En+Eo]=Gr[En];return mn(fn,kr,kr.length,sn)>=0},er.sign.keyPair=function(){var Gr=new Uint8Array(so),nn=new Uint8Array(Po);return xn(Gr,nn),{publicKey:Gr,secretKey:nn}},er.sign.keyPair.fromSecretKey=function(Gr){if(Ln(Gr),Gr.length!==Po)throw new Error("bad secret key size");for(var nn=new Uint8Array(so),sn=0;sn<nn.length;sn++)nn[sn]=Gr[32+sn];return{publicKey:nn,secretKey:new Uint8Array(Gr)}},er.sign.keyPair.fromSeed=function(Gr){if(Ln(Gr),Gr.length!==hn)throw new Error("bad seed size");for(var nn=new Uint8Array(so),sn=new Uint8Array(Po),kr=0;kr<32;kr++)sn[kr]=Gr[kr];return xn(nn,sn,!0),{publicKey:nn,secretKey:sn}},er.sign.publicKeyLength=so,er.sign.secretKeyLength=Po,er.sign.seedLength=hn,er.sign.signatureLength=Eo,er.hash=function(Gr){Ln(Gr);var nn=new Uint8Array(pn);return Sn(nn,Gr,Gr.length),nn},er.hash.hashLength=pn,er.verify=function(Gr,nn){return Ln(Gr,nn),Gr.length===0||nn.length===0||Gr.length!==nn.length?!1:xr(Gr,0,nn,0,Gr.length)===0},er.setPRNG=function(Gr){nr=Gr},function(){var Gr=typeof self<"u"?self.crypto||self.msCrypto:null;if(Gr&&Gr.getRandomValues){var nn=65536;er.setPRNG(function(sn,kr){var fn,En=new Uint8Array(kr);for(fn=0;fn<kr;fn+=nn)Gr.getRandomValues(En.subarray(fn,fn+Math.min(kr-fn,nn)));for(fn=0;fn<kr;fn++)sn[fn]=En[fn];vo(En)})}else typeof commonjsRequire<"u"&&(Gr=requireEmptyModule(),Gr&&Gr.randomBytes&&er.setPRNG(function(sn,kr){var fn,En=Gr.randomBytes(kr);for(fn=0;fn<kr;fn++)sn[fn]=En[fn];vo(En)}))}()})(tr.exports?tr.exports:self.nacl=self.nacl||{})})(naclFast);var naclFastExports=naclFast.exports,__createBinding=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(tr,er,rr,nr){nr===void 0&&(nr=rr);var ir=Object.getOwnPropertyDescriptor(er,rr);(!ir||("get"in ir?!er.__esModule:ir.writable||ir.configurable))&&(ir={enumerable:!0,get:function(){return er[rr]}}),Object.defineProperty(tr,nr,ir)}:function(tr,er,rr,nr){nr===void 0&&(nr=rr),tr[nr]=er[rr]}),__setModuleDefault=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(tr,er){Object.defineProperty(tr,"default",{enumerable:!0,value:er})}:function(tr,er){tr.default=er}),__importStar=commonjsGlobal&&commonjsGlobal.__importStar||function(tr){if(tr&&tr.__esModule)return tr;var er={};if(tr!=null)for(var rr in tr)rr!=="default"&&Object.prototype.hasOwnProperty.call(tr,rr)&&__createBinding(er,tr,rr);return __setModuleDefault(er,tr),er};Object.defineProperty(encryption,"__esModule",{value:!0});encryption.getEncryptionPublicKey=encryption.decryptSafely=encryption.decrypt=encryption.encryptSafely=encryption.encrypt=void 0;const base_1=lib$1,nacl=__importStar(naclFastExports),utils_1$2=utils$3;function encrypt$1({publicKey:tr,data:er,version:rr}){if((0,utils_1$2.isNullish)(tr))throw new Error("Missing publicKey parameter");if((0,utils_1$2.isNullish)(er))throw new Error("Missing data parameter");if((0,utils_1$2.isNullish)(rr))throw new Error("Missing version parameter");switch(rr){case"x25519-xsalsa20-poly1305":{if(typeof er!="string")throw new Error("Message data must be given as a string");const nr=nacl.box.keyPair();let ir;try{ir=base_1.base64.decode(tr)}catch{throw new Error("Bad public key")}const sr=base_1.utf8.decode(er),or=nacl.randomBytes(nacl.box.nonceLength),ar=nacl.box(sr,or,ir,nr.secretKey);return{version:"x25519-xsalsa20-poly1305",nonce:base_1.base64.encode(or),ephemPublicKey:base_1.base64.encode(nr.publicKey),ciphertext:base_1.base64.encode(ar)}}default:throw new Error("Encryption type/version not supported")}}encryption.encrypt=encrypt$1;function encryptSafely({publicKey:tr,data:er,version:rr}){if((0,utils_1$2.isNullish)(tr))throw new Error("Missing publicKey parameter");if((0,utils_1$2.isNullish)(er))throw new Error("Missing data parameter");if((0,utils_1$2.isNullish)(rr))throw new Error("Missing version parameter");const nr=2**11,ir=16;if(typeof er=="object"&&er&&"toJSON"in er)throw new Error("Cannot encrypt with toJSON property.  Please remove toJSON property");const sr={data:er,padding:""},ar=Buffer.byteLength(JSON.stringify(sr),"utf-8")%nr;let cr=0;ar>0&&(cr=nr-ar-ir),sr.padding="0".repeat(cr);const lr=JSON.stringify(sr);return encrypt$1({publicKey:tr,data:lr,version:rr})}encryption.encryptSafely=encryptSafely;function decrypt$1({encryptedData:tr,privateKey:er}){if((0,utils_1$2.isNullish)(tr))throw new Error("Missing encryptedData parameter");if((0,utils_1$2.isNullish)(er))throw new Error("Missing privateKey parameter");switch(tr.version){case"x25519-xsalsa20-poly1305":{const rr=Buffer.from(er,"hex"),nr=nacl.box.keyPair.fromSecretKey(rr).secretKey,ir=base_1.base64.decode(tr.nonce),sr=base_1.base64.decode(tr.ciphertext),or=base_1.base64.decode(tr.ephemPublicKey),ar=nacl.box.open(sr,ir,or,nr);try{if(!ar)throw new Error;const cr=base_1.utf8.encode(ar);if(!cr)throw new Error;return cr}catch(cr){throw cr&&typeof cr.message=="string"&&cr.message.length?new Error(`Decryption failed: ${cr.message}`):new Error("Decryption failed.")}}default:throw new Error("Encryption type/version not supported.")}}encryption.decrypt=decrypt$1;function decryptSafely({encryptedData:tr,privateKey:er}){if((0,utils_1$2.isNullish)(tr))throw new Error("Missing encryptedData parameter");if((0,utils_1$2.isNullish)(er))throw new Error("Missing privateKey parameter");return JSON.parse(decrypt$1({encryptedData:tr,privateKey:er})).data}encryption.decryptSafely=decryptSafely;function getEncryptionPublicKey(tr){const er=Buffer.from(tr,"hex"),rr=nacl.box.keyPair.fromSecretKey(er).publicKey;return base_1.base64.encode(rr)}encryption.getEncryptionPublicKey=getEncryptionPublicKey;(function(tr){var er=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(ir,sr,or,ar){ar===void 0&&(ar=or);var cr=Object.getOwnPropertyDescriptor(sr,or);(!cr||("get"in cr?!sr.__esModule:cr.writable||cr.configurable))&&(cr={enumerable:!0,get:function(){return sr[or]}}),Object.defineProperty(ir,ar,cr)}:function(ir,sr,or,ar){ar===void 0&&(ar=or),ir[ar]=sr[or]}),rr=commonjsGlobal&&commonjsGlobal.__exportStar||function(ir,sr){for(var or in ir)or!=="default"&&!Object.prototype.hasOwnProperty.call(sr,or)&&er(sr,ir,or)};Object.defineProperty(tr,"__esModule",{value:!0}),tr.normalize=tr.concatSig=void 0,rr(personalSign$1,tr),rr(signTypedData,tr),rr(encryption,tr);var nr=utils$3;Object.defineProperty(tr,"concatSig",{enumerable:!0,get:function(){return nr.concatSig}}),Object.defineProperty(tr,"normalize",{enumerable:!0,get:function(){return nr.normalize}})})(dist$8);var bn={exports:{}};bn.exports;(function(tr){(function(er,rr){function nr(gr,fr){if(!gr)throw new Error(fr||"Assertion failed")}function ir(gr,fr){gr.super_=fr;var hr=function(){};hr.prototype=fr.prototype,gr.prototype=new hr,gr.prototype.constructor=gr}function sr(gr,fr,hr){if(sr.isBN(gr))return gr;this.negative=0,this.words=null,this.length=0,this.red=null,gr!==null&&((fr==="le"||fr==="be")&&(hr=fr,fr=10),this._init(gr||0,fr||10,hr||"be"))}typeof er=="object"?er.exports=sr:rr.BN=sr,sr.BN=sr,sr.wordSize=26;var or;try{typeof window<"u"&&typeof window.Buffer<"u"?or=window.Buffer:or=require$$3.Buffer}catch{}sr.isBN=function(fr){return fr instanceof sr?!0:fr!==null&&typeof fr=="object"&&fr.constructor.wordSize===sr.wordSize&&Array.isArray(fr.words)},sr.max=function(fr,hr){return fr.cmp(hr)>0?fr:hr},sr.min=function(fr,hr){return fr.cmp(hr)<0?fr:hr},sr.prototype._init=function(fr,hr,br){if(typeof fr=="number")return this._initNumber(fr,hr,br);if(typeof fr=="object")return this._initArray(fr,hr,br);hr==="hex"&&(hr=16),nr(hr===(hr|0)&&hr>=2&&hr<=36),fr=fr.toString().replace(/\s+/g,"");var _r=0;fr[0]==="-"&&(_r++,this.negative=1),_r<fr.length&&(hr===16?this._parseHex(fr,_r,br):(this._parseBase(fr,hr,_r),br==="le"&&this._initArray(this.toArray(),hr,br)))},sr.prototype._initNumber=function(fr,hr,br){fr<0&&(this.negative=1,fr=-fr),fr<67108864?(this.words=[fr&67108863],this.length=1):fr<4503599627370496?(this.words=[fr&67108863,fr/67108864&67108863],this.length=2):(nr(fr<9007199254740992),this.words=[fr&67108863,fr/67108864&67108863,1],this.length=3),br==="le"&&this._initArray(this.toArray(),hr,br)},sr.prototype._initArray=function(fr,hr,br){if(nr(typeof fr.length=="number"),fr.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(fr.length/3),this.words=new Array(this.length);for(var _r=0;_r<this.length;_r++)this.words[_r]=0;var $r,Er,vr=0;if(br==="be")for(_r=fr.length-1,$r=0;_r>=0;_r-=3)Er=fr[_r]|fr[_r-1]<<8|fr[_r-2]<<16,this.words[$r]|=Er<<vr&67108863,this.words[$r+1]=Er>>>26-vr&67108863,vr+=24,vr>=26&&(vr-=26,$r++);else if(br==="le")for(_r=0,$r=0;_r<fr.length;_r+=3)Er=fr[_r]|fr[_r+1]<<8|fr[_r+2]<<16,this.words[$r]|=Er<<vr&67108863,this.words[$r+1]=Er>>>26-vr&67108863,vr+=24,vr>=26&&(vr-=26,$r++);return this._strip()};function ar(gr,fr){var hr=gr.charCodeAt(fr);if(hr>=48&&hr<=57)return hr-48;if(hr>=65&&hr<=70)return hr-55;if(hr>=97&&hr<=102)return hr-87;nr(!1,"Invalid character in "+gr)}function cr(gr,fr,hr){var br=ar(gr,hr);return hr-1>=fr&&(br|=ar(gr,hr-1)<<4),br}sr.prototype._parseHex=function(fr,hr,br){this.length=Math.ceil((fr.length-hr)/6),this.words=new Array(this.length);for(var _r=0;_r<this.length;_r++)this.words[_r]=0;var $r=0,Er=0,vr;if(br==="be")for(_r=fr.length-1;_r>=hr;_r-=2)vr=cr(fr,hr,_r)<<$r,this.words[Er]|=vr&67108863,$r>=18?($r-=18,Er+=1,this.words[Er]|=vr>>>26):$r+=8;else{var Ir=fr.length-hr;for(_r=Ir%2===0?hr+1:hr;_r<fr.length;_r+=2)vr=cr(fr,hr,_r)<<$r,this.words[Er]|=vr&67108863,$r>=18?($r-=18,Er+=1,this.words[Er]|=vr>>>26):$r+=8}this._strip()};function lr(gr,fr,hr,br){for(var _r=0,$r=0,Er=Math.min(gr.length,hr),vr=fr;vr<Er;vr++){var Ir=gr.charCodeAt(vr)-48;_r*=br,Ir>=49?$r=Ir-49+10:Ir>=17?$r=Ir-17+10:$r=Ir,nr(Ir>=0&&$r<br,"Invalid character"),_r+=$r}return _r}sr.prototype._parseBase=function(fr,hr,br){this.words=[0],this.length=1;for(var _r=0,$r=1;$r<=67108863;$r*=hr)_r++;_r--,$r=$r/hr|0;for(var Er=fr.length-br,vr=Er%_r,Ir=Math.min(Er,Er-vr)+br,Rr=0,Br=br;Br<Ir;Br+=_r)Rr=lr(fr,Br,Br+_r,hr),this.imuln($r),this.words[0]+Rr<67108864?this.words[0]+=Rr:this._iaddn(Rr);if(vr!==0){var Jr=1;for(Rr=lr(fr,Br,fr.length,hr),Br=0;Br<vr;Br++)Jr*=hr;this.imuln(Jr),this.words[0]+Rr<67108864?this.words[0]+=Rr:this._iaddn(Rr)}this._strip()},sr.prototype.copy=function(fr){fr.words=new Array(this.length);for(var hr=0;hr<this.length;hr++)fr.words[hr]=this.words[hr];fr.length=this.length,fr.negative=this.negative,fr.red=this.red};function ur(gr,fr){gr.words=fr.words,gr.length=fr.length,gr.negative=fr.negative,gr.red=fr.red}if(sr.prototype._move=function(fr){ur(fr,this)},sr.prototype.clone=function(){var fr=new sr(null);return this.copy(fr),fr},sr.prototype._expand=function(fr){for(;this.length<fr;)this.words[this.length++]=0;return this},sr.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},sr.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{sr.prototype[Symbol.for("nodejs.util.inspect.custom")]=dr}catch{sr.prototype.inspect=dr}else sr.prototype.inspect=dr;function dr(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var yr=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],mr=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],wr=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];sr.prototype.toString=function(fr,hr){fr=fr||10,hr=hr|0||1;var br;if(fr===16||fr==="hex"){br="";for(var _r=0,$r=0,Er=0;Er<this.length;Er++){var vr=this.words[Er],Ir=((vr<<_r|$r)&16777215).toString(16);$r=vr>>>24-_r&16777215,_r+=2,_r>=26&&(_r-=26,Er--),$r!==0||Er!==this.length-1?br=yr[6-Ir.length]+Ir+br:br=Ir+br}for($r!==0&&(br=$r.toString(16)+br);br.length%hr!==0;)br="0"+br;return this.negative!==0&&(br="-"+br),br}if(fr===(fr|0)&&fr>=2&&fr<=36){var Rr=mr[fr],Br=wr[fr];br="";var Jr=this.clone();for(Jr.negative=0;!Jr.isZero();){var Wr=Jr.modrn(Br).toString(fr);Jr=Jr.idivn(Br),Jr.isZero()?br=Wr+br:br=yr[Rr-Wr.length]+Wr+br}for(this.isZero()&&(br="0"+br);br.length%hr!==0;)br="0"+br;return this.negative!==0&&(br="-"+br),br}nr(!1,"Base should be between 2 and 36")},sr.prototype.toNumber=function(){var fr=this.words[0];return this.length===2?fr+=this.words[1]*67108864:this.length===3&&this.words[2]===1?fr+=4503599627370496+this.words[1]*67108864:this.length>2&&nr(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-fr:fr},sr.prototype.toJSON=function(){return this.toString(16,2)},or&&(sr.prototype.toBuffer=function(fr,hr){return this.toArrayLike(or,fr,hr)}),sr.prototype.toArray=function(fr,hr){return this.toArrayLike(Array,fr,hr)};var xr=function(fr,hr){return fr.allocUnsafe?fr.allocUnsafe(hr):new fr(hr)};sr.prototype.toArrayLike=function(fr,hr,br){this._strip();var _r=this.byteLength(),$r=br||Math.max(1,_r);nr(_r<=$r,"byte array longer than desired length"),nr($r>0,"Requested array length <= 0");var Er=xr(fr,$r),vr=hr==="le"?"LE":"BE";return this["_toArrayLike"+vr](Er,_r),Er},sr.prototype._toArrayLikeLE=function(fr,hr){for(var br=0,_r=0,$r=0,Er=0;$r<this.length;$r++){var vr=this.words[$r]<<Er|_r;fr[br++]=vr&255,br<fr.length&&(fr[br++]=vr>>8&255),br<fr.length&&(fr[br++]=vr>>16&255),Er===6?(br<fr.length&&(fr[br++]=vr>>24&255),_r=0,Er=0):(_r=vr>>>24,Er+=2)}if(br<fr.length)for(fr[br++]=_r;br<fr.length;)fr[br++]=0},sr.prototype._toArrayLikeBE=function(fr,hr){for(var br=fr.length-1,_r=0,$r=0,Er=0;$r<this.length;$r++){var vr=this.words[$r]<<Er|_r;fr[br--]=vr&255,br>=0&&(fr[br--]=vr>>8&255),br>=0&&(fr[br--]=vr>>16&255),Er===6?(br>=0&&(fr[br--]=vr>>24&255),_r=0,Er=0):(_r=vr>>>24,Er+=2)}if(br>=0)for(fr[br--]=_r;br>=0;)fr[br--]=0},Math.clz32?sr.prototype._countBits=function(fr){return 32-Math.clz32(fr)}:sr.prototype._countBits=function(fr){var hr=fr,br=0;return hr>=4096&&(br+=13,hr>>>=13),hr>=64&&(br+=7,hr>>>=7),hr>=8&&(br+=4,hr>>>=4),hr>=2&&(br+=2,hr>>>=2),br+hr},sr.prototype._zeroBits=function(fr){if(fr===0)return 26;var hr=fr,br=0;return hr&8191||(br+=13,hr>>>=13),hr&127||(br+=7,hr>>>=7),hr&15||(br+=4,hr>>>=4),hr&3||(br+=2,hr>>>=2),hr&1||br++,br},sr.prototype.bitLength=function(){var fr=this.words[this.length-1],hr=this._countBits(fr);return(this.length-1)*26+hr};function Or(gr){for(var fr=new Array(gr.bitLength()),hr=0;hr<fr.length;hr++){var br=hr/26|0,_r=hr%26;fr[hr]=gr.words[br]>>>_r&1}return fr}sr.prototype.zeroBits=function(){if(this.isZero())return 0;for(var fr=0,hr=0;hr<this.length;hr++){var br=this._zeroBits(this.words[hr]);if(fr+=br,br!==26)break}return fr},sr.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},sr.prototype.toTwos=function(fr){return this.negative!==0?this.abs().inotn(fr).iaddn(1):this.clone()},sr.prototype.fromTwos=function(fr){return this.testn(fr-1)?this.notn(fr).iaddn(1).ineg():this.clone()},sr.prototype.isNeg=function(){return this.negative!==0},sr.prototype.neg=function(){return this.clone().ineg()},sr.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},sr.prototype.iuor=function(fr){for(;this.length<fr.length;)this.words[this.length++]=0;for(var hr=0;hr<fr.length;hr++)this.words[hr]=this.words[hr]|fr.words[hr];return this._strip()},sr.prototype.ior=function(fr){return nr((this.negative|fr.negative)===0),this.iuor(fr)},sr.prototype.or=function(fr){return this.length>fr.length?this.clone().ior(fr):fr.clone().ior(this)},sr.prototype.uor=function(fr){return this.length>fr.length?this.clone().iuor(fr):fr.clone().iuor(this)},sr.prototype.iuand=function(fr){var hr;this.length>fr.length?hr=fr:hr=this;for(var br=0;br<hr.length;br++)this.words[br]=this.words[br]&fr.words[br];return this.length=hr.length,this._strip()},sr.prototype.iand=function(fr){return nr((this.negative|fr.negative)===0),this.iuand(fr)},sr.prototype.and=function(fr){return this.length>fr.length?this.clone().iand(fr):fr.clone().iand(this)},sr.prototype.uand=function(fr){return this.length>fr.length?this.clone().iuand(fr):fr.clone().iuand(this)},sr.prototype.iuxor=function(fr){var hr,br;this.length>fr.length?(hr=this,br=fr):(hr=fr,br=this);for(var _r=0;_r<br.length;_r++)this.words[_r]=hr.words[_r]^br.words[_r];if(this!==hr)for(;_r<hr.length;_r++)this.words[_r]=hr.words[_r];return this.length=hr.length,this._strip()},sr.prototype.ixor=function(fr){return nr((this.negative|fr.negative)===0),this.iuxor(fr)},sr.prototype.xor=function(fr){return this.length>fr.length?this.clone().ixor(fr):fr.clone().ixor(this)},sr.prototype.uxor=function(fr){return this.length>fr.length?this.clone().iuxor(fr):fr.clone().iuxor(this)},sr.prototype.inotn=function(fr){nr(typeof fr=="number"&&fr>=0);var hr=Math.ceil(fr/26)|0,br=fr%26;this._expand(hr),br>0&&hr--;for(var _r=0;_r<hr;_r++)this.words[_r]=~this.words[_r]&67108863;return br>0&&(this.words[_r]=~this.words[_r]&67108863>>26-br),this._strip()},sr.prototype.notn=function(fr){return this.clone().inotn(fr)},sr.prototype.setn=function(fr,hr){nr(typeof fr=="number"&&fr>=0);var br=fr/26|0,_r=fr%26;return this._expand(br+1),hr?this.words[br]=this.words[br]|1<<_r:this.words[br]=this.words[br]&~(1<<_r),this._strip()},sr.prototype.iadd=function(fr){var hr;if(this.negative!==0&&fr.negative===0)return this.negative=0,hr=this.isub(fr),this.negative^=1,this._normSign();if(this.negative===0&&fr.negative!==0)return fr.negative=0,hr=this.isub(fr),fr.negative=1,hr._normSign();var br,_r;this.length>fr.length?(br=this,_r=fr):(br=fr,_r=this);for(var $r=0,Er=0;Er<_r.length;Er++)hr=(br.words[Er]|0)+(_r.words[Er]|0)+$r,this.words[Er]=hr&67108863,$r=hr>>>26;for(;$r!==0&&Er<br.length;Er++)hr=(br.words[Er]|0)+$r,this.words[Er]=hr&67108863,$r=hr>>>26;if(this.length=br.length,$r!==0)this.words[this.length]=$r,this.length++;else if(br!==this)for(;Er<br.length;Er++)this.words[Er]=br.words[Er];return this},sr.prototype.add=function(fr){var hr;return fr.negative!==0&&this.negative===0?(fr.negative=0,hr=this.sub(fr),fr.negative^=1,hr):fr.negative===0&&this.negative!==0?(this.negative=0,hr=fr.sub(this),this.negative=1,hr):this.length>fr.length?this.clone().iadd(fr):fr.clone().iadd(this)},sr.prototype.isub=function(fr){if(fr.negative!==0){fr.negative=0;var hr=this.iadd(fr);return fr.negative=1,hr._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(fr),this.negative=1,this._normSign();var br=this.cmp(fr);if(br===0)return this.negative=0,this.length=1,this.words[0]=0,this;var _r,$r;br>0?(_r=this,$r=fr):(_r=fr,$r=this);for(var Er=0,vr=0;vr<$r.length;vr++)hr=(_r.words[vr]|0)-($r.words[vr]|0)+Er,Er=hr>>26,this.words[vr]=hr&67108863;for(;Er!==0&&vr<_r.length;vr++)hr=(_r.words[vr]|0)+Er,Er=hr>>26,this.words[vr]=hr&67108863;if(Er===0&&vr<_r.length&&_r!==this)for(;vr<_r.length;vr++)this.words[vr]=_r.words[vr];return this.length=Math.max(this.length,vr),_r!==this&&(this.negative=1),this._strip()},sr.prototype.sub=function(fr){return this.clone().isub(fr)};function Tr(gr,fr,hr){hr.negative=fr.negative^gr.negative;var br=gr.length+fr.length|0;hr.length=br,br=br-1|0;var _r=gr.words[0]|0,$r=fr.words[0]|0,Er=_r*$r,vr=Er&67108863,Ir=Er/67108864|0;hr.words[0]=vr;for(var Rr=1;Rr<br;Rr++){for(var Br=Ir>>>26,Jr=Ir&67108863,Wr=Math.min(Rr,fr.length-1),qr=Math.max(0,Rr-gr.length+1);qr<=Wr;qr++){var an=Rr-qr|0;_r=gr.words[an]|0,$r=fr.words[qr]|0,Er=_r*$r+Jr,Br+=Er/67108864|0,Jr=Er&67108863}hr.words[Rr]=Jr|0,Ir=Br|0}return Ir!==0?hr.words[Rr]=Ir|0:hr.length--,hr._strip()}var Ar=function(fr,hr,br){var _r=fr.words,$r=hr.words,Er=br.words,vr=0,Ir,Rr,Br,Jr=_r[0]|0,Wr=Jr&8191,qr=Jr>>>13,an=_r[1]|0,tn=an&8191,cn=an>>>13,dn=_r[2]|0,Zr=dn&8191,Yr=dn>>>13,Qr=_r[3]|0,un=Qr&8191,gn=Qr>>>13,Rn=_r[4]|0,Pn=Rn&8191,Cn=Rn>>>13,Sn=_r[5]|0,zn=Sn&8191,Zn=Sn>>>13,Kn=_r[6]|0,eo=Kn&8191,vn=Kn>>>13,xn=_r[7]|0,Dn=xn&8191,Xr=xn>>>13,Lr=_r[8]|0,Fr=Lr&8191,ln=Lr>>>13,mn=_r[9]|0,_n=mn&8191,An=mn>>>13,Gn=$r[0]|0,Xs=Gn&8191,Jn=Gn>>>13,no=$r[1]|0,zs=no&8191,to=no>>>13,No=$r[2]|0,Ro=No&8191,uo=No>>>13,To=$r[3]|0,Eo=To&8191,so=To>>>13,Po=$r[4]|0,hn=Po&8191,pn=Po>>>13,kn=$r[5]|0,Mn=kn&8191,Ln=kn>>>13,vo=$r[6]|0,Gr=vo&8191,nn=vo>>>13,sn=$r[7]|0,kr=sn&8191,fn=sn>>>13,En=$r[8]|0,$n=En&8191,Tn=En>>>13,Bn=$r[9]|0,jn=Bn&8191,Hn=Bn>>>13;br.negative=fr.negative^hr.negative,br.length=19,Ir=Math.imul(Wr,Xs),Rr=Math.imul(Wr,Jn),Rr=Rr+Math.imul(qr,Xs)|0,Br=Math.imul(qr,Jn);var go=(vr+Ir|0)+((Rr&8191)<<13)|0;vr=(Br+(Rr>>>13)|0)+(go>>>26)|0,go&=67108863,Ir=Math.imul(tn,Xs),Rr=Math.imul(tn,Jn),Rr=Rr+Math.imul(cn,Xs)|0,Br=Math.imul(cn,Jn),Ir=Ir+Math.imul(Wr,zs)|0,Rr=Rr+Math.imul(Wr,to)|0,Rr=Rr+Math.imul(qr,zs)|0,Br=Br+Math.imul(qr,to)|0;var Yn=(vr+Ir|0)+((Rr&8191)<<13)|0;vr=(Br+(Rr>>>13)|0)+(Yn>>>26)|0,Yn&=67108863,Ir=Math.imul(Zr,Xs),Rr=Math.imul(Zr,Jn),Rr=Rr+Math.imul(Yr,Xs)|0,Br=Math.imul(Yr,Jn),Ir=Ir+Math.imul(tn,zs)|0,Rr=Rr+Math.imul(tn,to)|0,Rr=Rr+Math.imul(cn,zs)|0,Br=Br+Math.imul(cn,to)|0,Ir=Ir+Math.imul(Wr,Ro)|0,Rr=Rr+Math.imul(Wr,uo)|0,Rr=Rr+Math.imul(qr,Ro)|0,Br=Br+Math.imul(qr,uo)|0;var oo=(vr+Ir|0)+((Rr&8191)<<13)|0;vr=(Br+(Rr>>>13)|0)+(oo>>>26)|0,oo&=67108863,Ir=Math.imul(un,Xs),Rr=Math.imul(un,Jn),Rr=Rr+Math.imul(gn,Xs)|0,Br=Math.imul(gn,Jn),Ir=Ir+Math.imul(Zr,zs)|0,Rr=Rr+Math.imul(Zr,to)|0,Rr=Rr+Math.imul(Yr,zs)|0,Br=Br+Math.imul(Yr,to)|0,Ir=Ir+Math.imul(tn,Ro)|0,Rr=Rr+Math.imul(tn,uo)|0,Rr=Rr+Math.imul(cn,Ro)|0,Br=Br+Math.imul(cn,uo)|0,Ir=Ir+Math.imul(Wr,Eo)|0,Rr=Rr+Math.imul(Wr,so)|0,Rr=Rr+Math.imul(qr,Eo)|0,Br=Br+Math.imul(qr,so)|0;var co=(vr+Ir|0)+((Rr&8191)<<13)|0;vr=(Br+(Rr>>>13)|0)+(co>>>26)|0,co&=67108863,Ir=Math.imul(Pn,Xs),Rr=Math.imul(Pn,Jn),Rr=Rr+Math.imul(Cn,Xs)|0,Br=Math.imul(Cn,Jn),Ir=Ir+Math.imul(un,zs)|0,Rr=Rr+Math.imul(un,to)|0,Rr=Rr+Math.imul(gn,zs)|0,Br=Br+Math.imul(gn,to)|0,Ir=Ir+Math.imul(Zr,Ro)|0,Rr=Rr+Math.imul(Zr,uo)|0,Rr=Rr+Math.imul(Yr,Ro)|0,Br=Br+Math.imul(Yr,uo)|0,Ir=Ir+Math.imul(tn,Eo)|0,Rr=Rr+Math.imul(tn,so)|0,Rr=Rr+Math.imul(cn,Eo)|0,Br=Br+Math.imul(cn,so)|0,Ir=Ir+Math.imul(Wr,hn)|0,Rr=Rr+Math.imul(Wr,pn)|0,Rr=Rr+Math.imul(qr,hn)|0,Br=Br+Math.imul(qr,pn)|0;var ro=(vr+Ir|0)+((Rr&8191)<<13)|0;vr=(Br+(Rr>>>13)|0)+(ro>>>26)|0,ro&=67108863,Ir=Math.imul(zn,Xs),Rr=Math.imul(zn,Jn),Rr=Rr+Math.imul(Zn,Xs)|0,Br=Math.imul(Zn,Jn),Ir=Ir+Math.imul(Pn,zs)|0,Rr=Rr+Math.imul(Pn,to)|0,Rr=Rr+Math.imul(Cn,zs)|0,Br=Br+Math.imul(Cn,to)|0,Ir=Ir+Math.imul(un,Ro)|0,Rr=Rr+Math.imul(un,uo)|0,Rr=Rr+Math.imul(gn,Ro)|0,Br=Br+Math.imul(gn,uo)|0,Ir=Ir+Math.imul(Zr,Eo)|0,Rr=Rr+Math.imul(Zr,so)|0,Rr=Rr+Math.imul(Yr,Eo)|0,Br=Br+Math.imul(Yr,so)|0,Ir=Ir+Math.imul(tn,hn)|0,Rr=Rr+Math.imul(tn,pn)|0,Rr=Rr+Math.imul(cn,hn)|0,Br=Br+Math.imul(cn,pn)|0,Ir=Ir+Math.imul(Wr,Mn)|0,Rr=Rr+Math.imul(Wr,Ln)|0,Rr=Rr+Math.imul(qr,Mn)|0,Br=Br+Math.imul(qr,Ln)|0;var fo=(vr+Ir|0)+((Rr&8191)<<13)|0;vr=(Br+(Rr>>>13)|0)+(fo>>>26)|0,fo&=67108863,Ir=Math.imul(eo,Xs),Rr=Math.imul(eo,Jn),Rr=Rr+Math.imul(vn,Xs)|0,Br=Math.imul(vn,Jn),Ir=Ir+Math.imul(zn,zs)|0,Rr=Rr+Math.imul(zn,to)|0,Rr=Rr+Math.imul(Zn,zs)|0,Br=Br+Math.imul(Zn,to)|0,Ir=Ir+Math.imul(Pn,Ro)|0,Rr=Rr+Math.imul(Pn,uo)|0,Rr=Rr+Math.imul(Cn,Ro)|0,Br=Br+Math.imul(Cn,uo)|0,Ir=Ir+Math.imul(un,Eo)|0,Rr=Rr+Math.imul(un,so)|0,Rr=Rr+Math.imul(gn,Eo)|0,Br=Br+Math.imul(gn,so)|0,Ir=Ir+Math.imul(Zr,hn)|0,Rr=Rr+Math.imul(Zr,pn)|0,Rr=Rr+Math.imul(Yr,hn)|0,Br=Br+Math.imul(Yr,pn)|0,Ir=Ir+Math.imul(tn,Mn)|0,Rr=Rr+Math.imul(tn,Ln)|0,Rr=Rr+Math.imul(cn,Mn)|0,Br=Br+Math.imul(cn,Ln)|0,Ir=Ir+Math.imul(Wr,Gr)|0,Rr=Rr+Math.imul(Wr,nn)|0,Rr=Rr+Math.imul(qr,Gr)|0,Br=Br+Math.imul(qr,nn)|0;var io=(vr+Ir|0)+((Rr&8191)<<13)|0;vr=(Br+(Rr>>>13)|0)+(io>>>26)|0,io&=67108863,Ir=Math.imul(Dn,Xs),Rr=Math.imul(Dn,Jn),Rr=Rr+Math.imul(Xr,Xs)|0,Br=Math.imul(Xr,Jn),Ir=Ir+Math.imul(eo,zs)|0,Rr=Rr+Math.imul(eo,to)|0,Rr=Rr+Math.imul(vn,zs)|0,Br=Br+Math.imul(vn,to)|0,Ir=Ir+Math.imul(zn,Ro)|0,Rr=Rr+Math.imul(zn,uo)|0,Rr=Rr+Math.imul(Zn,Ro)|0,Br=Br+Math.imul(Zn,uo)|0,Ir=Ir+Math.imul(Pn,Eo)|0,Rr=Rr+Math.imul(Pn,so)|0,Rr=Rr+Math.imul(Cn,Eo)|0,Br=Br+Math.imul(Cn,so)|0,Ir=Ir+Math.imul(un,hn)|0,Rr=Rr+Math.imul(un,pn)|0,Rr=Rr+Math.imul(gn,hn)|0,Br=Br+Math.imul(gn,pn)|0,Ir=Ir+Math.imul(Zr,Mn)|0,Rr=Rr+Math.imul(Zr,Ln)|0,Rr=Rr+Math.imul(Yr,Mn)|0,Br=Br+Math.imul(Yr,Ln)|0,Ir=Ir+Math.imul(tn,Gr)|0,Rr=Rr+Math.imul(tn,nn)|0,Rr=Rr+Math.imul(cn,Gr)|0,Br=Br+Math.imul(cn,nn)|0,Ir=Ir+Math.imul(Wr,kr)|0,Rr=Rr+Math.imul(Wr,fn)|0,Rr=Rr+Math.imul(qr,kr)|0,Br=Br+Math.imul(qr,fn)|0;var ao=(vr+Ir|0)+((Rr&8191)<<13)|0;vr=(Br+(Rr>>>13)|0)+(ao>>>26)|0,ao&=67108863,Ir=Math.imul(Fr,Xs),Rr=Math.imul(Fr,Jn),Rr=Rr+Math.imul(ln,Xs)|0,Br=Math.imul(ln,Jn),Ir=Ir+Math.imul(Dn,zs)|0,Rr=Rr+Math.imul(Dn,to)|0,Rr=Rr+Math.imul(Xr,zs)|0,Br=Br+Math.imul(Xr,to)|0,Ir=Ir+Math.imul(eo,Ro)|0,Rr=Rr+Math.imul(eo,uo)|0,Rr=Rr+Math.imul(vn,Ro)|0,Br=Br+Math.imul(vn,uo)|0,Ir=Ir+Math.imul(zn,Eo)|0,Rr=Rr+Math.imul(zn,so)|0,Rr=Rr+Math.imul(Zn,Eo)|0,Br=Br+Math.imul(Zn,so)|0,Ir=Ir+Math.imul(Pn,hn)|0,Rr=Rr+Math.imul(Pn,pn)|0,Rr=Rr+Math.imul(Cn,hn)|0,Br=Br+Math.imul(Cn,pn)|0,Ir=Ir+Math.imul(un,Mn)|0,Rr=Rr+Math.imul(un,Ln)|0,Rr=Rr+Math.imul(gn,Mn)|0,Br=Br+Math.imul(gn,Ln)|0,Ir=Ir+Math.imul(Zr,Gr)|0,Rr=Rr+Math.imul(Zr,nn)|0,Rr=Rr+Math.imul(Yr,Gr)|0,Br=Br+Math.imul(Yr,nn)|0,Ir=Ir+Math.imul(tn,kr)|0,Rr=Rr+Math.imul(tn,fn)|0,Rr=Rr+Math.imul(cn,kr)|0,Br=Br+Math.imul(cn,fn)|0,Ir=Ir+Math.imul(Wr,$n)|0,Rr=Rr+Math.imul(Wr,Tn)|0,Rr=Rr+Math.imul(qr,$n)|0,Br=Br+Math.imul(qr,Tn)|0;var lo=(vr+Ir|0)+((Rr&8191)<<13)|0;vr=(Br+(Rr>>>13)|0)+(lo>>>26)|0,lo&=67108863,Ir=Math.imul(_n,Xs),Rr=Math.imul(_n,Jn),Rr=Rr+Math.imul(An,Xs)|0,Br=Math.imul(An,Jn),Ir=Ir+Math.imul(Fr,zs)|0,Rr=Rr+Math.imul(Fr,to)|0,Rr=Rr+Math.imul(ln,zs)|0,Br=Br+Math.imul(ln,to)|0,Ir=Ir+Math.imul(Dn,Ro)|0,Rr=Rr+Math.imul(Dn,uo)|0,Rr=Rr+Math.imul(Xr,Ro)|0,Br=Br+Math.imul(Xr,uo)|0,Ir=Ir+Math.imul(eo,Eo)|0,Rr=Rr+Math.imul(eo,so)|0,Rr=Rr+Math.imul(vn,Eo)|0,Br=Br+Math.imul(vn,so)|0,Ir=Ir+Math.imul(zn,hn)|0,Rr=Rr+Math.imul(zn,pn)|0,Rr=Rr+Math.imul(Zn,hn)|0,Br=Br+Math.imul(Zn,pn)|0,Ir=Ir+Math.imul(Pn,Mn)|0,Rr=Rr+Math.imul(Pn,Ln)|0,Rr=Rr+Math.imul(Cn,Mn)|0,Br=Br+Math.imul(Cn,Ln)|0,Ir=Ir+Math.imul(un,Gr)|0,Rr=Rr+Math.imul(un,nn)|0,Rr=Rr+Math.imul(gn,Gr)|0,Br=Br+Math.imul(gn,nn)|0,Ir=Ir+Math.imul(Zr,kr)|0,Rr=Rr+Math.imul(Zr,fn)|0,Rr=Rr+Math.imul(Yr,kr)|0,Br=Br+Math.imul(Yr,fn)|0,Ir=Ir+Math.imul(tn,$n)|0,Rr=Rr+Math.imul(tn,Tn)|0,Rr=Rr+Math.imul(cn,$n)|0,Br=Br+Math.imul(cn,Tn)|0,Ir=Ir+Math.imul(Wr,jn)|0,Rr=Rr+Math.imul(Wr,Hn)|0,Rr=Rr+Math.imul(qr,jn)|0,Br=Br+Math.imul(qr,Hn)|0;var Ws=(vr+Ir|0)+((Rr&8191)<<13)|0;vr=(Br+(Rr>>>13)|0)+(Ws>>>26)|0,Ws&=67108863,Ir=Math.imul(_n,zs),Rr=Math.imul(_n,to),Rr=Rr+Math.imul(An,zs)|0,Br=Math.imul(An,to),Ir=Ir+Math.imul(Fr,Ro)|0,Rr=Rr+Math.imul(Fr,uo)|0,Rr=Rr+Math.imul(ln,Ro)|0,Br=Br+Math.imul(ln,uo)|0,Ir=Ir+Math.imul(Dn,Eo)|0,Rr=Rr+Math.imul(Dn,so)|0,Rr=Rr+Math.imul(Xr,Eo)|0,Br=Br+Math.imul(Xr,so)|0,Ir=Ir+Math.imul(eo,hn)|0,Rr=Rr+Math.imul(eo,pn)|0,Rr=Rr+Math.imul(vn,hn)|0,Br=Br+Math.imul(vn,pn)|0,Ir=Ir+Math.imul(zn,Mn)|0,Rr=Rr+Math.imul(zn,Ln)|0,Rr=Rr+Math.imul(Zn,Mn)|0,Br=Br+Math.imul(Zn,Ln)|0,Ir=Ir+Math.imul(Pn,Gr)|0,Rr=Rr+Math.imul(Pn,nn)|0,Rr=Rr+Math.imul(Cn,Gr)|0,Br=Br+Math.imul(Cn,nn)|0,Ir=Ir+Math.imul(un,kr)|0,Rr=Rr+Math.imul(un,fn)|0,Rr=Rr+Math.imul(gn,kr)|0,Br=Br+Math.imul(gn,fn)|0,Ir=Ir+Math.imul(Zr,$n)|0,Rr=Rr+Math.imul(Zr,Tn)|0,Rr=Rr+Math.imul(Yr,$n)|0,Br=Br+Math.imul(Yr,Tn)|0,Ir=Ir+Math.imul(tn,jn)|0,Rr=Rr+Math.imul(tn,Hn)|0,Rr=Rr+Math.imul(cn,jn)|0,Br=Br+Math.imul(cn,Hn)|0;var Qs=(vr+Ir|0)+((Rr&8191)<<13)|0;vr=(Br+(Rr>>>13)|0)+(Qs>>>26)|0,Qs&=67108863,Ir=Math.imul(_n,Ro),Rr=Math.imul(_n,uo),Rr=Rr+Math.imul(An,Ro)|0,Br=Math.imul(An,uo),Ir=Ir+Math.imul(Fr,Eo)|0,Rr=Rr+Math.imul(Fr,so)|0,Rr=Rr+Math.imul(ln,Eo)|0,Br=Br+Math.imul(ln,so)|0,Ir=Ir+Math.imul(Dn,hn)|0,Rr=Rr+Math.imul(Dn,pn)|0,Rr=Rr+Math.imul(Xr,hn)|0,Br=Br+Math.imul(Xr,pn)|0,Ir=Ir+Math.imul(eo,Mn)|0,Rr=Rr+Math.imul(eo,Ln)|0,Rr=Rr+Math.imul(vn,Mn)|0,Br=Br+Math.imul(vn,Ln)|0,Ir=Ir+Math.imul(zn,Gr)|0,Rr=Rr+Math.imul(zn,nn)|0,Rr=Rr+Math.imul(Zn,Gr)|0,Br=Br+Math.imul(Zn,nn)|0,Ir=Ir+Math.imul(Pn,kr)|0,Rr=Rr+Math.imul(Pn,fn)|0,Rr=Rr+Math.imul(Cn,kr)|0,Br=Br+Math.imul(Cn,fn)|0,Ir=Ir+Math.imul(un,$n)|0,Rr=Rr+Math.imul(un,Tn)|0,Rr=Rr+Math.imul(gn,$n)|0,Br=Br+Math.imul(gn,Tn)|0,Ir=Ir+Math.imul(Zr,jn)|0,Rr=Rr+Math.imul(Zr,Hn)|0,Rr=Rr+Math.imul(Yr,jn)|0,Br=Br+Math.imul(Yr,Hn)|0;var _i=(vr+Ir|0)+((Rr&8191)<<13)|0;vr=(Br+(Rr>>>13)|0)+(_i>>>26)|0,_i&=67108863,Ir=Math.imul(_n,Eo),Rr=Math.imul(_n,so),Rr=Rr+Math.imul(An,Eo)|0,Br=Math.imul(An,so),Ir=Ir+Math.imul(Fr,hn)|0,Rr=Rr+Math.imul(Fr,pn)|0,Rr=Rr+Math.imul(ln,hn)|0,Br=Br+Math.imul(ln,pn)|0,Ir=Ir+Math.imul(Dn,Mn)|0,Rr=Rr+Math.imul(Dn,Ln)|0,Rr=Rr+Math.imul(Xr,Mn)|0,Br=Br+Math.imul(Xr,Ln)|0,Ir=Ir+Math.imul(eo,Gr)|0,Rr=Rr+Math.imul(eo,nn)|0,Rr=Rr+Math.imul(vn,Gr)|0,Br=Br+Math.imul(vn,nn)|0,Ir=Ir+Math.imul(zn,kr)|0,Rr=Rr+Math.imul(zn,fn)|0,Rr=Rr+Math.imul(Zn,kr)|0,Br=Br+Math.imul(Zn,fn)|0,Ir=Ir+Math.imul(Pn,$n)|0,Rr=Rr+Math.imul(Pn,Tn)|0,Rr=Rr+Math.imul(Cn,$n)|0,Br=Br+Math.imul(Cn,Tn)|0,Ir=Ir+Math.imul(un,jn)|0,Rr=Rr+Math.imul(un,Hn)|0,Rr=Rr+Math.imul(gn,jn)|0,Br=Br+Math.imul(gn,Hn)|0;var Js=(vr+Ir|0)+((Rr&8191)<<13)|0;vr=(Br+(Rr>>>13)|0)+(Js>>>26)|0,Js&=67108863,Ir=Math.imul(_n,hn),Rr=Math.imul(_n,pn),Rr=Rr+Math.imul(An,hn)|0,Br=Math.imul(An,pn),Ir=Ir+Math.imul(Fr,Mn)|0,Rr=Rr+Math.imul(Fr,Ln)|0,Rr=Rr+Math.imul(ln,Mn)|0,Br=Br+Math.imul(ln,Ln)|0,Ir=Ir+Math.imul(Dn,Gr)|0,Rr=Rr+Math.imul(Dn,nn)|0,Rr=Rr+Math.imul(Xr,Gr)|0,Br=Br+Math.imul(Xr,nn)|0,Ir=Ir+Math.imul(eo,kr)|0,Rr=Rr+Math.imul(eo,fn)|0,Rr=Rr+Math.imul(vn,kr)|0,Br=Br+Math.imul(vn,fn)|0,Ir=Ir+Math.imul(zn,$n)|0,Rr=Rr+Math.imul(zn,Tn)|0,Rr=Rr+Math.imul(Zn,$n)|0,Br=Br+Math.imul(Zn,Tn)|0,Ir=Ir+Math.imul(Pn,jn)|0,Rr=Rr+Math.imul(Pn,Hn)|0,Rr=Rr+Math.imul(Cn,jn)|0,Br=Br+Math.imul(Cn,Hn)|0;var Ls=(vr+Ir|0)+((Rr&8191)<<13)|0;vr=(Br+(Rr>>>13)|0)+(Ls>>>26)|0,Ls&=67108863,Ir=Math.imul(_n,Mn),Rr=Math.imul(_n,Ln),Rr=Rr+Math.imul(An,Mn)|0,Br=Math.imul(An,Ln),Ir=Ir+Math.imul(Fr,Gr)|0,Rr=Rr+Math.imul(Fr,nn)|0,Rr=Rr+Math.imul(ln,Gr)|0,Br=Br+Math.imul(ln,nn)|0,Ir=Ir+Math.imul(Dn,kr)|0,Rr=Rr+Math.imul(Dn,fn)|0,Rr=Rr+Math.imul(Xr,kr)|0,Br=Br+Math.imul(Xr,fn)|0,Ir=Ir+Math.imul(eo,$n)|0,Rr=Rr+Math.imul(eo,Tn)|0,Rr=Rr+Math.imul(vn,$n)|0,Br=Br+Math.imul(vn,Tn)|0,Ir=Ir+Math.imul(zn,jn)|0,Rr=Rr+Math.imul(zn,Hn)|0,Rr=Rr+Math.imul(Zn,jn)|0,Br=Br+Math.imul(Zn,Hn)|0;var Qn=(vr+Ir|0)+((Rr&8191)<<13)|0;vr=(Br+(Rr>>>13)|0)+(Qn>>>26)|0,Qn&=67108863,Ir=Math.imul(_n,Gr),Rr=Math.imul(_n,nn),Rr=Rr+Math.imul(An,Gr)|0,Br=Math.imul(An,nn),Ir=Ir+Math.imul(Fr,kr)|0,Rr=Rr+Math.imul(Fr,fn)|0,Rr=Rr+Math.imul(ln,kr)|0,Br=Br+Math.imul(ln,fn)|0,Ir=Ir+Math.imul(Dn,$n)|0,Rr=Rr+Math.imul(Dn,Tn)|0,Rr=Rr+Math.imul(Xr,$n)|0,Br=Br+Math.imul(Xr,Tn)|0,Ir=Ir+Math.imul(eo,jn)|0,Rr=Rr+Math.imul(eo,Hn)|0,Rr=Rr+Math.imul(vn,jn)|0,Br=Br+Math.imul(vn,Hn)|0;var In=(vr+Ir|0)+((Rr&8191)<<13)|0;vr=(Br+(Rr>>>13)|0)+(In>>>26)|0,In&=67108863,Ir=Math.imul(_n,kr),Rr=Math.imul(_n,fn),Rr=Rr+Math.imul(An,kr)|0,Br=Math.imul(An,fn),Ir=Ir+Math.imul(Fr,$n)|0,Rr=Rr+Math.imul(Fr,Tn)|0,Rr=Rr+Math.imul(ln,$n)|0,Br=Br+Math.imul(ln,Tn)|0,Ir=Ir+Math.imul(Dn,jn)|0,Rr=Rr+Math.imul(Dn,Hn)|0,Rr=Rr+Math.imul(Xr,jn)|0,Br=Br+Math.imul(Xr,Hn)|0;var Nn=(vr+Ir|0)+((Rr&8191)<<13)|0;vr=(Br+(Rr>>>13)|0)+(Nn>>>26)|0,Nn&=67108863,Ir=Math.imul(_n,$n),Rr=Math.imul(_n,Tn),Rr=Rr+Math.imul(An,$n)|0,Br=Math.imul(An,Tn),Ir=Ir+Math.imul(Fr,jn)|0,Rr=Rr+Math.imul(Fr,Hn)|0,Rr=Rr+Math.imul(ln,jn)|0,Br=Br+Math.imul(ln,Hn)|0;var Vn=(vr+Ir|0)+((Rr&8191)<<13)|0;vr=(Br+(Rr>>>13)|0)+(Vn>>>26)|0,Vn&=67108863,Ir=Math.imul(_n,jn),Rr=Math.imul(_n,Hn),Rr=Rr+Math.imul(An,jn)|0,Br=Math.imul(An,Hn);var Un=(vr+Ir|0)+((Rr&8191)<<13)|0;return vr=(Br+(Rr>>>13)|0)+(Un>>>26)|0,Un&=67108863,Er[0]=go,Er[1]=Yn,Er[2]=oo,Er[3]=co,Er[4]=ro,Er[5]=fo,Er[6]=io,Er[7]=ao,Er[8]=lo,Er[9]=Ws,Er[10]=Qs,Er[11]=_i,Er[12]=Js,Er[13]=Ls,Er[14]=Qn,Er[15]=In,Er[16]=Nn,Er[17]=Vn,Er[18]=Un,vr!==0&&(Er[19]=vr,br.length++),br};Math.imul||(Ar=Tr);function Nr(gr,fr,hr){hr.negative=fr.negative^gr.negative,hr.length=gr.length+fr.length;for(var br=0,_r=0,$r=0;$r<hr.length-1;$r++){var Er=_r;_r=0;for(var vr=br&67108863,Ir=Math.min($r,fr.length-1),Rr=Math.max(0,$r-gr.length+1);Rr<=Ir;Rr++){var Br=$r-Rr,Jr=gr.words[Br]|0,Wr=fr.words[Rr]|0,qr=Jr*Wr,an=qr&67108863;Er=Er+(qr/67108864|0)|0,an=an+vr|0,vr=an&67108863,Er=Er+(an>>>26)|0,_r+=Er>>>26,Er&=67108863}hr.words[$r]=vr,br=Er,Er=_r}return br!==0?hr.words[$r]=br:hr.length--,hr._strip()}function Ur(gr,fr,hr){return Nr(gr,fr,hr)}sr.prototype.mulTo=function(fr,hr){var br,_r=this.length+fr.length;return this.length===10&&fr.length===10?br=Ar(this,fr,hr):_r<63?br=Tr(this,fr,hr):_r<1024?br=Nr(this,fr,hr):br=Ur(this,fr,hr),br},sr.prototype.mul=function(fr){var hr=new sr(null);return hr.words=new Array(this.length+fr.length),this.mulTo(fr,hr)},sr.prototype.mulf=function(fr){var hr=new sr(null);return hr.words=new Array(this.length+fr.length),Ur(this,fr,hr)},sr.prototype.imul=function(fr){return this.clone().mulTo(fr,this)},sr.prototype.imuln=function(fr){var hr=fr<0;hr&&(fr=-fr),nr(typeof fr=="number"),nr(fr<67108864);for(var br=0,_r=0;_r<this.length;_r++){var $r=(this.words[_r]|0)*fr,Er=($r&67108863)+(br&67108863);br>>=26,br+=$r/67108864|0,br+=Er>>>26,this.words[_r]=Er&67108863}return br!==0&&(this.words[_r]=br,this.length++),hr?this.ineg():this},sr.prototype.muln=function(fr){return this.clone().imuln(fr)},sr.prototype.sqr=function(){return this.mul(this)},sr.prototype.isqr=function(){return this.imul(this.clone())},sr.prototype.pow=function(fr){var hr=Or(fr);if(hr.length===0)return new sr(1);for(var br=this,_r=0;_r<hr.length&&hr[_r]===0;_r++,br=br.sqr());if(++_r<hr.length)for(var $r=br.sqr();_r<hr.length;_r++,$r=$r.sqr())hr[_r]!==0&&(br=br.mul($r));return br},sr.prototype.iushln=function(fr){nr(typeof fr=="number"&&fr>=0);var hr=fr%26,br=(fr-hr)/26,_r=67108863>>>26-hr<<26-hr,$r;if(hr!==0){var Er=0;for($r=0;$r<this.length;$r++){var vr=this.words[$r]&_r,Ir=(this.words[$r]|0)-vr<<hr;this.words[$r]=Ir|Er,Er=vr>>>26-hr}Er&&(this.words[$r]=Er,this.length++)}if(br!==0){for($r=this.length-1;$r>=0;$r--)this.words[$r+br]=this.words[$r];for($r=0;$r<br;$r++)this.words[$r]=0;this.length+=br}return this._strip()},sr.prototype.ishln=function(fr){return nr(this.negative===0),this.iushln(fr)},sr.prototype.iushrn=function(fr,hr,br){nr(typeof fr=="number"&&fr>=0);var _r;hr?_r=(hr-hr%26)/26:_r=0;var $r=fr%26,Er=Math.min((fr-$r)/26,this.length),vr=67108863^67108863>>>$r<<$r,Ir=br;if(_r-=Er,_r=Math.max(0,_r),Ir){for(var Rr=0;Rr<Er;Rr++)Ir.words[Rr]=this.words[Rr];Ir.length=Er}if(Er!==0)if(this.length>Er)for(this.length-=Er,Rr=0;Rr<this.length;Rr++)this.words[Rr]=this.words[Rr+Er];else this.words[0]=0,this.length=1;var Br=0;for(Rr=this.length-1;Rr>=0&&(Br!==0||Rr>=_r);Rr--){var Jr=this.words[Rr]|0;this.words[Rr]=Br<<26-$r|Jr>>>$r,Br=Jr&vr}return Ir&&Br!==0&&(Ir.words[Ir.length++]=Br),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},sr.prototype.ishrn=function(fr,hr,br){return nr(this.negative===0),this.iushrn(fr,hr,br)},sr.prototype.shln=function(fr){return this.clone().ishln(fr)},sr.prototype.ushln=function(fr){return this.clone().iushln(fr)},sr.prototype.shrn=function(fr){return this.clone().ishrn(fr)},sr.prototype.ushrn=function(fr){return this.clone().iushrn(fr)},sr.prototype.testn=function(fr){nr(typeof fr=="number"&&fr>=0);var hr=fr%26,br=(fr-hr)/26,_r=1<<hr;if(this.length<=br)return!1;var $r=this.words[br];return!!($r&_r)},sr.prototype.imaskn=function(fr){nr(typeof fr=="number"&&fr>=0);var hr=fr%26,br=(fr-hr)/26;if(nr(this.negative===0,"imaskn works only with positive numbers"),this.length<=br)return this;if(hr!==0&&br++,this.length=Math.min(br,this.length),hr!==0){var _r=67108863^67108863>>>hr<<hr;this.words[this.length-1]&=_r}return this._strip()},sr.prototype.maskn=function(fr){return this.clone().imaskn(fr)},sr.prototype.iaddn=function(fr){return nr(typeof fr=="number"),nr(fr<67108864),fr<0?this.isubn(-fr):this.negative!==0?this.length===1&&(this.words[0]|0)<=fr?(this.words[0]=fr-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(fr),this.negative=1,this):this._iaddn(fr)},sr.prototype._iaddn=function(fr){this.words[0]+=fr;for(var hr=0;hr<this.length&&this.words[hr]>=67108864;hr++)this.words[hr]-=67108864,hr===this.length-1?this.words[hr+1]=1:this.words[hr+1]++;return this.length=Math.max(this.length,hr+1),this},sr.prototype.isubn=function(fr){if(nr(typeof fr=="number"),nr(fr<67108864),fr<0)return this.iaddn(-fr);if(this.negative!==0)return this.negative=0,this.iaddn(fr),this.negative=1,this;if(this.words[0]-=fr,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var hr=0;hr<this.length&&this.words[hr]<0;hr++)this.words[hr]+=67108864,this.words[hr+1]-=1;return this._strip()},sr.prototype.addn=function(fr){return this.clone().iaddn(fr)},sr.prototype.subn=function(fr){return this.clone().isubn(fr)},sr.prototype.iabs=function(){return this.negative=0,this},sr.prototype.abs=function(){return this.clone().iabs()},sr.prototype._ishlnsubmul=function(fr,hr,br){var _r=fr.length+br,$r;this._expand(_r);var Er,vr=0;for($r=0;$r<fr.length;$r++){Er=(this.words[$r+br]|0)+vr;var Ir=(fr.words[$r]|0)*hr;Er-=Ir&67108863,vr=(Er>>26)-(Ir/67108864|0),this.words[$r+br]=Er&67108863}for(;$r<this.length-br;$r++)Er=(this.words[$r+br]|0)+vr,vr=Er>>26,this.words[$r+br]=Er&67108863;if(vr===0)return this._strip();for(nr(vr===-1),vr=0,$r=0;$r<this.length;$r++)Er=-(this.words[$r]|0)+vr,vr=Er>>26,this.words[$r]=Er&67108863;return this.negative=1,this._strip()},sr.prototype._wordDiv=function(fr,hr){var br=this.length-fr.length,_r=this.clone(),$r=fr,Er=$r.words[$r.length-1]|0,vr=this._countBits(Er);br=26-vr,br!==0&&($r=$r.ushln(br),_r.iushln(br),Er=$r.words[$r.length-1]|0);var Ir=_r.length-$r.length,Rr;if(hr!=="mod"){Rr=new sr(null),Rr.length=Ir+1,Rr.words=new Array(Rr.length);for(var Br=0;Br<Rr.length;Br++)Rr.words[Br]=0}var Jr=_r.clone()._ishlnsubmul($r,1,Ir);Jr.negative===0&&(_r=Jr,Rr&&(Rr.words[Ir]=1));for(var Wr=Ir-1;Wr>=0;Wr--){var qr=(_r.words[$r.length+Wr]|0)*67108864+(_r.words[$r.length+Wr-1]|0);for(qr=Math.min(qr/Er|0,67108863),_r._ishlnsubmul($r,qr,Wr);_r.negative!==0;)qr--,_r.negative=0,_r._ishlnsubmul($r,1,Wr),_r.isZero()||(_r.negative^=1);Rr&&(Rr.words[Wr]=qr)}return Rr&&Rr._strip(),_r._strip(),hr!=="div"&&br!==0&&_r.iushrn(br),{div:Rr||null,mod:_r}},sr.prototype.divmod=function(fr,hr,br){if(nr(!fr.isZero()),this.isZero())return{div:new sr(0),mod:new sr(0)};var _r,$r,Er;return this.negative!==0&&fr.negative===0?(Er=this.neg().divmod(fr,hr),hr!=="mod"&&(_r=Er.div.neg()),hr!=="div"&&($r=Er.mod.neg(),br&&$r.negative!==0&&$r.iadd(fr)),{div:_r,mod:$r}):this.negative===0&&fr.negative!==0?(Er=this.divmod(fr.neg(),hr),hr!=="mod"&&(_r=Er.div.neg()),{div:_r,mod:Er.mod}):this.negative&fr.negative?(Er=this.neg().divmod(fr.neg(),hr),hr!=="div"&&($r=Er.mod.neg(),br&&$r.negative!==0&&$r.isub(fr)),{div:Er.div,mod:$r}):fr.length>this.length||this.cmp(fr)<0?{div:new sr(0),mod:this}:fr.length===1?hr==="div"?{div:this.divn(fr.words[0]),mod:null}:hr==="mod"?{div:null,mod:new sr(this.modrn(fr.words[0]))}:{div:this.divn(fr.words[0]),mod:new sr(this.modrn(fr.words[0]))}:this._wordDiv(fr,hr)},sr.prototype.div=function(fr){return this.divmod(fr,"div",!1).div},sr.prototype.mod=function(fr){return this.divmod(fr,"mod",!1).mod},sr.prototype.umod=function(fr){return this.divmod(fr,"mod",!0).mod},sr.prototype.divRound=function(fr){var hr=this.divmod(fr);if(hr.mod.isZero())return hr.div;var br=hr.div.negative!==0?hr.mod.isub(fr):hr.mod,_r=fr.ushrn(1),$r=fr.andln(1),Er=br.cmp(_r);return Er<0||$r===1&&Er===0?hr.div:hr.div.negative!==0?hr.div.isubn(1):hr.div.iaddn(1)},sr.prototype.modrn=function(fr){var hr=fr<0;hr&&(fr=-fr),nr(fr<=67108863);for(var br=(1<<26)%fr,_r=0,$r=this.length-1;$r>=0;$r--)_r=(br*_r+(this.words[$r]|0))%fr;return hr?-_r:_r},sr.prototype.modn=function(fr){return this.modrn(fr)},sr.prototype.idivn=function(fr){var hr=fr<0;hr&&(fr=-fr),nr(fr<=67108863);for(var br=0,_r=this.length-1;_r>=0;_r--){var $r=(this.words[_r]|0)+br*67108864;this.words[_r]=$r/fr|0,br=$r%fr}return this._strip(),hr?this.ineg():this},sr.prototype.divn=function(fr){return this.clone().idivn(fr)},sr.prototype.egcd=function(fr){nr(fr.negative===0),nr(!fr.isZero());var hr=this,br=fr.clone();hr.negative!==0?hr=hr.umod(fr):hr=hr.clone();for(var _r=new sr(1),$r=new sr(0),Er=new sr(0),vr=new sr(1),Ir=0;hr.isEven()&&br.isEven();)hr.iushrn(1),br.iushrn(1),++Ir;for(var Rr=br.clone(),Br=hr.clone();!hr.isZero();){for(var Jr=0,Wr=1;!(hr.words[0]&Wr)&&Jr<26;++Jr,Wr<<=1);if(Jr>0)for(hr.iushrn(Jr);Jr-- >0;)(_r.isOdd()||$r.isOdd())&&(_r.iadd(Rr),$r.isub(Br)),_r.iushrn(1),$r.iushrn(1);for(var qr=0,an=1;!(br.words[0]&an)&&qr<26;++qr,an<<=1);if(qr>0)for(br.iushrn(qr);qr-- >0;)(Er.isOdd()||vr.isOdd())&&(Er.iadd(Rr),vr.isub(Br)),Er.iushrn(1),vr.iushrn(1);hr.cmp(br)>=0?(hr.isub(br),_r.isub(Er),$r.isub(vr)):(br.isub(hr),Er.isub(_r),vr.isub($r))}return{a:Er,b:vr,gcd:br.iushln(Ir)}},sr.prototype._invmp=function(fr){nr(fr.negative===0),nr(!fr.isZero());var hr=this,br=fr.clone();hr.negative!==0?hr=hr.umod(fr):hr=hr.clone();for(var _r=new sr(1),$r=new sr(0),Er=br.clone();hr.cmpn(1)>0&&br.cmpn(1)>0;){for(var vr=0,Ir=1;!(hr.words[0]&Ir)&&vr<26;++vr,Ir<<=1);if(vr>0)for(hr.iushrn(vr);vr-- >0;)_r.isOdd()&&_r.iadd(Er),_r.iushrn(1);for(var Rr=0,Br=1;!(br.words[0]&Br)&&Rr<26;++Rr,Br<<=1);if(Rr>0)for(br.iushrn(Rr);Rr-- >0;)$r.isOdd()&&$r.iadd(Er),$r.iushrn(1);hr.cmp(br)>=0?(hr.isub(br),_r.isub($r)):(br.isub(hr),$r.isub(_r))}var Jr;return hr.cmpn(1)===0?Jr=_r:Jr=$r,Jr.cmpn(0)<0&&Jr.iadd(fr),Jr},sr.prototype.gcd=function(fr){if(this.isZero())return fr.abs();if(fr.isZero())return this.abs();var hr=this.clone(),br=fr.clone();hr.negative=0,br.negative=0;for(var _r=0;hr.isEven()&&br.isEven();_r++)hr.iushrn(1),br.iushrn(1);do{for(;hr.isEven();)hr.iushrn(1);for(;br.isEven();)br.iushrn(1);var $r=hr.cmp(br);if($r<0){var Er=hr;hr=br,br=Er}else if($r===0||br.cmpn(1)===0)break;hr.isub(br)}while(!0);return br.iushln(_r)},sr.prototype.invm=function(fr){return this.egcd(fr).a.umod(fr)},sr.prototype.isEven=function(){return(this.words[0]&1)===0},sr.prototype.isOdd=function(){return(this.words[0]&1)===1},sr.prototype.andln=function(fr){return this.words[0]&fr},sr.prototype.bincn=function(fr){nr(typeof fr=="number");var hr=fr%26,br=(fr-hr)/26,_r=1<<hr;if(this.length<=br)return this._expand(br+1),this.words[br]|=_r,this;for(var $r=_r,Er=br;$r!==0&&Er<this.length;Er++){var vr=this.words[Er]|0;vr+=$r,$r=vr>>>26,vr&=67108863,this.words[Er]=vr}return $r!==0&&(this.words[Er]=$r,this.length++),this},sr.prototype.isZero=function(){return this.length===1&&this.words[0]===0},sr.prototype.cmpn=function(fr){var hr=fr<0;if(this.negative!==0&&!hr)return-1;if(this.negative===0&&hr)return 1;this._strip();var br;if(this.length>1)br=1;else{hr&&(fr=-fr),nr(fr<=67108863,"Number is too big");var _r=this.words[0]|0;br=_r===fr?0:_r<fr?-1:1}return this.negative!==0?-br|0:br},sr.prototype.cmp=function(fr){if(this.negative!==0&&fr.negative===0)return-1;if(this.negative===0&&fr.negative!==0)return 1;var hr=this.ucmp(fr);return this.negative!==0?-hr|0:hr},sr.prototype.ucmp=function(fr){if(this.length>fr.length)return 1;if(this.length<fr.length)return-1;for(var hr=0,br=this.length-1;br>=0;br--){var _r=this.words[br]|0,$r=fr.words[br]|0;if(_r!==$r){_r<$r?hr=-1:_r>$r&&(hr=1);break}}return hr},sr.prototype.gtn=function(fr){return this.cmpn(fr)===1},sr.prototype.gt=function(fr){return this.cmp(fr)===1},sr.prototype.gten=function(fr){return this.cmpn(fr)>=0},sr.prototype.gte=function(fr){return this.cmp(fr)>=0},sr.prototype.ltn=function(fr){return this.cmpn(fr)===-1},sr.prototype.lt=function(fr){return this.cmp(fr)===-1},sr.prototype.lten=function(fr){return this.cmpn(fr)<=0},sr.prototype.lte=function(fr){return this.cmp(fr)<=0},sr.prototype.eqn=function(fr){return this.cmpn(fr)===0},sr.prototype.eq=function(fr){return this.cmp(fr)===0},sr.red=function(fr){return new Sr(fr)},sr.prototype.toRed=function(fr){return nr(!this.red,"Already a number in reduction context"),nr(this.negative===0,"red works only with positives"),fr.convertTo(this)._forceRed(fr)},sr.prototype.fromRed=function(){return nr(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},sr.prototype._forceRed=function(fr){return this.red=fr,this},sr.prototype.forceRed=function(fr){return nr(!this.red,"Already a number in reduction context"),this._forceRed(fr)},sr.prototype.redAdd=function(fr){return nr(this.red,"redAdd works only with red numbers"),this.red.add(this,fr)},sr.prototype.redIAdd=function(fr){return nr(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,fr)},sr.prototype.redSub=function(fr){return nr(this.red,"redSub works only with red numbers"),this.red.sub(this,fr)},sr.prototype.redISub=function(fr){return nr(this.red,"redISub works only with red numbers"),this.red.isub(this,fr)},sr.prototype.redShl=function(fr){return nr(this.red,"redShl works only with red numbers"),this.red.shl(this,fr)},sr.prototype.redMul=function(fr){return nr(this.red,"redMul works only with red numbers"),this.red._verify2(this,fr),this.red.mul(this,fr)},sr.prototype.redIMul=function(fr){return nr(this.red,"redMul works only with red numbers"),this.red._verify2(this,fr),this.red.imul(this,fr)},sr.prototype.redSqr=function(){return nr(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},sr.prototype.redISqr=function(){return nr(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},sr.prototype.redSqrt=function(){return nr(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},sr.prototype.redInvm=function(){return nr(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},sr.prototype.redNeg=function(){return nr(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},sr.prototype.redPow=function(fr){return nr(this.red&&!fr.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,fr)};var Dr={k256:null,p224:null,p192:null,p25519:null};function Hr(gr,fr){this.name=gr,this.p=new sr(fr,16),this.n=this.p.bitLength(),this.k=new sr(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}Hr.prototype._tmp=function(){var fr=new sr(null);return fr.words=new Array(Math.ceil(this.n/13)),fr},Hr.prototype.ireduce=function(fr){var hr=fr,br;do this.split(hr,this.tmp),hr=this.imulK(hr),hr=hr.iadd(this.tmp),br=hr.bitLength();while(br>this.n);var _r=br<this.n?-1:hr.ucmp(this.p);return _r===0?(hr.words[0]=0,hr.length=1):_r>0?hr.isub(this.p):hr.strip!==void 0?hr.strip():hr._strip(),hr},Hr.prototype.split=function(fr,hr){fr.iushrn(this.n,0,hr)},Hr.prototype.imulK=function(fr){return fr.imul(this.k)};function zr(){Hr.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}ir(zr,Hr),zr.prototype.split=function(fr,hr){for(var br=4194303,_r=Math.min(fr.length,9),$r=0;$r<_r;$r++)hr.words[$r]=fr.words[$r];if(hr.length=_r,fr.length<=9){fr.words[0]=0,fr.length=1;return}var Er=fr.words[9];for(hr.words[hr.length++]=Er&br,$r=10;$r<fr.length;$r++){var vr=fr.words[$r]|0;fr.words[$r-10]=(vr&br)<<4|Er>>>22,Er=vr}Er>>>=22,fr.words[$r-10]=Er,Er===0&&fr.length>10?fr.length-=10:fr.length-=9},zr.prototype.imulK=function(fr){fr.words[fr.length]=0,fr.words[fr.length+1]=0,fr.length+=2;for(var hr=0,br=0;br<fr.length;br++){var _r=fr.words[br]|0;hr+=_r*977,fr.words[br]=hr&67108863,hr=_r*64+(hr/67108864|0)}return fr.words[fr.length-1]===0&&(fr.length--,fr.words[fr.length-1]===0&&fr.length--),fr};function Cr(){Hr.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}ir(Cr,Hr);function Mr(){Hr.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}ir(Mr,Hr);function Pr(){Hr.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}ir(Pr,Hr),Pr.prototype.imulK=function(fr){for(var hr=0,br=0;br<fr.length;br++){var _r=(fr.words[br]|0)*19+hr,$r=_r&67108863;_r>>>=26,fr.words[br]=$r,hr=_r}return hr!==0&&(fr.words[fr.length++]=hr),fr},sr._prime=function(fr){if(Dr[fr])return Dr[fr];var hr;if(fr==="k256")hr=new zr;else if(fr==="p224")hr=new Cr;else if(fr==="p192")hr=new Mr;else if(fr==="p25519")hr=new Pr;else throw new Error("Unknown prime "+fr);return Dr[fr]=hr,hr};function Sr(gr){if(typeof gr=="string"){var fr=sr._prime(gr);this.m=fr.p,this.prime=fr}else nr(gr.gtn(1),"modulus must be greater than 1"),this.m=gr,this.prime=null}Sr.prototype._verify1=function(fr){nr(fr.negative===0,"red works only with positives"),nr(fr.red,"red works only with red numbers")},Sr.prototype._verify2=function(fr,hr){nr((fr.negative|hr.negative)===0,"red works only with positives"),nr(fr.red&&fr.red===hr.red,"red works only with red numbers")},Sr.prototype.imod=function(fr){return this.prime?this.prime.ireduce(fr)._forceRed(this):(ur(fr,fr.umod(this.m)._forceRed(this)),fr)},Sr.prototype.neg=function(fr){return fr.isZero()?fr.clone():this.m.sub(fr)._forceRed(this)},Sr.prototype.add=function(fr,hr){this._verify2(fr,hr);var br=fr.add(hr);return br.cmp(this.m)>=0&&br.isub(this.m),br._forceRed(this)},Sr.prototype.iadd=function(fr,hr){this._verify2(fr,hr);var br=fr.iadd(hr);return br.cmp(this.m)>=0&&br.isub(this.m),br},Sr.prototype.sub=function(fr,hr){this._verify2(fr,hr);var br=fr.sub(hr);return br.cmpn(0)<0&&br.iadd(this.m),br._forceRed(this)},Sr.prototype.isub=function(fr,hr){this._verify2(fr,hr);var br=fr.isub(hr);return br.cmpn(0)<0&&br.iadd(this.m),br},Sr.prototype.shl=function(fr,hr){return this._verify1(fr),this.imod(fr.ushln(hr))},Sr.prototype.imul=function(fr,hr){return this._verify2(fr,hr),this.imod(fr.imul(hr))},Sr.prototype.mul=function(fr,hr){return this._verify2(fr,hr),this.imod(fr.mul(hr))},Sr.prototype.isqr=function(fr){return this.imul(fr,fr.clone())},Sr.prototype.sqr=function(fr){return this.mul(fr,fr)},Sr.prototype.sqrt=function(fr){if(fr.isZero())return fr.clone();var hr=this.m.andln(3);if(nr(hr%2===1),hr===3){var br=this.m.add(new sr(1)).iushrn(2);return this.pow(fr,br)}for(var _r=this.m.subn(1),$r=0;!_r.isZero()&&_r.andln(1)===0;)$r++,_r.iushrn(1);nr(!_r.isZero());var Er=new sr(1).toRed(this),vr=Er.redNeg(),Ir=this.m.subn(1).iushrn(1),Rr=this.m.bitLength();for(Rr=new sr(2*Rr*Rr).toRed(this);this.pow(Rr,Ir).cmp(vr)!==0;)Rr.redIAdd(vr);for(var Br=this.pow(Rr,_r),Jr=this.pow(fr,_r.addn(1).iushrn(1)),Wr=this.pow(fr,_r),qr=$r;Wr.cmp(Er)!==0;){for(var an=Wr,tn=0;an.cmp(Er)!==0;tn++)an=an.redSqr();nr(tn<qr);var cn=this.pow(Br,new sr(1).iushln(qr-tn-1));Jr=Jr.redMul(cn),Br=cn.redSqr(),Wr=Wr.redMul(Br),qr=tn}return Jr},Sr.prototype.invm=function(fr){var hr=fr._invmp(this.m);return hr.negative!==0?(hr.negative=0,this.imod(hr).redNeg()):this.imod(hr)},Sr.prototype.pow=function(fr,hr){if(hr.isZero())return new sr(1).toRed(this);if(hr.cmpn(1)===0)return fr.clone();var br=4,_r=new Array(1<<br);_r[0]=new sr(1).toRed(this),_r[1]=fr;for(var $r=2;$r<_r.length;$r++)_r[$r]=this.mul(_r[$r-1],fr);var Er=_r[0],vr=0,Ir=0,Rr=hr.bitLength()%26;for(Rr===0&&(Rr=26),$r=hr.length-1;$r>=0;$r--){for(var Br=hr.words[$r],Jr=Rr-1;Jr>=0;Jr--){var Wr=Br>>Jr&1;if(Er!==_r[0]&&(Er=this.sqr(Er)),Wr===0&&vr===0){Ir=0;continue}vr<<=1,vr|=Wr,Ir++,!(Ir!==br&&($r!==0||Jr!==0))&&(Er=this.mul(Er,_r[vr]),Ir=0,vr=0)}Rr=26}return Er},Sr.prototype.convertTo=function(fr){var hr=fr.umod(this.m);return hr===fr?hr.clone():hr},Sr.prototype.convertFrom=function(fr){var hr=fr.clone();return hr.red=null,hr},sr.mont=function(fr){return new pr(fr)};function pr(gr){Sr.call(this,gr),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new sr(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}ir(pr,Sr),pr.prototype.convertTo=function(fr){return this.imod(fr.ushln(this.shift))},pr.prototype.convertFrom=function(fr){var hr=this.imod(fr.mul(this.rinv));return hr.red=null,hr},pr.prototype.imul=function(fr,hr){if(fr.isZero()||hr.isZero())return fr.words[0]=0,fr.length=1,fr;var br=fr.imul(hr),_r=br.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),$r=br.isub(_r).iushrn(this.shift),Er=$r;return $r.cmp(this.m)>=0?Er=$r.isub(this.m):$r.cmpn(0)<0&&(Er=$r.iadd(this.m)),Er._forceRed(this)},pr.prototype.mul=function(fr,hr){if(fr.isZero()||hr.isZero())return new sr(0)._forceRed(this);var br=fr.mul(hr),_r=br.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),$r=br.isub(_r).iushrn(this.shift),Er=$r;return $r.cmp(this.m)>=0?Er=$r.isub(this.m):$r.cmpn(0)<0&&(Er=$r.iadd(this.m)),Er._forceRed(this)},pr.prototype.invm=function(fr){var hr=this.imod(fr._invmp(this.m).mul(this.r2));return hr._forceRed(this)}})(tr,commonjsGlobal)})(bn);var bnExports=bn.exports;const BN=getDefaultExportFromCjs(bnExports);var assert$1={exports:{}},errors$1={},hasRequiredErrors;function requireErrors(){if(hasRequiredErrors)return errors$1;hasRequiredErrors=1;function tr(Ar){"@babel/helpers - typeof";return tr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Nr){return typeof Nr}:function(Nr){return Nr&&typeof Symbol=="function"&&Nr.constructor===Symbol&&Nr!==Symbol.prototype?"symbol":typeof Nr},tr(Ar)}function er(Ar,Nr,Ur){return Object.defineProperty(Ar,"prototype",{writable:!1}),Ar}function rr(Ar,Nr){if(!(Ar instanceof Nr))throw new TypeError("Cannot call a class as a function")}function nr(Ar,Nr){if(typeof Nr!="function"&&Nr!==null)throw new TypeError("Super expression must either be null or a function");Ar.prototype=Object.create(Nr&&Nr.prototype,{constructor:{value:Ar,writable:!0,configurable:!0}}),Object.defineProperty(Ar,"prototype",{writable:!1}),Nr&&ir(Ar,Nr)}function ir(Ar,Nr){return ir=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(Dr,Hr){return Dr.__proto__=Hr,Dr},ir(Ar,Nr)}function sr(Ar){var Nr=cr();return function(){var Dr=lr(Ar),Hr;if(Nr){var zr=lr(this).constructor;Hr=Reflect.construct(Dr,arguments,zr)}else Hr=Dr.apply(this,arguments);return or(this,Hr)}}function or(Ar,Nr){if(Nr&&(tr(Nr)==="object"||typeof Nr=="function"))return Nr;if(Nr!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ar(Ar)}function ar(Ar){if(Ar===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Ar}function cr(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function lr(Ar){return lr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(Ur){return Ur.__proto__||Object.getPrototypeOf(Ur)},lr(Ar)}var ur={},dr,yr;function mr(Ar,Nr,Ur){Ur||(Ur=Error);function Dr(zr,Cr,Mr){return typeof Nr=="string"?Nr:Nr(zr,Cr,Mr)}var Hr=function(zr){nr(Mr,zr);var Cr=sr(Mr);function Mr(Pr,Sr,pr){var gr;return rr(this,Mr),gr=Cr.call(this,Dr(Pr,Sr,pr)),gr.code=Ar,gr}return er(Mr)}(Ur);ur[Ar]=Hr}function wr(Ar,Nr){if(Array.isArray(Ar)){var Ur=Ar.length;return Ar=Ar.map(function(Dr){return String(Dr)}),Ur>2?"one of ".concat(Nr," ").concat(Ar.slice(0,Ur-1).join(", "),", or ")+Ar[Ur-1]:Ur===2?"one of ".concat(Nr," ").concat(Ar[0]," or ").concat(Ar[1]):"of ".concat(Nr," ").concat(Ar[0])}else return"of ".concat(Nr," ").concat(String(Ar))}function xr(Ar,Nr,Ur){return Ar.substr(0,Nr.length)===Nr}function Or(Ar,Nr,Ur){return(Ur===void 0||Ur>Ar.length)&&(Ur=Ar.length),Ar.substring(Ur-Nr.length,Ur)===Nr}function Tr(Ar,Nr,Ur){return typeof Ur!="number"&&(Ur=0),Ur+Nr.length>Ar.length?!1:Ar.indexOf(Nr,Ur)!==-1}return mr("ERR_AMBIGUOUS_ARGUMENT",'The "%s" argument is ambiguous. %s',TypeError),mr("ERR_INVALID_ARG_TYPE",function(Ar,Nr,Ur){dr===void 0&&(dr=requireAssert()),dr(typeof Ar=="string","'name' must be a string");var Dr;typeof Nr=="string"&&xr(Nr,"not ")?(Dr="must not be",Nr=Nr.replace(/^not /,"")):Dr="must be";var Hr;if(Or(Ar," argument"))Hr="The ".concat(Ar," ").concat(Dr," ").concat(wr(Nr,"type"));else{var zr=Tr(Ar,".")?"property":"argument";Hr='The "'.concat(Ar,'" ').concat(zr," ").concat(Dr," ").concat(wr(Nr,"type"))}return Hr+=". Received type ".concat(tr(Ur)),Hr},TypeError),mr("ERR_INVALID_ARG_VALUE",function(Ar,Nr){var Ur=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"is invalid";yr===void 0&&(yr=util$7);var Dr=yr.inspect(Nr);return Dr.length>128&&(Dr="".concat(Dr.slice(0,128),"...")),"The argument '".concat(Ar,"' ").concat(Ur,". Received ").concat(Dr)},TypeError),mr("ERR_INVALID_RETURN_VALUE",function(Ar,Nr,Ur){var Dr;return Ur&&Ur.constructor&&Ur.constructor.name?Dr="instance of ".concat(Ur.constructor.name):Dr="type ".concat(tr(Ur)),"Expected ".concat(Ar,' to be returned from the "').concat(Nr,'"')+" function but got ".concat(Dr,".")},TypeError),mr("ERR_MISSING_ARGS",function(){for(var Ar=arguments.length,Nr=new Array(Ar),Ur=0;Ur<Ar;Ur++)Nr[Ur]=arguments[Ur];dr===void 0&&(dr=requireAssert()),dr(Nr.length>0,"At least one arg needs to be specified");var Dr="The ",Hr=Nr.length;switch(Nr=Nr.map(function(zr){return'"'.concat(zr,'"')}),Hr){case 1:Dr+="".concat(Nr[0]," argument");break;case 2:Dr+="".concat(Nr[0]," and ").concat(Nr[1]," arguments");break;default:Dr+=Nr.slice(0,Hr-1).join(", "),Dr+=", and ".concat(Nr[Hr-1]," arguments");break}return"".concat(Dr," must be specified")},TypeError),errors$1.codes=ur,errors$1}var assertion_error,hasRequiredAssertion_error;function requireAssertion_error(){if(hasRequiredAssertion_error)return assertion_error;hasRequiredAssertion_error=1;function tr(Er,vr){var Ir=Object.keys(Er);if(Object.getOwnPropertySymbols){var Rr=Object.getOwnPropertySymbols(Er);vr&&(Rr=Rr.filter(function(Br){return Object.getOwnPropertyDescriptor(Er,Br).enumerable})),Ir.push.apply(Ir,Rr)}return Ir}function er(Er){for(var vr=1;vr<arguments.length;vr++){var Ir=arguments[vr]!=null?arguments[vr]:{};vr%2?tr(Object(Ir),!0).forEach(function(Rr){rr(Er,Rr,Ir[Rr])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Er,Object.getOwnPropertyDescriptors(Ir)):tr(Object(Ir)).forEach(function(Rr){Object.defineProperty(Er,Rr,Object.getOwnPropertyDescriptor(Ir,Rr))})}return Er}function rr(Er,vr,Ir){return vr=or(vr),vr in Er?Object.defineProperty(Er,vr,{value:Ir,enumerable:!0,configurable:!0,writable:!0}):Er[vr]=Ir,Er}function nr(Er,vr){if(!(Er instanceof vr))throw new TypeError("Cannot call a class as a function")}function ir(Er,vr){for(var Ir=0;Ir<vr.length;Ir++){var Rr=vr[Ir];Rr.enumerable=Rr.enumerable||!1,Rr.configurable=!0,"value"in Rr&&(Rr.writable=!0),Object.defineProperty(Er,or(Rr.key),Rr)}}function sr(Er,vr,Ir){return vr&&ir(Er.prototype,vr),Object.defineProperty(Er,"prototype",{writable:!1}),Er}function or(Er){var vr=ar(Er,"string");return Ar(vr)==="symbol"?vr:String(vr)}function ar(Er,vr){if(Ar(Er)!=="object"||Er===null)return Er;var Ir=Er[Symbol.toPrimitive];if(Ir!==void 0){var Rr=Ir.call(Er,vr||"default");if(Ar(Rr)!=="object")return Rr;throw new TypeError("@@toPrimitive must return a primitive value.")}return(vr==="string"?String:Number)(Er)}function cr(Er,vr){if(typeof vr!="function"&&vr!==null)throw new TypeError("Super expression must either be null or a function");Er.prototype=Object.create(vr&&vr.prototype,{constructor:{value:Er,writable:!0,configurable:!0}}),Object.defineProperty(Er,"prototype",{writable:!1}),vr&&Or(Er,vr)}function lr(Er){var vr=wr();return function(){var Rr=Tr(Er),Br;if(vr){var Jr=Tr(this).constructor;Br=Reflect.construct(Rr,arguments,Jr)}else Br=Rr.apply(this,arguments);return ur(this,Br)}}function ur(Er,vr){if(vr&&(Ar(vr)==="object"||typeof vr=="function"))return vr;if(vr!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return dr(Er)}function dr(Er){if(Er===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Er}function yr(Er){var vr=typeof Map=="function"?new Map:void 0;return yr=function(Rr){if(Rr===null||!xr(Rr))return Rr;if(typeof Rr!="function")throw new TypeError("Super expression must either be null or a function");if(typeof vr<"u"){if(vr.has(Rr))return vr.get(Rr);vr.set(Rr,Br)}function Br(){return mr(Rr,arguments,Tr(this).constructor)}return Br.prototype=Object.create(Rr.prototype,{constructor:{value:Br,enumerable:!1,writable:!0,configurable:!0}}),Or(Br,Rr)},yr(Er)}function mr(Er,vr,Ir){return wr()?mr=Reflect.construct.bind():mr=function(Br,Jr,Wr){var qr=[null];qr.push.apply(qr,Jr);var an=Function.bind.apply(Br,qr),tn=new an;return Wr&&Or(tn,Wr.prototype),tn},mr.apply(null,arguments)}function wr(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function xr(Er){return Function.toString.call(Er).indexOf("[native code]")!==-1}function Or(Er,vr){return Or=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(Rr,Br){return Rr.__proto__=Br,Rr},Or(Er,vr)}function Tr(Er){return Tr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(Ir){return Ir.__proto__||Object.getPrototypeOf(Ir)},Tr(Er)}function Ar(Er){"@babel/helpers - typeof";return Ar=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(vr){return typeof vr}:function(vr){return vr&&typeof Symbol=="function"&&vr.constructor===Symbol&&vr!==Symbol.prototype?"symbol":typeof vr},Ar(Er)}var Nr=util$7,Ur=Nr.inspect,Dr=requireErrors(),Hr=Dr.codes.ERR_INVALID_ARG_TYPE;function zr(Er,vr,Ir){return(Ir===void 0||Ir>Er.length)&&(Ir=Er.length),Er.substring(Ir-vr.length,Ir)===vr}function Cr(Er,vr){if(vr=Math.floor(vr),Er.length==0||vr==0)return"";var Ir=Er.length*vr;for(vr=Math.floor(Math.log(vr)/Math.log(2));vr;)Er+=Er,vr--;return Er+=Er.substring(0,Ir-Er.length),Er}var Mr="",Pr="",Sr="",pr="",gr={deepStrictEqual:"Expected values to be strictly deep-equal:",strictEqual:"Expected values to be strictly equal:",strictEqualObject:'Expected "actual" to be reference-equal to "expected":',deepEqual:"Expected values to be loosely deep-equal:",equal:"Expected values to be loosely equal:",notDeepStrictEqual:'Expected "actual" not to be strictly deep-equal to:',notStrictEqual:'Expected "actual" to be strictly unequal to:',notStrictEqualObject:'Expected "actual" not to be reference-equal to "expected":',notDeepEqual:'Expected "actual" not to be loosely deep-equal to:',notEqual:'Expected "actual" to be loosely unequal to:',notIdentical:"Values identical but not reference-equal:"},fr=10;function hr(Er){var vr=Object.keys(Er),Ir=Object.create(Object.getPrototypeOf(Er));return vr.forEach(function(Rr){Ir[Rr]=Er[Rr]}),Object.defineProperty(Ir,"message",{value:Er.message}),Ir}function br(Er){return Ur(Er,{compact:!1,customInspect:!1,depth:1e3,maxArrayLength:1/0,showHidden:!1,breakLength:1/0,showProxy:!1,sorted:!0,getters:!0})}function _r(Er,vr,Ir){var Rr="",Br="",Jr=0,Wr="",qr=!1,an=br(Er),tn=an.split(`
`),cn=br(vr).split(`
`),dn=0,Zr="";if(Ir==="strictEqual"&&Ar(Er)==="object"&&Ar(vr)==="object"&&Er!==null&&vr!==null&&(Ir="strictEqualObject"),tn.length===1&&cn.length===1&&tn[0]!==cn[0]){var Yr=tn[0].length+cn[0].length;if(Yr<=fr){if((Ar(Er)!=="object"||Er===null)&&(Ar(vr)!=="object"||vr===null)&&(Er!==0||vr!==0))return"".concat(gr[Ir],`

`)+"".concat(tn[0]," !== ").concat(cn[0],`
`)}else if(Ir!=="strictEqualObject"){var Qr=process.stderr&&process.stderr.isTTY?process.stderr.columns:80;if(Yr<Qr){for(;tn[0][dn]===cn[0][dn];)dn++;dn>2&&(Zr=`
  `.concat(Cr(" ",dn),"^"),dn=0)}}}for(var un=tn[tn.length-1],gn=cn[cn.length-1];un===gn&&(dn++<2?Wr=`
  `.concat(un).concat(Wr):Rr=un,tn.pop(),cn.pop(),!(tn.length===0||cn.length===0));)un=tn[tn.length-1],gn=cn[cn.length-1];var Rn=Math.max(tn.length,cn.length);if(Rn===0){var Pn=an.split(`
`);if(Pn.length>30)for(Pn[26]="".concat(Mr,"...").concat(pr);Pn.length>27;)Pn.pop();return"".concat(gr.notIdentical,`

`).concat(Pn.join(`
`),`
`)}dn>3&&(Wr=`
`.concat(Mr,"...").concat(pr).concat(Wr),qr=!0),Rr!==""&&(Wr=`
  `.concat(Rr).concat(Wr),Rr="");var Cn=0,Sn=gr[Ir]+`
`.concat(Pr,"+ actual").concat(pr," ").concat(Sr,"- expected").concat(pr),zn=" ".concat(Mr,"...").concat(pr," Lines skipped");for(dn=0;dn<Rn;dn++){var Zn=dn-Jr;if(tn.length<dn+1)Zn>1&&dn>2&&(Zn>4?(Br+=`
`.concat(Mr,"...").concat(pr),qr=!0):Zn>3&&(Br+=`
  `.concat(cn[dn-2]),Cn++),Br+=`
  `.concat(cn[dn-1]),Cn++),Jr=dn,Rr+=`
`.concat(Sr,"-").concat(pr," ").concat(cn[dn]),Cn++;else if(cn.length<dn+1)Zn>1&&dn>2&&(Zn>4?(Br+=`
`.concat(Mr,"...").concat(pr),qr=!0):Zn>3&&(Br+=`
  `.concat(tn[dn-2]),Cn++),Br+=`
  `.concat(tn[dn-1]),Cn++),Jr=dn,Br+=`
`.concat(Pr,"+").concat(pr," ").concat(tn[dn]),Cn++;else{var Kn=cn[dn],eo=tn[dn],vn=eo!==Kn&&(!zr(eo,",")||eo.slice(0,-1)!==Kn);vn&&zr(Kn,",")&&Kn.slice(0,-1)===eo&&(vn=!1,eo+=","),vn?(Zn>1&&dn>2&&(Zn>4?(Br+=`
`.concat(Mr,"...").concat(pr),qr=!0):Zn>3&&(Br+=`
  `.concat(tn[dn-2]),Cn++),Br+=`
  `.concat(tn[dn-1]),Cn++),Jr=dn,Br+=`
`.concat(Pr,"+").concat(pr," ").concat(eo),Rr+=`
`.concat(Sr,"-").concat(pr," ").concat(Kn),Cn+=2):(Br+=Rr,Rr="",(Zn===1||dn===0)&&(Br+=`
  `.concat(eo),Cn++))}if(Cn>20&&dn<Rn-2)return"".concat(Sn).concat(zn,`
`).concat(Br,`
`).concat(Mr,"...").concat(pr).concat(Rr,`
`)+"".concat(Mr,"...").concat(pr)}return"".concat(Sn).concat(qr?zn:"",`
`).concat(Br).concat(Rr).concat(Wr).concat(Zr)}var $r=function(Er,vr){cr(Rr,Er);var Ir=lr(Rr);function Rr(Br){var Jr;if(nr(this,Rr),Ar(Br)!=="object"||Br===null)throw new Hr("options","Object",Br);var Wr=Br.message,qr=Br.operator,an=Br.stackStartFn,tn=Br.actual,cn=Br.expected,dn=Error.stackTraceLimit;if(Error.stackTraceLimit=0,Wr!=null)Jr=Ir.call(this,String(Wr));else if(process.stderr&&process.stderr.isTTY&&(process.stderr&&process.stderr.getColorDepth&&process.stderr.getColorDepth()!==1?(Mr="\x1B[34m",Pr="\x1B[32m",pr="\x1B[39m",Sr="\x1B[31m"):(Mr="",Pr="",pr="",Sr="")),Ar(tn)==="object"&&tn!==null&&Ar(cn)==="object"&&cn!==null&&"stack"in tn&&tn instanceof Error&&"stack"in cn&&cn instanceof Error&&(tn=hr(tn),cn=hr(cn)),qr==="deepStrictEqual"||qr==="strictEqual")Jr=Ir.call(this,_r(tn,cn,qr));else if(qr==="notDeepStrictEqual"||qr==="notStrictEqual"){var Zr=gr[qr],Yr=br(tn).split(`
`);if(qr==="notStrictEqual"&&Ar(tn)==="object"&&tn!==null&&(Zr=gr.notStrictEqualObject),Yr.length>30)for(Yr[26]="".concat(Mr,"...").concat(pr);Yr.length>27;)Yr.pop();Yr.length===1?Jr=Ir.call(this,"".concat(Zr," ").concat(Yr[0])):Jr=Ir.call(this,"".concat(Zr,`

`).concat(Yr.join(`
`),`
`))}else{var Qr=br(tn),un="",gn=gr[qr];qr==="notDeepEqual"||qr==="notEqual"?(Qr="".concat(gr[qr],`

`).concat(Qr),Qr.length>1024&&(Qr="".concat(Qr.slice(0,1021),"..."))):(un="".concat(br(cn)),Qr.length>512&&(Qr="".concat(Qr.slice(0,509),"...")),un.length>512&&(un="".concat(un.slice(0,509),"...")),qr==="deepEqual"||qr==="equal"?Qr="".concat(gn,`

`).concat(Qr,`

should equal

`):un=" ".concat(qr," ").concat(un)),Jr=Ir.call(this,"".concat(Qr).concat(un))}return Error.stackTraceLimit=dn,Jr.generatedMessage=!Wr,Object.defineProperty(dr(Jr),"name",{value:"AssertionError [ERR_ASSERTION]",enumerable:!1,writable:!0,configurable:!0}),Jr.code="ERR_ASSERTION",Jr.actual=tn,Jr.expected=cn,Jr.operator=qr,Error.captureStackTrace&&Error.captureStackTrace(dr(Jr),an),Jr.stack,Jr.name="AssertionError",ur(Jr)}return sr(Rr,[{key:"toString",value:function(){return"".concat(this.name," [").concat(this.code,"]: ").concat(this.message)}},{key:vr,value:function(Jr,Wr){return Ur(this,er(er({},Wr),{},{customInspect:!1,depth:0}))}}]),Rr}(yr(Error),Ur.custom);return assertion_error=$r,assertion_error}var objectKeys=objectKeys$1,hasSymbols=shams$1(),callBound=callBound$4,toObject=Object,$push=callBound("Array.prototype.push"),$propIsEnumerable=callBound("Object.prototype.propertyIsEnumerable"),originalGetSymbols=hasSymbols?Object.getOwnPropertySymbols:null,implementation$4=function tr(er,rr){if(er==null)throw new TypeError("target must be an object");var nr=toObject(er);if(arguments.length===1)return nr;for(var ir=1;ir<arguments.length;++ir){var sr=toObject(arguments[ir]),or=objectKeys(sr),ar=hasSymbols&&(Object.getOwnPropertySymbols||originalGetSymbols);if(ar)for(var cr=ar(sr),lr=0;lr<cr.length;++lr){var ur=cr[lr];$propIsEnumerable(sr,ur)&&$push(or,ur)}for(var dr=0;dr<or.length;++dr){var yr=or[dr];if($propIsEnumerable(sr,yr)){var mr=sr[yr];nr[yr]=mr}}}return nr},implementation$3=implementation$4,lacksProperEnumerationOrder=function(){if(!Object.assign)return!1;for(var tr="abcdefghijklmnopqrst",er=tr.split(""),rr={},nr=0;nr<er.length;++nr)rr[er[nr]]=er[nr];var ir=Object.assign({},rr),sr="";for(var or in ir)sr+=or;return tr!==sr},assignHasPendingExceptions=function(){if(!Object.assign||!Object.preventExtensions)return!1;var tr=Object.preventExtensions({1:2});try{Object.assign(tr,"xy")}catch{return tr[1]==="y"}return!1},polyfill$2=function tr(){return!Object.assign||lacksProperEnumerationOrder()||assignHasPendingExceptions()?implementation$3:Object.assign},numberIsNaN=function(tr){return tr!==tr},implementation$2=function tr(er,rr){return er===0&&rr===0?1/er===1/rr:!!(er===rr||numberIsNaN(er)&&numberIsNaN(rr))},implementation$1=implementation$2,polyfill$1=function tr(){return typeof Object.is=="function"?Object.is:implementation$1},defineProperties_1,hasRequiredDefineProperties;function requireDefineProperties(){if(hasRequiredDefineProperties)return defineProperties_1;hasRequiredDefineProperties=1;var tr=objectKeys$1,er=typeof Symbol=="function"&&typeof Symbol("foo")=="symbol",rr=Object.prototype.toString,nr=Array.prototype.concat,ir=defineDataProperty,sr=function(lr){return typeof lr=="function"&&rr.call(lr)==="[object Function]"},or=hasPropertyDescriptors_1(),ar=function(lr,ur,dr,yr){if(ur in lr){if(yr===!0){if(lr[ur]===dr)return}else if(!sr(yr)||!yr())return}or?ir(lr,ur,dr,!0):ir(lr,ur,dr)},cr=function(lr,ur){var dr=arguments.length>2?arguments[2]:{},yr=tr(ur);er&&(yr=nr.call(yr,Object.getOwnPropertySymbols(ur)));for(var mr=0;mr<yr.length;mr+=1)ar(lr,yr[mr],ur[yr[mr]],dr[yr[mr]])};return cr.supportsDescriptors=!!or,defineProperties_1=cr,defineProperties_1}var shim$1,hasRequiredShim$1;function requireShim$1(){if(hasRequiredShim$1)return shim$1;hasRequiredShim$1=1;var tr=polyfill$1,er=requireDefineProperties();return shim$1=function(){var nr=tr();return er(Object,{is:nr},{is:function(){return Object.is!==nr}}),nr},shim$1}var objectIs,hasRequiredObjectIs;function requireObjectIs(){if(hasRequiredObjectIs)return objectIs;hasRequiredObjectIs=1;var tr=requireDefineProperties(),er=callBindExports,rr=implementation$2,nr=polyfill$1,ir=requireShim$1(),sr=er(nr(),Object);return tr(sr,{getPolyfill:nr,implementation:rr,shim:ir}),objectIs=sr,objectIs}var implementation,hasRequiredImplementation;function requireImplementation(){return hasRequiredImplementation||(hasRequiredImplementation=1,implementation=function(er){return er!==er}),implementation}var polyfill,hasRequiredPolyfill;function requirePolyfill(){if(hasRequiredPolyfill)return polyfill;hasRequiredPolyfill=1;var tr=requireImplementation();return polyfill=function(){return Number.isNaN&&Number.isNaN(NaN)&&!Number.isNaN("a")?Number.isNaN:tr},polyfill}var shim,hasRequiredShim;function requireShim(){if(hasRequiredShim)return shim;hasRequiredShim=1;var tr=requireDefineProperties(),er=requirePolyfill();return shim=function(){var nr=er();return tr(Number,{isNaN:nr},{isNaN:function(){return Number.isNaN!==nr}}),nr},shim}var isNan,hasRequiredIsNan;function requireIsNan(){if(hasRequiredIsNan)return isNan;hasRequiredIsNan=1;var tr=callBindExports,er=requireDefineProperties(),rr=requireImplementation(),nr=requirePolyfill(),ir=requireShim(),sr=tr(nr(),Number);return er(sr,{getPolyfill:nr,implementation:rr,shim:ir}),isNan=sr,isNan}var comparisons,hasRequiredComparisons;function requireComparisons(){if(hasRequiredComparisons)return comparisons;hasRequiredComparisons=1;function tr(vn,xn){return sr(vn)||ir(vn,xn)||rr(vn,xn)||er()}function er(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function rr(vn,xn){if(vn){if(typeof vn=="string")return nr(vn,xn);var Dn=Object.prototype.toString.call(vn).slice(8,-1);if(Dn==="Object"&&vn.constructor&&(Dn=vn.constructor.name),Dn==="Map"||Dn==="Set")return Array.from(vn);if(Dn==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Dn))return nr(vn,xn)}}function nr(vn,xn){(xn==null||xn>vn.length)&&(xn=vn.length);for(var Dn=0,Xr=new Array(xn);Dn<xn;Dn++)Xr[Dn]=vn[Dn];return Xr}function ir(vn,xn){var Dn=vn==null?null:typeof Symbol<"u"&&vn[Symbol.iterator]||vn["@@iterator"];if(Dn!=null){var Xr,Lr,Fr,ln,mn=[],_n=!0,An=!1;try{if(Fr=(Dn=Dn.call(vn)).next,xn!==0)for(;!(_n=(Xr=Fr.call(Dn)).done)&&(mn.push(Xr.value),mn.length!==xn);_n=!0);}catch(Gn){An=!0,Lr=Gn}finally{try{if(!_n&&Dn.return!=null&&(ln=Dn.return(),Object(ln)!==ln))return}finally{if(An)throw Lr}}return mn}}function sr(vn){if(Array.isArray(vn))return vn}function or(vn){"@babel/helpers - typeof";return or=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(xn){return typeof xn}:function(xn){return xn&&typeof Symbol=="function"&&xn.constructor===Symbol&&xn!==Symbol.prototype?"symbol":typeof xn},or(vn)}var ar=/a/g.flags!==void 0,cr=function(xn){var Dn=[];return xn.forEach(function(Xr){return Dn.push(Xr)}),Dn},lr=function(xn){var Dn=[];return xn.forEach(function(Xr,Lr){return Dn.push([Lr,Xr])}),Dn},ur=Object.is?Object.is:requireObjectIs(),dr=Object.getOwnPropertySymbols?Object.getOwnPropertySymbols:function(){return[]},yr=Number.isNaN?Number.isNaN:requireIsNan();function mr(vn){return vn.call.bind(vn)}var wr=mr(Object.prototype.hasOwnProperty),xr=mr(Object.prototype.propertyIsEnumerable),Or=mr(Object.prototype.toString),Tr=util$7.types,Ar=Tr.isAnyArrayBuffer,Nr=Tr.isArrayBufferView,Ur=Tr.isDate,Dr=Tr.isMap,Hr=Tr.isRegExp,zr=Tr.isSet,Cr=Tr.isNativeError,Mr=Tr.isBoxedPrimitive,Pr=Tr.isNumberObject,Sr=Tr.isStringObject,pr=Tr.isBooleanObject,gr=Tr.isBigIntObject,fr=Tr.isSymbolObject,hr=Tr.isFloat32Array,br=Tr.isFloat64Array;function _r(vn){if(vn.length===0||vn.length>10)return!0;for(var xn=0;xn<vn.length;xn++){var Dn=vn.charCodeAt(xn);if(Dn<48||Dn>57)return!0}return vn.length===10&&vn>=Math.pow(2,32)}function $r(vn){return Object.keys(vn).filter(_r).concat(dr(vn).filter(Object.prototype.propertyIsEnumerable.bind(vn)))}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */function Er(vn,xn){if(vn===xn)return 0;for(var Dn=vn.length,Xr=xn.length,Lr=0,Fr=Math.min(Dn,Xr);Lr<Fr;++Lr)if(vn[Lr]!==xn[Lr]){Dn=vn[Lr],Xr=xn[Lr];break}return Dn<Xr?-1:Xr<Dn?1:0}var vr=!0,Ir=!1,Rr=0,Br=1,Jr=2,Wr=3;function qr(vn,xn){return ar?vn.source===xn.source&&vn.flags===xn.flags:RegExp.prototype.toString.call(vn)===RegExp.prototype.toString.call(xn)}function an(vn,xn){if(vn.byteLength!==xn.byteLength)return!1;for(var Dn=0;Dn<vn.byteLength;Dn++)if(vn[Dn]!==xn[Dn])return!1;return!0}function tn(vn,xn){return vn.byteLength!==xn.byteLength?!1:Er(new Uint8Array(vn.buffer,vn.byteOffset,vn.byteLength),new Uint8Array(xn.buffer,xn.byteOffset,xn.byteLength))===0}function cn(vn,xn){return vn.byteLength===xn.byteLength&&Er(new Uint8Array(vn),new Uint8Array(xn))===0}function dn(vn,xn){return Pr(vn)?Pr(xn)&&ur(Number.prototype.valueOf.call(vn),Number.prototype.valueOf.call(xn)):Sr(vn)?Sr(xn)&&String.prototype.valueOf.call(vn)===String.prototype.valueOf.call(xn):pr(vn)?pr(xn)&&Boolean.prototype.valueOf.call(vn)===Boolean.prototype.valueOf.call(xn):gr(vn)?gr(xn)&&BigInt.prototype.valueOf.call(vn)===BigInt.prototype.valueOf.call(xn):fr(xn)&&Symbol.prototype.valueOf.call(vn)===Symbol.prototype.valueOf.call(xn)}function Zr(vn,xn,Dn,Xr){if(vn===xn)return vn!==0?!0:Dn?ur(vn,xn):!0;if(Dn){if(or(vn)!=="object")return typeof vn=="number"&&yr(vn)&&yr(xn);if(or(xn)!=="object"||vn===null||xn===null||Object.getPrototypeOf(vn)!==Object.getPrototypeOf(xn))return!1}else{if(vn===null||or(vn)!=="object")return xn===null||or(xn)!=="object"?vn==xn:!1;if(xn===null||or(xn)!=="object")return!1}var Lr=Or(vn),Fr=Or(xn);if(Lr!==Fr)return!1;if(Array.isArray(vn)){if(vn.length!==xn.length)return!1;var ln=$r(vn),mn=$r(xn);return ln.length!==mn.length?!1:Qr(vn,xn,Dn,Xr,Br,ln)}if(Lr==="[object Object]"&&(!Dr(vn)&&Dr(xn)||!zr(vn)&&zr(xn)))return!1;if(Ur(vn)){if(!Ur(xn)||Date.prototype.getTime.call(vn)!==Date.prototype.getTime.call(xn))return!1}else if(Hr(vn)){if(!Hr(xn)||!qr(vn,xn))return!1}else if(Cr(vn)||vn instanceof Error){if(vn.message!==xn.message||vn.name!==xn.name)return!1}else if(Nr(vn)){if(!Dn&&(hr(vn)||br(vn))){if(!an(vn,xn))return!1}else if(!tn(vn,xn))return!1;var _n=$r(vn),An=$r(xn);return _n.length!==An.length?!1:Qr(vn,xn,Dn,Xr,Rr,_n)}else{if(zr(vn))return!zr(xn)||vn.size!==xn.size?!1:Qr(vn,xn,Dn,Xr,Jr);if(Dr(vn))return!Dr(xn)||vn.size!==xn.size?!1:Qr(vn,xn,Dn,Xr,Wr);if(Ar(vn)){if(!cn(vn,xn))return!1}else if(Mr(vn)&&!dn(vn,xn))return!1}return Qr(vn,xn,Dn,Xr,Rr)}function Yr(vn,xn){return xn.filter(function(Dn){return xr(vn,Dn)})}function Qr(vn,xn,Dn,Xr,Lr,Fr){if(arguments.length===5){Fr=Object.keys(vn);var ln=Object.keys(xn);if(Fr.length!==ln.length)return!1}for(var mn=0;mn<Fr.length;mn++)if(!wr(xn,Fr[mn]))return!1;if(Dn&&arguments.length===5){var _n=dr(vn);if(_n.length!==0){var An=0;for(mn=0;mn<_n.length;mn++){var Gn=_n[mn];if(xr(vn,Gn)){if(!xr(xn,Gn))return!1;Fr.push(Gn),An++}else if(xr(xn,Gn))return!1}var Xs=dr(xn);if(_n.length!==Xs.length&&Yr(xn,Xs).length!==An)return!1}else{var Jn=dr(xn);if(Jn.length!==0&&Yr(xn,Jn).length!==0)return!1}}if(Fr.length===0&&(Lr===Rr||Lr===Br&&vn.length===0||vn.size===0))return!0;if(Xr===void 0)Xr={val1:new Map,val2:new Map,position:0};else{var no=Xr.val1.get(vn);if(no!==void 0){var zs=Xr.val2.get(xn);if(zs!==void 0)return no===zs}Xr.position++}Xr.val1.set(vn,Xr.position),Xr.val2.set(xn,Xr.position);var to=Zn(vn,xn,Dn,Fr,Xr,Lr);return Xr.val1.delete(vn),Xr.val2.delete(xn),to}function un(vn,xn,Dn,Xr){for(var Lr=cr(vn),Fr=0;Fr<Lr.length;Fr++){var ln=Lr[Fr];if(Zr(xn,ln,Dn,Xr))return vn.delete(ln),!0}return!1}function gn(vn){switch(or(vn)){case"undefined":return null;case"object":return;case"symbol":return!1;case"string":vn=+vn;case"number":if(yr(vn))return!1}return!0}function Rn(vn,xn,Dn){var Xr=gn(Dn);return Xr??(xn.has(Xr)&&!vn.has(Xr))}function Pn(vn,xn,Dn,Xr,Lr){var Fr=gn(Dn);if(Fr!=null)return Fr;var ln=xn.get(Fr);return ln===void 0&&!xn.has(Fr)||!Zr(Xr,ln,!1,Lr)?!1:!vn.has(Fr)&&Zr(Xr,ln,!1,Lr)}function Cn(vn,xn,Dn,Xr){for(var Lr=null,Fr=cr(vn),ln=0;ln<Fr.length;ln++){var mn=Fr[ln];if(or(mn)==="object"&&mn!==null)Lr===null&&(Lr=new Set),Lr.add(mn);else if(!xn.has(mn)){if(Dn||!Rn(vn,xn,mn))return!1;Lr===null&&(Lr=new Set),Lr.add(mn)}}if(Lr!==null){for(var _n=cr(xn),An=0;An<_n.length;An++){var Gn=_n[An];if(or(Gn)==="object"&&Gn!==null){if(!un(Lr,Gn,Dn,Xr))return!1}else if(!Dn&&!vn.has(Gn)&&!un(Lr,Gn,Dn,Xr))return!1}return Lr.size===0}return!0}function Sn(vn,xn,Dn,Xr,Lr,Fr){for(var ln=cr(vn),mn=0;mn<ln.length;mn++){var _n=ln[mn];if(Zr(Dn,_n,Lr,Fr)&&Zr(Xr,xn.get(_n),Lr,Fr))return vn.delete(_n),!0}return!1}function zn(vn,xn,Dn,Xr){for(var Lr=null,Fr=lr(vn),ln=0;ln<Fr.length;ln++){var mn=tr(Fr[ln],2),_n=mn[0],An=mn[1];if(or(_n)==="object"&&_n!==null)Lr===null&&(Lr=new Set),Lr.add(_n);else{var Gn=xn.get(_n);if(Gn===void 0&&!xn.has(_n)||!Zr(An,Gn,Dn,Xr)){if(Dn||!Pn(vn,xn,_n,An,Xr))return!1;Lr===null&&(Lr=new Set),Lr.add(_n)}}}if(Lr!==null){for(var Xs=lr(xn),Jn=0;Jn<Xs.length;Jn++){var no=tr(Xs[Jn],2),zs=no[0],to=no[1];if(or(zs)==="object"&&zs!==null){if(!Sn(Lr,vn,zs,to,Dn,Xr))return!1}else if(!Dn&&(!vn.has(zs)||!Zr(vn.get(zs),to,!1,Xr))&&!Sn(Lr,vn,zs,to,!1,Xr))return!1}return Lr.size===0}return!0}function Zn(vn,xn,Dn,Xr,Lr,Fr){var ln=0;if(Fr===Jr){if(!Cn(vn,xn,Dn,Lr))return!1}else if(Fr===Wr){if(!zn(vn,xn,Dn,Lr))return!1}else if(Fr===Br)for(;ln<vn.length;ln++)if(wr(vn,ln)){if(!wr(xn,ln)||!Zr(vn[ln],xn[ln],Dn,Lr))return!1}else{if(wr(xn,ln))return!1;for(var mn=Object.keys(vn);ln<mn.length;ln++){var _n=mn[ln];if(!wr(xn,_n)||!Zr(vn[_n],xn[_n],Dn,Lr))return!1}return mn.length===Object.keys(xn).length}for(ln=0;ln<Xr.length;ln++){var An=Xr[ln];if(!Zr(vn[An],xn[An],Dn,Lr))return!1}return!0}function Kn(vn,xn){return Zr(vn,xn,Ir)}function eo(vn,xn){return Zr(vn,xn,vr)}return comparisons={isDeepEqual:Kn,isDeepStrictEqual:eo},comparisons}var hasRequiredAssert;function requireAssert(){if(hasRequiredAssert)return assert$1.exports;hasRequiredAssert=1;function tr(Jr){"@babel/helpers - typeof";return tr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Wr){return typeof Wr}:function(Wr){return Wr&&typeof Symbol=="function"&&Wr.constructor===Symbol&&Wr!==Symbol.prototype?"symbol":typeof Wr},tr(Jr)}function er(Jr,Wr,qr){return Object.defineProperty(Jr,"prototype",{writable:!1}),Jr}function rr(Jr,Wr){if(!(Jr instanceof Wr))throw new TypeError("Cannot call a class as a function")}var nr=requireErrors(),ir=nr.codes,sr=ir.ERR_AMBIGUOUS_ARGUMENT,or=ir.ERR_INVALID_ARG_TYPE,ar=ir.ERR_INVALID_ARG_VALUE,cr=ir.ERR_INVALID_RETURN_VALUE,lr=ir.ERR_MISSING_ARGS,ur=requireAssertion_error(),dr=util$7,yr=dr.inspect,mr=util$7.types,wr=mr.isPromise,xr=mr.isRegExp,Or=polyfill$2(),Tr=polyfill$1(),Ar=callBound$4("RegExp.prototype.test"),Nr,Ur;function Dr(){var Jr=requireComparisons();Nr=Jr.isDeepEqual,Ur=Jr.isDeepStrictEqual}var Hr=!1,zr=assert$1.exports=pr,Cr={};function Mr(Jr){throw Jr.message instanceof Error?Jr.message:new ur(Jr)}function Pr(Jr,Wr,qr,an,tn){var cn=arguments.length,dn;if(cn===0)dn="Failed";else if(cn===1)qr=Jr,Jr=void 0;else{if(Hr===!1){Hr=!0;var Zr=process.emitWarning?process.emitWarning:console.warn.bind(console);Zr("assert.fail() with more than one argument is deprecated. Please use assert.strictEqual() instead or only pass a message.","DeprecationWarning","DEP0094")}cn===2&&(an="!=")}if(qr instanceof Error)throw qr;var Yr={actual:Jr,expected:Wr,operator:an===void 0?"fail":an,stackStartFn:tn||Pr};qr!==void 0&&(Yr.message=qr);var Qr=new ur(Yr);throw dn&&(Qr.message=dn,Qr.generatedMessage=!0),Qr}zr.fail=Pr,zr.AssertionError=ur;function Sr(Jr,Wr,qr,an){if(!qr){var tn=!1;if(Wr===0)tn=!0,an="No value argument passed to `assert.ok()`";else if(an instanceof Error)throw an;var cn=new ur({actual:qr,expected:!0,message:an,operator:"==",stackStartFn:Jr});throw cn.generatedMessage=tn,cn}}function pr(){for(var Jr=arguments.length,Wr=new Array(Jr),qr=0;qr<Jr;qr++)Wr[qr]=arguments[qr];Sr.apply(void 0,[pr,Wr.length].concat(Wr))}zr.ok=pr,zr.equal=function Jr(Wr,qr,an){if(arguments.length<2)throw new lr("actual","expected");Wr!=qr&&Mr({actual:Wr,expected:qr,message:an,operator:"==",stackStartFn:Jr})},zr.notEqual=function Jr(Wr,qr,an){if(arguments.length<2)throw new lr("actual","expected");Wr==qr&&Mr({actual:Wr,expected:qr,message:an,operator:"!=",stackStartFn:Jr})},zr.deepEqual=function Jr(Wr,qr,an){if(arguments.length<2)throw new lr("actual","expected");Nr===void 0&&Dr(),Nr(Wr,qr)||Mr({actual:Wr,expected:qr,message:an,operator:"deepEqual",stackStartFn:Jr})},zr.notDeepEqual=function Jr(Wr,qr,an){if(arguments.length<2)throw new lr("actual","expected");Nr===void 0&&Dr(),Nr(Wr,qr)&&Mr({actual:Wr,expected:qr,message:an,operator:"notDeepEqual",stackStartFn:Jr})},zr.deepStrictEqual=function Jr(Wr,qr,an){if(arguments.length<2)throw new lr("actual","expected");Nr===void 0&&Dr(),Ur(Wr,qr)||Mr({actual:Wr,expected:qr,message:an,operator:"deepStrictEqual",stackStartFn:Jr})},zr.notDeepStrictEqual=gr;function gr(Jr,Wr,qr){if(arguments.length<2)throw new lr("actual","expected");Nr===void 0&&Dr(),Ur(Jr,Wr)&&Mr({actual:Jr,expected:Wr,message:qr,operator:"notDeepStrictEqual",stackStartFn:gr})}zr.strictEqual=function Jr(Wr,qr,an){if(arguments.length<2)throw new lr("actual","expected");Tr(Wr,qr)||Mr({actual:Wr,expected:qr,message:an,operator:"strictEqual",stackStartFn:Jr})},zr.notStrictEqual=function Jr(Wr,qr,an){if(arguments.length<2)throw new lr("actual","expected");Tr(Wr,qr)&&Mr({actual:Wr,expected:qr,message:an,operator:"notStrictEqual",stackStartFn:Jr})};var fr=er(function Jr(Wr,qr,an){var tn=this;rr(this,Jr),qr.forEach(function(cn){cn in Wr&&(an!==void 0&&typeof an[cn]=="string"&&xr(Wr[cn])&&Ar(Wr[cn],an[cn])?tn[cn]=an[cn]:tn[cn]=Wr[cn])})});function hr(Jr,Wr,qr,an,tn,cn){if(!(qr in Jr)||!Ur(Jr[qr],Wr[qr])){if(!an){var dn=new fr(Jr,tn),Zr=new fr(Wr,tn,Jr),Yr=new ur({actual:dn,expected:Zr,operator:"deepStrictEqual",stackStartFn:cn});throw Yr.actual=Jr,Yr.expected=Wr,Yr.operator=cn.name,Yr}Mr({actual:Jr,expected:Wr,message:an,operator:cn.name,stackStartFn:cn})}}function br(Jr,Wr,qr,an){if(typeof Wr!="function"){if(xr(Wr))return Ar(Wr,Jr);if(arguments.length===2)throw new or("expected",["Function","RegExp"],Wr);if(tr(Jr)!=="object"||Jr===null){var tn=new ur({actual:Jr,expected:Wr,message:qr,operator:"deepStrictEqual",stackStartFn:an});throw tn.operator=an.name,tn}var cn=Object.keys(Wr);if(Wr instanceof Error)cn.push("name","message");else if(cn.length===0)throw new ar("error",Wr,"may not be an empty object");return Nr===void 0&&Dr(),cn.forEach(function(dn){typeof Jr[dn]=="string"&&xr(Wr[dn])&&Ar(Wr[dn],Jr[dn])||hr(Jr,Wr,dn,qr,cn,an)}),!0}return Wr.prototype!==void 0&&Jr instanceof Wr?!0:Error.isPrototypeOf(Wr)?!1:Wr.call({},Jr)===!0}function _r(Jr){if(typeof Jr!="function")throw new or("fn","Function",Jr);try{Jr()}catch(Wr){return Wr}return Cr}function $r(Jr){return wr(Jr)||Jr!==null&&tr(Jr)==="object"&&typeof Jr.then=="function"&&typeof Jr.catch=="function"}function Er(Jr){return Promise.resolve().then(function(){var Wr;if(typeof Jr=="function"){if(Wr=Jr(),!$r(Wr))throw new cr("instance of Promise","promiseFn",Wr)}else if($r(Jr))Wr=Jr;else throw new or("promiseFn",["Function","Promise"],Jr);return Promise.resolve().then(function(){return Wr}).then(function(){return Cr}).catch(function(qr){return qr})})}function vr(Jr,Wr,qr,an){if(typeof qr=="string"){if(arguments.length===4)throw new or("error",["Object","Error","Function","RegExp"],qr);if(tr(Wr)==="object"&&Wr!==null){if(Wr.message===qr)throw new sr("error/message",'The error message "'.concat(Wr.message,'" is identical to the message.'))}else if(Wr===qr)throw new sr("error/message",'The error "'.concat(Wr,'" is identical to the message.'));an=qr,qr=void 0}else if(qr!=null&&tr(qr)!=="object"&&typeof qr!="function")throw new or("error",["Object","Error","Function","RegExp"],qr);if(Wr===Cr){var tn="";qr&&qr.name&&(tn+=" (".concat(qr.name,")")),tn+=an?": ".concat(an):".";var cn=Jr.name==="rejects"?"rejection":"exception";Mr({actual:void 0,expected:qr,operator:Jr.name,message:"Missing expected ".concat(cn).concat(tn),stackStartFn:Jr})}if(qr&&!br(Wr,qr,an,Jr))throw Wr}function Ir(Jr,Wr,qr,an){if(Wr!==Cr){if(typeof qr=="string"&&(an=qr,qr=void 0),!qr||br(Wr,qr)){var tn=an?": ".concat(an):".",cn=Jr.name==="doesNotReject"?"rejection":"exception";Mr({actual:Wr,expected:qr,operator:Jr.name,message:"Got unwanted ".concat(cn).concat(tn,`
`)+'Actual message: "'.concat(Wr&&Wr.message,'"'),stackStartFn:Jr})}throw Wr}}zr.throws=function Jr(Wr){for(var qr=arguments.length,an=new Array(qr>1?qr-1:0),tn=1;tn<qr;tn++)an[tn-1]=arguments[tn];vr.apply(void 0,[Jr,_r(Wr)].concat(an))},zr.rejects=function Jr(Wr){for(var qr=arguments.length,an=new Array(qr>1?qr-1:0),tn=1;tn<qr;tn++)an[tn-1]=arguments[tn];return Er(Wr).then(function(cn){return vr.apply(void 0,[Jr,cn].concat(an))})},zr.doesNotThrow=function Jr(Wr){for(var qr=arguments.length,an=new Array(qr>1?qr-1:0),tn=1;tn<qr;tn++)an[tn-1]=arguments[tn];Ir.apply(void 0,[Jr,_r(Wr)].concat(an))},zr.doesNotReject=function Jr(Wr){for(var qr=arguments.length,an=new Array(qr>1?qr-1:0),tn=1;tn<qr;tn++)an[tn-1]=arguments[tn];return Er(Wr).then(function(cn){return Ir.apply(void 0,[Jr,cn].concat(an))})},zr.ifError=function Jr(Wr){if(Wr!=null){var qr="ifError got unwanted exception: ";tr(Wr)==="object"&&typeof Wr.message=="string"?Wr.message.length===0&&Wr.constructor?qr+=Wr.constructor.name:qr+=Wr.message:qr+=yr(Wr);var an=new ur({actual:Wr,expected:null,operator:"ifError",message:qr,stackStartFn:Jr}),tn=Wr.stack;if(typeof tn=="string"){var cn=tn.split(`
`);cn.shift();for(var dn=an.stack.split(`
`),Zr=0;Zr<cn.length;Zr++){var Yr=dn.indexOf(cn[Zr]);if(Yr!==-1){dn=dn.slice(0,Yr);break}}an.stack="".concat(dn.join(`
`),`
`).concat(cn.join(`
`))}throw an}};function Rr(Jr,Wr,qr,an,tn){if(!xr(Wr))throw new or("regexp","RegExp",Wr);var cn=tn==="match";if(typeof Jr!="string"||Ar(Wr,Jr)!==cn){if(qr instanceof Error)throw qr;var dn=!qr;qr=qr||(typeof Jr!="string"?'The "string" argument must be of type string. Received type '+"".concat(tr(Jr)," (").concat(yr(Jr),")"):(cn?"The input did not match the regular expression ":"The input was expected to not match the regular expression ")+"".concat(yr(Wr),`. Input:

`).concat(yr(Jr),`
`));var Zr=new ur({actual:Jr,expected:Wr,message:qr,operator:tn,stackStartFn:an});throw Zr.generatedMessage=dn,Zr}}zr.match=function Jr(Wr,qr,an){Rr(Wr,qr,an,Jr,"match")},zr.doesNotMatch=function Jr(Wr,qr,an){Rr(Wr,qr,an,Jr,"doesNotMatch")};function Br(){for(var Jr=arguments.length,Wr=new Array(Jr),qr=0;qr<Jr;qr++)Wr[qr]=arguments[qr];Sr.apply(void 0,[Br,Wr.length].concat(Wr))}return zr.strict=Or(Br,zr,{equal:zr.strictEqual,deepEqual:zr.deepStrictEqual,notEqual:zr.notStrictEqual,notDeepEqual:zr.notDeepStrictEqual}),zr.strict.strict=zr.strict,assert$1.exports}var assertExports=requireAssert();const assert=getDefaultExportFromCjs(assertExports);var lib={},helpers$3={},uri=require$$3,ValidationError=helpers$3.ValidationError=function tr(er,rr,nr,ir,sr,or){if(Array.isArray(ir)?(this.path=ir,this.property=ir.reduce(function(cr,lr){return cr+makeSuffix(lr)},"instance")):ir!==void 0&&(this.property=ir),er&&(this.message=er),nr){var ar=nr.$id||nr.id;this.schema=ar||nr}rr!==void 0&&(this.instance=rr),this.name=sr,this.argument=or,this.stack=this.toString()};ValidationError.prototype.toString=function tr(){return this.property+" "+this.message};var ValidatorResult$2=helpers$3.ValidatorResult=function tr(er,rr,nr,ir){this.instance=er,this.schema=rr,this.options=nr,this.path=ir.path,this.propertyPath=ir.propertyPath,this.errors=[],this.throwError=nr&&nr.throwError,this.throwFirst=nr&&nr.throwFirst,this.throwAll=nr&&nr.throwAll,this.disableFormat=nr&&nr.disableFormat===!0};ValidatorResult$2.prototype.addError=function tr(er){var rr;if(typeof er=="string")rr=new ValidationError(er,this.instance,this.schema,this.path);else{if(!er)throw new Error("Missing error detail");if(!er.message)throw new Error("Missing error message");if(!er.name)throw new Error("Missing validator type");rr=new ValidationError(er.message,this.instance,this.schema,this.path,er.name,er.argument)}if(this.errors.push(rr),this.throwFirst)throw new ValidatorResultError$1(this);if(this.throwError)throw rr;return rr};ValidatorResult$2.prototype.importErrors=function tr(er){typeof er=="string"||er&&er.validatorType?this.addError(er):er&&er.errors&&(this.errors=this.errors.concat(er.errors))};function stringizer(tr,er){return er+": "+tr.toString()+`
`}ValidatorResult$2.prototype.toString=function tr(er){return this.errors.map(stringizer).join("")};Object.defineProperty(ValidatorResult$2.prototype,"valid",{get:function(){return!this.errors.length}});helpers$3.ValidatorResultError=ValidatorResultError$1;function ValidatorResultError$1(tr){Error.captureStackTrace&&Error.captureStackTrace(this,ValidatorResultError$1),this.instance=tr.instance,this.schema=tr.schema,this.options=tr.options,this.errors=tr.errors}ValidatorResultError$1.prototype=new Error;ValidatorResultError$1.prototype.constructor=ValidatorResultError$1;ValidatorResultError$1.prototype.name="Validation Error";var SchemaError$2=helpers$3.SchemaError=function tr(er,rr){this.message=er,this.schema=rr,Error.call(this,er),Error.captureStackTrace(this,tr)};SchemaError$2.prototype=Object.create(Error.prototype,{constructor:{value:SchemaError$2,enumerable:!1},name:{value:"SchemaError",enumerable:!1}});var SchemaContext$1=helpers$3.SchemaContext=function tr(er,rr,nr,ir,sr){this.schema=er,this.options=rr,Array.isArray(nr)?(this.path=nr,this.propertyPath=nr.reduce(function(or,ar){return or+makeSuffix(ar)},"instance")):this.propertyPath=nr,this.base=ir,this.schemas=sr};SchemaContext$1.prototype.resolve=function tr(er){return uri.resolve(this.base,er)};SchemaContext$1.prototype.makeChild=function tr(er,rr){var nr=rr===void 0?this.path:this.path.concat([rr]),ir=er.$id||er.id,sr=uri.resolve(this.base,ir||""),or=new SchemaContext$1(er,this.options,nr,sr,Object.create(this.schemas));return ir&&!or.schemas[sr]&&(or.schemas[sr]=er),or};var FORMAT_REGEXPS=helpers$3.FORMAT_REGEXPS={"date-time":/^\d{4}-(?:0[0-9]{1}|1[0-2]{1})-(3[01]|0[1-9]|[12][0-9])[tT ](2[0-4]|[01][0-9]):([0-5][0-9]):(60|[0-5][0-9])(\.\d+)?([zZ]|[+-]([0-5][0-9]):(60|[0-5][0-9]))$/,date:/^\d{4}-(?:0[0-9]{1}|1[0-2]{1})-(3[01]|0[1-9]|[12][0-9])$/,time:/^(2[0-4]|[01][0-9]):([0-5][0-9]):(60|[0-5][0-9])$/,duration:/P(T\d+(H(\d+M(\d+S)?)?|M(\d+S)?|S)|\d+(D|M(\d+D)?|Y(\d+M(\d+D)?)?)(T\d+(H(\d+M(\d+S)?)?|M(\d+S)?|S))?|\d+W)/i,email:/^(?:[\w\!\#\$\%\&\'\*\+\-\/\=\?\^\`\{\|\}\~]+\.)*[\w\!\#\$\%\&\'\*\+\-\/\=\?\^\`\{\|\}\~]+@(?:(?:(?:[a-zA-Z0-9](?:[a-zA-Z0-9\-](?!\.)){0,61}[a-zA-Z0-9]?\.)+[a-zA-Z0-9](?:[a-zA-Z0-9\-](?!$)){0,61}[a-zA-Z0-9]?)|(?:\[(?:(?:[01]?\d{1,2}|2[0-4]\d|25[0-5])\.){3}(?:[01]?\d{1,2}|2[0-4]\d|25[0-5])\]))$/,"idn-email":/^("(?:[!#-\[\]-\u{10FFFF}]|\\[\t -\u{10FFFF}])*"|[!#-'*+\-/-9=?A-Z\^-\u{10FFFF}](?:\.?[!#-'*+\-/-9=?A-Z\^-\u{10FFFF}])*)@([!#-'*+\-/-9=?A-Z\^-\u{10FFFF}](?:\.?[!#-'*+\-/-9=?A-Z\^-\u{10FFFF}])*|\[[!-Z\^-\u{10FFFF}]*\])$/u,"ip-address":/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/,ipv6:/^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/,uri:/^[a-zA-Z][a-zA-Z0-9+.-]*:[^\s]*$/,"uri-reference":/^(((([A-Za-z][+\-.0-9A-Za-z]*(:%[0-9A-Fa-f]{2}|:[!$&-.0-;=?-Z_a-z~]|[/?])|\?)(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~])*|([A-Za-z][+\-.0-9A-Za-z]*:?)?)|([A-Za-z][+\-.0-9A-Za-z]*:)?\/((%[0-9A-Fa-f]{2}|\/((%[0-9A-Fa-f]{2}|[!$&-.0-9;=A-Z_a-z~])+|(\[(([Vv][0-9A-Fa-f]+\.[!$&-.0-;=A-Z_a-z~]+)?|[.0-:A-Fa-f]+)\])?)(:\d*)?[/?]|[!$&-.0-;=?-Z_a-z~])(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~])*|(\/((%[0-9A-Fa-f]{2}|[!$&-.0-9;=A-Z_a-z~])+|(\[(([Vv][0-9A-Fa-f]+\.[!$&-.0-;=A-Z_a-z~]+)?|[.0-:A-Fa-f]+)\])?)(:\d*)?)?))#(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~])*|(([A-Za-z][+\-.0-9A-Za-z]*)?%[0-9A-Fa-f]{2}|[!$&-.0-9;=@_~]|[A-Za-z][+\-.0-9A-Za-z]*[!$&-*,;=@_~])(%[0-9A-Fa-f]{2}|[!$&-.0-9;=@-Z_a-z~])*((([/?](%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~])*)?#|[/?])(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~])*)?|([A-Za-z][+\-.0-9A-Za-z]*(:%[0-9A-Fa-f]{2}|:[!$&-.0-;=?-Z_a-z~]|[/?])|\?)(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~])*|([A-Za-z][+\-.0-9A-Za-z]*:)?\/((%[0-9A-Fa-f]{2}|\/((%[0-9A-Fa-f]{2}|[!$&-.0-9;=A-Z_a-z~])+|(\[(([Vv][0-9A-Fa-f]+\.[!$&-.0-;=A-Z_a-z~]+)?|[.0-:A-Fa-f]+)\])?)(:\d*)?[/?]|[!$&-.0-;=?-Z_a-z~])(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~])*|\/((%[0-9A-Fa-f]{2}|[!$&-.0-9;=A-Z_a-z~])+(:\d*)?|(\[(([Vv][0-9A-Fa-f]+\.[!$&-.0-;=A-Z_a-z~]+)?|[.0-:A-Fa-f]+)\])?:\d*|\[(([Vv][0-9A-Fa-f]+\.[!$&-.0-;=A-Z_a-z~]+)?|[.0-:A-Fa-f]+)\])?)?|[A-Za-z][+\-.0-9A-Za-z]*:?)?$/,iri:/^[a-zA-Z][a-zA-Z0-9+.-]*:[^\s]*$/,"iri-reference":/^(((([A-Za-z][+\-.0-9A-Za-z]*(:%[0-9A-Fa-f]{2}|:[!$&-.0-;=?-Z_a-z~-\u{10FFFF}]|[/?])|\?)(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~-\u{10FFFF}])*|([A-Za-z][+\-.0-9A-Za-z]*:?)?)|([A-Za-z][+\-.0-9A-Za-z]*:)?\/((%[0-9A-Fa-f]{2}|\/((%[0-9A-Fa-f]{2}|[!$&-.0-9;=A-Z_a-z~-\u{10FFFF}])+|(\[(([Vv][0-9A-Fa-f]+\.[!$&-.0-;=A-Z_a-z~-\u{10FFFF}]+)?|[.0-:A-Fa-f]+)\])?)(:\d*)?[/?]|[!$&-.0-;=?-Z_a-z~-\u{10FFFF}])(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~-\u{10FFFF}])*|(\/((%[0-9A-Fa-f]{2}|[!$&-.0-9;=A-Z_a-z~-\u{10FFFF}])+|(\[(([Vv][0-9A-Fa-f]+\.[!$&-.0-;=A-Z_a-z~-\u{10FFFF}]+)?|[.0-:A-Fa-f]+)\])?)(:\d*)?)?))#(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~-\u{10FFFF}])*|(([A-Za-z][+\-.0-9A-Za-z]*)?%[0-9A-Fa-f]{2}|[!$&-.0-9;=@_~-\u{10FFFF}]|[A-Za-z][+\-.0-9A-Za-z]*[!$&-*,;=@_~-\u{10FFFF}])(%[0-9A-Fa-f]{2}|[!$&-.0-9;=@-Z_a-z~-\u{10FFFF}])*((([/?](%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~-\u{10FFFF}])*)?#|[/?])(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~-\u{10FFFF}])*)?|([A-Za-z][+\-.0-9A-Za-z]*(:%[0-9A-Fa-f]{2}|:[!$&-.0-;=?-Z_a-z~-\u{10FFFF}]|[/?])|\?)(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~-\u{10FFFF}])*|([A-Za-z][+\-.0-9A-Za-z]*:)?\/((%[0-9A-Fa-f]{2}|\/((%[0-9A-Fa-f]{2}|[!$&-.0-9;=A-Z_a-z~-\u{10FFFF}])+|(\[(([Vv][0-9A-Fa-f]+\.[!$&-.0-;=A-Z_a-z~-\u{10FFFF}]+)?|[.0-:A-Fa-f]+)\])?)(:\d*)?[/?]|[!$&-.0-;=?-Z_a-z~-\u{10FFFF}])(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~-\u{10FFFF}])*|\/((%[0-9A-Fa-f]{2}|[!$&-.0-9;=A-Z_a-z~-\u{10FFFF}])+(:\d*)?|(\[(([Vv][0-9A-Fa-f]+\.[!$&-.0-;=A-Z_a-z~-\u{10FFFF}]+)?|[.0-:A-Fa-f]+)\])?:\d*|\[(([Vv][0-9A-Fa-f]+\.[!$&-.0-;=A-Z_a-z~-\u{10FFFF}]+)?|[.0-:A-Fa-f]+)\])?)?|[A-Za-z][+\-.0-9A-Za-z]*:?)?$/u,uuid:/^[0-9A-F]{8}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{12}$/i,"uri-template":/(%[0-9a-f]{2}|[!#$&(-;=?@\[\]_a-z~]|\{[!#&+,./;=?@|]?(%[0-9a-f]{2}|[0-9_a-z])(\.?(%[0-9a-f]{2}|[0-9_a-z]))*(:[1-9]\d{0,3}|\*)?(,(%[0-9a-f]{2}|[0-9_a-z])(\.?(%[0-9a-f]{2}|[0-9_a-z]))*(:[1-9]\d{0,3}|\*)?)*\})*/iu,"json-pointer":/^(\/([\x00-\x2e0-@\[-}\x7f]|~[01])*)*$/iu,"relative-json-pointer":/^\d+(#|(\/([\x00-\x2e0-@\[-}\x7f]|~[01])*)*)$/iu,hostname:/^(?=.{1,255}$)[0-9A-Za-z](?:(?:[0-9A-Za-z]|-){0,61}[0-9A-Za-z])?(?:\.[0-9A-Za-z](?:(?:[0-9A-Za-z]|-){0,61}[0-9A-Za-z])?)*\.?$/,"host-name":/^(?=.{1,255}$)[0-9A-Za-z](?:(?:[0-9A-Za-z]|-){0,61}[0-9A-Za-z])?(?:\.[0-9A-Za-z](?:(?:[0-9A-Za-z]|-){0,61}[0-9A-Za-z])?)*\.?$/,"utc-millisec":function(tr){return typeof tr=="string"&&parseFloat(tr)===parseInt(tr,10)&&!isNaN(tr)},regex:function(tr){var er=!0;try{new RegExp(tr)}catch{er=!1}return er},style:/[\r\n\t ]*[^\r\n\t ][^:]*:[\r\n\t ]*[^\r\n\t ;]*[\r\n\t ]*;?/,color:/^(#?([0-9A-Fa-f]{3}){1,2}\b|aqua|black|blue|fuchsia|gray|green|lime|maroon|navy|olive|orange|purple|red|silver|teal|white|yellow|(rgb\(\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*,\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*,\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*\))|(rgb\(\s*(\d?\d%|100%)+\s*,\s*(\d?\d%|100%)+\s*,\s*(\d?\d%|100%)+\s*\)))$/,phone:/^\+(?:[0-9] ?){6,14}[0-9]$/,alpha:/^[a-zA-Z]+$/,alphanumeric:/^[a-zA-Z0-9]+$/};FORMAT_REGEXPS.regexp=FORMAT_REGEXPS.regex;FORMAT_REGEXPS.pattern=FORMAT_REGEXPS.regex;FORMAT_REGEXPS.ipv4=FORMAT_REGEXPS["ip-address"];helpers$3.isFormat=function tr(er,rr,nr){if(typeof er=="string"&&FORMAT_REGEXPS[rr]!==void 0){if(FORMAT_REGEXPS[rr]instanceof RegExp)return FORMAT_REGEXPS[rr].test(er);if(typeof FORMAT_REGEXPS[rr]=="function")return FORMAT_REGEXPS[rr](er)}else if(nr&&nr.customFormats&&typeof nr.customFormats[rr]=="function")return nr.customFormats[rr](er);return!0};var makeSuffix=helpers$3.makeSuffix=function tr(er){return er=er.toString(),!er.match(/[.\s\[\]]/)&&!er.match(/^[\d]/)?"."+er:er.match(/^\d+$/)?"["+er+"]":"["+JSON.stringify(er)+"]"};helpers$3.deepCompareStrict=function tr(er,rr){if(typeof er!=typeof rr)return!1;if(Array.isArray(er))return!Array.isArray(rr)||er.length!==rr.length?!1:er.every(function(sr,or){return tr(er[or],rr[or])});if(typeof er=="object"){if(!er||!rr)return er===rr;var nr=Object.keys(er),ir=Object.keys(rr);return nr.length!==ir.length?!1:nr.every(function(sr){return tr(er[sr],rr[sr])})}return er===rr};function deepMerger(tr,er,rr,nr){typeof rr=="object"?er[nr]=deepMerge(tr[nr],rr):tr.indexOf(rr)===-1&&er.push(rr)}function copyist(tr,er,rr){er[rr]=tr[rr]}function copyistWithDeepMerge(tr,er,rr,nr){typeof er[nr]!="object"||!er[nr]?rr[nr]=er[nr]:tr[nr]?rr[nr]=deepMerge(tr[nr],er[nr]):rr[nr]=er[nr]}function deepMerge(tr,er){var rr=Array.isArray(er),nr=rr&&[]||{};return rr?(tr=tr||[],nr=nr.concat(tr),er.forEach(deepMerger.bind(null,tr,nr))):(tr&&typeof tr=="object"&&Object.keys(tr).forEach(copyist.bind(null,tr,nr)),Object.keys(er).forEach(copyistWithDeepMerge.bind(null,tr,er,nr))),nr}helpers$3.deepMerge=deepMerge;helpers$3.objectGetPath=function tr(er,rr){for(var nr=rr.split("/").slice(1),ir;typeof(ir=nr.shift())=="string";){var sr=decodeURIComponent(ir.replace(/~0/,"~").replace(/~1/g,"/"));if(!(sr in er))return;er=er[sr]}return er};function pathEncoder(tr){return"/"+encodeURIComponent(tr).replace(/~/g,"%7E")}helpers$3.encodePath=function tr(er){return er.map(pathEncoder).join("")};helpers$3.getDecimalPlaces=function tr(er){var rr=0;if(isNaN(er))return rr;typeof er!="number"&&(er=Number(er));var nr=er.toString().split("e");if(nr.length===2){if(nr[1][0]!=="-")return rr;rr=Number(nr[1].slice(1))}var ir=nr[0].split(".");return ir.length===2&&(rr+=ir[1].length),rr};helpers$3.isSchema=function tr(er){return typeof er=="object"&&er||typeof er=="boolean"};var helpers$2=helpers$3,ValidatorResult$1=helpers$2.ValidatorResult,SchemaError$1=helpers$2.SchemaError,attribute$1={};attribute$1.ignoreProperties={id:!0,default:!0,description:!0,title:!0,additionalItems:!0,then:!0,else:!0,$schema:!0,$ref:!0,extends:!0};var validators=attribute$1.validators={};validators.type=function tr(er,rr,nr,ir){if(er===void 0)return null;var sr=new ValidatorResult$1(er,rr,nr,ir),or=Array.isArray(rr.type)?rr.type:[rr.type];if(!or.some(this.testType.bind(this,er,rr,nr,ir))){var ar=or.map(function(cr){if(cr){var lr=cr.$id||cr.id;return lr?"<"+lr+">":cr+""}});sr.addError({name:"type",argument:ar,message:"is not of a type(s) "+ar})}return sr};function testSchemaNoThrow(tr,er,rr,nr,ir){var sr=er.throwError,or=er.throwAll;er.throwError=!1,er.throwAll=!1;var ar=this.validateSchema(tr,ir,er,rr);return er.throwError=sr,er.throwAll=or,!ar.valid&&nr instanceof Function&&nr(ar),ar.valid}validators.anyOf=function tr(er,rr,nr,ir){if(er===void 0)return null;var sr=new ValidatorResult$1(er,rr,nr,ir),or=new ValidatorResult$1(er,rr,nr,ir);if(!Array.isArray(rr.anyOf))throw new SchemaError$1("anyOf must be an array");if(!rr.anyOf.some(testSchemaNoThrow.bind(this,er,nr,ir,function(cr){or.importErrors(cr)}))){var ar=rr.anyOf.map(function(cr,lr){var ur=cr.$id||cr.id;return ur?"<"+ur+">":cr.title&&JSON.stringify(cr.title)||cr.$ref&&"<"+cr.$ref+">"||"[subschema "+lr+"]"});nr.nestedErrors&&sr.importErrors(or),sr.addError({name:"anyOf",argument:ar,message:"is not any of "+ar.join(",")})}return sr};validators.allOf=function tr(er,rr,nr,ir){if(er===void 0)return null;if(!Array.isArray(rr.allOf))throw new SchemaError$1("allOf must be an array");var sr=new ValidatorResult$1(er,rr,nr,ir),or=this;return rr.allOf.forEach(function(ar,cr){var lr=or.validateSchema(er,ar,nr,ir);if(!lr.valid){var ur=ar.$id||ar.id,dr=ur||ar.title&&JSON.stringify(ar.title)||ar.$ref&&"<"+ar.$ref+">"||"[subschema "+cr+"]";sr.addError({name:"allOf",argument:{id:dr,length:lr.errors.length,valid:lr},message:"does not match allOf schema "+dr+" with "+lr.errors.length+" error[s]:"}),sr.importErrors(lr)}}),sr};validators.oneOf=function tr(er,rr,nr,ir){if(er===void 0)return null;if(!Array.isArray(rr.oneOf))throw new SchemaError$1("oneOf must be an array");var sr=new ValidatorResult$1(er,rr,nr,ir),or=new ValidatorResult$1(er,rr,nr,ir),ar=rr.oneOf.filter(testSchemaNoThrow.bind(this,er,nr,ir,function(lr){or.importErrors(lr)})).length,cr=rr.oneOf.map(function(lr,ur){var dr=lr.$id||lr.id;return dr||lr.title&&JSON.stringify(lr.title)||lr.$ref&&"<"+lr.$ref+">"||"[subschema "+ur+"]"});return ar!==1&&(nr.nestedErrors&&sr.importErrors(or),sr.addError({name:"oneOf",argument:cr,message:"is not exactly one from "+cr.join(",")})),sr};validators.if=function tr(er,rr,nr,ir){if(er===void 0)return null;if(!helpers$2.isSchema(rr.if))throw new Error('Expected "if" keyword to be a schema');var sr=testSchemaNoThrow.call(this,er,nr,ir,null,rr.if),or=new ValidatorResult$1(er,rr,nr,ir),ar;if(sr){if(rr.then===void 0)return;if(!helpers$2.isSchema(rr.then))throw new Error('Expected "then" keyword to be a schema');ar=this.validateSchema(er,rr.then,nr,ir.makeChild(rr.then)),or.importErrors(ar)}else{if(rr.else===void 0)return;if(!helpers$2.isSchema(rr.else))throw new Error('Expected "else" keyword to be a schema');ar=this.validateSchema(er,rr.else,nr,ir.makeChild(rr.else)),or.importErrors(ar)}return or};function getEnumerableProperty(tr,er){if(Object.hasOwnProperty.call(tr,er))return tr[er];if(er in tr){for(;tr=Object.getPrototypeOf(tr);)if(Object.propertyIsEnumerable.call(tr,er))return tr[er]}}validators.propertyNames=function tr(er,rr,nr,ir){if(this.types.object(er)){var sr=new ValidatorResult$1(er,rr,nr,ir),or=rr.propertyNames!==void 0?rr.propertyNames:{};if(!helpers$2.isSchema(or))throw new SchemaError$1('Expected "propertyNames" to be a schema (object or boolean)');for(var ar in er)if(getEnumerableProperty(er,ar)!==void 0){var cr=this.validateSchema(ar,or,nr,ir.makeChild(or));sr.importErrors(cr)}return sr}};validators.properties=function tr(er,rr,nr,ir){if(this.types.object(er)){var sr=new ValidatorResult$1(er,rr,nr,ir),or=rr.properties||{};for(var ar in or){var cr=or[ar];if(cr!==void 0){if(cr===null)throw new SchemaError$1('Unexpected null, expected schema in "properties"');typeof nr.preValidateProperty=="function"&&nr.preValidateProperty(er,ar,cr,nr,ir);var lr=getEnumerableProperty(er,ar),ur=this.validateSchema(lr,cr,nr,ir.makeChild(cr,ar));ur.instance!==sr.instance[ar]&&(sr.instance[ar]=ur.instance),sr.importErrors(ur)}}return sr}};function testAdditionalProperty(tr,er,rr,nr,ir,sr){if(this.types.object(tr)&&!(er.properties&&er.properties[ir]!==void 0))if(er.additionalProperties===!1)sr.addError({name:"additionalProperties",argument:ir,message:"is not allowed to have the additional property "+JSON.stringify(ir)});else{var or=er.additionalProperties||{};typeof rr.preValidateProperty=="function"&&rr.preValidateProperty(tr,ir,or,rr,nr);var ar=this.validateSchema(tr[ir],or,rr,nr.makeChild(or,ir));ar.instance!==sr.instance[ir]&&(sr.instance[ir]=ar.instance),sr.importErrors(ar)}}validators.patternProperties=function tr(er,rr,nr,ir){if(this.types.object(er)){var sr=new ValidatorResult$1(er,rr,nr,ir),or=rr.patternProperties||{};for(var ar in er){var cr=!0;for(var lr in or){var ur=or[lr];if(ur!==void 0){if(ur===null)throw new SchemaError$1('Unexpected null, expected schema in "patternProperties"');try{var dr=new RegExp(lr,"u")}catch{dr=new RegExp(lr)}if(dr.test(ar)){cr=!1,typeof nr.preValidateProperty=="function"&&nr.preValidateProperty(er,ar,ur,nr,ir);var yr=this.validateSchema(er[ar],ur,nr,ir.makeChild(ur,ar));yr.instance!==sr.instance[ar]&&(sr.instance[ar]=yr.instance),sr.importErrors(yr)}}}cr&&testAdditionalProperty.call(this,er,rr,nr,ir,ar,sr)}return sr}};validators.additionalProperties=function tr(er,rr,nr,ir){if(this.types.object(er)){if(rr.patternProperties)return null;var sr=new ValidatorResult$1(er,rr,nr,ir);for(var or in er)testAdditionalProperty.call(this,er,rr,nr,ir,or,sr);return sr}};validators.minProperties=function tr(er,rr,nr,ir){if(this.types.object(er)){var sr=new ValidatorResult$1(er,rr,nr,ir),or=Object.keys(er);return or.length>=rr.minProperties||sr.addError({name:"minProperties",argument:rr.minProperties,message:"does not meet minimum property length of "+rr.minProperties}),sr}};validators.maxProperties=function tr(er,rr,nr,ir){if(this.types.object(er)){var sr=new ValidatorResult$1(er,rr,nr,ir),or=Object.keys(er);return or.length<=rr.maxProperties||sr.addError({name:"maxProperties",argument:rr.maxProperties,message:"does not meet maximum property length of "+rr.maxProperties}),sr}};validators.items=function tr(er,rr,nr,ir){var sr=this;if(this.types.array(er)&&rr.items!==void 0){var or=new ValidatorResult$1(er,rr,nr,ir);return er.every(function(ar,cr){if(Array.isArray(rr.items))var lr=rr.items[cr]===void 0?rr.additionalItems:rr.items[cr];else var lr=rr.items;if(lr===void 0)return!0;if(lr===!1)return or.addError({name:"items",message:"additionalItems not permitted"}),!1;var ur=sr.validateSchema(ar,lr,nr,ir.makeChild(lr,cr));return ur.instance!==or.instance[cr]&&(or.instance[cr]=ur.instance),or.importErrors(ur),!0}),or}};validators.contains=function tr(er,rr,nr,ir){var sr=this;if(this.types.array(er)&&rr.contains!==void 0){if(!helpers$2.isSchema(rr.contains))throw new Error('Expected "contains" keyword to be a schema');var or=new ValidatorResult$1(er,rr,nr,ir),ar=er.some(function(cr,lr){var ur=sr.validateSchema(cr,rr.contains,nr,ir.makeChild(rr.contains,lr));return ur.errors.length===0});return ar===!1&&or.addError({name:"contains",argument:rr.contains,message:"must contain an item matching given schema"}),or}};validators.minimum=function tr(er,rr,nr,ir){if(this.types.number(er)){var sr=new ValidatorResult$1(er,rr,nr,ir);return rr.exclusiveMinimum&&rr.exclusiveMinimum===!0?er>rr.minimum||sr.addError({name:"minimum",argument:rr.minimum,message:"must be greater than "+rr.minimum}):er>=rr.minimum||sr.addError({name:"minimum",argument:rr.minimum,message:"must be greater than or equal to "+rr.minimum}),sr}};validators.maximum=function tr(er,rr,nr,ir){if(this.types.number(er)){var sr=new ValidatorResult$1(er,rr,nr,ir);return rr.exclusiveMaximum&&rr.exclusiveMaximum===!0?er<rr.maximum||sr.addError({name:"maximum",argument:rr.maximum,message:"must be less than "+rr.maximum}):er<=rr.maximum||sr.addError({name:"maximum",argument:rr.maximum,message:"must be less than or equal to "+rr.maximum}),sr}};validators.exclusiveMinimum=function tr(er,rr,nr,ir){if(typeof rr.exclusiveMinimum!="boolean"&&this.types.number(er)){var sr=new ValidatorResult$1(er,rr,nr,ir),or=er>rr.exclusiveMinimum;return or||sr.addError({name:"exclusiveMinimum",argument:rr.exclusiveMinimum,message:"must be strictly greater than "+rr.exclusiveMinimum}),sr}};validators.exclusiveMaximum=function tr(er,rr,nr,ir){if(typeof rr.exclusiveMaximum!="boolean"&&this.types.number(er)){var sr=new ValidatorResult$1(er,rr,nr,ir),or=er<rr.exclusiveMaximum;return or||sr.addError({name:"exclusiveMaximum",argument:rr.exclusiveMaximum,message:"must be strictly less than "+rr.exclusiveMaximum}),sr}};var validateMultipleOfOrDivisbleBy=function tr(er,rr,nr,ir,sr,or){if(this.types.number(er)){var ar=rr[sr];if(ar==0)throw new SchemaError$1(sr+" cannot be zero");var cr=new ValidatorResult$1(er,rr,nr,ir),lr=helpers$2.getDecimalPlaces(er),ur=helpers$2.getDecimalPlaces(ar),dr=Math.max(lr,ur),yr=Math.pow(10,dr);return Math.round(er*yr)%Math.round(ar*yr)!==0&&cr.addError({name:sr,argument:ar,message:or+JSON.stringify(ar)}),cr}};validators.multipleOf=function tr(er,rr,nr,ir){return validateMultipleOfOrDivisbleBy.call(this,er,rr,nr,ir,"multipleOf","is not a multiple of (divisible by) ")};validators.divisibleBy=function tr(er,rr,nr,ir){return validateMultipleOfOrDivisbleBy.call(this,er,rr,nr,ir,"divisibleBy","is not divisible by (multiple of) ")};validators.required=function tr(er,rr,nr,ir){var sr=new ValidatorResult$1(er,rr,nr,ir);return er===void 0&&rr.required===!0?sr.addError({name:"required",message:"is required"}):this.types.object(er)&&Array.isArray(rr.required)&&rr.required.forEach(function(or){getEnumerableProperty(er,or)===void 0&&sr.addError({name:"required",argument:or,message:"requires property "+JSON.stringify(or)})}),sr};validators.pattern=function tr(er,rr,nr,ir){if(this.types.string(er)){var sr=new ValidatorResult$1(er,rr,nr,ir),or=rr.pattern;try{var ar=new RegExp(or,"u")}catch{ar=new RegExp(or)}return er.match(ar)||sr.addError({name:"pattern",argument:rr.pattern,message:"does not match pattern "+JSON.stringify(rr.pattern.toString())}),sr}};validators.format=function tr(er,rr,nr,ir){if(er!==void 0){var sr=new ValidatorResult$1(er,rr,nr,ir);return!sr.disableFormat&&!helpers$2.isFormat(er,rr.format,this)&&sr.addError({name:"format",argument:rr.format,message:"does not conform to the "+JSON.stringify(rr.format)+" format"}),sr}};validators.minLength=function tr(er,rr,nr,ir){if(this.types.string(er)){var sr=new ValidatorResult$1(er,rr,nr,ir),or=er.match(/[\uDC00-\uDFFF]/g),ar=er.length-(or?or.length:0);return ar>=rr.minLength||sr.addError({name:"minLength",argument:rr.minLength,message:"does not meet minimum length of "+rr.minLength}),sr}};validators.maxLength=function tr(er,rr,nr,ir){if(this.types.string(er)){var sr=new ValidatorResult$1(er,rr,nr,ir),or=er.match(/[\uDC00-\uDFFF]/g),ar=er.length-(or?or.length:0);return ar<=rr.maxLength||sr.addError({name:"maxLength",argument:rr.maxLength,message:"does not meet maximum length of "+rr.maxLength}),sr}};validators.minItems=function tr(er,rr,nr,ir){if(this.types.array(er)){var sr=new ValidatorResult$1(er,rr,nr,ir);return er.length>=rr.minItems||sr.addError({name:"minItems",argument:rr.minItems,message:"does not meet minimum length of "+rr.minItems}),sr}};validators.maxItems=function tr(er,rr,nr,ir){if(this.types.array(er)){var sr=new ValidatorResult$1(er,rr,nr,ir);return er.length<=rr.maxItems||sr.addError({name:"maxItems",argument:rr.maxItems,message:"does not meet maximum length of "+rr.maxItems}),sr}};function testArrays(tr,er,rr){var nr,ir=rr.length;for(nr=er+1,ir;nr<ir;nr++)if(helpers$2.deepCompareStrict(tr,rr[nr]))return!1;return!0}validators.uniqueItems=function tr(er,rr,nr,ir){if(rr.uniqueItems===!0&&this.types.array(er)){var sr=new ValidatorResult$1(er,rr,nr,ir);return er.every(testArrays)||sr.addError({name:"uniqueItems",message:"contains duplicate item"}),sr}};validators.dependencies=function tr(er,rr,nr,ir){if(this.types.object(er)){var sr=new ValidatorResult$1(er,rr,nr,ir);for(var or in rr.dependencies)if(er[or]!==void 0){var ar=rr.dependencies[or],cr=ir.makeChild(ar,or);if(typeof ar=="string"&&(ar=[ar]),Array.isArray(ar))ar.forEach(function(ur){er[ur]===void 0&&sr.addError({name:"dependencies",argument:cr.propertyPath,message:"property "+ur+" not found, required by "+cr.propertyPath})});else{var lr=this.validateSchema(er,ar,nr,cr);sr.instance!==lr.instance&&(sr.instance=lr.instance),lr&&lr.errors.length&&(sr.addError({name:"dependencies",argument:cr.propertyPath,message:"does not meet dependency required by "+cr.propertyPath}),sr.importErrors(lr))}}return sr}};validators.enum=function tr(er,rr,nr,ir){if(er===void 0)return null;if(!Array.isArray(rr.enum))throw new SchemaError$1("enum expects an array",rr);var sr=new ValidatorResult$1(er,rr,nr,ir);return rr.enum.some(helpers$2.deepCompareStrict.bind(null,er))||sr.addError({name:"enum",argument:rr.enum,message:"is not one of enum values: "+rr.enum.map(String).join(",")}),sr};validators.const=function tr(er,rr,nr,ir){if(er===void 0)return null;var sr=new ValidatorResult$1(er,rr,nr,ir);return helpers$2.deepCompareStrict(rr.const,er)||sr.addError({name:"const",argument:rr.const,message:"does not exactly match expected constant: "+rr.const}),sr};validators.not=validators.disallow=function tr(er,rr,nr,ir){var sr=this;if(er===void 0)return null;var or=new ValidatorResult$1(er,rr,nr,ir),ar=rr.not||rr.disallow;return ar?(Array.isArray(ar)||(ar=[ar]),ar.forEach(function(cr){if(sr.testType(er,rr,nr,ir,cr)){var lr=cr&&(cr.$id||cr.id),ur=lr||cr;or.addError({name:"not",argument:ur,message:"is of prohibited type "+ur})}}),or):null};var attribute_1=attribute$1,scan={},urilib$1=require$$3,helpers$1=helpers$3;scan.SchemaScanResult=SchemaScanResult;function SchemaScanResult(tr,er){this.id=tr,this.ref=er}scan.scan=function tr(er,rr){function nr(cr,lr){if(!(!lr||typeof lr!="object")){if(lr.$ref){var ur=urilib$1.resolve(cr,lr.$ref);ar[ur]=ar[ur]?ar[ur]+1:0;return}var dr=lr.$id||lr.id,yr=dr?urilib$1.resolve(cr,dr):cr;if(yr){if(yr.indexOf("#")<0&&(yr+="#"),or[yr]){if(!helpers$1.deepCompareStrict(or[yr],lr))throw new Error("Schema <"+yr+"> already exists with different definition");return or[yr]}or[yr]=lr,yr[yr.length-1]=="#"&&(or[yr.substring(0,yr.length-1)]=lr)}ir(yr+"/items",Array.isArray(lr.items)?lr.items:[lr.items]),ir(yr+"/extends",Array.isArray(lr.extends)?lr.extends:[lr.extends]),nr(yr+"/additionalItems",lr.additionalItems),sr(yr+"/properties",lr.properties),nr(yr+"/additionalProperties",lr.additionalProperties),sr(yr+"/definitions",lr.definitions),sr(yr+"/patternProperties",lr.patternProperties),sr(yr+"/dependencies",lr.dependencies),ir(yr+"/disallow",lr.disallow),ir(yr+"/allOf",lr.allOf),ir(yr+"/anyOf",lr.anyOf),ir(yr+"/oneOf",lr.oneOf),nr(yr+"/not",lr.not)}}function ir(cr,lr){if(Array.isArray(lr))for(var ur=0;ur<lr.length;ur++)nr(cr+"/"+ur,lr[ur])}function sr(cr,lr){if(!(!lr||typeof lr!="object"))for(var ur in lr)nr(cr+"/"+ur,lr[ur])}var or={},ar={};return nr(er,rr),new SchemaScanResult(or,ar)};var urilib=require$$3,attribute=attribute_1,helpers=helpers$3,scanSchema=scan.scan,ValidatorResult=helpers.ValidatorResult,ValidatorResultError=helpers.ValidatorResultError,SchemaError=helpers.SchemaError,SchemaContext=helpers.SchemaContext,anonymousBase="/",Validator$1=function tr(){this.customFormats=Object.create(tr.prototype.customFormats),this.schemas={},this.unresolvedRefs=[],this.types=Object.create(types),this.attributes=Object.create(attribute.validators)};Validator$1.prototype.customFormats={};Validator$1.prototype.schemas=null;Validator$1.prototype.types=null;Validator$1.prototype.attributes=null;Validator$1.prototype.unresolvedRefs=null;Validator$1.prototype.addSchema=function tr(er,rr){var nr=this;if(!er)return null;var ir=scanSchema(rr||anonymousBase,er),sr=rr||er.$id||er.id;for(var or in ir.id)this.schemas[or]=ir.id[or];for(var or in ir.ref)this.unresolvedRefs.push(or);return this.unresolvedRefs=this.unresolvedRefs.filter(function(ar){return typeof nr.schemas[ar]>"u"}),this.schemas[sr]};Validator$1.prototype.addSubSchemaArray=function tr(er,rr){if(Array.isArray(rr))for(var nr=0;nr<rr.length;nr++)this.addSubSchema(er,rr[nr])};Validator$1.prototype.addSubSchemaObject=function tr(er,rr){if(!(!rr||typeof rr!="object"))for(var nr in rr)this.addSubSchema(er,rr[nr])};Validator$1.prototype.setSchemas=function tr(er){this.schemas=er};Validator$1.prototype.getSchema=function tr(er){return this.schemas[er]};Validator$1.prototype.validate=function tr(er,rr,nr,ir){if(typeof rr!="boolean"&&typeof rr!="object"||rr===null)throw new SchemaError("Expected `schema` to be an object or boolean");nr||(nr={});var sr=rr.$id||rr.id,or=urilib.resolve(nr.base||anonymousBase,sr||"");if(!ir){ir=new SchemaContext(rr,nr,[],or,Object.create(this.schemas)),ir.schemas[or]||(ir.schemas[or]=rr);var ar=scanSchema(or,rr);for(var cr in ar.id){var lr=ar.id[cr];ir.schemas[cr]=lr}}if(nr.required&&er===void 0){var ur=new ValidatorResult(er,rr,nr,ir);return ur.addError("is required, but is undefined"),ur}var ur=this.validateSchema(er,rr,nr,ir);if(ur){if(nr.throwAll&&ur.errors.length)throw new ValidatorResultError(ur)}else throw new Error("Result undefined");return ur};function shouldResolve(tr){var er=typeof tr=="string"?tr:tr.$ref;return typeof er=="string"?er:!1}Validator$1.prototype.validateSchema=function tr(er,rr,nr,ir){var sr=new ValidatorResult(er,rr,nr,ir);if(typeof rr=="boolean")rr===!0?rr={}:rr===!1&&(rr={type:[]});else if(!rr)throw new Error("schema is undefined");if(rr.extends)if(Array.isArray(rr.extends)){var or={schema:rr,ctx:ir};rr.extends.forEach(this.schemaTraverser.bind(this,or)),rr=or.schema,or.schema=null,or.ctx=null,or=null}else rr=helpers.deepMerge(rr,this.superResolve(rr.extends,ir));var ar=shouldResolve(rr);if(ar){var cr=this.resolve(rr,ar,ir),lr=new SchemaContext(cr.subschema,nr,ir.path,cr.switchSchema,ir.schemas);return this.validateSchema(er,cr.subschema,nr,lr)}var ur=nr&&nr.skipAttributes||[];for(var dr in rr)if(!attribute.ignoreProperties[dr]&&ur.indexOf(dr)<0){var yr=null,mr=this.attributes[dr];if(mr)yr=mr.call(this,er,rr,nr,ir);else if(nr.allowUnknownAttributes===!1)throw new SchemaError("Unsupported attribute: "+dr,rr);yr&&sr.importErrors(yr)}if(typeof nr.rewrite=="function"){var wr=nr.rewrite.call(this,er,rr,nr,ir);sr.instance=wr}return sr};Validator$1.prototype.schemaTraverser=function tr(er,rr){er.schema=helpers.deepMerge(er.schema,this.superResolve(rr,er.ctx))};Validator$1.prototype.superResolve=function tr(er,rr){var nr=shouldResolve(er);return nr?this.resolve(er,nr,rr).subschema:er};Validator$1.prototype.resolve=function tr(er,rr,nr){if(rr=nr.resolve(rr),nr.schemas[rr])return{subschema:nr.schemas[rr],switchSchema:rr};var ir=urilib.parse(rr),sr=ir&&ir.hash,or=sr&&sr.length&&rr.substr(0,rr.length-sr.length);if(!or||!nr.schemas[or])throw new SchemaError("no such schema <"+rr+">",er);var ar=helpers.objectGetPath(nr.schemas[or],sr.substr(1));if(ar===void 0)throw new SchemaError("no such schema "+sr+" located in <"+or+">",er);return{subschema:ar,switchSchema:rr}};Validator$1.prototype.testType=function tr(er,rr,nr,ir,sr){if(sr!==void 0){if(sr===null)throw new SchemaError('Unexpected null in "type" keyword');if(typeof this.types[sr]=="function")return this.types[sr].call(this,er);if(sr&&typeof sr=="object"){var or=this.validateSchema(er,sr,nr,ir);return or===void 0||!(or&&or.errors.length)}return!0}};var types=Validator$1.prototype.types={};types.string=function tr(er){return typeof er=="string"};types.number=function tr(er){return typeof er=="number"&&isFinite(er)};types.integer=function tr(er){return typeof er=="number"&&er%1===0};types.boolean=function tr(er){return typeof er=="boolean"};types.array=function tr(er){return Array.isArray(er)};types.null=function tr(er){return er===null};types.date=function tr(er){return er instanceof Date};types.any=function tr(er){return!0};types.object=function tr(er){return er&&typeof er=="object"&&!Array.isArray(er)&&!(er instanceof Date)};var validator$1=Validator$1,Validator=lib.Validator=validator$1;lib.ValidatorResult=helpers$3.ValidatorResult;lib.ValidatorResultError=helpers$3.ValidatorResultError;lib.ValidationError=helpers$3.ValidationError;lib.SchemaError=helpers$3.SchemaError;lib.SchemaScanResult=scan.SchemaScanResult;lib.scan=scan.scan;lib.validate=function(tr,er,rr){var nr=new Validator;return nr.validate(tr,er,rr)};function resemblesAddress(tr){return tr.length===2+20*2}function createWalletMiddleware({getAccounts:tr,getPrivateKey:er,processEthSignMessage:rr,processPersonalMessage:nr,processTransaction:ir,processSignTransaction:sr,processTypedMessage:or,processTypedMessageV3:ar,processTypedMessageV4:cr}){if(!tr)throw new Error("opts.getAccounts is required");async function lr(Ur,Dr){if(typeof Ur=="string"&&Ur.length>0){const zr=(await tr(Dr)).map(Mr=>Mr.toLowerCase()),Cr=Ur.toLowerCase();if(zr.includes(Cr))return Cr}throw rpcErrors.invalidParams({message:"Invalid parameters: must provide an Ethereum address."})}async function ur(Ur,Dr){Dr.result=await tr(Ur)}async function dr(Ur,Dr){const Hr=await tr(Ur);Dr.result=Hr[0]||null}async function yr(Ur,Dr){if(!ir)throw rpcErrors.methodNotSupported();const Hr=Ur.params[0]||{from:""};Hr.from=await lr(Hr.from,Ur),Dr.result=await ir(Hr,Ur)}async function mr(Ur,Dr){if(!sr)throw rpcErrors.methodNotSupported();const Hr=Ur.params[0]||{from:""};Hr.from=await lr(Hr.from,Ur),Dr.result=await sr(Hr,Ur)}async function wr(Ur,Dr){if(!rr)throw rpcErrors.methodNotSupported();const Hr=await lr(Ur.params[0],Ur),zr=Ur.params[1],Cr=Ur.params[2]||{},Mr=_objectSpread2(_objectSpread2({},Cr),{},{from:Hr,data:zr});Dr.result=await rr(Mr,Ur)}async function xr(Ur,Dr){if(!or)throw rpcErrors.methodNotSupported();const Hr=Ur.params[0],zr=await lr(Ur.params[1],Ur),Cr="V1",Mr=Ur.params[2]||{},Pr=_objectSpread2(_objectSpread2({},Mr),{},{from:zr,data:Hr});Dr.result=await or(Pr,Ur,Cr)}async function Or(Ur,Dr){if(!ar)throw rpcErrors.methodNotSupported();const Hr=await lr(Ur.params[0],Ur),zr=Ur.params[1],Cr="V3",Mr={data:zr,from:Hr,version:Cr};Dr.result=await ar(Mr,Ur,Cr)}async function Tr(Ur,Dr){if(!cr)throw rpcErrors.methodNotSupported();const Hr=await lr(Ur.params[0],Ur),zr=Ur.params[1],Cr="V4",Mr={data:zr,from:Hr,version:Cr};Dr.result=await cr(Mr,Ur,Cr)}async function Ar(Ur,Dr){if(!nr)throw rpcErrors.methodNotSupported();const Hr=Ur.params[0],zr=Ur.params[1],Cr=Ur.params[2]||{};let Mr,Pr;if(resemblesAddress(Hr)&&!resemblesAddress(zr)){let pr="The eth_personalSign method requires params ordered ";pr+="[message, address]. This was previously handled incorrectly, ",pr+="and has been corrected automatically. ",pr+="Please switch this param order for smooth behavior in the future.",Dr.warning=pr,Mr=Hr,Pr=zr}else Pr=Hr,Mr=zr;Mr=await lr(Mr,Ur);const Sr=_objectSpread2(_objectSpread2({},Cr),{},{from:Mr,data:Pr});Dr.result=await nr(Sr,Ur)}async function Nr(Ur,Dr){if(!er)throw rpcErrors.methodNotSupported();Dr.result=er(Ur)}return createScaffoldMiddleware({eth_accounts:createAsyncMiddleware(ur),eth_private_key:createAsyncMiddleware(Nr),private_key:createAsyncMiddleware(Nr),eth_coinbase:createAsyncMiddleware(dr),eth_sendTransaction:createAsyncMiddleware(yr),eth_signTransaction:createAsyncMiddleware(mr),eth_sign:createAsyncMiddleware(wr),eth_signTypedData:createAsyncMiddleware(xr),eth_signTypedData_v3:createAsyncMiddleware(Or),eth_signTypedData_v4:createAsyncMiddleware(Tr),personal_sign:createAsyncMiddleware(Ar)})}function createEthMiddleware(tr){const{getAccounts:er,getPrivateKey:rr,processTransaction:nr,processSignTransaction:ir,processEthSignMessage:sr,processTypedMessage:or,processTypedMessageV3:ar,processTypedMessageV4:cr,processPersonalMessage:lr}=tr;return mergeMiddleware([createScaffoldMiddleware({eth_syncing:!1}),createWalletMiddleware({getAccounts:er,getPrivateKey:rr,processTransaction:nr,processEthSignMessage:sr,processSignTransaction:ir,processTypedMessage:or,processTypedMessageV3:ar,processTypedMessageV4:cr,processPersonalMessage:lr})])}function createChainSwitchMiddleware({addChain:tr,switchChain:er}){async function rr(ir,sr){var or;const ar=(or=ir.params)!==null&&or!==void 0&&or.length?ir.params[0]:void 0;if(!ar)throw rpcErrors.invalidParams("Missing chain params");if(!ar.chainId)throw rpcErrors.invalidParams("Missing chainId in chainParams");if(!ar.rpcUrls||ar.rpcUrls.length===0)throw rpcErrors.invalidParams("Missing rpcUrls in chainParams");if(!ar.nativeCurrency)throw rpcErrors.invalidParams("Missing nativeCurrency in chainParams");sr.result=await tr(ar)}async function nr(ir,sr){var or;const ar=(or=ir.params)!==null&&or!==void 0&&or.length?ir.params[0]:void 0;if(!ar)throw rpcErrors.invalidParams("Missing chainId");sr.result=await er(ar)}return createScaffoldMiddleware({wallet_addEthereumChain:createAsyncMiddleware(rr),wallet_switchEthereumChain:createAsyncMiddleware(nr)})}function createAccountMiddleware({updatePrivatekey:tr}){async function er(rr,nr){var ir;const sr=(ir=rr.params)!==null&&ir!==void 0&&ir.length?rr.params[0]:void 0;if(!(sr!=null&&sr.privateKey))throw rpcErrors.invalidParams("Missing privateKey");nr.result=await tr(sr)}return createScaffoldMiddleware({wallet_updateAccount:createAsyncMiddleware(er)})}function createChainIdMiddleware(tr){return(er,rr,nr,ir)=>er.method==="eth_chainId"?(rr.result=tr,ir()):nr()}function createProviderConfigMiddleware(tr){return(er,rr,nr,ir)=>er.method==="eth_provider_config"?(rr.result=tr,ir()):nr()}function createJsonRpcClient(tr){const{chainId:er,rpcTarget:rr}=tr,nr=createFetchMiddleware({rpcTarget:rr});return{networkMiddleware:mergeMiddleware([createChainIdMiddleware(er),createProviderConfigMiddleware(tr),nr]),fetchMiddleware:nr}}const LegacyGasAPIEndpoint="https://gas-api.metaswap.codefi.network/networks/<chain_id>/gasPrices",EIP1559APIEndpoint="https://gas-api.metaswap.codefi.network/networks/<chain_id>/suggestedGasFees",TRANSACTION_ENVELOPE_TYPES={LEGACY:"0x0",ACCESS_LIST:"0x1",FEE_MARKET:"0x2"},TRANSACTION_TYPES={SENT_ETHER:"sentEther",CONTRACT_INTERACTION:"contractInteraction",DEPLOY_CONTRACT:"contractDeployment",STANDARD_TRANSACTION:"transaction"},GAS_ESTIMATE_TYPES={FEE_MARKET:"fee-market",LEGACY:"legacy",ETH_GASPRICE:"eth_gasPrice",NONE:"none"},BIG_NUMBER_WEI_MULTIPLIER=new BigNumber("1e18"),BIG_NUMBER_GWEI_MULTIPLIER=new BigNumber("1e9"),BIG_NUMBER_ETH_MULTIPLIER=new BigNumber("1"),toBigNumber={hex:tr=>typeof tr=="string"?new BigNumber(stripHexPrefix$5(tr),16):new BigNumber(tr,16),dec:tr=>new BigNumber(tr,10)},toNormalizedDenomination={WEI:tr=>tr.div(BIG_NUMBER_WEI_MULTIPLIER),GWEI:tr=>tr.div(BIG_NUMBER_GWEI_MULTIPLIER),ETH:tr=>tr.div(BIG_NUMBER_ETH_MULTIPLIER)},toSpecifiedDenomination={WEI:tr=>tr.times(BIG_NUMBER_WEI_MULTIPLIER).dp(0,BigNumber.ROUND_HALF_UP),GWEI:tr=>tr.times(BIG_NUMBER_GWEI_MULTIPLIER).dp(9,BigNumber.ROUND_HALF_UP),ETH:tr=>tr.times(BIG_NUMBER_ETH_MULTIPLIER).dp(9,BigNumber.ROUND_HALF_UP)},baseChange={hex:tr=>tr.toString(16),dec:tr=>new BigNumber(tr).toString(10)},converter=tr=>{const{value:er,fromNumericBase:rr,fromDenomination:nr,toNumericBase:ir,toDenomination:sr,numberOfDecimals:or}=tr;let ar=toBigNumber[rr](er);return nr&&(ar=toNormalizedDenomination[nr](ar)),sr&&(ar=toSpecifiedDenomination[sr](ar)),or&&(ar=ar.dp(or,BigNumber.ROUND_HALF_DOWN)),ir&&(ar=baseChange[ir](ar)),ar},conversionUtil=(tr,{fromNumericBase:er="hex",toNumericBase:rr,fromDenomination:nr,toDenomination:ir,numberOfDecimals:sr})=>converter({fromNumericBase:er,toNumericBase:rr,fromDenomination:nr,toDenomination:ir,numberOfDecimals:sr,value:tr||"0"});function decGWEIToHexWEI(tr){return conversionUtil(tr,{fromNumericBase:"dec",toNumericBase:"hex",fromDenomination:"GWEI",toDenomination:"WEI"})}function hexWEIToDecGWEI(tr){return conversionUtil(tr,{fromNumericBase:"hex",toNumericBase:"dec",fromDenomination:"WEI",toDenomination:"GWEI"})}function bnLessThan(tr,er){return tr==null||er===null||er===void 0?null:new BigNumber(tr,10).lt(er,10)}function bnToHex(tr){return addHexPrefix$2(tr.toString(16))}function hexToBn(tr){return BN.isBN(tr)?tr:new BN(stripHexPrefix$5(tr),16)}function BnMultiplyByFraction(tr,er,rr){const nr=new BN(er),ir=new BN(rr);return tr.mul(nr).div(ir)}let SignTypedDataVersion=function(tr){return tr.V1="V1",tr.V3="V3",tr.V4="V4",tr}({});function normalizeGWEIDecimalNumbers(tr){const er=decGWEIToHexWEI(tr);return hexWEIToDecGWEI(er).toString()}async function fetchEip1159GasEstimates(tr){const er=await get$1(tr);return _objectSpread2(_objectSpread2({},er),{},{estimatedBaseFee:normalizeGWEIDecimalNumbers(er.estimatedBaseFee),low:_objectSpread2(_objectSpread2({},er.low),{},{suggestedMaxPriorityFeePerGas:normalizeGWEIDecimalNumbers(er.low.suggestedMaxPriorityFeePerGas),suggestedMaxFeePerGas:normalizeGWEIDecimalNumbers(er.low.suggestedMaxFeePerGas)}),medium:_objectSpread2(_objectSpread2({},er.medium),{},{suggestedMaxPriorityFeePerGas:normalizeGWEIDecimalNumbers(er.medium.suggestedMaxPriorityFeePerGas),suggestedMaxFeePerGas:normalizeGWEIDecimalNumbers(er.medium.suggestedMaxFeePerGas)}),high:_objectSpread2(_objectSpread2({},er.high),{},{suggestedMaxPriorityFeePerGas:normalizeGWEIDecimalNumbers(er.high.suggestedMaxPriorityFeePerGas),suggestedMaxFeePerGas:normalizeGWEIDecimalNumbers(er.high.suggestedMaxFeePerGas)})})}async function fetchLegacyGasPriceEstimates(tr){const er=await get$1(tr,{referrer:tr,referrerPolicy:"no-referrer-when-downgrade",method:"GET",mode:"cors"});return{low:er.SafeGasPrice,medium:er.ProposeGasPrice,high:er.FastGasPrice}}const validateTypedMessageParams=async(tr,er)=>{try{assert.ok(tr&&typeof tr=="object","Params must be an object."),assert.ok("data"in tr,'Params must include a "data" field.'),assert.ok("from"in tr,'Params must include a "from" field.'),assert.ok(typeof tr.from=="string"&&isValidAddress(tr.from),'"from" field must be a valid, lowercase, hexadecimal Ethereum address string.');let nr=null,ir=null;switch(tr.version){case SignTypedDataVersion.V1:typeof tr.data=="string"?assert.doesNotThrow(()=>{nr=JSON.parse(tr.data)},'"data" must be a valid JSON string.'):nr=tr.data,assert.ok(Array.isArray(nr),"params.data must be an array."),assert.doesNotThrow(()=>{dist$8.typedSignatureHash(nr)},"Signing data must be valid EIP-712 typed data.");break;case SignTypedDataVersion.V3:case SignTypedDataVersion.V4:{var rr;typeof tr.data=="string"?assert.doesNotThrow(()=>{nr=JSON.parse(tr.data)},'"data" must be a valid JSON string.'):nr=tr.data;const sr=nr;assert.ok(sr.primaryType in sr.types,`Primary type of "${sr.primaryType}" has no type definition.`);const or=lib.validate(sr,dist$8.TYPED_MESSAGE_SCHEMA.properties);assert.strictEqual(or.errors.length,0,"Signing data must conform to EIP-712 schema. See https://git.io/fNtcx."),ir=(rr=sr.domain)===null||rr===void 0?void 0:rr.chainId,ir&&(assert.ok(!Number.isNaN(er),`Cannot sign messages for chainId "${ir}", because Web3Auth is switching networks.`),typeof ir=="string"&&(ir=Number.parseInt(ir,isHexStrict(ir)?16:10)),assert.strictEqual(ir,er,`Provided chainId "${ir}" must match the active chainId "${er}"`));break}default:assert.fail(`Unknown typed data version "${tr.version}"`)}}catch(nr){throw rpcErrors.invalidInput({message:nr==null?void 0:nr.message})}};class TransactionFormatter{constructor({getProviderEngineProxy:er}){_defineProperty(this,"API_SUPPORTED_CHAINIDS",new Set(["0x1","0x5","0x13881","0xa4b1","0xa86a","0x2105","0x38","0xfa","0xa","0x89"])),_defineProperty(this,"chainConfig",null),_defineProperty(this,"getProviderEngineProxy",void 0),_defineProperty(this,"isEIP1559Compatible",!1),this.getProviderEngineProxy=er}get providerProxy(){return this.getProviderEngineProxy()}async init(){this.chainConfig=await this.providerProxy.request({method:"eth_provider_config"}),this.isEIP1559Compatible=await this.getEIP1559Compatibility()}async getCommonConfiguration(){if(!this.chainConfig)throw new Error("Chain config not initialized");const{displayName:er,chainId:rr}=this.chainConfig,{Hardfork:nr,Common:ir}=await __vitePreload(async()=>{const{Hardfork:ar,Common:cr}=await import("./index-gI_TkwFI.js");return{Hardfork:ar,Common:cr}},[]),sr=this.isEIP1559Compatible?nr.Paris:nr.Berlin,or={name:er,chainId:rr==="loading"?0:Number.parseInt(rr,16),networkId:rr==="loading"?0:Number.parseInt(rr,16),defaultHardfork:sr};return ir.custom(or)}async formatTransaction(er){if(!this.chainConfig)throw new Error("Chain config not initialized");const rr=_objectSpread2({},er);if(rr.nonce===void 0&&(rr.nonce=await this.providerProxy.request({method:"eth_getTransactionCount",params:[er.from,"latest"]})),!this.isEIP1559Compatible&&rr.gasPrice){if(rr.maxFeePerGas&&delete rr.maxFeePerGas,rr.maxPriorityFeePerGas&&delete rr.maxPriorityFeePerGas,!rr.gasLimit)if(rr.gas)rr.gasLimit=rr.gas;else{const or=await this.getDefaultGasLimit(rr);or&&(rr.gasLimit=or)}return rr}if(!rr.gasLimit)if(rr.gas)rr.gasLimit=rr.gas;else{const or=await this.getDefaultGasLimit(rr);or&&(rr.gasLimit=or)}const{gasPrice:nr,maxFeePerGas:ir,maxPriorityFeePerGas:sr}=await this.getDefaultGasFees(rr);return this.isEIP1559Compatible?(rr.gasPrice&&!rr.maxFeePerGas&&!rr.maxPriorityFeePerGas?(rr.maxFeePerGas=rr.gasPrice,rr.maxPriorityFeePerGas=bnLessThan(typeof sr=="string"?stripHexPrefix$5(sr):sr,typeof rr.gasPrice=="string"?stripHexPrefix$5(rr.gasPrice):rr.gasPrice)?sr:rr.gasPrice):(ir&&!rr.maxFeePerGas&&(rr.maxFeePerGas=ir),sr&&!rr.maxPriorityFeePerGas&&(rr.maxPriorityFeePerGas=sr),nr&&!rr.maxFeePerGas&&(rr.maxFeePerGas=nr),rr.maxFeePerGas&&!rr.maxPriorityFeePerGas&&(rr.maxPriorityFeePerGas=rr.maxFeePerGas)),delete rr.gasPrice):(delete rr.maxPriorityFeePerGas,delete rr.maxFeePerGas),nr&&!rr.gasPrice&&!rr.maxPriorityFeePerGas&&!rr.maxFeePerGas&&(rr.gasPrice=nr),rr.type=this.isEIP1559Compatible?TRANSACTION_ENVELOPE_TYPES.FEE_MARKET:TRANSACTION_ENVELOPE_TYPES.LEGACY,rr.chainId=this.chainConfig.chainId,rr}async fetchEthGasPriceEstimate(){const er=await this.providerProxy.request({method:"eth_gasPrice",params:[]});return{gasPrice:hexWEIToDecGWEI(er).toString()}}async fetchGasEstimatesViaEthFeeHistory(){const rr="latest",nr=[10,50,95],ir=await this.providerProxy.request({method:"eth_feeHistory",params:[10,rr,nr]}),sr=ir.baseFeePerGas[ir.baseFeePerGas.length-1],or=ir.reward.reduce((ar,cr)=>({slow:ar.slow.plus(new BigNumber(cr[0],16)),average:ar.average.plus(new BigNumber(cr[1],16)),fast:ar.fast.plus(new BigNumber(cr[2],16))}),{slow:new BigNumber(0),average:new BigNumber(0),fast:new BigNumber(0)});return{estimatedBaseFee:hexWEIToDecGWEI(sr).toString(),high:{maxWaitTimeEstimate:3e4,minWaitTimeEstimate:15e3,suggestedMaxFeePerGas:hexWEIToDecGWEI(or.fast.plus(sr).toString(16)).toString(),suggestedMaxPriorityFeePerGas:hexWEIToDecGWEI(or.fast.toString(16)).toString()},medium:{maxWaitTimeEstimate:45e3,minWaitTimeEstimate:15e3,suggestedMaxFeePerGas:hexWEIToDecGWEI(or.average.plus(sr).toString(16)).toString(),suggestedMaxPriorityFeePerGas:hexWEIToDecGWEI(or.average.toString(16)).toString()},low:{maxWaitTimeEstimate:6e4,minWaitTimeEstimate:15e3,suggestedMaxFeePerGas:hexWEIToDecGWEI(or.slow.plus(sr).toString(16)).toString(),suggestedMaxPriorityFeePerGas:hexWEIToDecGWEI(or.slow.toString(16)).toString()}}}async getEIP1559Compatibility(){const er=await this.providerProxy.request({method:"eth_getBlockByNumber",params:["latest",!1]});return!!(er&&er.baseFeePerGas!==void 0)}async fetchGasFeeEstimateData(){if(!this.chainConfig)throw new Error("Chain config not initialized");const er=this.chainConfig.chainId==="0x1",rr=Number.parseInt(this.chainConfig.chainId,16);let nr;try{if(this.isEIP1559Compatible){let ir;try{if(this.API_SUPPORTED_CHAINIDS.has(this.chainConfig.chainId))ir=await fetchEip1159GasEstimates(EIP1559APIEndpoint.replace("<chain_id>",`${rr}`));else throw new Error("Chain id not supported by api")}catch{ir=await this.fetchGasEstimatesViaEthFeeHistory()}nr={gasFeeEstimates:ir,gasEstimateType:GAS_ESTIMATE_TYPES.FEE_MARKET}}else if(er)nr={gasFeeEstimates:await fetchLegacyGasPriceEstimates(LegacyGasAPIEndpoint.replace("<chain_id>",`${rr}`)),gasEstimateType:GAS_ESTIMATE_TYPES.LEGACY};else throw new Error("Main gas fee/price estimation failed. Use fallback")}catch{try{nr={gasFeeEstimates:await this.fetchEthGasPriceEstimate(),gasEstimateType:GAS_ESTIMATE_TYPES.ETH_GASPRICE}}catch(sr){throw new Error(`Gas fee/price estimation failed. Message: ${sr.message}`)}}return nr}async getDefaultGasFees(er){if(!this.isEIP1559Compatible&&er.gasPrice||this.isEIP1559Compatible&&er.maxFeePerGas&&er.maxPriorityFeePerGas)return{};try{const{gasFeeEstimates:nr,gasEstimateType:ir}=await this.fetchGasFeeEstimateData();if(this.isEIP1559Compatible&&ir===GAS_ESTIMATE_TYPES.FEE_MARKET){const{medium:{suggestedMaxPriorityFeePerGas:sr,suggestedMaxFeePerGas:or}={}}=nr;if(sr&&or)return{maxFeePerGas:addHexPrefix$2(decGWEIToHexWEI(or)),maxPriorityFeePerGas:addHexPrefix$2(decGWEIToHexWEI(sr))}}else{if(ir===GAS_ESTIMATE_TYPES.LEGACY)return{gasPrice:addHexPrefix$2(decGWEIToHexWEI(nr.medium))};if(ir===GAS_ESTIMATE_TYPES.ETH_GASPRICE)return{gasPrice:addHexPrefix$2(decGWEIToHexWEI(nr.gasPrice))}}}catch(nr){loglevel$1.error(nr)}const{gasPrice:rr}=await this.fetchEthGasPriceEstimate();return{gasPrice:addHexPrefix$2(decGWEIToHexWEI(rr))}}async estimateTxGas(er){const rr=_objectSpread2({},er);return delete rr.gasPrice,delete rr.maxFeePerGas,delete rr.maxPriorityFeePerGas,await this.providerProxy.request({method:"eth_estimateGas",params:[rr]})}async analyzeGasUsage(er){const rr=await this.providerProxy.request({method:"eth_getBlockByNumber",params:["latest",!1]}),nr=hexToBn(rr.gasLimit),ir=BnMultiplyByFraction(nr,19,20);let sr=bnToHex(ir);try{sr=await this.estimateTxGas(er)}catch(or){loglevel$1.warn(or)}return{blockGasLimit:rr.gasLimit,estimatedGasHex:sr}}addGasBuffer(er,rr,nr=1.5){const ir=hexToBn(er),or=hexToBn(rr).muln(.9),ar=ir.muln(nr);return ir.gt(or)?bnToHex(ir):ar.lt(or)?bnToHex(ar):bnToHex(or)}async determineTransactionCategory(er){const{data:rr,to:nr}=er;let ir="",sr;if(rr&&!nr)sr=TRANSACTION_TYPES.DEPLOY_CONTRACT;else{try{ir=await this.providerProxy.request({method:"eth_getCode",params:[nr,"latest"]})}catch(ar){loglevel$1.warn(ar)}sr=!ir||ir==="0x"||ir==="0x0"?TRANSACTION_TYPES.SENT_ETHER:TRANSACTION_TYPES.CONTRACT_INTERACTION}return{transactionCategory:sr,code:ir}}async getDefaultGasLimit(er){const{transactionCategory:rr}=await this.determineTransactionCategory(_objectSpread2({},er));if(er.gas)return er.gas;if(er.to&&rr===TRANSACTION_TYPES.SENT_ETHER){if(er.data)throw Error("TxGasUtil - Trying to call a function on a non-contract address");return addHexPrefix$2(21e3.toString(16))}const{blockGasLimit:nr,estimatedGasHex:ir}=await this.analyzeGasUsage(er);return this.addGasBuffer(addHexPrefix$2(ir),nr)}}async function signTx(tr,er,rr){const nr=await rr.formatTransaction(tr),ir=await rr.getCommonConfiguration(),{TransactionFactory:sr}=await __vitePreload(async()=>{const{TransactionFactory:cr}=await import("./index-BbbDBVgC.js");return{TransactionFactory:cr}},__vite__mapDeps([0,1])),ar=sr.fromTxData(nr,{common:ir}).sign(Buffer.from(er,"hex")).serialize();return Buffer.from(ar)}function getProviderHandlers({txFormatter:tr,privKey:er,getProviderEngineProxy:rr}){return{getAccounts:async nr=>[`0x${Buffer.from(privateToAddress(Buffer.from(er,"hex"))).toString("hex")}`],getPrivateKey:async nr=>er,processTransaction:async(nr,ir)=>{const sr=rr();if(!sr)throw providerErrors.custom({message:"Provider is not initialized",code:4902});nr.input&&!nr.data&&(nr.data=nr.input);const or=await signTx(nr,er,tr);return await sr.request({method:"eth_sendRawTransaction",params:["0x".concat(or.toString("hex"))]})},processSignTransaction:async(nr,ir)=>{if(!rr())throw providerErrors.custom({message:"Provider is not initialized",code:4902});return nr.input&&!nr.data&&(nr.data=nr.input),`0x${(await signTx(nr,er,tr)).toString("hex")}`},processEthSignMessage:async(nr,ir)=>signMessage(er,nr.data),processPersonalMessage:async(nr,ir)=>{const sr=Buffer.from(er,"hex");return dist$8.personalSign({privateKey:sr,data:nr.data})},processTypedMessage:async(nr,ir)=>{loglevel$1.debug("processTypedMessage",nr);const sr=Buffer.from(er,"hex"),or=rr();if(!or)throw providerErrors.custom({message:"Provider is not initialized",code:4902});const ar=await or.request({method:"eth_chainId"}),cr=Number.parseInt(ar,isHexStrict(ar)?16:10),lr=_objectSpread2(_objectSpread2({},nr),{},{version:SignTypedDataVersion.V1});await validateTypedMessageParams(lr,cr);const ur=typeof lr.data=="string"?JSON.parse(lr.data):lr.data;return dist$8.signTypedData({privateKey:sr,data:ur,version:SignTypedDataVersion.V1})},processTypedMessageV3:async(nr,ir)=>{loglevel$1.debug("processTypedMessageV3",nr);const sr=Buffer.from(er,"hex"),or=rr();if(!or)throw providerErrors.custom({message:"Provider is not initialized",code:4902});const ar=await or.request({method:"eth_chainId"}),cr=Number.parseInt(ar,isHexStrict(ar)?16:10);await validateTypedMessageParams(nr,cr);const lr=typeof nr.data=="string"?JSON.parse(nr.data):nr.data;return dist$8.signTypedData({privateKey:sr,data:lr,version:SignTypedDataVersion.V3})},processTypedMessageV4:async(nr,ir)=>{loglevel$1.debug("processTypedMessageV4",nr);const sr=Buffer.from(er,"hex"),or=rr();if(!or)throw providerErrors.custom({message:"Provider is not initialized",code:4902});const ar=await or.request({method:"eth_chainId"}),cr=Number.parseInt(ar,isHexStrict(ar)?16:10);await validateTypedMessageParams(nr,cr);const lr=typeof nr.data=="string"?JSON.parse(nr.data):nr.data;return dist$8.signTypedData({privateKey:sr,data:lr,version:SignTypedDataVersion.V4})}}}var _EthereumPrivateKeyProvider;class EthereumPrivateKeyProvider extends BaseProvider$1{constructor({config:er,state:rr}){super({config:er,state:rr}),_defineProperty(this,"PROVIDER_CHAIN_NAMESPACE",CHAIN_NAMESPACES.EIP155)}async enable(){if(!this.state.privateKey)throw providerErrors.custom({message:"Private key is not found in state, plz pass it in constructor state param",code:4902});return await this.setupProvider(this.state.privateKey),this._providerEngineProxy.request({method:"eth_accounts"})}async setupProvider(er){const{chainNamespace:rr}=this.config.chainConfig;if(rr!==this.PROVIDER_CHAIN_NAMESPACE)throw WalletInitializationError.incompatibleChainNameSpace("Invalid chain namespace");const nr=new TransactionFormatter({getProviderEngineProxy:this.getProviderEngineProxy.bind(this)}),ir=getProviderHandlers({txFormatter:nr,privKey:er,getProviderEngineProxy:this.getProviderEngineProxy.bind(this)}),sr=createEthMiddleware(ir),or=this.getChainSwitchMiddleware(),ar=new JRPCEngine,{networkMiddleware:cr}=createJsonRpcClient(this.config.chainConfig);ar.push(sr),ar.push(or),ar.push(this.getAccountMiddleware()),ar.push(cr);const lr=providerFromEngine(ar);this.updateProviderEngineProxy(lr),await nr.init(),await this.lookupNetwork()}async updateAccount(er){if(!this._providerEngineProxy)throw providerErrors.custom({message:"Provider is not initialized",code:4902});await this._providerEngineProxy.request({method:"eth_private_key"})!==er.privateKey&&(await this.setupProvider(er.privateKey),this.emit("accountsChanged",{accounts:await this._providerEngineProxy.request({method:"eth_accounts"})}))}async switchChain(er){if(!this._providerEngineProxy)throw providerErrors.custom({message:"Provider is not initialized",code:4902});const rr=this.getChainConfig(er.chainId);this.update({chainId:"loading"}),this.configure({chainConfig:rr});const nr=await this._providerEngineProxy.request({method:"eth_private_key"});await this.setupProvider(nr)}async lookupNetwork(){if(!this._providerEngineProxy)throw providerErrors.custom({message:"Provider is not initialized",code:4902});const{chainId:er}=this.config.chainConfig;if(!er)throw rpcErrors.invalidParams("chainId is required while lookupNetwork");const rr=await this._providerEngineProxy.request({method:"net_version",params:[]}),nr=isHexString$5(rr)?parseInt(rr,16):parseInt(rr,10);if(parseInt(er,16)!==nr)throw providerErrors.chainDisconnected(`Invalid network, net_version is: ${rr}`);return this.state.chainId!==er&&(this.emit("chainChanged",er),this.emit("connect",{chainId:er})),this.update({chainId:er}),rr}getChainSwitchMiddleware(){return createChainSwitchMiddleware({addChain:async nr=>{const{chainId:ir,chainName:sr,rpcUrls:or,blockExplorerUrls:ar,nativeCurrency:cr,iconUrls:lr}=nr;this.addChain({chainNamespace:CHAIN_NAMESPACES.EIP155,chainId:ir,ticker:(cr==null?void 0:cr.symbol)||"ETH",tickerName:(cr==null?void 0:cr.name)||"Ether",displayName:sr,rpcTarget:or[0],blockExplorerUrl:(ar==null?void 0:ar[0])||"",decimals:(cr==null?void 0:cr.decimals)||18,logo:(lr==null?void 0:lr[0])||"https://images.toruswallet.io/eth.svg"})},switchChain:async nr=>{const{chainId:ir}=nr;await this.switchChain({chainId:ir})}})}getAccountMiddleware(){return createAccountMiddleware({updatePrivatekey:async rr=>{const{privateKey:nr}=rr;await this.updateAccount({privateKey:nr})}})}}_EthereumPrivateKeyProvider=EthereumPrivateKeyProvider;_defineProperty(EthereumPrivateKeyProvider,"getProviderInstance",async tr=>{const er=new _EthereumPrivateKeyProvider({config:{chainConfig:tr.chainConfig}});return await er.setupProvider(tr.privKey),er});class BaseSessionManager{constructor(){_defineProperty(this,"sessionId",void 0)}checkSessionParams(){if(!this.sessionId)throw new Error("Session id is required");this.sessionId=this.sessionId.padStart(64,"0")}request(er){let{method:rr="GET",url:nr,data:ir={},headers:sr={}}=er;const or={headers:sr};switch(rr){case"GET":return get$1(nr,or);case"POST":return post(nr,ir,or);case"PUT":return put(nr,ir,or);case"PATCH":return patch$4(nr,ir,or)}throw new Error("Invalid method type")}}const DEFAULT_SESSION_TIMEOUT=86400;class OpenloginSessionManager extends BaseSessionManager{constructor(){let{sessionServerBaseUrl:er,sessionNamespace:rr,sessionTime:nr,sessionId:ir}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(),_defineProperty(this,"sessionServerBaseUrl","https://session.web3auth.io"),_defineProperty(this,"sessionNamespace",void 0),_defineProperty(this,"sessionTime",DEFAULT_SESSION_TIMEOUT),_defineProperty(this,"sessionId",""),er&&(this.sessionServerBaseUrl=er),rr&&(this.sessionNamespace=rr),nr&&(this.sessionTime=nr),ir&&(this.sessionId=ir.padStart(64,"0"))}static generateRandomSessionKey(){return generatePrivate().toString("hex").padStart(64,"0")}async createSession(er){super.checkSessionParams();const rr=Buffer.from(this.sessionId,"hex"),nr=getPublic(rr).toString("hex"),ir=await encryptData(this.sessionId,er),sr=(await sign(rr,keccak256(Buffer.from(ir,"utf8")))).toString("hex"),or={key:nr,data:ir,signature:sr,namespace:this.sessionNamespace,timeout:this.sessionTime};return await super.request({method:"POST",url:`${this.sessionServerBaseUrl}/store/set`,data:or}),this.sessionId}async authorizeSession(){super.checkSessionParams();const er=getPublic(Buffer.from(this.sessionId,"hex")).toString("hex"),rr=new URL(`${this.sessionServerBaseUrl}/store/get`);rr.searchParams.append("key",er),this.sessionNamespace&&rr.searchParams.append("namespace",this.sessionNamespace);const nr=await super.request({url:rr.toString()});if(!nr.message)throw new Error("Session Expired or Invalid public key");const ir=await decryptData(this.sessionId,nr.message);if(ir.error)throw new Error("There was an error decrypting data.");return ir}async updateSession(er){super.checkSessionParams();const rr=Buffer.from(this.sessionId,"hex"),nr=getPublic(rr).toString("hex"),ir=await encryptData(this.sessionId,er),sr=(await sign(rr,keccak256(Buffer.from(ir,"utf8")))).toString("hex"),or={key:nr,data:ir,signature:sr,namespace:this.sessionNamespace};await super.request({method:"PUT",url:`${this.sessionServerBaseUrl}/store/update`,data:or})}async invalidateSession(){super.checkSessionParams();const er=Buffer.from(this.sessionId,"hex"),rr=getPublic(er).toString("hex"),nr=await encryptData(this.sessionId,{}),ir=(await sign(er,keccak256(Buffer.from(nr,"utf8")))).toString("hex"),sr={key:rr,data:nr,signature:ir,namespace:this.sessionNamespace,timeout:1};return await super.request({method:"POST",url:`${this.sessionServerBaseUrl}/store/set`,data:sr}),this.sessionId="",!0}}var log$1=log$3.getLogger("SecurePubSub");class SecurePubSub{constructor(){let er=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};_defineProperty(this,"options",void 0),_defineProperty(this,"SOCKET_CONN",null),this.options=er,this.options.timeout=er.timeout||600,this.options.serverUrl=er.serverUrl||"https://session.web3auth.io",this.options.enableLogging=er.enableLogging||!1,this.options.namespace=er.namespace||"",this.options.sameIpCheck=er.sameIpCheck||!1,this.options.sameOriginCheck=er.sameOriginCheck||!1,this.options.enableLogging?log$1.enableAll():log$1.disableAll()}static setLogLevel(er){log$1.setLevel(er),setLogLevel(er)}async publish(er,rr){const nr=keccak256(Buffer.from(er,"utf8")),ir=await encryptData(nr.toString("hex"),rr),sr=await sign(nr,keccak256(Buffer.from(ir,"utf8"))),or={key:getPublic(nr).toString("hex"),data:ir,signature:sr.toString("hex"),timeout:this.options.timeout,namespace:this.options.namespace,sameIpCheck:this.options.sameIpCheck,sameOriginCheck:this.options.sameOriginCheck};return post(`${this.options.serverUrl}/channel/set`,or)}async subscribe(er){let rr=!0;const nr=keccak256(Buffer.from(er,"utf8")),ir=getPublic(nr).toString("hex"),sr=this.getSocketConnection();sr.connected?(log$1.debug("already connected with socket"),sr.emit("check_auth_status",ir,{namespace:this.options.namespace,sameIpCheck:this.options.sameIpCheck,sameOriginCheck:this.options.sameOriginCheck})):sr.once("connect",()=>{log$1.debug("connected with socket"),sr.emit("check_auth_status",ir,{namespace:this.options.namespace,sameIpCheck:this.options.sameIpCheck,sameOriginCheck:this.options.sameOriginCheck})});const or=()=>{sr.once("connect",async()=>{log$1.debug("connected with socket using reconnect"),rr&&sr.emit("check_auth_status",ir,{namespace:this.options.namespace,sameIpCheck:this.options.sameIpCheck,sameOriginCheck:this.options.sameOriginCheck})})},ar=()=>{rr||document.removeEventListener("visibilitychange",ar),!sr.connected&&document.visibilityState==="visible"&&or()},cr=()=>{log$1.debug("socket disconnected",rr),rr?(log$1.error("socket disconnected unexpectedly, reconnecting socket"),or()):sr.removeListener("disconnect",cr)};sr.on("disconnect",cr);const lr=new Promise((ur,dr)=>{const yr=async mr=>{try{const wr=await decryptData(nr.toString("hex"),mr);log$1.info("got data",wr),ur(wr)}catch(wr){log$1.error(wr),dr(wr)}finally{rr=!1,document.removeEventListener("visibilitychange",ar)}};log$1.info("listening to",`${ir}_success`),sr.once(`${ir}_success`,yr)});return typeof document<"u"&&document.addEventListener("visibilitychange",ar),lr}cleanup(){this.SOCKET_CONN&&(this.SOCKET_CONN.disconnect(),this.SOCKET_CONN=null)}getSocketConnection(){if(this.SOCKET_CONN)return this.SOCKET_CONN;const er=lookup(this.options.serverUrl,{transports:["websocket","polling"],withCredentials:!0,reconnectionDelayMax:1e4,reconnectionAttempts:10});return er.on("connect_error",rr=>{er.io.opts.transports=["polling","websocket"],log$1.error("connect error",rr)}),er.on("connect",async()=>{const{engine:rr}=er.io;log$1.debug("initially connected to",rr.transport.name),rr.once("upgrade",()=>{log$1.debug("upgraded",rr.transport.name)}),rr.once("close",nr=>{log$1.debug("connection closed",nr)})}),er.on("error",rr=>{log$1.error("socket errored",rr),er.disconnect()}),this.SOCKET_CONN=er,this.SOCKET_CONN}}class OpenloginError extends CustomError{constructor(er,rr){super(rr),_defineProperty(this,"code",void 0),_defineProperty(this,"message",void 0),this.code=er,this.message=rr||"",Object.defineProperty(this,"name",{value:"OpenloginError"})}toJSON(){return{name:this.name,code:this.code,message:this.message}}toString(){return JSON.stringify(this.toJSON())}}class InitializationError extends OpenloginError{constructor(er,rr){super(er,rr),Object.defineProperty(this,"name",{value:"InitializationError"})}static fromCode(er){let rr=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";return new InitializationError(er,`${InitializationError.messages[er]}, ${rr}`)}static invalidParams(){let er=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return InitializationError.fromCode(5001,er)}static notInitialized(){let er=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return InitializationError.fromCode(5002,er)}}_defineProperty(InitializationError,"messages",{5e3:"Custom",5001:"Invalid constructor params",5002:"SDK not initialized. please call init first"});class LoginError extends OpenloginError{constructor(er,rr){super(er,rr),Object.defineProperty(this,"name",{value:"LoginError"})}static fromCode(er){let rr=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";return new LoginError(er,`${LoginError.messages[er]}, ${rr}`)}static invalidLoginParams(){let er=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return LoginError.fromCode(5111,er)}static userNotLoggedIn(){let er=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return LoginError.fromCode(5112,er)}static popupClosed(){let er=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return LoginError.fromCode(5113,er)}static loginFailed(){let er=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return LoginError.fromCode(5114,er)}static popupBlocked(){let er=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return LoginError.fromCode(5115,er)}static mfaAlreadyEnabled(){let er=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return LoginError.fromCode(5116,er)}static mfaNotEnabled(){let er=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return LoginError.fromCode(5117,er)}}_defineProperty(LoginError,"messages",{5e3:"Custom",5111:"Invalid login params",5112:"User not logged in.",5113:"login popup has been closed by the user",5114:"Login failed",5115:"Popup was blocked. Please call this function as soon as user clicks button or use redirect mode",5116:"MFA already enabled",5117:"MFA not yet enabled. Please call `enableMFA` first"});const loglevel=loglevelExports.getLogger("openlogin");loglevel.setLevel("error");const version$2="8.2.1";function getHashQueryParams(){let tr=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;const er={},rr=new URLSearchParams(window.location.search.slice(1));rr.forEach((or,ar)=>{ar!=="b64Params"&&(er[ar]=or)});const nr=rr.get("b64Params");if(nr)try{const or=JSON.parse(safeatob(nr));Object.keys(or).forEach(ar=>{er[ar]=or[ar]})}catch(or){loglevel.error(or)}const ir=new URLSearchParams(window.location.hash.substring(1));ir.forEach((or,ar)=>{ar!=="b64Params"&&(er[ar]=or)});const sr=ir.get("b64Params");if(sr)try{const or=JSON.parse(safeatob(sr));Object.keys(or).forEach(ar=>{er[ar]=or[ar]})}catch(or){loglevel.error(or)}if(tr){const or=new URL(window.location.origin+window.location.pathname);rr.size>0&&(rr.delete("error"),rr.delete("state"),rr.delete("b64Params"),rr.delete("sessionNamespace"),or.search=rr.toString()),ir.size>0&&(ir.delete("error"),ir.delete("state"),ir.delete("b64Params"),ir.delete("sessionNamespace"),or.hash=ir.toString()),window.history.replaceState(_objectSpread2(_objectSpread2({},window.history.state),{},{as:or.href,url:or.href}),"",or.href)}return er}function constructURL(tr){const{baseURL:er,query:rr,hash:nr}=tr,ir=new URL(er);if(rr&&Object.keys(rr).forEach(sr=>{ir.searchParams.append(sr,rr[sr])}),nr){const sr=new URL(constructURL({baseURL:er,query:nr})).searchParams.toString();ir.hash=sr}return ir.toString()}function getPopupFeatures(){if(typeof window>"u")return"";const tr=window.screenLeft!==void 0?window.screenLeft:window.screenX,er=window.screenTop!==void 0?window.screenTop:window.screenY,rr=1200,nr=700,ir=window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:window.screen.width,sr=window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:window.screen.height,or=1,ar=Math.abs((ir-rr)/2/or+tr),cr=Math.abs((sr-nr)/2/or+er);return`titlebar=0,toolbar=0,status=0,location=0,menubar=0,height=${nr/or},width=${rr/or},top=${cr},left=${ar}`}function isMobileOrTablet(){if(typeof window>"u")return!1;const er=Bowser.getParser(window.navigator.userAgent).getPlatform();return er.type===Bowser.PLATFORMS_MAP.tablet||er.type===Bowser.PLATFORMS_MAP.mobile}function getTimeout(tr){return(tr===LOGIN_PROVIDER.FACEBOOK||tr===LOGIN_PROVIDER.LINE)&&isMobileOrTablet()?1e3*60*5:1e3*10}let PopupHandler$1=class extends eventsExports.EventEmitter{constructor(er){let{url:rr,target:nr,features:ir,timeout:sr=3e4}=er;super(),_defineProperty(this,"url",void 0),_defineProperty(this,"target",void 0),_defineProperty(this,"features",void 0),_defineProperty(this,"window",void 0),_defineProperty(this,"windowTimer",void 0),_defineProperty(this,"iClosedWindow",void 0),_defineProperty(this,"timeout",void 0),this.url=rr,this.target=nr||"_blank",this.features=ir||getPopupFeatures(),this.window=void 0,this.windowTimer=void 0,this.iClosedWindow=!1,this.timeout=sr,this._setupTimer()}_setupTimer(){this.windowTimer=Number(setInterval(()=>{this.window&&this.window.closed&&(clearInterval(this.windowTimer),setTimeout(()=>{this.iClosedWindow||this.emit("close"),this.iClosedWindow=!1,this.window=void 0},this.timeout)),this.window===void 0&&clearInterval(this.windowTimer)},500))}open(){var er;if(this.window=window.open(this.url,this.target,this.features),!this.window)throw LoginError.popupBlocked();(er=this.window)!==null&&er!==void 0&&er.focus&&this.window.focus()}close(){this.iClosedWindow=!0,this.window&&this.window.close()}redirect(er){er?window.location.replace(this.url):window.location.href=this.url}async listenOnChannel(er){const rr=new SecurePubSub,nr=await rr.subscribe(er);this.close(),rr.cleanup();const ir=JSON.parse(nr);return ir.error?{error:ir.error,state:ir.state}:ir.data}};class OpenLogin{constructor(er){if(_defineProperty(this,"state",{}),_defineProperty(this,"options",void 0),_defineProperty(this,"sessionManager",void 0),_defineProperty(this,"currentStorage",void 0),_defineProperty(this,"_storageBaseKey","openlogin_store"),_defineProperty(this,"dappState",void 0),_defineProperty(this,"addVersionInUrls",!0),!er.clientId)throw InitializationError.invalidParams("clientId is required");if(er.network||(er.network=OPENLOGIN_NETWORK.SAPPHIRE_MAINNET),er.buildEnv||(er.buildEnv=BUILD_ENV.PRODUCTION),(er.buildEnv===BUILD_ENV.DEVELOPMENT||er.buildEnv===BUILD_ENV.TESTING||er.sdkUrl)&&(this.addVersionInUrls=!1),!er.sdkUrl&&!er.useMpc&&(er.buildEnv===BUILD_ENV.DEVELOPMENT?(er.sdkUrl="http://localhost:3000",er.dashboardUrl="http://localhost:5173/wallet/account"):er.buildEnv===BUILD_ENV.STAGING?(er.sdkUrl="https://staging-auth.web3auth.io",er.dashboardUrl="https://staging-account.web3auth.io/wallet/account"):er.buildEnv===BUILD_ENV.TESTING?(er.sdkUrl="https://develop-auth.web3auth.io",er.dashboardUrl="https://develop-account.web3auth.io/wallet/account"):(er.sdkUrl="https://auth.web3auth.io",er.dashboardUrl="https://account.web3auth.io/wallet/account")),er.useMpc&&!er.sdkUrl){if(Object.values(TORUS_LEGACY_NETWORK).includes(er.network))throw InitializationError.invalidParams("MPC is not supported on legacy networks, please use sapphire_devnet or sapphire_mainnet.");er.buildEnv===BUILD_ENV.DEVELOPMENT?er.sdkUrl="http://localhost:3000":er.buildEnv===BUILD_ENV.STAGING?er.sdkUrl="https://staging-mpc-auth.web3auth.io":er.buildEnv===BUILD_ENV.TESTING?er.sdkUrl="https://develop-mpc-auth.web3auth.io":er.sdkUrl="https://mpc-auth.web3auth.io"}!er.redirectUrl&&typeof window<"u"&&(er.redirectUrl=`${window.location.protocol}//${window.location.host}${window.location.pathname}`),er.uxMode||(er.uxMode=UX_MODE.REDIRECT),typeof er.replaceUrlOnRedirect!="boolean"&&(er.replaceUrlOnRedirect=!0),er.originData||(er.originData={}),er.whiteLabel||(er.whiteLabel={}),er.loginConfig||(er.loginConfig={}),er.mfaSettings||(er.mfaSettings={}),er.storageServerUrl||(er.storageServerUrl=SESSION_SERVER),er.storageKey||(er.storageKey="local"),er.webauthnTransports||(er.webauthnTransports=["internal"]),er.sessionTime||(er.sessionTime=86400),this.options=er}get privKey(){return this.options.useMpc?this.state.factorKey||"":this.state.privKey?this.state.privKey.padStart(64,"0"):""}get coreKitKey(){return this.state.coreKitKey?this.state.coreKitKey.padStart(64,"0"):""}get ed25519PrivKey(){return this.state.ed25519PrivKey?this.state.ed25519PrivKey.padStart(128,"0"):""}get coreKitEd25519Key(){return this.state.coreKitEd25519PrivKey?this.state.coreKitEd25519PrivKey.padStart(128,"0"):""}get sessionId(){return this.state.sessionId||""}get sessionNamespace(){return this.options.sessionNamespace||""}get appState(){return this.state.userInfo.appState||this.dappState||""}get baseUrl(){return this.addVersionInUrls?`${this.options.sdkUrl}/v${version$2.split(".")[0]}`:`${this.options.sdkUrl}`}async init(){const er=getHashQueryParams(this.options.replaceUrlOnRedirect);er.sessionNamespace&&(this.options.sessionNamespace=er.sessionNamespace);const rr=this.options.sessionNamespace?`${this._storageBaseKey}_${this.options.sessionNamespace}`:this._storageBaseKey;this.currentStorage=BrowserStorage.getInstance(rr,this.options.storageKey);const nr=this.currentStorage.get("sessionId");if(this.sessionManager=new OpenloginSessionManager({sessionServerBaseUrl:this.options.storageServerUrl,sessionNamespace:this.options.sessionNamespace,sessionTime:this.options.sessionTime,sessionId:nr}),(this.options.network===OPENLOGIN_NETWORK.TESTNET||this.options.network===OPENLOGIN_NETWORK.SAPPHIRE_DEVNET)&&console.log(`%c WARNING! You are on ${this.options.network}. Please set network: 'mainnet' or 'sapphire_mainnet' in production`,"color: #FF0000"),this.options.buildEnv!==BUILD_ENV.PRODUCTION&&console.log(`%c WARNING! You are using build env ${this.options.buildEnv}. Please set buildEnv: 'production' in production`,"color: #FF0000"),er.error)throw this.dappState=er.state,LoginError.loginFailed(er.error);if(er.sessionId&&(this.currentStorage.set("sessionId",er.sessionId),this.sessionManager.sessionId=er.sessionId),this.sessionManager.sessionId){const ir=await this._authorizeSession();this.updateState(ir),Object.keys(ir).length===0&&this.currentStorage.set("sessionId","")}}async login(er){if(!er.loginProvider)throw LoginError.invalidLoginParams("loginProvider is required");const rr={redirectUrl:this.options.redirectUrl},nr=_objectSpread2(_objectSpread2({loginProvider:er.loginProvider},rr),er),ir={actionType:OPENLOGIN_ACTIONS.LOGIN,options:this.options,params:nr},sr=await this.openloginHandler(`${this.baseUrl}/start`,ir,getTimeout(er.loginProvider));if(this.options.uxMode===UX_MODE.REDIRECT)return null;if(sr.error)throw this.dappState=sr.state,LoginError.loginFailed(sr.error);return this.sessionManager.sessionId=sr.sessionId,this.options.sessionNamespace=sr.sessionNamespace,this.currentStorage.set("sessionId",sr.sessionId),await this.rehydrateSession(),{privKey:this.privKey}}async logout(){if(!this.sessionManager.sessionId)throw LoginError.userNotLoggedIn();await this.sessionManager.invalidateSession(),this.updateState({privKey:"",coreKitKey:"",coreKitEd25519PrivKey:"",ed25519PrivKey:"",walletKey:"",oAuthPrivateKey:"",tKey:"",metadataNonce:"",keyMode:void 0,userInfo:{name:"",profileImage:"",dappShare:"",idToken:"",oAuthIdToken:"",oAuthAccessToken:"",appState:"",email:"",verifier:"",verifierId:"",aggregateVerifier:"",typeOfLogin:"",isMfaEnabled:!1},authToken:"",sessionId:"",factorKey:"",signatures:[],tssShareIndex:-1,tssPubKey:"",tssShare:"",tssNonce:-1}),this.currentStorage.set("sessionId","")}async enableMFA(er){var rr;if(!this.sessionId)throw LoginError.userNotLoggedIn();if(this.state.userInfo.isMfaEnabled)throw LoginError.mfaAlreadyEnabled();const nr={redirectUrl:this.options.redirectUrl},ir={actionType:OPENLOGIN_ACTIONS.ENABLE_MFA,options:this.options,params:_objectSpread2(_objectSpread2(_objectSpread2({},nr),er),{},{loginProvider:this.state.userInfo.typeOfLogin,extraLoginOptions:{login_hint:this.state.userInfo.verifierId},mfaLevel:"mandatory"}),sessionId:this.sessionId},sr=await this.openloginHandler(`${this.baseUrl}/start`,ir,getTimeout(ir.params.loginProvider));if(this.options.uxMode===UX_MODE.REDIRECT)return null;if(sr.error)throw this.dappState=sr.state,LoginError.loginFailed(sr.error);return this.sessionManager.sessionId=sr.sessionId,this.options.sessionNamespace=sr.sessionNamespace,this.currentStorage.set("sessionId",sr.sessionId),await this.rehydrateSession(),!!(!((rr=this.state.userInfo)===null||rr===void 0)&&rr.isMfaEnabled)}async manageMFA(er){if(!this.sessionId)throw LoginError.userNotLoggedIn();if(!this.state.userInfo.isMfaEnabled)throw LoginError.mfaNotEnabled();const rr={redirectUrl:this.options.dashboardUrl,dappUrl:`${window.location.origin}${window.location.pathname}`},nr=OpenloginSessionManager.generateRandomSessionKey(),ir={actionType:OPENLOGIN_ACTIONS.MANAGE_MFA,options:this.options,params:_objectSpread2(_objectSpread2(_objectSpread2({},rr),er),{},{loginProvider:this.state.userInfo.typeOfLogin,extraLoginOptions:{login_hint:this.state.userInfo.verifierId},appState:jsonToBase64({loginId:nr})}),sessionId:this.sessionId};this.createLoginSession(nr,ir,ir.options.sessionTime,!0);const sr={loginId:nr,sessionNamespace:this.options.sessionNamespace,storageServerUrl:this.options.storageServerUrl},or=constructURL({baseURL:`${this.baseUrl}/start`,hash:{b64Params:jsonToBase64(sr)}});window.open(or,"_blank")}async changeSocialFactor(er){if(!this.sessionId)throw LoginError.userNotLoggedIn();const rr={redirectUrl:this.options.redirectUrl},nr={actionType:OPENLOGIN_ACTIONS.MODIFY_SOCIAL_FACTOR,options:this.options,params:_objectSpread2(_objectSpread2({},rr),er),sessionId:this.sessionId},ir=await this.openloginHandler(`${this.baseUrl}/start`,nr);if(this.options.uxMode!==UX_MODE.REDIRECT)return!ir.error}getUserInfo(){if(!this.sessionManager.sessionId)throw LoginError.userNotLoggedIn();return this.state.userInfo}async createLoginSession(er,rr){let nr=arguments.length>2&&arguments[2]!==void 0?arguments[2]:600,ir=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!this.sessionManager)throw InitializationError.notInitialized();const or=new OpenloginSessionManager({sessionServerBaseUrl:rr.options.storageServerUrl,sessionNamespace:rr.options.sessionNamespace,sessionTime:nr,sessionId:er}).createSession(JSON.parse(JSON.stringify(rr)));rr.options.uxMode===UX_MODE.REDIRECT&&!ir&&await or}async _authorizeSession(){try{return this.sessionManager.sessionId?await this.sessionManager.authorizeSession():{}}catch(er){return loglevel.error("authorization failed",er),{}}}updateState(er){this.state=_objectSpread2(_objectSpread2({},this.state),er)}async rehydrateSession(){const er=await this._authorizeSession();this.updateState(er)}async openloginHandler(er,rr){let nr=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1e4;const ir=OpenloginSessionManager.generateRandomSessionKey();await this.createLoginSession(ir,rr);const sr={loginId:ir,sessionNamespace:this.options.sessionNamespace,storageServerUrl:this.options.storageServerUrl};if(this.options.uxMode===UX_MODE.REDIRECT){const cr=constructURL({baseURL:er,hash:{b64Params:jsonToBase64(sr)}});window.location.href=cr;return}const or=constructURL({baseURL:er,hash:{b64Params:jsonToBase64(sr)}}),ar=new PopupHandler$1({url:or,timeout:nr});return new Promise((cr,lr)=>{ar.on("close",()=>{lr(LoginError.popupClosed())}),ar.listenOnChannel(ir).then(cr).catch(lr);try{ar.open()}catch(ur){lr(ur)}})}}const getOpenloginDefaultOptions=()=>({adapterSettings:{network:OPENLOGIN_NETWORK.SAPPHIRE_MAINNET,clientId:"",uxMode:UX_MODE.POPUP},loginSettings:{},privateKeyProvider:void 0});class OpenloginAdapter extends BaseAdapter{constructor(er={}){super(er),_defineProperty(this,"name",WALLET_ADAPTERS.OPENLOGIN),_defineProperty(this,"adapterNamespace",ADAPTER_NAMESPACES.MULTICHAIN),_defineProperty(this,"type",ADAPTER_CATEGORY.IN_APP),_defineProperty(this,"openloginInstance",null),_defineProperty(this,"status",ADAPTER_STATUS.NOT_READY),_defineProperty(this,"currentChainNamespace",CHAIN_NAMESPACES.EIP155),_defineProperty(this,"privateKeyProvider",null),_defineProperty(this,"openloginOptions",void 0),_defineProperty(this,"loginSettings",{loginProvider:""}),this.setAdapterSettings(_objectSpread2(_objectSpread2({},er.adapterSettings),{},{chainConfig:er.chainConfig,clientId:er.clientId||"",sessionTime:er.sessionTime,web3AuthNetwork:er.web3AuthNetwork,useCoreKitKey:er.useCoreKitKey,privateKeyProvider:er.privateKeyProvider})),this.loginSettings=er.loginSettings||{loginProvider:""},this.privateKeyProvider=er.privateKeyProvider||null}get chainConfigProxy(){return this.chainConfig?_objectSpread2({},this.chainConfig):null}get provider(){return this.status!==ADAPTER_STATUS.NOT_READY&&this.privateKeyProvider?this.privateKeyProvider:null}set provider(er){throw new Error("Not implemented")}async init(er){if(super.checkInitializationRequirements(),!this.clientId)throw WalletInitializationError.invalidParams("clientId is required before openlogin's initialization");if(!this.openloginOptions)throw WalletInitializationError.invalidParams("openloginOptions is required before openlogin's initialization");const rr=this.openloginOptions.uxMode===UX_MODE.REDIRECT;if(this.openloginOptions=_objectSpread2(_objectSpread2({},this.openloginOptions),{},{replaceUrlOnRedirect:rr,useCoreKitKey:this.useCoreKitKey}),this.openloginInstance=new OpenLogin(_objectSpread2(_objectSpread2({},this.openloginOptions),{},{clientId:this.clientId,network:this.openloginOptions.network||this.web3AuthNetwork||OPENLOGIN_NETWORK.SAPPHIRE_MAINNET})),loglevel$1.debug("initializing openlogin adapter init"),await this.openloginInstance.init(),!this.chainConfig)throw WalletInitializationError.invalidParams("chainConfig is required before initialization");this.status=ADAPTER_STATUS.READY,this.emit(ADAPTER_EVENTS.READY,WALLET_ADAPTERS.OPENLOGIN);try{loglevel$1.debug("initializing openlogin adapter"),this._getFinalPrivKey()&&(er.autoConnect||rr)&&(this.rehydrated=!0,await this.connect())}catch(nr){loglevel$1.error("Failed to connect with cached openlogin provider",nr),this.emit("ERRORED",nr)}}async connect(er={loginProvider:""}){super.checkConnectionRequirements(),this.status=ADAPTER_STATUS.CONNECTING,this.emit(ADAPTER_EVENTS.CONNECTING,_objectSpread2(_objectSpread2({},er),{},{adapter:WALLET_ADAPTERS.OPENLOGIN}));try{return await this.connectWithProvider(er),this.provider}catch(rr){throw loglevel$1.error("Failed to connect with openlogin provider",rr),this.status=ADAPTER_STATUS.READY,this.emit(ADAPTER_EVENTS.ERRORED,rr),rr!=null&&rr.message.includes("user closed popup")?WalletLoginError.popupClosed():rr instanceof Web3AuthError?rr:WalletLoginError.connectionError("Failed to login with openlogin",rr)}}async enableMFA(er={loginProvider:""}){if(this.status!==ADAPTER_STATUS.CONNECTED)throw WalletLoginError.notConnectedError("Not connected with wallet");if(!this.openloginInstance)throw WalletInitializationError.notReady("openloginInstance is not ready");try{await this.openloginInstance.enableMFA(er)}catch(rr){throw loglevel$1.error("Failed to enable MFA with openlogin provider",rr),rr instanceof Web3AuthError?rr:WalletLoginError.connectionError("Failed to enable MFA with openlogin",rr)}}async disconnect(er={cleanup:!1}){if(this.status!==ADAPTER_STATUS.CONNECTED)throw WalletLoginError.notConnectedError("Not connected with wallet");if(!this.openloginInstance)throw WalletInitializationError.notReady("openloginInstance is not ready");await this.openloginInstance.logout(),er.cleanup?(this.status=ADAPTER_STATUS.NOT_READY,this.openloginInstance=null,this.privateKeyProvider=null):this.status=ADAPTER_STATUS.READY,this.rehydrated=!1,this.emit(ADAPTER_EVENTS.DISCONNECTED)}async authenticateUser(){if(this.status!==ADAPTER_STATUS.CONNECTED)throw WalletLoginError.notConnectedError("Not connected with wallet, Please login/connect first");return{idToken:(await this.getUserInfo()).idToken}}async getUserInfo(){if(this.status!==ADAPTER_STATUS.CONNECTED)throw WalletLoginError.notConnectedError("Not connected with wallet");if(!this.openloginInstance)throw WalletInitializationError.notReady("openloginInstance is not ready");return this.openloginInstance.getUserInfo()}setAdapterSettings(er){super.setAdapterSettings(er);const rr=getOpenloginDefaultOptions();loglevel$1.info("setting adapter settings",er),this.openloginOptions=merge(rr.adapterSettings,this.openloginOptions,er),er.web3AuthNetwork&&(this.openloginOptions.network=er.web3AuthNetwork),er.privateKeyProvider&&(this.privateKeyProvider=er.privateKeyProvider)}async addChain(er,rr=!1){var nr;super.checkAddChainRequirements(er,rr),(nr=this.privateKeyProvider)===null||nr===void 0||nr.addChain(er),this.addChainConfig(er)}async switchChain(er,rr=!1){var nr;super.checkSwitchChainRequirements(er,rr),await((nr=this.privateKeyProvider)===null||nr===void 0?void 0:nr.switchChain(er)),this.setAdapterSettings({chainConfig:this.getChainConfig(er.chainId)})}_getFinalPrivKey(){if(!this.openloginInstance)return"";let er=this.openloginInstance.privKey;if(this.useCoreKitKey){if(this.openloginInstance.privKey&&!this.openloginInstance.coreKitKey)throw WalletLoginError.coreKitKeyNotFound();er=this.openloginInstance.coreKitKey}return er}_getFinalEd25519PrivKey(){if(!this.openloginInstance)return"";let er=this.openloginInstance.ed25519PrivKey;if(this.useCoreKitKey){if(this.openloginInstance.ed25519PrivKey&&!this.openloginInstance.coreKitEd25519Key)throw WalletLoginError.coreKitKeyNotFound();er=this.openloginInstance.coreKitEd25519Key}return er}async connectWithProvider(er={loginProvider:""}){var rr;if(!this.privateKeyProvider)throw WalletInitializationError.invalidParams("PrivateKey Provider is required before initialization");if(!this.openloginInstance)throw WalletInitializationError.notReady("openloginInstance is not ready");if(!this._getFinalPrivKey()||(rr=er.extraLoginOptions)!==null&&rr!==void 0&&rr.id_token){var ir;if(this.loginSettings.curve||(this.loginSettings.curve=this.currentChainNamespace===CHAIN_NAMESPACES.SOLANA?SUPPORTED_KEY_CURVES.ED25519:SUPPORTED_KEY_CURVES.SECP256K1),!er.loginProvider&&!this.loginSettings.loginProvider)throw WalletInitializationError.invalidParams("loginProvider is required for login");await this.openloginInstance.login(merge(this.loginSettings,er,{extraLoginOptions:_objectSpread2(_objectSpread2({},er.extraLoginOptions||{}),{},{login_hint:er.login_hint||((ir=er.extraLoginOptions)===null||ir===void 0?void 0:ir.login_hint)})}))}let sr=this._getFinalPrivKey();sr&&(this.currentChainNamespace===CHAIN_NAMESPACES.SOLANA&&(sr=this._getFinalEd25519PrivKey()),await this.privateKeyProvider.setupProvider(sr),this.status=ADAPTER_STATUS.CONNECTED,this.emit(ADAPTER_EVENTS.CONNECTED,{adapter:WALLET_ADAPTERS.OPENLOGIN,reconnected:this.rehydrated,provider:this.provider}))}}var lodash_clonedeep={exports:{}};lodash_clonedeep.exports;(function(tr,er){var rr=200,nr="__lodash_hash_undefined__",ir=9007199254740991,sr="[object Arguments]",or="[object Array]",ar="[object Boolean]",cr="[object Date]",lr="[object Error]",ur="[object Function]",dr="[object GeneratorFunction]",yr="[object Map]",mr="[object Number]",wr="[object Object]",xr="[object Promise]",Or="[object RegExp]",Tr="[object Set]",Ar="[object String]",Nr="[object Symbol]",Ur="[object WeakMap]",Dr="[object ArrayBuffer]",Hr="[object DataView]",zr="[object Float32Array]",Cr="[object Float64Array]",Mr="[object Int8Array]",Pr="[object Int16Array]",Sr="[object Int32Array]",pr="[object Uint8Array]",gr="[object Uint8ClampedArray]",fr="[object Uint16Array]",hr="[object Uint32Array]",br=/[\\^$.*+?()[\]{}|]/g,_r=/\w*$/,$r=/^\[object .+?Constructor\]$/,Er=/^(?:0|[1-9]\d*)$/,vr={};vr[sr]=vr[or]=vr[Dr]=vr[Hr]=vr[ar]=vr[cr]=vr[zr]=vr[Cr]=vr[Mr]=vr[Pr]=vr[Sr]=vr[yr]=vr[mr]=vr[wr]=vr[Or]=vr[Tr]=vr[Ar]=vr[Nr]=vr[pr]=vr[gr]=vr[fr]=vr[hr]=!0,vr[lr]=vr[ur]=vr[Ur]=!1;var Ir=typeof globalThis=="object"&&globalThis&&globalThis.Object===Object&&globalThis,Rr=typeof self=="object"&&self&&self.Object===Object&&self,Br=Ir||Rr||Function("return this")(),Jr=er&&!er.nodeType&&er,Wr=Jr&&!0&&tr&&!tr.nodeType&&tr,qr=Wr&&Wr.exports===Jr;function an(Vr,jr){return Vr.set(jr[0],jr[1]),Vr}function tn(Vr,jr){return Vr.add(jr),Vr}function cn(Vr,jr){for(var rn=-1,yn=Vr?Vr.length:0;++rn<yn&&jr(Vr[rn],rn,Vr)!==!1;);return Vr}function dn(Vr,jr){for(var rn=-1,yn=jr.length,qn=Vr.length;++rn<yn;)Vr[qn+rn]=jr[rn];return Vr}function Zr(Vr,jr,rn,yn){for(var qn=-1,Xn=Vr?Vr.length:0;++qn<Xn;)rn=jr(rn,Vr[qn],qn,Vr);return rn}function Yr(Vr,jr){for(var rn=-1,yn=Array(Vr);++rn<Vr;)yn[rn]=jr(rn);return yn}function Qr(Vr,jr){return Vr==null?void 0:Vr[jr]}function un(Vr){var jr=!1;if(Vr!=null&&typeof Vr.toString!="function")try{jr=!!(Vr+"")}catch{}return jr}function gn(Vr){var jr=-1,rn=Array(Vr.size);return Vr.forEach(function(yn,qn){rn[++jr]=[qn,yn]}),rn}function Rn(Vr,jr){return function(rn){return Vr(jr(rn))}}function Pn(Vr){var jr=-1,rn=Array(Vr.size);return Vr.forEach(function(yn){rn[++jr]=yn}),rn}var Cn=Array.prototype,Sn=Function.prototype,zn=Object.prototype,Zn=Br["__core-js_shared__"],Kn=function(){var Vr=/[^.]+$/.exec(Zn&&Zn.keys&&Zn.keys.IE_PROTO||"");return Vr?"Symbol(src)_1."+Vr:""}(),eo=Sn.toString,vn=zn.hasOwnProperty,xn=zn.toString,Dn=RegExp("^"+eo.call(vn).replace(br,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Xr=qr?Br.Buffer:void 0,Lr=Br.Symbol,Fr=Br.Uint8Array,ln=Rn(Object.getPrototypeOf,Object),mn=Object.create,_n=zn.propertyIsEnumerable,An=Cn.splice,Gn=Object.getOwnPropertySymbols,Xs=Xr?Xr.isBuffer:void 0,Jn=Rn(Object.keys,Object),no=Io(Br,"DataView"),zs=Io(Br,"Map"),to=Io(Br,"Promise"),No=Io(Br,"Set"),Ro=Io(Br,"WeakMap"),uo=Io(Object,"create"),To=Yo(no),Eo=Yo(zs),so=Yo(to),Po=Yo(No),hn=Yo(Ro),pn=Lr?Lr.prototype:void 0,kn=pn?pn.valueOf:void 0;function Mn(Vr){var jr=-1,rn=Vr?Vr.length:0;for(this.clear();++jr<rn;){var yn=Vr[jr];this.set(yn[0],yn[1])}}function Ln(){this.__data__=uo?uo(null):{}}function vo(Vr){return this.has(Vr)&&delete this.__data__[Vr]}function Gr(Vr){var jr=this.__data__;if(uo){var rn=jr[Vr];return rn===nr?void 0:rn}return vn.call(jr,Vr)?jr[Vr]:void 0}function nn(Vr){var jr=this.__data__;return uo?jr[Vr]!==void 0:vn.call(jr,Vr)}function sn(Vr,jr){var rn=this.__data__;return rn[Vr]=uo&&jr===void 0?nr:jr,this}Mn.prototype.clear=Ln,Mn.prototype.delete=vo,Mn.prototype.get=Gr,Mn.prototype.has=nn,Mn.prototype.set=sn;function kr(Vr){var jr=-1,rn=Vr?Vr.length:0;for(this.clear();++jr<rn;){var yn=Vr[jr];this.set(yn[0],yn[1])}}function fn(){this.__data__=[]}function En(Vr){var jr=this.__data__,rn=Js(jr,Vr);if(rn<0)return!1;var yn=jr.length-1;return rn==yn?jr.pop():An.call(jr,rn,1),!0}function $n(Vr){var jr=this.__data__,rn=Js(jr,Vr);return rn<0?void 0:jr[rn][1]}function Tn(Vr){return Js(this.__data__,Vr)>-1}function Bn(Vr,jr){var rn=this.__data__,yn=Js(rn,Vr);return yn<0?rn.push([Vr,jr]):rn[yn][1]=jr,this}kr.prototype.clear=fn,kr.prototype.delete=En,kr.prototype.get=$n,kr.prototype.has=Tn,kr.prototype.set=Bn;function jn(Vr){var jr=-1,rn=Vr?Vr.length:0;for(this.clear();++jr<rn;){var yn=Vr[jr];this.set(yn[0],yn[1])}}function Hn(){this.__data__={hash:new Mn,map:new(zs||kr),string:new Mn}}function go(Vr){return Fo(this,Vr).delete(Vr)}function Yn(Vr){return Fo(this,Vr).get(Vr)}function oo(Vr){return Fo(this,Vr).has(Vr)}function co(Vr,jr){return Fo(this,Vr).set(Vr,jr),this}jn.prototype.clear=Hn,jn.prototype.delete=go,jn.prototype.get=Yn,jn.prototype.has=oo,jn.prototype.set=co;function ro(Vr){this.__data__=new kr(Vr)}function fo(){this.__data__=new kr}function io(Vr){return this.__data__.delete(Vr)}function ao(Vr){return this.__data__.get(Vr)}function lo(Vr){return this.__data__.has(Vr)}function Ws(Vr,jr){var rn=this.__data__;if(rn instanceof kr){var yn=rn.__data__;if(!zs||yn.length<rr-1)return yn.push([Vr,jr]),this;rn=this.__data__=new jn(yn)}return rn.set(Vr,jr),this}ro.prototype.clear=fo,ro.prototype.delete=io,ro.prototype.get=ao,ro.prototype.has=lo,ro.prototype.set=Ws;function Qs(Vr,jr){var rn=Il(Vr)||Pl(Vr)?Yr(Vr.length,String):[],yn=rn.length,qn=!!yn;for(var Xn in Vr)vn.call(Vr,Xn)&&!(qn&&(Xn=="length"||qo(Xn,yn)))&&rn.push(Xn);return rn}function _i(Vr,jr,rn){var yn=Vr[jr];(!(vn.call(Vr,jr)&&pu(yn,rn))||rn===void 0&&!(jr in Vr))&&(Vr[jr]=rn)}function Js(Vr,jr){for(var rn=Vr.length;rn--;)if(pu(Vr[rn][0],jr))return rn;return-1}function Ls(Vr,jr){return Vr&&$o(jr,eu(jr),Vr)}function Qn(Vr,jr,rn,yn,qn,Xn,po){var yo;if(yn&&(yo=Xn?yn(Vr,qn,Xn,po):yn(Vr)),yo!==void 0)return yo;if(!ba(Vr))return Vr;var _o=Il(Vr);if(_o){if(yo=jo(Vr),!jr)return Lo(Vr,yo)}else{var bo=Do(Vr),Ho=bo==ur||bo==dr;if(_l(Vr))return Wn(Vr,jr);if(bo==wr||bo==sr||Ho&&!Xn){if(un(Vr))return Xn?Vr:{};if(yo=Uo(Ho?{}:Vr),!jr)return Co(Vr,Ls(yo,Vr))}else{if(!vr[bo])return Xn?Vr:{};yo=Wo(Vr,bo,Qn,jr)}}po||(po=new ro);var Vo=po.get(Vr);if(Vo)return Vo;if(po.set(Vr,yo),!_o)var Ko=rn?Oo(Vr):eu(Vr);return cn(Ko||Vr,function(Jo,zo){Ko&&(zo=Jo,Jo=Vr[zo]),_i(yo,zo,Qn(Jo,jr,rn,yn,zo,Vr,po))}),yo}function In(Vr){return ba(Vr)?mn(Vr):{}}function Nn(Vr,jr,rn){var yn=jr(Vr);return Il(Vr)?yn:dn(yn,rn(Vr))}function Vn(Vr){return xn.call(Vr)}function Un(Vr){if(!ba(Vr)||Fl(Vr))return!1;var jr=Zl(Vr)||un(Vr)?Dn:$r;return jr.test(Yo(Vr))}function Fn(Vr){if(!Hl(Vr))return Jn(Vr);var jr=[];for(var rn in Object(Vr))vn.call(Vr,rn)&&rn!="constructor"&&jr.push(rn);return jr}function Wn(Vr,jr){if(jr)return Vr.slice();var rn=new Vr.constructor(Vr.length);return Vr.copy(rn),rn}function ho(Vr){var jr=new Vr.constructor(Vr.byteLength);return new Fr(jr).set(new Fr(Vr)),jr}function wo(Vr,jr){var rn=jr?ho(Vr.buffer):Vr.buffer;return new Vr.constructor(rn,Vr.byteOffset,Vr.byteLength)}function So(Vr,jr,rn){var yn=jr?rn(gn(Vr),!0):gn(Vr);return Zr(yn,an,new Vr.constructor)}function xo(Vr){var jr=new Vr.constructor(Vr.source,_r.exec(Vr));return jr.lastIndex=Vr.lastIndex,jr}function wn(Vr,jr,rn){var yn=jr?rn(Pn(Vr),!0):Pn(Vr);return Zr(yn,tn,new Vr.constructor)}function Ao(Vr){return kn?Object(kn.call(Vr)):{}}function ko(Vr,jr){var rn=jr?ho(Vr.buffer):Vr.buffer;return new Vr.constructor(rn,Vr.byteOffset,Vr.length)}function Lo(Vr,jr){var rn=-1,yn=Vr.length;for(jr||(jr=Array(yn));++rn<yn;)jr[rn]=Vr[rn];return jr}function $o(Vr,jr,rn,yn){rn||(rn={});for(var qn=-1,Xn=jr.length;++qn<Xn;){var po=jr[qn],yo=void 0;_i(rn,po,yo===void 0?Vr[po]:yo)}return rn}function Co(Vr,jr){return $o(Vr,Mo(Vr),jr)}function Oo(Vr){return Nn(Vr,eu,Mo)}function Fo(Vr,jr){var rn=Vr.__data__;return Go(jr)?rn[typeof jr=="string"?"string":"hash"]:rn.map}function Io(Vr,jr){var rn=Qr(Vr,jr);return Un(rn)?rn:void 0}var Mo=Gn?Rn(Gn,Object):Hu,Do=Vn;(no&&Do(new no(new ArrayBuffer(1)))!=Hr||zs&&Do(new zs)!=yr||to&&Do(to.resolve())!=xr||No&&Do(new No)!=Tr||Ro&&Do(new Ro)!=Ur)&&(Do=function(Vr){var jr=xn.call(Vr),rn=jr==wr?Vr.constructor:void 0,yn=rn?Yo(rn):void 0;if(yn)switch(yn){case To:return Hr;case Eo:return yr;case so:return xr;case Po:return Tr;case hn:return Ur}return jr});function jo(Vr){var jr=Vr.length,rn=Vr.constructor(jr);return jr&&typeof Vr[0]=="string"&&vn.call(Vr,"index")&&(rn.index=Vr.index,rn.input=Vr.input),rn}function Uo(Vr){return typeof Vr.constructor=="function"&&!Hl(Vr)?In(ln(Vr)):{}}function Wo(Vr,jr,rn,yn){var qn=Vr.constructor;switch(jr){case Dr:return ho(Vr);case ar:case cr:return new qn(+Vr);case Hr:return wo(Vr,yn);case zr:case Cr:case Mr:case Pr:case Sr:case pr:case gr:case fr:case hr:return ko(Vr,yn);case yr:return So(Vr,yn,rn);case mr:case Ar:return new qn(Vr);case Or:return xo(Vr);case Tr:return wn(Vr,yn,rn);case Nr:return Ao(Vr)}}function qo(Vr,jr){return jr=jr??ir,!!jr&&(typeof Vr=="number"||Er.test(Vr))&&Vr>-1&&Vr%1==0&&Vr<jr}function Go(Vr){var jr=typeof Vr;return jr=="string"||jr=="number"||jr=="symbol"||jr=="boolean"?Vr!=="__proto__":Vr===null}function Fl(Vr){return!!Kn&&Kn in Vr}function Hl(Vr){var jr=Vr&&Vr.constructor,rn=typeof jr=="function"&&jr.prototype||zn;return Vr===rn}function Yo(Vr){if(Vr!=null){try{return eo.call(Vr)}catch{}try{return Vr+""}catch{}}return""}function Vl(Vr){return Qn(Vr,!0,!0)}function pu(Vr,jr){return Vr===jr||Vr!==Vr&&jr!==jr}function Pl(Vr){return $a(Vr)&&vn.call(Vr,"callee")&&(!_n.call(Vr,"callee")||xn.call(Vr)==sr)}var Il=Array.isArray;function Nl(Vr){return Vr!=null&&Xl(Vr.length)&&!Zl(Vr)}function $a(Vr){return Ql(Vr)&&Nl(Vr)}var _l=Xs||gu;function Zl(Vr){var jr=ba(Vr)?xn.call(Vr):"";return jr==ur||jr==dr}function Xl(Vr){return typeof Vr=="number"&&Vr>-1&&Vr%1==0&&Vr<=ir}function ba(Vr){var jr=typeof Vr;return!!Vr&&(jr=="object"||jr=="function")}function Ql(Vr){return!!Vr&&typeof Vr=="object"}function eu(Vr){return Nl(Vr)?Qs(Vr):Fn(Vr)}function Hu(){return[]}function gu(){return!1}tr.exports=Vl})(lodash_clonedeep,lodash_clonedeep.exports);var lodash_clonedeepExports=lodash_clonedeep.exports;const clonedeep=getDefaultExportFromCjs(lodash_clonedeepExports),ADAPTER_CACHE_KEY="Web3Auth-cachedAdapter";class Web3AuthNoModal extends SafeEventEmitter{constructor(er){var rr,nr,ir,sr;if(super(),_defineProperty(this,"coreOptions",void 0),_defineProperty(this,"connectedAdapterName",null),_defineProperty(this,"status",ADAPTER_STATUS.NOT_READY),_defineProperty(this,"cachedAdapter",null),_defineProperty(this,"walletAdapters",{}),_defineProperty(this,"commonJRPCProvider",null),_defineProperty(this,"plugins",{}),_defineProperty(this,"storage","localStorage"),!er.clientId)throw WalletInitializationError.invalidParams("Please provide a valid clientId in constructor");if(er.enableLogging?loglevel$1.enableAll():loglevel$1.setLevel("error"),!er.privateKeyProvider&&!er.chainConfig)throw WalletInitializationError.invalidParams("Please provide chainConfig or privateKeyProvider");if(er.chainConfig=er.chainConfig||er.privateKeyProvider.currentChainConfig,!((rr=er.chainConfig)!==null&&rr!==void 0&&rr.chainNamespace)||!Object.values(CHAIN_NAMESPACES).includes((nr=er.chainConfig)===null||nr===void 0?void 0:nr.chainNamespace))throw WalletInitializationError.invalidParams("Please provide a valid chainNamespace in chainConfig");er.storageKey==="session"&&(this.storage="sessionStorage"),this.cachedAdapter=storageAvailable(this.storage)?window[this.storage].getItem(ADAPTER_CACHE_KEY):null,this.coreOptions=_objectSpread2(_objectSpread2({},er),{},{chainConfig:_objectSpread2(_objectSpread2({},getChainConfig((ir=er.chainConfig)===null||ir===void 0?void 0:ir.chainNamespace,(sr=er.chainConfig)===null||sr===void 0?void 0:sr.chainId)||{}),er.chainConfig)}),this.subscribeToAdapterEvents=this.subscribeToAdapterEvents.bind(this)}get connected(){return!!this.connectedAdapterName}get provider(){return this.status!==ADAPTER_STATUS.NOT_READY&&this.commonJRPCProvider?this.commonJRPCProvider:null}set provider(er){throw new Error("Not implemented")}async init(){this.commonJRPCProvider=await CommonJRPCProvider.getProviderInstance({chainConfig:this.coreOptions.chainConfig});let er;try{er=await fetchProjectConfig(this.coreOptions.clientId,this.coreOptions.web3AuthNetwork)}catch(nr){throw loglevel$1.error("Failed to fetch project configurations",nr),WalletInitializationError.notReady("failed to fetch project configurations",nr)}const rr=Object.keys(this.walletAdapters).map(async nr=>{if(this.subscribeToAdapterEvents(this.walletAdapters[nr]),this.walletAdapters[nr].chainConfigProxy)this.walletAdapters[nr].setAdapterSettings({sessionTime:this.coreOptions.sessionTime,clientId:this.coreOptions.clientId,web3AuthNetwork:this.coreOptions.web3AuthNetwork,useCoreKitKey:this.coreOptions.useCoreKitKey});else{const ir=this.coreOptions.chainConfig;if(!ir.chainNamespace)throw WalletInitializationError.invalidParams("Please provide chainNamespace in chainConfig");this.walletAdapters[nr].setAdapterSettings({chainConfig:ir,sessionTime:this.coreOptions.sessionTime,clientId:this.coreOptions.clientId,web3AuthNetwork:this.coreOptions.web3AuthNetwork,useCoreKitKey:this.coreOptions.useCoreKitKey})}if(nr===WALLET_ADAPTERS.OPENLOGIN){const ir=this.walletAdapters[nr],{whitelabel:sr}=er;this.coreOptions.uiConfig=merge(clonedeep(sr),this.coreOptions.uiConfig),this.coreOptions.uiConfig.mode||(this.coreOptions.uiConfig.mode="light");const{sms_otp_enabled:or,whitelist:ar}=er;if(or!==void 0&&ir.setAdapterSettings({loginConfig:{[LOGIN_PROVIDER.SMS_PASSWORDLESS]:{showOnModal:or,showOnDesktop:or,showOnMobile:or,showOnSocialBackupFactor:or}}}),ar&&ir.setAdapterSettings({originData:ar.signed_urls}),this.coreOptions.privateKeyProvider){if(ir.currentChainNamespace!==this.coreOptions.privateKeyProvider.currentChainConfig.chainNamespace)throw WalletInitializationError.incompatibleChainNameSpace("private key provider is not compatible with provided chainNamespace for openlogin adapter");ir.setAdapterSettings({privateKeyProvider:this.coreOptions.privateKeyProvider})}if(ir.setAdapterSettings({whiteLabel:this.coreOptions.uiConfig}),!ir.privateKeyProvider)throw WalletInitializationError.invalidParams("privateKeyProvider is required for openlogin adapter")}else if(nr===WALLET_ADAPTERS.WALLET_CONNECT_V2){const ir=this.walletAdapters[nr],{wallet_connect_enabled:sr,wallet_connect_project_id:or}=er;if(sr===!1)throw WalletInitializationError.invalidParams("Please enable wallet connect v2 addon on dashboard");if(!or)throw WalletInitializationError.invalidParams("Invalid wallet connect project id. Please configure it on the dashboard");ir.setAdapterSettings({adapterSettings:{walletConnectInitOptions:{projectId:or}}})}return this.walletAdapters[nr].init({autoConnect:this.cachedAdapter===nr}).catch(ir=>loglevel$1.error(ir,nr))});await Promise.all(rr),this.status===ADAPTER_STATUS.NOT_READY&&(this.status=ADAPTER_STATUS.READY,this.emit(ADAPTER_EVENTS.READY))}getAdapter(er){return this.walletAdapters[er]||null}configureAdapter(er){this.checkInitRequirements();const rr=this.coreOptions.chainConfig;if(!rr.chainNamespace)throw WalletInitializationError.invalidParams("Please provide chainNamespace in chainConfig");if(this.walletAdapters[er.name])throw WalletInitializationError.duplicateAdapterError(`Wallet adapter for ${er.name} already exists`);if(er.adapterNamespace!==ADAPTER_NAMESPACES.MULTICHAIN&&er.adapterNamespace!==rr.chainNamespace)throw WalletInitializationError.incompatibleChainNameSpace(`This wallet adapter belongs to ${er.adapterNamespace} which is incompatible with currently used namespace: ${rr.chainNamespace}`);return er.adapterNamespace===ADAPTER_NAMESPACES.MULTICHAIN&&er.currentChainNamespace&&rr.chainNamespace!==er.currentChainNamespace&&er.setAdapterSettings({chainConfig:rr}),this.walletAdapters[er.name]=er,this}clearCache(){storageAvailable(this.storage)&&(window[this.storage].removeItem(ADAPTER_CACHE_KEY),this.cachedAdapter=null)}async addChain(er){if(this.status===ADAPTER_STATUS.CONNECTED&&this.connectedAdapterName)return this.walletAdapters[this.connectedAdapterName].addChain(er);if(this.commonJRPCProvider)return this.commonJRPCProvider.addChain(er);throw WalletInitializationError.notReady("No wallet is ready")}async switchChain(er){if(this.status===ADAPTER_STATUS.CONNECTED&&this.connectedAdapterName)return this.walletAdapters[this.connectedAdapterName].switchChain(er);if(this.commonJRPCProvider)return this.commonJRPCProvider.switchChain(er);throw WalletInitializationError.notReady("No wallet is ready")}async connectTo(er,rr){if(!this.walletAdapters[er]||!this.commonJRPCProvider)throw WalletInitializationError.notFound(`Please add wallet adapter for ${er} wallet, before connecting`);const nr=await this.walletAdapters[er].connect(rr);return this.commonJRPCProvider.updateProviderEngineProxy(nr.provider||nr),this.provider}async logout(er={cleanup:!1}){if(this.status!==ADAPTER_STATUS.CONNECTED||!this.connectedAdapterName)throw WalletLoginError.notConnectedError("No wallet is connected");await this.walletAdapters[this.connectedAdapterName].disconnect(er)}async getUserInfo(){if(loglevel$1.debug("Getting user info",this.status,this.connectedAdapterName),this.status!==ADAPTER_STATUS.CONNECTED||!this.connectedAdapterName)throw WalletLoginError.notConnectedError("No wallet is connected");return this.walletAdapters[this.connectedAdapterName].getUserInfo()}async enableMFA(er){if(this.status!==ADAPTER_STATUS.CONNECTED||!this.connectedAdapterName)throw WalletLoginError.notConnectedError("No wallet is connected");if(this.connectedAdapterName!==WALLET_ADAPTERS.OPENLOGIN)throw WalletLoginError.unsupportedOperation("EnableMFA is not supported for this adapter.");return this.walletAdapters[this.connectedAdapterName].enableMFA(er)}async authenticateUser(){if(this.status!==ADAPTER_STATUS.CONNECTED||!this.connectedAdapterName)throw WalletLoginError.notConnectedError("No wallet is connected");return this.walletAdapters[this.connectedAdapterName].authenticateUser()}addPlugin(er){if(this.plugins[er.name])throw WalletInitializationError.duplicateAdapterError(`Plugin ${er.name} already exist`);if(er.pluginNamespace!==PLUGIN_NAMESPACES.MULTICHAIN&&er.pluginNamespace!==this.coreOptions.chainConfig.chainNamespace)throw WalletInitializationError.incompatibleChainNameSpace(`This plugin belongs to ${er.pluginNamespace} namespace which is incompatible with currently used namespace: ${this.coreOptions.chainConfig.chainNamespace}`);return this.plugins[er.name]=er,this.status===ADAPTER_STATUS.CONNECTED&&this.connectedAdapterName&&this.connectToPlugins({adapter:this.connectedAdapterName}),this}getPlugin(er){return this.plugins[er]||null}subscribeToAdapterEvents(er){er.on(ADAPTER_EVENTS.CONNECTED,async rr=>{if(!this.commonJRPCProvider)throw WalletInitializationError.notFound("CommonJrpcProvider not found");const{provider:nr}=rr;this.commonJRPCProvider.updateProviderEngineProxy(nr.provider||nr),this.status=ADAPTER_STATUS.CONNECTED,this.connectedAdapterName=rr.adapter,this.cacheWallet(rr.adapter),loglevel$1.debug("connected",this.status,this.connectedAdapterName),this.connectToPlugins(rr),this.emit(ADAPTER_EVENTS.CONNECTED,_objectSpread2({},rr))}),er.on(ADAPTER_EVENTS.DISCONNECTED,async rr=>{if(this.status=ADAPTER_STATUS.READY,storageAvailable(this.storage)){const nr=window[this.storage].getItem(ADAPTER_CACHE_KEY);this.connectedAdapterName===nr&&this.clearCache()}loglevel$1.debug("disconnected",this.status,this.connectedAdapterName),await Promise.all(Object.values(this.plugins).map(nr=>nr.disconnect().catch(ir=>{ir.code!==5211&&loglevel$1.error(ir)}))),this.connectedAdapterName=null,this.emit(ADAPTER_EVENTS.DISCONNECTED,rr)}),er.on(ADAPTER_EVENTS.CONNECTING,rr=>{this.status=ADAPTER_STATUS.CONNECTING,this.emit(ADAPTER_EVENTS.CONNECTING,rr),loglevel$1.debug("connecting",this.status,this.connectedAdapterName)}),er.on(ADAPTER_EVENTS.ERRORED,rr=>{this.status=ADAPTER_STATUS.ERRORED,this.clearCache(),this.emit(ADAPTER_EVENTS.ERRORED,rr),loglevel$1.debug("errored",this.status,this.connectedAdapterName)}),er.on(ADAPTER_EVENTS.ADAPTER_DATA_UPDATED,rr=>{loglevel$1.debug("adapter data updated",rr),this.emit(ADAPTER_EVENTS.ADAPTER_DATA_UPDATED,rr)}),er.on(ADAPTER_EVENTS.CACHE_CLEAR,rr=>{loglevel$1.debug("adapter cache clear",rr),storageAvailable(this.storage)&&this.clearCache()})}checkInitRequirements(){if(this.status===ADAPTER_STATUS.CONNECTING)throw WalletInitializationError.notReady("Already pending connection");if(this.status===ADAPTER_STATUS.CONNECTED)throw WalletInitializationError.notReady("Already connected");if(this.status===ADAPTER_STATUS.READY)throw WalletInitializationError.notReady("Adapter is already initialized")}cacheWallet(er){storageAvailable(this.storage)&&(window[this.storage].setItem(ADAPTER_CACHE_KEY,er),this.cachedAdapter=er)}connectToPlugins(er){Object.values(this.plugins).map(async rr=>{try{if(!rr.SUPPORTED_ADAPTERS.includes(er.adapter)||rr.status===PLUGIN_STATUS.CONNECTED)return;const{openloginInstance:nr}=this.walletAdapters[this.connectedAdapterName],{options:ir,sessionId:sr,sessionNamespace:or}=nr||{};await rr.initWithWeb3Auth(this,ir.whiteLabel),await rr.connect({sessionId:sr,sessionNamespace:or})}catch(nr){if(nr.code===5211)return;loglevel$1.error(nr)}})}}const warn=(...tr)=>{console!=null&&console.warn&&(isString(tr[0])&&(tr[0]=`react-i18next:: ${tr[0]}`),console.warn(...tr))},alreadyWarned={},warnOnce=(...tr)=>{isString(tr[0])&&alreadyWarned[tr[0]]||(isString(tr[0])&&(alreadyWarned[tr[0]]=new Date),warn(...tr))},loadedClb=(tr,er)=>()=>{if(tr.isInitialized)er();else{const rr=()=>{setTimeout(()=>{tr.off("initialized",rr)},0),er()};tr.on("initialized",rr)}},loadNamespaces=(tr,er,rr)=>{tr.loadNamespaces(er,loadedClb(tr,rr))},loadLanguages=(tr,er,rr,nr)=>{isString(rr)&&(rr=[rr]),rr.forEach(ir=>{tr.options.ns.indexOf(ir)<0&&tr.options.ns.push(ir)}),tr.loadLanguages(er,loadedClb(tr,nr))},hasLoadedNamespace=(tr,er,rr={})=>!er.languages||!er.languages.length?(warnOnce("i18n.languages were undefined or empty",er.languages),!0):er.hasLoadedNamespace(tr,{lng:rr.lng,precheck:(nr,ir)=>{var sr;if(((sr=rr.bindI18n)==null?void 0:sr.indexOf("languageChanging"))>-1&&nr.services.backendConnector.backend&&nr.isLanguageChangingTo&&!ir(nr.isLanguageChangingTo,tr))return!1}}),isString=tr=>typeof tr=="string",isObject=tr=>typeof tr=="object"&&tr!==null,matchHtmlEntity=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,htmlEntities={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"","&#169;":"","&reg;":"","&#174;":"","&hellip;":"","&#8230;":"","&#x2F;":"/","&#47;":"/"},unescapeHtmlEntity=tr=>htmlEntities[tr],unescape=tr=>tr.replace(matchHtmlEntity,unescapeHtmlEntity);let defaultOptions={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape};const setDefaults=(tr={})=>{defaultOptions={...defaultOptions,...tr}},getDefaults=()=>defaultOptions;let i18nInstance$1;const setI18n=tr=>{i18nInstance$1=tr},getI18n=()=>i18nInstance$1,initReactI18next={type:"3rdParty",init(tr){setDefaults(tr.options.react),setI18n(tr)}},I18nContext=reactExports.createContext();class ReportNamespaces{constructor(){this.usedNamespaces={}}addUsedNamespaces(er){er.forEach(rr=>{var nr;(nr=this.usedNamespaces)[rr]??(nr[rr]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}const usePrevious=(tr,er)=>{const rr=reactExports.useRef();return reactExports.useEffect(()=>{rr.current=tr},[tr,er]),rr.current},alwaysNewT=(tr,er,rr,nr)=>tr.getFixedT(er,rr,nr),useMemoizedT=(tr,er,rr,nr)=>reactExports.useCallback(alwaysNewT(tr,er,rr,nr),[tr,er,rr,nr]),useTranslation=(tr,er={})=>{var Ur,Dr,Hr,zr;const{i18n:rr}=er,{i18n:nr,defaultNS:ir}=reactExports.useContext(I18nContext)||{},sr=rr||nr||getI18n();if(sr&&!sr.reportNamespaces&&(sr.reportNamespaces=new ReportNamespaces),!sr){warnOnce("You will need to pass in an i18next instance by using initReactI18next");const Cr=(Pr,Sr)=>isString(Sr)?Sr:isObject(Sr)&&isString(Sr.defaultValue)?Sr.defaultValue:Array.isArray(Pr)?Pr[Pr.length-1]:Pr,Mr=[Cr,{},!1];return Mr.t=Cr,Mr.i18n={},Mr.ready=!1,Mr}(Ur=sr.options.react)!=null&&Ur.wait&&warnOnce("It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const or={...getDefaults(),...sr.options.react,...er},{useSuspense:ar,keyPrefix:cr}=or;let lr=ir||((Dr=sr.options)==null?void 0:Dr.defaultNS);lr=isString(lr)?[lr]:lr||["translation"],(zr=(Hr=sr.reportNamespaces).addUsedNamespaces)==null||zr.call(Hr,lr);const ur=(sr.isInitialized||sr.initializedStoreOnce)&&lr.every(Cr=>hasLoadedNamespace(Cr,sr,or)),dr=useMemoizedT(sr,er.lng||null,or.nsMode==="fallback"?lr:lr[0],cr),yr=()=>dr,mr=()=>alwaysNewT(sr,er.lng||null,or.nsMode==="fallback"?lr:lr[0],cr),[wr,xr]=reactExports.useState(yr);let Or=lr.join();er.lng&&(Or=`${er.lng}${Or}`);const Tr=usePrevious(Or),Ar=reactExports.useRef(!0);reactExports.useEffect(()=>{const{bindI18n:Cr,bindI18nStore:Mr}=or;Ar.current=!0,!ur&&!ar&&(er.lng?loadLanguages(sr,er.lng,lr,()=>{Ar.current&&xr(mr)}):loadNamespaces(sr,lr,()=>{Ar.current&&xr(mr)})),ur&&Tr&&Tr!==Or&&Ar.current&&xr(mr);const Pr=()=>{Ar.current&&xr(mr)};return Cr&&(sr==null||sr.on(Cr,Pr)),Mr&&(sr==null||sr.store.on(Mr,Pr)),()=>{Ar.current=!1,sr&&(Cr==null||Cr.split(" ").forEach(Sr=>sr.off(Sr,Pr))),Mr&&sr&&Mr.split(" ").forEach(Sr=>sr.store.off(Sr,Pr))}},[sr,Or]),reactExports.useEffect(()=>{Ar.current&&ur&&xr(yr)},[sr,cr,ur]);const Nr=[wr,sr,ur];if(Nr.t=wr,Nr.i18n=sr,Nr.ready=ur,ur||!ur&&!ar)return Nr;throw new Promise(Cr=>{er.lng?loadLanguages(sr,er.lng,lr,()=>Cr()):loadNamespaces(sr,lr,()=>Cr())})},consoleLogger={type:"logger",log(tr){this.output("log",tr)},warn(tr){this.output("warn",tr)},error(tr){this.output("error",tr)},output(tr,er){console&&console[tr]&&console[tr].apply(console,er)}};class Logger{constructor(er){let rr=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.init(er,rr)}init(er){let rr=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.prefix=rr.prefix||"i18next:",this.logger=er||consoleLogger,this.options=rr,this.debug=rr.debug}log(){for(var er=arguments.length,rr=new Array(er),nr=0;nr<er;nr++)rr[nr]=arguments[nr];return this.forward(rr,"log","",!0)}warn(){for(var er=arguments.length,rr=new Array(er),nr=0;nr<er;nr++)rr[nr]=arguments[nr];return this.forward(rr,"warn","",!0)}error(){for(var er=arguments.length,rr=new Array(er),nr=0;nr<er;nr++)rr[nr]=arguments[nr];return this.forward(rr,"error","")}deprecate(){for(var er=arguments.length,rr=new Array(er),nr=0;nr<er;nr++)rr[nr]=arguments[nr];return this.forward(rr,"warn","WARNING DEPRECATED: ",!0)}forward(er,rr,nr,ir){return ir&&!this.debug?null:(typeof er[0]=="string"&&(er[0]=`${nr}${this.prefix} ${er[0]}`),this.logger[rr](er))}create(er){return new Logger(this.logger,{prefix:`${this.prefix}:${er}:`,...this.options})}clone(er){return er=er||this.options,er.prefix=er.prefix||this.prefix,new Logger(this.logger,er)}}var baseLogger=new Logger;class EventEmitter{constructor(){this.observers={}}on(er,rr){return er.split(" ").forEach(nr=>{this.observers[nr]||(this.observers[nr]=new Map);const ir=this.observers[nr].get(rr)||0;this.observers[nr].set(rr,ir+1)}),this}off(er,rr){if(this.observers[er]){if(!rr){delete this.observers[er];return}this.observers[er].delete(rr)}}emit(er){for(var rr=arguments.length,nr=new Array(rr>1?rr-1:0),ir=1;ir<rr;ir++)nr[ir-1]=arguments[ir];this.observers[er]&&Array.from(this.observers[er].entries()).forEach(or=>{let[ar,cr]=or;for(let lr=0;lr<cr;lr++)ar(...nr)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(or=>{let[ar,cr]=or;for(let lr=0;lr<cr;lr++)ar.apply(ar,[er,...nr])})}}const defer=()=>{let tr,er;const rr=new Promise((nr,ir)=>{tr=nr,er=ir});return rr.resolve=tr,rr.reject=er,rr},makeString=tr=>tr==null?"":""+tr,copy$1=(tr,er,rr)=>{tr.forEach(nr=>{er[nr]&&(rr[nr]=er[nr])})},lastOfPathSeparatorRegExp=/###/g,cleanKey=tr=>tr&&tr.indexOf("###")>-1?tr.replace(lastOfPathSeparatorRegExp,"."):tr,canNotTraverseDeeper=tr=>!tr||typeof tr=="string",getLastOfPath=(tr,er,rr)=>{const nr=typeof er!="string"?er:er.split(".");let ir=0;for(;ir<nr.length-1;){if(canNotTraverseDeeper(tr))return{};const sr=cleanKey(nr[ir]);!tr[sr]&&rr&&(tr[sr]=new rr),Object.prototype.hasOwnProperty.call(tr,sr)?tr=tr[sr]:tr={},++ir}return canNotTraverseDeeper(tr)?{}:{obj:tr,k:cleanKey(nr[ir])}},setPath=(tr,er,rr)=>{const{obj:nr,k:ir}=getLastOfPath(tr,er,Object);if(nr!==void 0||er.length===1){nr[ir]=rr;return}let sr=er[er.length-1],or=er.slice(0,er.length-1),ar=getLastOfPath(tr,or,Object);for(;ar.obj===void 0&&or.length;)sr=`${or[or.length-1]}.${sr}`,or=or.slice(0,or.length-1),ar=getLastOfPath(tr,or,Object),ar&&ar.obj&&typeof ar.obj[`${ar.k}.${sr}`]<"u"&&(ar.obj=void 0);ar.obj[`${ar.k}.${sr}`]=rr},pushPath=(tr,er,rr,nr)=>{const{obj:ir,k:sr}=getLastOfPath(tr,er,Object);ir[sr]=ir[sr]||[],ir[sr].push(rr)},getPath=(tr,er)=>{const{obj:rr,k:nr}=getLastOfPath(tr,er);if(rr)return rr[nr]},getPathWithDefaults=(tr,er,rr)=>{const nr=getPath(tr,rr);return nr!==void 0?nr:getPath(er,rr)},deepExtend=(tr,er,rr)=>{for(const nr in er)nr!=="__proto__"&&nr!=="constructor"&&(nr in tr?typeof tr[nr]=="string"||tr[nr]instanceof String||typeof er[nr]=="string"||er[nr]instanceof String?rr&&(tr[nr]=er[nr]):deepExtend(tr[nr],er[nr],rr):tr[nr]=er[nr]);return tr},regexEscape=tr=>tr.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var _entityMap={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const escape=tr=>typeof tr=="string"?tr.replace(/[&<>"'\/]/g,er=>_entityMap[er]):tr;class RegExpCache{constructor(er){this.capacity=er,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(er){const rr=this.regExpMap.get(er);if(rr!==void 0)return rr;const nr=new RegExp(er);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(er,nr),this.regExpQueue.push(er),nr}}const chars=[" ",",","?","!",";"],looksLikeObjectPathRegExpCache=new RegExpCache(20),looksLikeObjectPath=(tr,er,rr)=>{er=er||"",rr=rr||"";const nr=chars.filter(or=>er.indexOf(or)<0&&rr.indexOf(or)<0);if(nr.length===0)return!0;const ir=looksLikeObjectPathRegExpCache.getRegExp(`(${nr.map(or=>or==="?"?"\\?":or).join("|")})`);let sr=!ir.test(tr);if(!sr){const or=tr.indexOf(rr);or>0&&!ir.test(tr.substring(0,or))&&(sr=!0)}return sr},deepFind=function(tr,er){let rr=arguments.length>2&&arguments[2]!==void 0?arguments[2]:".";if(!tr)return;if(tr[er])return tr[er];const nr=er.split(rr);let ir=tr;for(let sr=0;sr<nr.length;){if(!ir||typeof ir!="object")return;let or,ar="";for(let cr=sr;cr<nr.length;++cr)if(cr!==sr&&(ar+=rr),ar+=nr[cr],or=ir[ar],or!==void 0){if(["string","number","boolean"].indexOf(typeof or)>-1&&cr<nr.length-1)continue;sr+=cr-sr+1;break}ir=or}return ir},getCleanedCode=tr=>tr&&tr.indexOf("_")>0?tr.replace("_","-"):tr;class ResourceStore extends EventEmitter{constructor(er){let rr=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{ns:["translation"],defaultNS:"translation"};super(),this.data=er||{},this.options=rr,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(er){this.options.ns.indexOf(er)<0&&this.options.ns.push(er)}removeNamespaces(er){const rr=this.options.ns.indexOf(er);rr>-1&&this.options.ns.splice(rr,1)}getResource(er,rr,nr){let ir=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const sr=ir.keySeparator!==void 0?ir.keySeparator:this.options.keySeparator,or=ir.ignoreJSONStructure!==void 0?ir.ignoreJSONStructure:this.options.ignoreJSONStructure;let ar;er.indexOf(".")>-1?ar=er.split("."):(ar=[er,rr],nr&&(Array.isArray(nr)?ar.push(...nr):typeof nr=="string"&&sr?ar.push(...nr.split(sr)):ar.push(nr)));const cr=getPath(this.data,ar);return!cr&&!rr&&!nr&&er.indexOf(".")>-1&&(er=ar[0],rr=ar[1],nr=ar.slice(2).join(".")),cr||!or||typeof nr!="string"?cr:deepFind(this.data&&this.data[er]&&this.data[er][rr],nr,sr)}addResource(er,rr,nr,ir){let sr=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{silent:!1};const or=sr.keySeparator!==void 0?sr.keySeparator:this.options.keySeparator;let ar=[er,rr];nr&&(ar=ar.concat(or?nr.split(or):nr)),er.indexOf(".")>-1&&(ar=er.split("."),ir=rr,rr=ar[1]),this.addNamespaces(rr),setPath(this.data,ar,ir),sr.silent||this.emit("added",er,rr,nr,ir)}addResources(er,rr,nr){let ir=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{silent:!1};for(const sr in nr)(typeof nr[sr]=="string"||Array.isArray(nr[sr]))&&this.addResource(er,rr,sr,nr[sr],{silent:!0});ir.silent||this.emit("added",er,rr,nr)}addResourceBundle(er,rr,nr,ir,sr){let or=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{silent:!1,skipCopy:!1},ar=[er,rr];er.indexOf(".")>-1&&(ar=er.split("."),ir=nr,nr=rr,rr=ar[1]),this.addNamespaces(rr);let cr=getPath(this.data,ar)||{};or.skipCopy||(nr=JSON.parse(JSON.stringify(nr))),ir?deepExtend(cr,nr,sr):cr={...cr,...nr},setPath(this.data,ar,cr),or.silent||this.emit("added",er,rr,nr)}removeResourceBundle(er,rr){this.hasResourceBundle(er,rr)&&delete this.data[er][rr],this.removeNamespaces(rr),this.emit("removed",er,rr)}hasResourceBundle(er,rr){return this.getResource(er,rr)!==void 0}getResourceBundle(er,rr){return rr||(rr=this.options.defaultNS),this.options.compatibilityAPI==="v1"?{...this.getResource(er,rr)}:this.getResource(er,rr)}getDataByLanguage(er){return this.data[er]}hasLanguageSomeTranslations(er){const rr=this.getDataByLanguage(er);return!!(rr&&Object.keys(rr)||[]).find(ir=>rr[ir]&&Object.keys(rr[ir]).length>0)}toJSON(){return this.data}}var postProcessor={processors:{},addPostProcessor(tr){this.processors[tr.name]=tr},handle(tr,er,rr,nr,ir){return tr.forEach(sr=>{this.processors[sr]&&(er=this.processors[sr].process(er,rr,nr,ir))}),er}};const checkedLoadedFor={};class Translator extends EventEmitter{constructor(er){let rr=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),copy$1(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],er,this),this.options=rr,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=baseLogger.create("translator")}changeLanguage(er){er&&(this.language=er)}exists(er){let rr=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};if(er==null)return!1;const nr=this.resolve(er,rr);return nr&&nr.res!==void 0}extractFromKey(er,rr){let nr=rr.nsSeparator!==void 0?rr.nsSeparator:this.options.nsSeparator;nr===void 0&&(nr=":");const ir=rr.keySeparator!==void 0?rr.keySeparator:this.options.keySeparator;let sr=rr.ns||this.options.defaultNS||[];const or=nr&&er.indexOf(nr)>-1,ar=!this.options.userDefinedKeySeparator&&!rr.keySeparator&&!this.options.userDefinedNsSeparator&&!rr.nsSeparator&&!looksLikeObjectPath(er,nr,ir);if(or&&!ar){const cr=er.match(this.interpolator.nestingRegexp);if(cr&&cr.length>0)return{key:er,namespaces:sr};const lr=er.split(nr);(nr!==ir||nr===ir&&this.options.ns.indexOf(lr[0])>-1)&&(sr=lr.shift()),er=lr.join(ir)}return typeof sr=="string"&&(sr=[sr]),{key:er,namespaces:sr}}translate(er,rr,nr){if(typeof rr!="object"&&this.options.overloadTranslationOptionHandler&&(rr=this.options.overloadTranslationOptionHandler(arguments)),typeof rr=="object"&&(rr={...rr}),rr||(rr={}),er==null)return"";Array.isArray(er)||(er=[String(er)]);const ir=rr.returnDetails!==void 0?rr.returnDetails:this.options.returnDetails,sr=rr.keySeparator!==void 0?rr.keySeparator:this.options.keySeparator,{key:or,namespaces:ar}=this.extractFromKey(er[er.length-1],rr),cr=ar[ar.length-1],lr=rr.lng||this.language,ur=rr.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(lr&&lr.toLowerCase()==="cimode"){if(ur){const Ur=rr.nsSeparator||this.options.nsSeparator;return ir?{res:`${cr}${Ur}${or}`,usedKey:or,exactUsedKey:or,usedLng:lr,usedNS:cr,usedParams:this.getUsedParamsDetails(rr)}:`${cr}${Ur}${or}`}return ir?{res:or,usedKey:or,exactUsedKey:or,usedLng:lr,usedNS:cr,usedParams:this.getUsedParamsDetails(rr)}:or}const dr=this.resolve(er,rr);let yr=dr&&dr.res;const mr=dr&&dr.usedKey||or,wr=dr&&dr.exactUsedKey||or,xr=Object.prototype.toString.apply(yr),Or=["[object Number]","[object Function]","[object RegExp]"],Tr=rr.joinArrays!==void 0?rr.joinArrays:this.options.joinArrays,Ar=!this.i18nFormat||this.i18nFormat.handleAsObject;if(Ar&&yr&&(typeof yr!="string"&&typeof yr!="boolean"&&typeof yr!="number")&&Or.indexOf(xr)<0&&!(typeof Tr=="string"&&Array.isArray(yr))){if(!rr.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const Ur=this.options.returnedObjectHandler?this.options.returnedObjectHandler(mr,yr,{...rr,ns:ar}):`key '${or} (${this.language})' returned an object instead of string.`;return ir?(dr.res=Ur,dr.usedParams=this.getUsedParamsDetails(rr),dr):Ur}if(sr){const Ur=Array.isArray(yr),Dr=Ur?[]:{},Hr=Ur?wr:mr;for(const zr in yr)if(Object.prototype.hasOwnProperty.call(yr,zr)){const Cr=`${Hr}${sr}${zr}`;Dr[zr]=this.translate(Cr,{...rr,joinArrays:!1,ns:ar}),Dr[zr]===Cr&&(Dr[zr]=yr[zr])}yr=Dr}}else if(Ar&&typeof Tr=="string"&&Array.isArray(yr))yr=yr.join(Tr),yr&&(yr=this.extendTranslation(yr,er,rr,nr));else{let Ur=!1,Dr=!1;const Hr=rr.count!==void 0&&typeof rr.count!="string",zr=Translator.hasDefaultValue(rr),Cr=Hr?this.pluralResolver.getSuffix(lr,rr.count,rr):"",Mr=rr.ordinal&&Hr?this.pluralResolver.getSuffix(lr,rr.count,{ordinal:!1}):"",Pr=Hr&&!rr.ordinal&&rr.count===0&&this.pluralResolver.shouldUseIntlApi(),Sr=Pr&&rr[`defaultValue${this.options.pluralSeparator}zero`]||rr[`defaultValue${Cr}`]||rr[`defaultValue${Mr}`]||rr.defaultValue;!this.isValidLookup(yr)&&zr&&(Ur=!0,yr=Sr),this.isValidLookup(yr)||(Dr=!0,yr=or);const gr=(rr.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&Dr?void 0:yr,fr=zr&&Sr!==yr&&this.options.updateMissing;if(Dr||Ur||fr){if(this.logger.log(fr?"updateKey":"missingKey",lr,cr,or,fr?Sr:yr),sr){const $r=this.resolve(or,{...rr,keySeparator:!1});$r&&$r.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let hr=[];const br=this.languageUtils.getFallbackCodes(this.options.fallbackLng,rr.lng||this.language);if(this.options.saveMissingTo==="fallback"&&br&&br[0])for(let $r=0;$r<br.length;$r++)hr.push(br[$r]);else this.options.saveMissingTo==="all"?hr=this.languageUtils.toResolveHierarchy(rr.lng||this.language):hr.push(rr.lng||this.language);const _r=($r,Er,vr)=>{const Ir=zr&&vr!==yr?vr:gr;this.options.missingKeyHandler?this.options.missingKeyHandler($r,cr,Er,Ir,fr,rr):this.backendConnector&&this.backendConnector.saveMissing&&this.backendConnector.saveMissing($r,cr,Er,Ir,fr,rr),this.emit("missingKey",$r,cr,Er,yr)};this.options.saveMissing&&(this.options.saveMissingPlurals&&Hr?hr.forEach($r=>{const Er=this.pluralResolver.getSuffixes($r,rr);Pr&&rr[`defaultValue${this.options.pluralSeparator}zero`]&&Er.indexOf(`${this.options.pluralSeparator}zero`)<0&&Er.push(`${this.options.pluralSeparator}zero`),Er.forEach(vr=>{_r([$r],or+vr,rr[`defaultValue${vr}`]||Sr)})}):_r(hr,or,Sr))}yr=this.extendTranslation(yr,er,rr,dr,nr),Dr&&yr===or&&this.options.appendNamespaceToMissingKey&&(yr=`${cr}:${or}`),(Dr||Ur)&&this.options.parseMissingKeyHandler&&(this.options.compatibilityAPI!=="v1"?yr=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${cr}:${or}`:or,Ur?yr:void 0):yr=this.options.parseMissingKeyHandler(yr))}return ir?(dr.res=yr,dr.usedParams=this.getUsedParamsDetails(rr),dr):yr}extendTranslation(er,rr,nr,ir,sr){var or=this;if(this.i18nFormat&&this.i18nFormat.parse)er=this.i18nFormat.parse(er,{...this.options.interpolation.defaultVariables,...nr},nr.lng||this.language||ir.usedLng,ir.usedNS,ir.usedKey,{resolved:ir});else if(!nr.skipInterpolation){nr.interpolation&&this.interpolator.init({...nr,interpolation:{...this.options.interpolation,...nr.interpolation}});const lr=typeof er=="string"&&(nr&&nr.interpolation&&nr.interpolation.skipOnVariables!==void 0?nr.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let ur;if(lr){const yr=er.match(this.interpolator.nestingRegexp);ur=yr&&yr.length}let dr=nr.replace&&typeof nr.replace!="string"?nr.replace:nr;if(this.options.interpolation.defaultVariables&&(dr={...this.options.interpolation.defaultVariables,...dr}),er=this.interpolator.interpolate(er,dr,nr.lng||this.language||ir.usedLng,nr),lr){const yr=er.match(this.interpolator.nestingRegexp),mr=yr&&yr.length;ur<mr&&(nr.nest=!1)}!nr.lng&&this.options.compatibilityAPI!=="v1"&&ir&&ir.res&&(nr.lng=this.language||ir.usedLng),nr.nest!==!1&&(er=this.interpolator.nest(er,function(){for(var yr=arguments.length,mr=new Array(yr),wr=0;wr<yr;wr++)mr[wr]=arguments[wr];return sr&&sr[0]===mr[0]&&!nr.context?(or.logger.warn(`It seems you are nesting recursively key: ${mr[0]} in key: ${rr[0]}`),null):or.translate(...mr,rr)},nr)),nr.interpolation&&this.interpolator.reset()}const ar=nr.postProcess||this.options.postProcess,cr=typeof ar=="string"?[ar]:ar;return er!=null&&cr&&cr.length&&nr.applyPostProcessor!==!1&&(er=postProcessor.handle(cr,er,rr,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...ir,usedParams:this.getUsedParamsDetails(nr)},...nr}:nr,this)),er}resolve(er){let rr=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},nr,ir,sr,or,ar;return typeof er=="string"&&(er=[er]),er.forEach(cr=>{if(this.isValidLookup(nr))return;const lr=this.extractFromKey(cr,rr),ur=lr.key;ir=ur;let dr=lr.namespaces;this.options.fallbackNS&&(dr=dr.concat(this.options.fallbackNS));const yr=rr.count!==void 0&&typeof rr.count!="string",mr=yr&&!rr.ordinal&&rr.count===0&&this.pluralResolver.shouldUseIntlApi(),wr=rr.context!==void 0&&(typeof rr.context=="string"||typeof rr.context=="number")&&rr.context!=="",xr=rr.lngs?rr.lngs:this.languageUtils.toResolveHierarchy(rr.lng||this.language,rr.fallbackLng);dr.forEach(Or=>{this.isValidLookup(nr)||(ar=Or,!checkedLoadedFor[`${xr[0]}-${Or}`]&&this.utils&&this.utils.hasLoadedNamespace&&!this.utils.hasLoadedNamespace(ar)&&(checkedLoadedFor[`${xr[0]}-${Or}`]=!0,this.logger.warn(`key "${ir}" for languages "${xr.join(", ")}" won't get resolved as namespace "${ar}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),xr.forEach(Tr=>{if(this.isValidLookup(nr))return;or=Tr;const Ar=[ur];if(this.i18nFormat&&this.i18nFormat.addLookupKeys)this.i18nFormat.addLookupKeys(Ar,ur,Tr,Or,rr);else{let Ur;yr&&(Ur=this.pluralResolver.getSuffix(Tr,rr.count,rr));const Dr=`${this.options.pluralSeparator}zero`,Hr=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(yr&&(Ar.push(ur+Ur),rr.ordinal&&Ur.indexOf(Hr)===0&&Ar.push(ur+Ur.replace(Hr,this.options.pluralSeparator)),mr&&Ar.push(ur+Dr)),wr){const zr=`${ur}${this.options.contextSeparator}${rr.context}`;Ar.push(zr),yr&&(Ar.push(zr+Ur),rr.ordinal&&Ur.indexOf(Hr)===0&&Ar.push(zr+Ur.replace(Hr,this.options.pluralSeparator)),mr&&Ar.push(zr+Dr))}}let Nr;for(;Nr=Ar.pop();)this.isValidLookup(nr)||(sr=Nr,nr=this.getResource(Tr,Or,Nr,rr))}))})}),{res:nr,usedKey:ir,exactUsedKey:sr,usedLng:or,usedNS:ar}}isValidLookup(er){return er!==void 0&&!(!this.options.returnNull&&er===null)&&!(!this.options.returnEmptyString&&er==="")}getResource(er,rr,nr){let ir=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(er,rr,nr,ir):this.resourceStore.getResource(er,rr,nr,ir)}getUsedParamsDetails(){let er=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const rr=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],nr=er.replace&&typeof er.replace!="string";let ir=nr?er.replace:er;if(nr&&typeof er.count<"u"&&(ir.count=er.count),this.options.interpolation.defaultVariables&&(ir={...this.options.interpolation.defaultVariables,...ir}),!nr){ir={...ir};for(const sr of rr)delete ir[sr]}return ir}static hasDefaultValue(er){const rr="defaultValue";for(const nr in er)if(Object.prototype.hasOwnProperty.call(er,nr)&&rr===nr.substring(0,rr.length)&&er[nr]!==void 0)return!0;return!1}}const capitalize=tr=>tr.charAt(0).toUpperCase()+tr.slice(1);class LanguageUtil{constructor(er){this.options=er,this.supportedLngs=this.options.supportedLngs||!1,this.logger=baseLogger.create("languageUtils")}getScriptPartFromCode(er){if(er=getCleanedCode(er),!er||er.indexOf("-")<0)return null;const rr=er.split("-");return rr.length===2||(rr.pop(),rr[rr.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(rr.join("-"))}getLanguagePartFromCode(er){if(er=getCleanedCode(er),!er||er.indexOf("-")<0)return er;const rr=er.split("-");return this.formatLanguageCode(rr[0])}formatLanguageCode(er){if(typeof er=="string"&&er.indexOf("-")>-1){const rr=["hans","hant","latn","cyrl","cans","mong","arab"];let nr=er.split("-");return this.options.lowerCaseLng?nr=nr.map(ir=>ir.toLowerCase()):nr.length===2?(nr[0]=nr[0].toLowerCase(),nr[1]=nr[1].toUpperCase(),rr.indexOf(nr[1].toLowerCase())>-1&&(nr[1]=capitalize(nr[1].toLowerCase()))):nr.length===3&&(nr[0]=nr[0].toLowerCase(),nr[1].length===2&&(nr[1]=nr[1].toUpperCase()),nr[0]!=="sgn"&&nr[2].length===2&&(nr[2]=nr[2].toUpperCase()),rr.indexOf(nr[1].toLowerCase())>-1&&(nr[1]=capitalize(nr[1].toLowerCase())),rr.indexOf(nr[2].toLowerCase())>-1&&(nr[2]=capitalize(nr[2].toLowerCase()))),nr.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?er.toLowerCase():er}isSupportedCode(er){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(er=this.getLanguagePartFromCode(er)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(er)>-1}getBestMatchFromCodes(er){if(!er)return null;let rr;return er.forEach(nr=>{if(rr)return;const ir=this.formatLanguageCode(nr);(!this.options.supportedLngs||this.isSupportedCode(ir))&&(rr=ir)}),!rr&&this.options.supportedLngs&&er.forEach(nr=>{if(rr)return;const ir=this.getLanguagePartFromCode(nr);if(this.isSupportedCode(ir))return rr=ir;rr=this.options.supportedLngs.find(sr=>{if(sr===ir)return sr;if(!(sr.indexOf("-")<0&&ir.indexOf("-")<0)&&(sr.indexOf("-")>0&&ir.indexOf("-")<0&&sr.substring(0,sr.indexOf("-"))===ir||sr.indexOf(ir)===0&&ir.length>1))return sr})}),rr||(rr=this.getFallbackCodes(this.options.fallbackLng)[0]),rr}getFallbackCodes(er,rr){if(!er)return[];if(typeof er=="function"&&(er=er(rr)),typeof er=="string"&&(er=[er]),Array.isArray(er))return er;if(!rr)return er.default||[];let nr=er[rr];return nr||(nr=er[this.getScriptPartFromCode(rr)]),nr||(nr=er[this.formatLanguageCode(rr)]),nr||(nr=er[this.getLanguagePartFromCode(rr)]),nr||(nr=er.default),nr||[]}toResolveHierarchy(er,rr){const nr=this.getFallbackCodes(rr||this.options.fallbackLng||[],er),ir=[],sr=or=>{or&&(this.isSupportedCode(or)?ir.push(or):this.logger.warn(`rejecting language code not found in supportedLngs: ${or}`))};return typeof er=="string"&&(er.indexOf("-")>-1||er.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&sr(this.formatLanguageCode(er)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&sr(this.getScriptPartFromCode(er)),this.options.load!=="currentOnly"&&sr(this.getLanguagePartFromCode(er))):typeof er=="string"&&sr(this.formatLanguageCode(er)),nr.forEach(or=>{ir.indexOf(or)<0&&sr(this.formatLanguageCode(or))}),ir}}let sets=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kk","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],_rulesPluralsTypes={1:tr=>+(tr>1),2:tr=>+(tr!=1),3:tr=>0,4:tr=>tr%10==1&&tr%100!=11?0:tr%10>=2&&tr%10<=4&&(tr%100<10||tr%100>=20)?1:2,5:tr=>tr==0?0:tr==1?1:tr==2?2:tr%100>=3&&tr%100<=10?3:tr%100>=11?4:5,6:tr=>tr==1?0:tr>=2&&tr<=4?1:2,7:tr=>tr==1?0:tr%10>=2&&tr%10<=4&&(tr%100<10||tr%100>=20)?1:2,8:tr=>tr==1?0:tr==2?1:tr!=8&&tr!=11?2:3,9:tr=>+(tr>=2),10:tr=>tr==1?0:tr==2?1:tr<7?2:tr<11?3:4,11:tr=>tr==1||tr==11?0:tr==2||tr==12?1:tr>2&&tr<20?2:3,12:tr=>+(tr%10!=1||tr%100==11),13:tr=>+(tr!==0),14:tr=>tr==1?0:tr==2?1:tr==3?2:3,15:tr=>tr%10==1&&tr%100!=11?0:tr%10>=2&&(tr%100<10||tr%100>=20)?1:2,16:tr=>tr%10==1&&tr%100!=11?0:tr!==0?1:2,17:tr=>tr==1||tr%10==1&&tr%100!=11?0:1,18:tr=>tr==0?0:tr==1?1:2,19:tr=>tr==1?0:tr==0||tr%100>1&&tr%100<11?1:tr%100>10&&tr%100<20?2:3,20:tr=>tr==1?0:tr==0||tr%100>0&&tr%100<20?1:2,21:tr=>tr%100==1?1:tr%100==2?2:tr%100==3||tr%100==4?3:0,22:tr=>tr==1?0:tr==2?1:(tr<0||tr>10)&&tr%10==0?2:3};const nonIntlVersions=["v1","v2","v3"],intlVersions=["v4"],suffixesOrder={zero:0,one:1,two:2,few:3,many:4,other:5},createRules=()=>{const tr={};return sets.forEach(er=>{er.lngs.forEach(rr=>{tr[rr]={numbers:er.nr,plurals:_rulesPluralsTypes[er.fc]}})}),tr};class PluralResolver{constructor(er){let rr=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.languageUtils=er,this.options=rr,this.logger=baseLogger.create("pluralResolver"),(!this.options.compatibilityJSON||intlVersions.includes(this.options.compatibilityJSON))&&(typeof Intl>"u"||!Intl.PluralRules)&&(this.options.compatibilityJSON="v3",this.logger.error("Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.")),this.rules=createRules()}addRule(er,rr){this.rules[er]=rr}getRule(er){let rr=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.shouldUseIntlApi())try{return new Intl.PluralRules(getCleanedCode(er==="dev"?"en":er),{type:rr.ordinal?"ordinal":"cardinal"})}catch{return}return this.rules[er]||this.rules[this.languageUtils.getLanguagePartFromCode(er)]}needsPlural(er){let rr=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const nr=this.getRule(er,rr);return this.shouldUseIntlApi()?nr&&nr.resolvedOptions().pluralCategories.length>1:nr&&nr.numbers.length>1}getPluralFormsOfKey(er,rr){let nr=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.getSuffixes(er,nr).map(ir=>`${rr}${ir}`)}getSuffixes(er){let rr=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const nr=this.getRule(er,rr);return nr?this.shouldUseIntlApi()?nr.resolvedOptions().pluralCategories.sort((ir,sr)=>suffixesOrder[ir]-suffixesOrder[sr]).map(ir=>`${this.options.prepend}${rr.ordinal?`ordinal${this.options.prepend}`:""}${ir}`):nr.numbers.map(ir=>this.getSuffix(er,ir,rr)):[]}getSuffix(er,rr){let nr=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const ir=this.getRule(er,nr);return ir?this.shouldUseIntlApi()?`${this.options.prepend}${nr.ordinal?`ordinal${this.options.prepend}`:""}${ir.select(rr)}`:this.getSuffixRetroCompatible(ir,rr):(this.logger.warn(`no plural rule found for: ${er}`),"")}getSuffixRetroCompatible(er,rr){const nr=er.noAbs?er.plurals(rr):er.plurals(Math.abs(rr));let ir=er.numbers[nr];this.options.simplifyPluralSuffix&&er.numbers.length===2&&er.numbers[0]===1&&(ir===2?ir="plural":ir===1&&(ir=""));const sr=()=>this.options.prepend&&ir.toString()?this.options.prepend+ir.toString():ir.toString();return this.options.compatibilityJSON==="v1"?ir===1?"":typeof ir=="number"?`_plural_${ir.toString()}`:sr():this.options.compatibilityJSON==="v2"||this.options.simplifyPluralSuffix&&er.numbers.length===2&&er.numbers[0]===1?sr():this.options.prepend&&nr.toString()?this.options.prepend+nr.toString():nr.toString()}shouldUseIntlApi(){return!nonIntlVersions.includes(this.options.compatibilityJSON)}}const deepFindWithDefaults=function(tr,er,rr){let nr=arguments.length>3&&arguments[3]!==void 0?arguments[3]:".",ir=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,sr=getPathWithDefaults(tr,er,rr);return!sr&&ir&&typeof rr=="string"&&(sr=deepFind(tr,rr,nr),sr===void 0&&(sr=deepFind(er,rr,nr))),sr},regexSafe=tr=>tr.replace(/\$/g,"$$$$");class Interpolator{constructor(){let er=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=baseLogger.create("interpolator"),this.options=er,this.format=er.interpolation&&er.interpolation.format||(rr=>rr),this.init(er)}init(){let er=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};er.interpolation||(er.interpolation={escapeValue:!0});const{escape:rr,escapeValue:nr,useRawValueToEscape:ir,prefix:sr,prefixEscaped:or,suffix:ar,suffixEscaped:cr,formatSeparator:lr,unescapeSuffix:ur,unescapePrefix:dr,nestingPrefix:yr,nestingPrefixEscaped:mr,nestingSuffix:wr,nestingSuffixEscaped:xr,nestingOptionsSeparator:Or,maxReplaces:Tr,alwaysFormat:Ar}=er.interpolation;this.escape=rr!==void 0?rr:escape,this.escapeValue=nr!==void 0?nr:!0,this.useRawValueToEscape=ir!==void 0?ir:!1,this.prefix=sr?regexEscape(sr):or||"{{",this.suffix=ar?regexEscape(ar):cr||"}}",this.formatSeparator=lr||",",this.unescapePrefix=ur?"":dr||"-",this.unescapeSuffix=this.unescapePrefix?"":ur||"",this.nestingPrefix=yr?regexEscape(yr):mr||regexEscape("$t("),this.nestingSuffix=wr?regexEscape(wr):xr||regexEscape(")"),this.nestingOptionsSeparator=Or||",",this.maxReplaces=Tr||1e3,this.alwaysFormat=Ar!==void 0?Ar:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const er=(rr,nr)=>rr&&rr.source===nr?(rr.lastIndex=0,rr):new RegExp(nr,"g");this.regexp=er(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=er(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=er(this.nestingRegexp,`${this.nestingPrefix}(.+?)${this.nestingSuffix}`)}interpolate(er,rr,nr,ir){let sr,or,ar;const cr=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},lr=mr=>{if(mr.indexOf(this.formatSeparator)<0){const Tr=deepFindWithDefaults(rr,cr,mr,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(Tr,void 0,nr,{...ir,...rr,interpolationkey:mr}):Tr}const wr=mr.split(this.formatSeparator),xr=wr.shift().trim(),Or=wr.join(this.formatSeparator).trim();return this.format(deepFindWithDefaults(rr,cr,xr,this.options.keySeparator,this.options.ignoreJSONStructure),Or,nr,{...ir,...rr,interpolationkey:xr})};this.resetRegExp();const ur=ir&&ir.missingInterpolationHandler||this.options.missingInterpolationHandler,dr=ir&&ir.interpolation&&ir.interpolation.skipOnVariables!==void 0?ir.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:mr=>regexSafe(mr)},{regex:this.regexp,safeValue:mr=>this.escapeValue?regexSafe(this.escape(mr)):regexSafe(mr)}].forEach(mr=>{for(ar=0;sr=mr.regex.exec(er);){const wr=sr[1].trim();if(or=lr(wr),or===void 0)if(typeof ur=="function"){const Or=ur(er,sr,ir);or=typeof Or=="string"?Or:""}else if(ir&&Object.prototype.hasOwnProperty.call(ir,wr))or="";else if(dr){or=sr[0];continue}else this.logger.warn(`missed to pass in variable ${wr} for interpolating ${er}`),or="";else typeof or!="string"&&!this.useRawValueToEscape&&(or=makeString(or));const xr=mr.safeValue(or);if(er=er.replace(sr[0],xr),dr?(mr.regex.lastIndex+=or.length,mr.regex.lastIndex-=sr[0].length):mr.regex.lastIndex=0,ar++,ar>=this.maxReplaces)break}}),er}nest(er,rr){let nr=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},ir,sr,or;const ar=(cr,lr)=>{const ur=this.nestingOptionsSeparator;if(cr.indexOf(ur)<0)return cr;const dr=cr.split(new RegExp(`${ur}[ ]*{`));let yr=`{${dr[1]}`;cr=dr[0],yr=this.interpolate(yr,or);const mr=yr.match(/'/g),wr=yr.match(/"/g);(mr&&mr.length%2===0&&!wr||wr.length%2!==0)&&(yr=yr.replace(/'/g,'"'));try{or=JSON.parse(yr),lr&&(or={...lr,...or})}catch(xr){return this.logger.warn(`failed parsing options string in nesting for key ${cr}`,xr),`${cr}${ur}${yr}`}return or.defaultValue&&or.defaultValue.indexOf(this.prefix)>-1&&delete or.defaultValue,cr};for(;ir=this.nestingRegexp.exec(er);){let cr=[];or={...nr},or=or.replace&&typeof or.replace!="string"?or.replace:or,or.applyPostProcessor=!1,delete or.defaultValue;let lr=!1;if(ir[0].indexOf(this.formatSeparator)!==-1&&!/{.*}/.test(ir[1])){const ur=ir[1].split(this.formatSeparator).map(dr=>dr.trim());ir[1]=ur.shift(),cr=ur,lr=!0}if(sr=rr(ar.call(this,ir[1].trim(),or),or),sr&&ir[0]===er&&typeof sr!="string")return sr;typeof sr!="string"&&(sr=makeString(sr)),sr||(this.logger.warn(`missed to resolve ${ir[1]} for nesting ${er}`),sr=""),lr&&(sr=cr.reduce((ur,dr)=>this.format(ur,dr,nr.lng,{...nr,interpolationkey:ir[1].trim()}),sr.trim())),er=er.replace(ir[0],sr),this.regexp.lastIndex=0}return er}}const parseFormatStr=tr=>{let er=tr.toLowerCase().trim();const rr={};if(tr.indexOf("(")>-1){const nr=tr.split("(");er=nr[0].toLowerCase().trim();const ir=nr[1].substring(0,nr[1].length-1);er==="currency"&&ir.indexOf(":")<0?rr.currency||(rr.currency=ir.trim()):er==="relativetime"&&ir.indexOf(":")<0?rr.range||(rr.range=ir.trim()):ir.split(";").forEach(or=>{if(or){const[ar,...cr]=or.split(":"),lr=cr.join(":").trim().replace(/^'+|'+$/g,""),ur=ar.trim();rr[ur]||(rr[ur]=lr),lr==="false"&&(rr[ur]=!1),lr==="true"&&(rr[ur]=!0),isNaN(lr)||(rr[ur]=parseInt(lr,10))}})}return{formatName:er,formatOptions:rr}},createCachedFormatter=tr=>{const er={};return(rr,nr,ir)=>{const sr=nr+JSON.stringify(ir);let or=er[sr];return or||(or=tr(getCleanedCode(nr),ir),er[sr]=or),or(rr)}};class Formatter{constructor(){let er=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=baseLogger.create("formatter"),this.options=er,this.formats={number:createCachedFormatter((rr,nr)=>{const ir=new Intl.NumberFormat(rr,{...nr});return sr=>ir.format(sr)}),currency:createCachedFormatter((rr,nr)=>{const ir=new Intl.NumberFormat(rr,{...nr,style:"currency"});return sr=>ir.format(sr)}),datetime:createCachedFormatter((rr,nr)=>{const ir=new Intl.DateTimeFormat(rr,{...nr});return sr=>ir.format(sr)}),relativetime:createCachedFormatter((rr,nr)=>{const ir=new Intl.RelativeTimeFormat(rr,{...nr});return sr=>ir.format(sr,nr.range||"day")}),list:createCachedFormatter((rr,nr)=>{const ir=new Intl.ListFormat(rr,{...nr});return sr=>ir.format(sr)})},this.init(er)}init(er){const nr=(arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}}).interpolation;this.formatSeparator=nr.formatSeparator?nr.formatSeparator:nr.formatSeparator||","}add(er,rr){this.formats[er.toLowerCase().trim()]=rr}addCached(er,rr){this.formats[er.toLowerCase().trim()]=createCachedFormatter(rr)}format(er,rr,nr){let ir=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const sr=rr.split(this.formatSeparator);if(sr.length>1&&sr[0].indexOf("(")>1&&sr[0].indexOf(")")<0&&sr.find(ar=>ar.indexOf(")")>-1)){const ar=sr.findIndex(cr=>cr.indexOf(")")>-1);sr[0]=[sr[0],...sr.splice(1,ar)].join(this.formatSeparator)}return sr.reduce((ar,cr)=>{const{formatName:lr,formatOptions:ur}=parseFormatStr(cr);if(this.formats[lr]){let dr=ar;try{const yr=ir&&ir.formatParams&&ir.formatParams[ir.interpolationkey]||{},mr=yr.locale||yr.lng||ir.locale||ir.lng||nr;dr=this.formats[lr](ar,mr,{...ur,...ir,...yr})}catch(yr){this.logger.warn(yr)}return dr}else this.logger.warn(`there was no format function for ${lr}`);return ar},er)}}const removePending=(tr,er)=>{tr.pending[er]!==void 0&&(delete tr.pending[er],tr.pendingCount--)};class Connector extends EventEmitter{constructor(er,rr,nr){let ir=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};super(),this.backend=er,this.store=rr,this.services=nr,this.languageUtils=nr.languageUtils,this.options=ir,this.logger=baseLogger.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=ir.maxParallelReads||10,this.readingCalls=0,this.maxRetries=ir.maxRetries>=0?ir.maxRetries:5,this.retryTimeout=ir.retryTimeout>=1?ir.retryTimeout:350,this.state={},this.queue=[],this.backend&&this.backend.init&&this.backend.init(nr,ir.backend,ir)}queueLoad(er,rr,nr,ir){const sr={},or={},ar={},cr={};return er.forEach(lr=>{let ur=!0;rr.forEach(dr=>{const yr=`${lr}|${dr}`;!nr.reload&&this.store.hasResourceBundle(lr,dr)?this.state[yr]=2:this.state[yr]<0||(this.state[yr]===1?or[yr]===void 0&&(or[yr]=!0):(this.state[yr]=1,ur=!1,or[yr]===void 0&&(or[yr]=!0),sr[yr]===void 0&&(sr[yr]=!0),cr[dr]===void 0&&(cr[dr]=!0)))}),ur||(ar[lr]=!0)}),(Object.keys(sr).length||Object.keys(or).length)&&this.queue.push({pending:or,pendingCount:Object.keys(or).length,loaded:{},errors:[],callback:ir}),{toLoad:Object.keys(sr),pending:Object.keys(or),toLoadLanguages:Object.keys(ar),toLoadNamespaces:Object.keys(cr)}}loaded(er,rr,nr){const ir=er.split("|"),sr=ir[0],or=ir[1];rr&&this.emit("failedLoading",sr,or,rr),nr&&this.store.addResourceBundle(sr,or,nr,void 0,void 0,{skipCopy:!0}),this.state[er]=rr?-1:2;const ar={};this.queue.forEach(cr=>{pushPath(cr.loaded,[sr],or),removePending(cr,er),rr&&cr.errors.push(rr),cr.pendingCount===0&&!cr.done&&(Object.keys(cr.loaded).forEach(lr=>{ar[lr]||(ar[lr]={});const ur=cr.loaded[lr];ur.length&&ur.forEach(dr=>{ar[lr][dr]===void 0&&(ar[lr][dr]=!0)})}),cr.done=!0,cr.errors.length?cr.callback(cr.errors):cr.callback())}),this.emit("loaded",ar),this.queue=this.queue.filter(cr=>!cr.done)}read(er,rr,nr){let ir=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,sr=arguments.length>4&&arguments[4]!==void 0?arguments[4]:this.retryTimeout,or=arguments.length>5?arguments[5]:void 0;if(!er.length)return or(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:er,ns:rr,fcName:nr,tried:ir,wait:sr,callback:or});return}this.readingCalls++;const ar=(lr,ur)=>{if(this.readingCalls--,this.waitingReads.length>0){const dr=this.waitingReads.shift();this.read(dr.lng,dr.ns,dr.fcName,dr.tried,dr.wait,dr.callback)}if(lr&&ur&&ir<this.maxRetries){setTimeout(()=>{this.read.call(this,er,rr,nr,ir+1,sr*2,or)},sr);return}or(lr,ur)},cr=this.backend[nr].bind(this.backend);if(cr.length===2){try{const lr=cr(er,rr);lr&&typeof lr.then=="function"?lr.then(ur=>ar(null,ur)).catch(ar):ar(null,lr)}catch(lr){ar(lr)}return}return cr(er,rr,ar)}prepareLoading(er,rr){let nr=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},ir=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),ir&&ir();typeof er=="string"&&(er=this.languageUtils.toResolveHierarchy(er)),typeof rr=="string"&&(rr=[rr]);const sr=this.queueLoad(er,rr,nr,ir);if(!sr.toLoad.length)return sr.pending.length||ir(),null;sr.toLoad.forEach(or=>{this.loadOne(or)})}load(er,rr,nr){this.prepareLoading(er,rr,{},nr)}reload(er,rr,nr){this.prepareLoading(er,rr,{reload:!0},nr)}loadOne(er){let rr=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const nr=er.split("|"),ir=nr[0],sr=nr[1];this.read(ir,sr,"read",void 0,void 0,(or,ar)=>{or&&this.logger.warn(`${rr}loading namespace ${sr} for language ${ir} failed`,or),!or&&ar&&this.logger.log(`${rr}loaded namespace ${sr} for language ${ir}`,ar),this.loaded(er,or,ar)})}saveMissing(er,rr,nr,ir,sr){let or=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{},ar=arguments.length>6&&arguments[6]!==void 0?arguments[6]:()=>{};if(this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(rr)){this.logger.warn(`did not save key "${nr}" as the namespace "${rr}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(nr==null||nr==="")){if(this.backend&&this.backend.create){const cr={...or,isUpdate:sr},lr=this.backend.create.bind(this.backend);if(lr.length<6)try{let ur;lr.length===5?ur=lr(er,rr,nr,ir,cr):ur=lr(er,rr,nr,ir),ur&&typeof ur.then=="function"?ur.then(dr=>ar(null,dr)).catch(ar):ar(null,ur)}catch(ur){ar(ur)}else lr(er,rr,nr,ir,ar,cr)}!er||!er[0]||this.store.addResource(er[0],rr,nr,ir)}}}const get=()=>({debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:tr=>{let er={};if(typeof tr[1]=="object"&&(er=tr[1]),typeof tr[1]=="string"&&(er.defaultValue=tr[1]),typeof tr[2]=="string"&&(er.tDescription=tr[2]),typeof tr[2]=="object"||typeof tr[3]=="object"){const rr=tr[3]||tr[2];Object.keys(rr).forEach(nr=>{er[nr]=rr[nr]})}return er},interpolation:{escapeValue:!0,format:tr=>tr,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}),transformOptions=tr=>(typeof tr.ns=="string"&&(tr.ns=[tr.ns]),typeof tr.fallbackLng=="string"&&(tr.fallbackLng=[tr.fallbackLng]),typeof tr.fallbackNS=="string"&&(tr.fallbackNS=[tr.fallbackNS]),tr.supportedLngs&&tr.supportedLngs.indexOf("cimode")<0&&(tr.supportedLngs=tr.supportedLngs.concat(["cimode"])),tr),noop$2=()=>{},bindMemberFunctions=tr=>{Object.getOwnPropertyNames(Object.getPrototypeOf(tr)).forEach(rr=>{typeof tr[rr]=="function"&&(tr[rr]=tr[rr].bind(tr))})};class I18n extends EventEmitter{constructor(){let er=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},rr=arguments.length>1?arguments[1]:void 0;if(super(),this.options=transformOptions(er),this.services={},this.logger=baseLogger,this.modules={external:[]},bindMemberFunctions(this),rr&&!this.isInitialized&&!er.isClone){if(!this.options.initImmediate)return this.init(er,rr),this;setTimeout(()=>{this.init(er,rr)},0)}}init(){var er=this;let rr=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},nr=arguments.length>1?arguments[1]:void 0;this.isInitializing=!0,typeof rr=="function"&&(nr=rr,rr={}),!rr.defaultNS&&rr.defaultNS!==!1&&rr.ns&&(typeof rr.ns=="string"?rr.defaultNS=rr.ns:rr.ns.indexOf("translation")<0&&(rr.defaultNS=rr.ns[0]));const ir=get();this.options={...ir,...this.options,...transformOptions(rr)},this.options.compatibilityAPI!=="v1"&&(this.options.interpolation={...ir.interpolation,...this.options.interpolation}),rr.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=rr.keySeparator),rr.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=rr.nsSeparator);const sr=ur=>ur?typeof ur=="function"?new ur:ur:null;if(!this.options.isClone){this.modules.logger?baseLogger.init(sr(this.modules.logger),this.options):baseLogger.init(null,this.options);let ur;this.modules.formatter?ur=this.modules.formatter:typeof Intl<"u"&&(ur=Formatter);const dr=new LanguageUtil(this.options);this.store=new ResourceStore(this.options.resources,this.options);const yr=this.services;yr.logger=baseLogger,yr.resourceStore=this.store,yr.languageUtils=dr,yr.pluralResolver=new PluralResolver(dr,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),ur&&(!this.options.interpolation.format||this.options.interpolation.format===ir.interpolation.format)&&(yr.formatter=sr(ur),yr.formatter.init(yr,this.options),this.options.interpolation.format=yr.formatter.format.bind(yr.formatter)),yr.interpolator=new Interpolator(this.options),yr.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},yr.backendConnector=new Connector(sr(this.modules.backend),yr.resourceStore,yr,this.options),yr.backendConnector.on("*",function(mr){for(var wr=arguments.length,xr=new Array(wr>1?wr-1:0),Or=1;Or<wr;Or++)xr[Or-1]=arguments[Or];er.emit(mr,...xr)}),this.modules.languageDetector&&(yr.languageDetector=sr(this.modules.languageDetector),yr.languageDetector.init&&yr.languageDetector.init(yr,this.options.detection,this.options)),this.modules.i18nFormat&&(yr.i18nFormat=sr(this.modules.i18nFormat),yr.i18nFormat.init&&yr.i18nFormat.init(this)),this.translator=new Translator(this.services,this.options),this.translator.on("*",function(mr){for(var wr=arguments.length,xr=new Array(wr>1?wr-1:0),Or=1;Or<wr;Or++)xr[Or-1]=arguments[Or];er.emit(mr,...xr)}),this.modules.external.forEach(mr=>{mr.init&&mr.init(this)})}if(this.format=this.options.interpolation.format,nr||(nr=noop$2),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const ur=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);ur.length>0&&ur[0]!=="dev"&&(this.options.lng=ur[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(ur=>{this[ur]=function(){return er.store[ur](...arguments)}}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(ur=>{this[ur]=function(){return er.store[ur](...arguments),er}});const cr=defer(),lr=()=>{const ur=(dr,yr)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),cr.resolve(yr),nr(dr,yr)};if(this.languages&&this.options.compatibilityAPI!=="v1"&&!this.isInitialized)return ur(null,this.t.bind(this));this.changeLanguage(this.options.lng,ur)};return this.options.resources||!this.options.initImmediate?lr():setTimeout(lr,0),cr}loadResources(er){let nr=arguments.length>1&&arguments[1]!==void 0?arguments[1]:noop$2;const ir=typeof er=="string"?er:this.language;if(typeof er=="function"&&(nr=er),!this.options.resources||this.options.partialBundledLanguages){if(ir&&ir.toLowerCase()==="cimode"&&(!this.options.preload||this.options.preload.length===0))return nr();const sr=[],or=ar=>{if(!ar||ar==="cimode")return;this.services.languageUtils.toResolveHierarchy(ar).forEach(lr=>{lr!=="cimode"&&sr.indexOf(lr)<0&&sr.push(lr)})};ir?or(ir):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(cr=>or(cr)),this.options.preload&&this.options.preload.forEach(ar=>or(ar)),this.services.backendConnector.load(sr,this.options.ns,ar=>{!ar&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),nr(ar)})}else nr(null)}reloadResources(er,rr,nr){const ir=defer();return er||(er=this.languages),rr||(rr=this.options.ns),nr||(nr=noop$2),this.services.backendConnector.reload(er,rr,sr=>{ir.resolve(),nr(sr)}),ir}use(er){if(!er)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!er.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return er.type==="backend"&&(this.modules.backend=er),(er.type==="logger"||er.log&&er.warn&&er.error)&&(this.modules.logger=er),er.type==="languageDetector"&&(this.modules.languageDetector=er),er.type==="i18nFormat"&&(this.modules.i18nFormat=er),er.type==="postProcessor"&&postProcessor.addPostProcessor(er),er.type==="formatter"&&(this.modules.formatter=er),er.type==="3rdParty"&&this.modules.external.push(er),this}setResolvedLanguage(er){if(!(!er||!this.languages)&&!(["cimode","dev"].indexOf(er)>-1))for(let rr=0;rr<this.languages.length;rr++){const nr=this.languages[rr];if(!(["cimode","dev"].indexOf(nr)>-1)&&this.store.hasLanguageSomeTranslations(nr)){this.resolvedLanguage=nr;break}}}changeLanguage(er,rr){var nr=this;this.isLanguageChangingTo=er;const ir=defer();this.emit("languageChanging",er);const sr=cr=>{this.language=cr,this.languages=this.services.languageUtils.toResolveHierarchy(cr),this.resolvedLanguage=void 0,this.setResolvedLanguage(cr)},or=(cr,lr)=>{lr?(sr(lr),this.translator.changeLanguage(lr),this.isLanguageChangingTo=void 0,this.emit("languageChanged",lr),this.logger.log("languageChanged",lr)):this.isLanguageChangingTo=void 0,ir.resolve(function(){return nr.t(...arguments)}),rr&&rr(cr,function(){return nr.t(...arguments)})},ar=cr=>{!er&&!cr&&this.services.languageDetector&&(cr=[]);const lr=typeof cr=="string"?cr:this.services.languageUtils.getBestMatchFromCodes(cr);lr&&(this.language||sr(lr),this.translator.language||this.translator.changeLanguage(lr),this.services.languageDetector&&this.services.languageDetector.cacheUserLanguage&&this.services.languageDetector.cacheUserLanguage(lr)),this.loadResources(lr,ur=>{or(ur,lr)})};return!er&&this.services.languageDetector&&!this.services.languageDetector.async?ar(this.services.languageDetector.detect()):!er&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(ar):this.services.languageDetector.detect(ar):ar(er),ir}getFixedT(er,rr,nr){var ir=this;const sr=function(or,ar){let cr;if(typeof ar!="object"){for(var lr=arguments.length,ur=new Array(lr>2?lr-2:0),dr=2;dr<lr;dr++)ur[dr-2]=arguments[dr];cr=ir.options.overloadTranslationOptionHandler([or,ar].concat(ur))}else cr={...ar};cr.lng=cr.lng||sr.lng,cr.lngs=cr.lngs||sr.lngs,cr.ns=cr.ns||sr.ns,cr.keyPrefix!==""&&(cr.keyPrefix=cr.keyPrefix||nr||sr.keyPrefix);const yr=ir.options.keySeparator||".";let mr;return cr.keyPrefix&&Array.isArray(or)?mr=or.map(wr=>`${cr.keyPrefix}${yr}${wr}`):mr=cr.keyPrefix?`${cr.keyPrefix}${yr}${or}`:or,ir.t(mr,cr)};return typeof er=="string"?sr.lng=er:sr.lngs=er,sr.ns=rr,sr.keyPrefix=nr,sr}t(){return this.translator&&this.translator.translate(...arguments)}exists(){return this.translator&&this.translator.exists(...arguments)}setDefaultNamespace(er){this.options.defaultNS=er}hasLoadedNamespace(er){let rr=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const nr=rr.lng||this.resolvedLanguage||this.languages[0],ir=this.options?this.options.fallbackLng:!1,sr=this.languages[this.languages.length-1];if(nr.toLowerCase()==="cimode")return!0;const or=(ar,cr)=>{const lr=this.services.backendConnector.state[`${ar}|${cr}`];return lr===-1||lr===2};if(rr.precheck){const ar=rr.precheck(this,or);if(ar!==void 0)return ar}return!!(this.hasResourceBundle(nr,er)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||or(nr,er)&&(!ir||or(sr,er)))}loadNamespaces(er,rr){const nr=defer();return this.options.ns?(typeof er=="string"&&(er=[er]),er.forEach(ir=>{this.options.ns.indexOf(ir)<0&&this.options.ns.push(ir)}),this.loadResources(ir=>{nr.resolve(),rr&&rr(ir)}),nr):(rr&&rr(),Promise.resolve())}loadLanguages(er,rr){const nr=defer();typeof er=="string"&&(er=[er]);const ir=this.options.preload||[],sr=er.filter(or=>ir.indexOf(or)<0&&this.services.languageUtils.isSupportedCode(or));return sr.length?(this.options.preload=ir.concat(sr),this.loadResources(or=>{nr.resolve(),rr&&rr(or)}),nr):(rr&&rr(),Promise.resolve())}dir(er){if(er||(er=this.resolvedLanguage||(this.languages&&this.languages.length>0?this.languages[0]:this.language)),!er)return"rtl";const rr=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],nr=this.services&&this.services.languageUtils||new LanguageUtil(get());return rr.indexOf(nr.getLanguagePartFromCode(er))>-1||er.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(){let er=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},rr=arguments.length>1?arguments[1]:void 0;return new I18n(er,rr)}cloneInstance(){let er=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},rr=arguments.length>1&&arguments[1]!==void 0?arguments[1]:noop$2;const nr=er.forkResourceStore;nr&&delete er.forkResourceStore;const ir={...this.options,...er,isClone:!0},sr=new I18n(ir);return(er.debug!==void 0||er.prefix!==void 0)&&(sr.logger=sr.logger.clone(er)),["store","services","language"].forEach(ar=>{sr[ar]=this[ar]}),sr.services={...this.services},sr.services.utils={hasLoadedNamespace:sr.hasLoadedNamespace.bind(sr)},nr&&(sr.store=new ResourceStore(this.store.data,ir),sr.services.resourceStore=sr.store),sr.translator=new Translator(sr.services,ir),sr.translator.on("*",function(ar){for(var cr=arguments.length,lr=new Array(cr>1?cr-1:0),ur=1;ur<cr;ur++)lr[ur-1]=arguments[ur];sr.emit(ar,...lr)}),sr.init(ir,rr),sr.translator.options=ir,sr.translator.backendConnector.services.utils={hasLoadedNamespace:sr.hasLoadedNamespace.bind(sr)},sr}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const instance=I18n.createInstance();instance.createInstance=I18n.createInstance;instance.createInstance;instance.dir;instance.init;instance.loadResources;instance.reloadResources;instance.use;instance.changeLanguage;instance.getFixedT;instance.t;instance.exists;instance.setDefaultNamespace;instance.hasLoadedNamespace;instance.loadNamespaces;instance.loadLanguages;var toggleSelection=function(){var tr=document.getSelection();if(!tr.rangeCount)return function(){};for(var er=document.activeElement,rr=[],nr=0;nr<tr.rangeCount;nr++)rr.push(tr.getRangeAt(nr));switch(er.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":er.blur();break;default:er=null;break}return tr.removeAllRanges(),function(){tr.type==="Caret"&&tr.removeAllRanges(),tr.rangeCount||rr.forEach(function(ir){tr.addRange(ir)}),er&&er.focus()}},deselectCurrent=toggleSelection,clipboardToIE11Formatting={"text/plain":"Text","text/html":"Url",default:"Text"},defaultMessage="Copy to clipboard: #{key}, Enter";function format(tr){var er=(/mac os x/i.test(navigator.userAgent)?"":"Ctrl")+"+C";return tr.replace(/#{\s*key\s*}/g,er)}function copy(tr,er){var rr,nr,ir,sr,or,ar,cr=!1;er||(er={}),rr=er.debug||!1;try{ir=deselectCurrent(),sr=document.createRange(),or=document.getSelection(),ar=document.createElement("span"),ar.textContent=tr,ar.ariaHidden="true",ar.style.all="unset",ar.style.position="fixed",ar.style.top=0,ar.style.clip="rect(0, 0, 0, 0)",ar.style.whiteSpace="pre",ar.style.webkitUserSelect="text",ar.style.MozUserSelect="text",ar.style.msUserSelect="text",ar.style.userSelect="text",ar.addEventListener("copy",function(ur){if(ur.stopPropagation(),er.format)if(ur.preventDefault(),typeof ur.clipboardData>"u"){rr&&console.warn("unable to use e.clipboardData"),rr&&console.warn("trying IE specific stuff"),window.clipboardData.clearData();var dr=clipboardToIE11Formatting[er.format]||clipboardToIE11Formatting.default;window.clipboardData.setData(dr,tr)}else ur.clipboardData.clearData(),ur.clipboardData.setData(er.format,tr);er.onCopy&&(ur.preventDefault(),er.onCopy(ur.clipboardData))}),document.body.appendChild(ar),sr.selectNodeContents(ar),or.addRange(sr);var lr=document.execCommand("copy");if(!lr)throw new Error("copy command was unsuccessful");cr=!0}catch(ur){rr&&console.error("unable to copy using execCommand: ",ur),rr&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(er.format||"text",tr),er.onCopy&&er.onCopy(window.clipboardData),cr=!0}catch(dr){rr&&console.error("unable to copy using clipboardData: ",dr),rr&&console.error("falling back to prompt"),nr=format("message"in er?er.message:defaultMessage),window.prompt(nr,tr)}}finally{or&&(typeof or.removeRange=="function"?or.removeRange(sr):or.removeAllRanges()),ar&&document.body.removeChild(ar),ir()}return cr}var copyToClipboard=copy;const copyToClipboard$1=getDefaultExportFromCjs(copyToClipboard);var dist$1={},lodash_isequal={exports:{}};lodash_isequal.exports;(function(tr,er){var rr=200,nr="__lodash_hash_undefined__",ir=1,sr=2,or=9007199254740991,ar="[object Arguments]",cr="[object Array]",lr="[object AsyncFunction]",ur="[object Boolean]",dr="[object Date]",yr="[object Error]",mr="[object Function]",wr="[object GeneratorFunction]",xr="[object Map]",Or="[object Number]",Tr="[object Null]",Ar="[object Object]",Nr="[object Promise]",Ur="[object Proxy]",Dr="[object RegExp]",Hr="[object Set]",zr="[object String]",Cr="[object Symbol]",Mr="[object Undefined]",Pr="[object WeakMap]",Sr="[object ArrayBuffer]",pr="[object DataView]",gr="[object Float32Array]",fr="[object Float64Array]",hr="[object Int8Array]",br="[object Int16Array]",_r="[object Int32Array]",$r="[object Uint8Array]",Er="[object Uint8ClampedArray]",vr="[object Uint16Array]",Ir="[object Uint32Array]",Rr=/[\\^$.*+?()[\]{}|]/g,Br=/^\[object .+?Constructor\]$/,Jr=/^(?:0|[1-9]\d*)$/,Wr={};Wr[gr]=Wr[fr]=Wr[hr]=Wr[br]=Wr[_r]=Wr[$r]=Wr[Er]=Wr[vr]=Wr[Ir]=!0,Wr[ar]=Wr[cr]=Wr[Sr]=Wr[ur]=Wr[pr]=Wr[dr]=Wr[yr]=Wr[mr]=Wr[xr]=Wr[Or]=Wr[Ar]=Wr[Dr]=Wr[Hr]=Wr[zr]=Wr[Pr]=!1;var qr=typeof globalThis=="object"&&globalThis&&globalThis.Object===Object&&globalThis,an=typeof self=="object"&&self&&self.Object===Object&&self,tn=qr||an||Function("return this")(),cn=er&&!er.nodeType&&er,dn=cn&&!0&&tr&&!tr.nodeType&&tr,Zr=dn&&dn.exports===cn,Yr=Zr&&qr.process,Qr=function(){try{return Yr&&Yr.binding&&Yr.binding("util")}catch{}}(),un=Qr&&Qr.isTypedArray;function gn(Vr,jr){for(var rn=-1,yn=Vr==null?0:Vr.length,qn=0,Xn=[];++rn<yn;){var po=Vr[rn];jr(po,rn,Vr)&&(Xn[qn++]=po)}return Xn}function Rn(Vr,jr){for(var rn=-1,yn=jr.length,qn=Vr.length;++rn<yn;)Vr[qn+rn]=jr[rn];return Vr}function Pn(Vr,jr){for(var rn=-1,yn=Vr==null?0:Vr.length;++rn<yn;)if(jr(Vr[rn],rn,Vr))return!0;return!1}function Cn(Vr,jr){for(var rn=-1,yn=Array(Vr);++rn<Vr;)yn[rn]=jr(rn);return yn}function Sn(Vr){return function(jr){return Vr(jr)}}function zn(Vr,jr){return Vr.has(jr)}function Zn(Vr,jr){return Vr==null?void 0:Vr[jr]}function Kn(Vr){var jr=-1,rn=Array(Vr.size);return Vr.forEach(function(yn,qn){rn[++jr]=[qn,yn]}),rn}function eo(Vr,jr){return function(rn){return Vr(jr(rn))}}function vn(Vr){var jr=-1,rn=Array(Vr.size);return Vr.forEach(function(yn){rn[++jr]=yn}),rn}var xn=Array.prototype,Dn=Function.prototype,Xr=Object.prototype,Lr=tn["__core-js_shared__"],Fr=Dn.toString,ln=Xr.hasOwnProperty,mn=function(){var Vr=/[^.]+$/.exec(Lr&&Lr.keys&&Lr.keys.IE_PROTO||"");return Vr?"Symbol(src)_1."+Vr:""}(),_n=Xr.toString,An=RegExp("^"+Fr.call(ln).replace(Rr,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Gn=Zr?tn.Buffer:void 0,Xs=tn.Symbol,Jn=tn.Uint8Array,no=Xr.propertyIsEnumerable,zs=xn.splice,to=Xs?Xs.toStringTag:void 0,No=Object.getOwnPropertySymbols,Ro=Gn?Gn.isBuffer:void 0,uo=eo(Object.keys,Object),To=Mo(tn,"DataView"),Eo=Mo(tn,"Map"),so=Mo(tn,"Promise"),Po=Mo(tn,"Set"),hn=Mo(tn,"WeakMap"),pn=Mo(Object,"create"),kn=Yo(To),Mn=Yo(Eo),Ln=Yo(so),vo=Yo(Po),Gr=Yo(hn),nn=Xs?Xs.prototype:void 0,sn=nn?nn.valueOf:void 0;function kr(Vr){var jr=-1,rn=Vr==null?0:Vr.length;for(this.clear();++jr<rn;){var yn=Vr[jr];this.set(yn[0],yn[1])}}function fn(){this.__data__=pn?pn(null):{},this.size=0}function En(Vr){var jr=this.has(Vr)&&delete this.__data__[Vr];return this.size-=jr?1:0,jr}function $n(Vr){var jr=this.__data__;if(pn){var rn=jr[Vr];return rn===nr?void 0:rn}return ln.call(jr,Vr)?jr[Vr]:void 0}function Tn(Vr){var jr=this.__data__;return pn?jr[Vr]!==void 0:ln.call(jr,Vr)}function Bn(Vr,jr){var rn=this.__data__;return this.size+=this.has(Vr)?0:1,rn[Vr]=pn&&jr===void 0?nr:jr,this}kr.prototype.clear=fn,kr.prototype.delete=En,kr.prototype.get=$n,kr.prototype.has=Tn,kr.prototype.set=Bn;function jn(Vr){var jr=-1,rn=Vr==null?0:Vr.length;for(this.clear();++jr<rn;){var yn=Vr[jr];this.set(yn[0],yn[1])}}function Hn(){this.__data__=[],this.size=0}function go(Vr){var jr=this.__data__,rn=Wn(jr,Vr);if(rn<0)return!1;var yn=jr.length-1;return rn==yn?jr.pop():zs.call(jr,rn,1),--this.size,!0}function Yn(Vr){var jr=this.__data__,rn=Wn(jr,Vr);return rn<0?void 0:jr[rn][1]}function oo(Vr){return Wn(this.__data__,Vr)>-1}function co(Vr,jr){var rn=this.__data__,yn=Wn(rn,Vr);return yn<0?(++this.size,rn.push([Vr,jr])):rn[yn][1]=jr,this}jn.prototype.clear=Hn,jn.prototype.delete=go,jn.prototype.get=Yn,jn.prototype.has=oo,jn.prototype.set=co;function ro(Vr){var jr=-1,rn=Vr==null?0:Vr.length;for(this.clear();++jr<rn;){var yn=Vr[jr];this.set(yn[0],yn[1])}}function fo(){this.size=0,this.__data__={hash:new kr,map:new(Eo||jn),string:new kr}}function io(Vr){var jr=Io(this,Vr).delete(Vr);return this.size-=jr?1:0,jr}function ao(Vr){return Io(this,Vr).get(Vr)}function lo(Vr){return Io(this,Vr).has(Vr)}function Ws(Vr,jr){var rn=Io(this,Vr),yn=rn.size;return rn.set(Vr,jr),this.size+=rn.size==yn?0:1,this}ro.prototype.clear=fo,ro.prototype.delete=io,ro.prototype.get=ao,ro.prototype.has=lo,ro.prototype.set=Ws;function Qs(Vr){var jr=-1,rn=Vr==null?0:Vr.length;for(this.__data__=new ro;++jr<rn;)this.add(Vr[jr])}function _i(Vr){return this.__data__.set(Vr,nr),this}function Js(Vr){return this.__data__.has(Vr)}Qs.prototype.add=Qs.prototype.push=_i,Qs.prototype.has=Js;function Ls(Vr){var jr=this.__data__=new jn(Vr);this.size=jr.size}function Qn(){this.__data__=new jn,this.size=0}function In(Vr){var jr=this.__data__,rn=jr.delete(Vr);return this.size=jr.size,rn}function Nn(Vr){return this.__data__.get(Vr)}function Vn(Vr){return this.__data__.has(Vr)}function Un(Vr,jr){var rn=this.__data__;if(rn instanceof jn){var yn=rn.__data__;if(!Eo||yn.length<rr-1)return yn.push([Vr,jr]),this.size=++rn.size,this;rn=this.__data__=new ro(yn)}return rn.set(Vr,jr),this.size=rn.size,this}Ls.prototype.clear=Qn,Ls.prototype.delete=In,Ls.prototype.get=Nn,Ls.prototype.has=Vn,Ls.prototype.set=Un;function Fn(Vr,jr){var rn=Pl(Vr),yn=!rn&&pu(Vr),qn=!rn&&!yn&&Nl(Vr),Xn=!rn&&!yn&&!qn&&Ql(Vr),po=rn||yn||qn||Xn,yo=po?Cn(Vr.length,String):[],_o=yo.length;for(var bo in Vr)ln.call(Vr,bo)&&!(po&&(bo=="length"||qn&&(bo=="offset"||bo=="parent")||Xn&&(bo=="buffer"||bo=="byteLength"||bo=="byteOffset")||Wo(bo,_o)))&&yo.push(bo);return yo}function Wn(Vr,jr){for(var rn=Vr.length;rn--;)if(Vl(Vr[rn][0],jr))return rn;return-1}function ho(Vr,jr,rn){var yn=jr(Vr);return Pl(Vr)?yn:Rn(yn,rn(Vr))}function wo(Vr){return Vr==null?Vr===void 0?Mr:Tr:to&&to in Object(Vr)?Do(Vr):Hl(Vr)}function So(Vr){return ba(Vr)&&wo(Vr)==ar}function xo(Vr,jr,rn,yn,qn){return Vr===jr?!0:Vr==null||jr==null||!ba(Vr)&&!ba(jr)?Vr!==Vr&&jr!==jr:wn(Vr,jr,rn,yn,xo,qn)}function wn(Vr,jr,rn,yn,qn,Xn){var po=Pl(Vr),yo=Pl(jr),_o=po?cr:Uo(Vr),bo=yo?cr:Uo(jr);_o=_o==ar?Ar:_o,bo=bo==ar?Ar:bo;var Ho=_o==Ar,Vo=bo==Ar,Ko=_o==bo;if(Ko&&Nl(Vr)){if(!Nl(jr))return!1;po=!0,Ho=!1}if(Ko&&!Ho)return Xn||(Xn=new Ls),po||Ql(Vr)?$o(Vr,jr,rn,yn,qn,Xn):Co(Vr,jr,_o,rn,yn,qn,Xn);if(!(rn&ir)){var Jo=Ho&&ln.call(Vr,"__wrapped__"),zo=Vo&&ln.call(jr,"__wrapped__");if(Jo||zo){var _c=Jo?Vr.value():Vr,Cl=zo?jr.value():jr;return Xn||(Xn=new Ls),qn(_c,Cl,rn,yn,Xn)}}return Ko?(Xn||(Xn=new Ls),Oo(Vr,jr,rn,yn,qn,Xn)):!1}function Ao(Vr){if(!Xl(Vr)||Go(Vr))return!1;var jr=_l(Vr)?An:Br;return jr.test(Yo(Vr))}function ko(Vr){return ba(Vr)&&Zl(Vr.length)&&!!Wr[wo(Vr)]}function Lo(Vr){if(!Fl(Vr))return uo(Vr);var jr=[];for(var rn in Object(Vr))ln.call(Vr,rn)&&rn!="constructor"&&jr.push(rn);return jr}function $o(Vr,jr,rn,yn,qn,Xn){var po=rn&ir,yo=Vr.length,_o=jr.length;if(yo!=_o&&!(po&&_o>yo))return!1;var bo=Xn.get(Vr);if(bo&&Xn.get(jr))return bo==jr;var Ho=-1,Vo=!0,Ko=rn&sr?new Qs:void 0;for(Xn.set(Vr,jr),Xn.set(jr,Vr);++Ho<yo;){var Jo=Vr[Ho],zo=jr[Ho];if(yn)var _c=po?yn(zo,Jo,Ho,jr,Vr,Xn):yn(Jo,zo,Ho,Vr,jr,Xn);if(_c!==void 0){if(_c)continue;Vo=!1;break}if(Ko){if(!Pn(jr,function(Cl,tu){if(!zn(Ko,tu)&&(Jo===Cl||qn(Jo,Cl,rn,yn,Xn)))return Ko.push(tu)})){Vo=!1;break}}else if(!(Jo===zo||qn(Jo,zo,rn,yn,Xn))){Vo=!1;break}}return Xn.delete(Vr),Xn.delete(jr),Vo}function Co(Vr,jr,rn,yn,qn,Xn,po){switch(rn){case pr:if(Vr.byteLength!=jr.byteLength||Vr.byteOffset!=jr.byteOffset)return!1;Vr=Vr.buffer,jr=jr.buffer;case Sr:return!(Vr.byteLength!=jr.byteLength||!Xn(new Jn(Vr),new Jn(jr)));case ur:case dr:case Or:return Vl(+Vr,+jr);case yr:return Vr.name==jr.name&&Vr.message==jr.message;case Dr:case zr:return Vr==jr+"";case xr:var yo=Kn;case Hr:var _o=yn&ir;if(yo||(yo=vn),Vr.size!=jr.size&&!_o)return!1;var bo=po.get(Vr);if(bo)return bo==jr;yn|=sr,po.set(Vr,jr);var Ho=$o(yo(Vr),yo(jr),yn,qn,Xn,po);return po.delete(Vr),Ho;case Cr:if(sn)return sn.call(Vr)==sn.call(jr)}return!1}function Oo(Vr,jr,rn,yn,qn,Xn){var po=rn&ir,yo=Fo(Vr),_o=yo.length,bo=Fo(jr),Ho=bo.length;if(_o!=Ho&&!po)return!1;for(var Vo=_o;Vo--;){var Ko=yo[Vo];if(!(po?Ko in jr:ln.call(jr,Ko)))return!1}var Jo=Xn.get(Vr);if(Jo&&Xn.get(jr))return Jo==jr;var zo=!0;Xn.set(Vr,jr),Xn.set(jr,Vr);for(var _c=po;++Vo<_o;){Ko=yo[Vo];var Cl=Vr[Ko],tu=jr[Ko];if(yn)var g0=po?yn(tu,Cl,Ko,jr,Vr,Xn):yn(Cl,tu,Ko,Vr,jr,Xn);if(!(g0===void 0?Cl===tu||qn(Cl,tu,rn,yn,Xn):g0)){zo=!1;break}_c||(_c=Ko=="constructor")}if(zo&&!_c){var Yu=Vr.constructor,Zu=jr.constructor;Yu!=Zu&&"constructor"in Vr&&"constructor"in jr&&!(typeof Yu=="function"&&Yu instanceof Yu&&typeof Zu=="function"&&Zu instanceof Zu)&&(zo=!1)}return Xn.delete(Vr),Xn.delete(jr),zo}function Fo(Vr){return ho(Vr,eu,jo)}function Io(Vr,jr){var rn=Vr.__data__;return qo(jr)?rn[typeof jr=="string"?"string":"hash"]:rn.map}function Mo(Vr,jr){var rn=Zn(Vr,jr);return Ao(rn)?rn:void 0}function Do(Vr){var jr=ln.call(Vr,to),rn=Vr[to];try{Vr[to]=void 0;var yn=!0}catch{}var qn=_n.call(Vr);return yn&&(jr?Vr[to]=rn:delete Vr[to]),qn}var jo=No?function(Vr){return Vr==null?[]:(Vr=Object(Vr),gn(No(Vr),function(jr){return no.call(Vr,jr)}))}:Hu,Uo=wo;(To&&Uo(new To(new ArrayBuffer(1)))!=pr||Eo&&Uo(new Eo)!=xr||so&&Uo(so.resolve())!=Nr||Po&&Uo(new Po)!=Hr||hn&&Uo(new hn)!=Pr)&&(Uo=function(Vr){var jr=wo(Vr),rn=jr==Ar?Vr.constructor:void 0,yn=rn?Yo(rn):"";if(yn)switch(yn){case kn:return pr;case Mn:return xr;case Ln:return Nr;case vo:return Hr;case Gr:return Pr}return jr});function Wo(Vr,jr){return jr=jr??or,!!jr&&(typeof Vr=="number"||Jr.test(Vr))&&Vr>-1&&Vr%1==0&&Vr<jr}function qo(Vr){var jr=typeof Vr;return jr=="string"||jr=="number"||jr=="symbol"||jr=="boolean"?Vr!=="__proto__":Vr===null}function Go(Vr){return!!mn&&mn in Vr}function Fl(Vr){var jr=Vr&&Vr.constructor,rn=typeof jr=="function"&&jr.prototype||Xr;return Vr===rn}function Hl(Vr){return _n.call(Vr)}function Yo(Vr){if(Vr!=null){try{return Fr.call(Vr)}catch{}try{return Vr+""}catch{}}return""}function Vl(Vr,jr){return Vr===jr||Vr!==Vr&&jr!==jr}var pu=So(function(){return arguments}())?So:function(Vr){return ba(Vr)&&ln.call(Vr,"callee")&&!no.call(Vr,"callee")},Pl=Array.isArray;function Il(Vr){return Vr!=null&&Zl(Vr.length)&&!_l(Vr)}var Nl=Ro||gu;function $a(Vr,jr){return xo(Vr,jr)}function _l(Vr){if(!Xl(Vr))return!1;var jr=wo(Vr);return jr==mr||jr==wr||jr==lr||jr==Ur}function Zl(Vr){return typeof Vr=="number"&&Vr>-1&&Vr%1==0&&Vr<=or}function Xl(Vr){var jr=typeof Vr;return Vr!=null&&(jr=="object"||jr=="function")}function ba(Vr){return Vr!=null&&typeof Vr=="object"}var Ql=un?Sn(un):ko;function eu(Vr){return Il(Vr)?Fn(Vr):Lo(Vr)}function Hu(){return[]}function gu(){return!1}tr.exports=$a})(lodash_isequal,lodash_isequal.exports);var lodash_isequalExports=lodash_isequal.exports,qrcode={exports:{}};(function(tr,er){var rr=function(){var nr=function(Dr,Hr){var zr=236,Cr=17,Mr=Dr,Pr=sr[Hr],Sr=null,pr=0,gr=null,fr=[],hr={},br=function(tn,cn){pr=Mr*4+17,Sr=function(dn){for(var Zr=new Array(dn),Yr=0;Yr<dn;Yr+=1){Zr[Yr]=new Array(dn);for(var Qr=0;Qr<dn;Qr+=1)Zr[Yr][Qr]=null}return Zr}(pr),_r(0,0),_r(pr-7,0),_r(0,pr-7),vr(),Er(),Rr(tn,cn),Mr>=7&&Ir(tn),gr==null&&(gr=Wr(Mr,Pr,fr)),Br(gr,cn)},_r=function(tn,cn){for(var dn=-1;dn<=7;dn+=1)if(!(tn+dn<=-1||pr<=tn+dn))for(var Zr=-1;Zr<=7;Zr+=1)cn+Zr<=-1||pr<=cn+Zr||(0<=dn&&dn<=6&&(Zr==0||Zr==6)||0<=Zr&&Zr<=6&&(dn==0||dn==6)||2<=dn&&dn<=4&&2<=Zr&&Zr<=4?Sr[tn+dn][cn+Zr]=!0:Sr[tn+dn][cn+Zr]=!1)},$r=function(){for(var tn=0,cn=0,dn=0;dn<8;dn+=1){br(!0,dn);var Zr=ar.getLostPoint(hr);(dn==0||tn>Zr)&&(tn=Zr,cn=dn)}return cn},Er=function(){for(var tn=8;tn<pr-8;tn+=1)Sr[tn][6]==null&&(Sr[tn][6]=tn%2==0);for(var cn=8;cn<pr-8;cn+=1)Sr[6][cn]==null&&(Sr[6][cn]=cn%2==0)},vr=function(){for(var tn=ar.getPatternPosition(Mr),cn=0;cn<tn.length;cn+=1)for(var dn=0;dn<tn.length;dn+=1){var Zr=tn[cn],Yr=tn[dn];if(Sr[Zr][Yr]==null)for(var Qr=-2;Qr<=2;Qr+=1)for(var un=-2;un<=2;un+=1)Qr==-2||Qr==2||un==-2||un==2||Qr==0&&un==0?Sr[Zr+Qr][Yr+un]=!0:Sr[Zr+Qr][Yr+un]=!1}},Ir=function(tn){for(var cn=ar.getBCHTypeNumber(Mr),dn=0;dn<18;dn+=1){var Zr=!tn&&(cn>>dn&1)==1;Sr[Math.floor(dn/3)][dn%3+pr-8-3]=Zr}for(var dn=0;dn<18;dn+=1){var Zr=!tn&&(cn>>dn&1)==1;Sr[dn%3+pr-8-3][Math.floor(dn/3)]=Zr}},Rr=function(tn,cn){for(var dn=Pr<<3|cn,Zr=ar.getBCHTypeInfo(dn),Yr=0;Yr<15;Yr+=1){var Qr=!tn&&(Zr>>Yr&1)==1;Yr<6?Sr[Yr][8]=Qr:Yr<8?Sr[Yr+1][8]=Qr:Sr[pr-15+Yr][8]=Qr}for(var Yr=0;Yr<15;Yr+=1){var Qr=!tn&&(Zr>>Yr&1)==1;Yr<8?Sr[8][pr-Yr-1]=Qr:Yr<9?Sr[8][15-Yr-1+1]=Qr:Sr[8][15-Yr-1]=Qr}Sr[pr-8][8]=!tn},Br=function(tn,cn){for(var dn=-1,Zr=pr-1,Yr=7,Qr=0,un=ar.getMaskFunction(cn),gn=pr-1;gn>0;gn-=2)for(gn==6&&(gn-=1);;){for(var Rn=0;Rn<2;Rn+=1)if(Sr[Zr][gn-Rn]==null){var Pn=!1;Qr<tn.length&&(Pn=(tn[Qr]>>>Yr&1)==1);var Cn=un(Zr,gn-Rn);Cn&&(Pn=!Pn),Sr[Zr][gn-Rn]=Pn,Yr-=1,Yr==-1&&(Qr+=1,Yr=7)}if(Zr+=dn,Zr<0||pr<=Zr){Zr-=dn,dn=-dn;break}}},Jr=function(tn,cn){for(var dn=0,Zr=0,Yr=0,Qr=new Array(cn.length),un=new Array(cn.length),gn=0;gn<cn.length;gn+=1){var Rn=cn[gn].dataCount,Pn=cn[gn].totalCount-Rn;Zr=Math.max(Zr,Rn),Yr=Math.max(Yr,Pn),Qr[gn]=new Array(Rn);for(var Cn=0;Cn<Qr[gn].length;Cn+=1)Qr[gn][Cn]=255&tn.getBuffer()[Cn+dn];dn+=Rn;var Sn=ar.getErrorCorrectPolynomial(Pn),zn=lr(Qr[gn],Sn.getLength()-1),Zn=zn.mod(Sn);un[gn]=new Array(Sn.getLength()-1);for(var Cn=0;Cn<un[gn].length;Cn+=1){var Kn=Cn+Zn.getLength()-un[gn].length;un[gn][Cn]=Kn>=0?Zn.getAt(Kn):0}}for(var eo=0,Cn=0;Cn<cn.length;Cn+=1)eo+=cn[Cn].totalCount;for(var vn=new Array(eo),xn=0,Cn=0;Cn<Zr;Cn+=1)for(var gn=0;gn<cn.length;gn+=1)Cn<Qr[gn].length&&(vn[xn]=Qr[gn][Cn],xn+=1);for(var Cn=0;Cn<Yr;Cn+=1)for(var gn=0;gn<cn.length;gn+=1)Cn<un[gn].length&&(vn[xn]=un[gn][Cn],xn+=1);return vn},Wr=function(tn,cn,dn){for(var Zr=ur.getRSBlocks(tn,cn),Yr=dr(),Qr=0;Qr<dn.length;Qr+=1){var un=dn[Qr];Yr.put(un.getMode(),4),Yr.put(un.getLength(),ar.getLengthInBits(un.getMode(),tn)),un.write(Yr)}for(var gn=0,Qr=0;Qr<Zr.length;Qr+=1)gn+=Zr[Qr].dataCount;if(Yr.getLengthInBits()>gn*8)throw"code length overflow. ("+Yr.getLengthInBits()+">"+gn*8+")";for(Yr.getLengthInBits()+4<=gn*8&&Yr.put(0,4);Yr.getLengthInBits()%8!=0;)Yr.putBit(!1);for(;!(Yr.getLengthInBits()>=gn*8||(Yr.put(zr,8),Yr.getLengthInBits()>=gn*8));)Yr.put(Cr,8);return Jr(Yr,Zr)};hr.addData=function(tn,cn){cn=cn||"Byte";var dn=null;switch(cn){case"Numeric":dn=yr(tn);break;case"Alphanumeric":dn=mr(tn);break;case"Byte":dn=wr(tn);break;case"Kanji":dn=xr(tn);break;default:throw"mode:"+cn}fr.push(dn),gr=null},hr.isDark=function(tn,cn){if(tn<0||pr<=tn||cn<0||pr<=cn)throw tn+","+cn;return Sr[tn][cn]},hr.getModuleCount=function(){return pr},hr.make=function(){if(Mr<1){for(var tn=1;tn<40;tn++){for(var cn=ur.getRSBlocks(tn,Pr),dn=dr(),Zr=0;Zr<fr.length;Zr++){var Yr=fr[Zr];dn.put(Yr.getMode(),4),dn.put(Yr.getLength(),ar.getLengthInBits(Yr.getMode(),tn)),Yr.write(dn)}for(var Qr=0,Zr=0;Zr<cn.length;Zr++)Qr+=cn[Zr].dataCount;if(dn.getLengthInBits()<=Qr*8)break}Mr=tn}br(!1,$r())},hr.createTableTag=function(tn,cn){tn=tn||2,cn=typeof cn>"u"?tn*4:cn;var dn="";dn+='<table style="',dn+=" border-width: 0px; border-style: none;",dn+=" border-collapse: collapse;",dn+=" padding: 0px; margin: "+cn+"px;",dn+='">',dn+="<tbody>";for(var Zr=0;Zr<hr.getModuleCount();Zr+=1){dn+="<tr>";for(var Yr=0;Yr<hr.getModuleCount();Yr+=1)dn+='<td style="',dn+=" border-width: 0px; border-style: none;",dn+=" border-collapse: collapse;",dn+=" padding: 0px; margin: 0px;",dn+=" width: "+tn+"px;",dn+=" height: "+tn+"px;",dn+=" background-color: ",dn+=hr.isDark(Zr,Yr)?"#000000":"#ffffff",dn+=";",dn+='"/>';dn+="</tr>"}return dn+="</tbody>",dn+="</table>",dn},hr.createSvgTag=function(tn,cn,dn,Zr){var Yr={};typeof arguments[0]=="object"&&(Yr=arguments[0],tn=Yr.cellSize,cn=Yr.margin,dn=Yr.alt,Zr=Yr.title),tn=tn||2,cn=typeof cn>"u"?tn*4:cn,dn=typeof dn=="string"?{text:dn}:dn||{},dn.text=dn.text||null,dn.id=dn.text?dn.id||"qrcode-description":null,Zr=typeof Zr=="string"?{text:Zr}:Zr||{},Zr.text=Zr.text||null,Zr.id=Zr.text?Zr.id||"qrcode-title":null;var Qr=hr.getModuleCount()*tn+cn*2,un,gn,Rn,Pn,Cn="",Sn;for(Sn="l"+tn+",0 0,"+tn+" -"+tn+",0 0,-"+tn+"z ",Cn+='<svg version="1.1" xmlns="http://www.w3.org/2000/svg"',Cn+=Yr.scalable?"":' width="'+Qr+'px" height="'+Qr+'px"',Cn+=' viewBox="0 0 '+Qr+" "+Qr+'" ',Cn+=' preserveAspectRatio="xMinYMin meet"',Cn+=Zr.text||dn.text?' role="img" aria-labelledby="'+qr([Zr.id,dn.id].join(" ").trim())+'"':"",Cn+=">",Cn+=Zr.text?'<title id="'+qr(Zr.id)+'">'+qr(Zr.text)+"</title>":"",Cn+=dn.text?'<description id="'+qr(dn.id)+'">'+qr(dn.text)+"</description>":"",Cn+='<rect width="100%" height="100%" fill="white" cx="0" cy="0"/>',Cn+='<path d="',Rn=0;Rn<hr.getModuleCount();Rn+=1)for(Pn=Rn*tn+cn,un=0;un<hr.getModuleCount();un+=1)hr.isDark(Rn,un)&&(gn=un*tn+cn,Cn+="M"+gn+","+Pn+Sn);return Cn+='" stroke="transparent" fill="black"/>',Cn+="</svg>",Cn},hr.createDataURL=function(tn,cn){tn=tn||2,cn=typeof cn>"u"?tn*4:cn;var dn=hr.getModuleCount()*tn+cn*2,Zr=cn,Yr=dn-cn;return Ur(dn,dn,function(Qr,un){if(Zr<=Qr&&Qr<Yr&&Zr<=un&&un<Yr){var gn=Math.floor((Qr-Zr)/tn),Rn=Math.floor((un-Zr)/tn);return hr.isDark(Rn,gn)?0:1}else return 1})},hr.createImgTag=function(tn,cn,dn){tn=tn||2,cn=typeof cn>"u"?tn*4:cn;var Zr=hr.getModuleCount()*tn+cn*2,Yr="";return Yr+="<img",Yr+=' src="',Yr+=hr.createDataURL(tn,cn),Yr+='"',Yr+=' width="',Yr+=Zr,Yr+='"',Yr+=' height="',Yr+=Zr,Yr+='"',dn&&(Yr+=' alt="',Yr+=qr(dn),Yr+='"'),Yr+="/>",Yr};var qr=function(tn){for(var cn="",dn=0;dn<tn.length;dn+=1){var Zr=tn.charAt(dn);switch(Zr){case"<":cn+="&lt;";break;case">":cn+="&gt;";break;case"&":cn+="&amp;";break;case'"':cn+="&quot;";break;default:cn+=Zr;break}}return cn},an=function(tn){var cn=1;tn=typeof tn>"u"?cn*2:tn;var dn=hr.getModuleCount()*cn+tn*2,Zr=tn,Yr=dn-tn,Qr,un,gn,Rn,Pn,Cn={"":""," ":""," ":"","  ":" "},Sn={"":""," ":""," ":" ","  ":" "},zn="";for(Qr=0;Qr<dn;Qr+=2){for(gn=Math.floor((Qr-Zr)/cn),Rn=Math.floor((Qr+1-Zr)/cn),un=0;un<dn;un+=1)Pn="",Zr<=un&&un<Yr&&Zr<=Qr&&Qr<Yr&&hr.isDark(gn,Math.floor((un-Zr)/cn))&&(Pn=" "),Zr<=un&&un<Yr&&Zr<=Qr+1&&Qr+1<Yr&&hr.isDark(Rn,Math.floor((un-Zr)/cn))?Pn+=" ":Pn+="",zn+=tn<1&&Qr+1>=Yr?Sn[Pn]:Cn[Pn];zn+=`
`}return dn%2&&tn>0?zn.substring(0,zn.length-dn-1)+Array(dn+1).join(""):zn.substring(0,zn.length-1)};return hr.createASCII=function(tn,cn){if(tn=tn||1,tn<2)return an(cn);tn-=1,cn=typeof cn>"u"?tn*2:cn;var dn=hr.getModuleCount()*tn+cn*2,Zr=cn,Yr=dn-cn,Qr,un,gn,Rn,Pn=Array(tn+1).join(""),Cn=Array(tn+1).join("  "),Sn="",zn="";for(Qr=0;Qr<dn;Qr+=1){for(gn=Math.floor((Qr-Zr)/tn),zn="",un=0;un<dn;un+=1)Rn=1,Zr<=un&&un<Yr&&Zr<=Qr&&Qr<Yr&&hr.isDark(gn,Math.floor((un-Zr)/tn))&&(Rn=0),zn+=Rn?Pn:Cn;for(gn=0;gn<tn;gn+=1)Sn+=zn+`
`}return Sn.substring(0,Sn.length-1)},hr.renderTo2dContext=function(tn,cn){cn=cn||2;for(var dn=hr.getModuleCount(),Zr=0;Zr<dn;Zr++)for(var Yr=0;Yr<dn;Yr++)tn.fillStyle=hr.isDark(Zr,Yr)?"black":"white",tn.fillRect(Zr*cn,Yr*cn,cn,cn)},hr};nr.stringToBytesFuncs={default:function(Dr){for(var Hr=[],zr=0;zr<Dr.length;zr+=1){var Cr=Dr.charCodeAt(zr);Hr.push(Cr&255)}return Hr}},nr.stringToBytes=nr.stringToBytesFuncs.default,nr.createStringToBytes=function(Dr,Hr){var zr=function(){for(var Mr=Ar(Dr),Pr=function(){var Er=Mr.read();if(Er==-1)throw"eof";return Er},Sr=0,pr={};;){var gr=Mr.read();if(gr==-1)break;var fr=Pr(),hr=Pr(),br=Pr(),_r=String.fromCharCode(gr<<8|fr),$r=hr<<8|br;pr[_r]=$r,Sr+=1}if(Sr!=Hr)throw Sr+" != "+Hr;return pr}(),Cr=63;return function(Mr){for(var Pr=[],Sr=0;Sr<Mr.length;Sr+=1){var pr=Mr.charCodeAt(Sr);if(pr<128)Pr.push(pr);else{var gr=zr[Mr.charAt(Sr)];typeof gr=="number"?(gr&255)==gr?Pr.push(gr):(Pr.push(gr>>>8),Pr.push(gr&255)):Pr.push(Cr)}}return Pr}};var ir={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8},sr={L:1,M:0,Q:3,H:2},or={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},ar=function(){var Dr=[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],Hr=1335,zr=7973,Cr=21522,Mr={},Pr=function(Sr){for(var pr=0;Sr!=0;)pr+=1,Sr>>>=1;return pr};return Mr.getBCHTypeInfo=function(Sr){for(var pr=Sr<<10;Pr(pr)-Pr(Hr)>=0;)pr^=Hr<<Pr(pr)-Pr(Hr);return(Sr<<10|pr)^Cr},Mr.getBCHTypeNumber=function(Sr){for(var pr=Sr<<12;Pr(pr)-Pr(zr)>=0;)pr^=zr<<Pr(pr)-Pr(zr);return Sr<<12|pr},Mr.getPatternPosition=function(Sr){return Dr[Sr-1]},Mr.getMaskFunction=function(Sr){switch(Sr){case or.PATTERN000:return function(pr,gr){return(pr+gr)%2==0};case or.PATTERN001:return function(pr,gr){return pr%2==0};case or.PATTERN010:return function(pr,gr){return gr%3==0};case or.PATTERN011:return function(pr,gr){return(pr+gr)%3==0};case or.PATTERN100:return function(pr,gr){return(Math.floor(pr/2)+Math.floor(gr/3))%2==0};case or.PATTERN101:return function(pr,gr){return pr*gr%2+pr*gr%3==0};case or.PATTERN110:return function(pr,gr){return(pr*gr%2+pr*gr%3)%2==0};case or.PATTERN111:return function(pr,gr){return(pr*gr%3+(pr+gr)%2)%2==0};default:throw"bad maskPattern:"+Sr}},Mr.getErrorCorrectPolynomial=function(Sr){for(var pr=lr([1],0),gr=0;gr<Sr;gr+=1)pr=pr.multiply(lr([1,cr.gexp(gr)],0));return pr},Mr.getLengthInBits=function(Sr,pr){if(1<=pr&&pr<10)switch(Sr){case ir.MODE_NUMBER:return 10;case ir.MODE_ALPHA_NUM:return 9;case ir.MODE_8BIT_BYTE:return 8;case ir.MODE_KANJI:return 8;default:throw"mode:"+Sr}else if(pr<27)switch(Sr){case ir.MODE_NUMBER:return 12;case ir.MODE_ALPHA_NUM:return 11;case ir.MODE_8BIT_BYTE:return 16;case ir.MODE_KANJI:return 10;default:throw"mode:"+Sr}else if(pr<41)switch(Sr){case ir.MODE_NUMBER:return 14;case ir.MODE_ALPHA_NUM:return 13;case ir.MODE_8BIT_BYTE:return 16;case ir.MODE_KANJI:return 12;default:throw"mode:"+Sr}else throw"type:"+pr},Mr.getLostPoint=function(Sr){for(var pr=Sr.getModuleCount(),gr=0,fr=0;fr<pr;fr+=1)for(var hr=0;hr<pr;hr+=1){for(var br=0,_r=Sr.isDark(fr,hr),$r=-1;$r<=1;$r+=1)if(!(fr+$r<0||pr<=fr+$r))for(var Er=-1;Er<=1;Er+=1)hr+Er<0||pr<=hr+Er||$r==0&&Er==0||_r==Sr.isDark(fr+$r,hr+Er)&&(br+=1);br>5&&(gr+=3+br-5)}for(var fr=0;fr<pr-1;fr+=1)for(var hr=0;hr<pr-1;hr+=1){var vr=0;Sr.isDark(fr,hr)&&(vr+=1),Sr.isDark(fr+1,hr)&&(vr+=1),Sr.isDark(fr,hr+1)&&(vr+=1),Sr.isDark(fr+1,hr+1)&&(vr+=1),(vr==0||vr==4)&&(gr+=3)}for(var fr=0;fr<pr;fr+=1)for(var hr=0;hr<pr-6;hr+=1)Sr.isDark(fr,hr)&&!Sr.isDark(fr,hr+1)&&Sr.isDark(fr,hr+2)&&Sr.isDark(fr,hr+3)&&Sr.isDark(fr,hr+4)&&!Sr.isDark(fr,hr+5)&&Sr.isDark(fr,hr+6)&&(gr+=40);for(var hr=0;hr<pr;hr+=1)for(var fr=0;fr<pr-6;fr+=1)Sr.isDark(fr,hr)&&!Sr.isDark(fr+1,hr)&&Sr.isDark(fr+2,hr)&&Sr.isDark(fr+3,hr)&&Sr.isDark(fr+4,hr)&&!Sr.isDark(fr+5,hr)&&Sr.isDark(fr+6,hr)&&(gr+=40);for(var Ir=0,hr=0;hr<pr;hr+=1)for(var fr=0;fr<pr;fr+=1)Sr.isDark(fr,hr)&&(Ir+=1);var Rr=Math.abs(100*Ir/pr/pr-50)/5;return gr+=Rr*10,gr},Mr}(),cr=function(){for(var Dr=new Array(256),Hr=new Array(256),zr=0;zr<8;zr+=1)Dr[zr]=1<<zr;for(var zr=8;zr<256;zr+=1)Dr[zr]=Dr[zr-4]^Dr[zr-5]^Dr[zr-6]^Dr[zr-8];for(var zr=0;zr<255;zr+=1)Hr[Dr[zr]]=zr;var Cr={};return Cr.glog=function(Mr){if(Mr<1)throw"glog("+Mr+")";return Hr[Mr]},Cr.gexp=function(Mr){for(;Mr<0;)Mr+=255;for(;Mr>=256;)Mr-=255;return Dr[Mr]},Cr}();function lr(Dr,Hr){if(typeof Dr.length>"u")throw Dr.length+"/"+Hr;var zr=function(){for(var Mr=0;Mr<Dr.length&&Dr[Mr]==0;)Mr+=1;for(var Pr=new Array(Dr.length-Mr+Hr),Sr=0;Sr<Dr.length-Mr;Sr+=1)Pr[Sr]=Dr[Sr+Mr];return Pr}(),Cr={};return Cr.getAt=function(Mr){return zr[Mr]},Cr.getLength=function(){return zr.length},Cr.multiply=function(Mr){for(var Pr=new Array(Cr.getLength()+Mr.getLength()-1),Sr=0;Sr<Cr.getLength();Sr+=1)for(var pr=0;pr<Mr.getLength();pr+=1)Pr[Sr+pr]^=cr.gexp(cr.glog(Cr.getAt(Sr))+cr.glog(Mr.getAt(pr)));return lr(Pr,0)},Cr.mod=function(Mr){if(Cr.getLength()-Mr.getLength()<0)return Cr;for(var Pr=cr.glog(Cr.getAt(0))-cr.glog(Mr.getAt(0)),Sr=new Array(Cr.getLength()),pr=0;pr<Cr.getLength();pr+=1)Sr[pr]=Cr.getAt(pr);for(var pr=0;pr<Mr.getLength();pr+=1)Sr[pr]^=cr.gexp(cr.glog(Mr.getAt(pr))+Pr);return lr(Sr,0).mod(Mr)},Cr}var ur=function(){var Dr=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12,7,37,13],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],Hr=function(Mr,Pr){var Sr={};return Sr.totalCount=Mr,Sr.dataCount=Pr,Sr},zr={},Cr=function(Mr,Pr){switch(Pr){case sr.L:return Dr[(Mr-1)*4+0];case sr.M:return Dr[(Mr-1)*4+1];case sr.Q:return Dr[(Mr-1)*4+2];case sr.H:return Dr[(Mr-1)*4+3];default:return}};return zr.getRSBlocks=function(Mr,Pr){var Sr=Cr(Mr,Pr);if(typeof Sr>"u")throw"bad rs block @ typeNumber:"+Mr+"/errorCorrectionLevel:"+Pr;for(var pr=Sr.length/3,gr=[],fr=0;fr<pr;fr+=1)for(var hr=Sr[fr*3+0],br=Sr[fr*3+1],_r=Sr[fr*3+2],$r=0;$r<hr;$r+=1)gr.push(Hr(br,_r));return gr},zr}(),dr=function(){var Dr=[],Hr=0,zr={};return zr.getBuffer=function(){return Dr},zr.getAt=function(Cr){var Mr=Math.floor(Cr/8);return(Dr[Mr]>>>7-Cr%8&1)==1},zr.put=function(Cr,Mr){for(var Pr=0;Pr<Mr;Pr+=1)zr.putBit((Cr>>>Mr-Pr-1&1)==1)},zr.getLengthInBits=function(){return Hr},zr.putBit=function(Cr){var Mr=Math.floor(Hr/8);Dr.length<=Mr&&Dr.push(0),Cr&&(Dr[Mr]|=128>>>Hr%8),Hr+=1},zr},yr=function(Dr){var Hr=ir.MODE_NUMBER,zr=Dr,Cr={};Cr.getMode=function(){return Hr},Cr.getLength=function(Sr){return zr.length},Cr.write=function(Sr){for(var pr=zr,gr=0;gr+2<pr.length;)Sr.put(Mr(pr.substring(gr,gr+3)),10),gr+=3;gr<pr.length&&(pr.length-gr==1?Sr.put(Mr(pr.substring(gr,gr+1)),4):pr.length-gr==2&&Sr.put(Mr(pr.substring(gr,gr+2)),7))};var Mr=function(Sr){for(var pr=0,gr=0;gr<Sr.length;gr+=1)pr=pr*10+Pr(Sr.charAt(gr));return pr},Pr=function(Sr){if("0"<=Sr&&Sr<="9")return Sr.charCodeAt(0)-48;throw"illegal char :"+Sr};return Cr},mr=function(Dr){var Hr=ir.MODE_ALPHA_NUM,zr=Dr,Cr={};Cr.getMode=function(){return Hr},Cr.getLength=function(Pr){return zr.length},Cr.write=function(Pr){for(var Sr=zr,pr=0;pr+1<Sr.length;)Pr.put(Mr(Sr.charAt(pr))*45+Mr(Sr.charAt(pr+1)),11),pr+=2;pr<Sr.length&&Pr.put(Mr(Sr.charAt(pr)),6)};var Mr=function(Pr){if("0"<=Pr&&Pr<="9")return Pr.charCodeAt(0)-48;if("A"<=Pr&&Pr<="Z")return Pr.charCodeAt(0)-65+10;switch(Pr){case" ":return 36;case"$":return 37;case"%":return 38;case"*":return 39;case"+":return 40;case"-":return 41;case".":return 42;case"/":return 43;case":":return 44;default:throw"illegal char :"+Pr}};return Cr},wr=function(Dr){var Hr=ir.MODE_8BIT_BYTE,zr=nr.stringToBytes(Dr),Cr={};return Cr.getMode=function(){return Hr},Cr.getLength=function(Mr){return zr.length},Cr.write=function(Mr){for(var Pr=0;Pr<zr.length;Pr+=1)Mr.put(zr[Pr],8)},Cr},xr=function(Dr){var Hr=ir.MODE_KANJI,zr=nr.stringToBytesFuncs.SJIS;if(!zr)throw"sjis not supported.";(function(Pr,Sr){var pr=zr(Pr);if(pr.length!=2||(pr[0]<<8|pr[1])!=Sr)throw"sjis not supported."})("",38726);var Cr=zr(Dr),Mr={};return Mr.getMode=function(){return Hr},Mr.getLength=function(Pr){return~~(Cr.length/2)},Mr.write=function(Pr){for(var Sr=Cr,pr=0;pr+1<Sr.length;){var gr=(255&Sr[pr])<<8|255&Sr[pr+1];if(33088<=gr&&gr<=40956)gr-=33088;else if(57408<=gr&&gr<=60351)gr-=49472;else throw"illegal char at "+(pr+1)+"/"+gr;gr=(gr>>>8&255)*192+(gr&255),Pr.put(gr,13),pr+=2}if(pr<Sr.length)throw"illegal char at "+(pr+1)},Mr},Or=function(){var Dr=[],Hr={};return Hr.writeByte=function(zr){Dr.push(zr&255)},Hr.writeShort=function(zr){Hr.writeByte(zr),Hr.writeByte(zr>>>8)},Hr.writeBytes=function(zr,Cr,Mr){Cr=Cr||0,Mr=Mr||zr.length;for(var Pr=0;Pr<Mr;Pr+=1)Hr.writeByte(zr[Pr+Cr])},Hr.writeString=function(zr){for(var Cr=0;Cr<zr.length;Cr+=1)Hr.writeByte(zr.charCodeAt(Cr))},Hr.toByteArray=function(){return Dr},Hr.toString=function(){var zr="";zr+="[";for(var Cr=0;Cr<Dr.length;Cr+=1)Cr>0&&(zr+=","),zr+=Dr[Cr];return zr+="]",zr},Hr},Tr=function(){var Dr=0,Hr=0,zr=0,Cr="",Mr={},Pr=function(pr){Cr+=String.fromCharCode(Sr(pr&63))},Sr=function(pr){if(!(pr<0)){if(pr<26)return 65+pr;if(pr<52)return 97+(pr-26);if(pr<62)return 48+(pr-52);if(pr==62)return 43;if(pr==63)return 47}throw"n:"+pr};return Mr.writeByte=function(pr){for(Dr=Dr<<8|pr&255,Hr+=8,zr+=1;Hr>=6;)Pr(Dr>>>Hr-6),Hr-=6},Mr.flush=function(){if(Hr>0&&(Pr(Dr<<6-Hr),Dr=0,Hr=0),zr%3!=0)for(var pr=3-zr%3,gr=0;gr<pr;gr+=1)Cr+="="},Mr.toString=function(){return Cr},Mr},Ar=function(Dr){var Hr=Dr,zr=0,Cr=0,Mr=0,Pr={};Pr.read=function(){for(;Mr<8;){if(zr>=Hr.length){if(Mr==0)return-1;throw"unexpected end of file./"+Mr}var pr=Hr.charAt(zr);if(zr+=1,pr=="=")return Mr=0,-1;if(pr.match(/^\s$/))continue;Cr=Cr<<6|Sr(pr.charCodeAt(0)),Mr+=6}var gr=Cr>>>Mr-8&255;return Mr-=8,gr};var Sr=function(pr){if(65<=pr&&pr<=90)return pr-65;if(97<=pr&&pr<=122)return pr-97+26;if(48<=pr&&pr<=57)return pr-48+52;if(pr==43)return 62;if(pr==47)return 63;throw"c:"+pr};return Pr},Nr=function(Dr,Hr){var zr=Dr,Cr=Hr,Mr=new Array(Dr*Hr),Pr={};Pr.setPixel=function(fr,hr,br){Mr[hr*zr+fr]=br},Pr.write=function(fr){fr.writeString("GIF87a"),fr.writeShort(zr),fr.writeShort(Cr),fr.writeByte(128),fr.writeByte(0),fr.writeByte(0),fr.writeByte(0),fr.writeByte(0),fr.writeByte(0),fr.writeByte(255),fr.writeByte(255),fr.writeByte(255),fr.writeString(","),fr.writeShort(0),fr.writeShort(0),fr.writeShort(zr),fr.writeShort(Cr),fr.writeByte(0);var hr=2,br=pr(hr);fr.writeByte(hr);for(var _r=0;br.length-_r>255;)fr.writeByte(255),fr.writeBytes(br,_r,255),_r+=255;fr.writeByte(br.length-_r),fr.writeBytes(br,_r,br.length-_r),fr.writeByte(0),fr.writeString(";")};var Sr=function(fr){var hr=fr,br=0,_r=0,$r={};return $r.write=function(Er,vr){if(Er>>>vr)throw"length over";for(;br+vr>=8;)hr.writeByte(255&(Er<<br|_r)),vr-=8-br,Er>>>=8-br,_r=0,br=0;_r=Er<<br|_r,br=br+vr},$r.flush=function(){br>0&&hr.writeByte(_r)},$r},pr=function(fr){for(var hr=1<<fr,br=(1<<fr)+1,_r=fr+1,$r=gr(),Er=0;Er<hr;Er+=1)$r.add(String.fromCharCode(Er));$r.add(String.fromCharCode(hr)),$r.add(String.fromCharCode(br));var vr=Or(),Ir=Sr(vr);Ir.write(hr,_r);var Rr=0,Br=String.fromCharCode(Mr[Rr]);for(Rr+=1;Rr<Mr.length;){var Jr=String.fromCharCode(Mr[Rr]);Rr+=1,$r.contains(Br+Jr)?Br=Br+Jr:(Ir.write($r.indexOf(Br),_r),$r.size()<4095&&($r.size()==1<<_r&&(_r+=1),$r.add(Br+Jr)),Br=Jr)}return Ir.write($r.indexOf(Br),_r),Ir.write(br,_r),Ir.flush(),vr.toByteArray()},gr=function(){var fr={},hr=0,br={};return br.add=function(_r){if(br.contains(_r))throw"dup key:"+_r;fr[_r]=hr,hr+=1},br.size=function(){return hr},br.indexOf=function(_r){return fr[_r]},br.contains=function(_r){return typeof fr[_r]<"u"},br};return Pr},Ur=function(Dr,Hr,zr){for(var Cr=Nr(Dr,Hr),Mr=0;Mr<Hr;Mr+=1)for(var Pr=0;Pr<Dr;Pr+=1)Cr.setPixel(Pr,Mr,zr(Pr,Mr));var Sr=Or();Cr.write(Sr);for(var pr=Tr(),gr=Sr.toByteArray(),fr=0;fr<gr.length;fr+=1)pr.writeByte(gr[fr]);return pr.flush(),"data:image/gif;base64,"+pr};return nr}();(function(){rr.stringToBytesFuncs["UTF-8"]=function(nr){function ir(sr){for(var or=[],ar=0;ar<sr.length;ar++){var cr=sr.charCodeAt(ar);cr<128?or.push(cr):cr<2048?or.push(192|cr>>6,128|cr&63):cr<55296||cr>=57344?or.push(224|cr>>12,128|cr>>6&63,128|cr&63):(ar++,cr=65536+((cr&1023)<<10|sr.charCodeAt(ar)&1023),or.push(240|cr>>18,128|cr>>12&63,128|cr>>6&63,128|cr&63))}return or}return ir(nr)}})(),function(nr){tr.exports=nr()}(function(){return rr})})(qrcode);var qrcodeExports=qrcode.exports,__extends$1=commonjsGlobal&&commonjsGlobal.__extends||function(){var tr=function(er,rr){return tr=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(nr,ir){nr.__proto__=ir}||function(nr,ir){for(var sr in ir)Object.prototype.hasOwnProperty.call(ir,sr)&&(nr[sr]=ir[sr])},tr(er,rr)};return function(er,rr){if(typeof rr!="function"&&rr!==null)throw new TypeError("Class extends value "+String(rr)+" is not a constructor or null");tr(er,rr);function nr(){this.constructor=er}er.prototype=rr===null?Object.create(rr):(nr.prototype=rr.prototype,new nr)}}(),__assign=commonjsGlobal&&commonjsGlobal.__assign||function(){return __assign=Object.assign||function(tr){for(var er,rr=1,nr=arguments.length;rr<nr;rr++){er=arguments[rr];for(var ir in er)Object.prototype.hasOwnProperty.call(er,ir)&&(tr[ir]=er[ir])}return tr},__assign.apply(this,arguments)};Object.defineProperty(dist$1,"__esModule",{value:!0});var QRCode_1=dist$1.QRCode=void 0,isEqual=lodash_isequalExports,qrGenerator=qrcodeExports,React=reactExports,QRCode=function(tr){__extends$1(er,tr);function er(rr){var nr=tr.call(this,rr)||this;return nr.canvasRef=React.createRef(),nr}return er.prototype.download=function(rr,nr){if(this.canvasRef.current){var ir=void 0;switch(rr){case"jpg":ir="image/jpeg";break;case"webp":ir="image/webp";break;case"png":default:ir="image/png";break}var sr=this.canvasRef.current.toDataURL(ir,1),or=document.createElement("a");or.download=nr??"react-qrcode-logo",or.href=sr,or.click()}},er.prototype.utf16to8=function(rr){var nr="",ir,sr,or=rr.length;for(ir=0;ir<or;ir++)sr=rr.charCodeAt(ir),sr>=1&&sr<=127?nr+=rr.charAt(ir):sr>2047?(nr+=String.fromCharCode(224|sr>>12&15),nr+=String.fromCharCode(128|sr>>6&63),nr+=String.fromCharCode(128|sr>>0&63)):(nr+=String.fromCharCode(192|sr>>6&31),nr+=String.fromCharCode(128|sr>>0&63));return nr},er.prototype.drawRoundedSquare=function(rr,nr,ir,sr,or,ar,cr,lr){lr.lineWidth=rr,lr.fillStyle=or,lr.strokeStyle=or,ir+=rr/2,nr+=rr/2,sr-=rr,Array.isArray(ar)||(ar=[ar,ar,ar,ar]),ar=ar.map(function(wr){return wr=Math.min(wr,sr/2),wr<0?0:wr});var ur=ar[0]||0,dr=ar[1]||0,yr=ar[2]||0,mr=ar[3]||0;lr.beginPath(),lr.moveTo(nr+ur,ir),lr.lineTo(nr+sr-dr,ir),dr&&lr.quadraticCurveTo(nr+sr,ir,nr+sr,ir+dr),lr.lineTo(nr+sr,ir+sr-yr),yr&&lr.quadraticCurveTo(nr+sr,ir+sr,nr+sr-yr,ir+sr),lr.lineTo(nr+mr,ir+sr),mr&&lr.quadraticCurveTo(nr,ir+sr,nr,ir+sr-mr),lr.lineTo(nr,ir+ur),ur&&lr.quadraticCurveTo(nr,ir,nr+ur,ir),lr.closePath(),lr.stroke(),cr&&lr.fill()},er.prototype.drawPositioningPattern=function(rr,nr,ir,sr,or,ar,cr){cr===void 0&&(cr=[0,0,0,0]);var lr=Math.ceil(nr),ur,dr;typeof cr!="number"&&!Array.isArray(cr)?(ur=cr.outer||0,dr=cr.inner||0):(ur=cr,dr=ur);var yr,mr;typeof ar!="string"?(yr=ar.outer,mr=ar.inner):(yr=ar,mr=ar);var wr=sr*nr+ir,xr=or*nr+ir,Or=nr*7;this.drawRoundedSquare(lr,xr,wr,Or,yr,ur,!1,rr),Or=nr*3,wr+=nr*2,xr+=nr*2,this.drawRoundedSquare(lr,xr,wr,Or,mr,dr,!0,rr)},er.prototype.isInPositioninZone=function(rr,nr,ir){return ir.some(function(sr){return nr>=sr.row&&nr<=sr.row+7&&rr>=sr.col&&rr<=sr.col+7})},er.prototype.transformPixelLengthIntoNumberOfCells=function(rr,nr){return rr/nr},er.prototype.isCoordinateInImage=function(rr,nr,ir,sr,or,ar,cr,lr){if(lr){var ur=2,dr=this.transformPixelLengthIntoNumberOfCells(or,cr),yr=this.transformPixelLengthIntoNumberOfCells(ar,cr),mr=this.transformPixelLengthIntoNumberOfCells(ir,cr)-1,wr=this.transformPixelLengthIntoNumberOfCells(sr,cr)-1;return nr>=dr-ur&&nr<=dr+mr+ur&&rr>=yr-ur&&rr<=yr+wr+ur}else return!1},er.prototype.shouldComponentUpdate=function(rr){return!isEqual(this.props,rr)},er.prototype.componentDidMount=function(){this.update()},er.prototype.componentDidUpdate=function(){this.update()},er.prototype.update=function(){var rr,nr=this.props,ir=nr.value,sr=nr.ecLevel,or=nr.enableCORS,ar=nr.bgColor,cr=nr.fgColor,lr=nr.logoImage,ur=nr.logoOpacity,dr=nr.logoOnLoad,yr=nr.removeQrCodeBehindLogo,mr=nr.qrStyle,wr=nr.eyeRadius,xr=nr.eyeColor,Or=nr.logoPaddingStyle,Tr=+this.props.size,Ar=+this.props.quietZone,Nr=this.props.logoWidth?+this.props.logoWidth:0,Ur=this.props.logoHeight?+this.props.logoHeight:0,Dr=this.props.logoPadding?+this.props.logoPadding:0,Hr=qrGenerator(0,sr);Hr.addData(this.utf16to8(ir)),Hr.make();var zr=(rr=this.canvasRef)===null||rr===void 0?void 0:rr.current,Cr=zr.getContext("2d"),Mr=Tr+2*Ar,Pr=Hr.getModuleCount(),Sr=Tr/Pr,pr=window.devicePixelRatio||1;zr.height=zr.width=Mr*pr,Cr.scale(pr,pr),Cr.fillStyle=ar,Cr.fillRect(0,0,Mr,Mr);var gr=Ar,fr=[{row:0,col:0},{row:0,col:Pr-7},{row:Pr-7,col:0}];if(Cr.strokeStyle=cr,mr==="dots"){Cr.fillStyle=cr;for(var hr=Sr/2,br=0;br<Pr;br++)for(var _r=0;_r<Pr;_r++)Hr.isDark(br,_r)&&!this.isInPositioninZone(br,_r,fr)&&(Cr.beginPath(),Cr.arc(Math.round(_r*Sr)+hr+gr,Math.round(br*Sr)+hr+gr,hr/100*75,0,2*Math.PI,!1),Cr.closePath(),Cr.fill())}else if(mr==="fluid"){for(var hr=Math.ceil(Sr/2),br=0;br<Pr;br++)for(var _r=0;_r<Pr;_r++)if(Hr.isDark(br,_r)&&!this.isInPositioninZone(br,_r,fr)){var $r=[!1,!1,!1,!1];br>0&&!Hr.isDark(br-1,_r)&&_r>0&&!Hr.isDark(br,_r-1)&&($r[0]=!0),br>0&&!Hr.isDark(br-1,_r)&&_r<Pr-1&&!Hr.isDark(br,_r+1)&&($r[1]=!0),br<Pr-1&&!Hr.isDark(br+1,_r)&&_r<Pr-1&&!Hr.isDark(br,_r+1)&&($r[2]=!0),br<Pr-1&&!Hr.isDark(br+1,_r)&&_r>0&&!Hr.isDark(br,_r-1)&&($r[3]=!0);var Er=Math.ceil((_r+1)*Sr)-Math.floor(_r*Sr),vr=Math.ceil((br+1)*Sr)-Math.floor(br*Sr);Cr.fillStyle=cr,Cr.beginPath(),Cr.arc(Math.round(_r*Sr)+hr+gr,Math.round(br*Sr)+hr+gr,hr,0,2*Math.PI,!1),Cr.closePath(),Cr.fill(),$r[0]||Cr.fillRect(Math.round(_r*Sr)+gr,Math.round(br*Sr)+gr,Er/2,vr/2),$r[1]||Cr.fillRect(Math.round(_r*Sr)+gr+Math.floor(Er/2),Math.round(br*Sr)+gr,Er/2,vr/2),$r[2]||Cr.fillRect(Math.round(_r*Sr)+gr+Math.floor(Er/2),Math.round(br*Sr)+gr+Math.floor(vr/2),Er/2,vr/2),$r[3]||Cr.fillRect(Math.round(_r*Sr)+gr,Math.round(br*Sr)+gr+Math.floor(vr/2),Er/2,vr/2)}}else for(var br=0;br<Pr;br++)for(var _r=0;_r<Pr;_r++)if(Hr.isDark(br,_r)&&!this.isInPositioninZone(br,_r,fr)){Cr.fillStyle=cr;var Er=Math.ceil((_r+1)*Sr)-Math.floor(_r*Sr),vr=Math.ceil((br+1)*Sr)-Math.floor(br*Sr);Cr.fillRect(Math.round(_r*Sr)+gr,Math.round(br*Sr)+gr,Er,vr)}for(var Ir=0;Ir<3;Ir++){var Rr=fr[Ir],br=Rr.row,_r=Rr.col,Br=wr,Jr=void 0;Array.isArray(Br)&&(Br=Br[Ir]),typeof Br=="number"&&(Br=[Br,Br,Br,Br]),xr?Array.isArray(xr)?Jr=xr[Ir]:Jr=xr:Jr=cr,this.drawPositioningPattern(Cr,Sr,gr,br,_r,Jr,Br)}if(lr){var Wr=new Image;or&&(Wr.crossOrigin="Anonymous"),Wr.onload=function(qr){Cr.save();var an=Nr||Tr*.2,tn=Ur||an,cn=(Tr-an)/2,dn=(Tr-tn)/2;if(yr||Dr){Cr.beginPath(),Cr.strokeStyle=ar,Cr.fillStyle=ar;var Zr=an+2*Dr,Yr=tn+2*Dr,Qr=cn+gr-Dr,un=dn+gr-Dr;if(Or==="circle"){var gn=Qr+Zr/2,Rn=un+Yr/2;Cr.ellipse(gn,Rn,Zr/2,Yr/2,0,0,2*Math.PI),Cr.stroke(),Cr.fill()}else Cr.fillRect(Qr,un,Zr,Yr)}Cr.globalAlpha=ur,Cr.drawImage(Wr,cn+gr,dn+gr,an,tn),Cr.restore(),dr&&dr(qr)},Wr.src=lr}},er.prototype.render=function(){var rr,nr=+this.props.size+2*+this.props.quietZone;return React.createElement("canvas",{id:(rr=this.props.id)!==null&&rr!==void 0?rr:"react-qrcode-logo",height:nr,width:nr,style:__assign({height:nr+"px",width:nr+"px"},this.props.style),ref:this.canvasRef})},er.defaultProps={value:"https://reactjs.org/",ecLevel:"M",enableCORS:!1,size:150,quietZone:10,bgColor:"#FFFFFF",fgColor:"#000000",logoOpacity:1,qrStyle:"squares",eyeRadius:[0,0,0],logoPaddingStyle:"square"},er}(React.Component);QRCode_1=dist$1.QRCode=QRCode;var classnames={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(tr){(function(){var er={}.hasOwnProperty;function rr(){for(var sr="",or=0;or<arguments.length;or++){var ar=arguments[or];ar&&(sr=ir(sr,nr(ar)))}return sr}function nr(sr){if(typeof sr=="string"||typeof sr=="number")return sr;if(typeof sr!="object")return"";if(Array.isArray(sr))return rr.apply(null,sr);if(sr.toString!==Object.prototype.toString&&!sr.toString.toString().includes("[native code]"))return sr.toString();var or="";for(var ar in sr)er.call(sr,ar)&&sr[ar]&&(or=ir(or,ar));return or}function ir(sr,or){return or?sr?sr+" "+or:sr+or:sr}tr.exports?(rr.default=rr,tr.exports=rr):window.classNames=rr})()})(classnames);var classnamesExports=classnames.exports;const classNames=getDefaultExportFromCjs(classnamesExports);function capitalizeFirstLetter(tr){return tr.charAt(0).toUpperCase()+tr.slice(1)}const OPENLOGIN_PROVIDERS=Object.values(LOGIN_PROVIDER).filter(tr=>tr!==LOGIN_PROVIDER.WEBAUTHN&&tr!==LOGIN_PROVIDER.JWT),OPENLOGIN_PROVIDERS_NAMES=OPENLOGIN_PROVIDERS.reduce((tr,er)=>(er==="email_passwordless"?tr[er]="Email":er==="sms_passwordless"?tr[er]="Mobile":tr[er]=capitalizeFirstLetter(er),tr),{}),LOGIN_MODAL_EVENTS={INIT_EXTERNAL_WALLETS:"INIT_EXTERNAL_WALLETS",LOGIN:"LOGIN",DISCONNECT:"DISCONNECT",MODAL_VISIBILITY:"MODAL_VISIBILITY"},MODAL_STATUS={INITIALIZED:"initialized",CONNECTED:"connected",CONNECTING:"connecting",ERRORED:"errored"},DEFAULT_LOGO_LIGHT="https://images.web3auth.io/web3auth-logo-w.svg",DEFAULT_LOGO_DARK="https://images.web3auth.io/web3auth-logo-w-light.svg",WALLET_CONNECT_LOGO="https://images.web3auth.io/login-wallet-connect.svg";function styleInject(tr,er){er===void 0&&(er={});var rr=er.insertAt;if(!(!tr||typeof document>"u")){var nr=document.head||document.getElementsByTagName("head")[0],ir=document.createElement("style");ir.type="text/css",rr==="top"&&nr.firstChild?nr.insertBefore(ir,nr.firstChild):nr.appendChild(ir),ir.styleSheet?ir.styleSheet.cssText=tr:ir.appendChild(document.createTextNode(tr))}}var css_248z$1=`@import url("https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap");
/*! tailwindcss v3.4.9 | MIT License | https://tailwindcss.com*/.w3a-parent-container *,.w3a-parent-container :after,.w3a-parent-container :before{border:0 solid;box-sizing:border-box}.w3a-parent-container :after,.w3a-parent-container :before{--tw-content:""}.w3a-parent-container :host,.w3a-parent-container html{-webkit-text-size-adjust:100%;font-feature-settings:normal;-webkit-tap-highlight-color:transparent;font-family:ui-sans-serif,system-ui,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;font-variation-settings:normal;line-height:1.5;-moz-tab-size:4;tab-size:4}.w3a-parent-container body{line-height:inherit;margin:0}.w3a-parent-container hr{border-top-width:1px;color:inherit;height:0}.w3a-parent-container abbr:where([title]){text-decoration:underline dotted}.w3a-parent-container h1,.w3a-parent-container h2,.w3a-parent-container h3,.w3a-parent-container h4,.w3a-parent-container h5,.w3a-parent-container h6{font-size:inherit;font-weight:inherit}.w3a-parent-container a{color:inherit;text-decoration:inherit}.w3a-parent-container b,.w3a-parent-container strong{font-weight:bolder}.w3a-parent-container code,.w3a-parent-container kbd,.w3a-parent-container pre,.w3a-parent-container samp{font-feature-settings:normal;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace;font-size:1em;font-variation-settings:normal}.w3a-parent-container small{font-size:80%}.w3a-parent-container sub,.w3a-parent-container sup{font-size:75%;line-height:0;position:relative;vertical-align:initial}.w3a-parent-container sub{bottom:-.25em}.w3a-parent-container sup{top:-.5em}.w3a-parent-container table{border-collapse:collapse;border-color:inherit;text-indent:0}.w3a-parent-container button,.w3a-parent-container input,.w3a-parent-container optgroup,.w3a-parent-container select,.w3a-parent-container textarea{font-feature-settings:inherit;color:inherit;font-family:inherit;font-size:100%;font-variation-settings:inherit;font-weight:inherit;letter-spacing:inherit;line-height:inherit;margin:0;padding:0}.w3a-parent-container button,.w3a-parent-container select{text-transform:none}.w3a-parent-container button,.w3a-parent-container input:where([type=button]),.w3a-parent-container input:where([type=reset]),.w3a-parent-container input:where([type=submit]){-webkit-appearance:button;background-color:initial;background-image:none}.w3a-parent-container :-moz-focusring{outline:auto}.w3a-parent-container :-moz-ui-invalid{box-shadow:none}.w3a-parent-container progress{vertical-align:initial}.w3a-parent-container ::-webkit-inner-spin-button,.w3a-parent-container ::-webkit-outer-spin-button{height:auto}.w3a-parent-container [type=search]{-webkit-appearance:textfield;outline-offset:-2px}.w3a-parent-container ::-webkit-search-decoration{-webkit-appearance:none}.w3a-parent-container ::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}.w3a-parent-container summary{display:list-item}.w3a-parent-container blockquote,.w3a-parent-container dd,.w3a-parent-container dl,.w3a-parent-container figure,.w3a-parent-container h1,.w3a-parent-container h2,.w3a-parent-container h3,.w3a-parent-container h4,.w3a-parent-container h5,.w3a-parent-container h6,.w3a-parent-container hr,.w3a-parent-container p,.w3a-parent-container pre{margin:0}.w3a-parent-container fieldset{margin:0;padding:0}.w3a-parent-container legend{padding:0}.w3a-parent-container menu,.w3a-parent-container ol,.w3a-parent-container ul{list-style:none;margin:0;padding:0}.w3a-parent-container dialog{padding:0}.w3a-parent-container textarea{resize:vertical}.w3a-parent-container input::placeholder,.w3a-parent-container textarea::placeholder{color:#9ca3af;opacity:1}.w3a-parent-container [role=button],.w3a-parent-container button{cursor:pointer}.w3a-parent-container :disabled{cursor:default}.w3a-parent-container audio,.w3a-parent-container canvas,.w3a-parent-container embed,.w3a-parent-container iframe,.w3a-parent-container img,.w3a-parent-container object,.w3a-parent-container svg,.w3a-parent-container video{display:block;vertical-align:middle}.w3a-parent-container img,.w3a-parent-container video{height:auto;max-width:100%}.w3a-parent-container [hidden]{display:none}.w3a-parent-container{--app-on-primary:#fff;--app-primary-50:#ebf5ff;--app-primary-100:#e1effe;--app-primary-200:#c3ddfd;--app-primary-300:#a4cafe;--app-primary-400:#76a9fa;--app-primary-500:#3f83f8;--app-primary-600:#0346ff;--app-primary-700:#1a56db;--app-primary-800:#1e429f;--app-primary-900:#233876;--app-gray-50:#f9fafb;--app-gray-100:#f3f4f6;--app-gray-200:#e5e7eb;--app-gray-300:#d1d5db;--app-gray-400:#9ca3af;--app-gray-500:#6b7280;--app-gray-600:#4b5563;--app-gray-700:#374151;--app-gray-800:#1f2a37;--app-gray-900:#111928;--app-blue-50:#ebf5ff;--app-blue-100:#e1effe;--app-blue-200:#c3ddfd;--app-blue-300:#a4cafe;--app-blue-400:#76a9fa;--app-blue-500:#3f83f8;--app-blue-600:#0346ff;--app-blue-700:#1a56db;--app-blue-800:#1e429f;--app-blue-900:#233876;--app-red-50:#fdf2f2;--app-red-100:#fde8e8;--app-red-200:#fbd5d5;--app-red-300:#f8b4b4;--app-red-400:#f98080;--app-red-500:#f05252;--app-red-600:#e02424;--app-red-700:#c81e1e;--app-red-800:#9b1c1c;--app-red-900:#771d1d;--app-green-50:#f3faf7;--app-green-100:#def7ec;--app-green-200:#bcf0da;--app-green-300:#84e1bc;--app-green-400:#31c48d;--app-green-500:#0e9f6e;--app-green-600:#057a55;--app-green-700:#046c4e;--app-green-800:#03543f;--app-green-900:#014737;--app-yellow-50:#fdfdea;--app-yellow-100:#fdf6b2;--app-yellow-200:#fce96a;--app-yellow-300:#faca15;--app-yellow-400:#e3a008;--app-yellow-500:#c27803;--app-yellow-600:#9f580a;--app-yellow-700:#8e4b10;--app-yellow-800:#723b13;--app-yellow-900:#633112;--app-success:#30cca4;--app-warning:#fbc94a;--app-error:#fb4a61;--app-info:#d4d4d4;--app-white:#fff;--app-black:#000}.w3a-parent-container *,.w3a-parent-container :after,.w3a-parent-container :before{--tw-border-spacing-x:0;--tw-border-spacing-y:0;--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness:proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:#3b82f680;--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }.w3a-parent-container ::backdrop{--tw-border-spacing-x:0;--tw-border-spacing-y:0;--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness:proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:#3b82f680;--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }.w3a-parent-container .container{width:100%}@media (min-width:380px){.w3a-parent-container .container{max-width:380px}}@media (min-width:440px){.w3a-parent-container .container{max-width:440px}}@media (min-width:570px){.w3a-parent-container .container{max-width:570px}}@media (min-width:640px){.w3a-parent-container .container{max-width:640px}}@media (min-width:768px){.w3a-parent-container .container{max-width:768px}}@media (min-width:840px){.w3a-parent-container .container{max-width:840px}}@media (min-width:1024px){.w3a-parent-container .container{max-width:1024px}}@media (min-width:1280px){.w3a-parent-container .container{max-width:1280px}}@media (min-width:1536px){.w3a-parent-container .container{max-width:1536px}}.w3a-parent-container .absolute{position:absolute}.w3a-parent-container .relative{position:relative}.w3a-parent-container .top-4{top:1rem}.w3a-parent-container .z-20{z-index:20}.w3a-parent-container .col-span-2{grid-column:span 2/span 2}.w3a-parent-container .col-span-3{grid-column:span 3/span 3}.w3a-parent-container .col-span-6{grid-column:span 6/span 6}.w3a-parent-container .-mb-2{margin-bottom:-.5rem}.w3a-parent-container .-ml-\\[100px\\]{margin-left:-100px}.w3a-parent-container .mb-1{margin-bottom:.25rem}.w3a-parent-container .mb-4{margin-bottom:1rem}.w3a-parent-container .mb-5{margin-bottom:1.25rem}.w3a-parent-container .ml-2{margin-left:.5rem}.w3a-parent-container .ml-\\[3px\\]{margin-left:3px}.w3a-parent-container .mt-4{margin-top:1rem}.w3a-parent-container .block{display:block}.w3a-parent-container .flex{display:flex}.w3a-parent-container .hidden{display:none}.w3a-parent-container .h-3{height:.75rem}.w3a-parent-container .h-4{height:1rem}.w3a-parent-container .w-3{width:.75rem}.w3a-parent-container .w-\\[270px\\]{width:270px}.w3a-parent-container .w-\\[300px\\]{width:300px}.w3a-parent-container .w-full{width:100%}.w3a-parent-container .-translate-x-16{--tw-translate-x:-4rem}.w3a-parent-container .-translate-x-16,.w3a-parent-container .rotate-45{transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.w3a-parent-container .rotate-45{--tw-rotate:45deg}.w3a-parent-container .cursor-pointer{cursor:pointer}.w3a-parent-container .flex-col{flex-direction:column}.w3a-parent-container .items-center{align-items:center}.w3a-parent-container .justify-center{justify-content:center}.w3a-parent-container .gap-2{gap:.5rem}.w3a-parent-container .rounded-full{border-radius:9999px}.w3a-parent-container .rounded-md{border-radius:.375rem}.w3a-parent-container .bg-app-gray-50{background-color:var(--app-gray-50)}.w3a-parent-container .p-2{padding:.5rem}.w3a-parent-container .p-4{padding:1rem}.w3a-parent-container .text-left{text-align:left}.w3a-parent-container .text-right{text-align:right}.w3a-parent-container .text-xs{font-size:.75rem;line-height:1rem}.w3a-parent-container .font-medium{font-weight:500}.w3a-parent-container .leading-none{line-height:1}.w3a-parent-container .text-app-gray-300{color:var(--app-gray-300)}.w3a-parent-container .text-app-gray-400{color:var(--app-gray-400)}.w3a-parent-container .text-app-gray-900{color:var(--app-gray-900)}.w3a-parent-container .text-app-white{color:var(--app-white)}.w3a-parent-container .shadow-lg{--tw-shadow:0 10px 15px -3px #0000001a,0 4px 6px -4px #0000001a;--tw-shadow-colored:0 10px 15px -3px var(--tw-shadow-color),0 4px 6px -4px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow,0 0 #0000),var(--tw-ring-shadow,0 0 #0000),var(--tw-shadow)}.w3a-parent-container .filter{filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.w3a-parent-container input[type=number]::-webkit-inner-spin-button,.w3a-parent-container input[type=number]::-webkit-outer-spin-button{appearance:none}.w3a-parent-container #w3a-modal{align-items:center;box-sizing:border-box;display:flex;font-family:Inter;inset:0;justify-content:center;padding:1rem;position:fixed}.w3a-parent-container #w3a-modal.w3a-modal--hidden{display:none}.w3a-parent-container #w3a-modal .w3a-modal__inner{--tw-shadow:0px 4px 16px #00000014;--tw-shadow-colored:0px 4px 16px var(--tw-shadow-color);background-color:var(--app-white);border-color:var(--app-gray-100);border-radius:32px;border-width:1px;box-shadow:var(--tw-ring-offset-shadow,0 0 #0000),var(--tw-ring-shadow,0 0 #0000),var(--tw-shadow);display:flex;flex-direction:column;max-height:95%;max-width:392px;min-height:630px;opacity:0;overflow-x:hidden;overflow-y:hidden;position:relative;width:100%}.w3a-parent-container #w3a-modal .w3a-modal__inner:is(.dark *){background-color:var(--app-gray-800);border-color:var(--app-gray-800)}.w3a-parent-container #w3a-modal .w3a-modal__inner{transform:scale(0);transform-origin:center center;transition:all .15s cubic-bezier(.92,0,1,.67)}.w3a-parent-container #w3a-modal .w3a-modal__inner.w3a-modal__inner--active{opacity:1;transform:scale(1);transform-origin:center center;transition:all .15s cubic-bezier(0,.73,.71,1)}.w3a-parent-container #w3a-modal .w3a-modal__header{padding:.5rem 2rem;position:relative}.w3a-parent-container #w3a-modal .w3a-modal__content{overflow-y:auto;padding:1rem 2rem}.w3a-parent-container #w3a-modal .w3a-modal__footer{align-items:center;justify-content:center;margin-top:auto;padding:1rem 2rem;text-align:center}.w3a-parent-container #w3a-modal .w3a-header{align-items:center;display:flex;padding-top:2rem}.w3a-parent-container #w3a-modal .w3a-header__logo{margin-bottom:1rem}.w3a-parent-container #w3a-modal .w3a-header__logo img{height:auto;width:2.5rem}.w3a-parent-container #w3a-modal .w3a-header__title{color:var(--app-gray-900);font-size:1.25rem;font-weight:700;line-height:1.75rem}.w3a-parent-container #w3a-modal .w3a-header__title:is(.dark *){color:var(--app-white)}.w3a-parent-container #w3a-modal div.w3a-header__subtitle{align-items:center;color:var(--app-gray-500);display:flex;font-size:.875rem;font-weight:400;line-height:1.25rem}.w3a-parent-container #w3a-modal div.w3a-header__subtitle:is(.dark *){color:var(--app-gray-400)}.w3a-parent-container #w3a-modal div.w3a-header__subtitle img{height:14px;margin-left:.25rem;width:14px}.w3a-parent-container #w3a-modal button.w3a-header__button{border-width:0;cursor:pointer;padding:0;position:absolute;right:1.75rem;top:1.25rem}.w3a-parent-container #w3a-modal button.w3a-header__button:active,.w3a-parent-container #w3a-modal button.w3a-header__button:focus{outline-color:var(--app-gray-50)}.w3a-parent-container #w3a-modal button.w3a-header__button:focus:is(.dark *){outline-color:var(--app-gray-400);outline-style:solid;outline-width:1px}.w3a-parent-container #w3a-modal button.w3a-header__button:active:is(.dark *){outline-color:var(--app-gray-400);outline-style:solid;outline-width:1px}.w3a-parent-container #w3a-modal div.w3a-social__policy{color:var(--app-gray-500);font-size:.75rem;font-weight:500;line-height:1rem;margin-top:1rem;text-align:left}.w3a-parent-container #w3a-modal div.w3a-social__policy:is(.dark *){color:var(--app-gray-400)}.w3a-parent-container #w3a-modal .w3a-group{margin-bottom:1rem}.w3a-parent-container #w3a-modal .w3a-group:last-child{margin-bottom:0}.w3a-parent-container #w3a-modal .w3ajs-passwordless div.w3a-group__title{align-items:center;display:flex}.w3a-parent-container #w3a-modal .w3ajs-passwordless div.w3a-group__title img{height:14px;margin-left:.25rem;width:14px}.w3a-parent-container #w3a-modal .w3a-group.w3a-group--email-hidden,.w3a-parent-container #w3a-modal .w3a-group.w3a-group--ext-wallet-hidden,.w3a-parent-container #w3a-modal .w3a-group.w3a-group--hidden,.w3a-parent-container #w3a-modal .w3a-group.w3a-group--social-hidden{display:none}.w3a-parent-container #w3a-modal div.w3a-group__title{color:var(--app-gray-900);font-size:.875rem;font-weight:500;line-height:1.25rem;margin-bottom:.5rem}.w3a-parent-container #w3a-modal div.w3a-group__title:is(.dark *){color:var(--app-white)}.w3a-parent-container #w3a-modal ul.w3a-adapter-list{column-gap:.5rem;display:grid;grid-template-columns:repeat(6,minmax(0,1fr));max-height:500px;overflow-y:hidden;padding:1px;row-gap:1rem;transition:max-height .35s;transition-timing-function:cubic-bezier(.92,0,.74,1)}.w3a-parent-container #w3a-modal ul.w3a-adapter-list.w3a-adapter-list--shrink{max-height:108px;transition:max-height .3s;transition-timing-function:cubic-bezier(0,.73,.71,1)}.w3a-parent-container #w3a-modal ul.w3a-adapter-list.w3a-adapter-list--hidden{display:none}.w3a-parent-container #w3a-modal li.w3a-adapter-item{list-style-type:none}.w3a-parent-container #w3a-modal li.w3a-adapter-item--full{grid-column:span 6/span 6}.w3a-parent-container #w3a-modal .w3a-adapter-item--hide{display:none}.w3a-parent-container #w3a-modal .w3a-external-toggle{display:block}.w3a-parent-container #w3a-modal .w3a-external-toggle.w3a-external-toggle--hidden{display:none}.w3a-parent-container #w3a-modal .w3a-external-container{display:block;margin-bottom:0}.w3a-parent-container #w3a-modal .w3a-external-container.w3a-external-container--hidden{display:none}.w3a-parent-container #w3a-modal .w3a-external-group{display:flex;flex-wrap:wrap;gap:.75rem;margin-bottom:1rem}.w3a-parent-container #w3a-modal .w3a-external-group__left{flex-grow:1}.w3a-parent-container #w3a-modal button.w3a-external-back{align-items:center;background-image:none;border-width:0;color:var(--app-gray-500);cursor:pointer;display:inline-flex;margin-bottom:.5rem;padding:0}.w3a-parent-container #w3a-modal button.w3a-external-back:active,.w3a-parent-container #w3a-modal button.w3a-external-back:focus{outline-color:var(--app-gray-50)}.w3a-parent-container #w3a-modal button.w3a-external-back:is(.dark *){color:var(--app-gray-400)}.w3a-parent-container #w3a-modal button.w3a-external-back:focus:is(.dark *){outline-color:var(--app-gray-400);outline-style:solid;outline-width:1px}.w3a-parent-container #w3a-modal button.w3a-external-back:active:is(.dark *){outline-color:var(--app-gray-400);outline-style:solid;outline-width:1px}.w3a-parent-container #w3a-modal .w3a-external-back .w3a-group__title{color:var(--app-gray-400);margin-bottom:0;margin-left:5px}.w3a-parent-container #w3a-modal .w3a-external-loader{display:flex;justify-content:center}.w3a-parent-container #w3a-modal .w3a-wallet-connect{display:block;margin-bottom:1rem;text-align:center}.w3a-parent-container #w3a-modal .w3a-wallet-connect.w3a-wallet-connect--hidden{display:none}.w3a-parent-container #w3a-modal .w3a-wallet-connect__container{background-color:var(--app-white);border-radius:10px;color:var(--app-gray-500);font-size:.625rem;margin-left:auto;margin-right:auto;min-width:250px;padding:1rem .75rem;width:fit-content}.w3a-parent-container #w3a-modal .w3a-wallet-connect__container:is(.dark *){color:var(--app-gray-400)}.w3a-parent-container #w3a-modal .w3a-wallet-connect__container-android,.w3a-parent-container #w3a-modal .w3a-wallet-connect__container-desktop{margin:auto}.w3a-parent-container #w3a-modal .w3a-wallet-connect__container-btn-group{display:flex;gap:18px}.w3a-parent-container #w3a-modal .w3a-wallet-connect__container-ios{box-sizing:border-box;column-gap:1.25rem;display:flex;flex-wrap:wrap;padding:0 0 1.75rem;row-gap:30px}.w3a-parent-container #w3a-modal .w3a-wallet-connect-qr{margin:1rem}.w3a-parent-container #w3a-modal .w3a-wallet-connect-qr>canvas,.w3a-parent-container #w3a-modal .w3a-wallet-connect-qr>svg{margin:auto}.w3a-parent-container #w3a-modal .w3a-wallet-connect__container-android a{text-decoration-line:none}.w3a-parent-container #w3a-modal .w3a-wallet-connect__logo>img{margin:0 auto 1rem;width:115px}.w3a-parent-container #w3a-modal .w3a-footer{align-items:center;color:var(--app-gray-400);display:flex;font-size:.75rem;justify-content:center;line-height:1rem}.w3a-parent-container #w3a-modal .w3a-footer__links a:active,.w3a-parent-container #w3a-modal .w3a-footer__links a:focus{outline-color:var(--app-gray-50)}.w3a-parent-container #w3a-modal .w3a-footer__links a:focus:is(.dark *){outline-color:var(--app-gray-400);outline-style:solid;outline-width:1px}.w3a-parent-container #w3a-modal .w3a-footer__links a:active:is(.dark *){outline-color:var(--app-gray-400);outline-style:solid;outline-width:1px}.w3a-parent-container #w3a-modal .w3a-footer__links span{margin:0 4px}.w3a-parent-container #w3a-modal.w3a-modal--light .w3a-footer__links a:focus-visible{outline:1px solid #0f1222}.w3a-parent-container #w3a-modal.w3a-modal--light .w3a-external-back:focus-visible{outline:1px solid #0f1222}.w3a-parent-container #w3a-modal .hover-icon{display:none;transition:display .15s;transition-timing-function:cubic-bezier(0,.54,.63,.99)}.w3a-parent-container #w3a-modal .w3a-text-field{background-color:var(--app-gray-50);border-color:var(--app-gray-300);border-radius:9999px;border-width:1px;color:var(--app-gray-900);font-size:.875rem;line-height:1.25rem;margin-top:.5rem;padding:.75rem 1.5rem}.w3a-parent-container #w3a-modal .w3a-text-field::placeholder{color:var(--app-gray-500)}.w3a-parent-container #w3a-modal .w3a-text-field{--tw-ring-offset-shadow:var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow:var(--tw-ring-inset) 0 0 0 calc(var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow,0 0 #0000);outline-width:0}.w3a-parent-container #w3a-modal .w3a-text-field:focus{--tw-ring-offset-shadow:var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow:var(--tw-ring-inset) 0 0 0 calc(1px + var(--tw-ring-offset-width)) var(--tw-ring-color);--tw-ring-color:var(--app-primary-600);border-color:#0000;box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow,0 0 #0000)}.w3a-parent-container #w3a-modal .w3a-text-field:disabled{cursor:not-allowed}.w3a-parent-container #w3a-modal .w3a-text-field:disabled::placeholder{color:var(--app-gray-400)}.w3a-parent-container #w3a-modal .w3a-text-field:is(.dark *){background-color:var(--app-gray-600);border-color:var(--app-gray-500);color:var(--app-white)}.w3a-parent-container #w3a-modal .w3a-text-field:is(.dark *)::placeholder{color:var(--app-gray-400)}.w3a-parent-container #w3a-modal .w3a-text-field:focus:is(.dark *){--tw-ring-color:var(--app-primary-500);border-color:#0000}.w3a-parent-container #w3a-modal .w3a-text-field:disabled:is(.dark *)::placeholder{color:var(--app-gray-500)}.w3a-parent-container #w3a-modal .w3a-text-field{line-height:1.25em}.w3a-parent-container #w3a-modal .w3a-text-field--country-code{display:flex;justify-content:space-between;padding-left:1rem;padding-right:1rem;width:100%}.w3a-parent-container #w3a-modal .w3a-text-field--number{appearance:none}.w3a-parent-container #w3a-modal .w3a-sms-field--error{color:var(--app-red-500);font-size:.875rem;line-height:1.25rem;margin-bottom:.5rem;margin-left:.375rem;margin-top:-.5rem}.w3a-parent-container #w3a-container #w3a-modal input.w3a-text-field:-webkit-autofill,.w3a-parent-container #w3a-container #w3a-modal input.w3a-text-field:-webkit-autofill:active,.w3a-parent-container #w3a-container #w3a-modal input.w3a-text-field:-webkit-autofill:focus,.w3a-parent-container #w3a-container #w3a-modal input.w3a-text-field:-webkit-autofill:hover{--tw-shadow:0 0 0 30px #f9fafb inset;--tw-shadow-colored:inset 0 0 0 30px var(--tw-shadow-color);-webkit-text-fill-color:#111928!important;box-shadow:var(--tw-ring-offset-shadow,0 0 #0000),var(--tw-ring-shadow,0 0 #0000),var(--tw-shadow)}.w3a-parent-container #w3a-container.dark #w3a-modal input.w3a-text-field:-webkit-autofill,.w3a-parent-container #w3a-container.dark #w3a-modal input.w3a-text-field:-webkit-autofill:active,.w3a-parent-container #w3a-container.dark #w3a-modal input.w3a-text-field:-webkit-autofill:focus,.w3a-parent-container #w3a-container.dark #w3a-modal input.w3a-text-field:-webkit-autofill:hover{--tw-shadow:0 0 0 30px #374151 inset;--tw-shadow-colored:inset 0 0 0 30px var(--tw-shadow-color);-webkit-text-fill-color:#fff!important;box-shadow:var(--tw-ring-offset-shadow,0 0 #0000),var(--tw-ring-shadow,0 0 #0000),var(--tw-shadow)}.w3a-parent-container #w3a-modal .w3a-button{background-color:var(--app-gray-100);border-radius:9999px;color:var(--app-gray-900);font-size:1rem;font-weight:500;line-height:1.5rem;padding:.75rem 1.5rem}.w3a-parent-container #w3a-modal .w3a-button:hover{background-color:var(--app-gray-300)}.w3a-parent-container #w3a-modal .w3a-button:focus{background-color:var(--app-gray-100);color:var(--app-gray-700);outline-color:var(--app-gray-50)}.w3a-parent-container #w3a-modal .w3a-button:active{outline-color:var(--app-gray-50)}.w3a-parent-container #w3a-modal .w3a-button:disabled{background-color:var(--app-gray-50);color:var(--app-gray-300)}.w3a-parent-container #w3a-modal .w3a-button:is(.dark *){background-color:var(--app-gray-900);color:var(--app-white)}.w3a-parent-container #w3a-modal .w3a-button:hover:is(.dark *){background-color:var(--app-gray-800)}.w3a-parent-container #w3a-modal .w3a-button:focus:is(.dark *){background-color:var(--app-gray-900);color:var(--app-white);outline-color:var(--app-gray-400);outline-style:solid;outline-width:1px}.w3a-parent-container #w3a-modal .w3a-button:active:is(.dark *){outline-color:var(--app-gray-400);outline-style:solid;outline-width:1px}.w3a-parent-container #w3a-modal .w3a-button:disabled:is(.dark *){--tw-bg-opacity:1;background-color:rgb(59 69 85/var(--tw-bg-opacity));color:var(--app-gray-500)}.w3a-parent-container #w3a-modal .w3a-button--primary{background-color:var(--app-primary-600);color:var(--app-white)}.w3a-parent-container #w3a-modal .w3a-button--primary:hover{background-color:var(--app-primary-800)}.w3a-parent-container #w3a-modal .w3a-button--primary:focus{background-color:var(--app-primary-600);color:var(--app-white);outline-color:var(--app-primary-300)}.w3a-parent-container #w3a-modal .w3a-button--primary:active{outline-color:var(--app-primary-300)}.w3a-parent-container #w3a-modal .w3a-button--primary:disabled{--tw-text-opacity:1;background-color:var(--app-primary-200);color:rgb(235 245 255/var(--tw-text-opacity))}.w3a-parent-container #w3a-modal .w3a-button--primary:is(.dark *){background-color:var(--app-primary-500)}.w3a-parent-container #w3a-modal .w3a-button--primary:hover:is(.dark *){background-color:var(--app-primary-800)}.w3a-parent-container #w3a-modal .w3a-button--primary:focus:is(.dark *){background-color:var(--app-primary-500)}.w3a-parent-container #w3a-modal .w3a-button--primary:disabled:is(.dark *){--tw-bg-opacity:1;background-color:rgb(45 72 116/var(--tw-bg-opacity));color:var(--app-gray-500)}.w3a-parent-container #w3a-modal .w3a-button--login{align-items:center;display:inline-flex;height:2.75rem;justify-content:center}.w3a-parent-container #w3a-modal button.w3a-button--login:hover>.hover-icon{display:block;transition:display .15s;transition-timing-function:cubic-bezier(0,.54,.63,.99)}.w3a-parent-container #w3a-modal button.w3a-button--login:hover>.image-icon{display:none;transition:display .15s;transition-timing-function:cubic-bezier(0,.54,.63,.99)}.w3a-parent-container #w3a-modal button.w3a-button-expand{color:var(--app-primary-600);font-size:.875rem;height:auto;line-height:1.25rem;margin-left:auto;margin-top:1rem;width:auto}.w3a-parent-container #w3a-modal button.w3a-button-expand:hover{color:var(--app-primary-800)}.w3a-parent-container #w3a-modal button.w3a-button-expand:focus-visible{outline-color:var(--app-gray-50);outline-style:solid;outline-width:1px}.w3a-parent-container #w3a-modal button.w3a-button-expand:is(.dark *){color:var(--app-primary-500)}.w3a-parent-container #w3a-modal button.w3a-button-expand:hover:is(.dark *){color:var(--app-primary-400)}.w3a-parent-container #w3a-modal button.w3a-button-expand:focus-visible:is(.dark *){outline-color:var(--app-gray-400);outline-style:solid;outline-width:1px}.w3a-parent-container #w3a-modal .w3a-sms-field__container{display:grid;gap:.5rem;grid-template-columns:repeat(12,minmax(0,1fr))}.w3a-parent-container #w3a-modal .w3a-sms-field__code-selected{display:flex}.w3a-parent-container #w3a-modal .w3a-sms-field__code-dropdown{height:185px;position:absolute;width:120px;z-index:10}.w3a-parent-container #w3a-modal .w3a-sms-field__code-dropdown>:not([hidden])~:not([hidden]){--tw-divide-y-reverse:0;border-bottom-width:calc(1px*var(--tw-divide-y-reverse));border-color:var(--app-gray-100);border-top-width:calc(1px*(1 - var(--tw-divide-y-reverse)))}.w3a-parent-container #w3a-modal .w3a-sms-field__code-dropdown{--tw-shadow:0px 4px 16px #00000014;--tw-shadow-colored:0px 4px 16px var(--tw-shadow-color);background-color:var(--app-white);border-radius:.5rem;box-shadow:var(--tw-ring-offset-shadow,0 0 #0000),var(--tw-ring-shadow,0 0 #0000),var(--tw-shadow);overflow-y:scroll}.w3a-parent-container #w3a-modal .w3a-sms-field__code-dropdown:is(.dark *){background-color:var(--app-gray-700)}.w3a-parent-container #w3a-modal .w3a-sms-field__code-dropdown{transform:translateY(-230px)}.w3a-parent-container #w3a-modal .w3a-sms-field__code-dropdown--hidden{display:none}.w3a-parent-container #w3a-modal .w3a-sms-field__code-dropdown ul{color:var(--app-gray-700);font-size:.875rem;line-height:1.25rem;padding-bottom:.5rem;padding-top:.5rem}.w3a-parent-container #w3a-modal .w3a-sms-field__code-dropdown ul:is(.dark *){color:var(--app-gray-200)}.w3a-parent-container #w3a-modal .w3a-sms-field__code-dropdown li{cursor:pointer;padding:0}.w3a-parent-container #w3a-modal .w3a-sms-field__code-dropdown li:hover{background-color:var(--app-gray-100)}.w3a-parent-container #w3a-modal .w3a-sms-field__code-dropdown li:hover:is(.dark *){background-color:var(--app-gray-900);color:var(--app-white)}.w3a-parent-container #w3a-modal .w3a-sms-field__code-dropdown li button{height:100%;padding:.5rem 1rem;text-align:left;width:100%}.w3a-parent-container #w3a-modal .w3a-sms-field__code-dropdown li button div{align-items:center;display:flex}.w3a-parent-container #w3a-modal .w3a-sms-field__code{grid-column:span 5/span 5}.w3a-parent-container #w3a-modal .w3a-sms-field__number{grid-column:span 7/span 7}.w3a-parent-container #w3a-modal .w3a-modal__loader{background-color:var(--app-white);display:flex;inset:0;justify-content:center;position:absolute;z-index:10}.w3a-parent-container #w3a-modal .w3a-modal__loader:is(.dark *){background-color:var(--app-gray-800)}.w3a-parent-container #w3a-modal .w3a-modal__loader.w3a-modal__loader--hidden{display:none}.w3a-parent-container #w3a-modal .w3a-modal__loader-content{display:flex;flex-direction:column;position:relative;text-align:center}.w3a-parent-container #w3a-modal .w3a-modal__loader-info{align-items:center;display:flex;flex-direction:column;flex-grow:1;justify-content:center;padding:0 30px}.w3a-parent-container #w3a-modal .w3a-spinner-label{color:var(--app-primary-600);font-size:1rem;font-weight:500;line-height:1.5rem;margin-top:10px}.w3a-parent-container #w3a-modal .w3a-spinner-label:is(.dark *){color:var(--app-primary-500)}.w3a-parent-container #w3a-modal .w3a-spinner-message{color:var(--app-gray-500);font-size:1rem;line-height:1.5rem;margin-top:10px}.w3a-parent-container #w3a-modal .w3a-spinner-message:first-letter{text-transform:capitalize}.w3a-parent-container #w3a-modal .w3a-spinner-message:is(.dark *){color:var(--app-white)}.w3a-parent-container #w3a-modal .w3a-spinner-message.w3a-spinner-message--error{color:var(--app-red-500)}.w3a-parent-container #w3a-modal .w3a-spinner-power{--tw-text-opacity:1;color:rgb(183 184 189/var(--tw-text-opacity));font-size:.75rem;line-height:1rem;margin-top:auto}.w3a-parent-container #w3a-modal .w3a-spinner-power>img{display:inline;height:2rem;width:auto}.w3a-parent-container #w3a-modal .w3a-spinner{display:inline-flex;height:60px;position:relative;width:60px}.w3a-parent-container #w3a-modal .w3a-spinner__spinner{position:absolute}@keyframes spin{to{transform:rotate(1turn)}}.w3a-parent-container #w3a-modal .w3a-spinner__spinner{animation:spin 1s linear infinite;background-image:conic-gradient(from 0deg at 50% 50%,var(--app-primary-600) 0,#e5e7ebcc 90deg,#e5e7ebcc 270deg,var(--app-primary-600) 1turn);background-position:0 0;background-size:100% 100%;border-radius:100vw;display:inline-block;height:100%;-webkit-mask:radial-gradient(farthest-side,#000 98%,#0000) center/85% 85% no-repeat,linear-gradient(#000 0 0);-webkit-mask-composite:destination-out;mask:radial-gradient(farthest-side,#000 98%,#0000) center/85% 85% no-repeat,linear-gradient(#000 0 0);mask-composite:exclude;width:100%}.w3a-parent-container .dark #w3a-modal .w3a-spinner__spinner{background-image:conic-gradient(from 0deg at 50% 50%,var(--app-primary-500) 0,#e5e7eb33 90deg,#e5e7eb33 270deg,var(--app-primary-500) 1turn)}.w3a-parent-container #w3a-modal .w3a-modal__loader-bridge{align-items:center;display:flex;justify-content:center;margin-bottom:14px}.w3a-parent-container #w3a-modal .w3a-modal__loader-bridge-message{color:var(--app-gray-500)}.w3a-parent-container #w3a-modal .w3a-modal__loader-bridge-message:first-letter{text-transform:capitalize}.w3a-parent-container #w3a-modal .w3a-modal__loader-bridge-message:is(.dark *){color:var(--app-white)}.w3a-parent-container #w3a-modal .w3a-modal__loader-app-logo{display:flex;padding:.5rem}.w3a-parent-container #w3a-modal .w3a-modal__loader-app-logo img{height:auto;max-height:72px;max-width:72px;width:72px}.w3a-parent-container #w3a-modal .w3a-modal__loader-social-logo{align-items:center;background-color:var(--app-gray-100);border-radius:9999px;display:flex;height:72px;justify-content:center;width:72px}.w3a-parent-container #w3a-modal .w3a-modal__loader-social-logo:is(.dark *){background-color:var(--app-gray-50)}.w3a-parent-container #w3a-modal .w3a-modal__loader-social-logo img{height:4rem;width:4rem}.w3a-parent-container #w3a-modal .w3a-modal__loader-adapter img{height:auto;width:84px}.w3a-parent-container #w3a-modal .w3a-modal__connector{align-items:center;display:flex}.w3a-parent-container .w3a-modal__connector-beat{display:inline-block;height:80px;position:relative;width:80px}.w3a-parent-container .w3a-modal__connector-beat div{animation-timing-function:cubic-bezier(0,1,1,0);background:grey;border-radius:50%;height:13px;position:absolute;top:33px;width:13px}.w3a-parent-container .w3a-modal__connector-beat div:first-child{animation:beat1 2.4s infinite;left:8px}.w3a-parent-container .w3a-modal__connector-beat div:nth-child(2){animation:beat2 2.4s infinite;left:8px}.w3a-parent-container .w3a-modal__connector-beat div:nth-child(3){animation:beat3 2.4s infinite;left:8px}.w3a-parent-container .w3a-modal__connector-beat div:nth-child(4){animation:beat4 2.4s infinite;left:32px}.w3a-parent-container .w3a-modal__connector-beat div:nth-child(5){animation:beat5 2.4s infinite;left:56px}@keyframes beat1{0%{transform:scale(0)}25%{transform:scale(0)}50%{transform:scale(1)}75%{transform:scale(0)}to{transform:scale(0)}}@keyframes beat2{0%{transform:scale(0)}25%{transform:scale(1)}50%{transform:translate(24px)}75%{transform:translate(0)}to{transform:translate(0) scale(0)}}@keyframes beat3{0%{transform:translate(0)}25%{transform:translate(24px)}50%{transform:translate(48px)}75%{transform:translate(24px)}to{transform:translate(0)}}@keyframes beat4{0%{transform:translate(0)}25%{transform:translate(24px)}50%{transform:translate(24px) scale(0)}75%{transform:translate(24px) scale(1)}to{transform:translate(0)}}@keyframes beat5{0%{transform:scale(1)}25%{transform:scale(0)}50%{transform:scale(0)}75%{transform:scale(0)}to{transform:scale(1)}}.w3a-parent-container .group:hover .group-hover\\:flex{display:flex}.w3a-parent-container .dark\\:block:is(.dark *){display:block}.w3a-parent-container .dark\\:hidden:is(.dark *){display:none}.w3a-parent-container .dark\\:bg-app-gray-600:is(.dark *){background-color:var(--app-gray-600)}.w3a-parent-container .dark\\:text-app-gray-500:is(.dark *){color:var(--app-gray-500)}.w3a-parent-container .dark\\:text-app-white:is(.dark *){color:var(--app-white)}`;styleInject(css_248z$1);var modal={"adapter-loader.message":"Verify your {{adapter}} account to continue","adapter-loader.message1":"Verify your {{adapter}}","adapter-loader.message2":"account to continue","errors-invalid-number-email":"Invalid Email or Phone Number","errors-required":"Required","external.back":"Back","external.connect":"Connect with Wallet","external.title":"External Wallet","external.walletconnect-connect":"Connect","external.walletconnect-copy":"Click on the QR Code to copy to clipboard","external.walletconnect-subtitle":"Scan the QR code with a WalletConnect-compatible wallet","footer.message":"Self-custodial login by","footer.message-new":"Self-custody via","footer.policy":"Privacy Policy","footer.terms":"Terms of Use","footer.terms-service":"Terms of Service","footer.version":"Version","header-subtitle":"Select one of the following options to continue","header-subtitle-name":"Your {{appName}} wallet with one click","header-subtitle-new":"Your blockchain wallet with one click","header-title":"Sign in","header-tooltip-desc":"The wallet serves as an account to store and manage your digital assets on the blockchain.","header-tooltip-title":"Wallet","network.add-request":"This site is requesting to add a network","network.cancel":"Cancel","network.from":"From","network.proceed":"Proceed","network.switch-request":"This site is requesting to switch networks","network.to":"To","popup.phone-body":"Your country code will be detected automatically, but if you're using a phone number from a different country, you'll need to enter the correct country code manually.","popup.phone-header":"Phone number and country code","social.continue":"Continue with","social.continueCustom":"Continue with {{adapter}}","social.email":"Email","social.email-continue":"Continue with Email","social.email-new":"name@example.com","social.passwordless-cta":"Continue","social.passwordless-title":"Email or Phone","social.phone":"Phone","social.policy":"We do not store any data related to your social logins.","social.sms":"Mobile","social.sms-continue":"Continue with Mobile","social.sms-invalid-number":"Invalid phone number","social.sms-placeholder-text":"E.g.:","social.view-less":"View less","social.view-more":"View more","post-loading.connected":"You are connected with your account","post-loading.something-wrong":"Something went wrong!"},en={modal};const i18nInstance=instance.createInstance();i18nInstance.use(initReactI18next).init({resources:{en:{translation:en}},lng:"en",fallbackLng:"en",interpolation:{escapeValue:!1},debug:!1,react:{useSuspense:!0}});function SelfCustodyViaWeb3Auth(){const[tr]=useTranslation(void 0,{i18n:i18nInstance});return jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 justify-center p-2",children:[jsxRuntimeExports.jsx("div",{className:"text-xs text-app-gray-300 dark:text-app-gray-500",children:tr("modal.footer.message-new")}),jsxRuntimeExports.jsx("img",{height:"16",src:"https://images.web3auth.io/web3auth-footer-logo-light.svg",alt:"Web3Auth Logo Light",className:"h-4 block dark:hidden"}),jsxRuntimeExports.jsx("img",{height:"16",src:"https://images.web3auth.io/web3auth-footer-logo-dark.svg",alt:"Web3Auth Logo Dark",className:"h-4 hidden dark:block"})]})}function Footer(){return jsxRuntimeExports.jsx("div",{className:"w3a-modal__footer",children:jsxRuntimeExports.jsx("div",{className:"w3a-footer",children:jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx(SelfCustodyViaWeb3Auth,{})})})})})}const icons={"arrow-left":{image:"https://images.web3auth.io/circle-arrow-left.svg"},close:{image:"https://images.web3auth.io/close.svg"},"expand-light":{image:"https://images.web3auth.io/expand-light.svg"},expand:{image:"https://images.web3auth.io/expand.svg"},connected:{image:"https://images.web3auth.io/connected.svg"},"information-circle-light":{image:"https://images.web3auth.io/information-circle-light.svg"},"information-circle":{image:"https://images.web3auth.io/information-circle.svg"}};function Icon(tr){const{iconName:er,iconTitle:rr="",height:nr="auto",width:ir="auto"}=tr;return icons[er]?jsxRuntimeExports.jsx("img",{className:rr?"cursor-pointer":"",height:nr,width:ir,src:icons[er].image,alt:er,title:rr}):null}function Image$1(tr){const{hoverImageId:er,imageId:rr,isButton:nr=!1,height:ir="auto",width:sr="auto"}=tr;return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("img",{src:`https://images.web3auth.io/${rr}.svg`,height:ir,width:sr,alt:rr,className:"image-icon"}),nr?jsxRuntimeExports.jsx("img",{src:`https://images.web3auth.io/${er}.svg`,height:ir,width:sr,alt:er,className:"hover-icon"}):null]})}const closeIcon$1=jsxRuntimeExports.jsx(Icon,{iconName:"close"});function DetailedLoader(tr){const{adapter:er,appLogo:rr,message:nr,modalStatus:ir,adapterName:sr,onClose:or}=tr,ar=er==="twitter"?jsxRuntimeExports.jsx(Image$1,{imageId:"login-x-dark"}):jsxRuntimeExports.jsx(Image$1,{imageId:`login-${er}`}),[cr]=useTranslation(void 0,{i18n:i18nInstance});return reactExports.useEffect(()=>{loglevel$1.debug("adapter loader re-rendering"),ir===MODAL_STATUS.CONNECTED&&setTimeout(()=>{or()},3e3)},[ir,or]),ir!==MODAL_STATUS.INITIALIZED?jsxRuntimeExports.jsxs("div",{className:"w3ajs-modal-loader w3a-modal__loader",children:[jsxRuntimeExports.jsxs("div",{className:"w3a-modal__loader-content",children:[jsxRuntimeExports.jsxs("div",{className:"w3a-modal__loader-info",children:[ir===MODAL_STATUS.CONNECTING&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"w3a-modal__loader-bridge",children:[jsxRuntimeExports.jsxs("div",{className:"w3a-modal__loader-app-logo",children:[jsxRuntimeExports.jsx("img",{src:rr,className:"block dark:hidden",alt:""}),jsxRuntimeExports.jsx("img",{src:rr,className:"hidden dark:block",alt:""})]}),jsxRuntimeExports.jsx("div",{className:"w3a-modal__connector",children:jsxRuntimeExports.jsxs("div",{className:"w3a-modal__connector-beat",children:[jsxRuntimeExports.jsx("div",{}),jsxRuntimeExports.jsx("div",{}),jsxRuntimeExports.jsx("div",{}),jsxRuntimeExports.jsx("div",{}),jsxRuntimeExports.jsx("div",{})]})}),jsxRuntimeExports.jsx("div",{className:"w3a-modal__loader-social-logo",children:ar})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"w3a-modal__loader-bridge-message",children:cr("modal.adapter-loader.message1",{adapter:sr})}),jsxRuntimeExports.jsx("div",{className:"w3a-modal__loader-bridge-message",children:cr("modal.adapter-loader.message2",{adapter:sr})})]})]}),ir===ADAPTER_STATUS.CONNECTED&&jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center",children:[jsxRuntimeExports.jsx(Icon,{iconName:"connected"}),jsxRuntimeExports.jsx("div",{className:"w3ajs-modal-loader__message w3a-spinner-message mt-4",children:nr})]}),ir===ADAPTER_STATUS.ERRORED&&jsxRuntimeExports.jsx("div",{className:"w3ajs-modal-loader__message w3a-spinner-message w3a-spinner-message--error",children:nr})]}),jsxRuntimeExports.jsx(Footer,{})]}),(ir===ADAPTER_STATUS.CONNECTED||ir===ADAPTER_STATUS.ERRORED)&&jsxRuntimeExports.jsx("button",{type:"button",className:"w3a-header__button w3ajs-loader-close-btn",onClick:or,children:closeIcon$1})]}):null}var css_248z=".w3a-parent-container #w3a-modal button.t-btn,.w3a-parent-container a.t-btn{align-items:center;display:flex;justify-content:center;transition-duration:.15s;transition-property:all;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-timing-function:linear}.w3a-parent-container #w3a-modal button.t-btn:not(.t-btn-text):disabled,.w3a-parent-container a.t-btn:not(.t-btn-text):disabled{background-color:var(--app-gray-300);border-width:0;color:var(--app-gray-400)}.w3a-parent-container #w3a-modal button.t-btn:not(.t-btn-text):hover:disabled,.w3a-parent-container a.t-btn:not(.t-btn-text):hover:disabled{background-color:var(--app-gray-300);border-color:var(--app-gray-300);color:var(--app-gray-400)}.w3a-parent-container #w3a-modal button.t-btn:not(.t-btn-text):active:disabled,.w3a-parent-container a.t-btn:not(.t-btn-text):active:disabled{--tw-ring-offset-shadow:var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow:var(--tw-ring-inset) 0 0 0 calc(var(--tw-ring-offset-width)) var(--tw-ring-color);--tw-ring-offset-width:0px;background-color:var(--app-gray-300);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow,0 0 #0000);outline-width:0}.w3a-parent-container #w3a-modal button.t-btn:not(.t-btn-text):disabled:is(.dark *),.w3a-parent-container a.t-btn:not(.t-btn-text):disabled:is(.dark *){background-color:var(--app-gray-700);color:var(--app-gray-600)}.w3a-parent-container #w3a-modal .size-xs{font-size:.75rem;height:32px;line-height:1rem;padding:.5rem .75rem}.w3a-parent-container #w3a-modal .size-sm{font-size:.875rem;height:36px;line-height:1.25rem;padding:.5rem .75rem}.w3a-parent-container #w3a-modal .size-md{font-size:.875rem;height:42px;line-height:1.25rem;padding:.625rem 1.25rem}.w3a-parent-container #w3a-modal .size-lg{font-size:1rem;height:48px;line-height:1.5rem;padding:.75rem 1.25rem}.w3a-parent-container #w3a-modal .size-xl{font-size:1rem;height:52px;line-height:1.5rem;padding:.875rem 1.5rem}.w3a-parent-container #w3a-modal .t-btn.t-btn-primary{background-color:var(--app-primary-600);color:var(--app-on-primary);outline:2px solid #0000;outline-offset:2px}.w3a-parent-container #w3a-modal .t-btn.t-btn-primary:hover{background-color:var(--app-primary-700)}.w3a-parent-container #w3a-modal .t-btn.t-btn-primary:focus-visible{outline-color:var(--app-primary-600);outline-offset:1px;outline-style:solid;outline-width:1px}.w3a-parent-container #w3a-modal .t-btn.t-btn-primary:active{background-color:var(--app-primary-600);outline-color:var(--app-primary-600);outline-offset:1px;outline-style:solid;outline-width:1px}.w3a-parent-container #w3a-modal .t-btn.t-btn-primary:is(.dark *){background-color:var(--app-primary-500)}.w3a-parent-container #w3a-modal .t-btn.t-btn-primary:hover:is(.dark *){background-color:var(--app-primary-400)}.w3a-parent-container #w3a-modal .t-btn.t-btn-primary:focus-visible:is(.dark *){outline-color:var(--app-primary-500)}.w3a-parent-container #w3a-modal .t-btn.t-btn-primary:active:is(.dark *){background-color:var(--app-primary-500);outline-color:var(--app-primary-500)}.w3a-parent-container #w3a-modal .t-btn.t-btn-secondary{background-color:initial;border-color:var(--app-gray-500);border-width:1px;color:var(--app-gray-600);outline:2px solid #0000;outline-offset:2px}.w3a-parent-container #w3a-modal .t-btn.t-btn-secondary:hover{background-color:var(--app-gray-200)}.w3a-parent-container #w3a-modal .t-btn.t-btn-secondary:focus-visible{--tw-ring-offset-shadow:var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow:var(--tw-ring-inset) 0 0 0 calc(1px + var(--tw-ring-offset-width)) var(--tw-ring-color);--tw-ring-color:var(--app-primary-600);background-color:initial;border-color:var(--app-primary-600);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow,0 0 #0000)}.w3a-parent-container #w3a-modal .t-btn.t-btn-secondary:active{--tw-ring-offset-shadow:var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow:var(--tw-ring-inset) 0 0 0 calc(1px + var(--tw-ring-offset-width)) var(--tw-ring-color);--tw-ring-color:var(--app-primary-600);background-color:initial;border-color:var(--app-primary-600);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow,0 0 #0000)}.w3a-parent-container #w3a-modal .t-btn.t-btn-secondary:is(.dark *){border-color:var(--app-gray-300);color:var(--app-white)}.w3a-parent-container #w3a-modal .t-btn.t-btn-secondary:hover:is(.dark *){background-color:var(--app-gray-700)}.w3a-parent-container #w3a-modal .t-btn.t-btn-secondary:focus-visible:is(.dark *){--tw-ring-color:var(--app-primary-500);background-color:initial;border-color:var(--app-primary-500)}.w3a-parent-container #w3a-modal .t-btn.t-btn-secondary:active:is(.dark *){--tw-ring-color:var(--app-primary-500);background-color:initial;border-color:var(--app-primary-500)}.w3a-parent-container #w3a-modal .t-btn.t-btn-tertiary{background-color:var(--app-gray-200);color:var(--app-gray-800)}.w3a-parent-container #w3a-modal .t-btn.t-btn-tertiary:hover{background-color:var(--app-gray-300)}.w3a-parent-container #w3a-modal .t-btn.t-btn-tertiary:focus-visible{--tw-ring-offset-shadow:var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow:var(--tw-ring-inset) 0 0 0 calc(2px + var(--tw-ring-offset-width)) var(--tw-ring-color);--tw-ring-color:var(--app-primary-600);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow,0 0 #0000)}.w3a-parent-container #w3a-modal .t-btn.t-btn-tertiary:active{--tw-ring-offset-shadow:var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow:var(--tw-ring-inset) 0 0 0 calc(2px + var(--tw-ring-offset-width)) var(--tw-ring-color);--tw-ring-color:var(--app-primary-600);background-color:var(--app-gray-200);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow,0 0 #0000)}.w3a-parent-container #w3a-modal .t-btn.t-btn-tertiary:is(.dark *){background-color:var(--app-gray-500);color:var(--app-white)}.w3a-parent-container #w3a-modal .t-btn.t-btn-tertiary:hover:is(.dark *){background-color:var(--app-gray-400)}.w3a-parent-container #w3a-modal .t-btn.t-btn-tertiary:focus-visible:is(.dark *){--tw-ring-color:var(--app-primary-500)}.w3a-parent-container #w3a-modal .t-btn.t-btn-tertiary:active:is(.dark *){--tw-ring-color:var(--app-primary-500);background-color:var(--app-gray-500)}.w3a-parent-container #w3a-modal .t-btn.t-btn-text{color:var(--app-primary-600)}.w3a-parent-container #w3a-modal .t-btn.t-btn-text:hover{color:var(--app-primary-800);text-decoration-line:underline}.w3a-parent-container #w3a-modal .t-btn.t-btn-text:focus-visible{--tw-ring-offset-shadow:var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow:var(--tw-ring-inset) 0 0 0 calc(2px + var(--tw-ring-offset-width)) var(--tw-ring-color);--tw-ring-color:var(--app-primary-600);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow,0 0 #0000)}.w3a-parent-container #w3a-modal .t-btn.t-btn-text:active{--tw-ring-offset-shadow:var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow:var(--tw-ring-inset) 0 0 0 calc(2px + var(--tw-ring-offset-width)) var(--tw-ring-color);--tw-ring-color:var(--app-primary-600);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow,0 0 #0000);color:var(--app-primary-600)}.w3a-parent-container #w3a-modal .t-btn.t-btn-text:disabled{color:var(--app-gray-400);text-decoration-line:none}.w3a-parent-container #w3a-modal .t-btn.t-btn-text:is(.dark *){color:var(--app-primary-500)}.w3a-parent-container #w3a-modal .t-btn.t-btn-text:hover:is(.dark *){color:var(--app-primary-400)}.w3a-parent-container #w3a-modal .t-btn.t-btn-text:disabled:is(.dark *){color:var(--app-gray-600)}.w3a-parent-container #w3a-modal .btn-link{text-decoration-line:none}.w3a-parent-container #w3a-modal button.t-btn:hover>.hover-icon{display:block;transition:display .15s;transition-timing-function:cubic-bezier(0,.54,.63,.99)}.w3a-parent-container #w3a-modal button.t-btn:hover>.image-icon{display:none;transition:display .15s;transition-timing-function:cubic-bezier(0,.54,.63,.99)}";styleInject(css_248z);function Button(tr){const{variant:er="primary",onClick:rr,children:nr,title:ir,className:sr,style:or,size:ar="md",disabled:cr,type:lr="button"}=tr,ur=`size-${ar}`;return jsxRuntimeExports.jsx("button",{disabled:cr,type:lr,className:`t-btn t-btn-${er} rounded-full ${ur} ${sr}`,onClick:rr,title:ir,style:or,children:nr})}var Button$1=reactExports.memo(Button);const closeIcon=jsxRuntimeExports.jsx(Icon,{iconName:"close"});function Loader(tr){const{message:er,modalStatus:rr,label:nr,onClose:ir,canEmit:sr=!0}=tr;return reactExports.useEffect(()=>{loglevel$1.debug("loader re-rendering"),rr===MODAL_STATUS.CONNECTED&&sr&&setTimeout(()=>{ir()},3e3)},[sr,rr,ir]),rr!==MODAL_STATUS.INITIALIZED?jsxRuntimeExports.jsxs("div",{className:"w3ajs-modal-loader w3a-modal__loader",children:[jsxRuntimeExports.jsxs("div",{className:"w3a-modal__loader-content",children:[jsxRuntimeExports.jsxs("div",{className:"w3a-modal__loader-info",children:[rr===MODAL_STATUS.CONNECTING&&jsxRuntimeExports.jsx("div",{className:"w3ajs-modal-loader__spinner w3a-spinner",children:jsxRuntimeExports.jsx("div",{className:"w3a-spinner__spinner"})}),jsxRuntimeExports.jsx("div",{className:"w3ajs-modal-loader__label w3a-spinner-label",children:nr}),rr===ADAPTER_STATUS.CONNECTED&&jsxRuntimeExports.jsx("div",{className:"w3ajs-modal-loader__message w3a-spinner-message",children:er}),rr===ADAPTER_STATUS.ERRORED&&jsxRuntimeExports.jsx("div",{className:"w3ajs-modal-loader__message w3a-spinner-message w3a-spinner-message--error",children:er})]}),jsxRuntimeExports.jsx(Footer,{})]}),(rr===ADAPTER_STATUS.CONNECTED||rr===ADAPTER_STATUS.ERRORED)&&jsxRuntimeExports.jsx("button",{type:"button",className:"w3a-header__button w3ajs-loader-close-btn",onClick:ir,children:closeIcon})]}):null}function WalletConnect(tr){const{walletConnectUri:er}=tr,[rr]=useTranslation(void 0,{i18n:i18nInstance});return jsxRuntimeExports.jsx("div",{className:"w3ajs-wallet-connect w3a-wallet-connect",children:jsxRuntimeExports.jsx("div",{className:"w3ajs-wallet-connect__container w3a-wallet-connect__container",children:jsxRuntimeExports.jsxs("div",{className:"w3a-wallet-connect__container-desktop",children:[jsxRuntimeExports.jsx("div",{children:rr("modal.external.walletconnect-subtitle")}),jsxRuntimeExports.jsx("div",{className:"w3ajs-wallet-connect-qr w3a-wallet-connect-qr",tabIndex:0,role:"button",onClick:()=>copyToClipboard$1(er),onKeyDown:()=>copyToClipboard$1(er),children:jsxRuntimeExports.jsx(QRCode_1,{size:200,eyeRadius:5,qrStyle:"dots",removeQrCodeBehindLogo:!0,logoImage:WALLET_CONNECT_LOGO,value:er})}),jsxRuntimeExports.jsx("div",{children:rr("modal.external.walletconnect-copy")})]})})})}var WalletConnect$1=reactExports.memo(WalletConnect);function formatIOSMobile(tr){const er=encodeURIComponent(tr.uri);return tr.universalLink?`${tr.universalLink}/wc?uri=${er}`:tr.deepLink?`${tr.deepLink}${tr.deepLink.endsWith(":")?"//":"/"}wc?uri=${er}`:""}function formatMobileRegistryEntry(tr,er,rr,nr="mobile"){const ir=tr[nr].universal||"",sr=tr[nr].native||"";return{name:tr.name||"",logo:tr.logo||"",universalLink:ir,deepLink:sr,href:rr===Bowser.OS_MAP.iOS?formatIOSMobile({uri:er,universalLink:ir,deepLink:sr}):er}}function formatMobileRegistry(tr,er,rr,nr="mobile"){return Object.values(tr).filter(ir=>!!ir[nr].universal||!!ir[nr].native).map(ir=>formatMobileRegistryEntry(ir,er,rr,nr))}function ExternalWallet(tr){const{hideExternalWallets:er,handleExternalWalletClick:rr,config:nr={},walletConnectUri:ir,showBackButton:sr,modalStatus:or,wcAdapters:ar}=tr,[cr,lr]=reactExports.useState(!0),[ur,dr]=reactExports.useState({}),[yr,mr]=reactExports.useState([]),wr=reactExports.useMemo(()=>Bowser.getParser(window.navigator.userAgent).getPlatformType(),[]),xr=reactExports.useMemo(()=>{const Tr=Bowser.getParser(window.navigator.userAgent);return{platform:Tr.getPlatformType(),os:Tr.getOSName()}},[]),[Or]=useTranslation(void 0,{i18n:i18nInstance});return reactExports.useEffect(()=>{var Tr;loglevel$1.debug("loaded external wallets",nr,ir,wr);const Ar=WALLET_ADAPTERS.WALLET_CONNECT_V2;(((Tr=nr[Ar])===null||Tr===void 0?void 0:Tr.showOnModal)||!1)!==!1&&!ir?(lr(!1),rr({adapter:Ar})):Object.keys(nr).length>0&&lr(!0);const Ur={};Object.keys(nr).forEach(Dr=>{const Hr=nr[Dr];if(!Hr.showOnModal){Ur[Dr]=!1;return}if(wr==="desktop"&&Hr.showOnDesktop){Ur[Dr]=!0;return}if((wr==="mobile"||wr==="tablet")&&Hr.showOnMobile){Ur[Dr]=!0;return}Ur[Dr]=!1}),dr(Ur)},[nr,rr,ir,wr]),reactExports.useEffect(()=>{const Tr=[];if(xr.platform===Bowser.PLATFORMS_MAP.mobile){let Ur=formatMobileRegistry(ar,ir,xr.os,xr.platform);if(xr.os===Bowser.OS_MAP.iOS){var Ar;(Ar=window.ethereum)!==null&&Ar!==void 0&&Ar.isMetaMask&&(Ur=Ur.filter(Dr=>Dr.name!=="MetaMask")),Tr.push(...Ur.map(Dr=>({name:Dr.name,href:Dr.href,logo:Dr.logo,isLink:!0,block:!1})))}else Ur.length>0&&Tr.push({name:"WalletConnect",href:Ur[0].href,logo:WALLET_CONNECT_LOGO,isLink:!0,block:!0})}const Nr=Object.keys(nr).filter(Ur=>![WALLET_ADAPTERS.WALLET_CONNECT_V2].includes(Ur)&&ur[Ur]).map(Ur=>({name:Ur,isLink:!1,block:!1}));Nr.length===1&&xr.os!==Bowser.OS_MAP.iOS&&(Nr[0].block=!0),Tr.push(...Nr),mr(Tr)},[ar,nr,xr.os,xr.platform,ir,ur]),jsxRuntimeExports.jsx("div",{className:"w3ajs-external-wallet w3a-group",children:jsxRuntimeExports.jsxs("div",{className:"w3a-external-container w3ajs-external-container",children:[sr&&jsxRuntimeExports.jsxs("button",{type:"button",className:"w3a-external-back w3ajs-external-back",onClick:()=>er(),children:[jsxRuntimeExports.jsx(Icon,{iconName:"arrow-left"}),jsxRuntimeExports.jsx("div",{className:"w3a-group__title",children:Or("modal.external.back")})]}),!cr&&jsxRuntimeExports.jsx(Loader,{modalStatus:MODAL_STATUS.CONNECTING,canEmit:!1}),Object.keys(nr).map(Tr=>ir&&xr.platform===Bowser.PLATFORMS_MAP.desktop&&[WALLET_ADAPTERS.WALLET_CONNECT_V2].includes(Tr)?jsxRuntimeExports.jsx(WalletConnect$1,{walletConnectUri:ir},Tr):null),or===MODAL_STATUS.INITIALIZED&&jsxRuntimeExports.jsx("ul",{className:"w3a-adapter-list w3ajs-wallet-adapters",children:yr.map(Tr=>{var Ar,Nr;const Ur=Tr.isLink?jsxRuntimeExports.jsx("img",{src:Tr.logo,height:"auto",width:"auto",alt:`login-${Tr.name}`}):jsxRuntimeExports.jsx(Image$1,{imageId:`login-${Tr.name}`,hoverImageId:`login-${Tr.name}`,height:"32",width:"32",isButton:!0}),Dr=yr.length===1||Tr.block,Hr=Dr?jsxRuntimeExports.jsx("p",{className:"ml-2 text-left",children:((Ar=nr[Tr.name])===null||Ar===void 0?void 0:Ar.label)||Tr.name}):"";return jsxRuntimeExports.jsx("li",{className:["w3a-adapter-item",Dr?"w3a-adapter-item--full":"col-span-2"].join(" "),children:Tr.isLink?jsxRuntimeExports.jsx("a",{href:Tr.href,rel:"noopener noreferrer",target:"_blank",children:jsxRuntimeExports.jsxs(Button$1,{type:"button",variant:"tertiary",className:"w-full",children:[Ur,Hr]})},Tr.name):jsxRuntimeExports.jsxs(Button$1,{variant:"tertiary",type:"button",onClick:()=>rr({adapter:Tr.name}),className:"w-full",title:((Nr=nr[Tr.name])===null||Nr===void 0?void 0:Nr.label)||Tr.name,children:[Ur,Hr]})},Tr.name)})})]})})}const ThemedContext=reactExports.createContext({isDark:!0});function Header(tr){const{isDark:er}=reactExports.useContext(ThemedContext),{onClose:rr,appLogo:nr,appName:ir}=tr,[sr]=useTranslation(void 0,{i18n:i18nInstance}),or=[DEFAULT_LOGO_DARK,DEFAULT_LOGO_LIGHT].includes(nr)?"":nr,ar=sr("modal.header-subtitle-name",{appName:ir});return jsxRuntimeExports.jsxs("div",{className:"w3a-modal__header",children:[jsxRuntimeExports.jsx("div",{className:"w3a-header",children:jsxRuntimeExports.jsxs("div",{children:[or&&jsxRuntimeExports.jsx("div",{className:"w3a-header__logo",children:jsxRuntimeExports.jsx("img",{src:or,alt:""})}),jsxRuntimeExports.jsx("div",{className:"w3a-header__title",children:sr("modal.header-title")}),jsxRuntimeExports.jsxs("div",{className:"w3a-header__subtitle",children:[ar,jsxRuntimeExports.jsxs("div",{className:"relative flex flex-col items-center group cursor-pointer",children:[jsxRuntimeExports.jsx(Icon,{iconName:`information-circle${er?"-light":""}`}),jsxRuntimeExports.jsxs("div",{className:"absolute top-4 z-20 flex-col items-center hidden mb-5 group-hover:flex",children:[jsxRuntimeExports.jsx("div",{className:"w-3 h-3 ml-[3px] -mb-2 rotate-45 bg-app-gray-50 dark:bg-app-gray-600"}),jsxRuntimeExports.jsxs("div",{className:`relative p-4 w-[270px] -translate-x-16 text-xs leading-none text-app-white rounded-md bg-app-gray-50 dark:bg-app-gray-600 shadow-lg ${ar.length>34?"-ml-[100px]":""}`,children:[jsxRuntimeExports.jsx("div",{className:"text-xs font-medium mb-1 text-app-gray-900 dark:text-app-white",children:sr("modal.header-tooltip-title")}),jsxRuntimeExports.jsx("div",{className:"text-xs text-app-gray-400",children:sr("modal.header-tooltip-desc")})]})]})]})]})]})}),jsxRuntimeExports.jsx("button",{type:"button",onClick:rr,className:"w3a-header__button w3ajs-close-btn",children:jsxRuntimeExports.jsx(Icon,{iconName:"close"})})]})}const memoizedHeader=reactExports.memo(Header,(tr,er)=>tr.appLogo!==er.appLogo);memoizedHeader.displayName="Header";const getAdapterSocialLogins=(tr,er={})=>{const rr={};if(tr===WALLET_ADAPTERS.OPENLOGIN)OPENLOGIN_PROVIDERS.forEach(nr=>{const ir=er[nr]||{name:OPENLOGIN_PROVIDERS_NAMES[nr],showOnMobile:!0,showOnModal:!0,showOnDesktop:!0};rr[nr]=_objectSpread2({},ir)}),loglevel$1.debug("OpenLogin login method ui config",rr);else throw WalletInitializationError.invalidParams(`${tr} is not a valid adapter`);return rr},passwordlessBackendUrl="https://api-passwordless.web3auth.io",getUserCountry=async()=>{try{const tr=await get$1(`${passwordlessBackendUrl}/api/v3/user/location`);return tr&&tr.data.country?{country:tr.data.country,dialCode:tr.data.dial_code}:null}catch(tr){return loglevel$1.error("error getting user country",tr),null}},validatePhoneNumber=async tr=>{try{const er=await post(`${passwordlessBackendUrl}/api/v3/phone_number/validate`,{phone_number:tr});return er&&er.success?er.parsed_number:!1}catch(er){return loglevel$1.error("error validating phone number",er),er.status!==400}},getUserLanguage=tr=>{let er=tr;return er||(er=(typeof window<"u"&&(window.navigator.userLanguage||window.navigator.language)||"en-US").split("-")[0]),Object.prototype.hasOwnProperty.call(LANGUAGE_MAP,er)?er:LANGUAGES.en};function SocialLoginPasswordless(tr){const{handleSocialLoginClick:er,adapter:rr,isPrimaryBtn:nr,isEmailVisible:ir,isSmsVisible:sr}=tr,{isDark:or}=reactExports.useContext(ThemedContext),[ar,cr]=reactExports.useState(""),[lr,ur]=reactExports.useState(""),[dr,yr]=reactExports.useState(null),[mr]=useTranslation(void 0,{i18n:i18nInstance}),wr=async Ar=>{Ar.preventDefault();const Nr=ar;if(Nr.match(/^([\w.%+-]+)@([\w-]+\.)+([\w]{2,})$/i))return er({adapter:rr,loginParams:{loginProvider:LOGIN_PROVIDER.EMAIL_PASSWORDLESS,login_hint:Nr,name:"Email"}});const Dr=Nr.startsWith("+")?Nr:`${lr}${Nr}`,Hr=await validatePhoneNumber(Dr);if(Hr)return er({adapter:rr,loginParams:{loginProvider:LOGIN_PROVIDER.SMS_PASSWORDLESS,login_hint:typeof Hr=="string"?Hr:Dr,name:"Mobile"}});yr(!1)};reactExports.useEffect(()=>{sr&&(async()=>{const Nr=await getUserCountry();Nr&&Nr.dialCode&&ur(Nr.dialCode)})()},[sr]);const xr=Ar=>{cr(Ar.target.value),dr===!1&&yr(null)},Or=reactExports.useMemo(()=>ir&&sr?"modal.social.passwordless-title":ir?"modal.social.email":"modal.social.phone",[ir,sr]),Tr=reactExports.useMemo(()=>ir&&sr?"+(00)123456/name@example.com":ir?"name@example.com":"+(00)123456",[ir,sr]);return jsxRuntimeExports.jsxs("div",{className:"w3ajs-passwordless w3a-group w3a-group--passwordless",children:[jsxRuntimeExports.jsxs("div",{className:"w3a-group__title",children:[mr(Or),sr&&jsxRuntimeExports.jsxs("div",{className:"relative flex flex-col items-center cursor-pointer group",children:[jsxRuntimeExports.jsx(Icon,{iconName:`information-circle${or?"-light":""}`}),jsxRuntimeExports.jsxs("div",{className:"absolute z-20 flex-col items-center hidden mb-5 top-4 group-hover:flex",children:[jsxRuntimeExports.jsx("div",{className:"w-3 h-3 ml-[3px] -mb-2 rotate-45 bg-app-gray-50 dark:bg-app-gray-600"}),jsxRuntimeExports.jsxs("div",{className:"relative p-4 w-[300px] text-xs leading-none text-app-white rounded-md bg-app-gray-50 dark:bg-app-gray-600 shadow-lg",children:[jsxRuntimeExports.jsx("div",{className:"mb-1 text-xs font-medium text-app-gray-900 dark:text-app-white",children:mr("modal.popup.phone-header")}),jsxRuntimeExports.jsx("div",{className:"text-xs text-app-gray-400",children:mr("modal.popup.phone-body")})]})]})]})]}),jsxRuntimeExports.jsxs("form",{className:"w3ajs-passwordless-form",onSubmit:Ar=>wr(Ar),children:[jsxRuntimeExports.jsx("input",{className:"w-full mb-4 w3a-text-field",name:"passwordless-input",required:!0,placeholder:`${mr("modal.social.sms-placeholder-text")} ${Tr}`,onFocus:Ar=>{Ar.target.placeholder=""},onBlur:Ar=>{Ar.target.placeholder=`${mr("modal.social.sms-placeholder-text")} ${Tr}`},onChange:Ar=>xr(Ar)}),dr===!1&&jsxRuntimeExports.jsx("div",{className:"w3a-sms-field--error",children:mr("modal.errors-invalid-number-email")}),jsxRuntimeExports.jsx(Button$1,{variant:nr?"primary":"tertiary",disabled:ar==="",className:"w-full",type:"submit",children:mr("modal.social.passwordless-cta")})]})]})}function getProviderIcon(tr,er,rr){const nr=tr===LOGIN_PROVIDER.TWITTER?`login-twitter-x${er?"-light":"-dark"}`:`login-${tr}${er?"-light":"-dark"}`,ir=tr===LOGIN_PROVIDER.APPLE||tr===LOGIN_PROVIDER.GITHUB||tr===LOGIN_PROVIDER.TWITTER?nr:`login-${tr}-active`;return rr?jsxRuntimeExports.jsx(Image$1,{width:"20",imageId:ir,hoverImageId:ir,isButton:!0}):jsxRuntimeExports.jsx(Image$1,{width:"20",imageId:nr,hoverImageId:ir,isButton:!0})}function SocialLogins(tr){const[er,rr]=reactExports.useState(!1),[nr,ir]=reactExports.useState(!1),{socialLoginsConfig:sr={loginMethods:{},loginMethodsOrder:[],adapter:"",uiConfig:{}},handleSocialLoginClick:or}=tr,{isDark:ar}=reactExports.useContext(ThemedContext),[cr]=useTranslation(void 0,{i18n:i18nInstance}),lr=()=>{ir(!nr)};reactExports.useEffect(()=>{const xr=Object.keys(sr.loginMethods).filter(Or=>sr.loginMethods[Or].showOnModal);rr(xr.length>4)},[sr.loginMethods]);const ur=classNames("w3a-adapter-list","w3ajs-socials-adapters",nr?"":" w3a-adapter-list--shrink"),dr=classNames("w3a-button-expand","w3ajs-button-expand",nr?"w3a-button--rotate":""),yr=cr(nr?"modal.social.view-less":"modal.social.view-more"),mr=Object.keys(sr.loginMethods).length+1,wr=[LOGIN_PROVIDER.WEBAUTHN,LOGIN_PROVIDER.JWT,LOGIN_PROVIDER.SMS_PASSWORDLESS,LOGIN_PROVIDER.EMAIL_PASSWORDLESS];return jsxRuntimeExports.jsxs("div",{className:"w3ajs-social-logins w3a-group",children:[jsxRuntimeExports.jsx("ul",{className:ur,children:Object.keys(sr.loginMethods).map(xr=>{var Or,Tr;const Ar=capitalizeFirstLetter(sr.loginMethods[xr].name||xr),Ur=sr.loginMethodsOrder.indexOf(xr)+1||Object.keys(sr.loginMethods).length+1,Dr=sr.loginMethods[xr].mainOption,Hr=(sr==null||(Or=sr.uiConfig)===null||Or===void 0?void 0:Or.primaryButton)==="socialLogin"&&Ur===1,zr=getProviderIcon(xr,ar,Hr);if(sr.loginMethods[xr].showOnModal===!1||wr.includes(xr))return null;const Cr=classNames("w3a-adapter-item",(sr==null||(Tr=sr.uiConfig)===null||Tr===void 0?void 0:Tr.loginGridCol)===2?"col-span-3":"col-span-2");return Dr||Ur===1?jsxRuntimeExports.jsx("li",{className:"col-span-6 w3a-adapter-item",style:{order:Ur},children:jsxRuntimeExports.jsxs(Button$1,{variant:"secondary",onClick:()=>or({adapter:sr.adapter,loginParams:{loginProvider:xr,name:Ar,login_hint:""}}),className:"w-full",title:Ar,children:[zr,jsxRuntimeExports.jsx("p",{className:"ml-2",children:cr("modal.social.continueCustom",{adapter:Ar})})]})},xr):jsxRuntimeExports.jsx("li",{className:Cr,style:{order:Ur+mr},children:jsxRuntimeExports.jsx(Button$1,{variant:"secondary",onClick:()=>or({adapter:sr.adapter,loginParams:{loginProvider:xr,name:Ar,login_hint:""}}),className:"w-full",title:Ar,children:zr})},xr)})}),jsxRuntimeExports.jsx("div",{className:"w3a-social__policy",children:cr("modal.social.policy")}),er&&jsxRuntimeExports.jsx("div",{className:"text-right",children:jsxRuntimeExports.jsx("button",{type:"button",className:dr,onClick:lr,children:jsxRuntimeExports.jsx("span",{className:"w3ajs-button-expand-text",children:yr})})})]})}loglevel$1.enableAll();function Modal(tr){var er,rr,nr,ir,sr,or;const[ar,cr]=reactExports.useState(["w3a-modal__inner"]),[lr,ur]=reactExports.useState({externalWalletsVisibility:!1,status:MODAL_STATUS.INITIALIZED,hasExternalWallets:!1,externalWalletsInitialized:!1,modalVisibility:!1,modalVisibilityDelayed:!1,postLoadingMessage:"",walletConnectUri:"",socialLoginsConfig:{loginMethods:{},loginMethodsOrder:[],adapter:"",uiConfig:{}},externalWalletsConfig:{},detailedLoaderAdapter:"",detailedLoaderAdapterName:"",showExternalWalletsOnly:!1,wcAdapters:[]}),[dr]=useTranslation(void 0,{i18n:i18nInstance}),{stateListener:yr,appLogo:mr,appName:wr,handleSocialLoginClick:xr,handleExternalWalletClick:Or,handleShowExternalWallets:Tr,closeModal:Ar}=tr;reactExports.useEffect(()=>{yr.emit("MOUNTED"),yr.on("STATE_UPDATED",pr=>{loglevel$1.debug("state updated",pr),ur(gr=>clonedeep(merge(gr,pr)))})},[yr]),reactExports.useEffect(()=>{let pr;return lr.modalVisibility?(ur(gr=>_objectSpread2(_objectSpread2({},gr),{},{modalVisibilityDelayed:lr.modalVisibility})),pr=window.setTimeout(()=>{cr(["w3a-modal__inner",lr.modalVisibility?"w3a-modal__inner--active":""])},100)):(cr(["w3a-modal__inner",lr.modalVisibility?"w3a-modal__inner--active":""]),pr=window.setTimeout(()=>{ur(gr=>_objectSpread2(_objectSpread2({},gr),{},{modalVisibilityDelayed:lr.modalVisibility}))},250)),()=>{clearTimeout(pr)}},[lr.modalVisibility]);const Nr=reactExports.useCallback(()=>{lr.status===MODAL_STATUS.CONNECTED&&Ar(),lr.status===MODAL_STATUS.ERRORED&&ur(pr=>_objectSpread2(_objectSpread2({},pr),{},{modalVisibility:!0,status:MODAL_STATUS.INITIALIZED}))},[Ar,lr.status]),Ur=reactExports.useCallback(pr=>{const{adapter:gr}=pr;ur(fr=>_objectSpread2(_objectSpread2({},fr),{},{detailedLoaderAdapter:gr,detailedLoaderAdapterName:ADAPTER_NAMES[gr]})),Or(pr)},[Or]),Dr=pr=>{const{loginParams:gr}=pr;ur(fr=>_objectSpread2(_objectSpread2({},fr),{},{detailedLoaderAdapter:gr.loginProvider,detailedLoaderAdapterName:gr.name})),xr(pr)},Hr=((er=lr.socialLoginsConfig)===null||er===void 0||(er=er.uiConfig)===null||er===void 0?void 0:er.primaryButton)==="emailLogin",zr=((rr=lr.socialLoginsConfig)===null||rr===void 0||(rr=rr.uiConfig)===null||rr===void 0?void 0:rr.primaryButton)==="externalLogin",Cr=jsxRuntimeExports.jsx("div",{className:"w3ajs-external-wallet w3a-group",children:jsxRuntimeExports.jsxs("div",{className:"w3a-external-toggle w3ajs-external-toggle",children:[jsxRuntimeExports.jsx("div",{className:"w3a-group__title",children:dr("modal.external.title")}),jsxRuntimeExports.jsx(Button$1,{variant:zr?"primary":"tertiary",type:"button",className:"w-full w3ajs-external-toggle__button",onClick:()=>{Tr(lr.externalWalletsInitialized),ur(pr=>_objectSpread2(_objectSpread2({},pr),{},{externalWalletsVisibility:!0}))},children:dr("modal.external.connect")})]})}),Mr=reactExports.useMemo(()=>{var pr,gr;return lr.showExternalWalletsOnly||Object.keys(((pr=lr.socialLoginsConfig)===null||pr===void 0?void 0:pr.loginMethods)||{}).length===0?!1:!!Object.entries(((gr=lr.socialLoginsConfig)===null||gr===void 0?void 0:gr.loginMethods)||{}).some(([hr,br])=>hr!==LOGIN_PROVIDER.EMAIL_PASSWORDLESS&&br.showOnModal!==!1)},[lr.showExternalWalletsOnly,(nr=lr.socialLoginsConfig)===null||nr===void 0?void 0:nr.loginMethods]);loglevel$1.info("modal state",lr,Mr);const Pr=reactExports.useMemo(()=>{var pr;return(pr=lr.socialLoginsConfig)===null||pr===void 0||(pr=pr.loginMethods[LOGIN_PROVIDER.EMAIL_PASSWORDLESS])===null||pr===void 0?void 0:pr.showOnModal},[(ir=lr.socialLoginsConfig)===null||ir===void 0?void 0:ir.loginMethods]),Sr=reactExports.useMemo(()=>{var pr;return(pr=lr.socialLoginsConfig)===null||pr===void 0||(pr=pr.loginMethods[LOGIN_PROVIDER.SMS_PASSWORDLESS])===null||pr===void 0?void 0:pr.showOnModal},[(sr=lr.socialLoginsConfig)===null||sr===void 0?void 0:sr.loginMethods]);return lr.modalVisibilityDelayed&&jsxRuntimeExports.jsx("div",{id:"w3a-modal",className:"w3a-modal",children:jsxRuntimeExports.jsxs("div",{className:ar.join(" "),children:[jsxRuntimeExports.jsx(memoizedHeader,{onClose:Ar,appLogo:mr,appName:wr}),lr.status!==MODAL_STATUS.INITIALIZED?jsxRuntimeExports.jsx("div",{className:"w3a-modal__content w3ajs-content",children:jsxRuntimeExports.jsx(DetailedLoader,{onClose:Nr,appLogo:mr,modalStatus:lr.status,message:dr(lr.postLoadingMessage),adapter:lr.detailedLoaderAdapter,adapterName:lr.detailedLoaderAdapterName})}):jsxRuntimeExports.jsx("div",{className:"w3a-modal__content w3ajs-content",children:(Mr||Pr||Sr)&&!lr.externalWalletsVisibility?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[Mr?jsxRuntimeExports.jsx(SocialLogins,{handleSocialLoginClick:pr=>Dr(pr),socialLoginsConfig:lr.socialLoginsConfig}):null,(Pr||Sr)&&jsxRuntimeExports.jsx(SocialLoginPasswordless,{isEmailVisible:Pr,isSmsVisible:Sr,adapter:(or=lr.socialLoginsConfig)===null||or===void 0?void 0:or.adapter,handleSocialLoginClick:pr=>Dr(pr),isPrimaryBtn:Hr}),lr.hasExternalWallets&&Cr]}):jsxRuntimeExports.jsx(ExternalWallet,{modalStatus:lr.status,showBackButton:Mr,handleExternalWalletClick:Ur,walletConnectUri:lr.walletConnectUri,wcAdapters:lr.wcAdapters,config:lr.externalWalletsConfig,hideExternalWallets:()=>ur(pr=>_objectSpread2(_objectSpread2({},pr),{},{externalWalletsVisibility:!1}))})}),jsxRuntimeExports.jsx(Footer,{})]})})}function createWrapper(tr){const er=document.getElementById("w3a-parent-container");er&&er.remove();const rr=document.createElement("section");rr.classList.add("w3a-parent-container"),rr.setAttribute("id","w3a-parent-container"),rr.style.zIndex=tr,rr.style.position="relative";const nr=document.createElement("section");return nr.setAttribute("id","w3a-container"),rr.appendChild(nr),document.body.appendChild(rr),nr}class LoginModal extends SafeEventEmitter{constructor(er){super(),_defineProperty(this,"uiConfig",void 0),_defineProperty(this,"stateEmitter",void 0),_defineProperty(this,"initModal",async()=>{const rr={isDark:this.isDark},nr=this.uiConfig.defaultLanguage||LANGUAGES.en;return nr===LANGUAGES.de?__vitePreload(()=>import("./german-Cosm3DTT-D9-AcrqC.js"),[]).then(ir=>(i18nInstance.addResourceBundle(nr,"translation",ir.default),i18nInstance.changeLanguage(nr))).catch(ir=>{loglevel$1.error(ir)}):nr===LANGUAGES.ja?__vitePreload(()=>import("./japanese-CxepACv7-D_lUE7yj.js"),[]).then(ir=>(i18nInstance.addResourceBundle(nr,"translation",ir.default),i18nInstance.changeLanguage(nr))).catch(ir=>{loglevel$1.error(ir)}):nr===LANGUAGES.ko?__vitePreload(()=>import("./korean-B9gddtda-CpMkIs9y.js"),[]).then(ir=>(i18nInstance.addResourceBundle(nr,"translation",ir.default),i18nInstance.changeLanguage(nr))).catch(ir=>{loglevel$1.error(ir)}):nr===LANGUAGES.zh?__vitePreload(()=>import("./mandarin-BLpDG3ey-Dgdzq_1o.js"),[]).then(ir=>(i18nInstance.addResourceBundle(nr,"translation",ir.default),i18nInstance.changeLanguage(nr))).catch(ir=>{loglevel$1.error(ir)}):nr===LANGUAGES.es?__vitePreload(()=>import("./spanish-DcKAGK9t-BpIA8YBi.js"),[]).then(ir=>(i18nInstance.addResourceBundle(nr,"translation",ir.default),i18nInstance.changeLanguage(nr))).catch(ir=>{loglevel$1.error(ir)}):nr===LANGUAGES.fr?__vitePreload(()=>import("./french-Dzf45OF_-CxmaVknp.js"),[]).then(ir=>(i18nInstance.addResourceBundle(nr,"translation",ir.default),i18nInstance.changeLanguage(nr))).catch(ir=>{loglevel$1.error(ir)}):nr===LANGUAGES.pt?__vitePreload(()=>import("./portuguese-D2BajECg-Db9oxC2t.js"),[]).then(ir=>(i18nInstance.addResourceBundle(nr,"translation",ir.default),i18nInstance.changeLanguage(nr))).catch(ir=>{loglevel$1.error(ir)}):nr===LANGUAGES.nl?__vitePreload(()=>import("./dutch-C_uXCtFc-DP9c4DaQ.js"),[]).then(ir=>(i18nInstance.addResourceBundle(nr,"translation",ir.default),i18nInstance.changeLanguage(nr))).catch(ir=>{loglevel$1.error(ir)}):nr===LANGUAGES.tr&&__vitePreload(()=>import("./turkish-eayLYBl3-28AWHZcj.js"),[]).then(ir=>(i18nInstance.addResourceBundle(nr,"translation",ir.default),i18nInstance.changeLanguage(nr))).catch(ir=>{loglevel$1.error(ir)}),new Promise(ir=>{var sr;this.stateEmitter.once("MOUNTED",()=>(loglevel$1.info("rendered"),this.setState({status:MODAL_STATUS.INITIALIZED}),ir()));const or=createWrapper(this.uiConfig.modalZIndex);if(rr.isDark?or.classList.add("dark"):or.classList.remove("dark"),createRoot(or).render(jsxRuntimeExports.jsx(ThemedContext.Provider,{value:rr,children:jsxRuntimeExports.jsx(Modal,{closeModal:this.closeModal,stateListener:this.stateEmitter,handleShowExternalWallets:this.handleShowExternalWallets,handleExternalWalletClick:this.handleExternalWalletClick,handleSocialLoginClick:this.handleSocialLoginClick,appLogo:rr.isDark?this.uiConfig.logoDark:this.uiConfig.logoLight,appName:this.uiConfig.appName})})),(sr=this.uiConfig)!==null&&sr!==void 0&&sr.theme){const cr=document.getElementById("w3a-parent-container");applyWhiteLabelTheme(cr,this.uiConfig.theme)}})}),_defineProperty(this,"addSocialLogins",(rr,nr,ir,sr)=>{this.setState({socialLoginsConfig:{adapter:rr,loginMethods:nr,loginMethodsOrder:ir,uiConfig:sr}}),loglevel$1.info("addSocialLogins",rr,nr,ir,sr)}),_defineProperty(this,"addWalletLogins",(rr,nr)=>{this.setState({externalWalletsConfig:rr,externalWalletsInitialized:!0,showExternalWalletsOnly:!!(nr!=null&&nr.showExternalWalletsOnly),externalWalletsVisibility:!0})}),_defineProperty(this,"open",()=>{this.setState({modalVisibility:!0}),this.emit(LOGIN_MODAL_EVENTS.MODAL_VISIBILITY,!0)}),_defineProperty(this,"closeModal",()=>{this.setState({modalVisibility:!1,externalWalletsVisibility:!1}),this.emit(LOGIN_MODAL_EVENTS.MODAL_VISIBILITY,!1)}),_defineProperty(this,"initExternalWalletContainer",()=>{this.setState({hasExternalWallets:!0})}),_defineProperty(this,"handleShowExternalWallets",rr=>{this.emit(LOGIN_MODAL_EVENTS.INIT_EXTERNAL_WALLETS,{externalWalletsInitialized:rr})}),_defineProperty(this,"handleExternalWalletClick",rr=>{loglevel$1.info("external wallet clicked",rr);const{adapter:nr}=rr;this.emit(LOGIN_MODAL_EVENTS.LOGIN,{adapter:nr})}),_defineProperty(this,"handleSocialLoginClick",rr=>{loglevel$1.info("social login clicked",rr);const{adapter:nr,loginParams:ir}=rr;this.emit(LOGIN_MODAL_EVENTS.LOGIN,{adapter:nr,loginParams:{loginProvider:ir.loginProvider,login_hint:ir.login_hint,name:ir.name}})}),_defineProperty(this,"setState",rr=>{this.stateEmitter.emit("STATE_UPDATED",rr)}),_defineProperty(this,"updateWalletConnect",(rr,nr)=>{rr&&this.setState({walletConnectUri:rr,wcAdapters:nr})}),_defineProperty(this,"handleAdapterData",rr=>{if(rr.adapterName===WALLET_ADAPTERS.WALLET_CONNECT_V2){const nr=rr.data;this.updateWalletConnect(nr.uri,nr.extensionAdapters)}}),_defineProperty(this,"subscribeCoreEvents",rr=>{rr.on(ADAPTER_EVENTS.CONNECTING,nr=>{loglevel$1.info("connecting with adapter",nr),(nr==null?void 0:nr.adapter)!==WALLET_ADAPTERS.WALLET_CONNECT_V2&&this.setState({status:MODAL_STATUS.CONNECTING})}),rr.on(ADAPTER_EVENTS.CONNECTED,nr=>{loglevel$1.debug("connected with adapter",nr),nr.reconnected?this.setState({status:MODAL_STATUS.CONNECTED}):this.setState({status:MODAL_STATUS.CONNECTED,modalVisibility:!0,postLoadingMessage:"modal.post-loading.connected"})}),rr.on(ADAPTER_EVENTS.ERRORED,nr=>{loglevel$1.error("error",nr,nr.message),nr.code===5e3?this.uiConfig.displayErrorsOnModal?this.setState({modalVisibility:!0,postLoadingMessage:nr.message||"modal.post-loading.something-wrong",status:MODAL_STATUS.ERRORED}):this.setState({modalVisibility:!1}):this.setState({modalVisibility:!0,status:MODAL_STATUS.INITIALIZED})}),rr.on(ADAPTER_EVENTS.DISCONNECTED,()=>{this.setState({status:MODAL_STATUS.INITIALIZED,externalWalletsVisibility:!1})}),rr.on(ADAPTER_EVENTS.ADAPTER_DATA_UPDATED,nr=>{this.handleAdapterData(nr)})}),this.uiConfig=er,er.logoDark||(this.uiConfig.logoDark=DEFAULT_LOGO_DARK),er.logoLight||(this.uiConfig.logoLight=DEFAULT_LOGO_LIGHT),er.mode||(this.uiConfig.mode="light"),er.modalZIndex||(this.uiConfig.modalZIndex="99998"),typeof er.displayErrorsOnModal>"u"&&(this.uiConfig.displayErrorsOnModal=!0),er.appName||(this.uiConfig.appName="Web3Auth"),er.loginGridCol||(this.uiConfig.loginGridCol=3),er.primaryButton||(this.uiConfig.primaryButton="socialLogin"),er.defaultLanguage||(this.uiConfig.defaultLanguage=getUserLanguage(er.defaultLanguage)),this.stateEmitter=new SafeEventEmitter,this.subscribeCoreEvents(this.uiConfig.adapterListener)}get isDark(){return this.uiConfig.mode==="dark"||this.uiConfig.mode==="auto"&&window.matchMedia("(prefers-color-scheme: dark)").matches}}CHAIN_NAMESPACES.SOLANA,SOLANA_ADAPTERS.TORUS_SOLANA+"",SOLANA_ADAPTERS.OPENLOGIN+"",SOLANA_ADAPTERS.PHANTOM+"";CHAIN_NAMESPACES.EIP155,EVM_ADAPTERS.TORUS_EVM+"",EVM_ADAPTERS.METAMASK+"",EVM_ADAPTERS.OPENLOGIN+"",EVM_ADAPTERS.WALLET_CONNECT_V2+"";CHAIN_NAMESPACES.SOLANA,SOLANA_ADAPTERS.OPENLOGIN+"";CHAIN_NAMESPACES.EIP155,EVM_ADAPTERS.OPENLOGIN+"";const defaultOtherModalConfig={chainNamespace:CHAIN_NAMESPACES.OTHER,adapters:{[EVM_ADAPTERS.OPENLOGIN]:{label:"OpenLogin",showOnModal:!0,showOnMobile:!0,showOnDesktop:!0}}};class Web3Auth extends Web3AuthNoModal{constructor(er){if(super(er),_defineProperty(this,"loginModal",void 0),_defineProperty(this,"options",void 0),_defineProperty(this,"modalConfig",defaultOtherModalConfig),this.options=_objectSpread2({},er),this.options.uiConfig||(this.options.uiConfig={}),!this.coreOptions.privateKeyProvider)throw WalletInitializationError.invalidParams("privateKeyProvider is required")}setModalConfig(er){super.checkInitRequirements(),this.modalConfig=er}async initModal(er){super.checkInitRequirements();let rr;try{rr=await fetchProjectConfig(this.options.clientId,this.options.web3AuthNetwork)}catch(wr){throw loglevel$1.error("Failed to fetch project configurations",wr),WalletInitializationError.notReady("failed to fetch project configurations",wr)}const{whitelabel:nr}=rr;this.options.uiConfig=merge(clonedeep(nr),this.options.uiConfig),this.options.uiConfig.defaultLanguage||(this.options.uiConfig.defaultLanguage=getUserLanguage(this.options.uiConfig.defaultLanguage)),this.options.uiConfig.mode||(this.options.uiConfig.mode="light"),this.loginModal=new LoginModal(_objectSpread2(_objectSpread2({},this.options.uiConfig),{},{adapterListener:this})),this.subscribeToLoginModalEvents();const{sms_otp_enabled:ir,whitelist:sr}=rr;if(ir!==void 0){var or;const wr={[WALLET_ADAPTERS.OPENLOGIN]:{label:WALLET_ADAPTERS.OPENLOGIN,loginMethods:{[LOGIN_PROVIDER.SMS_PASSWORDLESS]:{name:LOGIN_PROVIDER.SMS_PASSWORDLESS,showOnModal:ir,showOnDesktop:ir,showOnMobile:ir}}}};(or=er)!==null&&or!==void 0&&or.modalConfig||(er={modalConfig:{}}),er.modalConfig=merge(clonedeep(er.modalConfig),wr)}await this.loginModal.initModal();const ar=this.options.chainConfig,cr=[...new Set([...Object.keys(this.modalConfig.adapters||{}),...Object.keys(this.walletAdapters)])],lr=cr.map(async wr=>{var xr,Or,Tr,Ar;let Nr=((xr=this.modalConfig.adapters)===null||xr===void 0?void 0:xr[wr])||{label:wr.split("-").map(capitalizeFirstLetter).join(" "),showOnModal:!0,showOnMobile:!0,showOnDesktop:!0};(Or=er)!==null&&Or!==void 0&&(Or=Or.modalConfig)!==null&&Or!==void 0&&Or[wr]&&(Nr=_objectSpread2(_objectSpread2({},Nr),er.modalConfig[wr])),this.modalConfig.adapters[wr]=Nr;const Ur=this.walletAdapters[wr];if(loglevel$1.debug("adapter config",wr,(Tr=this.modalConfig.adapters)===null||Tr===void 0?void 0:Tr[wr].showOnModal,Ur),!Ur&&(Ar=this.modalConfig.adapters)!==null&&Ar!==void 0&&Ar[wr].showOnModal){if(wr===WALLET_ADAPTERS.OPENLOGIN){var Dr;const gr=getOpenloginDefaultOptions(),{clientId:fr,useCoreKitKey:hr,chainConfig:br,web3AuthNetwork:_r,sessionTime:$r,privateKeyProvider:Er}=this.coreOptions,vr=_objectSpread2(_objectSpread2({},getChainConfig(ar.chainNamespace,(Dr=this.coreOptions.chainConfig)===null||Dr===void 0?void 0:Dr.chainId)),br);if(!Er)throw WalletInitializationError.invalidParams("privateKeyProvider is required");const Ir=_objectSpread2(_objectSpread2({},gr.adapterSettings),{},{clientId:fr,network:_r,whiteLabel:this.options.uiConfig});ir!==void 0&&(Ir.loginConfig={[LOGIN_PROVIDER.SMS_PASSWORDLESS]:{showOnModal:ir,showOnDesktop:ir,showOnMobile:ir,showOnSocialBackupFactor:ir}}),sr&&(Ir.originData=sr.signed_urls),this.options.uiConfig.uxMode&&(Ir.uxMode=this.options.uiConfig.uxMode);const Rr=new OpenloginAdapter(_objectSpread2(_objectSpread2({},gr),{},{clientId:fr,useCoreKitKey:hr,chainConfig:_objectSpread2({},vr),adapterSettings:Ir,sessionTime:$r,web3AuthNetwork:_r,privateKeyProvider:Er}));return this.walletAdapters[wr]=Rr,wr}throw WalletInitializationError.invalidParams(`Adapter ${wr} is not configured`)}else if((Ur==null?void 0:Ur.type)===ADAPTER_CATEGORY.IN_APP||(Ur==null?void 0:Ur.type)===ADAPTER_CATEGORY.EXTERNAL||wr===this.cachedAdapter){var Hr;if(!((Hr=this.modalConfig.adapters)!==null&&Hr!==void 0&&Hr[wr].showOnModal))return;if(this.walletAdapters[wr].setAdapterSettings({clientId:this.options.clientId,sessionTime:this.options.sessionTime,web3AuthNetwork:this.options.web3AuthNetwork,useCoreKitKey:this.coreOptions.useCoreKitKey}),!Ur.chainConfigProxy){var zr;const gr=_objectSpread2(_objectSpread2({},getChainConfig(ar.chainNamespace,(zr=this.coreOptions.chainConfig)===null||zr===void 0?void 0:zr.chainId)),this.coreOptions.chainConfig);this.walletAdapters[wr].setAdapterSettings({chainConfig:gr})}if(wr===WALLET_ADAPTERS.OPENLOGIN){var Cr;const gr=this.walletAdapters[wr];if(this.coreOptions.privateKeyProvider){if(gr.currentChainNamespace!==this.coreOptions.privateKeyProvider.currentChainConfig.chainNamespace)throw WalletInitializationError.incompatibleChainNameSpace("private key provider is not compatible with provided chainNamespace for openlogin adapter");gr.setAdapterSettings({privateKeyProvider:this.coreOptions.privateKeyProvider})}if(ir!==void 0&&gr.setAdapterSettings({loginConfig:{[LOGIN_PROVIDER.SMS_PASSWORDLESS]:{showOnModal:ir,showOnDesktop:ir,showOnMobile:ir,showOnSocialBackupFactor:ir}}}),sr&&gr.setAdapterSettings({originData:sr.signed_urls}),(Cr=this.options.uiConfig)!==null&&Cr!==void 0&&Cr.uxMode&&gr.setAdapterSettings({uxMode:this.options.uiConfig.uxMode}),gr.setAdapterSettings({whiteLabel:this.options.uiConfig}),!gr.privateKeyProvider)throw WalletInitializationError.invalidParams("privateKeyProvider is required for openlogin adapter")}else if(wr===WALLET_ADAPTERS.WALLET_CONNECT_V2){const gr=this.walletAdapters[wr],{wallet_connect_enabled:fr,wallet_connect_project_id:hr}=rr;if(fr===!1){var Mr,Pr,Sr;this.modalConfig.adapters=_objectSpread2(_objectSpread2({},(Mr=this.modalConfig.adapters)!==null&&Mr!==void 0?Mr:{}),{},{[WALLET_ADAPTERS.WALLET_CONNECT_V2]:_objectSpread2(_objectSpread2({},(Pr=(Sr=this.modalConfig.adapters)===null||Sr===void 0?void 0:Sr[WALLET_ADAPTERS.WALLET_CONNECT_V2])!==null&&Pr!==void 0?Pr:{}),{},{showOnModal:!1})}),this.modalConfig.adapters[WALLET_ADAPTERS.WALLET_CONNECT_V2].showOnModal=!1}else{var pr;if(!(gr!=null&&(pr=gr.adapterOptions)!==null&&pr!==void 0&&(pr=pr.adapterSettings)!==null&&pr!==void 0&&(pr=pr.walletConnectInitOptions)!==null&&pr!==void 0&&pr.projectId)&&!hr)throw WalletInitializationError.invalidParams("Invalid wallet connect project id. Please configure it on the dashboard");hr&&gr.setAdapterSettings({adapterSettings:{walletConnectInitOptions:{projectId:hr}}})}}return wr}}),ur=await Promise.all(lr),dr=Object.values(this.walletAdapters).some(wr=>{var xr,Or,Tr;if(wr.type!==ADAPTER_CATEGORY.IN_APP||((xr=this.modalConfig.adapters)===null||xr===void 0||(xr=xr[wr.name])===null||xr===void 0?void 0:xr.showOnModal)!==!0)return!1;if(!((Or=this.modalConfig.adapters)!==null&&Or!==void 0&&(Or=Or[wr.name])!==null&&Or!==void 0&&Or.loginMethods))return!0;const Ar=getAdapterSocialLogins(wr.name,(Tr=this.modalConfig.adapters[wr.name])===null||Tr===void 0?void 0:Tr.loginMethods);return!!Object.values(Ar).some(Nr=>Nr.showOnModal)});loglevel$1.debug(dr,this.walletAdapters,ur,"hasInAppWallets");const yr=ur.map(async wr=>{if(wr)try{const xr=this.walletAdapters[wr];if(this.cachedAdapter!==wr&&xr.type===ADAPTER_CATEGORY.EXTERNAL)return;this.subscribeToAdapterEvents(xr),xr.status===ADAPTER_STATUS.NOT_READY&&await xr.init({autoConnect:this.cachedAdapter===wr}),xr.type===ADAPTER_CATEGORY.IN_APP&&this.initializeInAppWallet(wr)}catch(xr){loglevel$1.error(xr,"error while initializing adapter ",wr)}});this.commonJRPCProvider=await CommonJRPCProvider.getProviderInstance({chainConfig:this.coreOptions.chainConfig}),await Promise.all(yr),this.status===ADAPTER_STATUS.NOT_READY&&(this.status=ADAPTER_STATUS.READY,this.emit(ADAPTER_EVENTS.READY));const mr=cr.some(wr=>{var xr,Or;return((xr=this.walletAdapters[wr])===null||xr===void 0?void 0:xr.type)===ADAPTER_CATEGORY.EXTERNAL&&((Or=this.modalConfig.adapters)===null||Or===void 0?void 0:Or[wr].showOnModal)});mr&&this.loginModal.initExternalWalletContainer(),!dr&&mr&&await this.initExternalWalletAdapters(!1,{showExternalWalletsOnly:!0})}async connect(){if(!this.loginModal)throw WalletInitializationError.notReady("Login modal is not initialized");return this.connectedAdapterName&&this.status===ADAPTER_STATUS.CONNECTED&&this.provider?this.provider:(this.loginModal.open(),new Promise((er,rr)=>{this.once(ADAPTER_EVENTS.CONNECTED,()=>er(this.provider)),this.once(ADAPTER_EVENTS.ERRORED,nr=>rr(nr)),this.once(LOGIN_MODAL_EVENTS.MODAL_VISIBILITY,nr=>{if(!nr&&this.status!==ADAPTER_STATUS.CONNECTED)return rr(new Error("User closed the modal"))})}))}async initExternalWalletAdapters(er,rr){if(er)return;const nr={};Object.keys(this.walletAdapters).forEach(async ir=>{const sr=this.walletAdapters[ir];if((sr==null?void 0:sr.type)===ADAPTER_CATEGORY.EXTERNAL){if(loglevel$1.debug("init external wallet",this.cachedAdapter,ir),this.subscribeToAdapterEvents(sr),this.cachedAdapter===ir)return;sr.status===ADAPTER_STATUS.NOT_READY?await sr.init({autoConnect:this.cachedAdapter===ir}).then(()=>{nr[ir]=this.modalConfig.adapters[ir],this.loginModal.addWalletLogins(nr,{showExternalWalletsOnly:!!(rr!=null&&rr.showExternalWalletsOnly)})}).catch(or=>loglevel$1.error(or,"error while initializing adapter",ir)):sr.status===ADAPTER_STATUS.READY&&(nr[ir]=this.modalConfig.adapters[ir],this.loginModal.addWalletLogins(nr,{showExternalWalletsOnly:!!(rr!=null&&rr.showExternalWalletsOnly)}))}})}initializeInAppWallet(er){if(loglevel$1.info("adapterInitResults",er),this.walletAdapters[er].type===ADAPTER_CATEGORY.IN_APP){var rr,nr,ir,sr;this.loginModal.addSocialLogins(er,getAdapterSocialLogins(er,(rr=this.modalConfig.adapters[er])===null||rr===void 0?void 0:rr.loginMethods),((nr=this.options.uiConfig)===null||nr===void 0?void 0:nr.loginMethodsOrder)||OPENLOGIN_PROVIDERS,_objectSpread2(_objectSpread2({},this.options.uiConfig),{},{loginGridCol:((ir=this.options.uiConfig)===null||ir===void 0?void 0:ir.loginGridCol)||3,primaryButton:((sr=this.options.uiConfig)===null||sr===void 0?void 0:sr.primaryButton)||"socialLogin"}))}}subscribeToLoginModalEvents(){this.loginModal.on(LOGIN_MODAL_EVENTS.LOGIN,async er=>{try{await this.connectTo(er.adapter,er.loginParams)}catch(rr){loglevel$1.error(`Error while connecting to adapter: ${er.adapter}`,rr)}}),this.loginModal.on(LOGIN_MODAL_EVENTS.INIT_EXTERNAL_WALLETS,async er=>{await this.initExternalWalletAdapters(er.externalWalletsInitialized)}),this.loginModal.on(LOGIN_MODAL_EVENTS.DISCONNECT,async()=>{try{await this.logout()}catch(er){loglevel$1.error("Error while disconnecting",er)}}),this.loginModal.on(LOGIN_MODAL_EVENTS.MODAL_VISIBILITY,async er=>{loglevel$1.debug("is login modal visible",er),this.emit(LOGIN_MODAL_EVENTS.MODAL_VISIBILITY,er);const rr=this.walletAdapters[WALLET_ADAPTERS.WALLET_CONNECT_V2];if(rr){const nr=rr==null?void 0:rr.status;if(loglevel$1.debug("trying refreshing wc session",er,nr),er&&(nr===ADAPTER_STATUS.READY||nr===ADAPTER_STATUS.CONNECTING)){loglevel$1.debug("refreshing wc session");try{rr.connect()}catch(ir){loglevel$1.error("Error while disconnecting to wallet connect in core",ir)}}!er&&this.status===ADAPTER_STATUS.CONNECTED&&(nr===ADAPTER_STATUS.READY||nr===ADAPTER_STATUS.CONNECTING)&&(loglevel$1.debug("this stops wc adapter from trying to reconnect once proposal expires"),rr.status=ADAPTER_STATUS.READY)}})}}function isHexString$2(tr,er){return!(typeof tr!="string"||!tr.match(/^0x[0-9A-Fa-f]*$/))}function padToEven$1(tr){let er=tr;if(typeof er!="string")throw new Error(`[padToEven] value must be type 'string', received ${typeof er}`);return er.length%2&&(er=`0${er}`),er}BigInt(0);const hexToBytesMapFirstKey={},hexToBytesMapSecondKey={};for(let tr=0;tr<16;tr++){const er=tr,rr=tr*16,nr=tr.toString(16).toLowerCase();hexToBytesMapSecondKey[nr]=er,hexToBytesMapSecondKey[nr.toUpperCase()]=er,hexToBytesMapFirstKey[nr]=rr,hexToBytesMapFirstKey[nr.toUpperCase()]=rr}function _unprefixedHexToBytes(tr){const er=tr.length,rr=new Uint8Array(er/2);for(let nr=0;nr<er;nr+=2)rr[nr/2]=hexToBytesMapFirstKey[tr[nr]]+hexToBytesMapSecondKey[tr[nr+1]];return rr}Array.from({length:256},(tr,er)=>er.toString(16).padStart(2,"0"));for(let tr=0;tr<=256*256-1;tr++)BigInt(tr);const hexToBytes=tr=>{if(typeof tr!="string")throw new Error(`hex argument type ${typeof tr} must be of type string`);if(!/^0x[0-9a-fA-F]*$/.test(tr))throw new Error(`Input must be a 0x-prefixed hexadecimal string, got ${tr}`);const er=tr.slice(2);return _unprefixedHexToBytes(er.length%2===0?er:padToEven$1(er))},intToHex=tr=>{if(!Number.isSafeInteger(tr)||tr<0)throw new Error(`Received an invalid integer type: ${tr}`);return`0x${tr.toString(16)}`},intToBytes=tr=>{const er=intToHex(tr);return hexToBytes(er)},addHexPrefix=tr=>typeof tr!="string"||isHexString$2(tr)?tr:`0x${tr}`;BigInt("0xffffffffffffffff");BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");BigInt("115792089237316195423570985008687907853269984665640564039457584007913129639935");secp256k1$1.CURVE.n;secp256k1$1.CURVE.n/BigInt(2);BigInt("0x10000000000000000000000000000000000000000000000000000000000000000");const KECCAK256_NULL_S="0xc5d2460186f7233c927e7db2dcc703c0e500b653ca82273b7bfad8045d85a470";hexToBytes(KECCAK256_NULL_S);const KECCAK256_RLP_ARRAY_S="0x1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347";hexToBytes(KECCAK256_RLP_ARRAY_S);const KECCAK256_RLP_S="0x56e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421";hexToBytes(KECCAK256_RLP_S);Uint8Array.from([128]);BigInt(-1);BigInt(0);BigInt(1);BigInt(2);BigInt(3);BigInt(7);BigInt(8);BigInt(27);BigInt(28);BigInt(31);BigInt(32);BigInt(64);BigInt(128);BigInt(255);BigInt(256);BigInt(96);BigInt(100);BigInt(160);BigInt(224);BigInt(7922816251426434e13);BigInt(1461501637330903e33);BigInt(2695994666715064e52);BigInt(1e9);Array.from({length:256},(tr,er)=>er.toString(16).padStart(2,"0"));var KeyEncoding;(function(tr){tr.String="string",tr.Bytes="view",tr.Number="number"})(KeyEncoding||(KeyEncoding={}));var ValueEncoding;(function(tr){tr.String="string",tr.Bytes="view",tr.JSON="json"})(ValueEncoding||(ValueEncoding={}));var TypeOutput;(function(tr){tr[tr.Number=0]="Number",tr[tr.BigInt=1]="BigInt",tr[tr.Uint8Array=2]="Uint8Array",tr[tr.PrefixedHexString=3]="PrefixedHexString"})(TypeOutput||(TypeOutput={}));var CLRequestType;(function(tr){tr[tr.Deposit=0]="Deposit",tr[tr.Withdrawal=1]="Withdrawal",tr[tr.Consolidation=2]="Consolidation"})(CLRequestType||(CLRequestType={}));var VerkleLeafType;(function(tr){tr[tr.Version=0]="Version",tr[tr.Balance=1]="Balance",tr[tr.Nonce=2]="Nonce",tr[tr.CodeHash=3]="CodeHash",tr[tr.CodeSize=4]="CodeSize"})(VerkleLeafType||(VerkleLeafType={}));intToBytes(VerkleLeafType.Version);intToBytes(VerkleLeafType.Balance);intToBytes(VerkleLeafType.Nonce);intToBytes(VerkleLeafType.CodeHash);intToBytes(VerkleLeafType.CodeSize);BigInt(256)**BigInt(31);var isMergeableObject=function tr(er){return isNonNullObject(er)&&!isSpecial(er)};function isNonNullObject(tr){return!!tr&&typeof tr=="object"}function isSpecial(tr){var er=Object.prototype.toString.call(tr);return er==="[object RegExp]"||er==="[object Date]"||isReactElement(tr)}var canUseSymbol=typeof Symbol=="function"&&Symbol.for,REACT_ELEMENT_TYPE=canUseSymbol?Symbol.for("react.element"):60103;function isReactElement(tr){return tr.$$typeof===REACT_ELEMENT_TYPE}function emptyTarget(tr){return Array.isArray(tr)?[]:{}}function cloneUnlessOtherwiseSpecified(tr,er){return er.clone!==!1&&er.isMergeableObject(tr)?deepmerge(emptyTarget(tr),tr,er):tr}function defaultArrayMerge(tr,er,rr){return tr.concat(er).map(function(nr){return cloneUnlessOtherwiseSpecified(nr,rr)})}function getMergeFunction(tr,er){if(!er.customMerge)return deepmerge;var rr=er.customMerge(tr);return typeof rr=="function"?rr:deepmerge}function getEnumerableOwnPropertySymbols(tr){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(tr).filter(function(er){return Object.propertyIsEnumerable.call(tr,er)}):[]}function getKeys(tr){return Object.keys(tr).concat(getEnumerableOwnPropertySymbols(tr))}function propertyIsOnObject(tr,er){try{return er in tr}catch{return!1}}function propertyIsUnsafe(tr,er){return propertyIsOnObject(tr,er)&&!(Object.hasOwnProperty.call(tr,er)&&Object.propertyIsEnumerable.call(tr,er))}function mergeObject(tr,er,rr){var nr={};return rr.isMergeableObject(tr)&&getKeys(tr).forEach(function(ir){nr[ir]=cloneUnlessOtherwiseSpecified(tr[ir],rr)}),getKeys(er).forEach(function(ir){propertyIsUnsafe(tr,ir)||(propertyIsOnObject(tr,ir)&&rr.isMergeableObject(er[ir])?nr[ir]=getMergeFunction(ir,rr)(tr[ir],er[ir],rr):nr[ir]=cloneUnlessOtherwiseSpecified(er[ir],rr))}),nr}function deepmerge(tr,er,rr){rr=rr||{},rr.arrayMerge=rr.arrayMerge||defaultArrayMerge,rr.isMergeableObject=rr.isMergeableObject||isMergeableObject,rr.cloneUnlessOtherwiseSpecified=cloneUnlessOtherwiseSpecified;var nr=Array.isArray(er),ir=Array.isArray(tr),sr=nr===ir;return sr?nr?rr.arrayMerge(tr,er,rr):mergeObject(tr,er,rr):cloneUnlessOtherwiseSpecified(er,rr)}deepmerge.all=function tr(er,rr){if(!Array.isArray(er))throw new Error("first argument should be an array");return er.reduce(function(nr,ir){return deepmerge(nr,ir,rr)},{})};/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */var __extends=function(){var tr=function(er,rr){return tr=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(nr,ir){nr.__proto__=ir}||function(nr,ir){for(var sr in ir)ir.hasOwnProperty(sr)&&(nr[sr]=ir[sr])},tr(er,rr)};return function(er,rr){tr(er,rr);function nr(){this.constructor=er}er.prototype=rr===null?Object.create(rr):(nr.prototype=rr.prototype,new nr)}}(),_hasOwnProperty=Object.prototype.hasOwnProperty;function hasOwnProperty(tr,er){return _hasOwnProperty.call(tr,er)}function _objectKeys(tr){if(Array.isArray(tr)){for(var er=new Array(tr.length),rr=0;rr<er.length;rr++)er[rr]=""+rr;return er}if(Object.keys)return Object.keys(tr);var nr=[];for(var ir in tr)hasOwnProperty(tr,ir)&&nr.push(ir);return nr}function _deepClone(tr){switch(typeof tr){case"object":return JSON.parse(JSON.stringify(tr));case"undefined":return null;default:return tr}}function isInteger(tr){for(var er=0,rr=tr.length,nr;er<rr;){if(nr=tr.charCodeAt(er),nr>=48&&nr<=57){er++;continue}return!1}return!0}function escapePathComponent(tr){return tr.indexOf("/")===-1&&tr.indexOf("~")===-1?tr:tr.replace(/~/g,"~0").replace(/\//g,"~1")}function unescapePathComponent(tr){return tr.replace(/~1/g,"/").replace(/~0/g,"~")}function hasUndefined(tr){if(tr===void 0)return!0;if(tr){if(Array.isArray(tr)){for(var er=0,rr=tr.length;er<rr;er++)if(hasUndefined(tr[er]))return!0}else if(typeof tr=="object"){for(var nr=_objectKeys(tr),ir=nr.length,sr=0;sr<ir;sr++)if(hasUndefined(tr[nr[sr]]))return!0}}return!1}function patchErrorMessageFormatter(tr,er){var rr=[tr];for(var nr in er){var ir=typeof er[nr]=="object"?JSON.stringify(er[nr],null,2):er[nr];typeof ir<"u"&&rr.push(nr+": "+ir)}return rr.join(`
`)}var PatchError=function(tr){__extends(er,tr);function er(rr,nr,ir,sr,or){var ar=this.constructor,cr=tr.call(this,patchErrorMessageFormatter(rr,{name:nr,index:ir,operation:sr,tree:or}))||this;return cr.name=nr,cr.index=ir,cr.operation=sr,cr.tree=or,Object.setPrototypeOf(cr,ar.prototype),cr.message=patchErrorMessageFormatter(rr,{name:nr,index:ir,operation:sr,tree:or}),cr}return er}(Error),JsonPatchError=PatchError,deepClone=_deepClone,objOps={add:function(tr,er,rr){return tr[er]=this.value,{newDocument:rr}},remove:function(tr,er,rr){var nr=tr[er];return delete tr[er],{newDocument:rr,removed:nr}},replace:function(tr,er,rr){var nr=tr[er];return tr[er]=this.value,{newDocument:rr,removed:nr}},move:function(tr,er,rr){var nr=getValueByPointer(rr,this.path);nr&&(nr=_deepClone(nr));var ir=applyOperation(rr,{op:"remove",path:this.from}).removed;return applyOperation(rr,{op:"add",path:this.path,value:ir}),{newDocument:rr,removed:nr}},copy:function(tr,er,rr){var nr=getValueByPointer(rr,this.from);return applyOperation(rr,{op:"add",path:this.path,value:_deepClone(nr)}),{newDocument:rr}},test:function(tr,er,rr){return{newDocument:rr,test:_areEquals(tr[er],this.value)}},_get:function(tr,er,rr){return this.value=tr[er],{newDocument:rr}}},arrOps={add:function(tr,er,rr){return isInteger(er)?tr.splice(er,0,this.value):tr[er]=this.value,{newDocument:rr,index:er}},remove:function(tr,er,rr){var nr=tr.splice(er,1);return{newDocument:rr,removed:nr[0]}},replace:function(tr,er,rr){var nr=tr[er];return tr[er]=this.value,{newDocument:rr,removed:nr}},move:objOps.move,copy:objOps.copy,test:objOps.test,_get:objOps._get};function getValueByPointer(tr,er){if(er=="")return tr;var rr={op:"_get",path:er};return applyOperation(tr,rr),rr.value}function applyOperation(tr,er,rr,nr,ir,sr){if(rr===void 0&&(rr=!1),nr===void 0&&(nr=!0),ir===void 0&&(ir=!0),sr===void 0&&(sr=0),rr&&(typeof rr=="function"?rr(er,0,tr,er.path):validator(er,0)),er.path===""){var or={newDocument:tr};if(er.op==="add")return or.newDocument=er.value,or;if(er.op==="replace")return or.newDocument=er.value,or.removed=tr,or;if(er.op==="move"||er.op==="copy")return or.newDocument=getValueByPointer(tr,er.from),er.op==="move"&&(or.removed=tr),or;if(er.op==="test"){if(or.test=_areEquals(tr,er.value),or.test===!1)throw new JsonPatchError("Test operation failed","TEST_OPERATION_FAILED",sr,er,tr);return or.newDocument=tr,or}else{if(er.op==="remove")return or.removed=tr,or.newDocument=null,or;if(er.op==="_get")return er.value=tr,or;if(rr)throw new JsonPatchError("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",sr,er,tr);return or}}else{nr||(tr=_deepClone(tr));var ar=er.path||"",cr=ar.split("/"),lr=tr,ur=1,dr=cr.length,yr=void 0,mr=void 0,wr=void 0;for(typeof rr=="function"?wr=rr:wr=validator;;){if(mr=cr[ur],mr&&mr.indexOf("~")!=-1&&(mr=unescapePathComponent(mr)),ir&&(mr=="__proto__"||mr=="prototype"&&ur>0&&cr[ur-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(rr&&yr===void 0&&(lr[mr]===void 0?yr=cr.slice(0,ur).join("/"):ur==dr-1&&(yr=er.path),yr!==void 0&&wr(er,0,tr,yr)),ur++,Array.isArray(lr)){if(mr==="-")mr=lr.length;else{if(rr&&!isInteger(mr))throw new JsonPatchError("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",sr,er,tr);isInteger(mr)&&(mr=~~mr)}if(ur>=dr){if(rr&&er.op==="add"&&mr>lr.length)throw new JsonPatchError("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",sr,er,tr);var or=arrOps[er.op].call(er,lr,mr,tr);if(or.test===!1)throw new JsonPatchError("Test operation failed","TEST_OPERATION_FAILED",sr,er,tr);return or}}else if(ur>=dr){var or=objOps[er.op].call(er,lr,mr,tr);if(or.test===!1)throw new JsonPatchError("Test operation failed","TEST_OPERATION_FAILED",sr,er,tr);return or}if(lr=lr[mr],rr&&ur<dr&&(!lr||typeof lr!="object"))throw new JsonPatchError("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",sr,er,tr)}}}function applyPatch(tr,er,rr,nr,ir){if(nr===void 0&&(nr=!0),ir===void 0&&(ir=!0),rr&&!Array.isArray(er))throw new JsonPatchError("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");nr||(tr=_deepClone(tr));for(var sr=new Array(er.length),or=0,ar=er.length;or<ar;or++)sr[or]=applyOperation(tr,er[or],rr,!0,ir,or),tr=sr[or].newDocument;return sr.newDocument=tr,sr}function applyReducer(tr,er,rr){var nr=applyOperation(tr,er);if(nr.test===!1)throw new JsonPatchError("Test operation failed","TEST_OPERATION_FAILED",rr,er,tr);return nr.newDocument}function validator(tr,er,rr,nr){if(typeof tr!="object"||tr===null||Array.isArray(tr))throw new JsonPatchError("Operation is not an object","OPERATION_NOT_AN_OBJECT",er,tr,rr);if(objOps[tr.op]){if(typeof tr.path!="string")throw new JsonPatchError("Operation `path` property is not a string","OPERATION_PATH_INVALID",er,tr,rr);if(tr.path.indexOf("/")!==0&&tr.path.length>0)throw new JsonPatchError('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",er,tr,rr);if((tr.op==="move"||tr.op==="copy")&&typeof tr.from!="string")throw new JsonPatchError("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",er,tr,rr);if((tr.op==="add"||tr.op==="replace"||tr.op==="test")&&tr.value===void 0)throw new JsonPatchError("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",er,tr,rr);if((tr.op==="add"||tr.op==="replace"||tr.op==="test")&&hasUndefined(tr.value))throw new JsonPatchError("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",er,tr,rr);if(rr){if(tr.op=="add"){var ir=tr.path.split("/").length,sr=nr.split("/").length;if(ir!==sr+1&&ir!==sr)throw new JsonPatchError("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",er,tr,rr)}else if(tr.op==="replace"||tr.op==="remove"||tr.op==="_get"){if(tr.path!==nr)throw new JsonPatchError("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",er,tr,rr)}else if(tr.op==="move"||tr.op==="copy"){var or={op:"_get",path:tr.from,value:void 0},ar=validate([or],rr);if(ar&&ar.name==="OPERATION_PATH_UNRESOLVABLE")throw new JsonPatchError("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",er,tr,rr)}}}else throw new JsonPatchError("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",er,tr,rr)}function validate(tr,er,rr){try{if(!Array.isArray(tr))throw new JsonPatchError("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(er)applyPatch(_deepClone(er),_deepClone(tr),rr||!0);else{rr=rr||validator;for(var nr=0;nr<tr.length;nr++)rr(tr[nr],nr,er,void 0)}}catch(ir){if(ir instanceof JsonPatchError)return ir;throw ir}}function _areEquals(tr,er){if(tr===er)return!0;if(tr&&er&&typeof tr=="object"&&typeof er=="object"){var rr=Array.isArray(tr),nr=Array.isArray(er),ir,sr,or;if(rr&&nr){if(sr=tr.length,sr!=er.length)return!1;for(ir=sr;ir--!==0;)if(!_areEquals(tr[ir],er[ir]))return!1;return!0}if(rr!=nr)return!1;var ar=Object.keys(tr);if(sr=ar.length,sr!==Object.keys(er).length)return!1;for(ir=sr;ir--!==0;)if(!er.hasOwnProperty(ar[ir]))return!1;for(ir=sr;ir--!==0;)if(or=ar[ir],!_areEquals(tr[or],er[or]))return!1;return!0}return tr!==tr&&er!==er}const core=Object.freeze(Object.defineProperty({__proto__:null,JsonPatchError,_areEquals,applyOperation,applyPatch,applyReducer,deepClone,getValueByPointer,validate,validator},Symbol.toStringTag,{value:"Module"}));/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2021 Joachim Wester
 * MIT license
 */var beforeDict=new WeakMap,Mirror=function(){function tr(er){this.observers=new Map,this.obj=er}return tr}(),ObserverInfo=function(){function tr(er,rr){this.callback=er,this.observer=rr}return tr}();function getMirror(tr){return beforeDict.get(tr)}function getObserverFromMirror(tr,er){return tr.observers.get(er)}function removeObserverFromMirror(tr,er){tr.observers.delete(er.callback)}function unobserve(tr,er){er.unobserve()}function observe(tr,er){var rr=[],nr,ir=getMirror(tr);if(!ir)ir=new Mirror(tr),beforeDict.set(tr,ir);else{var sr=getObserverFromMirror(ir,er);nr=sr&&sr.observer}if(nr)return nr;if(nr={},ir.value=_deepClone(tr),er){nr.callback=er,nr.next=null;var or=function(){generate(nr)},ar=function(){clearTimeout(nr.next),nr.next=setTimeout(or)};typeof window<"u"&&(window.addEventListener("mouseup",ar),window.addEventListener("keyup",ar),window.addEventListener("mousedown",ar),window.addEventListener("keydown",ar),window.addEventListener("change",ar))}return nr.patches=rr,nr.object=tr,nr.unobserve=function(){generate(nr),clearTimeout(nr.next),removeObserverFromMirror(ir,nr),typeof window<"u"&&(window.removeEventListener("mouseup",ar),window.removeEventListener("keyup",ar),window.removeEventListener("mousedown",ar),window.removeEventListener("keydown",ar),window.removeEventListener("change",ar))},ir.observers.set(er,new ObserverInfo(er,nr)),nr}function generate(tr,er){er===void 0&&(er=!1);var rr=beforeDict.get(tr.object);_generate(rr.value,tr.object,tr.patches,"",er),tr.patches.length&&applyPatch(rr.value,tr.patches);var nr=tr.patches;return nr.length>0&&(tr.patches=[],tr.callback&&tr.callback(nr)),nr}function _generate(tr,er,rr,nr,ir){if(er!==tr){typeof er.toJSON=="function"&&(er=er.toJSON());for(var sr=_objectKeys(er),or=_objectKeys(tr),ar=!1,cr=or.length-1;cr>=0;cr--){var lr=or[cr],ur=tr[lr];if(hasOwnProperty(er,lr)&&!(er[lr]===void 0&&ur!==void 0&&Array.isArray(er)===!1)){var dr=er[lr];typeof ur=="object"&&ur!=null&&typeof dr=="object"&&dr!=null&&Array.isArray(ur)===Array.isArray(dr)?_generate(ur,dr,rr,nr+"/"+escapePathComponent(lr),ir):ur!==dr&&(ir&&rr.push({op:"test",path:nr+"/"+escapePathComponent(lr),value:_deepClone(ur)}),rr.push({op:"replace",path:nr+"/"+escapePathComponent(lr),value:_deepClone(dr)}))}else Array.isArray(tr)===Array.isArray(er)?(ir&&rr.push({op:"test",path:nr+"/"+escapePathComponent(lr),value:_deepClone(ur)}),rr.push({op:"remove",path:nr+"/"+escapePathComponent(lr)}),ar=!0):(ir&&rr.push({op:"test",path:nr,value:tr}),rr.push({op:"replace",path:nr,value:er}))}if(!(!ar&&sr.length==or.length))for(var cr=0;cr<sr.length;cr++){var lr=sr[cr];!hasOwnProperty(tr,lr)&&er[lr]!==void 0&&rr.push({op:"add",path:nr+"/"+escapePathComponent(lr),value:_deepClone(er[lr])})}}}function compare(tr,er,rr){rr===void 0&&(rr=!1);var nr=[];return _generate(tr,er,nr,"",rr),nr}const duplex=Object.freeze(Object.defineProperty({__proto__:null,compare,generate,observe,unobserve},Symbol.toStringTag,{value:"Module"}));Object.assign({},core,duplex,{JsonPatchError:PatchError,deepClone:_deepClone,escapePathComponent,unescapePathComponent});const erc20Abi=[{constant:!0,inputs:[],name:"name",outputs:[{name:"",type:"string"}],payable:!1,type:"function"},{constant:!1,inputs:[{name:"_spender",type:"address"},{name:"_value",type:"uint256"}],name:"approve",outputs:[{name:"success",type:"bool"}],payable:!1,type:"function"},{constant:!0,inputs:[],name:"totalSupply",outputs:[{name:"",type:"uint256"}],payable:!1,type:"function"},{constant:!1,inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_value",type:"uint256"}],name:"transferFrom",outputs:[{name:"success",type:"bool"}],payable:!1,type:"function"},{constant:!0,inputs:[],name:"decimals",outputs:[{name:"",type:"uint256"}],payable:!1,type:"function"},{constant:!0,inputs:[{name:"_owner",type:"address"}],name:"balanceOf",outputs:[{name:"balance",type:"uint256"}],payable:!1,type:"function"},{constant:!0,inputs:[],name:"symbol",outputs:[{name:"",type:"string"}],payable:!1,type:"function"},{constant:!1,inputs:[{name:"_to",type:"address"},{name:"_value",type:"uint256"}],name:"transfer",outputs:[{name:"success",type:"bool"}],payable:!1,type:"function"},{constant:!1,inputs:[{name:"_spender",type:"address"},{name:"_value",type:"uint256"},{name:"_extraData",type:"bytes"}],name:"approveAndCall",outputs:[{name:"success",type:"bool"}],payable:!1,type:"function"},{constant:!0,inputs:[{name:"_owner",type:"address"},{name:"_spender",type:"address"}],name:"allowance",outputs:[{name:"remaining",type:"uint256"}],payable:!1,type:"function"},{inputs:[{name:"_initialAmount",type:"uint256"},{name:"_tokenName",type:"string"},{name:"_decimalUnits",type:"uint8"},{name:"_tokenSymbol",type:"string"}],type:"constructor"},{payable:!1,type:"fallback"}],erc721Abi=[{constant:!0,inputs:[{name:"interfaceID",type:"bytes4"}],name:"supportsInterface",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"name",outputs:[{name:"_name",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"_tokenId",type:"uint256"}],name:"getApproved",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_approved",type:"address"},{name:"_tokenId",type:"uint256"}],name:"approve",outputs:[],payable:!0,stateMutability:"payable",type:"function"},{constant:!0,inputs:[],name:"totalSupply",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_tokenId",type:"uint256"}],name:"transferFrom",outputs:[],payable:!0,stateMutability:"payable",type:"function"},{constant:!0,inputs:[{name:"_owner",type:"address"},{name:"_index",type:"uint256"}],name:"tokenOfOwnerByIndex",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_tokenId",type:"uint256"}],name:"safeTransferFrom",outputs:[],payable:!0,stateMutability:"payable",type:"function"},{constant:!0,inputs:[{name:"_index",type:"uint256"}],name:"tokenByIndex",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"_tokenId",type:"uint256"}],name:"ownerOf",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"_owner",type:"address"}],name:"balanceOf",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"symbol",outputs:[{name:"_symbol",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"_tokenId",type:"uint256"}],name:"tokenURI",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"}],erc1155Abi=[{inputs:[{internalType:"address",name:"_owner",type:"address"},{internalType:"uint256",name:"_id",type:"uint256"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address[]",name:"_owners",type:"address[]"},{internalType:"uint256[]",name:"_ids",type:"uint256[]"}],name:"balanceOfBatch",outputs:[{internalType:"uint256[]",name:"",type:"uint256[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_owner",type:"address"},{internalType:"address",name:"_operator",type:"address"}],name:"isApprovedForAll",outputs:[{internalType:"bool",name:"isOperator",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_from",type:"address"},{internalType:"address",name:"_to",type:"address"},{internalType:"uint256",name:"_id",type:"uint256"},{internalType:"uint256",name:"_amount",type:"uint256"},{internalType:"bytes",name:"_data",type:"bytes"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_operator",type:"address"},{internalType:"bool",name:"_approved",type:"bool"}],name:"setApprovalForAll",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes4",name:"_interfaceID",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"uint256",name:"_id",type:"uint256"}],name:"uri",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"}],METHOD_TYPES={GET_ACCOUNTS:"eth_accounts",ETH_TRANSACTION:"eth_sendTransaction",ETH_REQUEST_ACCOUNTS:"eth_requestAccounts",ETH_SEND_RAW_TRANSACTION:"eth_sendRawTransaction",ETH_SIGN:"eth_sign",ETH_SIGN_TYPED_DATA:"eth_signTypedData",ETH_SIGN_TYPED_DATA_V3:"eth_signTypedData_v3",ETH_SIGN_TYPED_DATA_V4:"eth_signTypedData_v4",PERSONAL_SIGN:"personal_sign",ETH_GET_TRANSACTION_COUNT:"eth_getTransactionCount",ETH_GET_TRANSACTION_BY_HASH:"eth_getTransactionByHash",ETH_GET_ENCRYPTION_PUBLIC_KEY:"eth_getEncryptionPublicKey",ETH_DECRYPT:"eth_decrypt",ETH_GET_TRANSACTION_RECEIPT:"eth_getTransactionReceipt",WATCH_ASSET:"wallet_watchAsset",ETH_GET_BLOCK_BY_HASH:"eth_getBlockByHash",ETH_GET_CODE:"eth_getCode",ETH_GET_GAS_PRICE:"eth_gasPrice",SWITCH_CHAIN:"wallet_switchEthereumChain",ADD_CHAIN:"wallet_addEthereumChain"};new Interface(erc20Abi);new Interface(erc721Abi);new Interface(erc1155Abi);(tr=>{let er=!1,rr=null;const nr=()=>{rr&&window.clearTimeout(rr),er=!1,rr=window.setTimeout(()=>{er=!0},tr*1e3)};typeof window<"u"&&typeof document<"u"&&(window.addEventListener("load",nr),document.addEventListener("mousemove",nr),document.addEventListener("keydown",nr));function ir(){return er}return{checkIfIdle:ir}})(60*3);addHexPrefix("5208"),addHexPrefix("186a0");new BigNumber("1000000000000000000");new BigNumber("1000000000");new BigNumber("1");var fastDeepEqual=function tr(er,rr){if(er===rr)return!0;if(er&&rr&&typeof er=="object"&&typeof rr=="object"){if(er.constructor!==rr.constructor)return!1;var nr,ir,sr;if(Array.isArray(er)){if(nr=er.length,nr!=rr.length)return!1;for(ir=nr;ir--!==0;)if(!tr(er[ir],rr[ir]))return!1;return!0}if(er.constructor===RegExp)return er.source===rr.source&&er.flags===rr.flags;if(er.valueOf!==Object.prototype.valueOf)return er.valueOf()===rr.valueOf();if(er.toString!==Object.prototype.toString)return er.toString()===rr.toString();if(sr=Object.keys(er),nr=sr.length,nr!==Object.keys(rr).length)return!1;for(ir=nr;ir--!==0;)if(!Object.prototype.hasOwnProperty.call(rr,sr[ir]))return!1;for(ir=nr;ir--!==0;){var or=sr[ir];if(!tr(er[or],rr[or]))return!1}return!0}return er!==er&&rr!==rr};const dequal=getDefaultExportFromCjs(fastDeepEqual);function isStream(tr){return tr!==null&&typeof tr=="object"&&typeof tr.pipe=="function"}function isWritableStream(tr){return isStream(tr)&&tr.writable!==!1&&typeof tr._write=="function"&&typeof tr._writableState=="object"}function isReadableStream(tr){return isStream(tr)&&tr.readable!==!1&&typeof tr._read=="function"&&typeof tr._readableState=="object"}function isDuplexStream(tr){return isWritableStream(tr)&&isReadableStream(tr)}var messages={errors:{disconnected:()=>"Web3Auth: Lost connection to Web3Auth.",permanentlyDisconnected:()=>"Web3Auth: Disconnected from iframe. Page reload required.",unsupportedSync:tr=>`Web3Auth: The Web3Auth Ethereum provider does not support synchronous methods like ${tr} without a callback parameter.`,invalidDuplexStream:()=>"Must provide a Node.js-style duplex stream.",invalidOptions:tr=>`Invalid options. Received: { maxEventListeners: ${tr}}`,invalidRequestArgs:()=>"Expected a single, non-array, object argument.",invalidRequestMethod:()=>"'args.method' must be a non-empty string.",invalidRequestParams:()=>"'args.params' must be an object or array if provided.",invalidLoggerObject:()=>"'args.logger' must be an object if provided.",invalidLoggerMethod:tr=>`'args.logger' must include required method '${tr}'.`},info:{connected:tr=>`Web3Auth: Connected to chain with ID "${tr}".`},warnings:{}},log=log$3.getLogger("ws-embed");function createErrorMiddleware(){return(tr,er,rr)=>{(typeof tr.method!="string"||!tr.method)&&(er.error=rpcErrors.invalidRequest({message:"The request 'method' must be a non-empty string.",data:_objectSpread2(_objectSpread2({},tr||{}),{},{cause:"The request 'method' must be a non-empty string."})})),rr(nr=>{const{error:ir}=er;return ir&&log.error(`Ws-Embed - RPC Error: ${ir.message}`,ir),nr()})}}function logStreamDisconnectWarning(tr,er,rr){let nr=`Web3Auth: Lost connection to "${tr}".`;er!=null&&er.stack&&(nr+=`
${er.stack}`),log.warn(nr),rr&&rr.listenerCount("error")>0&&rr.emit("error",nr)}const EMITTED_NOTIFICATIONS=["eth_subscription"];class BaseProvider extends SafeEventEmitter{constructor(er,{maxEventListeners:rr=100,jsonRpcStreamName:nr="provider"}){if(super(),_defineProperty(this,"rpcEngine",void 0),_defineProperty(this,"jsonRpcConnectionEvents",void 0),_defineProperty(this,"isWeb3Auth",void 0),_defineProperty(this,"state",void 0),!isDuplexStream(er))throw new Error(messages.errors.invalidDuplexStream());this.isWeb3Auth=!0,this.setMaxListeners(rr),this.handleConnect=this.handleConnect.bind(this),this.handleDisconnect=this.handleDisconnect.bind(this),this.handleStreamDisconnect=this.handleStreamDisconnect.bind(this),this.rpcRequest=this.rpcRequest.bind(this),this.initializeState=this.initializeState.bind(this),this.request=this.request.bind(this),this.sendAsync=this.sendAsync.bind(this),this.send=this.send.bind(this);const ir=new ObjectMultiplex;pump$1(er,ir,er,this.handleStreamDisconnect.bind(this,"Web3Auth")),ir.ignoreStream("phishing");const sr=createStreamMiddleware();pump$1(sr.stream,ir.createStream(nr),sr.stream,this.handleStreamDisconnect.bind(this,"Web3Auth RpcProvider"));const or=new JRPCEngine;or.push(createIdRemapMiddleware()),or.push(createErrorMiddleware()),or.push(createLoggerMiddleware({origin:location.origin})),or.push(sr.middleware),this.rpcEngine=or,this.jsonRpcConnectionEvents=sr.events}async request(er){if(!er||typeof er!="object"||Array.isArray(er))throw rpcErrors.invalidRequest({message:messages.errors.invalidRequestArgs(),data:_objectSpread2(_objectSpread2({},er||{}),{},{cause:messages.errors.invalidRequestArgs()})});const{method:rr,params:nr}=er;if(typeof rr!="string"||rr.length===0)throw rpcErrors.invalidRequest({message:messages.errors.invalidRequestMethod(),data:_objectSpread2(_objectSpread2({},er||{}),{},{cause:messages.errors.invalidRequestArgs()})});if(nr!==void 0&&!Array.isArray(nr)&&(typeof nr!="object"||nr===null))throw rpcErrors.invalidRequest({message:messages.errors.invalidRequestParams(),data:_objectSpread2(_objectSpread2({},er||{}),{},{cause:messages.errors.invalidRequestArgs()})});return new Promise((ir,sr)=>{this.rpcRequest({method:rr,params:nr},getRpcPromiseCallback(ir,sr))})}send(er,rr){this.rpcRequest(er,rr)}sendAsync(er){return new Promise((rr,nr)=>{this.rpcRequest(er,getRpcPromiseCallback(rr,nr))})}handleStreamDisconnect(er,rr){logStreamDisconnectWarning(er,rr,this),this.handleDisconnect(!1,rr?rr.message:void 0)}}const WS_EMBED_BUILD_ENV={PRODUCTION:"production",STAGING:"staging",DEVELOPMENT:"development",TESTING:"testing"},BUTTON_POSITION={BOTTOM_LEFT:"bottom-left",TOP_LEFT:"top-left",BOTTOM_RIGHT:"bottom-right",TOP_RIGHT:"top-right"};class PopupHandler extends SafeEventEmitter{constructor({url:er,target:rr,features:nr,timeout:ir=3e4}){super(),_defineProperty(this,"url",void 0),_defineProperty(this,"target",void 0),_defineProperty(this,"features",void 0),_defineProperty(this,"window",void 0),_defineProperty(this,"windowTimer",void 0),_defineProperty(this,"iClosedWindow",void 0),_defineProperty(this,"timeout",void 0),this.url=er,this.target=rr||"_blank",this.features=nr||getPopupFeatures$1(FEATURES_DEFAULT_POPUP_WINDOW),this.window=void 0,this.windowTimer=void 0,this.iClosedWindow=!1,this.timeout=ir,this._setupTimer()}_setupTimer(){this.windowTimer=Number(setInterval(()=>{this.window&&this.window.closed&&(clearInterval(this.windowTimer),setTimeout(()=>{this.iClosedWindow||this.emit("close"),this.iClosedWindow=!1,this.window=void 0},this.timeout)),this.window===void 0&&clearInterval(this.windowTimer)},500))}open(){var er;this.window=window.open(this.url.href,this.target,this.features),(er=this.window)!==null&&er!==void 0&&er.focus&&this.window.focus()}close(){this.iClosedWindow=!0,this.window&&this.window.close()}redirect(er){er?window.location.replace(this.url.href):window.location.href=this.url.href}}class CommunicationProvider extends BaseProvider{constructor(er,{maxEventListeners:rr=100,jsonRpcStreamName:nr="provider"},ir){super(er,{maxEventListeners:rr,jsonRpcStreamName:nr}),_defineProperty(this,"tryWindowHandle",void 0),_defineProperty(this,"windowRefs",void 0),_defineProperty(this,"iframeUrl",void 0),_defineProperty(this,"iframeId",void 0),this.state=_objectSpread2(_objectSpread2({},CommunicationProvider.defaultState),ir),this.iframeUrl="",this.iframeId="",this.windowRefs=new Map,this.on("connect",()=>{this.state.isConnected=!0});const sr=or=>{const{method:ar,params:cr}=or;if(ar===COMMUNICATION_NOTIFICATIONS.IFRAME_STATUS){const{isFullScreen:lr,rid:ur}=cr;this.displayIframe({isFull:lr,rid:ur})}else if(ar===COMMUNICATION_NOTIFICATIONS.CLOSE_WINDOW)this.handleCloseWindow(cr);else if(ar===COMMUNICATION_NOTIFICATIONS.USER_LOGGED_IN){const{currentLoginProvider:lr}=cr;this.state.isLoggedIn=!0,this.state.currentLoginProvider=lr}else ar===COMMUNICATION_NOTIFICATIONS.USER_LOGGED_OUT&&(this.state.isLoggedIn=!1,this.state.currentLoginProvider=null,this.displayIframe())};this.jsonRpcConnectionEvents.on("notification",sr)}get isLoggedIn(){return this.state.isLoggedIn}get isIFrameFullScreen(){return this.state.isIFrameFullScreen}isConnected(){return this.state.isConnected}async initializeState(er){try{const{torusUrl:rr,torusIframeId:nr}=er;this.iframeUrl=rr,this.iframeId=nr;const{currentLoginProvider:ir,isLoggedIn:sr}=await this.request({method:COMMUNICATION_JRPC_METHODS.GET_PROVIDER_STATE,params:[]});sr&&this.handleConnect(ir,sr)}catch(rr){log.error("Web3Auth: Failed to get initial state. Please report this bug.",rr)}finally{log.info("initialized communication state"),this.state.initialized=!0,this.emit("_initialized")}}hideTorusButton(){this.state.widgetVisibility=!1,this.displayIframe()}showTorusButton(){this.state.widgetVisibility=!0,this.displayIframe()}displayIframe({isFull:er=!1,rid:rr=""}={}){const nr={};if(er)nr.display="block",nr.width="100%",nr.height="100%",nr.top="0px",nr.right="0px",nr.left="0px",nr.bottom="0px";else switch(nr.display=this.state.widgetVisibility?"block":"none",nr.height="70px",nr.width="70px",this.state.buttonPosition){case BUTTON_POSITION.TOP_LEFT:nr.top="0px",nr.left="0px",nr.right="auto",nr.bottom="auto";break;case BUTTON_POSITION.TOP_RIGHT:nr.top="0px",nr.right="0px",nr.left="auto",nr.bottom="auto";break;case BUTTON_POSITION.BOTTOM_RIGHT:nr.bottom="0px",nr.right="0px",nr.top="auto",nr.left="auto";break;case BUTTON_POSITION.BOTTOM_LEFT:default:nr.bottom="0px",nr.left="0px",nr.top="auto",nr.right="auto";break}const ir=document.getElementById(this.iframeId);Object.assign(ir.style,nr),this.state.isIFrameFullScreen=er,this.request({method:COMMUNICATION_JRPC_METHODS.IFRAME_STATUS,params:{isIFrameFullScreen:er,rid:rr}})}async handleWindow(er,{url:rr,target:nr,features:ir,timeout:sr}={}){const or=new URL(rr||`${this.iframeUrl}/redirect?windowId=${er}&sessionNamespace=${window.location.hostname}`),ar=new PopupHandler({url:or,target:nr,features:ir,timeout:sr});if(ar.open(),!ar.window){this.displayIframe({isFull:!0}),this.request({method:COMMUNICATION_JRPC_METHODS.WINDOW_BLOCKED,params:{windowId:er,finalUrl:or.href}});return}this.windowRefs.set(er,ar),ar.once("close",()=>{this.windowRefs.delete(er),this.request({method:COMMUNICATION_JRPC_METHODS.CLOSED_WINDOW,params:{windowId:er}})})}rpcRequest(er,rr){const nr=rr,ir=er;Array.isArray(ir)||ir.jsonrpc||(ir.jsonrpc="2.0"),this.rpcEngine.handle(ir,nr)}handleConnect(er,rr){this.state.isConnected||(this.state.isConnected=!0,this.emit("connect",{currentLoginProvider:er,isLoggedIn:rr}),log.debug(messages.info.connected(er)))}handleDisconnect(er,rr){if(this.state.isConnected||!this.state.isPermanentlyDisconnected&&!er){this.state.isConnected=!1;let nr;er?(nr=new EthereumProviderError$1(1013,rr||messages.errors.disconnected()),log.debug(nr)):(nr=new EthereumProviderError$1(1011,rr||messages.errors.permanentlyDisconnected()),log.error(nr),this.state.currentLoginProvider=null,this.state.isLoggedIn=!1,this.state.widgetVisibility=!1,this.state.isIFrameFullScreen=!1,this.state.isPermanentlyDisconnected=!0),this.emit("disconnect",nr)}}handleCloseWindow(er){const{windowId:rr}=er;this.windowRefs.has(rr)&&(this.windowRefs.get(rr).close(),this.windowRefs.delete(rr))}}_defineProperty(CommunicationProvider,"defaultState",{buttonPosition:"bottom-left",currentLoginProvider:null,isIFrameFullScreen:!1,widgetVisibility:!1,initialized:!1,isLoggedIn:!1,isPermanentlyDisconnected:!1,isConnected:!1,hasEmittedConnection:!1});const htmlToElement=tr=>{const er=window.document.createElement("template"),rr=tr.trim();return er.innerHTML=rr,er.content.firstChild};class TorusInPageProvider extends BaseProvider{constructor(er,{maxEventListeners:rr=100,jsonRpcStreamName:nr="provider"}){super(er,{maxEventListeners:rr,jsonRpcStreamName:nr}),_defineProperty(this,"chainId",void 0),_defineProperty(this,"selectedAddress",void 0),_defineProperty(this,"tryWindowHandle",void 0),this.state=_objectSpread2({},TorusInPageProvider.defaultState),this.selectedAddress=null,this.chainId=null,this.handleAccountsChanged=this.handleAccountsChanged.bind(this),this.handleChainChanged=this.handleChainChanged.bind(this),this.handleUnlockStateChanged=this.handleUnlockStateChanged.bind(this),this.on("connect",()=>{this.state.isConnected=!0});const ir=sr=>{const{method:or,params:ar}=sr;or===PROVIDER_NOTIFICATIONS.ACCOUNTS_CHANGED?this.handleAccountsChanged(ar):or===PROVIDER_NOTIFICATIONS.UNLOCK_STATE_CHANGED?this.handleUnlockStateChanged(ar):or===PROVIDER_NOTIFICATIONS.CHAIN_CHANGED?this.handleChainChanged(ar):EMITTED_NOTIFICATIONS.includes(or)&&(this.emit("data",sr),this.emit("notification",ar.result),this.emit("message",{type:or,data:ar}))};this.jsonRpcConnectionEvents.on("notification",ir)}isConnected(){return this.state.isConnected}async initializeState(){try{const{accounts:er,chainId:rr,isUnlocked:nr}=await this.request({method:PROVIDER_JRPC_METHODS.GET_PROVIDER_STATE,params:[]});this.emit("connect",{chainId:rr}),this.handleChainChanged({chainId:rr}),this.handleUnlockStateChanged({accounts:er,isUnlocked:nr}),this.handleAccountsChanged(er)}catch(er){log.error("WsEmbed: Failed to get initial state. Please report this bug.",er)}finally{log.info("initialized provider state"),this.state.initialized=!0,this.emit("_initialized")}}rpcRequest(er,rr,nr=!1){let ir=rr;const sr=er;if(!Array.isArray(sr)){if(sr.jsonrpc||(sr.jsonrpc="2.0"),sr.method==="eth_accounts"||sr.method==="eth_requestAccounts")ir=(or,ar)=>{this.handleAccountsChanged(ar.result||[],sr.method==="eth_accounts",nr),rr(or,ar)};else if(sr.method==="wallet_getProviderState"){this.rpcEngine.handle(er,ir);return}}this.tryWindowHandle(sr,ir)}handleConnect(er){this.state.isConnected||(this.state.isConnected=!0,this.emit("connect",{chainId:er}),log.debug(messages.info.connected(er)))}handleDisconnect(er,rr){if(this.state.isConnected||!this.state.isPermanentlyDisconnected&&!er){this.state.isConnected=!1;let nr;er?(nr=new EthereumProviderError$1(1013,rr||messages.errors.disconnected()),log.debug(nr)):(nr=new EthereumProviderError$1(1011,rr||messages.errors.permanentlyDisconnected()),log.error(nr),this.chainId=null,this.state.accounts=null,this.selectedAddress=null,this.state.isUnlocked=!1,this.state.isPermanentlyDisconnected=!0),this.emit("disconnect",nr)}}handleAccountsChanged(er,rr=!1,nr=!1){let ir=er;Array.isArray(ir)||(log.error("WsEmbed: Received non-array accounts parameter. Please report this bug.",ir),ir=[]);for(const sr of er)if(typeof sr!="string"){log.error("WsEmbed: Received non-string account. Please report this bug.",er),ir=[];break}dequal(this.state.accounts,ir)||(rr&&Array.isArray(this.state.accounts)&&this.state.accounts.length>0&&!nr&&log.error('WsEmbed: "eth_accounts" unexpectedly updated accounts. Please report this bug.',ir),this.state.accounts=ir,this.emit("accountsChanged",ir)),this.selectedAddress!==ir[0]&&(this.selectedAddress=ir[0]||null)}handleChainChanged({chainId:er}={}){if(!er){log.error("WsEmbed: Received invalid network parameters. Please report this bug.",{chainId:er});return}er==="loading"?this.handleDisconnect(!0):(this.handleConnect(er),er!==this.chainId&&(this.chainId=er,this.state.initialized&&this.emit("chainChanged",this.chainId)))}handleUnlockStateChanged({accounts:er,isUnlocked:rr}={}){if(typeof rr!="boolean"){log.error("WsEmbed: Received invalid isUnlocked parameter. Please report this bug.",{isUnlocked:rr});return}rr!==this.state.isUnlocked&&(this.state.isUnlocked=rr,this.handleAccountsChanged(er||[]))}}_defineProperty(TorusInPageProvider,"defaultState",{accounts:null,isConnected:!1,isUnlocked:!1,initialized:!1,isPermanentlyDisconnected:!1,hasEmittedConnection:!1});function imgExists(tr){return new Promise((er,rr)=>{try{const nr=document.createElement("img");nr.onload=()=>er(!0),nr.onerror=()=>er(!1),nr.src=tr}catch(nr){rr(nr)}})}const getSiteName=tr=>{const{document:er}=tr,rr=er.querySelector('head > meta[property="og:site_name"]');if(rr)return rr.content;const nr=er.querySelector('head > meta[name="title"]');return nr?nr.content:er.title&&er.title.length>0?er.title:tr.location.hostname};async function getSiteIcon(tr){try{const{document:er}=tr;let rr=er.querySelector('head > link[rel="shortcut icon"]');return rr&&await imgExists(rr.href)||(rr=Array.from(er.querySelectorAll('head > link[rel="icon"]')).find(nr=>!!nr.href),rr&&await imgExists(rr.href))?rr.href:""}catch{return""}}const getSiteMetadata=async()=>({name:getSiteName(window),icon:await getSiteIcon(window)}),version$1="2.0.23",addedVersion=`v${version$1.split(".")[0]}`,WALLET_URLS_DEFAULT={[WS_EMBED_BUILD_ENV.TESTING]:{url:"https://develop-wallet.web3auth.io",logLevel:"debug"},[WS_EMBED_BUILD_ENV.DEVELOPMENT]:{url:"http://localhost:4050",logLevel:"debug"},[WS_EMBED_BUILD_ENV.STAGING]:{url:`https://staging-wallet.web3auth.io/${addedVersion}`,logLevel:"debug"},[WS_EMBED_BUILD_ENV.PRODUCTION]:{url:`https://wallet.web3auth.io/${addedVersion}`,logLevel:"error"}};(async function tr(){try{if(typeof document>"u")return;const er=document.createElement("link"),{url:rr}=WALLET_URLS_DEFAULT.production;er.href=`${rr}/frame`,er.crossOrigin="anonymous",er.type="text/html",er.rel="prefetch",er.relList&&er.relList.supports&&er.relList.supports("prefetch")&&document.head.appendChild(er)}catch(er){log.warn(er)}})();const PROVIDER_UNSAFE_METHODS=new Set([METHOD_TYPES.ETH_DECRYPT,METHOD_TYPES.ETH_GET_ENCRYPTION_PUBLIC_KEY,METHOD_TYPES.ETH_SIGN,METHOD_TYPES.ETH_SIGN_TYPED_DATA,METHOD_TYPES.ETH_SIGN_TYPED_DATA_V3,METHOD_TYPES.ETH_SIGN_TYPED_DATA_V4,METHOD_TYPES.PERSONAL_SIGN,METHOD_TYPES.ETH_TRANSACTION,METHOD_TYPES.ADD_CHAIN,METHOD_TYPES.SWITCH_CHAIN]);class WsEmbed{constructor({modalZIndex:er=99999,web3AuthClientId:rr,web3AuthNetwork:nr}){_defineProperty(this,"isInitialized",void 0),_defineProperty(this,"modalZIndex",void 0),_defineProperty(this,"provider",void 0),_defineProperty(this,"widgetVisibility",void 0),_defineProperty(this,"communicationProvider",void 0),_defineProperty(this,"buttonPosition",void 0),_defineProperty(this,"web3AuthClientId",void 0),_defineProperty(this,"web3AuthNetwork",void 0),_defineProperty(this,"isPluginMode",void 0),_defineProperty(this,"confirmationStrategy",void 0),_defineProperty(this,"buildEnv",void 0),_defineProperty(this,"embedNonce",randomId()),this.isInitialized=!1,this.modalZIndex=er,this.web3AuthClientId=rr,this.web3AuthNetwork=nr}get isLoggedIn(){var er;return((er=this.communicationProvider)===null||er===void 0?void 0:er.isLoggedIn)||!1}get getBuildEnv(){return this.buildEnv}async init({buildEnv:er=WS_EMBED_BUILD_ENV.PRODUCTION,enableLogging:rr=!1,chainConfig:nr,walletUrls:ir,whiteLabel:sr,confirmationStrategy:or=CONFIRMATION_STRATEGY.DEFAULT}={}){if(this.isInitialized)throw new Error("Already initialized");this.buildEnv=er,this.confirmationStrategy=or;const{url:ar,logLevel:cr}=ir&&ir[er]?_objectSpread2(_objectSpread2({},WALLET_URLS_DEFAULT[er]),ir[er]):WALLET_URLS_DEFAULT[er];log.info(ar,"url loaded"),log.setDefaultLevel(cr),rr?log.enableAll():log.disableAll();const lr=new URL(ar);lr.pathname.endsWith("/")?lr.pathname+="frame":lr.pathname+="/frame";const ur=new URLSearchParams;ur.append("origin",window.location.origin),lr.hash=ur.toString();const dr=this.getTheme((sr==null?void 0:sr.mode)||THEME_MODES.light),yr=htmlToElement(`<iframe
        id="walletIframe-${this.embedNonce}"
        class="walletIframe-${this.embedNonce}"
        sandbox="allow-popups allow-scripts allow-same-origin allow-forms allow-modals allow-downloads"
        src="${lr.href}"
        style="display: none; position: fixed; top: 0; right: 0; width: 100%;
        height: 100%; border: none; border-radius: 0; z-index: ${this.modalZIndex.toString()};
        color-scheme: ${dr}"
        allow="clipboard-write"
      ></iframe>`);this.buttonPosition=(sr==null?void 0:sr.buttonPosition)||BUTTON_POSITION.BOTTOM_LEFT;const mr=await getSiteMetadata();return new Promise((wr,xr)=>{try{window.document.body.appendChild(yr);const Or=async Tr=>{Tr.origin===lr.origin&&Tr.data===SETUP_COMPLETE&&(window.removeEventListener("message",Or),yr.contentWindow.postMessage({chainConfig:nr,dappMetadata:mr,enableLogging:rr,web3AuthClientId:this.web3AuthClientId,web3AuthNetwork:this.web3AuthNetwork,whiteLabel:sr,confirmationStrategy:or},lr.origin),await this.setupWeb3({torusUrl:ar,walletIframe:yr}),this.widgetVisibility=(sr==null?void 0:sr.showWidgetButton)||!1,this.isInitialized=!0,wr())};window.addEventListener("message",Or)}catch(Or){xr(Or)}})}async login(er={}){if(!this.isInitialized)throw new Error("Call init() first");try{er.loginProvider||this.communicationProvider.displayIframe({isFull:!0});const rr=await new Promise((nr,ir)=>{this.provider.rpcRequest({method:"eth_requestAccounts",params:[er.loginProvider,er.login_hint]},getRpcPromiseCallback(nr,ir))});if(log.info("check: res",rr),Array.isArray(rr)&&rr.length>0)return this.widgetVisibility&&this.showTorusButton(),this.confirmationStrategy===CONFIRMATION_STRATEGY.AUTO_APPROVE&&log.warn("Confirmation strategy auto approve is not allowed on Embed Mode, using Default instead."),rr;throw new Error("Login failed")}catch(rr){throw log.error("login failed",rr),rr}finally{this.communicationProvider.displayIframe({isFull:!1})}}async loginWithSessionId(er){if(!this.isInitialized)throw new Error("Call init() first");if(!er.sessionId)throw new Error("sessionId is required");try{const rr=await this.communicationProvider.request({method:COMMUNICATION_JRPC_METHODS.LOGIN_WITH_SESSION_ID,params:[er.sessionId,er.sessionNamespace||""]});if(log.info("check: res",rr),rr.success)return this.isPluginMode=!0,this.widgetVisibility&&this.showTorusButton(),this.confirmationStrategy===CONFIRMATION_STRATEGY.POPUP&&log.warn("Confirmation strategy popup is not allowed on Plugin Mode, using Default instead."),rr.success;throw new Error("Login failed")}catch(rr){throw log.error("login with session id failed",rr),rr}}async logout(){if(!this.communicationProvider.isLoggedIn)throw new Error("Not logged in");await this.communicationProvider.request({method:COMMUNICATION_JRPC_METHODS.LOGOUT,params:[]}),this.hideTorusButton()}async cleanUp(){var er;(er=this.communicationProvider)!==null&&er!==void 0&&er.isLoggedIn&&await this.logout(),this.clearInit()}clearInit(){function er(nr){return nr instanceof Element||nr instanceof Document}const rr=window.document.getElementById(`walletIframe-${this.embedNonce}`);er(rr)&&rr.remove(),this.isInitialized=!1}hideTorusButton(){this.communicationProvider.hideTorusButton()}showTorusButton(){this.communicationProvider.showTorusButton()}async getUserInfo(){return await this.communicationProvider.request({method:COMMUNICATION_JRPC_METHODS.USER_INFO,params:[]})}async showWalletConnectScanner(){this.communicationProvider.displayIframe({isFull:!0}),await this.communicationProvider.request({method:COMMUNICATION_JRPC_METHODS.SHOW_WALLET_CONNECT,params:[]})}async showWalletUi(){this.communicationProvider.displayIframe({isFull:!0}),await this.communicationProvider.request({method:COMMUNICATION_JRPC_METHODS.SHOW_WALLET_UI,params:[]})}async showCheckout(){this.communicationProvider.displayIframe({isFull:!0});try{await this.communicationProvider.request({method:COMMUNICATION_JRPC_METHODS.SHOW_CHECKOUT,params:[]})}catch{this.communicationProvider.displayIframe({isFull:!1})}}getConfirmationStrategyFinal(er){let rr=this.confirmationStrategy;return!Array.isArray(er)&&PROVIDER_UNSAFE_METHODS.has(er.method)&&this.confirmationStrategy!==CONFIRMATION_STRATEGY.MODAL&&!this.isPluginMode&&(rr=CONFIRMATION_STRATEGY.POPUP),rr}getTheme(er){return er===THEME_MODES.light?"light":er===THEME_MODES.dark||window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}async setupWeb3(er){log.info("setupWeb3 running");const rr=new BasePostMessageStream({name:"embed_torus",target:"iframe_torus",targetWindow:er.walletIframe.contentWindow,targetOrigin:new URL(er.torusUrl).origin}),nr=new BasePostMessageStream({name:"embed_communication",target:"iframe_communication",targetWindow:er.walletIframe.contentWindow,targetOrigin:new URL(er.torusUrl).origin}),ir=new TorusInPageProvider(rr,{}),sr=new CommunicationProvider(nr,{},{buttonPosition:this.buttonPosition});ir.tryWindowHandle=(lr,ur)=>{const dr=lr;if(this.getConfirmationStrategyFinal(lr)===CONFIRMATION_STRATEGY.POPUP){const mr=randomId();sr.handleWindow(mr,{target:"_blank",features:getPopupFeatures$1(FEATURES_CONFIRM_WINDOW),timeout:500}),dr.windowId=mr}ir.rpcEngine.handle(dr,ur)},sr.tryWindowHandle=(lr,ur)=>{const dr=lr;if(this.getConfirmationStrategyFinal(lr)===CONFIRMATION_STRATEGY.POPUP){const mr=randomId();sr.handleWindow(mr,{target:"_blank",features:getPopupFeatures$1(FEATURES_PROVIDER_CHANGE_WINDOW),timeout:500}),dr.params.windowId=mr}sr.rpcEngine.handle(dr,ur)};const or=lr=>{const ur=ir[lr],dr=this;ir[lr]=function(mr,wr){const{method:xr,params:Or=[]}=mr;if(xr==="eth_requestAccounts"){if(!wr)return dr.login({loginProvider:Or[0]});dr.login({loginProvider:Or[0]}).then(Tr=>wr(null,Tr)).catch(Tr=>wr(Tr))}return ur.apply(this,[mr,wr])}};or("request"),or("sendAsync"),or("send");const ar=new Proxy(ir,{deleteProperty:()=>!0}),cr=new Proxy(sr,{deleteProperty:()=>!0});this.provider=ar,this.communicationProvider=cr,log.info("test setupWeb3 "),await Promise.all([ir.initializeState(),sr.initializeState(_objectSpread2(_objectSpread2({},er),{},{torusIframeId:er.walletIframe.id}))]),log.debug("WsEmbed - injected provider")}}class WalletServicesPlugin extends SafeEventEmitter{constructor(er={}){super(),_defineProperty(this,"name",EVM_PLUGINS.WALLET_SERVICES),_defineProperty(this,"status",PLUGIN_STATUS.DISCONNECTED),_defineProperty(this,"SUPPORTED_ADAPTERS",[WALLET_ADAPTERS.OPENLOGIN,WALLET_ADAPTERS.SFA]),_defineProperty(this,"pluginNamespace",PLUGIN_NAMESPACES.EIP155),_defineProperty(this,"wsEmbedInstance",void 0),_defineProperty(this,"provider",null),_defineProperty(this,"web3auth",null),_defineProperty(this,"isInitialized",!1),_defineProperty(this,"walletInitOptions",null);const{wsEmbedOpts:rr,walletInitOptions:nr}=er;this.wsEmbedInstance=new WsEmbed(rr||{}),this.walletInitOptions=nr||{}}get proxyProvider(){return this.wsEmbedInstance.provider?this.wsEmbedInstance.provider:null}async initWithWeb3Auth(er,rr){var nr;if(this.isInitialized)return;if(!er)throw WalletServicesPluginError.web3authRequired();if(er.provider&&!this.SUPPORTED_ADAPTERS.includes(er.connectedAdapterName))throw WalletServicesPluginError.notInitialized();if(er.coreOptions.chainConfig.chainNamespace!==this.pluginNamespace)throw WalletServicesPluginError.unsupportedChainNamespace();er.provider&&(this.provider=er.provider),this.web3auth=er;const ir=_objectSpread2(_objectSpread2({},rr),this.walletInitOptions.whiteLabel||{}),{logoDark:sr,logoLight:or}=ir||{};if(!sr||!or)throw WalletServicesPluginError.invalidParams("logoDark and logoLight are required in whiteLabel config");this.wsEmbedInstance.web3AuthClientId=this.web3auth.coreOptions.clientId,this.wsEmbedInstance.web3AuthNetwork=this.web3auth.coreOptions.web3AuthNetwork,this.subscribeToWeb3AuthEvents(er);const ar=er.coreOptions.chainConfig;if(!ar.blockExplorerUrl)throw WalletServicesPluginError.invalidParams("blockExplorerUrl is required in chainConfig");if(!ar.displayName)throw WalletServicesPluginError.invalidParams("displayName is required in chainConfig");if(!ar.logo)throw WalletServicesPluginError.invalidParams("logo is required in chainConfig");if(!ar.ticker)throw WalletServicesPluginError.invalidParams("ticker is required in chainConfig");if(!ar.tickerName)throw WalletServicesPluginError.invalidParams("tickerName is required in chainConfig");const cr=_objectSpread2(_objectSpread2({},this.walletInitOptions),{},{chainConfig:ar,enableLogging:(nr=this.web3auth.coreOptions)===null||nr===void 0?void 0:nr.enableLogging,whiteLabel:ir});await this.wsEmbedInstance.init(cr),this.isInitialized=!0,this.status=PLUGIN_STATUS.READY,this.emit(PLUGIN_EVENTS.READY)}initWithProvider(){throw new Error("Method not implemented.")}async connect({sessionId:er,sessionNamespace:rr}){if(!this.isInitialized)throw WalletServicesPluginError.notInitialized();if(this.emit(PLUGIN_EVENTS.CONNECTING),this.status=PLUGIN_STATUS.CONNECTING,!this.provider){var nr;(nr=this.web3auth)!==null&&nr!==void 0&&nr.provider&&(this.provider=this.web3auth.provider)}if(this.web3auth.status!==ADAPTER_STATUS.CONNECTED)throw WalletServicesPluginError.web3AuthNotConnected();if(!this.web3auth.provider)throw WalletServicesPluginError.providerRequired();if(!er)throw WalletServicesPluginError.web3AuthNotConnected();try{var ir;await this.wsEmbedInstance.loginWithSessionId({sessionId:er,sessionNamespace:rr}),(ir=this.walletInitOptions)!==null&&ir!==void 0&&(ir=ir.whiteLabel)!==null&&ir!==void 0&&ir.showWidgetButton&&this.wsEmbedInstance.showTorusButton(),this.subscribeToProviderEvents(this.provider),this.subscribeToWalletEvents(),this.emit(PLUGIN_EVENTS.CONNECTED),this.status=PLUGIN_STATUS.CONNECTED}catch(sr){log$3.error(sr),this.status=PLUGIN_STATUS.ERRORED,this.emit(PLUGIN_EVENTS.ERRORED,{error:sr.message||"Something went wrong"})}}async showWalletConnectScanner(){if(!this.wsEmbedInstance.isLoggedIn)throw WalletServicesPluginError.walletPluginNotConnected();await this.wsEmbedInstance.showWalletConnectScanner()}async showCheckout(){if(!this.wsEmbedInstance.isLoggedIn)throw WalletServicesPluginError.walletPluginNotConnected();await this.wsEmbedInstance.showCheckout()}async showWalletUi(){if(!this.wsEmbedInstance.isLoggedIn)throw WalletServicesPluginError.walletPluginNotConnected();await this.wsEmbedInstance.showWalletUi()}async disconnect(){if(this.wsEmbedInstance.isLoggedIn)await this.wsEmbedInstance.logout(),this.emit(PLUGIN_EVENTS.DISCONNECTED),this.status=PLUGIN_STATUS.DISCONNECTED;else throw WalletServicesPluginError.invalidSession("Wallet Services plugin is not connected")}subscribeToWalletEvents(){var er;(er=this.wsEmbedInstance)===null||er===void 0||er.provider.on("accountsChanged",(rr=[])=>{if(rr.length===0){var nr,ir;this.wsEmbedInstance.hideTorusButton(),((nr=this.web3auth)===null||nr===void 0?void 0:nr.status)===ADAPTER_STATUS.CONNECTED&&((ir=this.web3auth)===null||ir===void 0||ir.logout())}})}subscribeToProviderEvents(er){er.on("accountsChanged",(rr={accounts:[]})=>{this.setSelectedAddress(rr.accounts[0])}),er.on("chainChanged",rr=>{this.setChainID(parseInt(rr,16))}),er.on("disconnect",()=>{this.wsEmbedInstance.hideTorusButton()}),er.on("connect",()=>{var rr;(rr=this.walletInitOptions)!==null&&rr!==void 0&&(rr=rr.whiteLabel)!==null&&rr!==void 0&&rr.showWidgetButton&&this.wsEmbedInstance.showTorusButton()})}subscribeToWeb3AuthEvents(er){er.on(ADAPTER_EVENTS.CONNECTED,rr=>{if(this.provider=rr.provider||er.provider,!this.provider)throw WalletServicesPluginError.web3AuthNotConnected();this.subscribeToProviderEvents(this.provider)}),er.on(ADAPTER_EVENTS.DISCONNECTED,async()=>{this.provider=null,this.wsEmbedInstance.isLoggedIn&&await this.wsEmbedInstance.logout(),this.wsEmbedInstance.hideTorusButton()})}async sessionConfig(){if(!this.provider)throw WalletServicesPluginError.web3AuthNotConnected();const[er,rr,nr]=await Promise.all([this.provider.request({method:"eth_accounts"}),this.provider.request({method:"eth_chainId"}),this.provider.request({method:"eth_provider_config"})]);return{chainId:parseInt(rr,16),accounts:er,chainConfig:nr}}async walletServicesSessionConfig(){if(!this.wsEmbedInstance.provider)throw WalletServicesPluginError.web3AuthNotConnected();const[er,rr]=await Promise.all([this.wsEmbedInstance.provider.request({method:"eth_accounts"}),this.wsEmbedInstance.provider.request({method:"eth_chainId"})]);return{chainId:parseInt(rr,16),accounts:er}}async setSelectedAddress(er){var rr;if(this.web3auth.status!==ADAPTER_STATUS.CONNECTED)throw WalletServicesPluginError.web3AuthNotConnected();const nr=await this.walletServicesSessionConfig();if(er!==((rr=nr.accounts)===null||rr===void 0?void 0:rr[0]))throw WalletServicesPluginError.invalidSession()}async setChainID(er){const[rr,nr]=await Promise.all([this.sessionConfig(),this.walletServicesSessionConfig()]),{chainConfig:ir}=rr||{};if(!ir.blockExplorerUrl)throw WalletServicesPluginError.invalidParams("blockExplorerUrl is required in chainConfig");if(!ir.displayName)throw WalletServicesPluginError.invalidParams("displayName is required in chainConfig");if(!ir.logo)throw WalletServicesPluginError.invalidParams("logo is required in chainConfig");if(!ir.ticker)throw WalletServicesPluginError.invalidParams("ticker is required in chainConfig");if(!ir.tickerName)throw WalletServicesPluginError.invalidParams("tickerName is required in chainConfig");if(er!==nr.chainId&&ir)try{var sr,or;await((sr=this.wsEmbedInstance.provider)===null||sr===void 0?void 0:sr.request({method:"wallet_addEthereumChain",params:[{chainId:ir.chainId,chainName:ir.displayName,rpcUrls:[ir.rpcTarget],blockExplorerUrls:[ir.blockExplorerUrl],nativeCurrency:{name:ir.tickerName,symbol:ir.ticker,decimals:ir.decimals||18},iconUrls:[ir.logo]}]}).catch(()=>{log$3.error("WalletServicesPlugin: Error adding chain")})),await((or=this.wsEmbedInstance.provider)===null||or===void 0?void 0:or.request({method:"wallet_switchEthereumChain",params:[{chainId:ir.chainId}]}))}catch{log$3.error("WalletServicesPlugin: Error switching chain")}}}var dist={},CoinbaseWalletSDK$2={},walletLogo$1={};Object.defineProperty(walletLogo$1,"__esModule",{value:!0});walletLogo$1.walletLogo=void 0;const walletLogo=(tr,er)=>{let rr;switch(tr){case"standard":return rr=er,`data:image/svg+xml,%3Csvg width='${er}' height='${rr}' viewBox='0 0 1024 1024' fill='none' xmlns='http://www.w3.org/2000/svg'%3E %3Crect width='1024' height='1024' fill='%230052FF'/%3E %3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M152 512C152 710.823 313.177 872 512 872C710.823 872 872 710.823 872 512C872 313.177 710.823 152 512 152C313.177 152 152 313.177 152 512ZM420 396C406.745 396 396 406.745 396 420V604C396 617.255 406.745 628 420 628H604C617.255 628 628 617.255 628 604V420C628 406.745 617.255 396 604 396H420Z' fill='white'/%3E %3C/svg%3E `;case"circle":return rr=er,`data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='${er}' height='${rr}' viewBox='0 0 999.81 999.81'%3E%3Cdefs%3E%3Cstyle%3E.cls-1%7Bfill:%230052fe;%7D.cls-2%7Bfill:%23fefefe;%7D.cls-3%7Bfill:%230152fe;%7D%3C/style%3E%3C/defs%3E%3Cpath class='cls-1' d='M655-115.9h56c.83,1.59,2.36.88,3.56,1a478,478,0,0,1,75.06,10.42C891.4-81.76,978.33-32.58,1049.19,44q116.7,126,131.94,297.61c.38,4.14-.34,8.53,1.78,12.45v59c-1.58.84-.91,2.35-1,3.56a482.05,482.05,0,0,1-10.38,74.05c-24,106.72-76.64,196.76-158.83,268.93s-178.18,112.82-287.2,122.6c-4.83.43-9.86-.25-14.51,1.77H654c-1-1.68-2.69-.91-4.06-1a496.89,496.89,0,0,1-105.9-18.59c-93.54-27.42-172.78-77.59-236.91-150.94Q199.34,590.1,184.87,426.58c-.47-5.19.25-10.56-1.77-15.59V355c1.68-1,.91-2.7,1-4.06a498.12,498.12,0,0,1,18.58-105.9c26-88.75,72.64-164.9,140.6-227.57q126-116.27,297.21-131.61C645.32-114.57,650.35-113.88,655-115.9Zm377.92,500c0-192.44-156.31-349.49-347.56-350.15-194.13-.68-350.94,155.13-352.29,347.42-1.37,194.55,155.51,352.1,348.56,352.47C876.15,734.23,1032.93,577.84,1032.93,384.11Z' transform='translate(-183.1 115.9)'/%3E%3Cpath class='cls-2' d='M1032.93,384.11c0,193.73-156.78,350.12-351.29,349.74-193-.37-349.93-157.92-348.56-352.47C334.43,189.09,491.24,33.28,685.37,34,876.62,34.62,1032.94,191.67,1032.93,384.11ZM683,496.81q43.74,0,87.48,0c15.55,0,25.32-9.72,25.33-25.21q0-87.48,0-175c0-15.83-9.68-25.46-25.59-25.46H595.77c-15.88,0-25.57,9.64-25.58,25.46q0,87.23,0,174.45c0,16.18,9.59,25.7,25.84,25.71Z' transform='translate(-183.1 115.9)'/%3E%3Cpath class='cls-3' d='M683,496.81H596c-16.25,0-25.84-9.53-25.84-25.71q0-87.23,0-174.45c0-15.82,9.7-25.46,25.58-25.46H770.22c15.91,0,25.59,9.63,25.59,25.46q0,87.47,0,175c0,15.49-9.78,25.2-25.33,25.21Q726.74,496.84,683,496.81Z' transform='translate(-183.1 115.9)'/%3E%3C/svg%3E`;case"text":return rr=(.1*er).toFixed(2),`data:image/svg+xml,%3Csvg width='${er}' height='${rr}' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 528.15 53.64'%3E%3Cdefs%3E%3Cstyle%3E.cls-1%7Bfill:%230052ff;%7D%3C/style%3E%3C/defs%3E%3Ctitle%3ECoinbase_Wordmark_SubBrands_ALL%3C/title%3E%3Cpath class='cls-1' d='M164.45,15a15,15,0,0,0-11.74,5.4V0h-8.64V52.92h8.5V48a15,15,0,0,0,11.88,5.62c10.37,0,18.21-8.21,18.21-19.3S174.67,15,164.45,15Zm-1.3,30.67c-6.19,0-10.73-4.83-10.73-11.31S157,23,163.22,23s10.66,4.82,10.66,11.37S169.34,45.65,163.15,45.65Zm83.31-14.91-6.34-.93c-3-.43-5.18-1.44-5.18-3.82,0-2.59,2.8-3.89,6.62-3.89,4.18,0,6.84,1.8,7.42,4.76h8.35c-.94-7.49-6.7-11.88-15.55-11.88-9.15,0-15.2,4.68-15.2,11.3,0,6.34,4,10,12,11.16l6.33.94c3.1.43,4.83,1.65,4.83,4,0,2.95-3,4.17-7.2,4.17-5.12,0-8-2.09-8.43-5.25h-8.49c.79,7.27,6.48,12.38,16.84,12.38,9.44,0,15.7-4.32,15.7-11.74C258.12,35.28,253.58,31.82,246.46,30.74Zm-27.65-2.3c0-8.06-4.9-13.46-15.27-13.46-9.79,0-15.26,5-16.34,12.6h8.57c.43-3,2.73-5.4,7.63-5.4,4.39,0,6.55,1.94,6.55,4.32,0,3.09-4,3.88-8.85,4.39-6.63.72-14.84,3-14.84,11.66,0,6.7,5,11,12.89,11,6.19,0,10.08-2.59,12-6.7.28,3.67,3,6.05,6.84,6.05h5v-7.7h-4.25Zm-8.5,9.36c0,5-4.32,8.64-9.57,8.64-3.24,0-6-1.37-6-4.25,0-3.67,4.39-4.68,8.42-5.11s6-1.22,7.13-2.88ZM281.09,15c-11.09,0-19.23,8.35-19.23,19.36,0,11.6,8.72,19.3,19.37,19.3,9,0,16.06-5.33,17.86-12.89h-9c-1.3,3.31-4.47,5.19-8.71,5.19-5.55,0-9.72-3.46-10.66-9.51H299.3V33.12C299.3,22.46,291.53,15,281.09,15Zm-9.87,15.26c1.37-5.18,5.26-7.7,9.72-7.7,4.9,0,8.64,2.8,9.51,7.7ZM19.3,23a9.84,9.84,0,0,1,9.5,7h9.14c-1.65-8.93-9-15-18.57-15A19,19,0,0,0,0,34.34c0,11.09,8.28,19.3,19.37,19.3,9.36,0,16.85-6,18.5-15H28.8a9.75,9.75,0,0,1-9.43,7.06c-6.27,0-10.66-4.83-10.66-11.31S13,23,19.3,23Zm41.11-8A19,19,0,0,0,41,34.34c0,11.09,8.28,19.3,19.37,19.3A19,19,0,0,0,79.92,34.27C79.92,23.33,71.64,15,60.41,15Zm.07,30.67c-6.19,0-10.73-4.83-10.73-11.31S54.22,23,60.41,23s10.8,4.89,10.8,11.37S66.67,45.65,60.48,45.65ZM123.41,15c-5.62,0-9.29,2.3-11.45,5.54V15.7h-8.57V52.92H112V32.69C112,27,115.63,23,121,23c5,0,8.06,3.53,8.06,8.64V52.92h8.64V31C137.66,21.6,132.84,15,123.41,15ZM92,.36a5.36,5.36,0,0,0-5.55,5.47,5.55,5.55,0,0,0,11.09,0A5.35,5.35,0,0,0,92,.36Zm-9.72,23h5.4V52.92h8.64V15.7h-14Zm298.17-7.7L366.2,52.92H372L375.29,44H392l3.33,8.88h6L386.87,15.7ZM377,39.23l6.45-17.56h.1l6.56,17.56ZM362.66,15.7l-7.88,29h-.11l-8.14-29H341l-8,28.93h-.1l-8-28.87H319L329.82,53h5.45l8.19-29.24h.11L352,53h5.66L368.1,15.7Zm135.25,0v4.86h12.32V52.92h5.6V20.56h12.32V15.7ZM467.82,52.92h25.54V48.06H473.43v-12h18.35V31.35H473.43V20.56h19.93V15.7H467.82ZM443,15.7h-5.6V52.92h24.32V48.06H443Zm-30.45,0h-5.61V52.92h24.32V48.06H412.52Z'/%3E%3C/svg%3E`;case"textWithLogo":return rr=(.25*er).toFixed(2),`data:image/svg+xml,%3Csvg width='${er}' height='${rr}' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 308.44 77.61'%3E%3Cdefs%3E%3Cstyle%3E.cls-1%7Bfill:%230052ff;%7D%3C/style%3E%3C/defs%3E%3Cpath class='cls-1' d='M142.94,20.2l-7.88,29H135l-8.15-29h-5.55l-8,28.93h-.11l-8-28.87H99.27l10.84,37.27h5.44l8.2-29.24h.1l8.41,29.24h5.66L148.39,20.2Zm17.82,0L146.48,57.42h5.82l3.28-8.88h16.65l3.34,8.88h6L167.16,20.2Zm-3.44,23.52,6.45-17.55h.11l6.56,17.55ZM278.2,20.2v4.86h12.32V57.42h5.6V25.06h12.32V20.2ZM248.11,57.42h25.54V52.55H253.71V40.61h18.35V35.85H253.71V25.06h19.94V20.2H248.11ZM223.26,20.2h-5.61V57.42H242V52.55H223.26Zm-30.46,0h-5.6V57.42h24.32V52.55H192.8Zm-154,38A19.41,19.41,0,1,1,57.92,35.57H77.47a38.81,38.81,0,1,0,0,6.47H57.92A19.39,19.39,0,0,1,38.81,58.21Z'/%3E%3C/svg%3E`;case"textLight":return rr=(.1*er).toFixed(2),`data:image/svg+xml,%3Csvg width='${er}' height='${rr}' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 528.15 53.64'%3E%3Cdefs%3E%3Cstyle%3E.cls-1%7Bfill:%23fefefe;%7D%3C/style%3E%3C/defs%3E%3Ctitle%3ECoinbase_Wordmark_SubBrands_ALL%3C/title%3E%3Cpath class='cls-1' d='M164.45,15a15,15,0,0,0-11.74,5.4V0h-8.64V52.92h8.5V48a15,15,0,0,0,11.88,5.62c10.37,0,18.21-8.21,18.21-19.3S174.67,15,164.45,15Zm-1.3,30.67c-6.19,0-10.73-4.83-10.73-11.31S157,23,163.22,23s10.66,4.82,10.66,11.37S169.34,45.65,163.15,45.65Zm83.31-14.91-6.34-.93c-3-.43-5.18-1.44-5.18-3.82,0-2.59,2.8-3.89,6.62-3.89,4.18,0,6.84,1.8,7.42,4.76h8.35c-.94-7.49-6.7-11.88-15.55-11.88-9.15,0-15.2,4.68-15.2,11.3,0,6.34,4,10,12,11.16l6.33.94c3.1.43,4.83,1.65,4.83,4,0,2.95-3,4.17-7.2,4.17-5.12,0-8-2.09-8.43-5.25h-8.49c.79,7.27,6.48,12.38,16.84,12.38,9.44,0,15.7-4.32,15.7-11.74C258.12,35.28,253.58,31.82,246.46,30.74Zm-27.65-2.3c0-8.06-4.9-13.46-15.27-13.46-9.79,0-15.26,5-16.34,12.6h8.57c.43-3,2.73-5.4,7.63-5.4,4.39,0,6.55,1.94,6.55,4.32,0,3.09-4,3.88-8.85,4.39-6.63.72-14.84,3-14.84,11.66,0,6.7,5,11,12.89,11,6.19,0,10.08-2.59,12-6.7.28,3.67,3,6.05,6.84,6.05h5v-7.7h-4.25Zm-8.5,9.36c0,5-4.32,8.64-9.57,8.64-3.24,0-6-1.37-6-4.25,0-3.67,4.39-4.68,8.42-5.11s6-1.22,7.13-2.88ZM281.09,15c-11.09,0-19.23,8.35-19.23,19.36,0,11.6,8.72,19.3,19.37,19.3,9,0,16.06-5.33,17.86-12.89h-9c-1.3,3.31-4.47,5.19-8.71,5.19-5.55,0-9.72-3.46-10.66-9.51H299.3V33.12C299.3,22.46,291.53,15,281.09,15Zm-9.87,15.26c1.37-5.18,5.26-7.7,9.72-7.7,4.9,0,8.64,2.8,9.51,7.7ZM19.3,23a9.84,9.84,0,0,1,9.5,7h9.14c-1.65-8.93-9-15-18.57-15A19,19,0,0,0,0,34.34c0,11.09,8.28,19.3,19.37,19.3,9.36,0,16.85-6,18.5-15H28.8a9.75,9.75,0,0,1-9.43,7.06c-6.27,0-10.66-4.83-10.66-11.31S13,23,19.3,23Zm41.11-8A19,19,0,0,0,41,34.34c0,11.09,8.28,19.3,19.37,19.3A19,19,0,0,0,79.92,34.27C79.92,23.33,71.64,15,60.41,15Zm.07,30.67c-6.19,0-10.73-4.83-10.73-11.31S54.22,23,60.41,23s10.8,4.89,10.8,11.37S66.67,45.65,60.48,45.65ZM123.41,15c-5.62,0-9.29,2.3-11.45,5.54V15.7h-8.57V52.92H112V32.69C112,27,115.63,23,121,23c5,0,8.06,3.53,8.06,8.64V52.92h8.64V31C137.66,21.6,132.84,15,123.41,15ZM92,.36a5.36,5.36,0,0,0-5.55,5.47,5.55,5.55,0,0,0,11.09,0A5.35,5.35,0,0,0,92,.36Zm-9.72,23h5.4V52.92h8.64V15.7h-14Zm298.17-7.7L366.2,52.92H372L375.29,44H392l3.33,8.88h6L386.87,15.7ZM377,39.23l6.45-17.56h.1l6.56,17.56ZM362.66,15.7l-7.88,29h-.11l-8.14-29H341l-8,28.93h-.1l-8-28.87H319L329.82,53h5.45l8.19-29.24h.11L352,53h5.66L368.1,15.7Zm135.25,0v4.86h12.32V52.92h5.6V20.56h12.32V15.7ZM467.82,52.92h25.54V48.06H473.43v-12h18.35V31.35H473.43V20.56h19.93V15.7H467.82ZM443,15.7h-5.6V52.92h24.32V48.06H443Zm-30.45,0h-5.61V52.92h24.32V48.06H412.52Z'/%3E%3C/svg%3E`;case"textWithLogoLight":return rr=(.25*er).toFixed(2),`data:image/svg+xml,%3Csvg width='${er}' height='${rr}' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 308.44 77.61'%3E%3Cdefs%3E%3Cstyle%3E.cls-1%7Bfill:%23fefefe;%7D%3C/style%3E%3C/defs%3E%3Cpath class='cls-1' d='M142.94,20.2l-7.88,29H135l-8.15-29h-5.55l-8,28.93h-.11l-8-28.87H99.27l10.84,37.27h5.44l8.2-29.24h.1l8.41,29.24h5.66L148.39,20.2Zm17.82,0L146.48,57.42h5.82l3.28-8.88h16.65l3.34,8.88h6L167.16,20.2Zm-3.44,23.52,6.45-17.55h.11l6.56,17.55ZM278.2,20.2v4.86h12.32V57.42h5.6V25.06h12.32V20.2ZM248.11,57.42h25.54V52.55H253.71V40.61h18.35V35.85H253.71V25.06h19.94V20.2H248.11ZM223.26,20.2h-5.61V57.42H242V52.55H223.26Zm-30.46,0h-5.6V57.42h24.32V52.55H192.8Zm-154,38A19.41,19.41,0,1,1,57.92,35.57H77.47a38.81,38.81,0,1,0,0,6.47H57.92A19.39,19.39,0,0,1,38.81,58.21Z'/%3E%3C/svg%3E`;default:return rr=er,`data:image/svg+xml,%3Csvg width='${er}' height='${rr}' viewBox='0 0 1024 1024' fill='none' xmlns='http://www.w3.org/2000/svg'%3E %3Crect width='1024' height='1024' fill='%230052FF'/%3E %3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M152 512C152 710.823 313.177 872 512 872C710.823 872 872 710.823 872 512C872 313.177 710.823 152 512 152C313.177 152 152 313.177 152 512ZM420 396C406.745 396 396 406.745 396 420V604C396 617.255 406.745 628 420 628H604C617.255 628 628 617.255 628 604V420C628 406.745 617.255 396 604 396H420Z' fill='white'/%3E %3C/svg%3E `}};walletLogo$1.walletLogo=walletLogo;var CoinbaseWalletProvider$1={},eventemitter3={exports:{}};(function(tr){var er=Object.prototype.hasOwnProperty,rr="~";function nr(){}Object.create&&(nr.prototype=Object.create(null),new nr().__proto__||(rr=!1));function ir(cr,lr,ur){this.fn=cr,this.context=lr,this.once=ur||!1}function sr(cr,lr,ur,dr,yr){if(typeof ur!="function")throw new TypeError("The listener must be a function");var mr=new ir(ur,dr||cr,yr),wr=rr?rr+lr:lr;return cr._events[wr]?cr._events[wr].fn?cr._events[wr]=[cr._events[wr],mr]:cr._events[wr].push(mr):(cr._events[wr]=mr,cr._eventsCount++),cr}function or(cr,lr){--cr._eventsCount===0?cr._events=new nr:delete cr._events[lr]}function ar(){this._events=new nr,this._eventsCount=0}ar.prototype.eventNames=function(){var lr=[],ur,dr;if(this._eventsCount===0)return lr;for(dr in ur=this._events)er.call(ur,dr)&&lr.push(rr?dr.slice(1):dr);return Object.getOwnPropertySymbols?lr.concat(Object.getOwnPropertySymbols(ur)):lr},ar.prototype.listeners=function(lr){var ur=rr?rr+lr:lr,dr=this._events[ur];if(!dr)return[];if(dr.fn)return[dr.fn];for(var yr=0,mr=dr.length,wr=new Array(mr);yr<mr;yr++)wr[yr]=dr[yr].fn;return wr},ar.prototype.listenerCount=function(lr){var ur=rr?rr+lr:lr,dr=this._events[ur];return dr?dr.fn?1:dr.length:0},ar.prototype.emit=function(lr,ur,dr,yr,mr,wr){var xr=rr?rr+lr:lr;if(!this._events[xr])return!1;var Or=this._events[xr],Tr=arguments.length,Ar,Nr;if(Or.fn){switch(Or.once&&this.removeListener(lr,Or.fn,void 0,!0),Tr){case 1:return Or.fn.call(Or.context),!0;case 2:return Or.fn.call(Or.context,ur),!0;case 3:return Or.fn.call(Or.context,ur,dr),!0;case 4:return Or.fn.call(Or.context,ur,dr,yr),!0;case 5:return Or.fn.call(Or.context,ur,dr,yr,mr),!0;case 6:return Or.fn.call(Or.context,ur,dr,yr,mr,wr),!0}for(Nr=1,Ar=new Array(Tr-1);Nr<Tr;Nr++)Ar[Nr-1]=arguments[Nr];Or.fn.apply(Or.context,Ar)}else{var Ur=Or.length,Dr;for(Nr=0;Nr<Ur;Nr++)switch(Or[Nr].once&&this.removeListener(lr,Or[Nr].fn,void 0,!0),Tr){case 1:Or[Nr].fn.call(Or[Nr].context);break;case 2:Or[Nr].fn.call(Or[Nr].context,ur);break;case 3:Or[Nr].fn.call(Or[Nr].context,ur,dr);break;case 4:Or[Nr].fn.call(Or[Nr].context,ur,dr,yr);break;default:if(!Ar)for(Dr=1,Ar=new Array(Tr-1);Dr<Tr;Dr++)Ar[Dr-1]=arguments[Dr];Or[Nr].fn.apply(Or[Nr].context,Ar)}}return!0},ar.prototype.on=function(lr,ur,dr){return sr(this,lr,ur,dr,!1)},ar.prototype.once=function(lr,ur,dr){return sr(this,lr,ur,dr,!0)},ar.prototype.removeListener=function(lr,ur,dr,yr){var mr=rr?rr+lr:lr;if(!this._events[mr])return this;if(!ur)return or(this,mr),this;var wr=this._events[mr];if(wr.fn)wr.fn===ur&&(!yr||wr.once)&&(!dr||wr.context===dr)&&or(this,mr);else{for(var xr=0,Or=[],Tr=wr.length;xr<Tr;xr++)(wr[xr].fn!==ur||yr&&!wr[xr].once||dr&&wr[xr].context!==dr)&&Or.push(wr[xr]);Or.length?this._events[mr]=Or.length===1?Or[0]:Or:or(this,mr)}return this},ar.prototype.removeAllListeners=function(lr){var ur;return lr?(ur=rr?rr+lr:lr,this._events[ur]&&or(this,ur)):(this._events=new nr,this._eventsCount=0),this},ar.prototype.off=ar.prototype.removeListener,ar.prototype.addListener=ar.prototype.on,ar.prefixed=rr,ar.EventEmitter=ar,tr.exports=ar})(eventemitter3);var eventemitter3Exports=eventemitter3.exports,error={},constants$2={};Object.defineProperty(constants$2,"__esModule",{value:!0});constants$2.errorValues=constants$2.standardErrorCodes=void 0;constants$2.standardErrorCodes={rpc:{invalidInput:-32e3,resourceNotFound:-32001,resourceUnavailable:-32002,transactionRejected:-32003,methodNotSupported:-32004,limitExceeded:-32005,parse:-32700,invalidRequest:-32600,methodNotFound:-32601,invalidParams:-32602,internal:-32603},provider:{userRejectedRequest:4001,unauthorized:4100,unsupportedMethod:4200,disconnected:4900,chainDisconnected:4901,unsupportedChain:4902}};constants$2.errorValues={"-32700":{standard:"JSON RPC 2.0",message:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."},"-32600":{standard:"JSON RPC 2.0",message:"The JSON sent is not a valid Request object."},"-32601":{standard:"JSON RPC 2.0",message:"The method does not exist / is not available."},"-32602":{standard:"JSON RPC 2.0",message:"Invalid method parameter(s)."},"-32603":{standard:"JSON RPC 2.0",message:"Internal JSON-RPC error."},"-32000":{standard:"EIP-1474",message:"Invalid input."},"-32001":{standard:"EIP-1474",message:"Resource not found."},"-32002":{standard:"EIP-1474",message:"Resource unavailable."},"-32003":{standard:"EIP-1474",message:"Transaction rejected."},"-32004":{standard:"EIP-1474",message:"Method not supported."},"-32005":{standard:"EIP-1474",message:"Request limit exceeded."},4001:{standard:"EIP-1193",message:"User rejected the request."},4100:{standard:"EIP-1193",message:"The requested account and/or method has not been authorized by the user."},4200:{standard:"EIP-1193",message:"The requested method is not supported by this Ethereum provider."},4900:{standard:"EIP-1193",message:"The provider is disconnected from all chains."},4901:{standard:"EIP-1193",message:"The provider is disconnected from the specified chain."},4902:{standard:"EIP-3085",message:"Unrecognized chain ID."}};var errors={},utils={};(function(tr){Object.defineProperty(tr,"__esModule",{value:!0}),tr.serialize=tr.getErrorCode=tr.isValidCode=tr.getMessageFromCode=tr.JSON_RPC_SERVER_ERROR_MESSAGE=void 0;const er=constants$2,rr="Unspecified error message.";tr.JSON_RPC_SERVER_ERROR_MESSAGE="Unspecified server error.";function nr(yr,mr=rr){if(yr&&Number.isInteger(yr)){const wr=yr.toString();if(ur(er.errorValues,wr))return er.errorValues[wr].message;if(cr(yr))return tr.JSON_RPC_SERVER_ERROR_MESSAGE}return mr}tr.getMessageFromCode=nr;function ir(yr){if(!Number.isInteger(yr))return!1;const mr=yr.toString();return!!(er.errorValues[mr]||cr(yr))}tr.isValidCode=ir;function sr(yr){var mr;if(typeof yr=="number")return yr;if(or(yr))return(mr=yr.code)!==null&&mr!==void 0?mr:yr.errorCode}tr.getErrorCode=sr;function or(yr){return typeof yr=="object"&&yr!==null&&(typeof yr.code=="number"||typeof yr.errorCode=="number")}function ar(yr,{shouldIncludeStack:mr=!1}={}){const wr={};if(yr&&typeof yr=="object"&&!Array.isArray(yr)&&ur(yr,"code")&&ir(yr.code)){const xr=yr;wr.code=xr.code,xr.message&&typeof xr.message=="string"?(wr.message=xr.message,ur(xr,"data")&&(wr.data=xr.data)):(wr.message=nr(wr.code),wr.data={originalError:lr(yr)})}else wr.code=er.standardErrorCodes.rpc.internal,wr.message=dr(yr,"message")?yr.message:rr,wr.data={originalError:lr(yr)};return mr&&(wr.stack=dr(yr,"stack")?yr.stack:void 0),wr}tr.serialize=ar;function cr(yr){return yr>=-32099&&yr<=-32e3}function lr(yr){return yr&&typeof yr=="object"&&!Array.isArray(yr)?Object.assign({},yr):yr}function ur(yr,mr){return Object.prototype.hasOwnProperty.call(yr,mr)}function dr(yr,mr){return typeof yr=="object"&&yr!==null&&mr in yr&&typeof yr[mr]=="string"}})(utils);Object.defineProperty(errors,"__esModule",{value:!0});errors.standardErrors=void 0;const constants_1$6=constants$2,utils_1$1=utils;errors.standardErrors={rpc:{parse:tr=>getEthJsonRpcError(constants_1$6.standardErrorCodes.rpc.parse,tr),invalidRequest:tr=>getEthJsonRpcError(constants_1$6.standardErrorCodes.rpc.invalidRequest,tr),invalidParams:tr=>getEthJsonRpcError(constants_1$6.standardErrorCodes.rpc.invalidParams,tr),methodNotFound:tr=>getEthJsonRpcError(constants_1$6.standardErrorCodes.rpc.methodNotFound,tr),internal:tr=>getEthJsonRpcError(constants_1$6.standardErrorCodes.rpc.internal,tr),server:tr=>{if(!tr||typeof tr!="object"||Array.isArray(tr))throw new Error("Ethereum RPC Server errors must provide single object argument.");const{code:er}=tr;if(!Number.isInteger(er)||er>-32005||er<-32099)throw new Error('"code" must be an integer such that: -32099 <= code <= -32005');return getEthJsonRpcError(er,tr)},invalidInput:tr=>getEthJsonRpcError(constants_1$6.standardErrorCodes.rpc.invalidInput,tr),resourceNotFound:tr=>getEthJsonRpcError(constants_1$6.standardErrorCodes.rpc.resourceNotFound,tr),resourceUnavailable:tr=>getEthJsonRpcError(constants_1$6.standardErrorCodes.rpc.resourceUnavailable,tr),transactionRejected:tr=>getEthJsonRpcError(constants_1$6.standardErrorCodes.rpc.transactionRejected,tr),methodNotSupported:tr=>getEthJsonRpcError(constants_1$6.standardErrorCodes.rpc.methodNotSupported,tr),limitExceeded:tr=>getEthJsonRpcError(constants_1$6.standardErrorCodes.rpc.limitExceeded,tr)},provider:{userRejectedRequest:tr=>getEthProviderError(constants_1$6.standardErrorCodes.provider.userRejectedRequest,tr),unauthorized:tr=>getEthProviderError(constants_1$6.standardErrorCodes.provider.unauthorized,tr),unsupportedMethod:tr=>getEthProviderError(constants_1$6.standardErrorCodes.provider.unsupportedMethod,tr),disconnected:tr=>getEthProviderError(constants_1$6.standardErrorCodes.provider.disconnected,tr),chainDisconnected:tr=>getEthProviderError(constants_1$6.standardErrorCodes.provider.chainDisconnected,tr),unsupportedChain:tr=>getEthProviderError(constants_1$6.standardErrorCodes.provider.unsupportedChain,tr),custom:tr=>{if(!tr||typeof tr!="object"||Array.isArray(tr))throw new Error("Ethereum Provider custom errors must provide single object argument.");const{code:er,message:rr,data:nr}=tr;if(!rr||typeof rr!="string")throw new Error('"message" must be a nonempty string');return new EthereumProviderError(er,rr,nr)}}};function getEthJsonRpcError(tr,er){const[rr,nr]=parseOpts(er);return new EthereumRpcError(tr,rr||(0,utils_1$1.getMessageFromCode)(tr),nr)}function getEthProviderError(tr,er){const[rr,nr]=parseOpts(er);return new EthereumProviderError(tr,rr||(0,utils_1$1.getMessageFromCode)(tr),nr)}function parseOpts(tr){if(tr){if(typeof tr=="string")return[tr];if(typeof tr=="object"&&!Array.isArray(tr)){const{message:er,data:rr}=tr;if(er&&typeof er!="string")throw new Error("Must specify string message.");return[er||void 0,rr]}}return[]}class EthereumRpcError extends Error{constructor(er,rr,nr){if(!Number.isInteger(er))throw new Error('"code" must be an integer.');if(!rr||typeof rr!="string")throw new Error('"message" must be a nonempty string.');super(rr),this.code=er,nr!==void 0&&(this.data=nr)}}class EthereumProviderError extends EthereumRpcError{constructor(er,rr,nr){if(!isValidEthProviderCode(er))throw new Error('"code" must be an integer such that: 1000 <= code <= 4999');super(er,rr,nr)}}function isValidEthProviderCode(tr){return Number.isInteger(tr)&&tr>=1e3&&tr<=4999}(function(tr){Object.defineProperty(tr,"__esModule",{value:!0}),tr.standardErrors=tr.standardErrorCodes=void 0;var er=constants$2;Object.defineProperty(tr,"standardErrorCodes",{enumerable:!0,get:function(){return er.standardErrorCodes}});var rr=errors;Object.defineProperty(tr,"standardErrors",{enumerable:!0,get:function(){return rr.standardErrors}})})(error);var serialize={},Web3Response={};Object.defineProperty(Web3Response,"__esModule",{value:!0});Web3Response.isErrorResponse=void 0;function isErrorResponse(tr){return tr.errorMessage!==void 0}Web3Response.isErrorResponse=isErrorResponse;var version={};Object.defineProperty(version,"__esModule",{value:!0});version.LIB_VERSION=void 0;version.LIB_VERSION="4.0.4";Object.defineProperty(serialize,"__esModule",{value:!0});serialize.serializeError=void 0;const Web3Response_1$2=Web3Response,version_1$3=version,constants_1$5=constants$2,utils_1=utils;function serializeError(tr,er){const rr=(0,utils_1.serialize)(getErrorObject(tr),{shouldIncludeStack:!0}),nr=new URL("https://docs.cloud.coinbase.com/wallet-sdk/docs/errors");nr.searchParams.set("version",version_1$3.LIB_VERSION),nr.searchParams.set("code",rr.code.toString());const ir=getMethod(rr.data,er);return ir&&nr.searchParams.set("method",ir),nr.searchParams.set("message",rr.message),Object.assign(Object.assign({},rr),{docUrl:nr.href})}serialize.serializeError=serializeError;function getErrorObject(tr){return typeof tr=="string"?{message:tr,code:constants_1$5.standardErrorCodes.rpc.internal}:(0,Web3Response_1$2.isErrorResponse)(tr)?Object.assign(Object.assign({},tr),{message:tr.errorMessage,code:tr.errorCode,data:{method:tr.method}}):tr}function getMethod(tr,er){const rr=tr==null?void 0:tr.method;if(rr)return rr;if(er!==void 0){if(typeof er=="string")return er;if(Array.isArray(er)){if(er.length>0)return er[0].method}else return er.method}}var type={};Object.defineProperty(type,"__esModule",{value:!0});type.RegExpString=type.IntNumber=type.BigIntString=type.AddressString=type.HexString=type.OpaqueType=void 0;function OpaqueType(){return tr=>tr}type.OpaqueType=OpaqueType;type.HexString=OpaqueType();type.AddressString=OpaqueType();type.BigIntString=OpaqueType();function IntNumber(tr){return Math.floor(tr)}type.IntNumber=IntNumber;type.RegExpString=OpaqueType();var util$6={};Object.defineProperty(util$6,"__esModule",{value:!0});util$6.areAddressArraysEqual=util$6.getFavicon=util$6.range=util$6.isBigNumber=util$6.ensureParsedJSONObject=util$6.ensureBigInt=util$6.ensureRegExpString=util$6.ensureIntNumber=util$6.ensureBuffer=util$6.ensureAddressString=util$6.ensureEvenLengthHexString=util$6.ensureHexString=util$6.isHexString=util$6.prepend0x=util$6.strip0x=util$6.has0xPrefix=util$6.hexStringFromIntNumber=util$6.intNumberFromHexString=util$6.bigIntStringFromBigInt=util$6.hexStringFromBuffer=util$6.hexStringToUint8Array=util$6.uint8ArrayToHex=util$6.randomBytesHex=void 0;const error_1$8=error,_1=type,INT_STRING_REGEX=/^[0-9]*$/,HEXADECIMAL_STRING_REGEX=/^[a-f0-9]*$/;function randomBytesHex(tr){return uint8ArrayToHex(crypto.getRandomValues(new Uint8Array(tr)))}util$6.randomBytesHex=randomBytesHex;function uint8ArrayToHex(tr){return[...tr].map(er=>er.toString(16).padStart(2,"0")).join("")}util$6.uint8ArrayToHex=uint8ArrayToHex;function hexStringToUint8Array(tr){return new Uint8Array(tr.match(/.{1,2}/g).map(er=>parseInt(er,16)))}util$6.hexStringToUint8Array=hexStringToUint8Array;function hexStringFromBuffer(tr,er=!1){const rr=tr.toString("hex");return(0,_1.HexString)(er?`0x${rr}`:rr)}util$6.hexStringFromBuffer=hexStringFromBuffer;function bigIntStringFromBigInt(tr){return(0,_1.BigIntString)(tr.toString(10))}util$6.bigIntStringFromBigInt=bigIntStringFromBigInt;function intNumberFromHexString(tr){return(0,_1.IntNumber)(Number(BigInt(ensureEvenLengthHexString(tr,!0))))}util$6.intNumberFromHexString=intNumberFromHexString;function hexStringFromIntNumber(tr){return(0,_1.HexString)(`0x${BigInt(tr).toString(16)}`)}util$6.hexStringFromIntNumber=hexStringFromIntNumber;function has0xPrefix(tr){return tr.startsWith("0x")||tr.startsWith("0X")}util$6.has0xPrefix=has0xPrefix;function strip0x(tr){return has0xPrefix(tr)?tr.slice(2):tr}util$6.strip0x=strip0x;function prepend0x(tr){return has0xPrefix(tr)?`0x${tr.slice(2)}`:`0x${tr}`}util$6.prepend0x=prepend0x;function isHexString$1(tr){if(typeof tr!="string")return!1;const er=strip0x(tr).toLowerCase();return HEXADECIMAL_STRING_REGEX.test(er)}util$6.isHexString=isHexString$1;function ensureHexString(tr,er=!1){if(typeof tr=="string"){const rr=strip0x(tr).toLowerCase();if(HEXADECIMAL_STRING_REGEX.test(rr))return(0,_1.HexString)(er?`0x${rr}`:rr)}throw error_1$8.standardErrors.rpc.invalidParams(`"${String(tr)}" is not a hexadecimal string`)}util$6.ensureHexString=ensureHexString;function ensureEvenLengthHexString(tr,er=!1){let rr=ensureHexString(tr,!1);return rr.length%2===1&&(rr=(0,_1.HexString)(`0${rr}`)),er?(0,_1.HexString)(`0x${rr}`):rr}util$6.ensureEvenLengthHexString=ensureEvenLengthHexString;function ensureAddressString(tr){if(typeof tr=="string"){const er=strip0x(tr).toLowerCase();if(isHexString$1(er)&&er.length===40)return(0,_1.AddressString)(prepend0x(er))}throw error_1$8.standardErrors.rpc.invalidParams(`Invalid Ethereum address: ${String(tr)}`)}util$6.ensureAddressString=ensureAddressString;function ensureBuffer(tr){if(Buffer.isBuffer(tr))return tr;if(typeof tr=="string"){if(isHexString$1(tr)){const er=ensureEvenLengthHexString(tr,!1);return Buffer.from(er,"hex")}return Buffer.from(tr,"utf8")}throw error_1$8.standardErrors.rpc.invalidParams(`Not binary data: ${String(tr)}`)}util$6.ensureBuffer=ensureBuffer;function ensureIntNumber(tr){if(typeof tr=="number"&&Number.isInteger(tr))return(0,_1.IntNumber)(tr);if(typeof tr=="string"){if(INT_STRING_REGEX.test(tr))return(0,_1.IntNumber)(Number(tr));if(isHexString$1(tr))return(0,_1.IntNumber)(Number(BigInt(ensureEvenLengthHexString(tr,!0))))}throw error_1$8.standardErrors.rpc.invalidParams(`Not an integer: ${String(tr)}`)}util$6.ensureIntNumber=ensureIntNumber;function ensureRegExpString(tr){if(tr instanceof RegExp)return(0,_1.RegExpString)(tr.toString());throw error_1$8.standardErrors.rpc.invalidParams(`Not a RegExp: ${String(tr)}`)}util$6.ensureRegExpString=ensureRegExpString;function ensureBigInt(tr){if(tr!==null&&(typeof tr=="bigint"||isBigNumber(tr)))return BigInt(tr.toString(10));if(typeof tr=="number")return BigInt(ensureIntNumber(tr));if(typeof tr=="string"){if(INT_STRING_REGEX.test(tr))return BigInt(tr);if(isHexString$1(tr))return BigInt(ensureEvenLengthHexString(tr,!0))}throw error_1$8.standardErrors.rpc.invalidParams(`Not an integer: ${String(tr)}`)}util$6.ensureBigInt=ensureBigInt;function ensureParsedJSONObject(tr){if(typeof tr=="string")return JSON.parse(tr);if(typeof tr=="object")return tr;throw error_1$8.standardErrors.rpc.invalidParams(`Not a JSON string or an object: ${String(tr)}`)}util$6.ensureParsedJSONObject=ensureParsedJSONObject;function isBigNumber(tr){if(tr==null||typeof tr.constructor!="function")return!1;const{constructor:er}=tr;return typeof er.config=="function"&&typeof er.EUCLID=="number"}util$6.isBigNumber=isBigNumber;function range(tr,er){return Array.from({length:er-tr},(rr,nr)=>tr+nr)}util$6.range=range;function getFavicon(){const tr=document.querySelector('link[sizes="192x192"]')||document.querySelector('link[sizes="180x180"]')||document.querySelector('link[rel="icon"]')||document.querySelector('link[rel="shortcut icon"]'),{protocol:er,host:rr}=document.location,nr=tr?tr.getAttribute("href"):null;return!nr||nr.startsWith("javascript:")||nr.startsWith("vbscript:")?null:nr.startsWith("http://")||nr.startsWith("https://")||nr.startsWith("data:")?nr:nr.startsWith("//")?er+nr:`${er}//${rr}${nr}`}util$6.getFavicon=getFavicon;function areAddressArraysEqual(tr,er){return tr.length===er.length&&tr.every((rr,nr)=>rr===er[nr])}util$6.areAddressArraysEqual=areAddressArraysEqual;var util$5={},SCWSigner$1={},SCWKeyManager$1={},cipher={};Object.defineProperty(cipher,"__esModule",{value:!0});cipher.decryptContent=cipher.encryptContent=cipher.importKeyFromHexString=cipher.exportKeyToHexString=cipher.decrypt=cipher.encrypt=cipher.deriveSharedSecret=cipher.generateKeyPair=void 0;const util_1$b=util$6;async function generateKeyPair(){return crypto.subtle.generateKey({name:"ECDH",namedCurve:"P-256"},!0,["deriveKey"])}cipher.generateKeyPair=generateKeyPair;async function deriveSharedSecret(tr,er){return crypto.subtle.deriveKey({name:"ECDH",public:er},tr,{name:"AES-GCM",length:256},!1,["encrypt","decrypt"])}cipher.deriveSharedSecret=deriveSharedSecret;async function encrypt(tr,er){const rr=crypto.getRandomValues(new Uint8Array(12)),nr=await crypto.subtle.encrypt({name:"AES-GCM",iv:rr},tr,new TextEncoder().encode(er));return{iv:rr,cipherText:nr}}cipher.encrypt=encrypt;async function decrypt(tr,{iv:er,cipherText:rr}){const nr=await crypto.subtle.decrypt({name:"AES-GCM",iv:er},tr,rr);return new TextDecoder().decode(nr)}cipher.decrypt=decrypt;function getFormat(tr){switch(tr){case"public":return"spki";case"private":return"pkcs8"}}async function exportKeyToHexString(tr,er){const rr=getFormat(tr),nr=await crypto.subtle.exportKey(rr,er);return(0,util_1$b.uint8ArrayToHex)(new Uint8Array(nr))}cipher.exportKeyToHexString=exportKeyToHexString;async function importKeyFromHexString(tr,er){const rr=getFormat(tr),nr=(0,util_1$b.hexStringToUint8Array)(er).buffer;return await crypto.subtle.importKey(rr,nr,{name:"ECDH",namedCurve:"P-256"},!0,tr==="private"?["deriveKey"]:[])}cipher.importKeyFromHexString=importKeyFromHexString;async function encryptContent(tr,er){const rr=JSON.stringify(tr,(nr,ir)=>{if(!(ir instanceof Error))return ir;const sr=ir;return Object.assign(Object.assign({},sr.code?{code:sr.code}:{}),{message:sr.message})});return encrypt(er,rr)}cipher.encryptContent=encryptContent;async function decryptContent(tr,er){return JSON.parse(await decrypt(er,tr))}cipher.decryptContent=decryptContent;var ScopedLocalStorage$1={};Object.defineProperty(ScopedLocalStorage$1,"__esModule",{value:!0});ScopedLocalStorage$1.ScopedLocalStorage=void 0;class ScopedLocalStorage{constructor(er,rr){this.scope=er,this.module=rr}setItem(er,rr){localStorage.setItem(this.scopedKey(er),rr)}getItem(er){return localStorage.getItem(this.scopedKey(er))}removeItem(er){localStorage.removeItem(this.scopedKey(er))}clear(){const er=this.scopedKey(""),rr=[];for(let nr=0;nr<localStorage.length;nr++){const ir=localStorage.key(nr);typeof ir=="string"&&ir.startsWith(er)&&rr.push(ir)}rr.forEach(nr=>localStorage.removeItem(nr))}scopedKey(er){return`-${this.scope}${this.module?`:${this.module}`:""}:${er}`}static clearAll(){new ScopedLocalStorage("CBWSDK").clear(),new ScopedLocalStorage("walletlink").clear()}}ScopedLocalStorage$1.ScopedLocalStorage=ScopedLocalStorage;Object.defineProperty(SCWKeyManager$1,"__esModule",{value:!0});SCWKeyManager$1.SCWKeyManager=void 0;const cipher_1$1=cipher,ScopedLocalStorage_1$6=ScopedLocalStorage$1,OWN_PRIVATE_KEY={storageKey:"ownPrivateKey",keyType:"private"},OWN_PUBLIC_KEY={storageKey:"ownPublicKey",keyType:"public"},PEER_PUBLIC_KEY={storageKey:"peerPublicKey",keyType:"public"};class SCWKeyManager{constructor(){this.storage=new ScopedLocalStorage_1$6.ScopedLocalStorage("CBWSDK","SCWKeyManager"),this.ownPrivateKey=null,this.ownPublicKey=null,this.peerPublicKey=null,this.sharedSecret=null}async getOwnPublicKey(){return await this.loadKeysIfNeeded(),this.ownPublicKey}async getSharedSecret(){return await this.loadKeysIfNeeded(),this.sharedSecret}async setPeerPublicKey(er){this.sharedSecret=null,this.peerPublicKey=er,await this.storeKey(PEER_PUBLIC_KEY,er),await this.loadKeysIfNeeded()}async clear(){this.ownPrivateKey=null,this.ownPublicKey=null,this.peerPublicKey=null,this.sharedSecret=null,this.storage.removeItem(OWN_PUBLIC_KEY.storageKey),this.storage.removeItem(OWN_PRIVATE_KEY.storageKey),this.storage.removeItem(PEER_PUBLIC_KEY.storageKey)}async generateKeyPair(){const er=await(0,cipher_1$1.generateKeyPair)();this.ownPrivateKey=er.privateKey,this.ownPublicKey=er.publicKey,await this.storeKey(OWN_PRIVATE_KEY,er.privateKey),await this.storeKey(OWN_PUBLIC_KEY,er.publicKey)}async loadKeysIfNeeded(){if(this.ownPrivateKey===null&&(this.ownPrivateKey=await this.loadKey(OWN_PRIVATE_KEY)),this.ownPublicKey===null&&(this.ownPublicKey=await this.loadKey(OWN_PUBLIC_KEY)),(this.ownPrivateKey===null||this.ownPublicKey===null)&&await this.generateKeyPair(),this.peerPublicKey===null&&(this.peerPublicKey=await this.loadKey(PEER_PUBLIC_KEY)),this.sharedSecret===null){if(this.ownPrivateKey===null||this.peerPublicKey===null)return;this.sharedSecret=await(0,cipher_1$1.deriveSharedSecret)(this.ownPrivateKey,this.peerPublicKey)}}async loadKey(er){const rr=this.storage.getItem(er.storageKey);return rr?(0,cipher_1$1.importKeyFromHexString)(er.keyType,rr):null}async storeKey(er,rr){const nr=await(0,cipher_1$1.exportKeyToHexString)(er.keyType,rr);this.storage.setItem(er.storageKey,nr)}}SCWKeyManager$1.SCWKeyManager=SCWKeyManager;var SCWStateManager$1={};Object.defineProperty(SCWStateManager$1,"__esModule",{value:!0});SCWStateManager$1.SCWStateManager=void 0;const ScopedLocalStorage_1$5=ScopedLocalStorage$1,ACCOUNTS_KEY="accounts",ACTIVE_CHAIN_STORAGE_KEY="activeChain",AVAILABLE_CHAINS_STORAGE_KEY="availableChains",WALLET_CAPABILITIES_STORAGE_KEY="walletCapabilities";class SCWStateManager{get accounts(){return this._accounts}get activeChain(){return this._activeChain}get walletCapabilities(){return this._walletCapabilities}constructor(er){var rr,nr;this.storage=new ScopedLocalStorage_1$5.ScopedLocalStorage("CBWSDK","SCWStateManager"),this.updateListener=er.updateListener,this.availableChains=this.loadItemFromStorage(AVAILABLE_CHAINS_STORAGE_KEY),this._walletCapabilities=this.loadItemFromStorage(WALLET_CAPABILITIES_STORAGE_KEY);const ir=this.loadItemFromStorage(ACCOUNTS_KEY),sr=this.loadItemFromStorage(ACTIVE_CHAIN_STORAGE_KEY);ir&&this.updateListener.onAccountsUpdate({accounts:ir,source:"storage"}),sr&&this.updateListener.onChainUpdate({chain:sr,source:"storage"}),this._accounts=ir||[],this._activeChain=sr||{id:(nr=(rr=er.appChainIds)===null||rr===void 0?void 0:rr[0])!==null&&nr!==void 0?nr:1}}updateAccounts(er){this._accounts=er,this.storeItemToStorage(ACCOUNTS_KEY,er),this.updateListener.onAccountsUpdate({accounts:er,source:"wallet"})}switchChain(er){var rr;const nr=(rr=this.availableChains)===null||rr===void 0?void 0:rr.find(ir=>ir.id===er);return nr?(nr===this._activeChain||(this._activeChain=nr,this.storeItemToStorage(ACTIVE_CHAIN_STORAGE_KEY,nr),this.updateListener.onChainUpdate({chain:nr,source:"wallet"})),!0):!1}updateAvailableChains(er){if(!er||Object.keys(er).length===0)return;const rr=Object.entries(er).map(([nr,ir])=>({id:Number(nr),rpcUrl:ir}));this.availableChains=rr,this.storeItemToStorage(AVAILABLE_CHAINS_STORAGE_KEY,rr),this.switchChain(this._activeChain.id)}updateWalletCapabilities(er){this._walletCapabilities=er,this.storeItemToStorage(WALLET_CAPABILITIES_STORAGE_KEY,er)}storeItemToStorage(er,rr){this.storage.setItem(er,JSON.stringify(rr))}loadItemFromStorage(er){const rr=this.storage.getItem(er);return rr?JSON.parse(rr):void 0}clear(){this.storage.clear()}}SCWStateManager$1.SCWStateManager=SCWStateManager;Object.defineProperty(SCWSigner$1,"__esModule",{value:!0});SCWSigner$1.SCWSigner=void 0;const SCWKeyManager_1=SCWKeyManager$1,SCWStateManager_1=SCWStateManager$1,error_1$7=error,util_1$a=util$6,cipher_1=cipher;class SCWSigner{constructor(er){this.metadata=er.metadata,this.communicator=er.communicator,this.keyManager=new SCWKeyManager_1.SCWKeyManager,this.stateManager=new SCWStateManager_1.SCWStateManager({appChainIds:this.metadata.appChainIds,updateListener:er.updateListener}),this.handshake=this.handshake.bind(this),this.request=this.request.bind(this),this.createRequestMessage=this.createRequestMessage.bind(this),this.decryptResponseMessage=this.decryptResponseMessage.bind(this)}async handshake(){const er=await this.createRequestMessage({handshake:{method:"eth_requestAccounts",params:this.metadata}}),rr=await this.communicator.postRequestAndWaitForResponse(er);if("failure"in rr.content)throw rr.content.failure;const nr=await(0,cipher_1.importKeyFromHexString)("public",rr.sender);await this.keyManager.setPeerPublicKey(nr);const ir=await this.decryptResponseMessage(rr);this.updateInternalState({method:"eth_requestAccounts"},ir);const sr=ir.result;if("error"in sr)throw sr.error;return this.stateManager.accounts}async request(er){const rr=this.tryLocalHandling(er);if(rr!==void 0){if(rr instanceof Error)throw rr;return rr}await this.communicator.waitForPopupLoaded();const nr=await this.sendEncryptedRequest(er),ir=await this.decryptResponseMessage(nr);this.updateInternalState(er,ir);const sr=ir.result;if("error"in sr)throw sr.error;return sr.value}async disconnect(){this.stateManager.clear(),await this.keyManager.clear()}tryLocalHandling(er){var rr;switch(er.method){case"wallet_switchEthereumChain":{const nr=er.params;if(!nr||!(!((rr=nr[0])===null||rr===void 0)&&rr.chainId))throw error_1$7.standardErrors.rpc.invalidParams();const ir=(0,util_1$a.ensureIntNumber)(nr[0].chainId);return this.stateManager.switchChain(ir)?null:void 0}case"wallet_getCapabilities":{const nr=this.stateManager.walletCapabilities;if(!nr)throw error_1$7.standardErrors.provider.unauthorized("No wallet capabilities found, please disconnect and reconnect");return nr}default:return}}async sendEncryptedRequest(er){const rr=await this.keyManager.getSharedSecret();if(!rr)throw error_1$7.standardErrors.provider.unauthorized("No valid session found, try requestAccounts before other methods");const nr=await(0,cipher_1.encryptContent)({action:er,chainId:this.stateManager.activeChain.id},rr),ir=await this.createRequestMessage({encrypted:nr});return this.communicator.postRequestAndWaitForResponse(ir)}async createRequestMessage(er){const rr=await(0,cipher_1.exportKeyToHexString)("public",await this.keyManager.getOwnPublicKey());return{id:crypto.randomUUID(),sender:rr,content:er,timestamp:new Date}}async decryptResponseMessage(er){const rr=er.content;if("failure"in rr)throw rr.failure;const nr=await this.keyManager.getSharedSecret();if(!nr)throw error_1$7.standardErrors.provider.unauthorized("Invalid session");return(0,cipher_1.decryptContent)(rr.encrypted,nr)}updateInternalState(er,rr){var nr,ir;const sr=(nr=rr.data)===null||nr===void 0?void 0:nr.chains;sr&&this.stateManager.updateAvailableChains(sr);const or=(ir=rr.data)===null||ir===void 0?void 0:ir.capabilities;or&&this.stateManager.updateWalletCapabilities(or);const ar=rr.result;if(!("error"in ar))switch(er.method){case"eth_requestAccounts":{const cr=ar.value;this.stateManager.updateAccounts(cr);break}case"wallet_switchEthereumChain":{if(ar.value!==null)return;const cr=er.params,lr=(0,util_1$a.ensureIntNumber)(cr[0].chainId);this.stateManager.switchChain(lr);break}}}}SCWSigner$1.SCWSigner=SCWSigner;var WalletLinkSigner$1={},readableBrowser={exports:{}},streamBrowser=eventsExports.EventEmitter,buffer_list,hasRequiredBuffer_list;function requireBuffer_list(){if(hasRequiredBuffer_list)return buffer_list;hasRequiredBuffer_list=1;function tr(wr,xr){var Or=Object.keys(wr);if(Object.getOwnPropertySymbols){var Tr=Object.getOwnPropertySymbols(wr);xr&&(Tr=Tr.filter(function(Ar){return Object.getOwnPropertyDescriptor(wr,Ar).enumerable})),Or.push.apply(Or,Tr)}return Or}function er(wr){for(var xr=1;xr<arguments.length;xr++){var Or=arguments[xr]!=null?arguments[xr]:{};xr%2?tr(Object(Or),!0).forEach(function(Tr){rr(wr,Tr,Or[Tr])}):Object.getOwnPropertyDescriptors?Object.defineProperties(wr,Object.getOwnPropertyDescriptors(Or)):tr(Object(Or)).forEach(function(Tr){Object.defineProperty(wr,Tr,Object.getOwnPropertyDescriptor(Or,Tr))})}return wr}function rr(wr,xr,Or){return xr=or(xr),xr in wr?Object.defineProperty(wr,xr,{value:Or,enumerable:!0,configurable:!0,writable:!0}):wr[xr]=Or,wr}function nr(wr,xr){if(!(wr instanceof xr))throw new TypeError("Cannot call a class as a function")}function ir(wr,xr){for(var Or=0;Or<xr.length;Or++){var Tr=xr[Or];Tr.enumerable=Tr.enumerable||!1,Tr.configurable=!0,"value"in Tr&&(Tr.writable=!0),Object.defineProperty(wr,or(Tr.key),Tr)}}function sr(wr,xr,Or){return xr&&ir(wr.prototype,xr),Object.defineProperty(wr,"prototype",{writable:!1}),wr}function or(wr){var xr=ar(wr,"string");return typeof xr=="symbol"?xr:String(xr)}function ar(wr,xr){if(typeof wr!="object"||wr===null)return wr;var Or=wr[Symbol.toPrimitive];if(Or!==void 0){var Tr=Or.call(wr,xr||"default");if(typeof Tr!="object")return Tr;throw new TypeError("@@toPrimitive must return a primitive value.")}return(xr==="string"?String:Number)(wr)}var cr=buffer$1,lr=cr.Buffer,ur=require$$3,dr=ur.inspect,yr=dr&&dr.custom||"inspect";function mr(wr,xr,Or){lr.prototype.copy.call(wr,xr,Or)}return buffer_list=function(){function wr(){nr(this,wr),this.head=null,this.tail=null,this.length=0}return sr(wr,[{key:"push",value:function(Or){var Tr={data:Or,next:null};this.length>0?this.tail.next=Tr:this.head=Tr,this.tail=Tr,++this.length}},{key:"unshift",value:function(Or){var Tr={data:Or,next:this.head};this.length===0&&(this.tail=Tr),this.head=Tr,++this.length}},{key:"shift",value:function(){if(this.length!==0){var Or=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,Or}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(Or){if(this.length===0)return"";for(var Tr=this.head,Ar=""+Tr.data;Tr=Tr.next;)Ar+=Or+Tr.data;return Ar}},{key:"concat",value:function(Or){if(this.length===0)return lr.alloc(0);for(var Tr=lr.allocUnsafe(Or>>>0),Ar=this.head,Nr=0;Ar;)mr(Ar.data,Tr,Nr),Nr+=Ar.data.length,Ar=Ar.next;return Tr}},{key:"consume",value:function(Or,Tr){var Ar;return Or<this.head.data.length?(Ar=this.head.data.slice(0,Or),this.head.data=this.head.data.slice(Or)):Or===this.head.data.length?Ar=this.shift():Ar=Tr?this._getString(Or):this._getBuffer(Or),Ar}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(Or){var Tr=this.head,Ar=1,Nr=Tr.data;for(Or-=Nr.length;Tr=Tr.next;){var Ur=Tr.data,Dr=Or>Ur.length?Ur.length:Or;if(Dr===Ur.length?Nr+=Ur:Nr+=Ur.slice(0,Or),Or-=Dr,Or===0){Dr===Ur.length?(++Ar,Tr.next?this.head=Tr.next:this.head=this.tail=null):(this.head=Tr,Tr.data=Ur.slice(Dr));break}++Ar}return this.length-=Ar,Nr}},{key:"_getBuffer",value:function(Or){var Tr=lr.allocUnsafe(Or),Ar=this.head,Nr=1;for(Ar.data.copy(Tr),Or-=Ar.data.length;Ar=Ar.next;){var Ur=Ar.data,Dr=Or>Ur.length?Ur.length:Or;if(Ur.copy(Tr,Tr.length-Or,0,Dr),Or-=Dr,Or===0){Dr===Ur.length?(++Nr,Ar.next?this.head=Ar.next:this.head=this.tail=null):(this.head=Ar,Ar.data=Ur.slice(Dr));break}++Nr}return this.length-=Nr,Tr}},{key:yr,value:function(Or,Tr){return dr(this,er(er({},Tr),{},{depth:0,customInspect:!1}))}}]),wr}(),buffer_list}function destroy(tr,er){var rr=this,nr=this._readableState&&this._readableState.destroyed,ir=this._writableState&&this._writableState.destroyed;return nr||ir?(er?er(tr):tr&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process.nextTick(emitErrorNT,this,tr)):process.nextTick(emitErrorNT,this,tr)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(tr||null,function(sr){!er&&sr?rr._writableState?rr._writableState.errorEmitted?process.nextTick(emitCloseNT,rr):(rr._writableState.errorEmitted=!0,process.nextTick(emitErrorAndCloseNT,rr,sr)):process.nextTick(emitErrorAndCloseNT,rr,sr):er?(process.nextTick(emitCloseNT,rr),er(sr)):process.nextTick(emitCloseNT,rr)}),this)}function emitErrorAndCloseNT(tr,er){emitErrorNT(tr,er),emitCloseNT(tr)}function emitCloseNT(tr){tr._writableState&&!tr._writableState.emitClose||tr._readableState&&!tr._readableState.emitClose||tr.emit("close")}function undestroy(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function emitErrorNT(tr,er){tr.emit("error",er)}function errorOrDestroy(tr,er){var rr=tr._readableState,nr=tr._writableState;rr&&rr.autoDestroy||nr&&nr.autoDestroy?tr.destroy(er):tr.emit("error",er)}var destroy_1={destroy,undestroy,errorOrDestroy},errorsBrowser={};function _inheritsLoose(tr,er){tr.prototype=Object.create(er.prototype),tr.prototype.constructor=tr,tr.__proto__=er}var codes={};function createErrorType(tr,er,rr){rr||(rr=Error);function nr(sr,or,ar){return typeof er=="string"?er:er(sr,or,ar)}var ir=function(sr){_inheritsLoose(or,sr);function or(ar,cr,lr){return sr.call(this,nr(ar,cr,lr))||this}return or}(rr);ir.prototype.name=rr.name,ir.prototype.code=tr,codes[tr]=ir}function oneOf(tr,er){if(Array.isArray(tr)){var rr=tr.length;return tr=tr.map(function(nr){return String(nr)}),rr>2?"one of ".concat(er," ").concat(tr.slice(0,rr-1).join(", "),", or ")+tr[rr-1]:rr===2?"one of ".concat(er," ").concat(tr[0]," or ").concat(tr[1]):"of ".concat(er," ").concat(tr[0])}else return"of ".concat(er," ").concat(String(tr))}function startsWith(tr,er,rr){return tr.substr(0,er.length)===er}function endsWith(tr,er,rr){return(rr===void 0||rr>tr.length)&&(rr=tr.length),tr.substring(rr-er.length,rr)===er}function includes(tr,er,rr){return typeof rr!="number"&&(rr=0),rr+er.length>tr.length?!1:tr.indexOf(er,rr)!==-1}createErrorType("ERR_INVALID_OPT_VALUE",function(tr,er){return'The value "'+er+'" is invalid for option "'+tr+'"'},TypeError);createErrorType("ERR_INVALID_ARG_TYPE",function(tr,er,rr){var nr;typeof er=="string"&&startsWith(er,"not ")?(nr="must not be",er=er.replace(/^not /,"")):nr="must be";var ir;if(endsWith(tr," argument"))ir="The ".concat(tr," ").concat(nr," ").concat(oneOf(er,"type"));else{var sr=includes(tr,".")?"property":"argument";ir='The "'.concat(tr,'" ').concat(sr," ").concat(nr," ").concat(oneOf(er,"type"))}return ir+=". Received type ".concat(typeof rr),ir},TypeError);createErrorType("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF");createErrorType("ERR_METHOD_NOT_IMPLEMENTED",function(tr){return"The "+tr+" method is not implemented"});createErrorType("ERR_STREAM_PREMATURE_CLOSE","Premature close");createErrorType("ERR_STREAM_DESTROYED",function(tr){return"Cannot call "+tr+" after a stream was destroyed"});createErrorType("ERR_MULTIPLE_CALLBACK","Callback called multiple times");createErrorType("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable");createErrorType("ERR_STREAM_WRITE_AFTER_END","write after end");createErrorType("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);createErrorType("ERR_UNKNOWN_ENCODING",function(tr){return"Unknown encoding: "+tr},TypeError);createErrorType("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event");errorsBrowser.codes=codes;var ERR_INVALID_OPT_VALUE=errorsBrowser.codes.ERR_INVALID_OPT_VALUE;function highWaterMarkFrom(tr,er,rr){return tr.highWaterMark!=null?tr.highWaterMark:er?tr[rr]:null}function getHighWaterMark(tr,er,rr,nr){var ir=highWaterMarkFrom(er,nr,rr);if(ir!=null){if(!(isFinite(ir)&&Math.floor(ir)===ir)||ir<0){var sr=nr?rr:"highWaterMark";throw new ERR_INVALID_OPT_VALUE(sr,ir)}return Math.floor(ir)}return tr.objectMode?16:16*1024}var state={getHighWaterMark},browser=deprecate;function deprecate(tr,er){if(config("noDeprecation"))return tr;var rr=!1;function nr(){if(!rr){if(config("throwDeprecation"))throw new Error(er);config("traceDeprecation")?console.trace(er):console.warn(er),rr=!0}return tr.apply(this,arguments)}return nr}function config(tr){try{if(!globalThis.localStorage)return!1}catch{return!1}var er=globalThis.localStorage[tr];return er==null?!1:String(er).toLowerCase()==="true"}var _stream_writable,hasRequired_stream_writable;function require_stream_writable(){if(hasRequired_stream_writable)return _stream_writable;hasRequired_stream_writable=1,_stream_writable=Cr;function tr(qr){var an=this;this.next=null,this.entry=null,this.finish=function(){Wr(an,qr)}}var er;Cr.WritableState=Hr;var rr={deprecate:browser},nr=streamBrowser,ir=buffer$1.Buffer,sr=(typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function or(qr){return ir.from(qr)}function ar(qr){return ir.isBuffer(qr)||qr instanceof sr}var cr=destroy_1,lr=state,ur=lr.getHighWaterMark,dr=errorsBrowser.codes,yr=dr.ERR_INVALID_ARG_TYPE,mr=dr.ERR_METHOD_NOT_IMPLEMENTED,wr=dr.ERR_MULTIPLE_CALLBACK,xr=dr.ERR_STREAM_CANNOT_PIPE,Or=dr.ERR_STREAM_DESTROYED,Tr=dr.ERR_STREAM_NULL_VALUES,Ar=dr.ERR_STREAM_WRITE_AFTER_END,Nr=dr.ERR_UNKNOWN_ENCODING,Ur=cr.errorOrDestroy;inherits_browserExports(Cr,nr);function Dr(){}function Hr(qr,an,tn){er=er||require_stream_duplex(),qr=qr||{},typeof tn!="boolean"&&(tn=an instanceof er),this.objectMode=!!qr.objectMode,tn&&(this.objectMode=this.objectMode||!!qr.writableObjectMode),this.highWaterMark=ur(this,qr,"writableHighWaterMark",tn),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var cn=qr.decodeStrings===!1;this.decodeStrings=!cn,this.defaultEncoding=qr.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(dn){br(an,dn)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=qr.emitClose!==!1,this.autoDestroy=!!qr.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new tr(this)}Hr.prototype.getBuffer=function(){for(var an=this.bufferedRequest,tn=[];an;)tn.push(an),an=an.next;return tn},function(){try{Object.defineProperty(Hr.prototype,"buffer",{get:rr.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}();var zr;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(zr=Function.prototype[Symbol.hasInstance],Object.defineProperty(Cr,Symbol.hasInstance,{value:function(an){return zr.call(this,an)?!0:this!==Cr?!1:an&&an._writableState instanceof Hr}})):zr=function(an){return an instanceof this};function Cr(qr){er=er||require_stream_duplex();var an=this instanceof er;if(!an&&!zr.call(Cr,this))return new Cr(qr);this._writableState=new Hr(qr,this,an),this.writable=!0,qr&&(typeof qr.write=="function"&&(this._write=qr.write),typeof qr.writev=="function"&&(this._writev=qr.writev),typeof qr.destroy=="function"&&(this._destroy=qr.destroy),typeof qr.final=="function"&&(this._final=qr.final)),nr.call(this)}Cr.prototype.pipe=function(){Ur(this,new xr)};function Mr(qr,an){var tn=new Ar;Ur(qr,tn),process.nextTick(an,tn)}function Pr(qr,an,tn,cn){var dn;return tn===null?dn=new Tr:typeof tn!="string"&&!an.objectMode&&(dn=new yr("chunk",["string","Buffer"],tn)),dn?(Ur(qr,dn),process.nextTick(cn,dn),!1):!0}Cr.prototype.write=function(qr,an,tn){var cn=this._writableState,dn=!1,Zr=!cn.objectMode&&ar(qr);return Zr&&!ir.isBuffer(qr)&&(qr=or(qr)),typeof an=="function"&&(tn=an,an=null),Zr?an="buffer":an||(an=cn.defaultEncoding),typeof tn!="function"&&(tn=Dr),cn.ending?Mr(this,tn):(Zr||Pr(this,cn,qr,tn))&&(cn.pendingcb++,dn=pr(this,cn,Zr,qr,an,tn)),dn},Cr.prototype.cork=function(){this._writableState.corked++},Cr.prototype.uncork=function(){var qr=this._writableState;qr.corked&&(qr.corked--,!qr.writing&&!qr.corked&&!qr.bufferProcessing&&qr.bufferedRequest&&Er(this,qr))},Cr.prototype.setDefaultEncoding=function(an){if(typeof an=="string"&&(an=an.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((an+"").toLowerCase())>-1))throw new Nr(an);return this._writableState.defaultEncoding=an,this},Object.defineProperty(Cr.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function Sr(qr,an,tn){return!qr.objectMode&&qr.decodeStrings!==!1&&typeof an=="string"&&(an=ir.from(an,tn)),an}Object.defineProperty(Cr.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function pr(qr,an,tn,cn,dn,Zr){if(!tn){var Yr=Sr(an,cn,dn);cn!==Yr&&(tn=!0,dn="buffer",cn=Yr)}var Qr=an.objectMode?1:cn.length;an.length+=Qr;var un=an.length<an.highWaterMark;if(un||(an.needDrain=!0),an.writing||an.corked){var gn=an.lastBufferedRequest;an.lastBufferedRequest={chunk:cn,encoding:dn,isBuf:tn,callback:Zr,next:null},gn?gn.next=an.lastBufferedRequest:an.bufferedRequest=an.lastBufferedRequest,an.bufferedRequestCount+=1}else gr(qr,an,!1,Qr,cn,dn,Zr);return un}function gr(qr,an,tn,cn,dn,Zr,Yr){an.writelen=cn,an.writecb=Yr,an.writing=!0,an.sync=!0,an.destroyed?an.onwrite(new Or("write")):tn?qr._writev(dn,an.onwrite):qr._write(dn,Zr,an.onwrite),an.sync=!1}function fr(qr,an,tn,cn,dn){--an.pendingcb,tn?(process.nextTick(dn,cn),process.nextTick(Br,qr,an),qr._writableState.errorEmitted=!0,Ur(qr,cn)):(dn(cn),qr._writableState.errorEmitted=!0,Ur(qr,cn),Br(qr,an))}function hr(qr){qr.writing=!1,qr.writecb=null,qr.length-=qr.writelen,qr.writelen=0}function br(qr,an){var tn=qr._writableState,cn=tn.sync,dn=tn.writecb;if(typeof dn!="function")throw new wr;if(hr(tn),an)fr(qr,tn,cn,an,dn);else{var Zr=vr(tn)||qr.destroyed;!Zr&&!tn.corked&&!tn.bufferProcessing&&tn.bufferedRequest&&Er(qr,tn),cn?process.nextTick(_r,qr,tn,Zr,dn):_r(qr,tn,Zr,dn)}}function _r(qr,an,tn,cn){tn||$r(qr,an),an.pendingcb--,cn(),Br(qr,an)}function $r(qr,an){an.length===0&&an.needDrain&&(an.needDrain=!1,qr.emit("drain"))}function Er(qr,an){an.bufferProcessing=!0;var tn=an.bufferedRequest;if(qr._writev&&tn&&tn.next){var cn=an.bufferedRequestCount,dn=new Array(cn),Zr=an.corkedRequestsFree;Zr.entry=tn;for(var Yr=0,Qr=!0;tn;)dn[Yr]=tn,tn.isBuf||(Qr=!1),tn=tn.next,Yr+=1;dn.allBuffers=Qr,gr(qr,an,!0,an.length,dn,"",Zr.finish),an.pendingcb++,an.lastBufferedRequest=null,Zr.next?(an.corkedRequestsFree=Zr.next,Zr.next=null):an.corkedRequestsFree=new tr(an),an.bufferedRequestCount=0}else{for(;tn;){var un=tn.chunk,gn=tn.encoding,Rn=tn.callback,Pn=an.objectMode?1:un.length;if(gr(qr,an,!1,Pn,un,gn,Rn),tn=tn.next,an.bufferedRequestCount--,an.writing)break}tn===null&&(an.lastBufferedRequest=null)}an.bufferedRequest=tn,an.bufferProcessing=!1}Cr.prototype._write=function(qr,an,tn){tn(new mr("_write()"))},Cr.prototype._writev=null,Cr.prototype.end=function(qr,an,tn){var cn=this._writableState;return typeof qr=="function"?(tn=qr,qr=null,an=null):typeof an=="function"&&(tn=an,an=null),qr!=null&&this.write(qr,an),cn.corked&&(cn.corked=1,this.uncork()),cn.ending||Jr(this,cn,tn),this},Object.defineProperty(Cr.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function vr(qr){return qr.ending&&qr.length===0&&qr.bufferedRequest===null&&!qr.finished&&!qr.writing}function Ir(qr,an){qr._final(function(tn){an.pendingcb--,tn&&Ur(qr,tn),an.prefinished=!0,qr.emit("prefinish"),Br(qr,an)})}function Rr(qr,an){!an.prefinished&&!an.finalCalled&&(typeof qr._final=="function"&&!an.destroyed?(an.pendingcb++,an.finalCalled=!0,process.nextTick(Ir,qr,an)):(an.prefinished=!0,qr.emit("prefinish")))}function Br(qr,an){var tn=vr(an);if(tn&&(Rr(qr,an),an.pendingcb===0&&(an.finished=!0,qr.emit("finish"),an.autoDestroy))){var cn=qr._readableState;(!cn||cn.autoDestroy&&cn.endEmitted)&&qr.destroy()}return tn}function Jr(qr,an,tn){an.ending=!0,Br(qr,an),tn&&(an.finished?process.nextTick(tn):qr.once("finish",tn)),an.ended=!0,qr.writable=!1}function Wr(qr,an,tn){var cn=qr.entry;for(qr.entry=null;cn;){var dn=cn.callback;an.pendingcb--,dn(tn),cn=cn.next}an.corkedRequestsFree.next=qr}return Object.defineProperty(Cr.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(an){this._writableState&&(this._writableState.destroyed=an)}}),Cr.prototype.destroy=cr.destroy,Cr.prototype._undestroy=cr.undestroy,Cr.prototype._destroy=function(qr,an){an(qr)},_stream_writable}var _stream_duplex,hasRequired_stream_duplex;function require_stream_duplex(){if(hasRequired_stream_duplex)return _stream_duplex;hasRequired_stream_duplex=1;var tr=Object.keys||function(lr){var ur=[];for(var dr in lr)ur.push(dr);return ur};_stream_duplex=or;var er=require_stream_readable(),rr=require_stream_writable();inherits_browserExports(or,er);for(var nr=tr(rr.prototype),ir=0;ir<nr.length;ir++){var sr=nr[ir];or.prototype[sr]||(or.prototype[sr]=rr.prototype[sr])}function or(lr){if(!(this instanceof or))return new or(lr);er.call(this,lr),rr.call(this,lr),this.allowHalfOpen=!0,lr&&(lr.readable===!1&&(this.readable=!1),lr.writable===!1&&(this.writable=!1),lr.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",ar)))}Object.defineProperty(or.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(or.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(or.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function ar(){this._writableState.ended||process.nextTick(cr,this)}function cr(lr){lr.end()}return Object.defineProperty(or.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(ur){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=ur,this._writableState.destroyed=ur)}}),_stream_duplex}var ERR_STREAM_PREMATURE_CLOSE=errorsBrowser.codes.ERR_STREAM_PREMATURE_CLOSE;function once$1(tr){var er=!1;return function(){if(!er){er=!0;for(var rr=arguments.length,nr=new Array(rr),ir=0;ir<rr;ir++)nr[ir]=arguments[ir];tr.apply(this,nr)}}}function noop$1(){}function isRequest$1(tr){return tr.setHeader&&typeof tr.abort=="function"}function eos$1(tr,er,rr){if(typeof er=="function")return eos$1(tr,null,er);er||(er={}),rr=once$1(rr||noop$1);var nr=er.readable||er.readable!==!1&&tr.readable,ir=er.writable||er.writable!==!1&&tr.writable,sr=function(){tr.writable||ar()},or=tr._writableState&&tr._writableState.finished,ar=function(){ir=!1,or=!0,nr||rr.call(tr)},cr=tr._readableState&&tr._readableState.endEmitted,lr=function(){nr=!1,cr=!0,ir||rr.call(tr)},ur=function(wr){rr.call(tr,wr)},dr=function(){var wr;if(nr&&!cr)return(!tr._readableState||!tr._readableState.ended)&&(wr=new ERR_STREAM_PREMATURE_CLOSE),rr.call(tr,wr);if(ir&&!or)return(!tr._writableState||!tr._writableState.ended)&&(wr=new ERR_STREAM_PREMATURE_CLOSE),rr.call(tr,wr)},yr=function(){tr.req.on("finish",ar)};return isRequest$1(tr)?(tr.on("complete",ar),tr.on("abort",dr),tr.req?yr():tr.on("request",yr)):ir&&!tr._writableState&&(tr.on("end",sr),tr.on("close",sr)),tr.on("end",lr),tr.on("finish",ar),er.error!==!1&&tr.on("error",ur),tr.on("close",dr),function(){tr.removeListener("complete",ar),tr.removeListener("abort",dr),tr.removeListener("request",yr),tr.req&&tr.req.removeListener("finish",ar),tr.removeListener("end",sr),tr.removeListener("close",sr),tr.removeListener("finish",ar),tr.removeListener("end",lr),tr.removeListener("error",ur),tr.removeListener("close",dr)}}var endOfStream=eos$1,async_iterator,hasRequiredAsync_iterator;function requireAsync_iterator(){if(hasRequiredAsync_iterator)return async_iterator;hasRequiredAsync_iterator=1;var tr;function er(Nr,Ur,Dr){return Ur=rr(Ur),Ur in Nr?Object.defineProperty(Nr,Ur,{value:Dr,enumerable:!0,configurable:!0,writable:!0}):Nr[Ur]=Dr,Nr}function rr(Nr){var Ur=nr(Nr,"string");return typeof Ur=="symbol"?Ur:String(Ur)}function nr(Nr,Ur){if(typeof Nr!="object"||Nr===null)return Nr;var Dr=Nr[Symbol.toPrimitive];if(Dr!==void 0){var Hr=Dr.call(Nr,Ur||"default");if(typeof Hr!="object")return Hr;throw new TypeError("@@toPrimitive must return a primitive value.")}return(Ur==="string"?String:Number)(Nr)}var ir=endOfStream,sr=Symbol("lastResolve"),or=Symbol("lastReject"),ar=Symbol("error"),cr=Symbol("ended"),lr=Symbol("lastPromise"),ur=Symbol("handlePromise"),dr=Symbol("stream");function yr(Nr,Ur){return{value:Nr,done:Ur}}function mr(Nr){var Ur=Nr[sr];if(Ur!==null){var Dr=Nr[dr].read();Dr!==null&&(Nr[lr]=null,Nr[sr]=null,Nr[or]=null,Ur(yr(Dr,!1)))}}function wr(Nr){process.nextTick(mr,Nr)}function xr(Nr,Ur){return function(Dr,Hr){Nr.then(function(){if(Ur[cr]){Dr(yr(void 0,!0));return}Ur[ur](Dr,Hr)},Hr)}}var Or=Object.getPrototypeOf(function(){}),Tr=Object.setPrototypeOf((tr={get stream(){return this[dr]},next:function(){var Ur=this,Dr=this[ar];if(Dr!==null)return Promise.reject(Dr);if(this[cr])return Promise.resolve(yr(void 0,!0));if(this[dr].destroyed)return new Promise(function(Mr,Pr){process.nextTick(function(){Ur[ar]?Pr(Ur[ar]):Mr(yr(void 0,!0))})});var Hr=this[lr],zr;if(Hr)zr=new Promise(xr(Hr,this));else{var Cr=this[dr].read();if(Cr!==null)return Promise.resolve(yr(Cr,!1));zr=new Promise(this[ur])}return this[lr]=zr,zr}},er(tr,Symbol.asyncIterator,function(){return this}),er(tr,"return",function(){var Ur=this;return new Promise(function(Dr,Hr){Ur[dr].destroy(null,function(zr){if(zr){Hr(zr);return}Dr(yr(void 0,!0))})})}),tr),Or),Ar=function(Ur){var Dr,Hr=Object.create(Tr,(Dr={},er(Dr,dr,{value:Ur,writable:!0}),er(Dr,sr,{value:null,writable:!0}),er(Dr,or,{value:null,writable:!0}),er(Dr,ar,{value:null,writable:!0}),er(Dr,cr,{value:Ur._readableState.endEmitted,writable:!0}),er(Dr,ur,{value:function(Cr,Mr){var Pr=Hr[dr].read();Pr?(Hr[lr]=null,Hr[sr]=null,Hr[or]=null,Cr(yr(Pr,!1))):(Hr[sr]=Cr,Hr[or]=Mr)},writable:!0}),Dr));return Hr[lr]=null,ir(Ur,function(zr){if(zr&&zr.code!=="ERR_STREAM_PREMATURE_CLOSE"){var Cr=Hr[or];Cr!==null&&(Hr[lr]=null,Hr[sr]=null,Hr[or]=null,Cr(zr)),Hr[ar]=zr;return}var Mr=Hr[sr];Mr!==null&&(Hr[lr]=null,Hr[sr]=null,Hr[or]=null,Mr(yr(void 0,!0))),Hr[cr]=!0}),Ur.on("readable",wr.bind(null,Hr)),Hr};return async_iterator=Ar,async_iterator}var fromBrowser,hasRequiredFromBrowser;function requireFromBrowser(){return hasRequiredFromBrowser||(hasRequiredFromBrowser=1,fromBrowser=function(){throw new Error("Readable.from is not available in the browser")}),fromBrowser}var _stream_readable,hasRequired_stream_readable;function require_stream_readable(){if(hasRequired_stream_readable)return _stream_readable;hasRequired_stream_readable=1,_stream_readable=Mr;var tr;Mr.ReadableState=Cr,eventsExports.EventEmitter;var er=function(Yr,Qr){return Yr.listeners(Qr).length},rr=streamBrowser,nr=buffer$1.Buffer,ir=(typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function sr(Zr){return nr.from(Zr)}function or(Zr){return nr.isBuffer(Zr)||Zr instanceof ir}var ar=require$$3,cr;ar&&ar.debuglog?cr=ar.debuglog("stream"):cr=function(){};var lr=requireBuffer_list(),ur=destroy_1,dr=state,yr=dr.getHighWaterMark,mr=errorsBrowser.codes,wr=mr.ERR_INVALID_ARG_TYPE,xr=mr.ERR_STREAM_PUSH_AFTER_EOF,Or=mr.ERR_METHOD_NOT_IMPLEMENTED,Tr=mr.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,Ar,Nr,Ur;inherits_browserExports(Mr,rr);var Dr=ur.errorOrDestroy,Hr=["error","close","destroy","pause","resume"];function zr(Zr,Yr,Qr){if(typeof Zr.prependListener=="function")return Zr.prependListener(Yr,Qr);!Zr._events||!Zr._events[Yr]?Zr.on(Yr,Qr):Array.isArray(Zr._events[Yr])?Zr._events[Yr].unshift(Qr):Zr._events[Yr]=[Qr,Zr._events[Yr]]}function Cr(Zr,Yr,Qr){tr=tr||require_stream_duplex(),Zr=Zr||{},typeof Qr!="boolean"&&(Qr=Yr instanceof tr),this.objectMode=!!Zr.objectMode,Qr&&(this.objectMode=this.objectMode||!!Zr.readableObjectMode),this.highWaterMark=yr(this,Zr,"readableHighWaterMark",Qr),this.buffer=new lr,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=Zr.emitClose!==!1,this.autoDestroy=!!Zr.autoDestroy,this.destroyed=!1,this.defaultEncoding=Zr.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,Zr.encoding&&(Ar||(Ar=string_decoder.StringDecoder),this.decoder=new Ar(Zr.encoding),this.encoding=Zr.encoding)}function Mr(Zr){if(tr=tr||require_stream_duplex(),!(this instanceof Mr))return new Mr(Zr);var Yr=this instanceof tr;this._readableState=new Cr(Zr,this,Yr),this.readable=!0,Zr&&(typeof Zr.read=="function"&&(this._read=Zr.read),typeof Zr.destroy=="function"&&(this._destroy=Zr.destroy)),rr.call(this)}Object.defineProperty(Mr.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(Yr){this._readableState&&(this._readableState.destroyed=Yr)}}),Mr.prototype.destroy=ur.destroy,Mr.prototype._undestroy=ur.undestroy,Mr.prototype._destroy=function(Zr,Yr){Yr(Zr)},Mr.prototype.push=function(Zr,Yr){var Qr=this._readableState,un;return Qr.objectMode?un=!0:typeof Zr=="string"&&(Yr=Yr||Qr.defaultEncoding,Yr!==Qr.encoding&&(Zr=nr.from(Zr,Yr),Yr=""),un=!0),Pr(this,Zr,Yr,!1,un)},Mr.prototype.unshift=function(Zr){return Pr(this,Zr,null,!0,!1)};function Pr(Zr,Yr,Qr,un,gn){cr("readableAddChunk",Yr);var Rn=Zr._readableState;if(Yr===null)Rn.reading=!1,br(Zr,Rn);else{var Pn;if(gn||(Pn=pr(Rn,Yr)),Pn)Dr(Zr,Pn);else if(Rn.objectMode||Yr&&Yr.length>0)if(typeof Yr!="string"&&!Rn.objectMode&&Object.getPrototypeOf(Yr)!==nr.prototype&&(Yr=sr(Yr)),un)Rn.endEmitted?Dr(Zr,new Tr):Sr(Zr,Rn,Yr,!0);else if(Rn.ended)Dr(Zr,new xr);else{if(Rn.destroyed)return!1;Rn.reading=!1,Rn.decoder&&!Qr?(Yr=Rn.decoder.write(Yr),Rn.objectMode||Yr.length!==0?Sr(Zr,Rn,Yr,!1):Er(Zr,Rn)):Sr(Zr,Rn,Yr,!1)}else un||(Rn.reading=!1,Er(Zr,Rn))}return!Rn.ended&&(Rn.length<Rn.highWaterMark||Rn.length===0)}function Sr(Zr,Yr,Qr,un){Yr.flowing&&Yr.length===0&&!Yr.sync?(Yr.awaitDrain=0,Zr.emit("data",Qr)):(Yr.length+=Yr.objectMode?1:Qr.length,un?Yr.buffer.unshift(Qr):Yr.buffer.push(Qr),Yr.needReadable&&_r(Zr)),Er(Zr,Yr)}function pr(Zr,Yr){var Qr;return!or(Yr)&&typeof Yr!="string"&&Yr!==void 0&&!Zr.objectMode&&(Qr=new wr("chunk",["string","Buffer","Uint8Array"],Yr)),Qr}Mr.prototype.isPaused=function(){return this._readableState.flowing===!1},Mr.prototype.setEncoding=function(Zr){Ar||(Ar=string_decoder.StringDecoder);var Yr=new Ar(Zr);this._readableState.decoder=Yr,this._readableState.encoding=this._readableState.decoder.encoding;for(var Qr=this._readableState.buffer.head,un="";Qr!==null;)un+=Yr.write(Qr.data),Qr=Qr.next;return this._readableState.buffer.clear(),un!==""&&this._readableState.buffer.push(un),this._readableState.length=un.length,this};var gr=1073741824;function fr(Zr){return Zr>=gr?Zr=gr:(Zr--,Zr|=Zr>>>1,Zr|=Zr>>>2,Zr|=Zr>>>4,Zr|=Zr>>>8,Zr|=Zr>>>16,Zr++),Zr}function hr(Zr,Yr){return Zr<=0||Yr.length===0&&Yr.ended?0:Yr.objectMode?1:Zr!==Zr?Yr.flowing&&Yr.length?Yr.buffer.head.data.length:Yr.length:(Zr>Yr.highWaterMark&&(Yr.highWaterMark=fr(Zr)),Zr<=Yr.length?Zr:Yr.ended?Yr.length:(Yr.needReadable=!0,0))}Mr.prototype.read=function(Zr){cr("read",Zr),Zr=parseInt(Zr,10);var Yr=this._readableState,Qr=Zr;if(Zr!==0&&(Yr.emittedReadable=!1),Zr===0&&Yr.needReadable&&((Yr.highWaterMark!==0?Yr.length>=Yr.highWaterMark:Yr.length>0)||Yr.ended))return cr("read: emitReadable",Yr.length,Yr.ended),Yr.length===0&&Yr.ended?tn(this):_r(this),null;if(Zr=hr(Zr,Yr),Zr===0&&Yr.ended)return Yr.length===0&&tn(this),null;var un=Yr.needReadable;cr("need readable",un),(Yr.length===0||Yr.length-Zr<Yr.highWaterMark)&&(un=!0,cr("length less than watermark",un)),Yr.ended||Yr.reading?(un=!1,cr("reading or ended",un)):un&&(cr("do read"),Yr.reading=!0,Yr.sync=!0,Yr.length===0&&(Yr.needReadable=!0),this._read(Yr.highWaterMark),Yr.sync=!1,Yr.reading||(Zr=hr(Qr,Yr)));var gn;return Zr>0?gn=an(Zr,Yr):gn=null,gn===null?(Yr.needReadable=Yr.length<=Yr.highWaterMark,Zr=0):(Yr.length-=Zr,Yr.awaitDrain=0),Yr.length===0&&(Yr.ended||(Yr.needReadable=!0),Qr!==Zr&&Yr.ended&&tn(this)),gn!==null&&this.emit("data",gn),gn};function br(Zr,Yr){if(cr("onEofChunk"),!Yr.ended){if(Yr.decoder){var Qr=Yr.decoder.end();Qr&&Qr.length&&(Yr.buffer.push(Qr),Yr.length+=Yr.objectMode?1:Qr.length)}Yr.ended=!0,Yr.sync?_r(Zr):(Yr.needReadable=!1,Yr.emittedReadable||(Yr.emittedReadable=!0,$r(Zr)))}}function _r(Zr){var Yr=Zr._readableState;cr("emitReadable",Yr.needReadable,Yr.emittedReadable),Yr.needReadable=!1,Yr.emittedReadable||(cr("emitReadable",Yr.flowing),Yr.emittedReadable=!0,process.nextTick($r,Zr))}function $r(Zr){var Yr=Zr._readableState;cr("emitReadable_",Yr.destroyed,Yr.length,Yr.ended),!Yr.destroyed&&(Yr.length||Yr.ended)&&(Zr.emit("readable"),Yr.emittedReadable=!1),Yr.needReadable=!Yr.flowing&&!Yr.ended&&Yr.length<=Yr.highWaterMark,qr(Zr)}function Er(Zr,Yr){Yr.readingMore||(Yr.readingMore=!0,process.nextTick(vr,Zr,Yr))}function vr(Zr,Yr){for(;!Yr.reading&&!Yr.ended&&(Yr.length<Yr.highWaterMark||Yr.flowing&&Yr.length===0);){var Qr=Yr.length;if(cr("maybeReadMore read 0"),Zr.read(0),Qr===Yr.length)break}Yr.readingMore=!1}Mr.prototype._read=function(Zr){Dr(this,new Or("_read()"))},Mr.prototype.pipe=function(Zr,Yr){var Qr=this,un=this._readableState;switch(un.pipesCount){case 0:un.pipes=Zr;break;case 1:un.pipes=[un.pipes,Zr];break;default:un.pipes.push(Zr);break}un.pipesCount+=1,cr("pipe count=%d opts=%j",un.pipesCount,Yr);var gn=(!Yr||Yr.end!==!1)&&Zr!==process.stdout&&Zr!==process.stderr,Rn=gn?Cn:Dn;un.endEmitted?process.nextTick(Rn):Qr.once("end",Rn),Zr.on("unpipe",Pn);function Pn(Xr,Lr){cr("onunpipe"),Xr===Qr&&Lr&&Lr.hasUnpiped===!1&&(Lr.hasUnpiped=!0,Zn())}function Cn(){cr("onend"),Zr.end()}var Sn=Ir(Qr);Zr.on("drain",Sn);var zn=!1;function Zn(){cr("cleanup"),Zr.removeListener("close",vn),Zr.removeListener("finish",xn),Zr.removeListener("drain",Sn),Zr.removeListener("error",eo),Zr.removeListener("unpipe",Pn),Qr.removeListener("end",Cn),Qr.removeListener("end",Dn),Qr.removeListener("data",Kn),zn=!0,un.awaitDrain&&(!Zr._writableState||Zr._writableState.needDrain)&&Sn()}Qr.on("data",Kn);function Kn(Xr){cr("ondata");var Lr=Zr.write(Xr);cr("dest.write",Lr),Lr===!1&&((un.pipesCount===1&&un.pipes===Zr||un.pipesCount>1&&dn(un.pipes,Zr)!==-1)&&!zn&&(cr("false write response, pause",un.awaitDrain),un.awaitDrain++),Qr.pause())}function eo(Xr){cr("onerror",Xr),Dn(),Zr.removeListener("error",eo),er(Zr,"error")===0&&Dr(Zr,Xr)}zr(Zr,"error",eo);function vn(){Zr.removeListener("finish",xn),Dn()}Zr.once("close",vn);function xn(){cr("onfinish"),Zr.removeListener("close",vn),Dn()}Zr.once("finish",xn);function Dn(){cr("unpipe"),Qr.unpipe(Zr)}return Zr.emit("pipe",Qr),un.flowing||(cr("pipe resume"),Qr.resume()),Zr};function Ir(Zr){return function(){var Qr=Zr._readableState;cr("pipeOnDrain",Qr.awaitDrain),Qr.awaitDrain&&Qr.awaitDrain--,Qr.awaitDrain===0&&er(Zr,"data")&&(Qr.flowing=!0,qr(Zr))}}Mr.prototype.unpipe=function(Zr){var Yr=this._readableState,Qr={hasUnpiped:!1};if(Yr.pipesCount===0)return this;if(Yr.pipesCount===1)return Zr&&Zr!==Yr.pipes?this:(Zr||(Zr=Yr.pipes),Yr.pipes=null,Yr.pipesCount=0,Yr.flowing=!1,Zr&&Zr.emit("unpipe",this,Qr),this);if(!Zr){var un=Yr.pipes,gn=Yr.pipesCount;Yr.pipes=null,Yr.pipesCount=0,Yr.flowing=!1;for(var Rn=0;Rn<gn;Rn++)un[Rn].emit("unpipe",this,{hasUnpiped:!1});return this}var Pn=dn(Yr.pipes,Zr);return Pn===-1?this:(Yr.pipes.splice(Pn,1),Yr.pipesCount-=1,Yr.pipesCount===1&&(Yr.pipes=Yr.pipes[0]),Zr.emit("unpipe",this,Qr),this)},Mr.prototype.on=function(Zr,Yr){var Qr=rr.prototype.on.call(this,Zr,Yr),un=this._readableState;return Zr==="data"?(un.readableListening=this.listenerCount("readable")>0,un.flowing!==!1&&this.resume()):Zr==="readable"&&!un.endEmitted&&!un.readableListening&&(un.readableListening=un.needReadable=!0,un.flowing=!1,un.emittedReadable=!1,cr("on readable",un.length,un.reading),un.length?_r(this):un.reading||process.nextTick(Br,this)),Qr},Mr.prototype.addListener=Mr.prototype.on,Mr.prototype.removeListener=function(Zr,Yr){var Qr=rr.prototype.removeListener.call(this,Zr,Yr);return Zr==="readable"&&process.nextTick(Rr,this),Qr},Mr.prototype.removeAllListeners=function(Zr){var Yr=rr.prototype.removeAllListeners.apply(this,arguments);return(Zr==="readable"||Zr===void 0)&&process.nextTick(Rr,this),Yr};function Rr(Zr){var Yr=Zr._readableState;Yr.readableListening=Zr.listenerCount("readable")>0,Yr.resumeScheduled&&!Yr.paused?Yr.flowing=!0:Zr.listenerCount("data")>0&&Zr.resume()}function Br(Zr){cr("readable nexttick read 0"),Zr.read(0)}Mr.prototype.resume=function(){var Zr=this._readableState;return Zr.flowing||(cr("resume"),Zr.flowing=!Zr.readableListening,Jr(this,Zr)),Zr.paused=!1,this};function Jr(Zr,Yr){Yr.resumeScheduled||(Yr.resumeScheduled=!0,process.nextTick(Wr,Zr,Yr))}function Wr(Zr,Yr){cr("resume",Yr.reading),Yr.reading||Zr.read(0),Yr.resumeScheduled=!1,Zr.emit("resume"),qr(Zr),Yr.flowing&&!Yr.reading&&Zr.read(0)}Mr.prototype.pause=function(){return cr("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(cr("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function qr(Zr){var Yr=Zr._readableState;for(cr("flow",Yr.flowing);Yr.flowing&&Zr.read()!==null;);}Mr.prototype.wrap=function(Zr){var Yr=this,Qr=this._readableState,un=!1;Zr.on("end",function(){if(cr("wrapped end"),Qr.decoder&&!Qr.ended){var Pn=Qr.decoder.end();Pn&&Pn.length&&Yr.push(Pn)}Yr.push(null)}),Zr.on("data",function(Pn){if(cr("wrapped data"),Qr.decoder&&(Pn=Qr.decoder.write(Pn)),!(Qr.objectMode&&Pn==null)&&!(!Qr.objectMode&&(!Pn||!Pn.length))){var Cn=Yr.push(Pn);Cn||(un=!0,Zr.pause())}});for(var gn in Zr)this[gn]===void 0&&typeof Zr[gn]=="function"&&(this[gn]=function(Cn){return function(){return Zr[Cn].apply(Zr,arguments)}}(gn));for(var Rn=0;Rn<Hr.length;Rn++)Zr.on(Hr[Rn],this.emit.bind(this,Hr[Rn]));return this._read=function(Pn){cr("wrapped _read",Pn),un&&(un=!1,Zr.resume())},this},typeof Symbol=="function"&&(Mr.prototype[Symbol.asyncIterator]=function(){return Nr===void 0&&(Nr=requireAsync_iterator()),Nr(this)}),Object.defineProperty(Mr.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(Mr.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(Mr.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(Yr){this._readableState&&(this._readableState.flowing=Yr)}}),Mr._fromList=an,Object.defineProperty(Mr.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function an(Zr,Yr){if(Yr.length===0)return null;var Qr;return Yr.objectMode?Qr=Yr.buffer.shift():!Zr||Zr>=Yr.length?(Yr.decoder?Qr=Yr.buffer.join(""):Yr.buffer.length===1?Qr=Yr.buffer.first():Qr=Yr.buffer.concat(Yr.length),Yr.buffer.clear()):Qr=Yr.buffer.consume(Zr,Yr.decoder),Qr}function tn(Zr){var Yr=Zr._readableState;cr("endReadable",Yr.endEmitted),Yr.endEmitted||(Yr.ended=!0,process.nextTick(cn,Yr,Zr))}function cn(Zr,Yr){if(cr("endReadableNT",Zr.endEmitted,Zr.length),!Zr.endEmitted&&Zr.length===0&&(Zr.endEmitted=!0,Yr.readable=!1,Yr.emit("end"),Zr.autoDestroy)){var Qr=Yr._writableState;(!Qr||Qr.autoDestroy&&Qr.finished)&&Yr.destroy()}}typeof Symbol=="function"&&(Mr.from=function(Zr,Yr){return Ur===void 0&&(Ur=requireFromBrowser()),Ur(Mr,Zr,Yr)});function dn(Zr,Yr){for(var Qr=0,un=Zr.length;Qr<un;Qr++)if(Zr[Qr]===Yr)return Qr;return-1}return _stream_readable}var _stream_transform=Transform$3,_require$codes$1=errorsBrowser.codes,ERR_METHOD_NOT_IMPLEMENTED=_require$codes$1.ERR_METHOD_NOT_IMPLEMENTED,ERR_MULTIPLE_CALLBACK=_require$codes$1.ERR_MULTIPLE_CALLBACK,ERR_TRANSFORM_ALREADY_TRANSFORMING=_require$codes$1.ERR_TRANSFORM_ALREADY_TRANSFORMING,ERR_TRANSFORM_WITH_LENGTH_0=_require$codes$1.ERR_TRANSFORM_WITH_LENGTH_0,Duplex=require_stream_duplex();inherits_browserExports(Transform$3,Duplex);function afterTransform(tr,er){var rr=this._transformState;rr.transforming=!1;var nr=rr.writecb;if(nr===null)return this.emit("error",new ERR_MULTIPLE_CALLBACK);rr.writechunk=null,rr.writecb=null,er!=null&&this.push(er),nr(tr);var ir=this._readableState;ir.reading=!1,(ir.needReadable||ir.length<ir.highWaterMark)&&this._read(ir.highWaterMark)}function Transform$3(tr){if(!(this instanceof Transform$3))return new Transform$3(tr);Duplex.call(this,tr),this._transformState={afterTransform:afterTransform.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,tr&&(typeof tr.transform=="function"&&(this._transform=tr.transform),typeof tr.flush=="function"&&(this._flush=tr.flush)),this.on("prefinish",prefinish)}function prefinish(){var tr=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(er,rr){done(tr,er,rr)}):done(this,null,null)}Transform$3.prototype.push=function(tr,er){return this._transformState.needTransform=!1,Duplex.prototype.push.call(this,tr,er)};Transform$3.prototype._transform=function(tr,er,rr){rr(new ERR_METHOD_NOT_IMPLEMENTED("_transform()"))};Transform$3.prototype._write=function(tr,er,rr){var nr=this._transformState;if(nr.writecb=rr,nr.writechunk=tr,nr.writeencoding=er,!nr.transforming){var ir=this._readableState;(nr.needTransform||ir.needReadable||ir.length<ir.highWaterMark)&&this._read(ir.highWaterMark)}};Transform$3.prototype._read=function(tr){var er=this._transformState;er.writechunk!==null&&!er.transforming?(er.transforming=!0,this._transform(er.writechunk,er.writeencoding,er.afterTransform)):er.needTransform=!0};Transform$3.prototype._destroy=function(tr,er){Duplex.prototype._destroy.call(this,tr,function(rr){er(rr)})};function done(tr,er,rr){if(er)return tr.emit("error",er);if(rr!=null&&tr.push(rr),tr._writableState.length)throw new ERR_TRANSFORM_WITH_LENGTH_0;if(tr._transformState.transforming)throw new ERR_TRANSFORM_ALREADY_TRANSFORMING;return tr.push(null)}var _stream_passthrough=PassThrough,Transform$2=_stream_transform;inherits_browserExports(PassThrough,Transform$2);function PassThrough(tr){if(!(this instanceof PassThrough))return new PassThrough(tr);Transform$2.call(this,tr)}PassThrough.prototype._transform=function(tr,er,rr){rr(null,tr)};var eos;function once(tr){var er=!1;return function(){er||(er=!0,tr.apply(void 0,arguments))}}var _require$codes=errorsBrowser.codes,ERR_MISSING_ARGS=_require$codes.ERR_MISSING_ARGS,ERR_STREAM_DESTROYED=_require$codes.ERR_STREAM_DESTROYED;function noop(tr){if(tr)throw tr}function isRequest(tr){return tr.setHeader&&typeof tr.abort=="function"}function destroyer(tr,er,rr,nr){nr=once(nr);var ir=!1;tr.on("close",function(){ir=!0}),eos===void 0&&(eos=endOfStream),eos(tr,{readable:er,writable:rr},function(or){if(or)return nr(or);ir=!0,nr()});var sr=!1;return function(or){if(!ir&&!sr){if(sr=!0,isRequest(tr))return tr.abort();if(typeof tr.destroy=="function")return tr.destroy();nr(or||new ERR_STREAM_DESTROYED("pipe"))}}}function call(tr){tr()}function pipe(tr,er){return tr.pipe(er)}function popCallback(tr){return!tr.length||typeof tr[tr.length-1]!="function"?noop:tr.pop()}function pipeline(){for(var tr=arguments.length,er=new Array(tr),rr=0;rr<tr;rr++)er[rr]=arguments[rr];var nr=popCallback(er);if(Array.isArray(er[0])&&(er=er[0]),er.length<2)throw new ERR_MISSING_ARGS("streams");var ir,sr=er.map(function(or,ar){var cr=ar<er.length-1,lr=ar>0;return destroyer(or,cr,lr,function(ur){ir||(ir=ur),ur&&sr.forEach(call),!cr&&(sr.forEach(call),nr(ir))})});return er.reduce(pipe)}var pipeline_1=pipeline;(function(tr,er){er=tr.exports=require_stream_readable(),er.Stream=er,er.Readable=er,er.Writable=require_stream_writable(),er.Duplex=require_stream_duplex(),er.Transform=_stream_transform,er.PassThrough=_stream_passthrough,er.finished=endOfStream,er.pipeline=pipeline_1})(readableBrowser,readableBrowser.exports);var readableBrowserExports=readableBrowser.exports;const{Transform:Transform$1}=readableBrowserExports;var keccak$2=tr=>class R0 extends Transform$1{constructor(rr,nr,ir,sr,or){super(or),this._rate=rr,this._capacity=nr,this._delimitedSuffix=ir,this._hashBitLength=sr,this._options=or,this._state=new tr,this._state.initialize(rr,nr),this._finalized=!1}_transform(rr,nr,ir){let sr=null;try{this.update(rr,nr)}catch(or){sr=or}ir(sr)}_flush(rr){let nr=null;try{this.push(this.digest())}catch(ir){nr=ir}rr(nr)}update(rr,nr){if(!Buffer.isBuffer(rr)&&typeof rr!="string")throw new TypeError("Data must be a string or a buffer");if(this._finalized)throw new Error("Digest already called");return Buffer.isBuffer(rr)||(rr=Buffer.from(rr,nr)),this._state.absorb(rr),this}digest(rr){if(this._finalized)throw new Error("Digest already called");this._finalized=!0,this._delimitedSuffix&&this._state.absorbLastFewBits(this._delimitedSuffix);let nr=this._state.squeeze(this._hashBitLength/8);return rr!==void 0&&(nr=nr.toString(rr)),this._resetState(),nr}_resetState(){return this._state.initialize(this._rate,this._capacity),this}_clone(){const rr=new R0(this._rate,this._capacity,this._delimitedSuffix,this._hashBitLength,this._options);return this._state.copy(rr._state),rr._finalized=this._finalized,rr}};const{Transform}=readableBrowserExports;var shake=tr=>class T0 extends Transform{constructor(rr,nr,ir,sr){super(sr),this._rate=rr,this._capacity=nr,this._delimitedSuffix=ir,this._options=sr,this._state=new tr,this._state.initialize(rr,nr),this._finalized=!1}_transform(rr,nr,ir){let sr=null;try{this.update(rr,nr)}catch(or){sr=or}ir(sr)}_flush(){}_read(rr){this.push(this.squeeze(rr))}update(rr,nr){if(!Buffer.isBuffer(rr)&&typeof rr!="string")throw new TypeError("Data must be a string or a buffer");if(this._finalized)throw new Error("Squeeze already called");return Buffer.isBuffer(rr)||(rr=Buffer.from(rr,nr)),this._state.absorb(rr),this}squeeze(rr,nr){this._finalized||(this._finalized=!0,this._state.absorbLastFewBits(this._delimitedSuffix));let ir=this._state.squeeze(rr);return nr!==void 0&&(ir=ir.toString(nr)),ir}_resetState(){return this._state.initialize(this._rate,this._capacity),this}_clone(){const rr=new T0(this._rate,this._capacity,this._delimitedSuffix,this._options);return this._state.copy(rr._state),rr._finalized=this._finalized,rr}};const createKeccak=keccak$2,createShake=shake;var api=function(tr){const er=createKeccak(tr),rr=createShake(tr);return function(nr,ir){switch(typeof nr=="string"?nr.toLowerCase():nr){case"keccak224":return new er(1152,448,null,224,ir);case"keccak256":return new er(1088,512,null,256,ir);case"keccak384":return new er(832,768,null,384,ir);case"keccak512":return new er(576,1024,null,512,ir);case"sha3-224":return new er(1152,448,6,224,ir);case"sha3-256":return new er(1088,512,6,256,ir);case"sha3-384":return new er(832,768,6,384,ir);case"sha3-512":return new er(576,1024,6,512,ir);case"shake128":return new rr(1344,256,31,ir);case"shake256":return new rr(1088,512,31,ir);default:throw new Error("Invald algorithm: "+nr)}}},keccakStateUnroll={};const P1600_ROUND_CONSTANTS=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648];keccakStateUnroll.p1600=function(tr){for(let er=0;er<24;++er){const rr=tr[0]^tr[10]^tr[20]^tr[30]^tr[40],nr=tr[1]^tr[11]^tr[21]^tr[31]^tr[41],ir=tr[2]^tr[12]^tr[22]^tr[32]^tr[42],sr=tr[3]^tr[13]^tr[23]^tr[33]^tr[43],or=tr[4]^tr[14]^tr[24]^tr[34]^tr[44],ar=tr[5]^tr[15]^tr[25]^tr[35]^tr[45],cr=tr[6]^tr[16]^tr[26]^tr[36]^tr[46],lr=tr[7]^tr[17]^tr[27]^tr[37]^tr[47],ur=tr[8]^tr[18]^tr[28]^tr[38]^tr[48],dr=tr[9]^tr[19]^tr[29]^tr[39]^tr[49];let yr=ur^(ir<<1|sr>>>31),mr=dr^(sr<<1|ir>>>31);const wr=tr[0]^yr,xr=tr[1]^mr,Or=tr[10]^yr,Tr=tr[11]^mr,Ar=tr[20]^yr,Nr=tr[21]^mr,Ur=tr[30]^yr,Dr=tr[31]^mr,Hr=tr[40]^yr,zr=tr[41]^mr;yr=rr^(or<<1|ar>>>31),mr=nr^(ar<<1|or>>>31);const Cr=tr[2]^yr,Mr=tr[3]^mr,Pr=tr[12]^yr,Sr=tr[13]^mr,pr=tr[22]^yr,gr=tr[23]^mr,fr=tr[32]^yr,hr=tr[33]^mr,br=tr[42]^yr,_r=tr[43]^mr;yr=ir^(cr<<1|lr>>>31),mr=sr^(lr<<1|cr>>>31);const $r=tr[4]^yr,Er=tr[5]^mr,vr=tr[14]^yr,Ir=tr[15]^mr,Rr=tr[24]^yr,Br=tr[25]^mr,Jr=tr[34]^yr,Wr=tr[35]^mr,qr=tr[44]^yr,an=tr[45]^mr;yr=or^(ur<<1|dr>>>31),mr=ar^(dr<<1|ur>>>31);const tn=tr[6]^yr,cn=tr[7]^mr,dn=tr[16]^yr,Zr=tr[17]^mr,Yr=tr[26]^yr,Qr=tr[27]^mr,un=tr[36]^yr,gn=tr[37]^mr,Rn=tr[46]^yr,Pn=tr[47]^mr;yr=cr^(rr<<1|nr>>>31),mr=lr^(nr<<1|rr>>>31);const Cn=tr[8]^yr,Sn=tr[9]^mr,zn=tr[18]^yr,Zn=tr[19]^mr,Kn=tr[28]^yr,eo=tr[29]^mr,vn=tr[38]^yr,xn=tr[39]^mr,Dn=tr[48]^yr,Xr=tr[49]^mr,Lr=wr,Fr=xr,ln=Tr<<4|Or>>>28,mn=Or<<4|Tr>>>28,_n=Ar<<3|Nr>>>29,An=Nr<<3|Ar>>>29,Gn=Dr<<9|Ur>>>23,Xs=Ur<<9|Dr>>>23,Jn=Hr<<18|zr>>>14,no=zr<<18|Hr>>>14,zs=Cr<<1|Mr>>>31,to=Mr<<1|Cr>>>31,No=Sr<<12|Pr>>>20,Ro=Pr<<12|Sr>>>20,uo=pr<<10|gr>>>22,To=gr<<10|pr>>>22,Eo=hr<<13|fr>>>19,so=fr<<13|hr>>>19,Po=br<<2|_r>>>30,hn=_r<<2|br>>>30,pn=Er<<30|$r>>>2,kn=$r<<30|Er>>>2,Mn=vr<<6|Ir>>>26,Ln=Ir<<6|vr>>>26,vo=Br<<11|Rr>>>21,Gr=Rr<<11|Br>>>21,nn=Jr<<15|Wr>>>17,sn=Wr<<15|Jr>>>17,kr=an<<29|qr>>>3,fn=qr<<29|an>>>3,En=tn<<28|cn>>>4,$n=cn<<28|tn>>>4,Tn=Zr<<23|dn>>>9,Bn=dn<<23|Zr>>>9,jn=Yr<<25|Qr>>>7,Hn=Qr<<25|Yr>>>7,go=un<<21|gn>>>11,Yn=gn<<21|un>>>11,oo=Pn<<24|Rn>>>8,co=Rn<<24|Pn>>>8,ro=Cn<<27|Sn>>>5,fo=Sn<<27|Cn>>>5,io=zn<<20|Zn>>>12,ao=Zn<<20|zn>>>12,lo=eo<<7|Kn>>>25,Ws=Kn<<7|eo>>>25,Qs=vn<<8|xn>>>24,_i=xn<<8|vn>>>24,Js=Dn<<14|Xr>>>18,Ls=Xr<<14|Dn>>>18;tr[0]=Lr^~No&vo,tr[1]=Fr^~Ro&Gr,tr[10]=En^~io&_n,tr[11]=$n^~ao&An,tr[20]=zs^~Mn&jn,tr[21]=to^~Ln&Hn,tr[30]=ro^~ln&uo,tr[31]=fo^~mn&To,tr[40]=pn^~Tn&lo,tr[41]=kn^~Bn&Ws,tr[2]=No^~vo&go,tr[3]=Ro^~Gr&Yn,tr[12]=io^~_n&Eo,tr[13]=ao^~An&so,tr[22]=Mn^~jn&Qs,tr[23]=Ln^~Hn&_i,tr[32]=ln^~uo&nn,tr[33]=mn^~To&sn,tr[42]=Tn^~lo&Gn,tr[43]=Bn^~Ws&Xs,tr[4]=vo^~go&Js,tr[5]=Gr^~Yn&Ls,tr[14]=_n^~Eo&kr,tr[15]=An^~so&fn,tr[24]=jn^~Qs&Jn,tr[25]=Hn^~_i&no,tr[34]=uo^~nn&oo,tr[35]=To^~sn&co,tr[44]=lo^~Gn&Po,tr[45]=Ws^~Xs&hn,tr[6]=go^~Js&Lr,tr[7]=Yn^~Ls&Fr,tr[16]=Eo^~kr&En,tr[17]=so^~fn&$n,tr[26]=Qs^~Jn&zs,tr[27]=_i^~no&to,tr[36]=nn^~oo&ro,tr[37]=sn^~co&fo,tr[46]=Gn^~Po&pn,tr[47]=Xs^~hn&kn,tr[8]=Js^~Lr&No,tr[9]=Ls^~Fr&Ro,tr[18]=kr^~En&io,tr[19]=fn^~$n&ao,tr[28]=Jn^~zs&Mn,tr[29]=no^~to&Ln,tr[38]=oo^~ro&ln,tr[39]=co^~fo&mn,tr[48]=Po^~pn&Tn,tr[49]=hn^~kn&Bn,tr[0]^=P1600_ROUND_CONSTANTS[er*2],tr[1]^=P1600_ROUND_CONSTANTS[er*2+1]}};const keccakState=keccakStateUnroll;function Keccak(){this.state=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.blockSize=null,this.count=0,this.squeezing=!1}Keccak.prototype.initialize=function(tr,er){for(let rr=0;rr<50;++rr)this.state[rr]=0;this.blockSize=tr/8,this.count=0,this.squeezing=!1};Keccak.prototype.absorb=function(tr){for(let er=0;er<tr.length;++er)this.state[~~(this.count/4)]^=tr[er]<<8*(this.count%4),this.count+=1,this.count===this.blockSize&&(keccakState.p1600(this.state),this.count=0)};Keccak.prototype.absorbLastFewBits=function(tr){this.state[~~(this.count/4)]^=tr<<8*(this.count%4),tr&128&&this.count===this.blockSize-1&&keccakState.p1600(this.state),this.state[~~((this.blockSize-1)/4)]^=128<<8*((this.blockSize-1)%4),keccakState.p1600(this.state),this.count=0,this.squeezing=!0};Keccak.prototype.squeeze=function(tr){this.squeezing||this.absorbLastFewBits(1);const er=Buffer.alloc(tr);for(let rr=0;rr<tr;++rr)er[rr]=this.state[~~(this.count/4)]>>>8*(this.count%4)&255,this.count+=1,this.count===this.blockSize&&(keccakState.p1600(this.state),this.count=0);return er};Keccak.prototype.copy=function(tr){for(let er=0;er<50;++er)tr.state[er]=this.state[er];tr.blockSize=this.blockSize,tr.count=this.count,tr.squeezing=this.squeezing};var keccak$1=Keccak,js=api(keccak$1);const createKeccakHash=js;function zeros(tr){return Buffer.allocUnsafe(tr).fill(0)}function bitLengthFromBigInt(tr){return tr.toString(2).length}function bufferBEFromBigInt(tr,er){let rr=tr.toString(16);rr.length%2!==0&&(rr="0"+rr);const nr=rr.match(/.{1,2}/g).map(ir=>parseInt(ir,16));for(;nr.length<er;)nr.unshift(0);return Buffer.from(nr)}function twosFromBigInt(tr,er){const rr=tr<0n;let nr;if(rr){const ir=(1n<<BigInt(er))-1n;nr=(~tr&ir)+1n}else nr=tr;return nr&=(1n<<BigInt(er))-1n,nr}function setLength(tr,er,rr){const nr=zeros(er);return tr=toBuffer(tr),rr?tr.length<er?(tr.copy(nr),nr):tr.slice(0,er):tr.length<er?(tr.copy(nr,er-tr.length),nr):tr.slice(-er)}function setLengthRight(tr,er){return setLength(tr,er,!0)}function toBuffer(tr){if(!Buffer.isBuffer(tr))if(Array.isArray(tr))tr=Buffer.from(tr);else if(typeof tr=="string")isHexString(tr)?tr=Buffer.from(padToEven(stripHexPrefix(tr)),"hex"):tr=Buffer.from(tr);else if(typeof tr=="number")tr=intToBuffer(tr);else if(tr==null)tr=Buffer.allocUnsafe(0);else if(typeof tr=="bigint")tr=bufferBEFromBigInt(tr);else if(tr.toArray)tr=Buffer.from(tr.toArray());else throw new Error("invalid type");return tr}function bufferToHex(tr){return tr=toBuffer(tr),"0x"+tr.toString("hex")}function keccak(tr,er){return tr=toBuffer(tr),er||(er=256),createKeccakHash("keccak"+er).update(tr).digest()}function padToEven(tr){return tr.length%2?"0"+tr:tr}function isHexString(tr){return typeof tr=="string"&&tr.match(/^0x[0-9A-Fa-f]*$/)}function stripHexPrefix(tr){return typeof tr=="string"&&tr.startsWith("0x")?tr.slice(2):tr}var util$4={zeros,setLength,setLengthRight,isHexString,stripHexPrefix,toBuffer,bufferToHex,keccak,bitLengthFromBigInt,bufferBEFromBigInt,twosFromBigInt};const util$3=util$4;function elementaryName(tr){return tr.startsWith("int[")?"int256"+tr.slice(3):tr==="int"?"int256":tr.startsWith("uint[")?"uint256"+tr.slice(4):tr==="uint"?"uint256":tr.startsWith("fixed[")?"fixed128x128"+tr.slice(5):tr==="fixed"?"fixed128x128":tr.startsWith("ufixed[")?"ufixed128x128"+tr.slice(6):tr==="ufixed"?"ufixed128x128":tr}function parseTypeN(tr){return parseInt(/^\D+(\d+)$/.exec(tr)[1],10)}function parseTypeNxM(tr){var er=/^\D+(\d+)x(\d+)$/.exec(tr);return[parseInt(er[1],10),parseInt(er[2],10)]}function parseTypeArray(tr){var er=tr.match(/(.*)\[(.*?)\]$/);return er?er[2]===""?"dynamic":parseInt(er[2],10):null}function parseNumber(tr){var er=typeof tr;if(er==="string"||er==="number")return BigInt(tr);if(er==="bigint")return tr;throw new Error("Argument is not a number")}function encodeSingle(tr,er){var rr,nr,ir,sr;if(tr==="address")return encodeSingle("uint160",parseNumber(er));if(tr==="bool")return encodeSingle("uint8",er?1:0);if(tr==="string")return encodeSingle("bytes",new Buffer(er,"utf8"));if(isArray(tr)){if(typeof er.length>"u")throw new Error("Not an array?");if(rr=parseTypeArray(tr),rr!=="dynamic"&&rr!==0&&er.length>rr)throw new Error("Elements exceed array size: "+rr);ir=[],tr=tr.slice(0,tr.lastIndexOf("[")),typeof er=="string"&&(er=JSON.parse(er));for(sr in er)ir.push(encodeSingle(tr,er[sr]));if(rr==="dynamic"){var or=encodeSingle("uint256",er.length);ir.unshift(or)}return Buffer.concat(ir)}else{if(tr==="bytes")return er=new Buffer(er),ir=Buffer.concat([encodeSingle("uint256",er.length),er]),er.length%32!==0&&(ir=Buffer.concat([ir,util$3.zeros(32-er.length%32)])),ir;if(tr.startsWith("bytes")){if(rr=parseTypeN(tr),rr<1||rr>32)throw new Error("Invalid bytes<N> width: "+rr);return util$3.setLengthRight(er,32)}else if(tr.startsWith("uint")){if(rr=parseTypeN(tr),rr%8||rr<8||rr>256)throw new Error("Invalid uint<N> width: "+rr);nr=parseNumber(er);const ar=util$3.bitLengthFromBigInt(nr);if(ar>rr)throw new Error("Supplied uint exceeds width: "+rr+" vs "+ar);if(nr<0)throw new Error("Supplied uint is negative");return util$3.bufferBEFromBigInt(nr,32)}else if(tr.startsWith("int")){if(rr=parseTypeN(tr),rr%8||rr<8||rr>256)throw new Error("Invalid int<N> width: "+rr);nr=parseNumber(er);const ar=util$3.bitLengthFromBigInt(nr);if(ar>rr)throw new Error("Supplied int exceeds width: "+rr+" vs "+ar);const cr=util$3.twosFromBigInt(nr,256);return util$3.bufferBEFromBigInt(cr,32)}else if(tr.startsWith("ufixed")){if(rr=parseTypeNxM(tr),nr=parseNumber(er),nr<0)throw new Error("Supplied ufixed is negative");return encodeSingle("uint256",nr*BigInt(2)**BigInt(rr[1]))}else if(tr.startsWith("fixed"))return rr=parseTypeNxM(tr),encodeSingle("int256",parseNumber(er)*BigInt(2)**BigInt(rr[1]))}throw new Error("Unsupported or invalid type: "+tr)}function isDynamic(tr){return tr==="string"||tr==="bytes"||parseTypeArray(tr)==="dynamic"}function isArray(tr){return tr.lastIndexOf("]")===tr.length-1}function rawEncode(tr,er){var rr=[],nr=[],ir=32*tr.length;for(var sr in tr){var or=elementaryName(tr[sr]),ar=er[sr],cr=encodeSingle(or,ar);isDynamic(or)?(rr.push(encodeSingle("uint256",ir)),nr.push(cr),ir+=cr.length):rr.push(cr)}return Buffer.concat(rr.concat(nr))}function solidityPack(tr,er){if(tr.length!==er.length)throw new Error("Number of types are not matching the values");for(var rr,nr,ir=[],sr=0;sr<tr.length;sr++){var or=elementaryName(tr[sr]),ar=er[sr];if(or==="bytes")ir.push(ar);else if(or==="string")ir.push(new Buffer(ar,"utf8"));else if(or==="bool")ir.push(new Buffer(ar?"01":"00","hex"));else if(or==="address")ir.push(util$3.setLength(ar,20));else if(or.startsWith("bytes")){if(rr=parseTypeN(or),rr<1||rr>32)throw new Error("Invalid bytes<N> width: "+rr);ir.push(util$3.setLengthRight(ar,rr))}else if(or.startsWith("uint")){if(rr=parseTypeN(or),rr%8||rr<8||rr>256)throw new Error("Invalid uint<N> width: "+rr);nr=parseNumber(ar);const cr=util$3.bitLengthFromBigInt(nr);if(cr>rr)throw new Error("Supplied uint exceeds width: "+rr+" vs "+cr);ir.push(util$3.bufferBEFromBigInt(nr,rr/8))}else if(or.startsWith("int")){if(rr=parseTypeN(or),rr%8||rr<8||rr>256)throw new Error("Invalid int<N> width: "+rr);nr=parseNumber(ar);const cr=util$3.bitLengthFromBigInt(nr);if(cr>rr)throw new Error("Supplied int exceeds width: "+rr+" vs "+cr);const lr=util$3.twosFromBigInt(nr,rr);ir.push(util$3.bufferBEFromBigInt(lr,rr/8))}else throw new Error("Unsupported or invalid type: "+or)}return Buffer.concat(ir)}function soliditySHA3(tr,er){return util$3.keccak(solidityPack(tr,er))}var abi$1={rawEncode,solidityPack,soliditySHA3};const util$2=util$4,abi=abi$1,TYPED_MESSAGE_SCHEMA={type:"object",properties:{types:{type:"object",additionalProperties:{type:"array",items:{type:"object",properties:{name:{type:"string"},type:{type:"string"}},required:["name","type"]}}},primaryType:{type:"string"},domain:{type:"object"},message:{type:"object"}},required:["types","primaryType","domain","message"]},TypedDataUtils={encodeData(tr,er,rr,nr=!0){const ir=["bytes32"],sr=[this.hashType(tr,rr)];if(nr){const or=(ar,cr,lr)=>{if(rr[cr]!==void 0)return["bytes32",lr==null?"0x0000000000000000000000000000000000000000000000000000000000000000":util$2.keccak(this.encodeData(cr,lr,rr,nr))];if(lr===void 0)throw new Error(`missing value for field ${ar} of type ${cr}`);if(cr==="bytes")return["bytes32",util$2.keccak(lr)];if(cr==="string")return typeof lr=="string"&&(lr=Buffer.from(lr,"utf8")),["bytes32",util$2.keccak(lr)];if(cr.lastIndexOf("]")===cr.length-1){const ur=cr.slice(0,cr.lastIndexOf("[")),dr=lr.map(yr=>or(ar,ur,yr));return["bytes32",util$2.keccak(abi.rawEncode(dr.map(([yr])=>yr),dr.map(([,yr])=>yr)))]}return[cr,lr]};for(const ar of rr[tr]){const[cr,lr]=or(ar.name,ar.type,er[ar.name]);ir.push(cr),sr.push(lr)}}else for(const or of rr[tr]){let ar=er[or.name];if(ar!==void 0)if(or.type==="bytes")ir.push("bytes32"),ar=util$2.keccak(ar),sr.push(ar);else if(or.type==="string")ir.push("bytes32"),typeof ar=="string"&&(ar=Buffer.from(ar,"utf8")),ar=util$2.keccak(ar),sr.push(ar);else if(rr[or.type]!==void 0)ir.push("bytes32"),ar=util$2.keccak(this.encodeData(or.type,ar,rr,nr)),sr.push(ar);else{if(or.type.lastIndexOf("]")===or.type.length-1)throw new Error("Arrays currently unimplemented in encodeData");ir.push(or.type),sr.push(ar)}}return abi.rawEncode(ir,sr)},encodeType(tr,er){let rr="",nr=this.findTypeDependencies(tr,er).filter(ir=>ir!==tr);nr=[tr].concat(nr.sort());for(const ir of nr){if(!er[ir])throw new Error("No type definition specified: "+ir);rr+=ir+"("+er[ir].map(({name:or,type:ar})=>ar+" "+or).join(",")+")"}return rr},findTypeDependencies(tr,er,rr=[]){if(tr=tr.match(/^\w*/)[0],rr.includes(tr)||er[tr]===void 0)return rr;rr.push(tr);for(const nr of er[tr])for(const ir of this.findTypeDependencies(nr.type,er,rr))!rr.includes(ir)&&rr.push(ir);return rr},hashStruct(tr,er,rr,nr=!0){return util$2.keccak(this.encodeData(tr,er,rr,nr))},hashType(tr,er){return util$2.keccak(this.encodeType(tr,er))},sanitizeData(tr){const er={};for(const rr in TYPED_MESSAGE_SCHEMA.properties)tr[rr]&&(er[rr]=tr[rr]);return er.types&&(er.types=Object.assign({EIP712Domain:[]},er.types)),er},hash(tr,er=!0){const rr=this.sanitizeData(tr),nr=[Buffer.from("1901","hex")];return nr.push(this.hashStruct("EIP712Domain",rr.domain,rr.types,er)),rr.primaryType!=="EIP712Domain"&&nr.push(this.hashStruct(rr.primaryType,rr.message,rr.types,er)),util$2.keccak(Buffer.concat(nr))}};var ethEip712Util={TYPED_MESSAGE_SCHEMA,TypedDataUtils,hashForSignTypedDataLegacy:function(tr){return typedSignatureHashLegacy(tr.data)},hashForSignTypedData_v3:function(tr){return TypedDataUtils.hash(tr.data,!1)},hashForSignTypedData_v4:function(tr){return TypedDataUtils.hash(tr.data)}};function typedSignatureHashLegacy(tr){const er=new Error("Expect argument to be non-empty array");if(typeof tr!="object"||!tr.length)throw er;const rr=tr.map(function(sr){return sr.type==="bytes"?util$2.toBuffer(sr.value):sr.value}),nr=tr.map(function(sr){return sr.type}),ir=tr.map(function(sr){if(!sr.name)throw er;return sr.type+" "+sr.name});return abi.soliditySHA3(["bytes32","bytes32"],[abi.soliditySHA3(new Array(tr.length).fill("string"),ir),abi.soliditySHA3(nr,rr)])}var constants$1={};Object.defineProperty(constants$1,"__esModule",{value:!0});constants$1.APP_VERSION_KEY=constants$1.LOCAL_STORAGE_ADDRESSES_KEY=constants$1.WALLET_USER_NAME_KEY=void 0;constants$1.WALLET_USER_NAME_KEY="walletUsername";constants$1.LOCAL_STORAGE_ADDRESSES_KEY="Addresses";constants$1.APP_VERSION_KEY="AppVersion";var RelayEventManager$1={};Object.defineProperty(RelayEventManager$1,"__esModule",{value:!0});RelayEventManager$1.RelayEventManager=void 0;const util_1$9=util$6;class RelayEventManager{constructor(){this._nextRequestId=0,this.callbacks=new Map}makeRequestId(){this._nextRequestId=(this._nextRequestId+1)%2147483647;const er=this._nextRequestId,rr=(0,util_1$9.prepend0x)(er.toString(16));return this.callbacks.get(rr)&&this.callbacks.delete(rr),er}}RelayEventManager$1.RelayEventManager=RelayEventManager;var WalletLinkRelay$1={},WalletLinkConnection$1={},WalletLinkCipher$1={};Object.defineProperty(WalletLinkCipher$1,"__esModule",{value:!0});WalletLinkCipher$1.WalletLinkCipher=void 0;const util_1$8=util$6;class WalletLinkCipher{constructor(er){this.secret=er}async encrypt(er){const rr=this.secret;if(rr.length!==64)throw Error("secret must be 256 bits");const nr=crypto.getRandomValues(new Uint8Array(12)),ir=await crypto.subtle.importKey("raw",(0,util_1$8.hexStringToUint8Array)(rr),{name:"aes-gcm"},!1,["encrypt","decrypt"]),sr=new TextEncoder,or=await window.crypto.subtle.encrypt({name:"AES-GCM",iv:nr},ir,sr.encode(er)),ar=16,cr=or.slice(or.byteLength-ar),lr=or.slice(0,or.byteLength-ar),ur=new Uint8Array(cr),dr=new Uint8Array(lr),yr=new Uint8Array([...nr,...ur,...dr]);return(0,util_1$8.uint8ArrayToHex)(yr)}async decrypt(er){const rr=this.secret;if(rr.length!==64)throw Error("secret must be 256 bits");return new Promise((nr,ir)=>{(async function(){const sr=await crypto.subtle.importKey("raw",(0,util_1$8.hexStringToUint8Array)(rr),{name:"aes-gcm"},!1,["encrypt","decrypt"]),or=(0,util_1$8.hexStringToUint8Array)(er),ar=or.slice(0,12),cr=or.slice(12,28),lr=or.slice(28),ur=new Uint8Array([...lr,...cr]),dr={name:"AES-GCM",iv:new Uint8Array(ar)};try{const yr=await window.crypto.subtle.decrypt(dr,sr,ur),mr=new TextDecoder;nr(mr.decode(yr))}catch(yr){ir(yr)}})()})}}WalletLinkCipher$1.WalletLinkCipher=WalletLinkCipher;var WalletLinkHTTP$1={};Object.defineProperty(WalletLinkHTTP$1,"__esModule",{value:!0});WalletLinkHTTP$1.WalletLinkHTTP=void 0;class WalletLinkHTTP{constructor(er,rr,nr){this.linkAPIUrl=er,this.sessionId=rr;const ir=`${rr}:${nr}`;this.auth=`Basic ${btoa(ir)}`}async markUnseenEventsAsSeen(er){return Promise.all(er.map(rr=>fetch(`${this.linkAPIUrl}/events/${rr.eventId}/seen`,{method:"POST",headers:{Authorization:this.auth}}))).catch(rr=>console.error("Unabled to mark event as failed:",rr))}async fetchUnseenEvents(){var er;const rr=await fetch(`${this.linkAPIUrl}/events?unseen=true`,{headers:{Authorization:this.auth}});if(rr.ok){const{events:nr,error:ir}=await rr.json();if(ir)throw new Error(`Check unseen events failed: ${ir}`);const sr=(er=nr==null?void 0:nr.filter(or=>or.event==="Web3Response").map(or=>({type:"Event",sessionId:this.sessionId,eventId:or.id,event:or.event,data:or.data})))!==null&&er!==void 0?er:[];return this.markUnseenEventsAsSeen(sr),sr}throw new Error(`Check unseen events failed: ${rr.status}`)}}WalletLinkHTTP$1.WalletLinkHTTP=WalletLinkHTTP;var WalletLinkWebSocket$1={};Object.defineProperty(WalletLinkWebSocket$1,"__esModule",{value:!0});WalletLinkWebSocket$1.WalletLinkWebSocket=WalletLinkWebSocket$1.ConnectionState=void 0;var ConnectionState;(function(tr){tr[tr.DISCONNECTED=0]="DISCONNECTED",tr[tr.CONNECTING=1]="CONNECTING",tr[tr.CONNECTED=2]="CONNECTED"})(ConnectionState||(WalletLinkWebSocket$1.ConnectionState=ConnectionState={}));class WalletLinkWebSocket{setConnectionStateListener(er){this.connectionStateListener=er}setIncomingDataListener(er){this.incomingDataListener=er}constructor(er,rr=WebSocket){this.WebSocketClass=rr,this.webSocket=null,this.pendingData=[],this.url=er.replace(/^http/,"ws")}async connect(){if(this.webSocket)throw new Error("webSocket object is not null");return new Promise((er,rr)=>{var nr;let ir;try{this.webSocket=ir=new this.WebSocketClass(this.url)}catch(sr){rr(sr);return}(nr=this.connectionStateListener)===null||nr===void 0||nr.call(this,ConnectionState.CONNECTING),ir.onclose=sr=>{var or;this.clearWebSocket(),rr(new Error(`websocket error ${sr.code}: ${sr.reason}`)),(or=this.connectionStateListener)===null||or===void 0||or.call(this,ConnectionState.DISCONNECTED)},ir.onopen=sr=>{var or;er(),(or=this.connectionStateListener)===null||or===void 0||or.call(this,ConnectionState.CONNECTED),this.pendingData.length>0&&([...this.pendingData].forEach(cr=>this.sendData(cr)),this.pendingData=[])},ir.onmessage=sr=>{var or,ar;if(sr.data==="h")(or=this.incomingDataListener)===null||or===void 0||or.call(this,{type:"Heartbeat"});else try{const cr=JSON.parse(sr.data);(ar=this.incomingDataListener)===null||ar===void 0||ar.call(this,cr)}catch{}}})}disconnect(){var er;const{webSocket:rr}=this;if(rr){this.clearWebSocket(),(er=this.connectionStateListener)===null||er===void 0||er.call(this,ConnectionState.DISCONNECTED),this.connectionStateListener=void 0,this.incomingDataListener=void 0;try{rr.close()}catch{}}}sendData(er){const{webSocket:rr}=this;if(!rr){this.pendingData.push(er),this.connect();return}rr.send(er)}clearWebSocket(){const{webSocket:er}=this;er&&(this.webSocket=null,er.onclose=null,er.onerror=null,er.onmessage=null,er.onopen=null)}}WalletLinkWebSocket$1.WalletLinkWebSocket=WalletLinkWebSocket;Object.defineProperty(WalletLinkConnection$1,"__esModule",{value:!0});WalletLinkConnection$1.WalletLinkConnection=void 0;const constants_1$4=constants$1,WalletLinkCipher_1=WalletLinkCipher$1,WalletLinkHTTP_1=WalletLinkHTTP$1,WalletLinkWebSocket_1=WalletLinkWebSocket$1,type_1$1=type,HEARTBEAT_INTERVAL=1e4,REQUEST_TIMEOUT=6e4;class WalletLinkConnection{constructor({session:er,linkAPIUrl:rr,listener:nr,WebSocketClass:ir=WebSocket}){this.destroyed=!1,this.lastHeartbeatResponse=0,this.nextReqId=(0,type_1$1.IntNumber)(1),this._connected=!1,this._linked=!1,this.shouldFetchUnseenEventsOnConnect=!1,this.requestResolutions=new Map,this.handleSessionMetadataUpdated=or=>{if(!or)return;new Map([["__destroyed",this.handleDestroyed],["EthereumAddress",this.handleAccountUpdated],["WalletUsername",this.handleWalletUsernameUpdated],["AppVersion",this.handleAppVersionUpdated],["ChainId",cr=>or.JsonRpcUrl&&this.handleChainUpdated(cr,or.JsonRpcUrl)]]).forEach((cr,lr)=>{const ur=or[lr];ur!==void 0&&cr(ur)})},this.handleDestroyed=or=>{var ar;or==="1"&&((ar=this.listener)===null||ar===void 0||ar.resetAndReload())},this.handleAccountUpdated=async or=>{var ar;{const cr=await this.cipher.decrypt(or);(ar=this.listener)===null||ar===void 0||ar.accountUpdated(cr)}},this.handleMetadataUpdated=async(or,ar)=>{var cr;{const lr=await this.cipher.decrypt(ar);(cr=this.listener)===null||cr===void 0||cr.metadataUpdated(or,lr)}},this.handleWalletUsernameUpdated=async or=>{this.handleMetadataUpdated(constants_1$4.WALLET_USER_NAME_KEY,or)},this.handleAppVersionUpdated=async or=>{this.handleMetadataUpdated(constants_1$4.APP_VERSION_KEY,or)},this.handleChainUpdated=async(or,ar)=>{var cr;{const lr=await this.cipher.decrypt(or),ur=await this.cipher.decrypt(ar);(cr=this.listener)===null||cr===void 0||cr.chainUpdated(lr,ur)}},this.session=er,this.cipher=new WalletLinkCipher_1.WalletLinkCipher(er.secret),this.listener=nr;const sr=new WalletLinkWebSocket_1.WalletLinkWebSocket(`${rr}/rpc`,ir);sr.setConnectionStateListener(async or=>{let ar=!1;switch(or){case WalletLinkWebSocket_1.ConnectionState.DISCONNECTED:if(!this.destroyed){const cr=async()=>{await new Promise(lr=>setTimeout(lr,5e3)),this.destroyed||sr.connect().catch(()=>{cr()})};cr()}break;case WalletLinkWebSocket_1.ConnectionState.CONNECTED:try{await this.authenticate(),this.sendIsLinked(),this.sendGetSessionConfig(),ar=!0}catch{}this.updateLastHeartbeat(),setInterval(()=>{this.heartbeat()},HEARTBEAT_INTERVAL),this.shouldFetchUnseenEventsOnConnect&&this.fetchUnseenEventsAPI();break;case WalletLinkWebSocket_1.ConnectionState.CONNECTING:break}this.connected!==ar&&(this.connected=ar)}),sr.setIncomingDataListener(or=>{var ar;switch(or.type){case"Heartbeat":this.updateLastHeartbeat();return;case"IsLinkedOK":case"Linked":{const cr=or.type==="IsLinkedOK"?or.linked:void 0;this.linked=cr||or.onlineGuests>0;break}case"GetSessionConfigOK":case"SessionConfigUpdated":{this.handleSessionMetadataUpdated(or.metadata);break}case"Event":{this.handleIncomingEvent(or);break}}or.id!==void 0&&((ar=this.requestResolutions.get(or.id))===null||ar===void 0||ar(or))}),this.ws=sr,this.http=new WalletLinkHTTP_1.WalletLinkHTTP(rr,er.id,er.key)}connect(){if(this.destroyed)throw new Error("instance is destroyed");this.ws.connect()}destroy(){this.destroyed=!0,this.ws.disconnect(),this.listener=void 0}get isDestroyed(){return this.destroyed}get connected(){return this._connected}set connected(er){var rr;this._connected=er,er&&((rr=this.onceConnected)===null||rr===void 0||rr.call(this))}setOnceConnected(er){return new Promise(rr=>{this.connected?er().then(rr):this.onceConnected=()=>{er().then(rr),this.onceConnected=void 0}})}get linked(){return this._linked}set linked(er){var rr,nr;this._linked=er,er&&((rr=this.onceLinked)===null||rr===void 0||rr.call(this)),(nr=this.listener)===null||nr===void 0||nr.linkedUpdated(er)}setOnceLinked(er){return new Promise(rr=>{this.linked?er().then(rr):this.onceLinked=()=>{er().then(rr),this.onceLinked=void 0}})}async handleIncomingEvent(er){var rr;if(!(er.type!=="Event"||er.event!=="Web3Response")){const nr=await this.cipher.decrypt(er.data),ir=JSON.parse(nr);if(ir.type!=="WEB3_RESPONSE")return;(rr=this.listener)===null||rr===void 0||rr.handleWeb3ResponseMessage(ir)}}async checkUnseenEvents(){if(!this.connected){this.shouldFetchUnseenEventsOnConnect=!0;return}await new Promise(er=>setTimeout(er,250));try{await this.fetchUnseenEventsAPI()}catch(er){console.error("Unable to check for unseen events",er)}}async fetchUnseenEventsAPI(){this.shouldFetchUnseenEventsOnConnect=!1,(await this.http.fetchUnseenEvents()).forEach(rr=>this.handleIncomingEvent(rr))}async setSessionMetadata(er,rr){const nr={type:"SetSessionConfig",id:(0,type_1$1.IntNumber)(this.nextReqId++),sessionId:this.session.id,metadata:{[er]:rr}};return this.setOnceConnected(async()=>{const ir=await this.makeRequest(nr);if(ir.type==="Fail")throw new Error(ir.error||"failed to set session metadata")})}async publishEvent(er,rr,nr=!1){const ir=await this.cipher.encrypt(JSON.stringify(Object.assign(Object.assign({},rr),{origin:location.origin,relaySource:"coinbaseWalletExtension"in window&&window.coinbaseWalletExtension?"injected_sdk":"sdk"}))),sr={type:"PublishEvent",id:(0,type_1$1.IntNumber)(this.nextReqId++),sessionId:this.session.id,event:er,data:ir,callWebhook:nr};return this.setOnceLinked(async()=>{const or=await this.makeRequest(sr);if(or.type==="Fail")throw new Error(or.error||"failed to publish event");return or.eventId})}sendData(er){this.ws.sendData(JSON.stringify(er))}updateLastHeartbeat(){this.lastHeartbeatResponse=Date.now()}heartbeat(){if(Date.now()-this.lastHeartbeatResponse>HEARTBEAT_INTERVAL*2){this.ws.disconnect();return}try{this.ws.sendData("h")}catch{}}async makeRequest(er,rr=REQUEST_TIMEOUT){const nr=er.id;this.sendData(er);let ir;return Promise.race([new Promise((sr,or)=>{ir=window.setTimeout(()=>{or(new Error(`request ${nr} timed out`))},rr)}),new Promise(sr=>{this.requestResolutions.set(nr,or=>{clearTimeout(ir),sr(or),this.requestResolutions.delete(nr)})})])}async authenticate(){const er={type:"HostSession",id:(0,type_1$1.IntNumber)(this.nextReqId++),sessionId:this.session.id,sessionKey:this.session.key},rr=await this.makeRequest(er);if(rr.type==="Fail")throw new Error(rr.error||"failed to authenticate")}sendIsLinked(){const er={type:"IsLinked",id:(0,type_1$1.IntNumber)(this.nextReqId++),sessionId:this.session.id};this.sendData(er)}sendGetSessionConfig(){const er={type:"GetSessionConfig",id:(0,type_1$1.IntNumber)(this.nextReqId++),sessionId:this.session.id};this.sendData(er)}}WalletLinkConnection$1.WalletLinkConnection=WalletLinkConnection;var WalletLinkSession$1={},sha_js={exports:{}},Buffer$7=safeBufferExports.Buffer;function Hash$6(tr,er){this._block=Buffer$7.alloc(tr),this._finalSize=er,this._blockSize=tr,this._len=0}Hash$6.prototype.update=function(tr,er){typeof tr=="string"&&(er=er||"utf8",tr=Buffer$7.from(tr,er));for(var rr=this._block,nr=this._blockSize,ir=tr.length,sr=this._len,or=0;or<ir;){for(var ar=sr%nr,cr=Math.min(ir-or,nr-ar),lr=0;lr<cr;lr++)rr[ar+lr]=tr[or+lr];sr+=cr,or+=cr,sr%nr===0&&this._update(rr)}return this._len+=ir,this};Hash$6.prototype.digest=function(tr){var er=this._len%this._blockSize;this._block[er]=128,this._block.fill(0,er+1),er>=this._finalSize&&(this._update(this._block),this._block.fill(0));var rr=this._len*8;if(rr<=4294967295)this._block.writeUInt32BE(rr,this._blockSize-4);else{var nr=(rr&4294967295)>>>0,ir=(rr-nr)/4294967296;this._block.writeUInt32BE(ir,this._blockSize-8),this._block.writeUInt32BE(nr,this._blockSize-4)}this._update(this._block);var sr=this._hash();return tr?sr.toString(tr):sr};Hash$6.prototype._update=function(){throw new Error("_update must be implemented by subclass")};var hash=Hash$6,inherits$5=inherits_browserExports,Hash$5=hash,Buffer$6=safeBufferExports.Buffer,K$3=[1518500249,1859775393,-1894007588,-899497514],W$5=new Array(80);function Sha(){this.init(),this._w=W$5,Hash$5.call(this,64,56)}inherits$5(Sha,Hash$5);Sha.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this};function rotl5$1(tr){return tr<<5|tr>>>27}function rotl30$1(tr){return tr<<30|tr>>>2}function ft$1(tr,er,rr,nr){return tr===0?er&rr|~er&nr:tr===2?er&rr|er&nr|rr&nr:er^rr^nr}Sha.prototype._update=function(tr){for(var er=this._w,rr=this._a|0,nr=this._b|0,ir=this._c|0,sr=this._d|0,or=this._e|0,ar=0;ar<16;++ar)er[ar]=tr.readInt32BE(ar*4);for(;ar<80;++ar)er[ar]=er[ar-3]^er[ar-8]^er[ar-14]^er[ar-16];for(var cr=0;cr<80;++cr){var lr=~~(cr/20),ur=rotl5$1(rr)+ft$1(lr,nr,ir,sr)+or+er[cr]+K$3[lr]|0;or=sr,sr=ir,ir=rotl30$1(nr),nr=rr,rr=ur}this._a=rr+this._a|0,this._b=nr+this._b|0,this._c=ir+this._c|0,this._d=sr+this._d|0,this._e=or+this._e|0};Sha.prototype._hash=function(){var tr=Buffer$6.allocUnsafe(20);return tr.writeInt32BE(this._a|0,0),tr.writeInt32BE(this._b|0,4),tr.writeInt32BE(this._c|0,8),tr.writeInt32BE(this._d|0,12),tr.writeInt32BE(this._e|0,16),tr};var sha=Sha,inherits$4=inherits_browserExports,Hash$4=hash,Buffer$5=safeBufferExports.Buffer,K$2=[1518500249,1859775393,-1894007588,-899497514],W$4=new Array(80);function Sha1(){this.init(),this._w=W$4,Hash$4.call(this,64,56)}inherits$4(Sha1,Hash$4);Sha1.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this};function rotl1(tr){return tr<<1|tr>>>31}function rotl5(tr){return tr<<5|tr>>>27}function rotl30(tr){return tr<<30|tr>>>2}function ft(tr,er,rr,nr){return tr===0?er&rr|~er&nr:tr===2?er&rr|er&nr|rr&nr:er^rr^nr}Sha1.prototype._update=function(tr){for(var er=this._w,rr=this._a|0,nr=this._b|0,ir=this._c|0,sr=this._d|0,or=this._e|0,ar=0;ar<16;++ar)er[ar]=tr.readInt32BE(ar*4);for(;ar<80;++ar)er[ar]=rotl1(er[ar-3]^er[ar-8]^er[ar-14]^er[ar-16]);for(var cr=0;cr<80;++cr){var lr=~~(cr/20),ur=rotl5(rr)+ft(lr,nr,ir,sr)+or+er[cr]+K$2[lr]|0;or=sr,sr=ir,ir=rotl30(nr),nr=rr,rr=ur}this._a=rr+this._a|0,this._b=nr+this._b|0,this._c=ir+this._c|0,this._d=sr+this._d|0,this._e=or+this._e|0};Sha1.prototype._hash=function(){var tr=Buffer$5.allocUnsafe(20);return tr.writeInt32BE(this._a|0,0),tr.writeInt32BE(this._b|0,4),tr.writeInt32BE(this._c|0,8),tr.writeInt32BE(this._d|0,12),tr.writeInt32BE(this._e|0,16),tr};var sha1=Sha1,inherits$3=inherits_browserExports,Hash$3=hash,Buffer$4=safeBufferExports.Buffer,K$1=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],W$3=new Array(64);function Sha256$1(){this.init(),this._w=W$3,Hash$3.call(this,64,56)}inherits$3(Sha256$1,Hash$3);Sha256$1.prototype.init=function(){return this._a=1779033703,this._b=3144134277,this._c=1013904242,this._d=2773480762,this._e=1359893119,this._f=2600822924,this._g=528734635,this._h=1541459225,this};function ch(tr,er,rr){return rr^tr&(er^rr)}function maj$1(tr,er,rr){return tr&er|rr&(tr|er)}function sigma0$1(tr){return(tr>>>2|tr<<30)^(tr>>>13|tr<<19)^(tr>>>22|tr<<10)}function sigma1$1(tr){return(tr>>>6|tr<<26)^(tr>>>11|tr<<21)^(tr>>>25|tr<<7)}function gamma0(tr){return(tr>>>7|tr<<25)^(tr>>>18|tr<<14)^tr>>>3}function gamma1(tr){return(tr>>>17|tr<<15)^(tr>>>19|tr<<13)^tr>>>10}Sha256$1.prototype._update=function(tr){for(var er=this._w,rr=this._a|0,nr=this._b|0,ir=this._c|0,sr=this._d|0,or=this._e|0,ar=this._f|0,cr=this._g|0,lr=this._h|0,ur=0;ur<16;++ur)er[ur]=tr.readInt32BE(ur*4);for(;ur<64;++ur)er[ur]=gamma1(er[ur-2])+er[ur-7]+gamma0(er[ur-15])+er[ur-16]|0;for(var dr=0;dr<64;++dr){var yr=lr+sigma1$1(or)+ch(or,ar,cr)+K$1[dr]+er[dr]|0,mr=sigma0$1(rr)+maj$1(rr,nr,ir)|0;lr=cr,cr=ar,ar=or,or=sr+yr|0,sr=ir,ir=nr,nr=rr,rr=yr+mr|0}this._a=rr+this._a|0,this._b=nr+this._b|0,this._c=ir+this._c|0,this._d=sr+this._d|0,this._e=or+this._e|0,this._f=ar+this._f|0,this._g=cr+this._g|0,this._h=lr+this._h|0};Sha256$1.prototype._hash=function(){var tr=Buffer$4.allocUnsafe(32);return tr.writeInt32BE(this._a,0),tr.writeInt32BE(this._b,4),tr.writeInt32BE(this._c,8),tr.writeInt32BE(this._d,12),tr.writeInt32BE(this._e,16),tr.writeInt32BE(this._f,20),tr.writeInt32BE(this._g,24),tr.writeInt32BE(this._h,28),tr};var sha256=Sha256$1,inherits$2=inherits_browserExports,Sha256=sha256,Hash$2=hash,Buffer$3=safeBufferExports.Buffer,W$2=new Array(64);function Sha224(){this.init(),this._w=W$2,Hash$2.call(this,64,56)}inherits$2(Sha224,Sha256);Sha224.prototype.init=function(){return this._a=3238371032,this._b=914150663,this._c=812702999,this._d=4144912697,this._e=4290775857,this._f=1750603025,this._g=1694076839,this._h=3204075428,this};Sha224.prototype._hash=function(){var tr=Buffer$3.allocUnsafe(28);return tr.writeInt32BE(this._a,0),tr.writeInt32BE(this._b,4),tr.writeInt32BE(this._c,8),tr.writeInt32BE(this._d,12),tr.writeInt32BE(this._e,16),tr.writeInt32BE(this._f,20),tr.writeInt32BE(this._g,24),tr};var sha224=Sha224,inherits$1=inherits_browserExports,Hash$1=hash,Buffer$2=safeBufferExports.Buffer,K=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],W$1=new Array(160);function Sha512(){this.init(),this._w=W$1,Hash$1.call(this,128,112)}inherits$1(Sha512,Hash$1);Sha512.prototype.init=function(){return this._ah=1779033703,this._bh=3144134277,this._ch=1013904242,this._dh=2773480762,this._eh=1359893119,this._fh=2600822924,this._gh=528734635,this._hh=1541459225,this._al=4089235720,this._bl=2227873595,this._cl=4271175723,this._dl=1595750129,this._el=2917565137,this._fl=725511199,this._gl=4215389547,this._hl=327033209,this};function Ch(tr,er,rr){return rr^tr&(er^rr)}function maj(tr,er,rr){return tr&er|rr&(tr|er)}function sigma0(tr,er){return(tr>>>28|er<<4)^(er>>>2|tr<<30)^(er>>>7|tr<<25)}function sigma1(tr,er){return(tr>>>14|er<<18)^(tr>>>18|er<<14)^(er>>>9|tr<<23)}function Gamma0(tr,er){return(tr>>>1|er<<31)^(tr>>>8|er<<24)^tr>>>7}function Gamma0l(tr,er){return(tr>>>1|er<<31)^(tr>>>8|er<<24)^(tr>>>7|er<<25)}function Gamma1(tr,er){return(tr>>>19|er<<13)^(er>>>29|tr<<3)^tr>>>6}function Gamma1l(tr,er){return(tr>>>19|er<<13)^(er>>>29|tr<<3)^(tr>>>6|er<<26)}function getCarry(tr,er){return tr>>>0<er>>>0?1:0}Sha512.prototype._update=function(tr){for(var er=this._w,rr=this._ah|0,nr=this._bh|0,ir=this._ch|0,sr=this._dh|0,or=this._eh|0,ar=this._fh|0,cr=this._gh|0,lr=this._hh|0,ur=this._al|0,dr=this._bl|0,yr=this._cl|0,mr=this._dl|0,wr=this._el|0,xr=this._fl|0,Or=this._gl|0,Tr=this._hl|0,Ar=0;Ar<32;Ar+=2)er[Ar]=tr.readInt32BE(Ar*4),er[Ar+1]=tr.readInt32BE(Ar*4+4);for(;Ar<160;Ar+=2){var Nr=er[Ar-30],Ur=er[Ar-15*2+1],Dr=Gamma0(Nr,Ur),Hr=Gamma0l(Ur,Nr);Nr=er[Ar-2*2],Ur=er[Ar-2*2+1];var zr=Gamma1(Nr,Ur),Cr=Gamma1l(Ur,Nr),Mr=er[Ar-7*2],Pr=er[Ar-7*2+1],Sr=er[Ar-16*2],pr=er[Ar-16*2+1],gr=Hr+Pr|0,fr=Dr+Mr+getCarry(gr,Hr)|0;gr=gr+Cr|0,fr=fr+zr+getCarry(gr,Cr)|0,gr=gr+pr|0,fr=fr+Sr+getCarry(gr,pr)|0,er[Ar]=fr,er[Ar+1]=gr}for(var hr=0;hr<160;hr+=2){fr=er[hr],gr=er[hr+1];var br=maj(rr,nr,ir),_r=maj(ur,dr,yr),$r=sigma0(rr,ur),Er=sigma0(ur,rr),vr=sigma1(or,wr),Ir=sigma1(wr,or),Rr=K[hr],Br=K[hr+1],Jr=Ch(or,ar,cr),Wr=Ch(wr,xr,Or),qr=Tr+Ir|0,an=lr+vr+getCarry(qr,Tr)|0;qr=qr+Wr|0,an=an+Jr+getCarry(qr,Wr)|0,qr=qr+Br|0,an=an+Rr+getCarry(qr,Br)|0,qr=qr+gr|0,an=an+fr+getCarry(qr,gr)|0;var tn=Er+_r|0,cn=$r+br+getCarry(tn,Er)|0;lr=cr,Tr=Or,cr=ar,Or=xr,ar=or,xr=wr,wr=mr+qr|0,or=sr+an+getCarry(wr,mr)|0,sr=ir,mr=yr,ir=nr,yr=dr,nr=rr,dr=ur,ur=qr+tn|0,rr=an+cn+getCarry(ur,qr)|0}this._al=this._al+ur|0,this._bl=this._bl+dr|0,this._cl=this._cl+yr|0,this._dl=this._dl+mr|0,this._el=this._el+wr|0,this._fl=this._fl+xr|0,this._gl=this._gl+Or|0,this._hl=this._hl+Tr|0,this._ah=this._ah+rr+getCarry(this._al,ur)|0,this._bh=this._bh+nr+getCarry(this._bl,dr)|0,this._ch=this._ch+ir+getCarry(this._cl,yr)|0,this._dh=this._dh+sr+getCarry(this._dl,mr)|0,this._eh=this._eh+or+getCarry(this._el,wr)|0,this._fh=this._fh+ar+getCarry(this._fl,xr)|0,this._gh=this._gh+cr+getCarry(this._gl,Or)|0,this._hh=this._hh+lr+getCarry(this._hl,Tr)|0};Sha512.prototype._hash=function(){var tr=Buffer$2.allocUnsafe(64);function er(rr,nr,ir){tr.writeInt32BE(rr,ir),tr.writeInt32BE(nr,ir+4)}return er(this._ah,this._al,0),er(this._bh,this._bl,8),er(this._ch,this._cl,16),er(this._dh,this._dl,24),er(this._eh,this._el,32),er(this._fh,this._fl,40),er(this._gh,this._gl,48),er(this._hh,this._hl,56),tr};var sha512=Sha512,inherits=inherits_browserExports,SHA512=sha512,Hash=hash,Buffer$1=safeBufferExports.Buffer,W=new Array(160);function Sha384(){this.init(),this._w=W,Hash.call(this,128,112)}inherits(Sha384,SHA512);Sha384.prototype.init=function(){return this._ah=3418070365,this._bh=1654270250,this._ch=2438529370,this._dh=355462360,this._eh=1731405415,this._fh=2394180231,this._gh=3675008525,this._hh=1203062813,this._al=3238371032,this._bl=914150663,this._cl=812702999,this._dl=4144912697,this._el=4290775857,this._fl=1750603025,this._gl=1694076839,this._hl=3204075428,this};Sha384.prototype._hash=function(){var tr=Buffer$1.allocUnsafe(48);function er(rr,nr,ir){tr.writeInt32BE(rr,ir),tr.writeInt32BE(nr,ir+4)}return er(this._ah,this._al,0),er(this._bh,this._bl,8),er(this._ch,this._cl,16),er(this._dh,this._dl,24),er(this._eh,this._el,32),er(this._fh,this._fl,40),tr};var sha384=Sha384,exports=sha_js.exports=function tr(er){er=er.toLowerCase();var rr=exports[er];if(!rr)throw new Error(er+" is not supported (we accept pull requests)");return new rr};exports.sha=sha;exports.sha1=sha1;exports.sha224=sha224;exports.sha256=sha256;exports.sha384=sha384;exports.sha512=sha512;var sha_jsExports=sha_js.exports;Object.defineProperty(WalletLinkSession$1,"__esModule",{value:!0});WalletLinkSession$1.WalletLinkSession=void 0;const sha_js_1=sha_jsExports,util_1$7=util$6,STORAGE_KEY_SESSION_ID="session:id",STORAGE_KEY_SESSION_SECRET="session:secret",STORAGE_KEY_SESSION_LINKED="session:linked";class WalletLinkSession{constructor(er,rr,nr,ir){this._storage=er,this._id=rr||(0,util_1$7.randomBytesHex)(16),this._secret=nr||(0,util_1$7.randomBytesHex)(32),this._key=new sha_js_1.sha256().update(`${this._id}, ${this._secret} WalletLink`).digest("hex"),this._linked=!!ir}static load(er){const rr=er.getItem(STORAGE_KEY_SESSION_ID),nr=er.getItem(STORAGE_KEY_SESSION_LINKED),ir=er.getItem(STORAGE_KEY_SESSION_SECRET);return rr&&ir?new WalletLinkSession(er,rr,ir,nr==="1"):null}get id(){return this._id}get secret(){return this._secret}get key(){return this._key}get linked(){return this._linked}set linked(er){this._linked=er,this.persistLinked()}save(){return this._storage.setItem(STORAGE_KEY_SESSION_ID,this._id),this._storage.setItem(STORAGE_KEY_SESSION_SECRET,this._secret),this.persistLinked(),this}persistLinked(){this._storage.setItem(STORAGE_KEY_SESSION_LINKED,this._linked?"1":"0")}}WalletLinkSession$1.WalletLinkSession=WalletLinkSession;var util$1={};Object.defineProperty(util$1,"__esModule",{value:!0});util$1.isDarkMode=util$1.isMobileWeb=util$1.getLocation=util$1.createQrUrl=void 0;function createQrUrl(tr,er,rr,nr,ir,sr){const or=nr?"parent-id":"id",ar=new URLSearchParams({[or]:tr,secret:er,server:rr,v:ir,chainId:sr.toString()}).toString();return`${rr}/#/link?${ar}`}util$1.createQrUrl=createQrUrl;function isInIFrame(){try{return window.frameElement!==null}catch{return!1}}function getLocation(){try{return isInIFrame()&&window.top?window.top.location:window.location}catch{return window.location}}util$1.getLocation=getLocation;function isMobileWeb(){var tr;return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test((tr=window==null?void 0:window.navigator)===null||tr===void 0?void 0:tr.userAgent)}util$1.isMobileWeb=isMobileWeb;function isDarkMode(){var tr,er;return(er=(tr=window==null?void 0:window.matchMedia)===null||tr===void 0?void 0:tr.call(window,"(prefers-color-scheme: dark)").matches)!==null&&er!==void 0?er:!1}util$1.isDarkMode=isDarkMode;var WalletLinkRelayUI$1={},cssReset={},cssResetCss={};Object.defineProperty(cssResetCss,"__esModule",{value:!0});cssResetCss.default='@namespace svg "http://www.w3.org/2000/svg";.-cbwsdk-css-reset,.-cbwsdk-css-reset *{animation:none;animation-delay:0;animation-direction:normal;animation-duration:0;animation-fill-mode:none;animation-iteration-count:1;animation-name:none;animation-play-state:running;animation-timing-function:ease;backface-visibility:visible;background:0;background-attachment:scroll;background-clip:border-box;background-color:rgba(0,0,0,0);background-image:none;background-origin:padding-box;background-position:0 0;background-position-x:0;background-position-y:0;background-repeat:repeat;background-size:auto auto;border:0;border-style:none;border-width:medium;border-color:inherit;border-bottom:0;border-bottom-color:inherit;border-bottom-left-radius:0;border-bottom-right-radius:0;border-bottom-style:none;border-bottom-width:medium;border-collapse:separate;border-image:none;border-left:0;border-left-color:inherit;border-left-style:none;border-left-width:medium;border-radius:0;border-right:0;border-right-color:inherit;border-right-style:none;border-right-width:medium;border-spacing:0;border-top:0;border-top-color:inherit;border-top-left-radius:0;border-top-right-radius:0;border-top-style:none;border-top-width:medium;box-shadow:none;box-sizing:border-box;caption-side:top;clear:none;clip:auto;color:inherit;columns:auto;column-count:auto;column-fill:balance;column-gap:normal;column-rule:medium none currentColor;column-rule-color:currentColor;column-rule-style:none;column-rule-width:none;column-span:1;column-width:auto;counter-increment:none;counter-reset:none;direction:ltr;empty-cells:show;float:none;font:normal;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI","Helvetica Neue",Arial,sans-serif;font-size:medium;font-style:normal;font-variant:normal;font-weight:normal;height:auto;hyphens:none;letter-spacing:normal;line-height:normal;list-style:none;list-style-image:none;list-style-position:outside;list-style-type:disc;margin:0;margin-bottom:0;margin-left:0;margin-right:0;margin-top:0;opacity:1;orphans:0;outline:0;outline-color:invert;outline-style:none;outline-width:medium;overflow:visible;overflow-x:visible;overflow-y:visible;padding:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;page-break-after:auto;page-break-before:auto;page-break-inside:auto;perspective:none;perspective-origin:50% 50%;pointer-events:auto;position:static;quotes:"\\201C" "\\201D" "\\2018" "\\2019";tab-size:8;table-layout:auto;text-align:inherit;text-align-last:auto;text-decoration:none;text-decoration-color:inherit;text-decoration-line:none;text-decoration-style:solid;text-indent:0;text-shadow:none;text-transform:none;transform:none;transform-style:flat;transition:none;transition-delay:0s;transition-duration:0s;transition-property:none;transition-timing-function:ease;unicode-bidi:normal;vertical-align:baseline;visibility:visible;white-space:normal;widows:0;word-spacing:normal;z-index:auto}.-cbwsdk-css-reset strong{font-weight:bold}.-cbwsdk-css-reset *{box-sizing:border-box;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI","Helvetica Neue",Arial,sans-serif;line-height:1}.-cbwsdk-css-reset [class*=container]{margin:0;padding:0}.-cbwsdk-css-reset style{display:none}';var __importDefault$3=commonjsGlobal&&commonjsGlobal.__importDefault||function(tr){return tr&&tr.__esModule?tr:{default:tr}};Object.defineProperty(cssReset,"__esModule",{value:!0});cssReset.injectCssReset=void 0;const cssReset_css_1=__importDefault$3(cssResetCss);function injectCssReset(){const tr=document.createElement("style");tr.type="text/css",tr.appendChild(document.createTextNode(cssReset_css_1.default)),document.documentElement.appendChild(tr)}cssReset.injectCssReset=injectCssReset;var Snackbar={};function r$2(tr){var er,rr,nr="";if(typeof tr=="string"||typeof tr=="number")nr+=tr;else if(typeof tr=="object")if(Array.isArray(tr))for(er=0;er<tr.length;er++)tr[er]&&(rr=r$2(tr[er]))&&(nr&&(nr+=" "),nr+=rr);else for(er in tr)tr[er]&&(nr&&(nr+=" "),nr+=er);return nr}function clsx(){for(var tr,er,rr=0,nr="";rr<arguments.length;)(tr=arguments[rr++])&&(er=r$2(tr))&&(nr&&(nr+=" "),nr+=er);return nr}const clsx_m=Object.freeze(Object.defineProperty({__proto__:null,clsx,default:clsx},Symbol.toStringTag,{value:"Module"})),require$$0=getAugmentedNamespace(clsx_m);var n,l$1,u$1,t$1,i$1,o$1,r$1,f$1,e$1,c$1,s$1,a$1,h$1={},p$1=[],v$1=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,y$1=Array.isArray;function d$1(tr,er){for(var rr in er)tr[rr]=er[rr];return tr}function w$1(tr){var er=tr.parentNode;er&&er.removeChild(tr)}function _$1(tr,er,rr){var nr,ir,sr,or={};for(sr in er)sr=="key"?nr=er[sr]:sr=="ref"?ir=er[sr]:or[sr]=er[sr];if(arguments.length>2&&(or.children=arguments.length>3?n.call(arguments,2):rr),typeof tr=="function"&&tr.defaultProps!=null)for(sr in tr.defaultProps)or[sr]===void 0&&(or[sr]=tr.defaultProps[sr]);return g$1(tr,or,nr,ir,null)}function g$1(tr,er,rr,nr,ir){var sr={type:tr,props:er,key:rr,ref:nr,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:ir??++u$1,__i:-1,__u:0};return ir==null&&l$1.vnode!=null&&l$1.vnode(sr),sr}function m$1(){return{current:null}}function k$1(tr){return tr.children}function b$1(tr,er){this.props=tr,this.context=er}function x$1(tr,er){if(er==null)return tr.__?x$1(tr.__,tr.__i+1):null;for(var rr;er<tr.__k.length;er++)if((rr=tr.__k[er])!=null&&rr.__e!=null)return rr.__e;return typeof tr.type=="function"?x$1(tr):null}function C$1(tr){var er,rr;if((tr=tr.__)!=null&&tr.__c!=null){for(tr.__e=tr.__c.base=null,er=0;er<tr.__k.length;er++)if((rr=tr.__k[er])!=null&&rr.__e!=null){tr.__e=tr.__c.base=rr.__e;break}return C$1(tr)}}function M(tr){(!tr.__d&&(tr.__d=!0)&&i$1.push(tr)&&!P$1.__r++||o$1!==l$1.debounceRendering)&&((o$1=l$1.debounceRendering)||r$1)(P$1)}function P$1(){var tr,er,rr,nr,ir,sr,or,ar;for(i$1.sort(f$1);tr=i$1.shift();)tr.__d&&(er=i$1.length,nr=void 0,sr=(ir=(rr=tr).__v).__e,or=[],ar=[],rr.__P&&((nr=d$1({},ir)).__v=ir.__v+1,l$1.vnode&&l$1.vnode(nr),O(rr.__P,nr,ir,rr.__n,rr.__P.namespaceURI,32&ir.__u?[sr]:null,or,sr??x$1(ir),!!(32&ir.__u),ar),nr.__v=ir.__v,nr.__.__k[nr.__i]=nr,j$1(or,nr,ar),nr.__e!=sr&&C$1(nr)),i$1.length>er&&i$1.sort(f$1));P$1.__r=0}function S(tr,er,rr,nr,ir,sr,or,ar,cr,lr,ur){var dr,yr,mr,wr,xr,Or=nr&&nr.__k||p$1,Tr=er.length;for(rr.__d=cr,$(rr,er,Or),cr=rr.__d,dr=0;dr<Tr;dr++)(mr=rr.__k[dr])!=null&&typeof mr!="boolean"&&typeof mr!="function"&&(yr=mr.__i===-1?h$1:Or[mr.__i]||h$1,mr.__i=dr,O(tr,mr,yr,ir,sr,or,ar,cr,lr,ur),wr=mr.__e,mr.ref&&yr.ref!=mr.ref&&(yr.ref&&N(yr.ref,null,mr),ur.push(mr.ref,mr.__c||wr,mr)),xr==null&&wr!=null&&(xr=wr),65536&mr.__u||yr.__k===mr.__k?cr=I(mr,cr,tr):typeof mr.type=="function"&&mr.__d!==void 0?cr=mr.__d:wr&&(cr=wr.nextSibling),mr.__d=void 0,mr.__u&=-196609);rr.__d=cr,rr.__e=xr}function $(tr,er,rr){var nr,ir,sr,or,ar,cr=er.length,lr=rr.length,ur=lr,dr=0;for(tr.__k=[],nr=0;nr<cr;nr++)or=nr+dr,(ir=tr.__k[nr]=(ir=er[nr])==null||typeof ir=="boolean"||typeof ir=="function"?null:typeof ir=="string"||typeof ir=="number"||typeof ir=="bigint"||ir.constructor==String?g$1(null,ir,null,null,null):y$1(ir)?g$1(k$1,{children:ir},null,null,null):ir.constructor===void 0&&ir.__b>0?g$1(ir.type,ir.props,ir.key,ir.ref?ir.ref:null,ir.__v):ir)!=null?(ir.__=tr,ir.__b=tr.__b+1,ar=L(ir,rr,or,ur),ir.__i=ar,sr=null,ar!==-1&&(ur--,(sr=rr[ar])&&(sr.__u|=131072)),sr==null||sr.__v===null?(ar==-1&&dr--,typeof ir.type!="function"&&(ir.__u|=65536)):ar!==or&&(ar==or-1?dr--:ar==or+1?dr++:ar>or?ur>cr-or?dr+=ar-or:dr--:ar<or&&(ar==or-dr?dr-=ar-or:dr++),ar!==nr+dr&&(ir.__u|=65536))):(sr=rr[or])&&sr.key==null&&sr.__e&&!(131072&sr.__u)&&(sr.__e==tr.__d&&(tr.__d=x$1(sr)),V(sr,sr,!1),rr[or]=null,ur--);if(ur)for(nr=0;nr<lr;nr++)(sr=rr[nr])!=null&&!(131072&sr.__u)&&(sr.__e==tr.__d&&(tr.__d=x$1(sr)),V(sr,sr))}function I(tr,er,rr){var nr,ir;if(typeof tr.type=="function"){for(nr=tr.__k,ir=0;nr&&ir<nr.length;ir++)nr[ir]&&(nr[ir].__=tr,er=I(nr[ir],er,rr));return er}tr.__e!=er&&(er&&tr.type&&!rr.contains(er)&&(er=x$1(tr)),rr.insertBefore(tr.__e,er||null),er=tr.__e);do er=er&&er.nextSibling;while(er!=null&&er.nodeType===8);return er}function H(tr,er){return er=er||[],tr==null||typeof tr=="boolean"||(y$1(tr)?tr.some(function(rr){H(rr,er)}):er.push(tr)),er}function L(tr,er,rr,nr){var ir=tr.key,sr=tr.type,or=rr-1,ar=rr+1,cr=er[rr];if(cr===null||cr&&ir==cr.key&&sr===cr.type&&!(131072&cr.__u))return rr;if(nr>(cr!=null&&!(131072&cr.__u)?1:0))for(;or>=0||ar<er.length;){if(or>=0){if((cr=er[or])&&!(131072&cr.__u)&&ir==cr.key&&sr===cr.type)return or;or--}if(ar<er.length){if((cr=er[ar])&&!(131072&cr.__u)&&ir==cr.key&&sr===cr.type)return ar;ar++}}return-1}function T$1(tr,er,rr){er[0]==="-"?tr.setProperty(er,rr??""):tr[er]=rr==null?"":typeof rr!="number"||v$1.test(er)?rr:rr+"px"}function A$1(tr,er,rr,nr,ir){var sr;e:if(er==="style")if(typeof rr=="string")tr.style.cssText=rr;else{if(typeof nr=="string"&&(tr.style.cssText=nr=""),nr)for(er in nr)rr&&er in rr||T$1(tr.style,er,"");if(rr)for(er in rr)nr&&rr[er]===nr[er]||T$1(tr.style,er,rr[er])}else if(er[0]==="o"&&er[1]==="n")sr=er!==(er=er.replace(/(PointerCapture)$|Capture$/i,"$1")),er=er.toLowerCase()in tr||er==="onFocusOut"||er==="onFocusIn"?er.toLowerCase().slice(2):er.slice(2),tr.l||(tr.l={}),tr.l[er+sr]=rr,rr?nr?rr.u=nr.u:(rr.u=e$1,tr.addEventListener(er,sr?s$1:c$1,sr)):tr.removeEventListener(er,sr?s$1:c$1,sr);else{if(ir=="http://www.w3.org/2000/svg")er=er.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(er!="width"&&er!="height"&&er!="href"&&er!="list"&&er!="form"&&er!="tabIndex"&&er!="download"&&er!="rowSpan"&&er!="colSpan"&&er!="role"&&er!="popover"&&er in tr)try{tr[er]=rr??"";break e}catch{}typeof rr=="function"||(rr==null||rr===!1&&er[4]!=="-"?tr.removeAttribute(er):tr.setAttribute(er,er=="popover"&&rr==1?"":rr))}}function F$1(tr){return function(er){if(this.l){var rr=this.l[er.type+tr];if(er.t==null)er.t=e$1++;else if(er.t<rr.u)return;return rr(l$1.event?l$1.event(er):er)}}}function O(tr,er,rr,nr,ir,sr,or,ar,cr,lr){var ur,dr,yr,mr,wr,xr,Or,Tr,Ar,Nr,Ur,Dr,Hr,zr,Cr,Mr,Pr=er.type;if(er.constructor!==void 0)return null;128&rr.__u&&(cr=!!(32&rr.__u),sr=[ar=er.__e=rr.__e]),(ur=l$1.__b)&&ur(er);e:if(typeof Pr=="function")try{if(Tr=er.props,Ar="prototype"in Pr&&Pr.prototype.render,Nr=(ur=Pr.contextType)&&nr[ur.__c],Ur=ur?Nr?Nr.props.value:ur.__:nr,rr.__c?Or=(dr=er.__c=rr.__c).__=dr.__E:(Ar?er.__c=dr=new Pr(Tr,Ur):(er.__c=dr=new b$1(Tr,Ur),dr.constructor=Pr,dr.render=q$1),Nr&&Nr.sub(dr),dr.props=Tr,dr.state||(dr.state={}),dr.context=Ur,dr.__n=nr,yr=dr.__d=!0,dr.__h=[],dr._sb=[]),Ar&&dr.__s==null&&(dr.__s=dr.state),Ar&&Pr.getDerivedStateFromProps!=null&&(dr.__s==dr.state&&(dr.__s=d$1({},dr.__s)),d$1(dr.__s,Pr.getDerivedStateFromProps(Tr,dr.__s))),mr=dr.props,wr=dr.state,dr.__v=er,yr)Ar&&Pr.getDerivedStateFromProps==null&&dr.componentWillMount!=null&&dr.componentWillMount(),Ar&&dr.componentDidMount!=null&&dr.__h.push(dr.componentDidMount);else{if(Ar&&Pr.getDerivedStateFromProps==null&&Tr!==mr&&dr.componentWillReceiveProps!=null&&dr.componentWillReceiveProps(Tr,Ur),!dr.__e&&(dr.shouldComponentUpdate!=null&&dr.shouldComponentUpdate(Tr,dr.__s,Ur)===!1||er.__v===rr.__v)){for(er.__v!==rr.__v&&(dr.props=Tr,dr.state=dr.__s,dr.__d=!1),er.__e=rr.__e,er.__k=rr.__k,er.__k.forEach(function(Sr){Sr&&(Sr.__=er)}),Dr=0;Dr<dr._sb.length;Dr++)dr.__h.push(dr._sb[Dr]);dr._sb=[],dr.__h.length&&or.push(dr);break e}dr.componentWillUpdate!=null&&dr.componentWillUpdate(Tr,dr.__s,Ur),Ar&&dr.componentDidUpdate!=null&&dr.__h.push(function(){dr.componentDidUpdate(mr,wr,xr)})}if(dr.context=Ur,dr.props=Tr,dr.__P=tr,dr.__e=!1,Hr=l$1.__r,zr=0,Ar){for(dr.state=dr.__s,dr.__d=!1,Hr&&Hr(er),ur=dr.render(dr.props,dr.state,dr.context),Cr=0;Cr<dr._sb.length;Cr++)dr.__h.push(dr._sb[Cr]);dr._sb=[]}else do dr.__d=!1,Hr&&Hr(er),ur=dr.render(dr.props,dr.state,dr.context),dr.state=dr.__s;while(dr.__d&&++zr<25);dr.state=dr.__s,dr.getChildContext!=null&&(nr=d$1(d$1({},nr),dr.getChildContext())),Ar&&!yr&&dr.getSnapshotBeforeUpdate!=null&&(xr=dr.getSnapshotBeforeUpdate(mr,wr)),S(tr,y$1(Mr=ur!=null&&ur.type===k$1&&ur.key==null?ur.props.children:ur)?Mr:[Mr],er,rr,nr,ir,sr,or,ar,cr,lr),dr.base=er.__e,er.__u&=-161,dr.__h.length&&or.push(dr),Or&&(dr.__E=dr.__=null)}catch(Sr){if(er.__v=null,cr||sr!=null){for(er.__u|=cr?160:32;ar&&ar.nodeType===8&&ar.nextSibling;)ar=ar.nextSibling;sr[sr.indexOf(ar)]=null,er.__e=ar}else er.__e=rr.__e,er.__k=rr.__k;l$1.__e(Sr,er,rr)}else sr==null&&er.__v===rr.__v?(er.__k=rr.__k,er.__e=rr.__e):er.__e=z$1(rr.__e,er,rr,nr,ir,sr,or,cr,lr);(ur=l$1.diffed)&&ur(er)}function j$1(tr,er,rr){er.__d=void 0;for(var nr=0;nr<rr.length;nr++)N(rr[nr],rr[++nr],rr[++nr]);l$1.__c&&l$1.__c(er,tr),tr.some(function(ir){try{tr=ir.__h,ir.__h=[],tr.some(function(sr){sr.call(ir)})}catch(sr){l$1.__e(sr,ir.__v)}})}function z$1(tr,er,rr,nr,ir,sr,or,ar,cr){var lr,ur,dr,yr,mr,wr,xr,Or=rr.props,Tr=er.props,Ar=er.type;if(Ar==="svg"?ir="http://www.w3.org/2000/svg":Ar==="math"?ir="http://www.w3.org/1998/Math/MathML":ir||(ir="http://www.w3.org/1999/xhtml"),sr!=null){for(lr=0;lr<sr.length;lr++)if((mr=sr[lr])&&"setAttribute"in mr==!!Ar&&(Ar?mr.localName===Ar:mr.nodeType===3)){tr=mr,sr[lr]=null;break}}if(tr==null){if(Ar===null)return document.createTextNode(Tr);tr=document.createElementNS(ir,Ar,Tr.is&&Tr),sr=null,ar=!1}if(Ar===null)Or===Tr||ar&&tr.data===Tr||(tr.data=Tr);else{if(sr=sr&&n.call(tr.childNodes),Or=rr.props||h$1,!ar&&sr!=null)for(Or={},lr=0;lr<tr.attributes.length;lr++)Or[(mr=tr.attributes[lr]).name]=mr.value;for(lr in Or)if(mr=Or[lr],lr!="children"){if(lr=="dangerouslySetInnerHTML")dr=mr;else if(lr!=="key"&&!(lr in Tr)){if(lr=="value"&&"defaultValue"in Tr||lr=="checked"&&"defaultChecked"in Tr)continue;A$1(tr,lr,null,mr,ir)}}for(lr in Tr)mr=Tr[lr],lr=="children"?yr=mr:lr=="dangerouslySetInnerHTML"?ur=mr:lr=="value"?wr=mr:lr=="checked"?xr=mr:lr==="key"||ar&&typeof mr!="function"||Or[lr]===mr||A$1(tr,lr,mr,Or[lr],ir);if(ur)ar||dr&&(ur.__html===dr.__html||ur.__html===tr.innerHTML)||(tr.innerHTML=ur.__html),er.__k=[];else if(dr&&(tr.innerHTML=""),S(tr,y$1(yr)?yr:[yr],er,rr,nr,Ar==="foreignObject"?"http://www.w3.org/1999/xhtml":ir,sr,or,sr?sr[0]:rr.__k&&x$1(rr,0),ar,cr),sr!=null)for(lr=sr.length;lr--;)sr[lr]!=null&&w$1(sr[lr]);ar||(lr="value",wr!==void 0&&(wr!==tr[lr]||Ar==="progress"&&!wr||Ar==="option"&&wr!==Or[lr])&&A$1(tr,lr,wr,Or[lr],ir),lr="checked",xr!==void 0&&xr!==tr[lr]&&A$1(tr,lr,xr,Or[lr],ir))}return tr}function N(tr,er,rr){try{if(typeof tr=="function"){var nr=typeof tr.__u=="function";nr&&tr.__u(),nr&&er==null||(tr.__u=tr(er))}else tr.current=er}catch(ir){l$1.__e(ir,rr)}}function V(tr,er,rr){var nr,ir;if(l$1.unmount&&l$1.unmount(tr),(nr=tr.ref)&&(nr.current&&nr.current!==tr.__e||N(nr,null,er)),(nr=tr.__c)!=null){if(nr.componentWillUnmount)try{nr.componentWillUnmount()}catch(sr){l$1.__e(sr,er)}nr.base=nr.__P=null}if(nr=tr.__k)for(ir=0;ir<nr.length;ir++)nr[ir]&&V(nr[ir],er,rr||typeof tr.type!="function");rr||tr.__e==null||w$1(tr.__e),tr.__c=tr.__=tr.__e=tr.__d=void 0}function q$1(tr,er,rr){return this.constructor(tr,rr)}function B$1(tr,er,rr){var nr,ir,sr,or;l$1.__&&l$1.__(tr,er),ir=(nr=typeof rr=="function")?null:rr&&rr.__k||er.__k,sr=[],or=[],O(er,tr=(!nr&&rr||er).__k=_$1(k$1,null,[tr]),ir||h$1,h$1,er.namespaceURI,!nr&&rr?[rr]:ir?null:er.firstChild?n.call(er.childNodes):null,sr,!nr&&rr?rr:ir?ir.__e:er.firstChild,nr,or),j$1(sr,tr,or)}function D$1(tr,er){B$1(tr,er,D$1)}function E(tr,er,rr){var nr,ir,sr,or,ar=d$1({},tr.props);for(sr in tr.type&&tr.type.defaultProps&&(or=tr.type.defaultProps),er)sr=="key"?nr=er[sr]:sr=="ref"?ir=er[sr]:ar[sr]=er[sr]===void 0&&or!==void 0?or[sr]:er[sr];return arguments.length>2&&(ar.children=arguments.length>3?n.call(arguments,2):rr),g$1(tr.type,ar,nr||tr.key,ir||tr.ref,null)}function G(tr,er){var rr={__c:er="__cC"+a$1++,__:tr,Consumer:function(nr,ir){return nr.children(ir)},Provider:function(nr){var ir,sr;return this.getChildContext||(ir=[],(sr={})[er]=this,this.getChildContext=function(){return sr},this.componentWillUnmount=function(){ir=null},this.shouldComponentUpdate=function(or){this.props.value!==or.value&&ir.some(function(ar){ar.__e=!0,M(ar)})},this.sub=function(or){ir.push(or);var ar=or.componentWillUnmount;or.componentWillUnmount=function(){ir&&ir.splice(ir.indexOf(or),1),ar&&ar.call(or)}}),nr.children}};return rr.Provider.__=rr.Consumer.contextType=rr}n=p$1.slice,l$1={__e:function(tr,er,rr,nr){for(var ir,sr,or;er=er.__;)if((ir=er.__c)&&!ir.__)try{if((sr=ir.constructor)&&sr.getDerivedStateFromError!=null&&(ir.setState(sr.getDerivedStateFromError(tr)),or=ir.__d),ir.componentDidCatch!=null&&(ir.componentDidCatch(tr,nr||{}),or=ir.__d),or)return ir.__E=ir}catch(ar){tr=ar}throw tr}},u$1=0,t$1=function(tr){return tr!=null&&tr.constructor==null},b$1.prototype.setState=function(tr,er){var rr;rr=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=d$1({},this.state),typeof tr=="function"&&(tr=tr(d$1({},rr),this.props)),tr&&d$1(rr,tr),tr!=null&&this.__v&&(er&&this._sb.push(er),M(this))},b$1.prototype.forceUpdate=function(tr){this.__v&&(this.__e=!0,tr&&this.__h.push(tr),M(this))},b$1.prototype.render=k$1,i$1=[],r$1=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,f$1=function(tr,er){return tr.__v.__b-er.__v.__b},P$1.__r=0,e$1=0,c$1=F$1(!1),s$1=F$1(!0),a$1=0;const preact_module=Object.freeze(Object.defineProperty({__proto__:null,Component:b$1,Fragment:k$1,cloneElement:E,createContext:G,createElement:_$1,createRef:m$1,h:_$1,hydrate:D$1,get isValidElement(){return t$1},get options(){return l$1},render:B$1,toChildArray:H},Symbol.toStringTag,{value:"Module"})),require$$1=getAugmentedNamespace(preact_module);var t,r,u,i,o=0,f=[],c=l$1,e=c.__b,a=c.__r,v=c.diffed,l=c.__c,m=c.unmount,s=c.__;function d(tr,er){c.__h&&c.__h(r,tr,o||er),o=0;var rr=r.__H||(r.__H={__:[],__h:[]});return tr>=rr.__.length&&rr.__.push({}),rr.__[tr]}function h(tr){return o=1,p(D,tr)}function p(tr,er,rr){var nr=d(t++,2);if(nr.t=tr,!nr.__c&&(nr.__=[rr?rr(er):D(void 0,er),function(ar){var cr=nr.__N?nr.__N[0]:nr.__[0],lr=nr.t(cr,ar);cr!==lr&&(nr.__N=[lr,nr.__[1]],nr.__c.setState({}))}],nr.__c=r,!r.u)){var ir=function(ar,cr,lr){if(!nr.__c.__H)return!0;var ur=nr.__c.__H.__.filter(function(yr){return!!yr.__c});if(ur.every(function(yr){return!yr.__N}))return!sr||sr.call(this,ar,cr,lr);var dr=!1;return ur.forEach(function(yr){if(yr.__N){var mr=yr.__[0];yr.__=yr.__N,yr.__N=void 0,mr!==yr.__[0]&&(dr=!0)}}),!(!dr&&nr.__c.props===ar)&&(!sr||sr.call(this,ar,cr,lr))};r.u=!0;var sr=r.shouldComponentUpdate,or=r.componentWillUpdate;r.componentWillUpdate=function(ar,cr,lr){if(this.__e){var ur=sr;sr=void 0,ir(ar,cr,lr),sr=ur}or&&or.call(this,ar,cr,lr)},r.shouldComponentUpdate=ir}return nr.__N||nr.__}function y(tr,er){var rr=d(t++,3);!c.__s&&C(rr.__H,er)&&(rr.__=tr,rr.i=er,r.__H.__h.push(rr))}function _(tr,er){var rr=d(t++,4);!c.__s&&C(rr.__H,er)&&(rr.__=tr,rr.i=er,r.__h.push(rr))}function A(tr){return o=5,T(function(){return{current:tr}},[])}function F(tr,er,rr){o=6,_(function(){return typeof tr=="function"?(tr(er()),function(){return tr(null)}):tr?(tr.current=er(),function(){return tr.current=null}):void 0},rr==null?rr:rr.concat(tr))}function T(tr,er){var rr=d(t++,7);return C(rr.__H,er)&&(rr.__=tr(),rr.__H=er,rr.__h=tr),rr.__}function q(tr,er){return o=8,T(function(){return tr},er)}function x(tr){var er=r.context[tr.__c],rr=d(t++,9);return rr.c=tr,er?(rr.__==null&&(rr.__=!0,er.sub(r)),er.props.value):tr.__}function P(tr,er){c.useDebugValue&&c.useDebugValue(er?er(tr):tr)}function b(tr){var er=d(t++,10),rr=h();return er.__=tr,r.componentDidCatch||(r.componentDidCatch=function(nr,ir){er.__&&er.__(nr,ir),rr[1](nr)}),[rr[0],function(){rr[1](void 0)}]}function g(){var tr=d(t++,11);if(!tr.__){for(var er=r.__v;er!==null&&!er.__m&&er.__!==null;)er=er.__;var rr=er.__m||(er.__m=[0,0]);tr.__="P"+rr[0]+"-"+rr[1]++}return tr.__}function j(){for(var tr;tr=f.shift();)if(tr.__P&&tr.__H)try{tr.__H.__h.forEach(z),tr.__H.__h.forEach(B),tr.__H.__h=[]}catch(er){tr.__H.__h=[],c.__e(er,tr.__v)}}c.__b=function(tr){r=null,e&&e(tr)},c.__=function(tr,er){tr&&er.__k&&er.__k.__m&&(tr.__m=er.__k.__m),s&&s(tr,er)},c.__r=function(tr){a&&a(tr),t=0;var er=(r=tr.__c).__H;er&&(u===r?(er.__h=[],r.__h=[],er.__.forEach(function(rr){rr.__N&&(rr.__=rr.__N),rr.i=rr.__N=void 0})):(er.__h.forEach(z),er.__h.forEach(B),er.__h=[],t=0)),u=r},c.diffed=function(tr){v&&v(tr);var er=tr.__c;er&&er.__H&&(er.__H.__h.length&&(f.push(er)!==1&&i===c.requestAnimationFrame||((i=c.requestAnimationFrame)||w)(j)),er.__H.__.forEach(function(rr){rr.i&&(rr.__H=rr.i),rr.i=void 0})),u=r=null},c.__c=function(tr,er){er.some(function(rr){try{rr.__h.forEach(z),rr.__h=rr.__h.filter(function(nr){return!nr.__||B(nr)})}catch(nr){er.some(function(ir){ir.__h&&(ir.__h=[])}),er=[],c.__e(nr,rr.__v)}}),l&&l(tr,er)},c.unmount=function(tr){m&&m(tr);var er,rr=tr.__c;rr&&rr.__H&&(rr.__H.__.forEach(function(nr){try{z(nr)}catch(ir){er=ir}}),rr.__H=void 0,er&&c.__e(er,rr.__v))};var k=typeof requestAnimationFrame=="function";function w(tr){var er,rr=function(){clearTimeout(nr),k&&cancelAnimationFrame(er),setTimeout(tr)},nr=setTimeout(rr,100);k&&(er=requestAnimationFrame(rr))}function z(tr){var er=r,rr=tr.__c;typeof rr=="function"&&(tr.__c=void 0,rr()),r=er}function B(tr){var er=r;tr.__c=tr.__(),r=er}function C(tr,er){return!tr||tr.length!==er.length||er.some(function(rr,nr){return rr!==tr[nr]})}function D(tr,er){return typeof er=="function"?er(tr):er}const hooks_module=Object.freeze(Object.defineProperty({__proto__:null,useCallback:q,useContext:x,useDebugValue:P,useEffect:y,useErrorBoundary:b,useId:g,useImperativeHandle:F,useLayoutEffect:_,useMemo:T,useReducer:p,useRef:A,useState:h},Symbol.toStringTag,{value:"Module"})),require$$2=getAugmentedNamespace(hooks_module);var SnackbarCss={};Object.defineProperty(SnackbarCss,"__esModule",{value:!0});SnackbarCss.default=".-cbwsdk-css-reset .-gear-container{margin-left:16px !important;margin-right:9px !important;display:flex;align-items:center;justify-content:center;width:24px;height:24px;transition:opacity .25s}.-cbwsdk-css-reset .-gear-container *{user-select:none}.-cbwsdk-css-reset .-gear-container svg{opacity:0;position:absolute}.-cbwsdk-css-reset .-gear-icon{height:12px;width:12px;z-index:10000}.-cbwsdk-css-reset .-cbwsdk-snackbar{align-items:flex-end;display:flex;flex-direction:column;position:fixed;right:0;top:0;z-index:2147483647}.-cbwsdk-css-reset .-cbwsdk-snackbar *{user-select:none}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance{display:flex;flex-direction:column;margin:8px 16px 0 16px;overflow:visible;text-align:left;transform:translateX(0);transition:opacity .25s,transform .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-header:hover .-gear-container svg{opacity:1}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-header{display:flex;align-items:center;background:#fff;overflow:hidden;border:1px solid #e7ebee;box-sizing:border-box;border-radius:8px;cursor:pointer}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-header-cblogo{margin:8px 8px 8px 8px}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-header *{cursor:pointer}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-header-message{color:#000;font-size:13px;line-height:1.5;user-select:none}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu{background:#fff;transition:opacity .25s ease-in-out,transform .25s linear,visibility 0s;visibility:hidden;border:1px solid #e7ebee;box-sizing:border-box;border-radius:8px;opacity:0;flex-direction:column;padding-left:8px;padding-right:8px}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item:last-child{margin-bottom:8px !important}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item:hover{background:#f5f7f8;border-radius:6px;transition:background .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item:hover span{color:#050f19;transition:color .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item:hover svg path{fill:#000;transition:fill .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item{visibility:inherit;height:35px;margin-top:8px;margin-bottom:0;display:flex;flex-direction:row;align-items:center;padding:8px;cursor:pointer}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item *{visibility:inherit;cursor:pointer}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item-is-red:hover{background:rgba(223,95,103,.2);transition:background .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item-is-red:hover *{cursor:pointer}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item-is-red:hover svg path{fill:#df5f67;transition:fill .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item-is-red:hover span{color:#df5f67;transition:color .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item-info{color:#aaa;font-size:13px;margin:0 8px 0 32px;position:absolute}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-hidden{opacity:0;text-align:left;transform:translateX(25%);transition:opacity .5s linear}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-expanded .-cbwsdk-snackbar-instance-menu{opacity:1;display:flex;transform:translateY(8px);visibility:visible}";(function(tr){var er=commonjsGlobal&&commonjsGlobal.__importDefault||function(yr){return yr&&yr.__esModule?yr:{default:yr}};Object.defineProperty(tr,"__esModule",{value:!0}),tr.SnackbarInstance=tr.SnackbarContainer=tr.Snackbar=void 0;const rr=er(require$$0),nr=require$$1,ir=require$$2,sr=util$1,or=er(SnackbarCss),ar="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTEuNDkyIDEwLjQxOWE4LjkzIDguOTMgMCAwMTguOTMtOC45M2gxMS4xNjNhOC45MyA4LjkzIDAgMDE4LjkzIDguOTN2MTEuMTYzYTguOTMgOC45MyAwIDAxLTguOTMgOC45M0gxMC40MjJhOC45MyA4LjkzIDAgMDEtOC45My04LjkzVjEwLjQxOXoiIGZpbGw9IiMxNjUyRjAiLz48cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTEwLjQxOSAwSDIxLjU4QzI3LjMzNSAwIDMyIDQuNjY1IDMyIDEwLjQxOVYyMS41OEMzMiAyNy4zMzUgMjcuMzM1IDMyIDIxLjU4MSAzMkgxMC40MkM0LjY2NSAzMiAwIDI3LjMzNSAwIDIxLjU4MVYxMC40MkMwIDQuNjY1IDQuNjY1IDAgMTAuNDE5IDB6bTAgMS40ODhhOC45MyA4LjkzIDAgMDAtOC45MyA4LjkzdjExLjE2M2E4LjkzIDguOTMgMCAwMDguOTMgOC45M0gyMS41OGE4LjkzIDguOTMgMCAwMDguOTMtOC45M1YxMC40MmE4LjkzIDguOTMgMCAwMC04LjkzLTguOTNIMTAuNDJ6IiBmaWxsPSIjZmZmIi8+PHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0xNS45OTggMjYuMDQ5Yy01LjU0OSAwLTEwLjA0Ny00LjQ5OC0xMC4wNDctMTAuMDQ3IDAtNS41NDggNC40OTgtMTAuMDQ2IDEwLjA0Ny0xMC4wNDYgNS41NDggMCAxMC4wNDYgNC40OTggMTAuMDQ2IDEwLjA0NiAwIDUuNTQ5LTQuNDk4IDEwLjA0Ny0xMC4wNDYgMTAuMDQ3eiIgZmlsbD0iI2ZmZiIvPjxwYXRoIGQ9Ik0xMi43NjIgMTQuMjU0YzAtLjgyMi42NjctMS40ODkgMS40ODktMS40ODloMy40OTdjLjgyMiAwIDEuNDg4LjY2NiAxLjQ4OCAxLjQ4OXYzLjQ5N2MwIC44MjItLjY2NiAxLjQ4OC0xLjQ4OCAxLjQ4OGgtMy40OTdhMS40ODggMS40ODggMCAwMS0xLjQ4OS0xLjQ4OHYtMy40OTh6IiBmaWxsPSIjMTY1MkYwIi8+PC9zdmc+",cr="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTIiIGhlaWdodD0iMTIiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTEyIDYuNzV2LTEuNWwtMS43Mi0uNTdjLS4wOC0uMjctLjE5LS41Mi0uMzItLjc3bC44MS0xLjYyLTEuMDYtMS4wNi0xLjYyLjgxYy0uMjQtLjEzLS41LS4yNC0uNzctLjMyTDYuNzUgMGgtMS41bC0uNTcgMS43MmMtLjI3LjA4LS41My4xOS0uNzcuMzJsLTEuNjItLjgxLTEuMDYgMS4wNi44MSAxLjYyYy0uMTMuMjQtLjI0LjUtLjMyLjc3TDAgNS4yNXYxLjVsMS43Mi41N2MuMDguMjcuMTkuNTMuMzIuNzdsLS44MSAxLjYyIDEuMDYgMS4wNiAxLjYyLS44MWMuMjQuMTMuNS4yMy43Ny4zMkw1LjI1IDEyaDEuNWwuNTctMS43MmMuMjctLjA4LjUyLS4xOS43Ny0uMzJsMS42Mi44MSAxLjA2LTEuMDYtLjgxLTEuNjJjLjEzLS4yNC4yMy0uNS4zMi0uNzdMMTIgNi43NXpNNiA4LjVhMi41IDIuNSAwIDAxMC01IDIuNSAyLjUgMCAwMTAgNXoiIGZpbGw9IiMwNTBGMTkiLz48L3N2Zz4=";class lr{constructor(){this.items=new Map,this.nextItemKey=0,this.root=null,this.darkMode=(0,sr.isDarkMode)()}attach(mr){this.root=document.createElement("div"),this.root.className="-cbwsdk-snackbar-root",mr.appendChild(this.root),this.render()}presentItem(mr){const wr=this.nextItemKey++;return this.items.set(wr,mr),this.render(),()=>{this.items.delete(wr),this.render()}}clear(){this.items.clear(),this.render()}render(){this.root&&(0,nr.render)((0,nr.h)("div",null,(0,nr.h)(tr.SnackbarContainer,{darkMode:this.darkMode},Array.from(this.items.entries()).map(([mr,wr])=>(0,nr.h)(tr.SnackbarInstance,Object.assign({},wr,{key:mr}))))),this.root)}}tr.Snackbar=lr;const ur=yr=>(0,nr.h)("div",{class:(0,rr.default)("-cbwsdk-snackbar-container")},(0,nr.h)("style",null,or.default),(0,nr.h)("div",{class:"-cbwsdk-snackbar"},yr.children));tr.SnackbarContainer=ur;const dr=({autoExpand:yr,message:mr,menuItems:wr})=>{const[xr,Or]=(0,ir.useState)(!0),[Tr,Ar]=(0,ir.useState)(yr??!1);(0,ir.useEffect)(()=>{const Ur=[window.setTimeout(()=>{Or(!1)},1),window.setTimeout(()=>{Ar(!0)},1e4)];return()=>{Ur.forEach(window.clearTimeout)}});const Nr=()=>{Ar(!Tr)};return(0,nr.h)("div",{class:(0,rr.default)("-cbwsdk-snackbar-instance",xr&&"-cbwsdk-snackbar-instance-hidden",Tr&&"-cbwsdk-snackbar-instance-expanded")},(0,nr.h)("div",{class:"-cbwsdk-snackbar-instance-header",onClick:Nr},(0,nr.h)("img",{src:ar,class:"-cbwsdk-snackbar-instance-header-cblogo"})," ",(0,nr.h)("div",{class:"-cbwsdk-snackbar-instance-header-message"},mr),(0,nr.h)("div",{class:"-gear-container"},!Tr&&(0,nr.h)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},(0,nr.h)("circle",{cx:"12",cy:"12",r:"12",fill:"#F5F7F8"})),(0,nr.h)("img",{src:cr,class:"-gear-icon",title:"Expand"}))),wr&&wr.length>0&&(0,nr.h)("div",{class:"-cbwsdk-snackbar-instance-menu"},wr.map((Ur,Dr)=>(0,nr.h)("div",{class:(0,rr.default)("-cbwsdk-snackbar-instance-menu-item",Ur.isRed&&"-cbwsdk-snackbar-instance-menu-item-is-red"),onClick:Ur.onClick,key:Dr},(0,nr.h)("svg",{width:Ur.svgWidth,height:Ur.svgHeight,viewBox:"0 0 10 11",fill:"none",xmlns:"http://www.w3.org/2000/svg"},(0,nr.h)("path",{"fill-rule":Ur.defaultFillRule,"clip-rule":Ur.defaultClipRule,d:Ur.path,fill:"#AAAAAA"})),(0,nr.h)("span",{class:(0,rr.default)("-cbwsdk-snackbar-instance-menu-item-info",Ur.isRed&&"-cbwsdk-snackbar-instance-menu-item-info-is-red")},Ur.info)))))};tr.SnackbarInstance=dr})(Snackbar);Object.defineProperty(WalletLinkRelayUI$1,"__esModule",{value:!0});WalletLinkRelayUI$1.WalletLinkRelayUI=void 0;const cssReset_1$1=cssReset,Snackbar_1$1=Snackbar;class WalletLinkRelayUI{constructor(){this.attached=!1,this.snackbar=new Snackbar_1$1.Snackbar}attach(){if(this.attached)throw new Error("Coinbase Wallet SDK UI is already attached");const er=document.documentElement,rr=document.createElement("div");rr.className="-cbwsdk-css-reset",er.appendChild(rr),this.snackbar.attach(rr),this.attached=!0,(0,cssReset_1$1.injectCssReset)()}showConnecting(er){let rr;return er.isUnlinkedErrorState?rr={autoExpand:!0,message:"Connection lost",menuItems:[{isRed:!1,info:"Reset connection",svgWidth:"10",svgHeight:"11",path:"M5.00008 0.96875C6.73133 0.96875 8.23758 1.94375 9.00008 3.375L10.0001 2.375V5.5H9.53133H7.96883H6.87508L7.80633 4.56875C7.41258 3.3875 6.31258 2.53125 5.00008 2.53125C3.76258 2.53125 2.70633 3.2875 2.25633 4.36875L0.812576 3.76875C1.50008 2.125 3.11258 0.96875 5.00008 0.96875ZM2.19375 6.43125C2.5875 7.6125 3.6875 8.46875 5 8.46875C6.2375 8.46875 7.29375 7.7125 7.74375 6.63125L9.1875 7.23125C8.5 8.875 6.8875 10.0312 5 10.0312C3.26875 10.0312 1.7625 9.05625 1 7.625L0 8.625V5.5H0.46875H2.03125H3.125L2.19375 6.43125Z",defaultFillRule:"evenodd",defaultClipRule:"evenodd",onClick:er.onResetConnection}]}:rr={message:"Confirm on phone",menuItems:[{isRed:!0,info:"Cancel transaction",svgWidth:"11",svgHeight:"11",path:"M10.3711 1.52346L9.21775 0.370117L5.37109 4.21022L1.52444 0.370117L0.371094 1.52346L4.2112 5.37012L0.371094 9.21677L1.52444 10.3701L5.37109 6.53001L9.21775 10.3701L10.3711 9.21677L6.53099 5.37012L10.3711 1.52346Z",defaultFillRule:"inherit",defaultClipRule:"inherit",onClick:er.onCancel},{isRed:!1,info:"Reset connection",svgWidth:"10",svgHeight:"11",path:"M5.00008 0.96875C6.73133 0.96875 8.23758 1.94375 9.00008 3.375L10.0001 2.375V5.5H9.53133H7.96883H6.87508L7.80633 4.56875C7.41258 3.3875 6.31258 2.53125 5.00008 2.53125C3.76258 2.53125 2.70633 3.2875 2.25633 4.36875L0.812576 3.76875C1.50008 2.125 3.11258 0.96875 5.00008 0.96875ZM2.19375 6.43125C2.5875 7.6125 3.6875 8.46875 5 8.46875C6.2375 8.46875 7.29375 7.7125 7.74375 6.63125L9.1875 7.23125C8.5 8.875 6.8875 10.0312 5 10.0312C3.26875 10.0312 1.7625 9.05625 1 7.625L0 8.625V5.5H0.46875H2.03125H3.125L2.19375 6.43125Z",defaultFillRule:"evenodd",defaultClipRule:"evenodd",onClick:er.onResetConnection}]},this.snackbar.presentItem(rr)}}WalletLinkRelayUI$1.WalletLinkRelayUI=WalletLinkRelayUI;var WLMobileRelayUI$1={},RedirectDialog$1={},RedirectDialogCss={};Object.defineProperty(RedirectDialogCss,"__esModule",{value:!0});RedirectDialogCss.default=".-cbwsdk-css-reset .-cbwsdk-redirect-dialog-backdrop{position:fixed;top:0;left:0;right:0;bottom:0;transition:opacity .25s;background-color:rgba(10,11,13,.5)}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-backdrop-hidden{opacity:0}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-box{display:block;position:fixed;top:50%;left:50%;transform:translate(-50%, -50%);padding:20px;border-radius:8px;background-color:#fff;color:#0a0b0d}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-box p{display:block;font-weight:400;font-size:14px;line-height:20px;padding-bottom:12px;color:#5b636e}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-box button{appearance:none;border:none;background:none;color:#0052ff;padding:0;text-decoration:none;display:block;font-weight:600;font-size:16px;line-height:24px}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-box.dark{background-color:#0a0b0d;color:#fff}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-box.dark button{color:#0052ff}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-box.light{background-color:#fff;color:#0a0b0d}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-box.light button{color:#0052ff}";var __importDefault$2=commonjsGlobal&&commonjsGlobal.__importDefault||function(tr){return tr&&tr.__esModule?tr:{default:tr}};Object.defineProperty(RedirectDialog$1,"__esModule",{value:!0});RedirectDialog$1.RedirectDialog=void 0;const clsx_1=__importDefault$2(require$$0),preact_1=require$$1,cssReset_1=cssReset,Snackbar_1=Snackbar,util_1$6=util$1,RedirectDialog_css_1=__importDefault$2(RedirectDialogCss);class RedirectDialog{constructor(){this.root=null,this.darkMode=(0,util_1$6.isDarkMode)()}attach(){const er=document.documentElement;this.root=document.createElement("div"),this.root.className="-cbwsdk-css-reset",er.appendChild(this.root),(0,cssReset_1.injectCssReset)()}present(er){this.render(er)}clear(){this.render(null)}render(er){this.root&&((0,preact_1.render)(null,this.root),er&&(0,preact_1.render)((0,preact_1.h)(RedirectDialogContent,Object.assign({},er,{onDismiss:()=>{this.clear()},darkMode:this.darkMode})),this.root))}}RedirectDialog$1.RedirectDialog=RedirectDialog;const RedirectDialogContent=({title:tr,buttonText:er,darkMode:rr,onButtonClick:nr,onDismiss:ir})=>{const sr=rr?"dark":"light";return(0,preact_1.h)(Snackbar_1.SnackbarContainer,{darkMode:rr},(0,preact_1.h)("div",{class:"-cbwsdk-redirect-dialog"},(0,preact_1.h)("style",null,RedirectDialog_css_1.default),(0,preact_1.h)("div",{class:"-cbwsdk-redirect-dialog-backdrop",onClick:ir}),(0,preact_1.h)("div",{class:(0,clsx_1.default)("-cbwsdk-redirect-dialog-box",sr)},(0,preact_1.h)("p",null,tr),(0,preact_1.h)("button",{onClick:nr},er))))};var constants={};Object.defineProperty(constants,"__esModule",{value:!0});constants.CBW_MOBILE_DEEPLINK_URL=constants.WALLETLINK_URL=constants.CB_KEYS_URL=void 0;constants.CB_KEYS_URL="https://keys.coinbase.com/connect";constants.WALLETLINK_URL="https://www.walletlink.org";constants.CBW_MOBILE_DEEPLINK_URL="https://go.cb-w.com/walletlink";Object.defineProperty(WLMobileRelayUI$1,"__esModule",{value:!0});WLMobileRelayUI$1.WLMobileRelayUI=void 0;const RedirectDialog_1=RedirectDialog$1,util_1$5=util$1,constants_1$3=constants;class WLMobileRelayUI{constructor(){this.attached=!1,this.redirectDialog=new RedirectDialog_1.RedirectDialog}attach(){if(this.attached)throw new Error("Coinbase Wallet SDK UI is already attached");this.redirectDialog.attach(),this.attached=!0}redirectToCoinbaseWallet(er){const rr=new URL(constants_1$3.CBW_MOBILE_DEEPLINK_URL);rr.searchParams.append("redirect_url",(0,util_1$5.getLocation)().href),er&&rr.searchParams.append("wl_url",er);const nr=document.createElement("a");nr.target="cbw-opener",nr.href=rr.href,nr.rel="noreferrer noopener",nr.click()}openCoinbaseWalletDeeplink(er){this.redirectDialog.present({title:"Redirecting to Coinbase Wallet...",buttonText:"Open",onButtonClick:()=>{this.redirectToCoinbaseWallet(er)}}),setTimeout(()=>{this.redirectToCoinbaseWallet(er)},99)}showConnecting(er){return()=>{this.redirectDialog.clear()}}}WLMobileRelayUI$1.WLMobileRelayUI=WLMobileRelayUI;Object.defineProperty(WalletLinkRelay$1,"__esModule",{value:!0});WalletLinkRelay$1.WalletLinkRelay=void 0;const WalletLinkConnection_1=WalletLinkConnection$1,constants_1$2=constants$1,RelayEventManager_1$1=RelayEventManager$1,WalletLinkSession_1=WalletLinkSession$1,Web3Response_1$1=Web3Response,util_1$4=util$1,WalletLinkRelayUI_1=WalletLinkRelayUI$1,WLMobileRelayUI_1=WLMobileRelayUI$1,error_1$6=error,util_2$1=util$6,ScopedLocalStorage_1$4=ScopedLocalStorage$1;class WalletLinkRelay{constructor(er){this.accountsCallback=null,this.chainCallbackParams={chainId:"",jsonRpcUrl:""},this.chainCallback=null,this.dappDefaultChain=1,this.isMobileWeb=(0,util_1$4.isMobileWeb)(),this.appName="",this.appLogoUrl=null,this.linkedUpdated=sr=>{this.isLinked=sr;const or=this.storage.getItem(constants_1$2.LOCAL_STORAGE_ADDRESSES_KEY);if(sr&&(this._session.linked=sr),this.isUnlinkedErrorState=!1,or){const ar=or.split(" "),cr=this.storage.getItem("IsStandaloneSigning")==="true";ar[0]!==""&&!sr&&this._session.linked&&!cr&&(this.isUnlinkedErrorState=!0)}},this.metadataUpdated=(sr,or)=>{this.storage.setItem(sr,or)},this.chainUpdated=(sr,or)=>{this.chainCallbackParams.chainId===sr&&this.chainCallbackParams.jsonRpcUrl===or||(this.chainCallbackParams={chainId:sr,jsonRpcUrl:or},this.chainCallback&&this.chainCallback(sr,or))},this.accountUpdated=sr=>{this.accountsCallback&&this.accountsCallback([sr]),WalletLinkRelay.accountRequestCallbackIds.size>0&&(Array.from(WalletLinkRelay.accountRequestCallbackIds.values()).forEach(or=>{const ar={type:"WEB3_RESPONSE",id:or,response:{method:"requestEthereumAccounts",result:[sr]}};this.invokeCallback(Object.assign(Object.assign({},ar),{id:or}))}),WalletLinkRelay.accountRequestCallbackIds.clear())},this.resetAndReload=this.resetAndReload.bind(this),this.linkAPIUrl=er.linkAPIUrl,this.storage=er.storage;const{session:rr,ui:nr,connection:ir}=this.subscribe();this._session=rr,this.connection=ir,this.relayEventManager=new RelayEventManager_1$1.RelayEventManager,this.ui=nr}subscribe(){const er=WalletLinkSession_1.WalletLinkSession.load(this.storage)||new WalletLinkSession_1.WalletLinkSession(this.storage).save(),{linkAPIUrl:rr}=this,nr=new WalletLinkConnection_1.WalletLinkConnection({session:er,linkAPIUrl:rr,listener:this}),ir=this.isMobileWeb?new WLMobileRelayUI_1.WLMobileRelayUI:new WalletLinkRelayUI_1.WalletLinkRelayUI;return nr.connect(),{session:er,ui:ir,connection:nr}}attachUI(){this.ui.attach()}resetAndReload(){Promise.race([this.connection.setSessionMetadata("__destroyed","1"),new Promise(er=>setTimeout(()=>er(null),1e3))]).then(()=>{this.connection.destroy();const er=WalletLinkSession_1.WalletLinkSession.load(this.storage);(er==null?void 0:er.id)===this._session.id&&ScopedLocalStorage_1$4.ScopedLocalStorage.clearAll(),document.location.reload()}).catch(er=>{})}setAppInfo(er,rr){this.appName=er,this.appLogoUrl=rr}getStorageItem(er){return this.storage.getItem(er)}setStorageItem(er,rr){this.storage.setItem(er,rr)}signEthereumMessage(er,rr,nr,ir){return this.sendRequest({method:"signEthereumMessage",params:{message:(0,util_2$1.hexStringFromBuffer)(er,!0),address:rr,addPrefix:nr,typedDataJson:ir||null}})}ethereumAddressFromSignedMessage(er,rr,nr){return this.sendRequest({method:"ethereumAddressFromSignedMessage",params:{message:(0,util_2$1.hexStringFromBuffer)(er,!0),signature:(0,util_2$1.hexStringFromBuffer)(rr,!0),addPrefix:nr}})}signEthereumTransaction(er){return this.sendRequest({method:"signEthereumTransaction",params:{fromAddress:er.fromAddress,toAddress:er.toAddress,weiValue:(0,util_2$1.bigIntStringFromBigInt)(er.weiValue),data:(0,util_2$1.hexStringFromBuffer)(er.data,!0),nonce:er.nonce,gasPriceInWei:er.gasPriceInWei?(0,util_2$1.bigIntStringFromBigInt)(er.gasPriceInWei):null,maxFeePerGas:er.gasPriceInWei?(0,util_2$1.bigIntStringFromBigInt)(er.gasPriceInWei):null,maxPriorityFeePerGas:er.gasPriceInWei?(0,util_2$1.bigIntStringFromBigInt)(er.gasPriceInWei):null,gasLimit:er.gasLimit?(0,util_2$1.bigIntStringFromBigInt)(er.gasLimit):null,chainId:er.chainId,shouldSubmit:!1}})}signAndSubmitEthereumTransaction(er){return this.sendRequest({method:"signEthereumTransaction",params:{fromAddress:er.fromAddress,toAddress:er.toAddress,weiValue:(0,util_2$1.bigIntStringFromBigInt)(er.weiValue),data:(0,util_2$1.hexStringFromBuffer)(er.data,!0),nonce:er.nonce,gasPriceInWei:er.gasPriceInWei?(0,util_2$1.bigIntStringFromBigInt)(er.gasPriceInWei):null,maxFeePerGas:er.maxFeePerGas?(0,util_2$1.bigIntStringFromBigInt)(er.maxFeePerGas):null,maxPriorityFeePerGas:er.maxPriorityFeePerGas?(0,util_2$1.bigIntStringFromBigInt)(er.maxPriorityFeePerGas):null,gasLimit:er.gasLimit?(0,util_2$1.bigIntStringFromBigInt)(er.gasLimit):null,chainId:er.chainId,shouldSubmit:!0}})}submitEthereumTransaction(er,rr){return this.sendRequest({method:"submitEthereumTransaction",params:{signedTransaction:(0,util_2$1.hexStringFromBuffer)(er,!0),chainId:rr}})}scanQRCode(er){return this.sendRequest({method:"scanQRCode",params:{regExp:er}})}getWalletLinkSession(){return this._session}genericRequest(er,rr){return this.sendRequest({method:"generic",params:{action:rr,data:er}})}sendGenericMessage(er){return this.sendRequest(er)}sendRequest(er){let rr=null;const nr=(0,util_2$1.randomBytesHex)(8),ir=sr=>{this.publishWeb3RequestCanceledEvent(nr),this.handleErrorResponse(nr,er.method,sr),rr==null||rr()};return new Promise((sr,or)=>{rr=this.ui.showConnecting({isUnlinkedErrorState:this.isUnlinkedErrorState,onCancel:ir,onResetConnection:this.resetAndReload}),this.relayEventManager.callbacks.set(nr,ar=>{if(rr==null||rr(),(0,Web3Response_1$1.isErrorResponse)(ar))return or(new Error(ar.errorMessage));sr(ar)}),this.publishWeb3RequestEvent(nr,er)})}setAccountsCallback(er){this.accountsCallback=er}setChainCallback(er){this.chainCallback=er}setDappDefaultChainCallback(er){this.dappDefaultChain=er}publishWeb3RequestEvent(er,rr){const nr={type:"WEB3_REQUEST",id:er,request:rr};this.publishEvent("Web3Request",nr,!0).then(ir=>{}).catch(ir=>{this.handleWeb3ResponseMessage({type:"WEB3_RESPONSE",id:nr.id,response:{method:rr.method,errorMessage:ir.message}})}),this.isMobileWeb&&this.openCoinbaseWalletDeeplink(rr.method)}openCoinbaseWalletDeeplink(er){if(this.ui instanceof WLMobileRelayUI_1.WLMobileRelayUI)switch(er){case"requestEthereumAccounts":case"switchEthereumChain":return;default:window.addEventListener("blur",()=>{window.addEventListener("focus",()=>{this.connection.checkUnseenEvents()},{once:!0})},{once:!0}),this.ui.openCoinbaseWalletDeeplink();break}}publishWeb3RequestCanceledEvent(er){const rr={type:"WEB3_REQUEST_CANCELED",id:er};this.publishEvent("Web3RequestCanceled",rr,!1).then()}publishEvent(er,rr,nr){return this.connection.publishEvent(er,rr,nr)}handleWeb3ResponseMessage(er){const{response:rr}=er;if(rr.method==="requestEthereumAccounts"){WalletLinkRelay.accountRequestCallbackIds.forEach(nr=>this.invokeCallback(Object.assign(Object.assign({},er),{id:nr}))),WalletLinkRelay.accountRequestCallbackIds.clear();return}this.invokeCallback(er)}handleErrorResponse(er,rr,nr){var ir;const sr=(ir=nr==null?void 0:nr.message)!==null&&ir!==void 0?ir:"Unspecified error message.";this.handleWeb3ResponseMessage({type:"WEB3_RESPONSE",id:er,response:{method:rr,errorMessage:sr}})}invokeCallback(er){const rr=this.relayEventManager.callbacks.get(er.id);rr&&(rr(er.response),this.relayEventManager.callbacks.delete(er.id))}requestEthereumAccounts(){const er={method:"requestEthereumAccounts",params:{appName:this.appName,appLogoUrl:this.appLogoUrl||null}},rr=(0,util_2$1.randomBytesHex)(8);return new Promise((nr,ir)=>{this.relayEventManager.callbacks.set(rr,sr=>{if((0,Web3Response_1$1.isErrorResponse)(sr))return ir(new Error(sr.errorMessage));nr(sr)}),WalletLinkRelay.accountRequestCallbackIds.add(rr),this.publishWeb3RequestEvent(rr,er)})}watchAsset(er,rr,nr,ir,sr,or){const ar={method:"watchAsset",params:{type:er,options:{address:rr,symbol:nr,decimals:ir,image:sr},chainId:or}};let cr=null;const lr=(0,util_2$1.randomBytesHex)(8),ur=dr=>{this.publishWeb3RequestCanceledEvent(lr),this.handleErrorResponse(lr,ar.method,dr),cr==null||cr()};return cr=this.ui.showConnecting({isUnlinkedErrorState:this.isUnlinkedErrorState,onCancel:ur,onResetConnection:this.resetAndReload}),new Promise((dr,yr)=>{this.relayEventManager.callbacks.set(lr,mr=>{if(cr==null||cr(),(0,Web3Response_1$1.isErrorResponse)(mr))return yr(new Error(mr.errorMessage));dr(mr)}),this.publishWeb3RequestEvent(lr,ar)})}addEthereumChain(er,rr,nr,ir,sr,or){const ar={method:"addEthereumChain",params:{chainId:er,rpcUrls:rr,blockExplorerUrls:ir,chainName:sr,iconUrls:nr,nativeCurrency:or}};let cr=null;const lr=(0,util_2$1.randomBytesHex)(8),ur=dr=>{this.publishWeb3RequestCanceledEvent(lr),this.handleErrorResponse(lr,ar.method,dr),cr==null||cr()};return cr=this.ui.showConnecting({isUnlinkedErrorState:this.isUnlinkedErrorState,onCancel:ur,onResetConnection:this.resetAndReload}),new Promise((dr,yr)=>{this.relayEventManager.callbacks.set(lr,mr=>{if(cr==null||cr(),(0,Web3Response_1$1.isErrorResponse)(mr))return yr(new Error(mr.errorMessage));dr(mr)}),this.publishWeb3RequestEvent(lr,ar)})}switchEthereumChain(er,rr){const nr={method:"switchEthereumChain",params:Object.assign({chainId:er},{address:rr})},ir=(0,util_2$1.randomBytesHex)(8);return new Promise((sr,or)=>{this.relayEventManager.callbacks.set(ir,ar=>{if((0,Web3Response_1$1.isErrorResponse)(ar)&&ar.errorCode)return or(error_1$6.standardErrors.provider.custom({code:ar.errorCode,message:"Unrecognized chain ID. Try adding the chain using addEthereumChain first."}));if((0,Web3Response_1$1.isErrorResponse)(ar))return or(new Error(ar.errorMessage));sr(ar)}),this.publishWeb3RequestEvent(ir,nr)})}}WalletLinkRelay$1.WalletLinkRelay=WalletLinkRelay;WalletLinkRelay.accountRequestCallbackIds=new Set;var __importDefault$1=commonjsGlobal&&commonjsGlobal.__importDefault||function(tr){return tr&&tr.__esModule?tr:{default:tr}};Object.defineProperty(WalletLinkSigner$1,"__esModule",{value:!0});WalletLinkSigner$1.WalletLinkSigner=void 0;const eth_eip712_util_1=__importDefault$1(ethEip712Util),constants_1$1=constants$1,RelayEventManager_1=RelayEventManager$1,Web3Response_1=Web3Response,WalletLinkRelay_1=WalletLinkRelay$1,constants_2=constants,error_1$5=error,util_1$3=util$6,ScopedLocalStorage_1$3=ScopedLocalStorage$1,DEFAULT_CHAIN_ID_KEY="DefaultChainId",DEFAULT_JSON_RPC_URL="DefaultJsonRpcUrl";class WalletLinkSigner{constructor(er){var rr,nr;this._relay=null,this._addresses=[],this.hasMadeFirstChainChangedEmission=!1;const{appName:ir,appLogoUrl:sr}=er.metadata;this._appName=ir,this._appLogoUrl=sr,this._storage=new ScopedLocalStorage_1$3.ScopedLocalStorage("walletlink",constants_2.WALLETLINK_URL),this.updateListener=er.updateListener,this._relayEventManager=new RelayEventManager_1.RelayEventManager,this._jsonRpcUrlFromOpts="";const or=this._storage.getItem(constants_1$1.LOCAL_STORAGE_ADDRESSES_KEY);if(or){const cr=or.split(" ");cr[0]!==""&&(this._addresses=cr.map(lr=>(0,util_1$3.ensureAddressString)(lr)),(rr=this.updateListener)===null||rr===void 0||rr.onAccountsUpdate({accounts:this._addresses,source:"storage"}))}this._storage.getItem(DEFAULT_CHAIN_ID_KEY)&&((nr=this.updateListener)===null||nr===void 0||nr.onChainUpdate({chain:{id:this.getChainId(),rpcUrl:this.jsonRpcUrl},source:"storage"}),this.hasMadeFirstChainChangedEmission=!0),this.initializeRelay()}getSession(){const er=this.initializeRelay(),{id:rr,secret:nr}=er.getWalletLinkSession();return{id:rr,secret:nr}}async handshake(){return await this.request({method:"eth_requestAccounts"})}get selectedAddress(){return this._addresses[0]||void 0}get jsonRpcUrl(){var er;return(er=this._storage.getItem(DEFAULT_JSON_RPC_URL))!==null&&er!==void 0?er:this._jsonRpcUrlFromOpts}set jsonRpcUrl(er){this._storage.setItem(DEFAULT_JSON_RPC_URL,er)}updateProviderInfo(er,rr){var nr;this.jsonRpcUrl=er;const ir=this.getChainId();this._storage.setItem(DEFAULT_CHAIN_ID_KEY,rr.toString(10)),((0,util_1$3.ensureIntNumber)(rr)!==ir||!this.hasMadeFirstChainChangedEmission)&&((nr=this.updateListener)===null||nr===void 0||nr.onChainUpdate({chain:{id:rr,rpcUrl:er},source:"wallet"}),this.hasMadeFirstChainChangedEmission=!0)}async watchAsset(er,rr,nr,ir,sr,or){const cr=await this.initializeRelay().watchAsset(er,rr,nr,ir,sr,or==null?void 0:or.toString());return(0,Web3Response_1.isErrorResponse)(cr)?!1:!!cr.result}async addEthereumChain(er,rr,nr,ir,sr,or){var ar,cr;if((0,util_1$3.ensureIntNumber)(er)===this.getChainId())return!1;const lr=this.initializeRelay();this._isAuthorized()||await lr.requestEthereumAccounts();const ur=await lr.addEthereumChain(er.toString(),rr,sr,nr,ir,or);return(0,Web3Response_1.isErrorResponse)(ur)?!1:(((ar=ur.result)===null||ar===void 0?void 0:ar.isApproved)===!0&&this.updateProviderInfo(rr[0],er),((cr=ur.result)===null||cr===void 0?void 0:cr.isApproved)===!0)}async switchEthereumChain(er){const nr=await this.initializeRelay().switchEthereumChain(er.toString(10),this.selectedAddress||void 0);if((0,Web3Response_1.isErrorResponse)(nr)){if(!nr.errorCode)return;throw nr.errorCode===error_1$5.standardErrorCodes.provider.unsupportedChain?error_1$5.standardErrors.provider.unsupportedChain():error_1$5.standardErrors.provider.custom({message:nr.errorMessage,code:nr.errorCode})}const ir=nr.result;ir.isApproved&&ir.rpcUrl.length>0&&this.updateProviderInfo(ir.rpcUrl,er)}async disconnect(){this._relay&&this._relay.resetAndReload(),this._storage.clear()}async request(er){try{return this._request(er).catch(rr=>{throw rr})}catch(rr){return Promise.reject(rr)}}async _request(er){if(!er||typeof er!="object"||Array.isArray(er))throw error_1$5.standardErrors.rpc.invalidRequest({message:"Expected a single, non-array, object argument.",data:er});const{method:rr,params:nr}=er;if(typeof rr!="string"||rr.length===0)throw error_1$5.standardErrors.rpc.invalidRequest({message:"'args.method' must be a non-empty string.",data:er});if(nr!==void 0&&!Array.isArray(nr)&&(typeof nr!="object"||nr===null))throw error_1$5.standardErrors.rpc.invalidRequest({message:"'args.params' must be an object or array if provided.",data:er});const ir=nr===void 0?[]:nr,sr=this._relayEventManager.makeRequestId();return(await this._sendRequestAsync({method:rr,params:ir,jsonrpc:"2.0",id:sr})).result}_setAddresses(er,rr){var nr;if(!Array.isArray(er))throw new Error("addresses is not an array");const ir=er.map(sr=>(0,util_1$3.ensureAddressString)(sr));JSON.stringify(ir)!==JSON.stringify(this._addresses)&&(this._addresses=ir,(nr=this.updateListener)===null||nr===void 0||nr.onAccountsUpdate({accounts:ir,source:"wallet"}),this._storage.setItem(constants_1$1.LOCAL_STORAGE_ADDRESSES_KEY,ir.join(" ")))}_sendRequestAsync(er){return new Promise((rr,nr)=>{try{const ir=this._handleSynchronousMethods(er);if(ir!==void 0)return rr({jsonrpc:"2.0",id:er.id,result:ir})}catch(ir){return nr(ir)}this._handleAsynchronousMethods(er).then(ir=>ir&&rr(Object.assign(Object.assign({},ir),{id:er.id}))).catch(ir=>nr(ir))})}_handleSynchronousMethods(er){const{method:rr}=er;switch(rr){case"eth_accounts":return this._eth_accounts();case"eth_coinbase":return this._eth_coinbase();case"net_version":return this._net_version();case"eth_chainId":return this._eth_chainId();default:return}}async _handleAsynchronousMethods(er){const{method:rr}=er,nr=er.params||[];switch(rr){case"eth_requestAccounts":return this._eth_requestAccounts();case"eth_sign":return this._eth_sign(nr);case"eth_ecRecover":return this._eth_ecRecover(nr);case"personal_sign":return this._personal_sign(nr);case"personal_ecRecover":return this._personal_ecRecover(nr);case"eth_signTransaction":return this._eth_signTransaction(nr);case"eth_sendRawTransaction":return this._eth_sendRawTransaction(nr);case"eth_sendTransaction":return this._eth_sendTransaction(nr);case"eth_signTypedData_v1":return this._eth_signTypedData_v1(nr);case"eth_signTypedData_v2":return this._throwUnsupportedMethodError();case"eth_signTypedData_v3":return this._eth_signTypedData_v3(nr);case"eth_signTypedData_v4":case"eth_signTypedData":return this._eth_signTypedData_v4(nr);case"wallet_addEthereumChain":return this._wallet_addEthereumChain(nr);case"wallet_switchEthereumChain":return this._wallet_switchEthereumChain(nr);case"wallet_watchAsset":return this._wallet_watchAsset(nr);default:return this._throwUnsupportedMethodError()}}_isKnownAddress(er){try{const rr=(0,util_1$3.ensureAddressString)(er);return this._addresses.map(ir=>(0,util_1$3.ensureAddressString)(ir)).includes(rr)}catch{}return!1}_ensureKnownAddress(er){if(!this._isKnownAddress(er))throw new Error("Unknown Ethereum address")}_prepareTransactionParams(er){const rr=er.from?(0,util_1$3.ensureAddressString)(er.from):this.selectedAddress;if(!rr)throw new Error("Ethereum address is unavailable");this._ensureKnownAddress(rr);const nr=er.to?(0,util_1$3.ensureAddressString)(er.to):null,ir=er.value!=null?(0,util_1$3.ensureBigInt)(er.value):BigInt(0),sr=er.data?(0,util_1$3.ensureBuffer)(er.data):Buffer.alloc(0),or=er.nonce!=null?(0,util_1$3.ensureIntNumber)(er.nonce):null,ar=er.gasPrice!=null?(0,util_1$3.ensureBigInt)(er.gasPrice):null,cr=er.maxFeePerGas!=null?(0,util_1$3.ensureBigInt)(er.maxFeePerGas):null,lr=er.maxPriorityFeePerGas!=null?(0,util_1$3.ensureBigInt)(er.maxPriorityFeePerGas):null,ur=er.gas!=null?(0,util_1$3.ensureBigInt)(er.gas):null,dr=er.chainId?(0,util_1$3.ensureIntNumber)(er.chainId):this.getChainId();return{fromAddress:rr,toAddress:nr,weiValue:ir,data:sr,nonce:or,gasPriceInWei:ar,maxFeePerGas:cr,maxPriorityFeePerGas:lr,gasLimit:ur,chainId:dr}}_isAuthorized(){return this._addresses.length>0}_requireAuthorization(){if(!this._isAuthorized())throw error_1$5.standardErrors.provider.unauthorized({})}_throwUnsupportedMethodError(){throw error_1$5.standardErrors.provider.unsupportedMethod({})}async _signEthereumMessage(er,rr,nr,ir){this._ensureKnownAddress(rr);try{const or=await this.initializeRelay().signEthereumMessage(er,rr,nr,ir);if((0,Web3Response_1.isErrorResponse)(or))throw new Error(or.errorMessage);return{jsonrpc:"2.0",id:0,result:or.result}}catch(sr){throw typeof sr.message=="string"&&sr.message.match(/(denied|rejected)/i)?error_1$5.standardErrors.provider.userRejectedRequest("User denied message signature"):sr}}async _ethereumAddressFromSignedMessage(er,rr,nr){const sr=await this.initializeRelay().ethereumAddressFromSignedMessage(er,rr,nr);if((0,Web3Response_1.isErrorResponse)(sr))throw new Error(sr.errorMessage);return{jsonrpc:"2.0",id:0,result:sr.result}}_eth_accounts(){return[...this._addresses]}_eth_coinbase(){return this.selectedAddress||null}_net_version(){return this.getChainId().toString(10)}_eth_chainId(){return(0,util_1$3.hexStringFromIntNumber)(this.getChainId())}getChainId(){const er=this._storage.getItem(DEFAULT_CHAIN_ID_KEY);if(!er)return(0,util_1$3.ensureIntNumber)(1);const rr=parseInt(er,10);return(0,util_1$3.ensureIntNumber)(rr)}async _eth_requestAccounts(){if(this._isAuthorized())return Promise.resolve({jsonrpc:"2.0",id:0,result:this._addresses});let er;try{if(er=await this.initializeRelay().requestEthereumAccounts(),(0,Web3Response_1.isErrorResponse)(er))throw new Error(er.errorMessage)}catch(rr){throw typeof rr.message=="string"&&rr.message.match(/(denied|rejected)/i)?error_1$5.standardErrors.provider.userRejectedRequest("User denied account authorization"):rr}if(!er.result)throw new Error("accounts received is empty");return this._setAddresses(er.result),{jsonrpc:"2.0",id:0,result:this._addresses}}_eth_sign(er){this._requireAuthorization();const rr=(0,util_1$3.ensureAddressString)(er[0]),nr=(0,util_1$3.ensureBuffer)(er[1]);return this._signEthereumMessage(nr,rr,!1)}_eth_ecRecover(er){const rr=(0,util_1$3.ensureBuffer)(er[0]),nr=(0,util_1$3.ensureBuffer)(er[1]);return this._ethereumAddressFromSignedMessage(rr,nr,!1)}_personal_sign(er){this._requireAuthorization();const rr=(0,util_1$3.ensureBuffer)(er[0]),nr=(0,util_1$3.ensureAddressString)(er[1]);return this._signEthereumMessage(rr,nr,!0)}_personal_ecRecover(er){const rr=(0,util_1$3.ensureBuffer)(er[0]),nr=(0,util_1$3.ensureBuffer)(er[1]);return this._ethereumAddressFromSignedMessage(rr,nr,!0)}async _eth_signTransaction(er){this._requireAuthorization();const rr=this._prepareTransactionParams(er[0]||{});try{const ir=await this.initializeRelay().signEthereumTransaction(rr);if((0,Web3Response_1.isErrorResponse)(ir))throw new Error(ir.errorMessage);return{jsonrpc:"2.0",id:0,result:ir.result}}catch(nr){throw typeof nr.message=="string"&&nr.message.match(/(denied|rejected)/i)?error_1$5.standardErrors.provider.userRejectedRequest("User denied transaction signature"):nr}}async _eth_sendRawTransaction(er){const rr=(0,util_1$3.ensureBuffer)(er[0]),ir=await this.initializeRelay().submitEthereumTransaction(rr,this.getChainId());if((0,Web3Response_1.isErrorResponse)(ir))throw new Error(ir.errorMessage);return{jsonrpc:"2.0",id:0,result:ir.result}}async _eth_sendTransaction(er){this._requireAuthorization();const rr=this._prepareTransactionParams(er[0]||{});try{const ir=await this.initializeRelay().signAndSubmitEthereumTransaction(rr);if((0,Web3Response_1.isErrorResponse)(ir))throw new Error(ir.errorMessage);return{jsonrpc:"2.0",id:0,result:ir.result}}catch(nr){throw typeof nr.message=="string"&&nr.message.match(/(denied|rejected)/i)?error_1$5.standardErrors.provider.userRejectedRequest("User denied transaction signature"):nr}}async _eth_signTypedData_v1(er){this._requireAuthorization();const rr=(0,util_1$3.ensureParsedJSONObject)(er[0]),nr=(0,util_1$3.ensureAddressString)(er[1]);this._ensureKnownAddress(nr);const ir=eth_eip712_util_1.default.hashForSignTypedDataLegacy({data:rr}),sr=JSON.stringify(rr,null,2);return this._signEthereumMessage(ir,nr,!1,sr)}async _eth_signTypedData_v3(er){this._requireAuthorization();const rr=(0,util_1$3.ensureAddressString)(er[0]),nr=(0,util_1$3.ensureParsedJSONObject)(er[1]);this._ensureKnownAddress(rr);const ir=eth_eip712_util_1.default.hashForSignTypedData_v3({data:nr}),sr=JSON.stringify(nr,null,2);return this._signEthereumMessage(ir,rr,!1,sr)}async _eth_signTypedData_v4(er){this._requireAuthorization();const rr=(0,util_1$3.ensureAddressString)(er[0]),nr=(0,util_1$3.ensureParsedJSONObject)(er[1]);this._ensureKnownAddress(rr);const ir=eth_eip712_util_1.default.hashForSignTypedData_v4({data:nr}),sr=JSON.stringify(nr,null,2);return this._signEthereumMessage(ir,rr,!1,sr)}async _wallet_addEthereumChain(er){var rr,nr,ir,sr;const or=er[0];if(((rr=or.rpcUrls)===null||rr===void 0?void 0:rr.length)===0)return{jsonrpc:"2.0",id:0,error:{code:2,message:"please pass in at least 1 rpcUrl"}};if(!or.chainName||or.chainName.trim()==="")throw error_1$5.standardErrors.rpc.invalidParams("chainName is a required field");if(!or.nativeCurrency)throw error_1$5.standardErrors.rpc.invalidParams("nativeCurrency is a required field");const ar=parseInt(or.chainId,16);return await this.addEthereumChain(ar,(nr=or.rpcUrls)!==null&&nr!==void 0?nr:[],(ir=or.blockExplorerUrls)!==null&&ir!==void 0?ir:[],or.chainName,(sr=or.iconUrls)!==null&&sr!==void 0?sr:[],or.nativeCurrency)?{jsonrpc:"2.0",id:0,result:null}:{jsonrpc:"2.0",id:0,error:{code:2,message:"unable to add ethereum chain"}}}async _wallet_switchEthereumChain(er){const rr=er[0];return await this.switchEthereumChain(parseInt(rr.chainId,16)),{jsonrpc:"2.0",id:0,result:null}}async _wallet_watchAsset(er){const rr=Array.isArray(er)?er[0]:er;if(!rr.type)throw error_1$5.standardErrors.rpc.invalidParams("Type is required");if((rr==null?void 0:rr.type)!=="ERC20")throw error_1$5.standardErrors.rpc.invalidParams(`Asset of type '${rr.type}' is not supported`);if(!(rr!=null&&rr.options))throw error_1$5.standardErrors.rpc.invalidParams("Options are required");if(!(rr!=null&&rr.options.address))throw error_1$5.standardErrors.rpc.invalidParams("Address is required");const nr=this.getChainId(),{address:ir,symbol:sr,image:or,decimals:ar}=rr.options;return{jsonrpc:"2.0",id:0,result:await this.watchAsset(rr.type,ir,sr,ar,or,nr)}}initializeRelay(){if(!this._relay){const er=new WalletLinkRelay_1.WalletLinkRelay({linkAPIUrl:constants_2.WALLETLINK_URL,storage:this._storage});er.setAppInfo(this._appName,this._appLogoUrl),er.attachUI(),er.setAccountsCallback((rr,nr)=>this._setAddresses(rr,nr)),er.setChainCallback((rr,nr)=>{this.updateProviderInfo(nr,parseInt(rr,10))}),this._relay=er}return this._relay}}WalletLinkSigner$1.WalletLinkSigner=WalletLinkSigner;var provider={};Object.defineProperty(provider,"__esModule",{value:!0});provider.checkErrorForInvalidRequestArgs=provider.getCoinbaseInjectedProvider=provider.getCoinbaseInjectedSigner=provider.fetchRPCRequest=void 0;const version_1$2=version,error_1$4=error;async function fetchRPCRequest(tr,er){if(!er.rpcUrl)throw error_1$4.standardErrors.rpc.internal("No RPC URL set for chain");const rr=Object.assign(Object.assign({},tr),{jsonrpc:"2.0",id:crypto.randomUUID()});return(await(await window.fetch(er.rpcUrl,{method:"POST",body:JSON.stringify(rr),mode:"cors",headers:{"Content-Type":"application/json","X-Cbw-Sdk-Version":version_1$2.LIB_VERSION}})).json()).result}provider.fetchRPCRequest=fetchRPCRequest;function getCoinbaseInjectedSigner(){return globalThis.coinbaseWalletSigner}provider.getCoinbaseInjectedSigner=getCoinbaseInjectedSigner;function getCoinbaseInjectedLegacyProvider(){return globalThis.coinbaseWalletExtension}function getInjectedEthereum(){var tr,er;try{const rr=globalThis;return(tr=rr.ethereum)!==null&&tr!==void 0?tr:(er=rr.top)===null||er===void 0?void 0:er.ethereum}catch{return}}function getCoinbaseInjectedProvider({metadata:tr,preference:er}){var rr;if(er.options!=="smartWalletOnly"){if(getCoinbaseInjectedSigner())return;const sr=getCoinbaseInjectedLegacyProvider();if(sr){const{appName:or,appLogoUrl:ar,appChainIds:cr}=tr;return(rr=sr.setAppInfo)===null||rr===void 0||rr.call(sr,or,ar,cr),sr}}const nr=getInjectedEthereum();if(nr!=null&&nr.isCoinbaseBrowser)return nr}provider.getCoinbaseInjectedProvider=getCoinbaseInjectedProvider;function checkErrorForInvalidRequestArgs(tr){if(!tr||typeof tr!="object"||Array.isArray(tr))return error_1$4.standardErrors.rpc.invalidParams({message:"Expected a single, non-array, object argument.",data:tr});const{method:er,params:rr}=tr;if(typeof er!="string"||er.length===0)return error_1$4.standardErrors.rpc.invalidParams({message:"'args.method' must be a non-empty string.",data:tr});if(rr!==void 0&&!Array.isArray(rr)&&(typeof rr!="object"||rr===null))return error_1$4.standardErrors.rpc.invalidParams({message:"'args.params' must be an object or array if provided.",data:tr})}provider.checkErrorForInvalidRequestArgs=checkErrorForInvalidRequestArgs;Object.defineProperty(util$5,"__esModule",{value:!0});util$5.createSigner=util$5.fetchSignerType=util$5.storeSignerType=util$5.loadSignerType=void 0;const SCWSigner_1=SCWSigner$1,WalletLinkSigner_1=WalletLinkSigner$1,error_1$3=error,provider_1$2=provider,ScopedLocalStorage_1$2=ScopedLocalStorage$1,SIGNER_TYPE_KEY="SignerType",storage=new ScopedLocalStorage_1$2.ScopedLocalStorage("CBWSDK","SignerConfigurator");function loadSignerType(){return storage.getItem(SIGNER_TYPE_KEY)}util$5.loadSignerType=loadSignerType;function storeSignerType(tr){storage.setItem(SIGNER_TYPE_KEY,tr)}util$5.storeSignerType=storeSignerType;async function fetchSignerType(tr){const{communicator:er,metadata:rr}=tr;listenForWalletLinkSessionRequest(er,rr).catch(()=>{});const nr={id:crypto.randomUUID(),event:"selectSignerType",data:tr.preference},{data:ir}=await er.postRequestAndWaitForResponse(nr);return ir}util$5.fetchSignerType=fetchSignerType;function createSigner(tr){const{signerType:er,metadata:rr,communicator:nr,updateListener:ir}=tr;switch(er){case"scw":return new SCWSigner_1.SCWSigner({metadata:rr,updateListener:ir,communicator:nr});case"walletlink":return new WalletLinkSigner_1.WalletLinkSigner({metadata:rr,updateListener:ir});case"extension":{const sr=(0,provider_1$2.getCoinbaseInjectedSigner)();if(!sr)throw error_1$3.standardErrors.rpc.internal("injected signer not found");return sr}}}util$5.createSigner=createSigner;async function listenForWalletLinkSessionRequest(tr,er){await tr.onMessage(({event:nr})=>nr==="WalletLinkSessionRequest");const rr=new WalletLinkSigner_1.WalletLinkSigner({metadata:er});tr.postMessage({event:"WalletLinkUpdate",data:{session:rr.getSession()}}),await rr.handshake(),tr.postMessage({event:"WalletLinkUpdate",data:{connected:!0}})}var Communicator$1={},util={};Object.defineProperty(util,"__esModule",{value:!0});util.closePopup=util.openPopup=void 0;const error_1$2=error,POPUP_WIDTH=420,POPUP_HEIGHT=540;function openPopup(tr){const er=(window.innerWidth-POPUP_WIDTH)/2+window.screenX,rr=(window.innerHeight-POPUP_HEIGHT)/2+window.screenY,nr=window.open(tr,"Smart Wallet",`width=${POPUP_WIDTH}, height=${POPUP_HEIGHT}, left=${er}, top=${rr}`);if(nr==null||nr.focus(),!nr)throw error_1$2.standardErrors.rpc.internal("Pop up window failed to open");return nr}util.openPopup=openPopup;function closePopup(tr){tr&&!tr.closed&&tr.close()}util.closePopup=closePopup;Object.defineProperty(Communicator$1,"__esModule",{value:!0});Communicator$1.Communicator=void 0;const version_1$1=version,util_1$2=util,constants_1=constants,error_1$1=error;class Communicator{constructor(er=constants_1.CB_KEYS_URL){this.popup=null,this.listeners=new Map,this.postMessage=async rr=>{(await this.waitForPopupLoaded()).postMessage(rr,this.url.origin)},this.postRequestAndWaitForResponse=async rr=>{const nr=this.onMessage(({requestId:ir})=>ir===rr.id);return this.postMessage(rr),await nr},this.onMessage=async rr=>new Promise((nr,ir)=>{const sr=or=>{if(or.origin!==this.url.origin)return;const ar=or.data;rr(ar)&&(nr(ar),window.removeEventListener("message",sr),this.listeners.delete(sr))};window.addEventListener("message",sr),this.listeners.set(sr,{reject:ir})}),this.disconnect=()=>{(0,util_1$2.closePopup)(this.popup),this.popup=null,this.listeners.forEach(({reject:rr},nr)=>{rr(error_1$1.standardErrors.provider.userRejectedRequest("Request rejected")),window.removeEventListener("message",nr)}),this.listeners.clear()},this.waitForPopupLoaded=async()=>this.popup&&!this.popup.closed?(this.popup.focus(),this.popup):(this.popup=(0,util_1$2.openPopup)(this.url),this.onMessage(({event:rr})=>rr==="PopupUnload").then(this.disconnect).catch(()=>{}),this.onMessage(({event:rr})=>rr==="PopupLoaded").then(rr=>{this.postMessage({requestId:rr.id,data:{version:version_1$1.LIB_VERSION}})}).then(()=>{if(!this.popup)throw error_1$1.standardErrors.rpc.internal();return this.popup})),this.url=new URL(er)}}Communicator$1.Communicator=Communicator;var method={};Object.defineProperty(method,"__esModule",{value:!0});method.determineMethodCategory=void 0;const mapping={handshake:["eth_requestAccounts"],sign:["eth_ecRecover","personal_sign","personal_ecRecover","eth_signTransaction","eth_sendTransaction","eth_signTypedData_v1","eth_signTypedData_v3","eth_signTypedData_v4","eth_signTypedData","wallet_addEthereumChain","wallet_switchEthereumChain","wallet_watchAsset","wallet_getCapabilities","wallet_sendCalls","wallet_showCallsStatus"],state:["eth_chainId","eth_accounts","eth_coinbase","net_version"],deprecated:["eth_sign","eth_signTypedData_v2"],unsupported:["eth_subscribe","eth_unsubscribe"],fetch:[]};function determineMethodCategory(tr){for(const er in mapping){const rr=er;if(mapping[rr].includes(tr))return rr}}method.determineMethodCategory=determineMethodCategory;var __rest=commonjsGlobal&&commonjsGlobal.__rest||function(tr,er){var rr={};for(var nr in tr)Object.prototype.hasOwnProperty.call(tr,nr)&&er.indexOf(nr)<0&&(rr[nr]=tr[nr]);if(tr!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ir=0,nr=Object.getOwnPropertySymbols(tr);ir<nr.length;ir++)er.indexOf(nr[ir])<0&&Object.prototype.propertyIsEnumerable.call(tr,nr[ir])&&(rr[nr[ir]]=tr[nr[ir]]);return rr},__importDefault=commonjsGlobal&&commonjsGlobal.__importDefault||function(tr){return tr&&tr.__esModule?tr:{default:tr}};Object.defineProperty(CoinbaseWalletProvider$1,"__esModule",{value:!0});CoinbaseWalletProvider$1.CoinbaseWalletProvider=void 0;const eventemitter3_1=__importDefault(eventemitter3Exports),error_1=error,serialize_1=serialize,type_1=type,util_1$1=util$6,util_2=util$5,provider_1$1=provider,Communicator_1=Communicator$1,method_1=method,ScopedLocalStorage_1$1=ScopedLocalStorage$1;class CoinbaseWalletProvider extends eventemitter3_1.default{constructor(er){var rr,nr,{metadata:ir}=er,sr=er.preference,{keysUrl:or}=sr,ar=__rest(sr,["keysUrl"]);super(),this.accounts=[],this.handlers={handshake:async lr=>{try{if(this.connected)return this.emit("connect",{chainId:(0,util_1$1.hexStringFromIntNumber)((0,type_1.IntNumber)(this.chain.id))}),this.accounts;const ur=await this.requestSignerSelection(),dr=this.initSigner(ur),yr=await dr.handshake();return this.signer=dr,(0,util_2.storeSignerType)(ur),this.emit("connect",{chainId:(0,util_1$1.hexStringFromIntNumber)((0,type_1.IntNumber)(this.chain.id))}),yr}catch(ur){throw this.handleUnauthorizedError(ur),ur}},sign:async lr=>{if(!this.connected||!this.signer)throw error_1.standardErrors.provider.unauthorized("Must call 'eth_requestAccounts' before other methods");try{return await this.signer.request(lr)}catch(ur){throw this.handleUnauthorizedError(ur),ur}},fetch:lr=>(0,provider_1$1.fetchRPCRequest)(lr,this.chain),state:lr=>{const ur=()=>{if(this.connected)return this.accounts;throw error_1.standardErrors.provider.unauthorized("Must call 'eth_requestAccounts' before other methods")};switch(lr.method){case"eth_chainId":return(0,util_1$1.hexStringFromIntNumber)((0,type_1.IntNumber)(this.chain.id));case"net_version":return this.chain.id;case"eth_accounts":return ur();case"eth_coinbase":return ur()[0];default:return this.handlers.unsupported(lr)}},deprecated:({method:lr})=>{throw error_1.standardErrors.rpc.methodNotSupported(`Method ${lr} is deprecated.`)},unsupported:({method:lr})=>{throw error_1.standardErrors.rpc.methodNotSupported(`Method ${lr} is not supported.`)}},this.isCoinbaseWallet=!0,this.updateListener={onAccountsUpdate:({accounts:lr,source:ur})=>{(0,util_1$1.areAddressArraysEqual)(this.accounts,lr)||(this.accounts=lr,ur!=="storage"&&this.emit("accountsChanged",this.accounts))},onChainUpdate:({chain:lr,source:ur})=>{lr.id===this.chain.id&&lr.rpcUrl===this.chain.rpcUrl||(this.chain=lr,ur!=="storage"&&this.emit("chainChanged",(0,util_1$1.hexStringFromIntNumber)((0,type_1.IntNumber)(lr.id))))}},this.metadata=ir,this.preference=ar,this.communicator=new Communicator_1.Communicator(or),this.chain={id:(nr=(rr=ir.appChainIds)===null||rr===void 0?void 0:rr[0])!==null&&nr!==void 0?nr:1};const cr=(0,util_2.loadSignerType)();this.signer=cr?this.initSigner(cr):null}get connected(){return this.accounts.length>0}async request(er){var rr;try{const nr=(0,provider_1$1.checkErrorForInvalidRequestArgs)(er);if(nr)throw nr;const ir=(rr=(0,method_1.determineMethodCategory)(er.method))!==null&&rr!==void 0?rr:"fetch";return this.handlers[ir](er)}catch(nr){return Promise.reject((0,serialize_1.serializeError)(nr,er.method))}}handleUnauthorizedError(er){er.code===error_1.standardErrorCodes.provider.unauthorized&&this.disconnect()}async enable(){return console.warn('.enable() has been deprecated. Please use .request({ method: "eth_requestAccounts" }) instead.'),await this.request({method:"eth_requestAccounts"})}async disconnect(){this.accounts=[],this.chain={id:1},ScopedLocalStorage_1$1.ScopedLocalStorage.clearAll(),this.emit("disconnect",error_1.standardErrors.provider.disconnected("User initiated disconnection"))}requestSignerSelection(){return(0,util_2.fetchSignerType)({communicator:this.communicator,preference:this.preference,metadata:this.metadata})}initSigner(er){return(0,util_2.createSigner)({signerType:er,metadata:this.metadata,communicator:this.communicator,updateListener:this.updateListener})}}CoinbaseWalletProvider$1.CoinbaseWalletProvider=CoinbaseWalletProvider;Object.defineProperty(CoinbaseWalletSDK$2,"__esModule",{value:!0});CoinbaseWalletSDK$2.CoinbaseWalletSDK=void 0;const wallet_logo_1=walletLogo$1,CoinbaseWalletProvider_1=CoinbaseWalletProvider$1,ScopedLocalStorage_1=ScopedLocalStorage$1,version_1=version,util_1=util$6,provider_1=provider;let CoinbaseWalletSDK$1=class{constructor(er){this.metadata={appName:er.appName||"Dapp",appLogoUrl:er.appLogoUrl||(0,util_1.getFavicon)(),appChainIds:er.appChainIds||[]},this.storeLatestVersion()}makeWeb3Provider(er={options:"all"}){var rr;const nr={metadata:this.metadata,preference:er};return(rr=(0,provider_1.getCoinbaseInjectedProvider)(nr))!==null&&rr!==void 0?rr:new CoinbaseWalletProvider_1.CoinbaseWalletProvider(nr)}getCoinbaseWalletLogo(er,rr=240){return(0,wallet_logo_1.walletLogo)(er,rr)}storeLatestVersion(){new ScopedLocalStorage_1.ScopedLocalStorage("CBWSDK").setItem("VERSION",version_1.LIB_VERSION)}};CoinbaseWalletSDK$2.CoinbaseWalletSDK=CoinbaseWalletSDK$1;(function(tr){Object.defineProperty(tr,"__esModule",{value:!0}),tr.CoinbaseWalletSDK=void 0;const er=CoinbaseWalletSDK$2;tr.default=er.CoinbaseWalletSDK;var rr=CoinbaseWalletSDK$2;Object.defineProperty(tr,"CoinbaseWalletSDK",{enumerable:!0,get:function(){return rr.CoinbaseWalletSDK}})})(dist);const CoinbaseWalletSDK=getDefaultExportFromCjs(dist);class BaseEvmAdapter extends BaseAdapter{async init(er){this.chainConfig||(this.chainConfig=getChainConfig(CHAIN_NAMESPACES.EIP155,1))}async authenticateUser(){if(!this.provider||this.status!==ADAPTER_STATUS.CONNECTED)throw WalletLoginError.notConnectedError();const{chainNamespace:er,chainId:rr}=this.chainConfig,nr=await this.provider.request({method:"eth_accounts"});if(nr&&nr.length>0){const ir=getSavedToken(nr[0],this.name);if(ir&&!checkIfTokenIsExpired(ir))return{idToken:ir};const sr={domain:window.location.origin,uri:window.location.href,address:nr[0],chainId:parseInt(rr,16),version:"1",nonce:Math.random().toString(36).slice(2),issuedAt:new Date().toISOString()},or=await signChallenge(sr,er),ar=`0x${Buffer.from(or,"utf8").toString("hex")}`,cr=await this.provider.request({method:"personal_sign",params:[ar,nr[0]]}),lr=await verifySignedChallenge(er,cr,or,this.name,this.sessionTime,this.clientId,this.web3AuthNetwork);return saveToken(nr[0],this.name,lr),{idToken:lr}}throw WalletLoginError.notConnectedError("Not connected with wallet, Please login/connect first")}async disconnectSession(){super.checkDisconnectionRequirements();const er=await this.provider.request({method:"eth_accounts"});er&&er.length>0&&clearToken(er[0],this.name)}async disconnect(){this.rehydrated=!1,this.emit(ADAPTER_EVENTS.DISCONNECTED)}}class CoinbaseAdapter extends BaseEvmAdapter{constructor(er={}){super(er),_defineProperty(this,"adapterNamespace",ADAPTER_NAMESPACES.EIP155),_defineProperty(this,"currentChainNamespace",CHAIN_NAMESPACES.EIP155),_defineProperty(this,"type",ADAPTER_CATEGORY.EXTERNAL),_defineProperty(this,"name",WALLET_ADAPTERS.COINBASE),_defineProperty(this,"status",ADAPTER_STATUS.NOT_READY),_defineProperty(this,"coinbaseInstance",null),_defineProperty(this,"coinbaseProvider",null),_defineProperty(this,"coinbaseOptions",{appName:"Web3Auth"}),this.setAdapterSettings(er)}get provider(){return this.status!==ADAPTER_STATUS.NOT_READY&&this.coinbaseProvider?this.coinbaseProvider:null}set provider(er){throw new Error("Not implemented")}setAdapterSettings(er){super.setAdapterSettings(er),this.coinbaseOptions=_objectSpread2(_objectSpread2({},this.coinbaseOptions),er.adapterSettings)}async init(er={}){await super.init(er),super.checkInitializationRequirements(),this.coinbaseInstance=new CoinbaseWalletSDK(_objectSpread2(_objectSpread2({},this.coinbaseOptions),{},{appChainIds:[Number.parseInt(this.chainConfig.chainId,16)]})),this.coinbaseProvider=this.coinbaseInstance.makeWeb3Provider({options:this.coinbaseOptions.options||"all"}),this.status=ADAPTER_STATUS.READY,this.emit(ADAPTER_EVENTS.READY,WALLET_ADAPTERS.COINBASE);try{er.autoConnect&&(this.rehydrated=!0,await this.connect())}catch(rr){this.emit(ADAPTER_EVENTS.ERRORED,rr)}}async connect(){if(super.checkConnectionRequirements(),!this.coinbaseProvider)throw WalletLoginError.notConnectedError("Adapter is not initialized");this.status=ADAPTER_STATUS.CONNECTING,this.emit(ADAPTER_EVENTS.CONNECTING,{adapter:WALLET_ADAPTERS.COINBASE});try{if(await this.coinbaseProvider.request({method:"eth_requestAccounts"}),await this.coinbaseProvider.request({method:"eth_chainId"})!==this.chainConfig.chainId&&(await this.addChain(this.chainConfig),await this.switchChain(this.chainConfig,!0)),this.status=ADAPTER_STATUS.CONNECTED,!this.provider)throw WalletLoginError.notConnectedError("Failed to connect with provider");return this.provider.once("disconnect",()=>{this.disconnect()}),this.emit(ADAPTER_EVENTS.CONNECTED,{adapter:WALLET_ADAPTERS.COINBASE,reconnected:this.rehydrated,provider:this.provider}),this.provider}catch(er){throw this.status=ADAPTER_STATUS.READY,this.rehydrated=!1,this.emit(ADAPTER_EVENTS.ERRORED,er),er instanceof Web3AuthError?er:WalletLoginError.connectionError("Failed to login with coinbase wallet",er)}}async disconnect(er={cleanup:!1}){var rr;await super.disconnectSession(),(rr=this.provider)===null||rr===void 0||rr.removeAllListeners(),er.cleanup?(this.status=ADAPTER_STATUS.NOT_READY,this.coinbaseProvider=null):this.status=ADAPTER_STATUS.READY,await super.disconnect()}async getUserInfo(){if(this.status!==ADAPTER_STATUS.CONNECTED)throw WalletLoginError.notConnectedError("Not connected with wallet, Please login/connect first");return{}}async addChain(er,rr=!1){super.checkAddChainRequirements(er,rr),await this.coinbaseProvider.request({method:"wallet_addEthereumChain",params:[{chainId:er.chainId,chainName:er.displayName,rpcUrls:[er.rpcTarget],blockExplorerUrls:[er.blockExplorerUrl],nativeCurrency:{name:er.tickerName,symbol:er.ticker,decimals:er.decimals||18},iconUrls:[er.logo]}]}),super.addChainConfig(er)}async switchChain(er,rr=!1){super.checkSwitchChainRequirements(er,rr),await this.coinbaseProvider.request({method:"wallet_switchEthereumChain",params:[{chainId:er.chainId}]}),this.setAdapterSettings({chainConfig:this.getChainConfig(er.chainId)})}async enableMFA(){throw new Error("Method Not implemented")}}const clientId="BBP-UuLBs-tTUxp4PwAtS2nQPW25oSLXUfAEg7H-FqTD9LOyMVgTlFDFEJLoMj2nij51yvRRCvYYeQnptrOYR_E",chainConfig={chainNamespace:CHAIN_NAMESPACES.EIP155,chainId:"0xaa36a7",rpcTarget:"https://rpc.ankr.com/eth_sepolia",displayName:"Ethereum Sepolia Testnet",blockExplorerUrl:"https://sepolia.etherscan.io",ticker:"ETH",tickerName:"Ethereum",logo:"https://cryptologos.cc/logos/ethereum-eth-logo.png"};function App(){const[tr,er]=reactExports.useState(null),[rr,nr]=reactExports.useState(!1),[ir,sr]=reactExports.useState(!1),[or,ar]=reactExports.useState(null),[cr,lr]=reactExports.useState(null);reactExports.useEffect(()=>{(async()=>{try{console.log("Initializing Web3Auth...");const mr=new EthereumPrivateKeyProvider({config:{chainConfig}}),wr=new Web3Auth({clientId,web3AuthNetwork:WEB3AUTH_NETWORK.SAPPHIRE_DEVNET,privateKeyProvider:mr}),xr=new CoinbaseAdapter({clientId,sessionTime:3600,chainConfig:{chainNamespace:CHAIN_NAMESPACES.EIP155,chainId:"0xaa36a7",rpcTarget:"https://rpc.ankr.com/eth_sepolia"},web3AuthNetwork:"sapphire_devnet"});wr.configureAdapter(xr),await wr.initModal(),console.log("Web3Auth modal initialized.");const Or=new WalletServicesPlugin({walletInitOptions:{confirmationStrategy:"modal",whiteLabel:{logoDark:"https://yourdomain.com/path-to-dark-logo.png",logoLight:"https://yourdomain.com/path-to-light-logo.png"}}});if(wr.addPlugin(Or),lr(Or),ar(wr),sr(!0),wr.connected){console.log("Web3Auth already connected.");const Tr=wr.provider;er(Tr),nr(!0)}Or&&Or.on("connected",()=>{console.log("Wallet Services Plugin connected."),nr(!0)})}catch(mr){console.error("Error during initialization:",mr instanceof Error?mr.message:mr)}})()},[]);const ur=async()=>{if(!ir||!or){console.log("Web3Auth is not initialized yet.");return}console.log("Attempting to login...");try{const yr=await or.connect();er(yr),cr&&cr.on("connected",()=>{console.log("Wallet Services Plugin connected."),nr(!0)}),nr(!0),console.log("Login successful.")}catch(yr){console.error("Error during login:",yr instanceof Error?yr.message:yr)}},dr=async()=>{or&&(console.log("Attempting to logout..."),await or.logout(),er(null),nr(!1),lr(null),console.log("Logged out successfully."))};return jsxRuntimeExports.jsx("div",{children:rr?jsxRuntimeExports.jsx(Main,{provider:tr,logout:dr,walletServicesPlugin:cr}):jsxRuntimeExports.jsx(Login,{onLogin:ur})})}client.createRoot(document.getElementById("root")).render(jsxRuntimeExports.jsx(App,{}));export{bigIntToUnpaddedBytes as A,BIGINT_0$1 as B,validateNoLeadingZeroes as C,BIGINT_8 as D,toType as E,isHexPrefixed$4 as F,intToHex$2 as G,stripHexPrefix$5 as H,eventsExports as I,intToBytes$2 as J,MAX_INTEGER as M,RLP as R,SECP256K1_ORDER_DIV_2 as S,TypeOutput$2 as T,privateToAddress as a,bigIntToBytes$1 as b,generateAddress2 as c,bytesToBigInt$1 as d,equalsBytes as e,bytesToHex$3 as f,generateAddress as g,BIGINT_2 as h,isValidAddress as i,concatBytes$2 as j,setLengthLeft as k,BIGINT_1 as l,BIGINT_27 as m,sha256$1 as n,hexToBytes$4 as o,pubToAddress as p,unpadBytes as q,publicToAddress as r,secp256k1$1 as s,toBytes$3 as t,utf8ToBytes$3 as u,bigIntToHex$3 as v,wrapHash as w,MAX_UINT64 as x,keccak256$2 as y,zeros$1 as z};
